"use strict";var Ce=Object.defineProperty,Se=Object.defineProperties,ve=Object.getOwnPropertyDescriptors,he=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable,Ee=(T,h,a)=>h in T?Ce(T,h,{enumerable:!0,configurable:!0,writable:!0,value:a}):T[h]=a,D=(T,h)=>{for(var a in h||(h={}))We.call(h,a)&&Ee(T,a,h[a]);if(he)for(var a of he(h))Re.call(h,a)&&Ee(T,a,h[a]);return T},L=(T,h)=>Se(T,ve(h));(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9628],{58775:(T,h,a)=>{a.d(h,{lG:()=>fe,q9:()=>y,my:()=>de,O3:()=>te});var O=a(26584),ne=a(66385),F=a(88071),I=a(36630);const X={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function y(e){return X[e]}function*N(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*$(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const n of t)yield*n}}function Y(e){for(const t of e)if(t.length>2)return!0;return!1}function Z(e){let t=0;for(let n=0;n<e.length;n++){const i=e[n],f=e[(n+1)%e.length];t+=i[0]*f[1]-f[0]*i[1]}return t<=0}function J(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function w(e,t,n){switch(t.type){case"LineString":return function z(e,t,n){return W(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function q(e,t,n){for(const i of t.coordinates)W(e,i,n);return e}(e,t,n);case"MultiPoint":return function le(e,t,n){return W(e,t.coordinates,n),e}(e,t,n);case"MultiPolygon":return function ue(e,t,n){for(const i of t.coordinates){V(e,i[0],n);for(let f=1;f<i.length;f++)re(e,i[f],n)}return e}(e,t,n);case"Point":return function ee(e,t,n){return x(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function ce(e,t,n){const i=t.coordinates;V(e,i[0],n);for(let f=1;f<i.length;f++)re(e,i[f],n);return e}(e,t,n)}}function V(e,t,n){const i=J(t);!function E(e){return!Z(e)}(i)?W(e,i,n):oe(e,i,n)}function re(e,t,n){const i=J(t);!function j(e){return Z(e)}(i)?W(e,i,n):oe(e,i,n)}function W(e,t,n){for(const i of t)x(e,i,n);e.lengths.push(t.length)}function oe(e,t,n){for(let i=t.length-1;i>=0;i--)x(e,t[i],n);e.lengths.push(t.length)}function x(e,t,n){const[i,f,C]=t;e.coords.push(i,f),n.hasZ&&e.coords.push(C||0)}function pe(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function te(e){if(!e)throw new O.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new O.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,i=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!i.test(n))throw new O.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function de(e,t={}){const n=[],i=new Set,f=new Set;let C,S=!1,P=null,R=!1,{geometryType:_=null}=t,r=!1;for(const s of N(e)){const{geometry:l,properties:p,id:d}=s;if((!l||(_||(_=y(l.type)),y(l.type)===_))&&(S||(S=Y($(l))),R||(R=null!=d,R&&(C=typeof d,P=Object.keys(p).filter(g=>p[g]===d))),R&&null!=d&&(P.length>1?P=P.filter(g=>p[g]===d):1===P.length&&(P=p[P[0]]===d?P:[])),!r&&p)){let g=!0;for(const c in p){if(i.has(c))continue;const b=p[c];if(null==b){g=!1,f.add(c);continue}const G=pe(b);"unknown"!==G?(f.delete(c),i.add(c),n.push({name:c,alias:c,type:G})):f.add(c)}r=g}}const o=P&&1===P.length&&P[0]||null;if(o)for(const s of n)if(s.name===o&&(0,I.H7)(s)){s.type="esriFieldTypeOID";break}return{fields:n,geometryType:_,hasZ:S,objectIdFieldName:o,objectIdFieldType:C,unknownFields:Array.from(f)}}function fe(e,t){return Array.from(function*U(e,t={}){const{geometryType:n,objectIdField:i}=t;for(const C of e){var f;const{geometry:S,properties:P,id:R}=C;if(S&&y(S.type)!==n)continue;const _=P||{};let r=null!=(f=_[i])?f:null;i&&null!=R&&!_[i]&&(_[i]=r=R),yield new ne.u_(S?w(new F.Z,S,t):null,_,null,r)}}(N(e),t))}},56554:(T,h,a)=>{a.d(h,{MS:()=>Y,Dm:()=>$,Hq:()=>U,bU:()=>X});var O=a(8314),ne=a(58817),F=a(87757),I=a(24837);function X(E){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===E||"esriGeometryMultipoint"===E?I.I4:"esriGeometryPolyline"===E?I.ET:I.lF}}}const y=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let N=1;function $(E,j){if((0,O.Z)("esri-csp-restrictions"))return()=>D({[j]:null},E);try{let Z=`this.${j} = null;`;for(const w in E)Z+=`this${y.test(w)?`.${w}`:`["${w}"]`} = ${JSON.stringify(E[w])};`;const J=new Function(`\n      return class AttributesClass$${N++} {\n        constructor() {\n          ${Z};\n        }\n      }\n    `)();return()=>new J}catch(Z){return()=>D({[j]:null},E)}}function U(E={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,ne.d9)(E)}}]}function Y(E,j){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:E},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:j,supportsDelete:j,supportsEditing:j,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:j,supportsExceedsLimitStatistics:!0},query:F.g,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:j,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},89628:(T,h,a)=>{a.d(h,{$9:()=>le,Lu:()=>q,w9:()=>ue,j:()=>ce,G4:()=>re,gp:()=>oe,eS:()=>pe,d:()=>de,yN:()=>fe,WW:()=>t});var O=a(15861),F=(a(29132),a(84792)),I=a(26584),X=a(63290),y=a(62208),N=a(37053),$=a(46367),U=a(82054),Y=a(95786),E=a(58775),j=a(56554),Z=a(60466),J=a(85),w=a(65234);const z=X.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),q="http://www.opengis.net/def/crs/",le=`${q}OGC/1.3/CRS84`;function ue(r,o){return ee.apply(this,arguments)}function ee(){return(ee=(0,O.Z)(function*(r,o,s={},l=5){const{links:p}=r,d=_(p,"items","application/geo+json")||_(p,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,y.Wi)(d))throw new I.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:g}=yield(0,F.default)(d.href,{signal:s.signal,query:L(D({limit:l},s.customParameters),{token:s.apiKey}),headers:{accept:"application/geo+json"}});yield(0,E.O3)(g);const c=(0,E.my)(g,{geometryType:o.geometryType}),b=o.fields||c.fields||[],G=null!=o.hasZ?o.hasZ:c.hasZ,H=c.geometryType,A=o.objectIdField||c.objectIdFieldName||"OBJECTID";let m=o.timeInfo;const k=b.find(u=>u.name===A);if(k)k.type="esriFieldTypeOID",k.editable=!1,k.nullable=!1;else{if(!c.objectIdFieldType)throw new I.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");b.unshift({name:A,alias:A,type:"esriFieldTypeOID",editable:!1,nullable:!1})}if(A!==c.objectIdFieldName){const u=b.find(M=>M.name===c.objectIdFieldName);u&&(u.type="esriFieldTypeInteger")}b===c.fields&&c.unknownFields.length>0&&z.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:c.unknownFields}});for(const u of b){if(null==u.name&&(u.name=u.alias),null==u.alias&&(u.alias=u.name),"esriFieldTypeOID"!==u.type&&"esriFieldTypeGlobalID"!==u.type&&(u.editable=null==u.editable||!!u.editable,u.nullable=null==u.nullable||!!u.nullable),!u.name)throw new I.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:u});if(-1===J.v.jsonValues.indexOf(u.type))throw new I.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${u.name}"`,{field:u})}if(m){const u=new Z.Z(b);if(m.startTimeField){const M=u.get(m.startTimeField);M?(m.startTimeField=M.name,M.type="esriFieldTypeDate"):m.startTimeField=null}if(m.endTimeField){const M=u.get(m.endTimeField);M?(m.endTimeField=M.name,M.type="esriFieldTypeDate"):m.endTimeField=null}if(m.trackIdField){const M=u.get(m.trackIdField);M?m.trackIdField=M.name:(m.trackIdField=null,z.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:m}}))}m.startTimeField||m.endTimeField||(z.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:m}}),m=null)}return{drawingInfo:H?(0,j.bU)(H):null,geometryType:H,fields:b,hasZ:!!G,objectIdField:A,timeInfo:m}})).apply(this,arguments)}function ce(r){return V.apply(this,arguments)}function V(){return(V=(0,O.Z)(function*(r,o={}){const{links:s}=r,l=_(s,"data","application/json")||_(s,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,y.Wi)(l))throw new I.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:p,customParameters:d,signal:g}=o,{data:c}=yield(0,F.default)(l.href,{signal:g,headers:{accept:"application/json"},query:L(D({},d),{token:p})});return c})).apply(this,arguments)}function re(r){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*(r,o={}){const{links:s}=r,l=_(s,"conformance","application/json")||_(s,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,y.Wi)(l))throw new I.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:p,customParameters:d,signal:g}=o,{data:c}=yield(0,F.default)(l.href,{signal:g,headers:{accept:"application/json"},query:L(D({},d),{token:p})});return c})).apply(this,arguments)}function oe(r){return x.apply(this,arguments)}function x(){return(x=(0,O.Z)(function*(r,o={}){const{apiKey:s,customParameters:l,signal:p}=o,{data:d}=yield(0,F.default)(r,{signal:p,headers:{accept:"application/json"},query:L(D({},l),{token:s})});return d})).apply(this,arguments)}function pe(r){return te.apply(this,arguments)}function te(){return(te=(0,O.Z)(function*(r,o={}){const s="application/vnd.oai.openapi+json;version=3.0",l=_(r.links,"service-desc",s);if((0,y.Wi)(l))return z.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:p,customParameters:d,signal:g}=o,{data:c}=yield(0,F.default)(l.href,{signal:g,headers:{accept:s},query:L(D({},d),{token:p})});return c})).apply(this,arguments)}function de(r){const o=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(r),s=null==o?void 0:o.groups;if(!s)return null;const{authority:l,code:p}=s;switch(l.toLowerCase()){case"ogc":switch(p.toLowerCase()){case"crs27":return w.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return w.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const d=Number.parseInt(p,10);return Number.isNaN(d)?null:d}default:return null}}function fe(r,o,s){return e.apply(this,arguments)}function e(){return(e=(0,O.Z)(function*(r,o,s){const l=yield t(r,o,s);return(0,U.cn)(l)})).apply(this,arguments)}function t(r,o,s){return n.apply(this,arguments)}function n(){return(n=(0,O.Z)(function*(r,o,s){const{capabilities:{query:{maxRecordCount:l}},collection:p,layerDefinition:d,queryParameters:{apiKey:g,customParameters:c},spatialReference:b,supportedCrs:G}=r,{links:H}=p,A=_(H,"items","application/geo+json")||_(H,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,y.Wi)(A))throw new I.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:m,num:k,start:u,timeExtent:M,where:Pe}=o;if(o.objectIds)throw new I.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const Ie=w.Z.fromJSON(b),Q=(0,y.Pt)(o.outSpatialReference,Ie),se=Q.isWGS84?null:f(Q,G),Me=R(m,G),Oe=S(M),je=P(Pe),Te=null!=k?k:null!=u&&void 0!==u?10:l,{data:B}=yield(0,F.default)(A.href,L(D({},s),{query:L(D(D({},c),Me),{crs:se,datetime:Oe,query:je,limit:Te,startindex:u,token:g}),headers:{accept:"application/geo+json"}}));let ie=!1;B.links&&(ie=!!B.links.find(ae=>"next"===ae.rel)),!ie&&Number.isInteger(B.numberMatched)&&Number.isInteger(B.numberReturned)&&(ie=B.numberReturned<B.numberMatched);const{fields:we,globalIdField:be,hasM:De,hasZ:ye,objectIdField:me}=d,_e=d.geometryType,ge=(0,E.lG)(B,{geometryType:_e,hasZ:ye,objectIdField:me});if(!se&&Q.isWebMercator)for(const K of ge)if((0,y.pC)(K.geometry)){const ae=(0,U.di)(K.geometry,_e,ye,!1);ae.spatialReference=w.Z.WGS84,K.geometry=(0,U.GH)((0,$.iV)(ae,Q))}for(const K of ge)K.objectId=K.attributes[me];const Fe=se||!se&&Q.isWebMercator?Q.toJSON():N.Zn,v=new Y.Z;return v.exceededTransferLimit=ie,v.features=ge,v.fields=we,v.geometryType=_e,v.globalIdFieldName=be,v.hasM=De,v.hasZ=ye,v.objectIdFieldName=me,v.spatialReference=Fe,v})).apply(this,arguments)}function f(r,o){var s,l,p;const{isWebMercator:d,wkid:g}=r;if(!g)return null;const c=d?null!=(s=null!=(l=null!=(p=o[3857])?p:o[102100])?l:o[102113])?s:o[900913]:o[r.wkid];return c?`${q}${c}`:null}function C(r){if((0,y.Wi)(r))return"";const{xmin:o,ymin:s,xmax:l,ymax:p}=r;return`${o},${s},${l},${p}`}function S(r){if((0,y.Wi)(r))return null;const{start:o,end:s}=r;return`${(0,y.pC)(o)?o.toISOString():".."}/${(0,y.pC)(s)?s.toISOString():".."}`}function P(r){return(0,y.Wi)(r)||!r||"1=1"===r?null:r}function R(r,o){if(!function i(r){return(0,y.pC)(r)&&"extent"===r.type}(r))return null;const{spatialReference:s}=r;if(!s||s.isWGS84)return{bbox:C(r)};const l=f(s,o);return(0,y.pC)(l)?{bbox:C(r),"bbox-crs":l}:s.isWebMercator?{bbox:C((0,$.iV)(r,w.Z.WGS84))}:null}function _(r,o,s){return r.find(l=>l.rel===o&&l.type===s)||r.find(l=>l.rel===o&&!l.type)}}}]);