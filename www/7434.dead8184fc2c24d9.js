"use strict";var z=Object.defineProperty,G=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,W=(d,a,e)=>a in d?z(d,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[a]=e,j=(d,a)=>{for(var e in a||(a={}))J.call(a,e)&&W(d,e,a[e]);if(L)for(var e of L(a))N.call(a,e)&&W(d,e,a[e]);return d},A=(d,a)=>G(d,Q(a));(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7434],{67434:(d,a,e)=>{e.r(a),e.d(a,{default:()=>g});var D=e(15861),m=e(17626),c=(e(8314),e(62208)),u=(e(63290),e(90912),e(85931),e(82255),e(76898)),h=e(84682),P=e(36859),B=e(39351),w=e(13112),E=e(55376);class M{constructor(s,n){this.offset=s,this.extent=n}}let y=class extends w.Z{constructor(){super(...arguments),this.type="heatmap",this._tileKeyToFeatureSets=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])}update(r,s){var n=this;return(0,D.Z)(function*(){const _=s.schema.processors[0];"heatmap"===_.type&&(0,h.Hg)(n._schema,_)&&(r.mesh=!0,n._schema=_)})()}onTileUpdate(r){for(const s of r.removed)this._tileKeyToFeatureSets.delete(s.key.id)}onTileClear(r){return this._tileKeyToFeatureSets.delete(r.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:r.id,data:{clear:!0}})}onTileMessage(r,s,n){var _=this;return(0,D.Z)(function*(){_._tileKeyToFeatureSets.has(r.key.id)||_._tileKeyToFeatureSets.set(r.key.id,new Map);const t=_._tileKeyToFeatureSets.get(r.key.id);if((0,c.pC)(s.addOrUpdate)&&s.addOrUpdate.hasFeatures&&t.set(s.addOrUpdate.instance,s),s.end){const l=[],C=function S(r){const s=r.key,n=new Map,_=256,t=B.I_,l=r.tileInfoView.tileInfo.isWrappable;return n.set((0,E.M)(s,-1,-1,l).id,new M([-t,-t],[t-_,t-_,t,t])),n.set((0,E.M)(s,0,-1,l).id,new M([0,-t],[0,t-_,t,t])),n.set((0,E.M)(s,1,-1,l).id,new M([t,-t],[0,t-_,_,t])),n.set((0,E.M)(s,-1,0,l).id,new M([-t,0],[t-_,0,t,t])),n.set((0,E.M)(s,1,0,l).id,new M([t,0],[0,0,_,t])),n.set((0,E.M)(s,-1,1,l).id,new M([-t,t],[t-_,0,t,_])),n.set((0,E.M)(s,0,1,l).id,new M([0,t],[0,0,t,_])),n.set((0,E.M)(s,1,1,l).id,new M([t,t],[0,0,_,_])),n}(r);_._tileKeyToFeatureSets.forEach((R,U)=>{if(U===r.key.id)R.forEach(K=>(0,c.yw)(K.addOrUpdate,v=>l.push(v)));else if(C.has(U)){const K=C.get(U),[v,V]=K.offset;R.forEach(Z=>(0,c.yw)(Z.addOrUpdate,x=>{const H=x.transform(v,V,1,1);l.push(H)}))}});const I=(0,P.QM)(l,_._schema.mesh,512,512),k=[I.matrix];return _.remoteClient.invoke("tileRenderer.onTileData",{tileKey:r.key.id,intensityInfo:I},A(j({},n),{transferList:k}))}})()}onTileError(r,s,n){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:r.id,error:s},n)}};y=(0,m._)([(0,u.j)("esri.views.2d.layers.features.processors.HeatmapProcessor")],y);const g=y},55376:(d,a,e)=>{function T(c,p,O,f){const i=c.clone(),u=1<<i.level,h=i.col+p,P=i.row+O;return f&&h<0?(i.col=h+u,i.world-=1):h>=u?(i.col=h-u,i.world+=1):i.col=h,i.row=P,i}e.d(a,{M:()=>T}),e(81340)}}]);