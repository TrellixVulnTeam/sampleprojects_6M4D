var yf=Object.defineProperty,_f=Object.defineProperties,gf=Object.getOwnPropertyDescriptors,Yd=Object.getOwnPropertySymbols,vf=Object.prototype.hasOwnProperty,Ef=Object.prototype.propertyIsEnumerable,Qd=(He,ve,p)=>ve in He?yf(He,ve,{enumerable:!0,configurable:!0,writable:!0,value:p}):He[ve]=p,_t=(He,ve)=>{for(var p in ve||(ve={}))vf.call(ve,p)&&Qd(He,p,ve[p]);if(Yd)for(var p of Yd(ve))Ef.call(ve,p)&&Qd(He,p,ve[p]);return He},Sr=(He,ve)=>_f(He,gf(ve));(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7852],{47423:(He,ve,p)=>{"use strict";p.d(ve,{Uw:()=>T,fo:()=>X});var g=p(15861);"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var L=(()=>{return(x=L||(L={})).Unimplemented="UNIMPLEMENTED",x.Unavailable="UNAVAILABLE",L;var x})();class D extends Error{constructor(N,M){super(N),this.message=N,this.code=M}}const W=x=>{var N,M,Q,z,ee;const le=x.CapacitorCustomPlatform||null,oe=x.Capacitor||{},ce=oe.Plugins=oe.Plugins||{},re=x.CapacitorPlatforms,ae=(null===(N=null==re?void 0:re.currentPlatform)||void 0===N?void 0:N.getPlatform)||(()=>null!==le?le.name:(x=>{var N,M;return(null==x?void 0:x.androidBridge)?"android":(null===(M=null===(N=null==x?void 0:x.webkit)||void 0===N?void 0:N.messageHandlers)||void 0===M?void 0:M.bridge)?"ios":"web"})(x)),de=(null===(M=null==re?void 0:re.currentPlatform)||void 0===M?void 0:M.isNativePlatform)||(()=>"web"!==ae()),pe=(null===(Q=null==re?void 0:re.currentPlatform)||void 0===Q?void 0:Q.isPluginAvailable)||(Ue=>{const he=be.get(Ue);return!(!(null==he?void 0:he.platforms.has(ae()))&&!te(Ue))}),te=(null===(z=null==re?void 0:re.currentPlatform)||void 0===z?void 0:z.getPluginHeader)||(Ue=>{var he;return null===(he=oe.PluginHeaders)||void 0===he?void 0:he.find(Me=>Me.name===Ue)}),be=new Map,Ke=(null===(ee=null==re?void 0:re.currentPlatform)||void 0===ee?void 0:ee.registerPlugin)||((Ue,he={})=>{const Me=be.get(Ue);if(Me)return console.warn(`Capacitor plugin "${Ue}" already registered. Cannot register plugins twice.`),Me.proxy;const Le=ae(),Je=te(Ue);let Oe;const xe=function(){var Qe=(0,g.Z)(function*(){return!Oe&&Le in he?Oe=Oe="function"==typeof he[Le]?yield he[Le]():he[Le]:null!==le&&!Oe&&"web"in he&&(Oe=Oe="function"==typeof he.web?yield he.web():he.web),Oe});return function(){return Qe.apply(this,arguments)}}(),Y=Qe=>{let Xe;const qe=(...ke)=>{const dt=xe().then(We=>{const nt=((Qe,Xe)=>{var qe,ke;if(!Je){if(Qe)return null===(ke=Qe[Xe])||void 0===ke?void 0:ke.bind(Qe);throw new D(`"${Ue}" plugin is not implemented on ${Le}`,L.Unimplemented)}{const dt=null==Je?void 0:Je.methods.find(We=>Xe===We.name);if(dt)return"promise"===dt.rtype?We=>oe.nativePromise(Ue,Xe.toString(),We):(We,nt)=>oe.nativeCallback(Ue,Xe.toString(),We,nt);if(Qe)return null===(qe=Qe[Xe])||void 0===qe?void 0:qe.bind(Qe)}})(We,Qe);if(nt){const ht=nt(...ke);return Xe=null==ht?void 0:ht.remove,ht}throw new D(`"${Ue}.${Qe}()" is not implemented on ${Le}`,L.Unimplemented)});return"addListener"===Qe&&(dt.remove=(0,g.Z)(function*(){return Xe()})),dt};return qe.toString=()=>`${Qe.toString()}() { [capacitor code] }`,Object.defineProperty(qe,"name",{value:Qe,writable:!1,configurable:!1}),qe},me=Y("addListener"),Ie=Y("removeListener"),$e=(Qe,Xe)=>{const qe=me({eventName:Qe},Xe),ke=function(){var We=(0,g.Z)(function*(){const nt=yield qe;Ie({eventName:Qe,callbackId:nt},Xe)});return function(){return We.apply(this,arguments)}}(),dt=new Promise(We=>qe.then(()=>We({remove:ke})));return dt.remove=(0,g.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield ke()}),dt},rt=new Proxy({},{get(Qe,Xe){switch(Xe){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Je?$e:me;case"removeListener":return Ie;default:return Y(Xe)}}});return ce[Ue]=rt,be.set(Ue,{name:Ue,proxy:rt,platforms:new Set([...Object.keys(he),...Je?[Le]:[]])}),rt});return oe.convertFileSrc||(oe.convertFileSrc=Ue=>Ue),oe.getPlatform=ae,oe.handleError=Ue=>x.console.error(Ue),oe.isNativePlatform=de,oe.isPluginAvailable=pe,oe.pluginMethodNoop=(Ue,he,Me)=>Promise.reject(`${Me} does not have an implementation of "${he}".`),oe.registerPlugin=Ke,oe.Exception=D,oe.DEBUG=!!oe.DEBUG,oe.isLoggingEnabled=!!oe.isLoggingEnabled,oe.platform=oe.getPlatform(),oe.isNative=oe.isNativePlatform(),oe},Z=(x=>x.Capacitor=W(x))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),X=Z.registerPlugin;class T{constructor(N){this.listeners={},this.windowListeners={},N&&(console.warn(`Capacitor WebPlugin "${N.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=N)}addListener(N,M){var Q=this;this.listeners[N]||(this.listeners[N]=[]),this.listeners[N].push(M);const ee=this.windowListeners[N];ee&&!ee.registered&&this.addWindowListener(ee);const le=function(){var ce=(0,g.Z)(function*(){return Q.removeListener(N,M)});return function(){return ce.apply(this,arguments)}}(),oe=Promise.resolve({remove:le});return Object.defineProperty(oe,"remove",{value:(ce=(0,g.Z)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield le()}),function(){return ce.apply(this,arguments)})}),oe;var ce}removeAllListeners(){var N=this;return(0,g.Z)(function*(){N.listeners={};for(const M in N.windowListeners)N.removeWindowListener(N.windowListeners[M]);N.windowListeners={}})()}notifyListeners(N,M){const Q=this.listeners[N];Q&&Q.forEach(z=>z(M))}hasListeners(N){return!!this.listeners[N].length}registerWindowListener(N,M){this.windowListeners[M]={registered:!1,windowEventName:N,pluginEventName:M,handler:Q=>{this.notifyListeners(M,Q)}}}unimplemented(N="not implemented"){return new Z.Exception(N,L.Unimplemented)}unavailable(N="not available"){return new Z.Exception(N,L.Unavailable)}removeListener(N,M){var Q=this;return(0,g.Z)(function*(){const z=Q.listeners[N];if(!z)return;const ee=z.indexOf(M);Q.listeners[N].splice(ee,1),Q.listeners[N].length||Q.removeWindowListener(Q.windowListeners[N])})()}addWindowListener(N){window.addEventListener(N.windowEventName,N.handler),N.registered=!0}removeWindowListener(N){!N||(window.removeEventListener(N.windowEventName,N.handler),N.registered=!1)}}},9509:(He,ve,p)=>{"use strict";p.d(ve,{Z5:()=>cn,mv:()=>N,AA:()=>nt,yM:()=>zt,xE:()=>Qr,K3:()=>Tt,h:()=>dt,GH:()=>cr,YY:()=>Zt});var g=p(15861);let j,C,$,I=!1,W=!1,k=!1,Z=!1,X=null,w=!1;const T="undefined"!=typeof window?window:{},x=T.document||{head:{}},N=T.HTMLElement||class{},M={$flags$:0,$resourcesUrl$:"",jmp:Ne=>Ne(),raf:Ne=>requestAnimationFrame(Ne),ael:(Ne,ze,ct,it)=>Ne.addEventListener(ze,ct,it),rel:(Ne,ze,ct,it)=>Ne.removeEventListener(ze,ct,it),ce:(Ne,ze)=>new CustomEvent(Ne,ze)},ee=(()=>{let Ne=!1;try{x.addEventListener("e",null,Object.defineProperty({},"passive",{get(){Ne=!0}}))}catch(ze){}return Ne})(),oe=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(Ne){}return!1})(),re=(Ne,ze,ct,it)=>{ct&&ct.map(([Ot,wt,we])=>{const Fe=ae(Ne,Ot),tt=K(ze,we),Mt=se(Ot);M.ael(Fe,wt,tt,Mt),(ze.$rmListeners$=ze.$rmListeners$||[]).push(()=>M.rel(Fe,wt,tt,Mt))})},K=(Ne,ze)=>ct=>{try{Ne.$hostElement$[ze](ct)}catch(it){Cs(it)}},ae=(Ne,ze)=>4&ze?x:8&ze?T:16&ze?x.body:Ne,se=Ne=>ee?{passive:0!=(1&Ne),capture:0!=(2&Ne)}:0!=(2&Ne),ye="http://www.w3.org/1999/xlink",Le=new WeakMap,Oe=(Ne,ze,ct,it)=>{let Ot=Be(ze,ct),wt=Zs.get(Ot);if(Ne=11===Ne.nodeType?Ne:x,wt)if("string"==typeof wt){let Fe,we=Le.get(Ne=Ne.head||Ne);we||Le.set(Ne,we=new Set),we.has(Ot)||(Fe=x.createElement("style"),Fe.innerHTML=wt,Ne.insertBefore(Fe,Ne.querySelector("link")),we&&we.add(Ot))}else!Ne.adoptedStyleSheets.includes(wt)&&(Ne.adoptedStyleSheets=[...Ne.adoptedStyleSheets,wt]);return Ot},Be=(Ne,ze)=>"sc-"+(ze&&32&Ne.$flags$?Ne.$tagName$+"-"+ze:Ne.$tagName$),rt={},ke=Ne=>"object"==(Ne=typeof Ne)||"function"===Ne,dt=(Ne,ze,...ct)=>{let it=null,Ot=null,wt=null,we=!1,Fe=!1,tt=[];const Mt=or=>{for(let Cr=0;Cr<or.length;Cr++)it=or[Cr],Array.isArray(it)?Mt(it):null!=it&&"boolean"!=typeof it&&((we="function"!=typeof Ne&&!ke(it))&&(it=String(it)),we&&Fe?tt[tt.length-1].$text$+=it:tt.push(we?We(null,it):it),Fe=we)};if(Mt(ct),ze&&(ze.key&&(Ot=ze.key),ze.name&&(wt=ze.name),true)){const or=ze.className||ze.class;or&&(ze.class="object"!=typeof or?or:Object.keys(or).filter(Cr=>or[Cr]).join(" "))}if("function"==typeof Ne)return Ne(null===ze?{}:ze,tt,mt);const Ht=We(Ne,null);return Ht.$attrs$=ze,tt.length>0&&(Ht.$children$=tt),Ht.$key$=Ot,Ht.$name$=wt,Ht},We=(Ne,ze)=>{const ct={$flags$:0,$tag$:Ne,$text$:ze,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return ct},nt={},ht=Ne=>Ne&&Ne.$tag$===nt,mt={forEach:(Ne,ze)=>Ne.map(Kt).forEach(ze),map:(Ne,ze)=>Ne.map(Kt).map(ze).map(Bt)},Kt=Ne=>({vattrs:Ne.$attrs$,vchildren:Ne.$children$,vkey:Ne.$key$,vname:Ne.$name$,vtag:Ne.$tag$,vtext:Ne.$text$}),Bt=Ne=>{if("function"==typeof Ne.vtag){const ct=Object.assign({},Ne.vattrs);return Ne.vkey&&(ct.key=Ne.vkey),Ne.vname&&(ct.name=Ne.vname),dt(Ne.vtag,ct,...Ne.vchildren||[])}const ze=We(Ne.vtag,Ne.vtext);return ze.$attrs$=Ne.vattrs,ze.$children$=Ne.vchildren,ze.$key$=Ne.vkey,ze.$name$=Ne.vname,ze},qt=(Ne,ze,ct,it,Ot,wt)=>{if(ct!==it){let we=Is(Ne,ze),Fe=ze.toLowerCase();if("class"===ze){const tt=Ne.classList,Mt=er(ct),Ht=er(it);tt.remove(...Mt.filter(or=>or&&!Ht.includes(or))),tt.add(...Ht.filter(or=>or&&!Mt.includes(or)))}else if("style"===ze){for(const tt in ct)(!it||null==it[tt])&&(tt.includes("-")?Ne.style.removeProperty(tt):Ne.style[tt]="");for(const tt in it)(!ct||it[tt]!==ct[tt])&&(tt.includes("-")?Ne.style.setProperty(tt,it[tt]):Ne.style[tt]=it[tt])}else if("key"!==ze)if("ref"===ze)it&&it(Ne);else if(Ne.__lookupSetter__(ze)||"o"!==ze[0]||"n"!==ze[1]){{const tt=ke(it);if((we||tt&&null!==it)&&!Ot)try{if(Ne.tagName.includes("-"))Ne[ze]=it;else{let Ht=null==it?"":it;"list"===ze?we=!1:(null==ct||Ne[ze]!=Ht)&&(Ne[ze]=Ht)}}catch(Ht){}let Mt=!1;Fe!==(Fe=Fe.replace(/^xlink\:?/,""))&&(ze=Fe,Mt=!0),null==it||!1===it?(!1!==it||""===Ne.getAttribute(ze))&&(Mt?Ne.removeAttributeNS(ye,ze):Ne.removeAttribute(ze)):(!we||4&wt||Ot)&&!tt&&(it=!0===it?"":it,Mt?Ne.setAttributeNS(ye,ze,it):Ne.setAttribute(ze,it))}}else ze="-"===ze[2]?ze.slice(3):Is(T,Fe)?Fe.slice(2):Fe[2]+ze.slice(3),ct&&M.rel(Ne,ze,ct,!1),it&&M.ael(Ne,ze,it,!1)}},gr=/\s/,er=Ne=>Ne?Ne.split(gr):[],vr=(Ne,ze,ct,it)=>{const Ot=11===ze.$elm$.nodeType&&ze.$elm$.host?ze.$elm$.host:ze.$elm$,wt=Ne&&Ne.$attrs$||rt,we=ze.$attrs$||rt;for(it in wt)it in we||qt(Ot,it,wt[it],void 0,ct,ze.$flags$);for(it in we)qt(Ot,it,wt[it],we[it],ct,ze.$flags$)},pr=(Ne,ze,ct,it)=>{let we,Fe,tt,Ot=ze.$children$[ct],wt=0;if(!I&&(k=!0,"slot"===Ot.$tag$&&(j&&it.classList.add(j+"-s"),Ot.$flags$|=Ot.$children$?2:1)),null!==Ot.$text$)we=Ot.$elm$=x.createTextNode(Ot.$text$);else if(1&Ot.$flags$)we=Ot.$elm$=x.createTextNode("");else{if(!Z&&(Z="svg"===Ot.$tag$),we=Ot.$elm$=x.createElementNS(Z?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Ot.$flags$?"slot-fb":Ot.$tag$),Z&&"foreignObject"===Ot.$tag$&&(Z=!1),vr(null,Ot,Z),(Ne=>null!=Ne)(j)&&we["s-si"]!==j&&we.classList.add(we["s-si"]=j),Ot.$children$)for(wt=0;wt<Ot.$children$.length;++wt)Fe=pr(Ne,Ot,wt,we),Fe&&we.appendChild(Fe);"svg"===Ot.$tag$?Z=!1:"foreignObject"===we.tagName&&(Z=!0)}return we["s-hn"]=$,3&Ot.$flags$&&(we["s-sr"]=!0,we["s-cr"]=C,we["s-sn"]=Ot.$name$||"",tt=Ne&&Ne.$children$&&Ne.$children$[ct],tt&&tt.$tag$===Ot.$tag$&&Ne.$elm$&&hr(Ne.$elm$,!1)),we},hr=(Ne,ze)=>{M.$flags$|=1;const ct=Ne.childNodes;for(let it=ct.length-1;it>=0;it--){const Ot=ct[it];Ot["s-hn"]!==$&&Ot["s-ol"]&&(Dt(Ot).insertBefore(Ot,Ft(Ot)),Ot["s-ol"].remove(),Ot["s-ol"]=void 0,k=!0),ze&&hr(Ot,ze)}M.$flags$&=-2},st=(Ne,ze,ct,it,Ot,wt)=>{let Fe,we=Ne["s-cr"]&&Ne["s-cr"].parentNode||Ne;for(we.shadowRoot&&we.tagName===$&&(we=we.shadowRoot);Ot<=wt;++Ot)it[Ot]&&(Fe=pr(null,ct,Ot,Ne),Fe&&(it[Ot].$elm$=Fe,we.insertBefore(Fe,Ft(ze))))},ft=(Ne,ze,ct,it,Ot)=>{for(;ze<=ct;++ze)(it=Ne[ze])&&(Ot=it.$elm$,Ze(it),W=!0,Ot["s-ol"]?Ot["s-ol"].remove():hr(Ot,!0),Ot.remove())},Lt=(Ne,ze)=>Ne.$tag$===ze.$tag$&&("slot"===Ne.$tag$?Ne.$name$===ze.$name$:Ne.$key$===ze.$key$),Ft=Ne=>Ne&&Ne["s-ol"]||Ne,Dt=Ne=>(Ne["s-ol"]?Ne["s-ol"]:Ne).parentNode,Vt=(Ne,ze)=>{const ct=ze.$elm$=Ne.$elm$,it=Ne.$children$,Ot=ze.$children$,wt=ze.$tag$,we=ze.$text$;let Fe;null!==we?(Fe=ct["s-cr"])?Fe.parentNode.textContent=we:Ne.$text$!==we&&(ct.data=we):(Z="svg"===wt||"foreignObject"!==wt&&Z,"slot"===wt||vr(Ne,ze,Z),null!==it&&null!==Ot?((Ne,ze,ct,it)=>{let Hr,ss,Ot=0,wt=0,we=0,Fe=0,tt=ze.length-1,Mt=ze[0],Ht=ze[tt],or=it.length-1,Cr=it[0],Kr=it[or];for(;Ot<=tt&&wt<=or;)if(null==Mt)Mt=ze[++Ot];else if(null==Ht)Ht=ze[--tt];else if(null==Cr)Cr=it[++wt];else if(null==Kr)Kr=it[--or];else if(Lt(Mt,Cr))Vt(Mt,Cr),Mt=ze[++Ot],Cr=it[++wt];else if(Lt(Ht,Kr))Vt(Ht,Kr),Ht=ze[--tt],Kr=it[--or];else if(Lt(Mt,Kr))("slot"===Mt.$tag$||"slot"===Kr.$tag$)&&hr(Mt.$elm$.parentNode,!1),Vt(Mt,Kr),Ne.insertBefore(Mt.$elm$,Ht.$elm$.nextSibling),Mt=ze[++Ot],Kr=it[--or];else if(Lt(Ht,Cr))("slot"===Mt.$tag$||"slot"===Kr.$tag$)&&hr(Ht.$elm$.parentNode,!1),Vt(Ht,Cr),Ne.insertBefore(Ht.$elm$,Mt.$elm$),Ht=ze[--tt],Cr=it[++wt];else{for(we=-1,Fe=Ot;Fe<=tt;++Fe)if(ze[Fe]&&null!==ze[Fe].$key$&&ze[Fe].$key$===Cr.$key$){we=Fe;break}we>=0?(ss=ze[we],ss.$tag$!==Cr.$tag$?Hr=pr(ze&&ze[wt],ct,we,Ne):(Vt(ss,Cr),ze[we]=void 0,Hr=ss.$elm$),Cr=it[++wt]):(Hr=pr(ze&&ze[wt],ct,wt,Ne),Cr=it[++wt]),Hr&&Dt(Mt.$elm$).insertBefore(Hr,Ft(Mt.$elm$))}Ot>tt?st(Ne,null==it[or+1]?null:it[or+1].$elm$,ct,it,wt,or):wt>or&&ft(ze,Ot,tt)})(ct,it,ze,Ot):null!==Ot?(null!==Ne.$text$&&(ct.textContent=""),st(ct,null,ze,Ot,0,Ot.length-1)):null!==it&&ft(it,0,it.length-1),Z&&"svg"===wt&&(Z=!1))},Gt=Ne=>{let ct,it,Ot,wt,we,Fe,ze=Ne.childNodes;for(it=0,Ot=ze.length;it<Ot;it++)if(ct=ze[it],1===ct.nodeType){if(ct["s-sr"])for(we=ct["s-sn"],ct.hidden=!1,wt=0;wt<Ot;wt++)if(Fe=ze[wt].nodeType,ze[wt]["s-hn"]!==ct["s-hn"]||""!==we){if(1===Fe&&we===ze[wt].getAttribute("slot")){ct.hidden=!0;break}}else if(1===Fe||3===Fe&&""!==ze[wt].textContent.trim()){ct.hidden=!0;break}Gt(ct)}},Qt=[],gt=Ne=>{let ze,ct,it,Ot,wt,we,Fe=0,tt=Ne.childNodes,Mt=tt.length;for(;Fe<Mt;Fe++){if(ze=tt[Fe],ze["s-sr"]&&(ct=ze["s-cr"])&&ct.parentNode)for(it=ct.parentNode.childNodes,Ot=ze["s-sn"],we=it.length-1;we>=0;we--)ct=it[we],!ct["s-cn"]&&!ct["s-nr"]&&ct["s-hn"]!==ze["s-hn"]&&(ut(ct,Ot)?(wt=Qt.find(Ht=>Ht.$nodeToRelocate$===ct),W=!0,ct["s-sn"]=ct["s-sn"]||Ot,wt?wt.$slotRefNode$=ze:Qt.push({$slotRefNode$:ze,$nodeToRelocate$:ct}),ct["s-sr"]&&Qt.map(Ht=>{ut(Ht.$nodeToRelocate$,ct["s-sn"])&&(wt=Qt.find(or=>or.$nodeToRelocate$===ct),wt&&!Ht.$slotRefNode$&&(Ht.$slotRefNode$=wt.$slotRefNode$))})):Qt.some(Ht=>Ht.$nodeToRelocate$===ct)||Qt.push({$nodeToRelocate$:ct}));1===ze.nodeType&&gt(ze)}},ut=(Ne,ze)=>1===Ne.nodeType?null===Ne.getAttribute("slot")&&""===ze||Ne.getAttribute("slot")===ze:Ne["s-sn"]===ze||""===ze,Ze=Ne=>{Ne.$attrs$&&Ne.$attrs$.ref&&Ne.$attrs$.ref(null),Ne.$children$&&Ne.$children$.map(Ze)},ot=(Ne,ze)=>{const ct=Ne.$hostElement$,it=Ne.$cmpMeta$,Ot=Ne.$vnode$||We(null,null),wt=ht(ze)?ze:dt(null,null,ze);if($=ct.tagName,it.$attrsToReflect$&&(wt.$attrs$=wt.$attrs$||{},it.$attrsToReflect$.map(([we,Fe])=>wt.$attrs$[Fe]=ct[we])),wt.$tag$=null,wt.$flags$|=4,Ne.$vnode$=wt,wt.$elm$=Ot.$elm$=ct.shadowRoot||ct,j=ct["s-sc"],C=ct["s-cr"],I=0!=(1&it.$flags$),W=!1,Vt(Ot,wt),M.$flags$|=1,k){gt(wt.$elm$);let we,Fe,tt,Mt,Ht,or,Cr=0;for(;Cr<Qt.length;Cr++)we=Qt[Cr],Fe=we.$nodeToRelocate$,Fe["s-ol"]||(tt=x.createTextNode(""),tt["s-nr"]=Fe,Fe.parentNode.insertBefore(Fe["s-ol"]=tt,Fe));for(Cr=0;Cr<Qt.length;Cr++)if(we=Qt[Cr],Fe=we.$nodeToRelocate$,we.$slotRefNode$){for(Mt=we.$slotRefNode$.parentNode,Ht=we.$slotRefNode$.nextSibling,tt=Fe["s-ol"];tt=tt.previousSibling;)if(or=tt["s-nr"],or&&or["s-sn"]===Fe["s-sn"]&&Mt===or.parentNode&&(or=or.nextSibling,!or||!or["s-nr"])){Ht=or;break}(!Ht&&Mt!==Fe.parentNode||Fe.nextSibling!==Ht)&&Fe!==Ht&&(!Fe["s-hn"]&&Fe["s-ol"]&&(Fe["s-hn"]=Fe["s-ol"].parentNode.nodeName),Mt.insertBefore(Fe,Ht))}else 1===Fe.nodeType&&(Fe.hidden=!0)}W&&Gt(wt.$elm$),M.$flags$&=-2,Qt.length=0},zt=(Ne,ze,ct)=>{const it=Ne;return{emit:Ot=>Yt(it,ze,{bubbles:!!(4&ct),composed:!!(2&ct),cancelable:!!(1&ct),detail:Ot})}},Yt=(Ne,ze,ct)=>{const it=M.ce(ze,ct);return Ne.dispatchEvent(it),it},Rt=(Ne,ze)=>{Ne.$flags$|=16;const ct=()=>Ut(Ne,ze);return Dr(ct)},Ut=(Ne,ze)=>{const ct=Ne.$hostElement$,it=()=>{},Ot=ct;let wt;return ze?(Ms(ct,"componentWillLoad"),wt=es(Ot,"componentWillLoad")):(Ms(ct,"componentWillUpdate"),wt=es(Ot,"componentWillUpdate")),Ms(ct,"componentWillRender"),wt=bs(wt,()=>es(Ot,"componentWillRender")),it(),bs(wt,()=>Jt(Ne,Ot,ze))},Jt=function(){var Ne=(0,g.Z)(function*(ze,ct,it){const Ot=ze.$hostElement$,wt=()=>{};it&&(Ne=>{const ze=Ne.$cmpMeta$,ct=Ne.$hostElement$,it=ze.$flags$,Ot=()=>{},wt=Oe(ct.shadowRoot?ct.shadowRoot:ct.getRootNode(),ze,Ne.$modeName$);10&it&&(ct["s-sc"]=wt,ct.classList.add(wt+"-h"),2&it&&ct.classList.add(wt+"-s")),Ot()})(ze);const Fe=()=>{};nr(ze,ct,Ot),Fe(),wt(),Gr(ze)});return function(ct,it,Ot){return Ne.apply(this,arguments)}}(),nr=(Ne,ze,ct)=>{try{X=ze,ze=ze.render&&ze.render(),Ne.$flags$&=-17,Ne.$flags$|=2,ot(Ne,ze)}catch(Fe){Cs(Fe,Ne.$hostElement$)}return X=null,null},Gr=Ne=>{const ct=Ne.$hostElement$,it=()=>{},Ot=ct;es(Ot,"componentDidRender"),Ms(ct,"componentDidRender"),64&Ne.$flags$?(es(Ot,"componentDidUpdate"),Ms(ct,"componentDidUpdate"),it()):(Ne.$flags$|=64,es(Ot,"componentDidLoad"),Ms(ct,"componentDidLoad"),it())},Qr=Ne=>{{const ze=Br(Ne),ct=ze.$hostElement$.isConnected;return ct&&2==(18&ze.$flags$)&&Rt(ze,!1),ct}},es=(Ne,ze,ct)=>{if(Ne&&Ne[ze])try{return Ne[ze](ct)}catch(it){Cs(it)}},bs=(Ne,ze)=>Ne&&Ne.then?Ne.then(ze):ze(),Ms=(Ne,ze)=>{},ls=(Ne,ze,ct)=>{if(ze.$members$){Ne.watchers&&(ze.$watchers$=Ne.watchers);const it=Object.entries(ze.$members$),Ot=Ne.prototype;it.map(([wt,[we]])=>{(31&we||32&we)&&Object.defineProperty(Ot,wt,{get(){return((Ne,ze)=>Br(this).$instanceValues$.get(ze))(0,wt)},set(Fe){((Ne,ze,ct,it)=>{const Ot=Br(Ne),wt=Ne,we=Ot.$instanceValues$.get(ze),Fe=Ot.$flags$,tt=wt;if(ct=((Ne,ze)=>null==Ne||ke(Ne)?Ne:4&ze?"false"!==Ne&&(""===Ne||!!Ne):2&ze?parseFloat(Ne):1&ze?String(Ne):Ne)(ct,it.$members$[ze][0]),ct!==we&&(Ot.$instanceValues$.set(ze,ct),1)){if(it.$watchers$&&128&Fe){const Mt=it.$watchers$[ze];Mt&&Mt.map(Ht=>{try{tt[Ht](ct,we,ze)}catch(or){Cs(or,wt)}})}if(2==(18&Fe)){if(tt.componentShouldUpdate&&!1===tt.componentShouldUpdate(ct,we,ze))return;Rt(Ot,!1)}}})(this,wt,Fe,ze)},configurable:!0,enumerable:!0})});{const wt=new Map;Ot.attributeChangedCallback=function(we,Fe,tt){M.jmp(()=>{const Mt=wt.get(we);if(this.hasOwnProperty(Mt))tt=this[Mt],delete this[Mt];else if(Ot.hasOwnProperty(Mt)&&"number"==typeof this[Mt]&&this[Mt]==tt)return;this[Mt]=(null!==tt||"boolean"!=typeof this[Mt])&&tt})},Ne.observedAttributes=it.filter(([we,Fe])=>15&Fe[0]).map(([we,Fe])=>{const tt=Fe[1]||we;return wt.set(tt,we),512&Fe[0]&&ze.$attrsToReflect$.push([we,tt]),tt})}}return Ne},Qs=function(){var Ne=(0,g.Z)(function*(ze,ct,it,Ot,wt){if(0==(32&ct.$flags$)&&(wt=ze.constructor,ct.$flags$|=32,customElements.whenDefined(it.$tagName$).then(()=>ct.$flags$|=128),wt.style)){let tt=wt.style;"string"!=typeof tt&&(tt=tt[ct.$modeName$=(Ne=>rn.map(ze=>ze(Ne)).find(ze=>!!ze))(ze)]);const Mt=Be(it,ct.$modeName$);if(!Zs.has(Mt)){const Ht=()=>{};((Ne,ze,ct)=>{let it=Zs.get(Ne);oe&&ct?(it=it||new CSSStyleSheet,it.replace(ze)):it=ze,Zs.set(Ne,it)})(Mt,tt,!!(1&it.$flags$)),Ht()}}const Fe=()=>Rt(ct,!0);Fe()});return function(ct,it,Ot,wt,we){return Ne.apply(this,arguments)}}(),Ds=Ne=>{},Wt=Ne=>{const ze=Ne["s-cr"]=x.createComment("");ze["s-cn"]=!0,Ne.insertBefore(ze,Ne.firstChild)},cr=(Ne,ze)=>{const ct={$flags$:ze[0],$tagName$:ze[1]};ct.$members$=ze[2],ct.$listeners$=ze[3],ct.$watchers$=Ne.$watchers$,ct.$attrsToReflect$=[];const it=Ne.prototype.connectedCallback,Ot=Ne.prototype.disconnectedCallback;return Object.assign(Ne.prototype,{__registerHost(){is(this,ct)},connectedCallback(){(Ne=>{if(0==(1&M.$flags$)){const ze=Br(Ne),ct=ze.$cmpMeta$,it=()=>{};if(1&ze.$flags$)re(Ne,ze,ct.$listeners$),Ds(ze.$lazyInstance$);else{let Ot;ze.$flags$|=1,!Ot&&12&ct.$flags$&&Wt(Ne),ct.$members$&&Object.entries(ct.$members$).map(([wt,[we]])=>{if(31&we&&Ne.hasOwnProperty(wt)){const Fe=Ne[wt];delete Ne[wt],Ne[wt]=Fe}}),Qs(Ne,ze,ct)}it()}})(this),it&&it.call(this)},disconnectedCallback(){(Ne=>{if(0==(1&M.$flags$)){const ze=Br(Ne);ze.$rmListeners$&&(ze.$rmListeners$.map(it=>it()),ze.$rmListeners$=void 0)}})(this),Ot&&Ot.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&ct.$flags$)})}}),Ne.is=ct.$tagName$,ls(Ne,ct)},Tt=Ne=>{const ze=new URL(Ne,M.$resourcesUrl$);return ze.origin!==T.location.origin?ze.href:ze.pathname},Zt=Ne=>M.$resourcesUrl$=Ne,_s=new WeakMap,Br=Ne=>_s.get(Ne),is=(Ne,ze)=>{const ct={$flags$:0,$hostElement$:Ne,$cmpMeta$:ze,$instanceValues$:new Map};return re(Ne,ct,ze.$listeners$),_s.set(Ne,ct)},Is=(Ne,ze)=>ze in Ne,Cs=(Ne,ze)=>(0,console.error)(Ne,ze),Zs=new Map,rn=[],ds=[],on=[],bt=(Ne,ze)=>ct=>{Ne.push(ct),w||(w=!0,ze&&4&M.$flags$?Xr(Pr):M.raf(Pr))},Xt=Ne=>{for(let ze=0;ze<Ne.length;ze++)try{Ne[ze](performance.now())}catch(ct){Cs(ct)}Ne.length=0},Pr=()=>{Xt(ds),Xt(on),(w=ds.length>0)&&M.raf(Pr)},Xr=Ne=>Promise.resolve(void 0).then(Ne),Dr=bt(on,!0),cn={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},97852:(He,ve,p)=>{"use strict";p.r(ve),p.d(ve,{HomePageModule:()=>pf});var g=p(69808),b=p(38118),J=p(34182),B=p(10501),j=p(15861),C=p(17626),$=p(88879),L=p(76687),D=p(48701),I=p(46882),W=p(26584),k=p(8314),Z=p(56354),X=p(63290),V=p(62208),w=p(10699),T=p(32917),O=p(23841),x=p(14889),N=p(59289),M=p(77712),Q=p(85931),z=p(90912),ee=p(76898),le=p(2004),oe=p(49672),ce=p(54614),re=p(37053),K=p(2584),ae=p(35575),se=p(72392);const de={widthBreakpoint:{getValue(v){const E=v.viewSize[0],P=v.breakpoints,F=this.values;return E<=P.xsmall?F.xsmall:E<=P.small?F.small:E<=P.medium?F.medium:E<=P.large?F.large:F.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(v){const E=v.viewSize[1],P=v.breakpoints,F=this.values;return E<=P.xsmall?F.xsmall:E<=P.small?F.small:E<=P.medium?F.medium:E<=P.large?F.large:F.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(v){const E=v.viewSize,ne=this.values;return E[1]>=E[0]?ne.portrait:ne.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},ue={xsmall:544,small:768,medium:992,large:1200};function ie(v,E){return E?de[v].valueToClassName[E].split(" "):[]}const te=v=>{let E=class extends v{constructor(...P){super(...P),this._breakpointsHandles=new se.Z,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=ue}initialize(){this._breakpointsHandles.add((0,T.YP)(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),T.nn))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=(0,V.SC)(this._breakpointsHandles))}set breakpoints(P){if(P===this._get("breakpoints"))return;const F=function pe(v){return v&&v.xsmall<v.small&&v.small<v.medium&&v.medium<v.large}(P);if(!F){const ne=JSON.stringify(ue,null,2);console.warn("provided breakpoints are not valid, using defaults:"+ne)}this._set("breakpoints",_t({},P=F?P:ue))}_updateClassNames(){if(!this.container)return;const P=ae.Z.acquire(),F=ae.Z.acquire();let ne,_e=!1;for(ne in de){const Se=this[ne],je=de[ne].getValue({viewSize:this.size,breakpoints:this.breakpoints});Se!==je&&(_e=!0,this[ne]=je,ie(ne,Se).forEach(Ye=>F.push(Ye)),ie(ne,je).forEach(Ye=>P.push(Ye)))}_e&&(this._applyClassNameChanges(P,F),ae.Z.release(P),ae.Z.release(F))}_applyClassNameChanges(P,F){const ne=this.container;ne&&(F.forEach(_e=>ne.classList.remove(_e)),P.forEach(_e=>ne.classList.add(_e)))}_removeActiveClassNames(){const P=this.container;if(!P)return;let F;for(F in de)ie(F,this[F]).forEach(ne=>P.classList.remove(ne))}};return(0,C._)([(0,M.Cb)()],E.prototype,"breakpoints",null),(0,C._)([(0,M.Cb)()],E.prototype,"orientation",void 0),(0,C._)([(0,M.Cb)()],E.prototype,"widthBreakpoint",void 0),(0,C._)([(0,M.Cb)()],E.prototype,"heightBreakpoint",void 0),E=(0,C._)([(0,ee.j)("esri.views.BreakpointsOwner")],E),E};var Ee=p(40764),fe=p(50618),be=p(14517),Ke=(p(50645),p(62996)),Ue=p(70257);let he=class extends be.Z{constructor(){super(...arguments),this.items=new D.Z,this._watchUpdatingTracking=new Ue.t,this._callbacks=new Map,this._projector=(0,Ke.E)(),this._hiddenProjector=(0,Ke.E)()}get needsRender(){return this.items.length>0}initialize(){const v=document.createElement("div");v.className="esri-overlay-surface",this._set("surface",v),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),v.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,E=>{for(const P of E.added){const F=()=>P.render();this._callbacks.set(P,F),this._projector.append(this.surface,F)}for(const P of E.removed){const F=this._projector.detach(this._callbacks.get(P));this.surface.removeChild(F.domNode),this._callbacks.delete(P)}})}addItem(v){this.items.add(v)}removeItem(v){this.items.remove(v)}destroy(){this.items.removeAll(),this._callbacks.forEach(v=>this._projector.detach(v)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(v){const E=this._hiddenSurface,P=this._hiddenProjector;let F=null;const ne=()=>(F=v.render(),F);P.append(E,ne),P.renderNow();const _e={left:0,top:0,right:0,bottom:0};if(F&&F.domNode){const Se=F.domNode.getBoundingClientRect();_e.left=Se.left,_e.top=Se.top,_e.right=Se.right,_e.bottom=Se.bottom}for(P.detach(ne);E.firstChild;)E.removeChild(E.firstChild);return _e}overlaps(v,E){const P=this.computeBoundingRect(v),F=this.computeBoundingRect(E);return Math.max(P.left,F.left)<=Math.min(P.right,F.right)&&Math.max(P.top,F.top)<=Math.min(P.bottom,F.bottom)}get hasVisibleItems(){return this.items.some(v=>v.visible)}renderCanvas(v){if(!this.items.some(P=>P.visible))return;const E=v.getContext("2d");E.save(),E.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(P=>{E.save(),P.renderCanvas(E),E.restore()}),E.restore()}};(0,C._)([(0,M.Cb)({readOnly:!0})],he.prototype,"surface",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],he.prototype,"items",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],he.prototype,"needsRender",null),(0,C._)([(0,M.Cb)({readOnly:!0})],he.prototype,"_watchUpdatingTracking",void 0),(0,C._)([(0,M.Cb)({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],he.prototype,"updating",void 0),he=(0,C._)([(0,ee.j)("esri.views.overlay.ViewOverlay")],he);const Me=he;p(52515);var Je=p(17770),Oe=p(7074),xe=p(27e3),Be=p(83960),Y=p(66656),me=p(6785),Ie=p(27306),$e=p(21286),rt=p(77275),Xe=(p(16730),p(15348));const qt=["B","kB","MB","GB","TB"];var er=p(80542),vr=p(87183),pr=p(67736),hr=p(88411),st=p(36630),ft=p(66845),St=p(46679);const Ft=X.Z.getLogger("esri.widgets.Feature.support.featureUtils"),Dt=/href=(""|'')/gi,Vt=/(\{([^\{\r\n]+)\})/g,Gt=/\'/g,Qt=/^\s*expression\//i,gt=/(\n)/gi,ut=/[\u00A0-\u9999<>\&]/gim,Ze=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,ot=/^(?:mailto:|tel:)/,Pe="relationships/",Ge=(0,hr.Ze)("short-date-short-time");function vt(v){if(!(0,V.Wi)(v))return v.get("sourceLayer")||v.get("layer")}function zt(v,E){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,j.Z)(function*(v,E){return"function"==typeof v?v.call(null,E):v})).apply(this,arguments)}function et(v=""){if(v)return!ot.test(v.trim().toLowerCase())}function Rt(v){return!!v&&Qt.test(v)}function Jt(v,E){const P=function Ut(v,E){if(!Rt(E)||!v)return null;const P=E.replace(Qt,"").toLowerCase();let F;return v.some(ne=>ne.name.toLowerCase()===P&&(F=ne,!0)),F}(E,null==v?void 0:v.fieldName);return P?P.title||null:v?v.label||v.fieldName:null}function Gr(v,E){const P=Zr(E,v);return P?P.name:v}function Zr(v,E){return v&&"function"==typeof v.getField?v.getField(E):null}function es(v){return`${v}`.trim()}function bs({attributes:v,globalAttributes:E,layer:P,text:F,expressionAttributes:ne,fieldInfoMap:_e}){return F?Ms({formattedAttributes:E,template:Ls(F,_t(_t(_t({},E),ne),v),P),fieldInfoMap:_e}):""}function Ms({formattedAttributes:v,template:E,fieldInfoMap:P}){return es(function Tr(v){return v.replace(Dt,"")}((0,rt.gx)((0,rt.gx)(E,F=>function nr(v,E){const P=E.get(v.toLowerCase());return`{${P&&P.fieldName||v}}`}(F,P)),v)))}function en(v,E){return v.replace(Vt,(P,F,ne)=>{const _e=Zr(E,ne);return _e?`{${_e.name}}`:F})}function Ls(v,E,P){const F=en(v,P);return F&&F.replace(Ze,(ne,_e,Se)=>function fn(v,E,P){const F=(E=es(E))&&"{"!==E[0];return(0,rt.gx)(v,function Ys(v,E=!1){const P=_t({},v);return Object.keys(P).forEach(F=>function ys(v,E,P=!1){const F=E[v];if("string"==typeof F){const ne="%27",_e=(P?encodeURIComponent(F):F).replace(Gt,ne);E[v]=_e}}(F,P,E)),P}(P,F))}(ne,_e||Se,E))}function Qs(v,E){const F=E.fieldName,ne=Ds(E.fieldInfos,F),_e=null==ne?void 0:ne.clone(),Se=E.preventPlacesFormatting,je=E.layer,Ye=Zr(je,F);if(_e&&"date"===(null==Ye?void 0:Ye.type)){const Pt=_e.format||new ft.Z;Pt.dateFormat=Pt.dateFormat||"short-date-short-time",Pt.dateTimeFormatOptions=function Ns(v){return"feature"===(null==v?void 0:v.type)}(je)&&je.datesInUnknownTimezone||function ls(v){return!(null==v||!v.layer)}(je)&&function tn(v){return"map-image"===(null==v?void 0:v.type)}(je.layer)&&je.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,_e.format=Pt}const yt=_e&&_e.format;return"string"==typeof(v=function ws(v,E){if("string"==typeof v&&E&&null==E.dateFormat&&(null!=E.places||null!=E.digitSeparator)){const P=Number(v);if(!isNaN(P))return P}return v}(v,yt))||null==v||null==yt?Er(v):Se?(0,Xe.uf)(v,Sr(_t({},(0,Xe.sh)(yt)),{minimumFractionDigits:0,maximumFractionDigits:20})):yt.format(v)}function Ds(v,E){if(!v||!v.length||!E)return;const P=E.toLowerCase();let F;return v.some(ne=>!(!ne.fieldName||ne.fieldName.toLowerCase()!==P||(F=ne,0))),F}function cr(v){const E=[];if(!v)return E;const{fieldInfos:P,content:F}=v;return P&&E.push(...P),F&&Array.isArray(F)&&F.forEach(ne=>{if("fields"===ne.type){const _e=ne&&ne.fieldInfos;_e&&E.push(..._e)}}),E}function br(v){return v.replace(ut,E=>`&#${E.charCodeAt(0)};`)}function Er(v){return"string"==typeof v?v.replace(gt,'<br class="esri-text-new-line" />'):v}function Ar({fieldInfos:v,attributes:E,layer:P,graphic:F,fieldInfoMap:ne,relatedInfos:_e}){const Se={};return null==_e||_e.forEach(je=>function _r(v,E){v&&E&&(E.relatedFeatures&&E.relatedFeatures&&E.relatedFeatures.forEach(P=>lr({attributes:v,graphic:P,relatedInfo:E})),E.relatedStatsFeatures&&E.relatedStatsFeatures&&E.relatedStatsFeatures.forEach(P=>lr({attributes:v,graphic:P,relatedInfo:E})))}(Se,je)),Object.keys(E).forEach(je=>{Se[je]=function fr(v){const{value:E,fieldName:P,fieldInfos:F,fieldInfoMap:ne,layer:_e,graphic:Se}=v;if(null==E)return"";const je=function Wt({fieldName:v,value:E,graphic:P,layer:F}){if(Tt(v)||!F||"function"!=typeof F.getFieldDomain)return null;const ne=F.getFieldDomain(v,{feature:P});return ne&&"coded-value"===ne.type?ne.getName(E):null}({fieldName:P,value:E,graphic:Se,layer:_e});if(je)return je;const Ye=function De({fieldName:v,graphic:E,layer:P}){if(Tt(v)||!P||"function"!=typeof P.getFeatureType)return null;const{typeIdField:F}=P;if(!F||v!==F)return null;const ne=P.getFeatureType(E);return ne?ne.name:null}({fieldName:P,graphic:Se,layer:_e});if(Ye)return Ye;if(ne.get(P.toLowerCase()))return Qs(E,{fieldInfos:F,fieldName:P,layer:_e});const yt=_e&&_e.fieldsIndex;return yt&&yt.isDateField(P)?(0,hr.p6)(E,Ge):Er(E)}({fieldName:je,fieldInfos:v,fieldInfoMap:ne,layer:P,value:E[je],graphic:F})}),Se}function Ur(v,E){return Or.apply(this,arguments)}function Or(){return(Or=(0,j.Z)(function*(v,E){var P,F;const{layer:ne,graphic:_e,outFields:Se,objectIds:je,returnGeometry:Ye,spatialReference:yt}=v,Pt=je[0];if("number"!=typeof Pt&&"string"!=typeof Pt)return Ft.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:ne,graphic:_e,objectId:Pt,requiredFields:Se}),null;if(null==(P=ne.capabilities)||null==(F=P.operations)||!F.supportsQuery)return Ft.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:ne,graphic:_e,requiredFields:Se,returnGeometry:Ye}),null;const jt=ne.createQuery();return jt.objectIds=je,jt.outFields=null!=Se&&Se.length?Se:[ne.objectIdField],jt.returnGeometry=!!Ye,jt.returnZ=!!Ye,jt.returnM=!!Ye,jt.outSpatialReference=yt,(yield ne.queryFeatures(jt,E)).features[0]})).apply(this,arguments)}function At(v){return at.apply(this,arguments)}function at(){return(at=(0,j.Z)(function*(v){var E;if(null==(E=v.expressionInfos)||!E.length)return!1;const P=yield(0,St.LC)(),{arcadeUtils:{hasGeometryFunctions:F}}=P;return F(v)})).apply(this,arguments)}function lt(){return(lt=(0,j.Z)(function*({graphic:v,popupTemplate:E,layer:P,spatialReference:F},ne){if(!P||!E||("function"==typeof P.load&&(yield P.load(ne)),!v.attributes))return;const _e=v.attributes[P.objectIdField];if(null==_e)return;const Se=[_e],je=yield E.getRequiredFields(P.fieldsIndex),Ye=(0,st.R9)(je,v),yt=Ye?[]:je,Pt=E.returnGeometry||(yield At(E));if(Ye&&!Pt)return;const jt=yield Ur({layer:P,graphic:v,outFields:yt,objectIds:Se,returnGeometry:Pt,spatialReference:F},ne);jt&&(jt.geometry&&(v.geometry=jt.geometry),jt.attributes&&(v.attributes=_t(_t({},v.attributes),jt.attributes)))})).apply(this,arguments)}function Tt(v=""){return!!v&&-1!==v.indexOf(Pe)}function lr({attributes:v,graphic:E,relatedInfo:P}){v&&E&&P&&Object.keys(E.attributes).forEach(F=>{const ne=function Zt(v){return v?`${Pe}${v.layerId}/${v.fieldName}`:""}({layerId:P.relation.id.toString(),fieldName:F});v[ne]=E.attributes[F]})}const ur=v=>{if(!v)return!1;const E=v.toUpperCase();return E.indexOf("CURRENT_TIMESTAMP")>-1||E.indexOf("CURRENT_DATE")>-1||E.indexOf("CURRENT_TIME")>-1},xr=({layer:v,method:E,query:P,definitionExpression:F})=>{var ne,_e;if(null==(ne=v.capabilities)||null==(_e=ne.query)||!_e.supportsCacheHint||"attachments"===E)return;const Se=(0,V.pC)(P.where)&&P.where,je=(0,V.pC)(P.geometry)&&P.geometry;ur(F)||ur(Se)||"extent"===(null==je?void 0:je.type)||"tile"===P.resultType||(P.cacheHint=!0)},us={editing:!1,operations:{add:!0,update:!0,delete:!0}},Ir=D.Z.ofType(vr.Z);let Br=class extends er.r{constructor(v){super(v),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities=_t({},us),this.activeAttachmentInfo=null,this.attachmentInfos=new Ir,this.graphic=null,this.mode="view",this.handles.add([(0,xe.S1)(this,"graphic",()=>this._graphicChanged())])}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(v){return _t(_t({},us),v)}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get("graphic.layer.capabilities.operations.supportsResizeAttachments")||!1}getAttachments(){var v=this;return(0,j.Z)(function*(){const{_attachmentLayer:E,attachmentInfos:P}=v;if(!E||"function"!=typeof E.queryAttachments)throw new W.Z("invalid-layer","getAttachments(): A valid layer is required.");const F=v._getFeatureId(),ne=new pr.Z({objectIds:[F],returnMetadata:!0}),_e=[],Se=E.queryAttachments(ne).then(Ye=>Ye[F]||_e).catch(()=>_e);v._getAttachmentsPromise=Se,v.notifyChange("state");const je=yield Se;return P.removeAll(),je.length&&P.addMany(je),v._getAttachmentsPromise=null,v.notifyChange("state"),je})()}addAttachment(v){var E=this;return(0,j.Z)(function*(){const{_attachmentLayer:P,attachmentInfos:F,graphic:ne,abilities:_e}=E;if(!v)throw new W.Z("invalid-attachment","addAttachment(): An attachment is required.",{attachment:v});if(!_e.operations.add)throw new W.Z("invalid-abilities","addAttachment(): add abilities are required.");if(!P||"function"!=typeof P.addAttachment)throw new W.Z("invalid-layer","addAttachment(): A valid layer is required.");const Se=P.addAttachment(ne,v).then(Ye=>E._queryAttachment(Ye.objectId)),je=yield Se;return F.add(je),je})()}deleteAttachment(v){var E=this;return(0,j.Z)(function*(){const{_attachmentLayer:P,attachmentInfos:F,graphic:ne,abilities:_e}=E;if(!v)throw new W.Z("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:v});if(!_e.operations.delete)throw new W.Z("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!P||"function"!=typeof P.deleteAttachments)throw new W.Z("invalid-layer","deleteAttachment(): A valid layer is required.");const Se=P.deleteAttachments(ne,[v.id]).then(()=>v),je=yield Se;return F.remove(je),je})()}updateAttachment(v,E=this.activeAttachmentInfo){var P=this;return(0,j.Z)(function*(){const{_attachmentLayer:F,attachmentInfos:ne,graphic:_e,abilities:Se}=P;if(!v)throw new W.Z("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:v});if(!E)throw new W.Z("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:E});if(!Se.operations.update)throw new W.Z("invalid-abilities","updateAttachment(): Update abilities are required.");const je=ne.findIndex(Pt=>Pt===E);if(!F||"function"!=typeof F.updateAttachment)throw new W.Z("invalid-layer","updateAttachment(): A valid layer is required.");const Ye=F.updateAttachment(_e,E.id,v).then(Pt=>P._queryAttachment(Pt.objectId)),yt=yield Ye;return ne.splice(je,1,yt),yt})()}_queryAttachment(v){var E=this;return(0,j.Z)(function*(){if(!v)throw new W.Z("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:P}=E,F=E._getFeatureId(),ne=new pr.Z({objectIds:[F],attachmentsWhere:`AttachmentId=${v}`,returnMetadata:!0});return P.queryAttachments(ne).then(_e=>_e[F][0])})()}_getFeatureId(){const{_attachmentLayer:v,graphic:E}=this;if(!v||!E)return null;const{objectIdField:P}=v,{attributes:F}=E;return F&&F[P]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:v}=this,E=vt(v);this._attachmentLayer=E?"scene"===E.type&&(0,V.pC)(E.associatedLayer)?E.associatedLayer:E:null}};(0,C._)([(0,M.Cb)()],Br.prototype,"abilities",void 0),(0,C._)([(0,Y.p)("abilities")],Br.prototype,"castAbilities",null),(0,C._)([(0,M.Cb)()],Br.prototype,"activeAttachmentInfo",void 0),(0,C._)([(0,M.Cb)({readOnly:!0,type:Ir})],Br.prototype,"attachmentInfos",void 0),(0,C._)([(0,M.Cb)({type:$.Z})],Br.prototype,"graphic",void 0),(0,C._)([(0,M.Cb)()],Br.prototype,"mode",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Br.prototype,"state",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Br.prototype,"supportsResizeAttachments",null),Br=(0,C._)([(0,ee.j)("esri.widgets.Attachments.AttachmentsViewModel")],Br);const Ss=Br;var is=p(54346),ts=p(38570),$r=p(25552),Nt=p(94450);const zs={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Xs=window.CSS;let gs=class extends me.Z{constructor(v,E){super(v,E),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new Ss,this.visibleElements=_t({},zs),this._supportsImageOrientation=Xs&&Xs.supports&&Xs.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own((0,xe.on)(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),(0,xe.S1)(this,"viewModel.mode",()=>this._modeChanged()))}get effectiveDisplayType(){const{displayType:v}=this;return v&&"auto"!==v?v:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(v){return _t(_t({},zs),v)}addAttachment(){const{_addAttachmentForm:v,viewModel:E}=this;return this._set("submitting",!0),this._set("error",null),E.addAttachment(v).then(P=>(this._set("submitting",!1),this._set("error",null),E.mode="view",P)).catch(P=>{throw this._set("submitting",!1),this._set("error",new W.Z("attachments:add-attachment",this.messages.addErrorMessage,P)),P})}deleteAttachment(v){const{viewModel:E}=this;return this._set("submitting",!0),this._set("error",null),E.deleteAttachment(v).then(P=>(this._set("submitting",!1),this._set("error",null),E.mode="view",P)).catch(P=>{throw this._set("submitting",!1),this._set("error",new W.Z("attachments:delete-attachment",this.messages.deleteErrorMessage,P)),P})}updateAttachment(){const{viewModel:v}=this,{_updateAttachmentForm:E}=this;return this._set("submitting",!0),this._set("error",null),v.updateAttachment(E).then(P=>(this._set("submitting",!1),this._set("error",null),v.mode="view",P)).catch(P=>{throw this._set("submitting",!1),this._set("error",new W.Z("attachments:update-attachment",this.messages.updateErrorMessage,P)),P})}render(){const{submitting:v,viewModel:E}=this,{state:P}=E;return(0,Nt.u)("div",{class:this.classes("esri-attachments","esri-widget")},v?this.renderProgressBar():null,"loading"===P?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:v,visibleElements:E}=this;return v&&E.errorMessage?(0,Nt.u)("div",{key:"error-message",class:"esri-attachments__error-message"},v.message):null}renderAttachments(){const{mode:v,activeAttachmentInfo:E}=this.viewModel;return"add"===v?this.renderAddForm():"edit"===v?this.renderDetailsForm(E):this.renderAttachmentContainer()}renderLoading(){return(0,Nt.u)("div",{class:"esri-attachments__loader-container",key:"loader"},(0,Nt.u)("div",{class:"esri-attachments__loader"}))}renderProgressBar(){return this.visibleElements.progressBar?(0,Nt.u)("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null}renderAddForm(){const{submitting:v,selectedFile:E}=this,P=v||!E,F=this.visibleElements.cancelAddButton?(0,Nt.u)("button",{type:"button",bind:this,disabled:v,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",v&&"esri-button--disabled")},this.messages.cancel):null,ne=this.visibleElements.addSubmitButton?(0,Nt.u)("button",{type:"submit",disabled:P,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{"esri-button--disabled":P})},this.messages.add):null,_e=E?(0,Nt.u)("span",{key:"file-name",class:"esri-attachments__file-name"},E.name):null,Se=(0,Nt.u)("form",{bind:this,afterCreate:ts.Yo,afterRemoved:ts.pV,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},(0,Nt.u)("fieldset",{class:"esri-attachments__file-fieldset"},_e,(0,Nt.u)("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},E?this.messages.changeFile:this.messages.selectFile,(0,Nt.u)("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),ne,F);return(0,Nt.u)("div",{key:"add-form-container",class:"esri-attachments__form-node"},Se)}renderDetailsForm(v){const{visibleElements:E,viewModel:P,selectedFile:F,submitting:ne}=this,{contentType:_e,size:Se,url:je}=v,{abilities:Ye}=P,yt=ne||!F,Pt=Ye.editing&&Ye.operations.delete&&E.deleteButton?(0,Nt.u)("button",{key:"delete-button",type:"button",disabled:ne,bind:this,onclick:hs=>this._submitDeleteAttachment(hs,v),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{"esri-button--disabled":ne})},this.messages.delete):null,jt=Ye.editing&&Ye.operations.update&&E.updateButton?(0,Nt.u)("button",{disabled:yt,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{"esri-button--disabled":yt})},this.messages.update):null,tr=this.visibleElements.cancelUpdateButton?(0,Nt.u)("button",{disabled:ne,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{"esri-button--disabled":ne})},this.messages.cancel):null,rr=F?(0,Nt.u)("span",{key:"file-name",class:"esri-attachments__file-name"},F.name):null,wr=Ye.editing&&Ye.operations.update?(0,Nt.u)("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},rr,(0,Nt.u)("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,(0,Nt.u)("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,Jr=(0,Nt.u)("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},(0,Nt.u)("label",null,function gr(v,E){let P=0===E?0:Math.floor(Math.log(E)/Math.log(Ie.Y8.KILOBYTES));P=(0,$e.uZ)(P,0,qt.length-1);const F=(0,Xe.uf)(E/Ie.Y8.KILOBYTES**P,{maximumFractionDigits:2});return(0,rt.gx)(v.units.bytes[qt[P]],{fileSize:F})}(this.messagesUnits,Se))),kr=(0,Nt.u)("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},(0,Nt.u)("label",null,_e)),as=(0,Nt.u)("form",{bind:this,afterCreate:ts.Yo,afterRemoved:ts.pV,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},(0,Nt.u)("div",{class:"esri-attachments__metadata"},Jr,kr),wr,(0,Nt.u)("div",{class:"esri-attachments__actions"},Pt,tr,jt));return(0,Nt.u)("div",{key:"edit-form-container",class:"esri-attachments__form-node"},(0,Nt.u)("a",{class:"esri-attachments__item-link",href:je,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:v,size:400}),(0,Nt.u)("div",{class:"esri-attachments__item-link-overlay"},(0,Nt.u)("span",{class:"esri-attachments__item-link-overlay-icon"},(0,Nt.u)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},(0,Nt.u)("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),(0,Nt.u)("path",{fill:"none",d:"M0 0h32v32H0z"}))))),as)}renderImageMask({attachmentInfo:v,size:E}){const{supportsResizeAttachments:P}=this.viewModel,{contentType:F,name:ne,url:_e}=v,Se=P&&function Is(v){const E=v.toLowerCase();return"image/bmp"===E||"image/emf"===E||"image/exif"===E||"image/gif"===E||"image/x-icon"===E||"image/jpeg"===E||"image/png"===E||"image/tiff"===E||"image/x-wmf"===E}(F),je=this._getCSSTransform(v,Se),Ye=je?{transform:je,"image-orientation":"none"}:{},yt=-1===_e.indexOf("?")?"?":"&",Pt=Se?`${_e}${yt}w=${E}`:function Cs(v){const E=(0,is.V)("esri/themes/base/images/files/");return v?"text/plain"===v?`${E}text-32.svg`:"application/pdf"===v?`${E}pdf-32.svg`:"text/csv"===v?`${E}csv-32.svg`:"application/gpx+xml"===v?`${E}gpx-32.svg`:"application/x-dwf"===v?`${E}cad-32.svg`:"application/postscript"===v||"application/json"===v||"text/xml"===v||"model/vrml"===v?`${E}code-32.svg`:"application/x-zip-compressed"===v||"application/x-7z-compressed"===v||"application/x-gzip"===v||"application/x-tar"===v||"application/x-gtar"===v||"application/x-bzip2"===v||"application/gzip"===v||"application/x-compress"===v||"application/x-apple-diskimage"===v||"application/x-rar-compressed"===v||"application/zip"===v?`${E}zip-32.svg`:-1!==v.indexOf("image/")?`${E}image-32.svg`:-1!==v.indexOf("audio/")?`${E}sound-32.svg`:-1!==v.indexOf("video/")?`${E}video-32.svg`:-1!==v.indexOf("msexcel")||-1!==v.indexOf("ms-excel")||-1!==v.indexOf("spreadsheetml")?`${E}excel-32.svg`:-1!==v.indexOf("msword")||-1!==v.indexOf("ms-word")||-1!==v.indexOf("wordprocessingml")?`${E}word-32.svg`:-1!==v.indexOf("powerpoint")||-1!==v.indexOf("presentationml")?`${E}report-32.svg`:`${E}generic-32.svg`:`${E}generic-32.svg`}(F),tr={"esri-attachments__image--resizable":P};return(0,Nt.u)("div",{class:this.classes({"esri-attachments__item-mask--icon":!Se},"esri-attachments__item-mask")},(0,Nt.u)("img",{styles:Ye,alt:ne,src:Pt,class:this.classes(tr,"esri-attachments__image")}))}renderAttachmentInfo({attachmentInfo:v,displayType:E}){const{viewModel:P}=this,{abilities:F}=P,{name:ne,url:_e}=v,Se=this.renderImageMask({attachmentInfo:v,size:"list"===E?48:400}),je=F.editing?(0,Nt.u)("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",(0,ts.dZ)(this.container)?"esri-icon-left":"esri-icon-right")}):null,Ye=[Se,(0,Nt.u)("label",{class:"esri-attachments__label"},(0,Nt.u)("span",{class:"esri-attachments__filename"},ne||this.messages.noTitle),je)],yt=F.editing?(0,Nt.u)("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":v.id,onclick:()=>this._startEditAttachment(v),type:"button"},Ye):(0,Nt.u)("a",{key:"details-link",class:"esri-attachments__item-button",href:_e,target:"_blank"},Ye);return(0,Nt.u)("li",{class:"esri-attachments__item",key:v},yt)}renderAttachmentContainer(){const{effectiveDisplayType:v,viewModel:E,visibleElements:P}=this,{attachmentInfos:F,abilities:ne}=E,_e=F&&F.length,Se={"esri-attachments__container--list":"preview"!==v,"esri-attachments__container--preview":"preview"===v},je=ne.editing&&ne.operations.add&&P.addButton?(0,Nt.u)("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},(0,Nt.u)("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):null,Ye=_e?(0,Nt.u)("ul",{class:"esri-attachments__items"},F.toArray().map(yt=>this.renderAttachmentInfo({attachmentInfo:yt,displayType:v}))):(0,Nt.u)("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return(0,Nt.u)("div",{key:"attachments-container",class:this.classes("esri-attachments__container",Se)},Ye,je)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(v){const E=v.target,P=E&&E.files&&E.files.item(0);this._set("selectedFile",P)}_submitDeleteAttachment(v,E){v.preventDefault(),this.deleteAttachment(E)}_submitAddAttachment(v){v.preventDefault(),this.addAttachment()}_submitUpdateAttachment(v){v.preventDefault(),this.updateAttachment()}_startEditAttachment(v){const{viewModel:E}=this;E.activeAttachmentInfo=v,E.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(v){v.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(v,E){const{orientationInfo:P}=v;return!this._supportsImageOrientation&&E&&P?[P.rotation?`rotate(${P.rotation}deg)`:"",P.mirrored?"scaleX(-1)":""].join(" "):""}};(0,C._)([(0,Be.B)("viewModel.abilities")],gs.prototype,"abilities",void 0),(0,C._)([(0,M.Cb)()],gs.prototype,"displayType",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],gs.prototype,"effectiveDisplayType",null),(0,C._)([(0,Be.B)("viewModel.graphic")],gs.prototype,"graphic",void 0),(0,C._)([(0,M.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],gs.prototype,"label",void 0),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/widgets/Attachments/t9n/Attachments")],gs.prototype,"messages",void 0),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/core/t9n/Units")],gs.prototype,"messagesUnits",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],gs.prototype,"selectedFile",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],gs.prototype,"submitting",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],gs.prototype,"error",void 0),(0,C._)([(0,M.Cb)({type:Ss})],gs.prototype,"viewModel",void 0),(0,C._)([(0,M.Cb)()],gs.prototype,"visibleElements",void 0),(0,C._)([(0,Y.p)("visibleElements")],gs.prototype,"castVisibleElements",null),gs=(0,C._)([(0,ee.j)("esri.widgets.Attachments")],gs);const Zs=gs;let rn=class extends Ss{constructor(v){super(v),this.description=null,this.title=null}};(0,C._)([(0,M.Cb)()],rn.prototype,"description",void 0),(0,C._)([(0,M.Cb)()],rn.prototype,"title",void 0),rn=(0,C._)([(0,ee.j)("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],rn);const ds=rn;function an(v,E){const P=function bt(v){return(0,$e.uZ)(Math.ceil(v),1,6)}(v.level),F=`h${P}`;return delete v.level,(0,Nt.u)(F,Sr(_t({},v),{class:(0,ts.Sh)("esri-widget__heading",v.class),role:"heading","aria-level":String(P)}),E)}let Pr=class extends me.Z{constructor(v,E){super(v,E),this.description=null,this.headingLevel=2,this.title=null}render(){return(0,Nt.u)("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:v}=this;return v?(0,Nt.u)(an,{level:this.headingLevel,class:"esri-feature-element-info__title"},v):null}renderDescription(){const{description:v}=this;return v?(0,Nt.u)("div",{key:"description",class:"esri-feature-element-info__description"},v):null}};(0,C._)([(0,M.Cb)()],Pr.prototype,"description",void 0),(0,C._)([(0,M.Cb)()],Pr.prototype,"headingLevel",void 0),(0,C._)([(0,M.Cb)()],Pr.prototype,"title",void 0),Pr=(0,C._)([(0,ee.j)("esri.widgets.Feature.support.FeatureElementInfo")],Pr);const Xr=Pr;let Dr=class extends me.Z{constructor(v,E){super(v,E),this._featureElementInfo=null,this.attachmentsWidget=new Zs,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new ds}initialize(){this._featureElementInfo=new Xr,(0,xe.S1)(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo()),(0,xe.S1)(this,"viewModel.graphic",v=>this.attachmentsWidget.graphic=v)}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var v;const{attachmentsWidget:E}=this;return(0,Nt.u)("div",{class:"esri-feature-attachments"},null==(v=this._featureElementInfo)?void 0:v.render(),null==E?void 0:E.render())}_setupFeatureElementInfo(){const{description:v,title:E,headingLevel:P}=this;this._featureElementInfo.set({description:v,title:E,headingLevel:P})}};(0,C._)([(0,M.Cb)({readOnly:!0})],Dr.prototype,"attachmentsWidget",void 0),(0,C._)([(0,Be.B)("viewModel.description")],Dr.prototype,"description",void 0),(0,C._)([(0,Be.B)("attachmentsWidget.displayType")],Dr.prototype,"displayType",void 0),(0,C._)([(0,Be.B)("viewModel.graphic")],Dr.prototype,"graphic",void 0),(0,C._)([(0,M.Cb)()],Dr.prototype,"headingLevel",void 0),(0,C._)([(0,Be.B)("viewModel.title")],Dr.prototype,"title",void 0),(0,C._)([(0,M.Cb)({type:ds})],Dr.prototype,"viewModel",void 0),Dr=(0,C._)([(0,ee.j)("esri.widgets.Feature.FeatureAttachments")],Dr);const cn=Dr;let Ne=class extends((0,er.p)(be.Z)){constructor(v){super(v),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add((0,xe.S1)(this,"creator",E=>{this._destroyContent(),this._createContent(E)}))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:v,graphic:E,destroyer:P}=this;v&&(zt(P,{graphic:E}).catch(()=>null),this._set("created",null))}_createContent(v){var E=this;return(0,j.Z)(function*(){const{graphic:P}=E,F=zt(v,{graphic:P}).catch(()=>null);E._loadingPromise=F,E.notifyChange("state");const ne=yield F;F===E._loadingPromise&&(E._loadingPromise=null,E.notifyChange("state"),E._set("created",ne))})()}};(0,C._)([(0,M.Cb)({readOnly:!0})],Ne.prototype,"created",void 0),(0,C._)([(0,M.Cb)()],Ne.prototype,"creator",void 0),(0,C._)([(0,M.Cb)()],Ne.prototype,"destroyer",void 0),(0,C._)([(0,M.Cb)({type:$.Z})],Ne.prototype,"graphic",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Ne.prototype,"state",null),Ne=(0,C._)([(0,ee.j)("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],Ne);const ze=Ne;var ct=p(40669);let Ot=class extends me.Z{constructor(v,E){super(v,E),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=P=>{Array.from(P.querySelectorAll("a")).forEach(F=>{et(F.href)&&!F.hasAttribute("target")&&F.setAttribute("target","_blank")})}}renderLoading(){return(0,Nt.u)("div",{class:"esri-feature-content__loader-container",key:"loader"},(0,Nt.u)("div",{class:"esri-feature-content__loader"}))}renderCreated(){var v;const E=null==(v=this.viewModel)?void 0:v.created;return E?E instanceof HTMLElement?(0,Nt.u)("div",{key:E,bind:E,afterCreate:this._attachToNode}):(0,ct.Qd)(E)?(0,Nt.u)("div",{key:E},!E.destroyed&&E.render()):(0,Nt.u)("div",{key:E,innerHTML:E,afterCreate:this._addTargetToAnchors}):null}render(){var v;const E=null==(v=this.viewModel)?void 0:v.state;return(0,Nt.u)("div",{class:"esri-feature-content"},"loading"===E?this.renderLoading():this.renderCreated())}_attachToNode(v){v.appendChild(this)}};(0,C._)([(0,Be.B)("viewModel.creator")],Ot.prototype,"creator",void 0),(0,C._)([(0,Be.B)("viewModel.graphic")],Ot.prototype,"graphic",void 0),(0,C._)([(0,M.Cb)({type:ze})],Ot.prototype,"viewModel",void 0),Ot=(0,C._)([(0,ee.j)("esri.widgets.Feature.FeatureContent")],Ot);const wt=Ot;var we=p(38439),Fe=p(25621);let tt=class extends be.Z{constructor(v){super(v),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:v,fieldInfos:E}=this,P=[];return null==E||E.forEach(F=>{if(F.hasOwnProperty("visible")&&!F.visible)return;const ne=F.clone();ne.label=Jt(ne,v),P.push(ne)}),P}};(0,C._)([(0,M.Cb)()],tt.prototype,"attributes",void 0),(0,C._)([(0,M.Cb)({type:[we.Z]})],tt.prototype,"expressionInfos",void 0),(0,C._)([(0,M.Cb)()],tt.prototype,"description",void 0),(0,C._)([(0,M.Cb)({type:[Fe.Z]})],tt.prototype,"fieldInfos",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],tt.prototype,"formattedFieldInfos",null),(0,C._)([(0,M.Cb)()],tt.prototype,"title",void 0),tt=(0,C._)([(0,ee.j)("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],tt);const Mt=tt,Ht=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];let Hr=class extends me.Z{constructor(v,E){super(v,E),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new Mt,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new Xr,(0,xe.S1)(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(v,E){const{attributes:P}=this.viewModel,F=v.fieldName,ne=v.label||F,_e=P?null==P[F]?"":P[F]:"",Se=!(!v.format||!v.format.dateFormat),je="number"!=typeof _e||Se?function Cr(v,E){if("string"!=typeof E||!E)return E;const P=function or(v){let E=null;return Ht.some(P=>(P.pattern.test(v)&&(E=P),!!E)),E}(E);if(!P)return E;const F=E.match(P.pattern),_e=(0,rt.gx)((0,rt.gx)(P.label,{messages:v,hierPart:F&&F[2]}),{appName:P.appName});return E.replace(P.pattern,`<a${P.target?` target="${P.target}"`:""} href="$1"${"_blank"===P.target?' rel="noreferrer"':""}>${_e}</a>`)}(this.messagesURIUtils,_e):this._forceLTR(_e),Ye={"esri-feature-fields__field-data--date":Se};return(0,Nt.u)("tr",{key:`fields-element-info-row-${F}-${E}`},(0,Nt.u)("th",{key:`fields-element-info-row-header-${F}-${E}`,class:"esri-feature-fields__field-header",innerHTML:ne}),(0,Nt.u)("td",{key:`fields-element-info-row-data-${F}-${E}`,class:this.classes("esri-feature-fields__field-data",Ye),innerHTML:je}))}renderFields(){const{formattedFieldInfos:v}=this.viewModel;return null!=v&&v.length?(0,Nt.u)("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},(0,Nt.u)("tbody",null,v.map((E,P)=>this.renderFieldInfo(E,P)))):null}render(){var v;return(0,Nt.u)("div",{class:"esri-feature-fields"},null==(v=this._featureElementInfo)?void 0:v.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:v,title:E}=this;this._featureElementInfo.set({description:v,title:E})}_forceLTR(v){return`&lrm;${v}`}};(0,C._)([(0,Be.B)("viewModel.attributes")],Hr.prototype,"attributes",void 0),(0,C._)([(0,Be.B)("viewModel.description")],Hr.prototype,"description",void 0),(0,C._)([(0,Be.B)("viewModel.expressionInfos")],Hr.prototype,"expressionInfos",void 0),(0,C._)([(0,Be.B)("viewModel.fieldInfos")],Hr.prototype,"fieldInfos",void 0),(0,C._)([(0,Be.B)("viewModel.title")],Hr.prototype,"title",void 0),(0,C._)([(0,M.Cb)({type:Mt})],Hr.prototype,"viewModel",void 0),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/widgets/Feature/t9n/Feature")],Hr.prototype,"messages",void 0),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/widgets/support/t9n/uriUtils")],Hr.prototype,"messagesURIUtils",void 0),Hr=(0,C._)([(0,ee.j)("esri.widgets.Feature.FeatureFields")],Hr);const ss=Hr;var Yr=p(77891),ms=p(84792),ln=p(84952),Rs=p(67010),qa=p(60776),el=p(4728);const Xo=X.Z.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),qo=new Map;function Pi(v){if(!Tt(v))return null;const[E,P]=v.split("/").slice(1);return{layerId:E,fieldName:P}}function sl({originRelationship:v,relationships:E,layerId:P}){let F;return E&&E.some(ne=>(`${ne.relatedTableId}`===P&&ne.id===v.id&&(F=ne),!!F)),F}function nl(v,E){const P=E.toLowerCase();for(const F in v)if(F.toLowerCase()===P)return v[F];return null}function al(v,E,P,F){const ne=new Rs.Z;return ne.outFields=["*"],ne.relationshipId="number"==typeof E.id?E.id:parseInt(E.id,10),ne.objectIds=[v.attributes[P.objectIdField]],P.queryRelatedFeatures(ne,F)}function ea(v,E,P){let F=0;const ne=[];for(;F<E.length;)ne.push(`${v} IN (${E.slice(F,P+F)})`),F+=P;return ne.join(" OR ")}function un(){return(un=(0,j.Z)(function*(v,E,P,F){const ne=P.layerId.toString(),{layerInfo:_e,queryTask:Se,relation:je,relatedFields:Ye,outStatistics:yt}=E,Pt=sl({originRelationship:je,relationships:_e.relationships,layerId:ne});if(Pt.relationshipTableId&&Pt.keyFieldInRelationshipTable){const tr=(yield al(v,Pt,P,F))[v.attributes[P.objectIdField]];if(!tr)return null;const rr=tr.features.map(wr=>wr.attributes[_e.objectIdField]);if((null==yt?void 0:yt.length)>0&&_e.supportsStatistics){const wr=new ln.Z;wr.where=ea(_e.objectIdField,rr,1e3),wr.outFields=Ye,wr.outStatistics=yt;const Jr={features:Promise.resolve(tr),statsFeatures:Se.execute(wr)};return(0,w.as)(Jr)}}const jt=null==Pt?void 0:Pt.keyField;if(jt){const tr=(0,st.H7)(zn(_e.fields,jt)),rr=nl(v.attributes,je.keyField),wr=tr?`${jt}=${rr}`:`${jt}='${rr}'`,Jr=Se.execute(new ln.Z({where:wr,outFields:E.relatedFields}),F),kr=E.outStatistics&&E.outStatistics.length>0&&_e.supportsStatistics?Se.execute(new ln.Z({where:wr,outFields:E.relatedFields,outStatistics:E.outStatistics}),F):null,as={features:Jr};return kr&&(as.statsFeatures=kr),(0,w.as)(as)}return null})).apply(this,arguments)}function zn(v,E){if(null!=v){E=E.toLowerCase();for(const P of v)if(P&&P.name.toLowerCase()===E)return P}return null}const ta={chartAnimation:!0};let js=class extends be.Z{constructor(v){super(v),this.abilities=_t({},ta),this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(v){return _t(_t({},ta),v)}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(v){this._setContentElementMedia(v)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(v){const{formattedMediaInfoCount:E}=this;this.activeMediaInfoIndex=(v+E)%E}_pageContentElementMedia(v){const{activeMediaInfoIndex:E}=this;this._setContentElementMedia(E+v)}_formatMediaInfos(){const{attributes:v,mediaInfos:E,formattedAttributes:P,expressionAttributes:F,fieldInfoMap:ne,layer:_e}=this;return null==E?void 0:E.map(Se=>{const je=null==Se?void 0:Se.clone();if(!je)return null;if(je.title=bs({attributes:v,fieldInfoMap:ne,globalAttributes:P,expressionAttributes:F,layer:_e,text:je.title}),je.caption=bs({attributes:v,fieldInfoMap:ne,globalAttributes:P,expressionAttributes:F,layer:_e,text:je.caption}),je.altText=bs({attributes:v,fieldInfoMap:ne,globalAttributes:P,expressionAttributes:F,layer:_e,text:je.altText}),"image"===je.type){const{value:Ye}=je;return this._setImageValue({value:Ye,formattedAttributes:P,layer:_e}),je.value.sourceURL?je:void 0}if("pie-chart"===je.type||"line-chart"===je.type||"column-chart"===je.type||"bar-chart"===je.type){const{value:Ye}=je;return this._setChartValue({value:Ye,chartType:je.type,attributes:v,formattedAttributes:P,layer:_e}),je}return null}).filter(Boolean)}_setImageValue(v){const{fieldInfoMap:E}=this,{value:P,formattedAttributes:F,layer:ne}=v,{linkURL:_e,sourceURL:Se}=P;if(Se){const je=en(Se,ne);P.sourceURL=Ms({formattedAttributes:F,template:je,fieldInfoMap:E})}if(_e){const je=en(_e,ne);P.linkURL=Ms({formattedAttributes:F,template:je,fieldInfoMap:E})}}_setChartValue(v){const{value:E,attributes:P,formattedAttributes:F,chartType:ne,layer:_e}=v,{popupTemplate:Se,relatedInfos:je}=this,{fields:Ye,normalizeField:yt}=E;if(E.fields=function Qr(v,E){return v&&v.map(P=>Gr(P,E))}(Ye,_e),yt&&(E.normalizeField=Gr(yt,_e)),!Ye.some(jt=>!!(null!=F[jt]||Tt(jt)&&je.size)))return;const Pt=null==Se?void 0:Se.fieldInfos;Ye.forEach(jt=>{if(Tt(jt))return void(E.series=[...E.series,...this._getRelatedChartInfos({fieldInfos:Pt,fieldName:jt,formattedAttributes:F,chartType:ne,value:E})]);const tr=this._getChartOption({value:E,attributes:P,chartType:ne,formattedAttributes:F,fieldName:jt,fieldInfos:Pt});E.series.push(tr)})}_getRelatedChartInfos(v){var E;const{fieldInfos:P,fieldName:F,formattedAttributes:ne,chartType:_e,value:Se}=v,je=[],Ye=Pi(F),{layerId:yt,fieldName:Pt}=Ye,jt=null==(E=this.relatedInfos)?void 0:E.get(yt.toString());if(!jt)return je;const{relatedFeatures:tr,relation:rr}=jt;if(!rr||!tr)return je;const{cardinality:wr}=rr;return tr.forEach(Jr=>{const{attributes:kr}=Jr;kr&&Object.keys(kr).forEach(as=>{as===Pt&&je.push(this._getChartOption({value:Se,attributes:kr,formattedAttributes:ne,fieldName:F,chartType:_e,relatedFieldName:as,fieldInfos:P}))})}),"one-to-many"===wr||"many-to-many"===wr?je:[je[0]]}_getTooltip({label:v,value:E,chartType:P}){return"pie-chart"===P?v:`${v}: ${E}`}_getChartOption(v){var E;const{value:P,attributes:F,formattedAttributes:ne,fieldName:_e,relatedFieldName:Se,fieldInfos:je,chartType:Ye}=v,{layer:yt}=this,{normalizeField:Pt,tooltipField:jt}=P,tr=Pt?Tt(Pt)?F[Pi(Pt).fieldName]:F[Pt]:null,rr=Se&&void 0!==F[Se]?F[Se]:void 0!==F[_e]?F[_e]:ne[_e],wr=void 0===rr?null:rr&&tr?rr/tr:rr,Jr=new Yr.Z({value:wr});if(Tt(_e)){const $s=Pi(_e),nn=Pi(jt),En=nn?nn.fieldName:null,Qo=Qs(wr,{fieldInfos:je,fieldName:Se,layer:yt,preventPlacesFormatting:!!tr}),ff=$s?$s.label||$s.fieldName:Se;return Jr.tooltip=this._getTooltip({label:En&&void 0!==F[En]?F[En]:ff,value:Qo,chartType:Ye}),Jr}const kr=Ds(je,_e),as=Gr(_e,yt),hs=jt&&void 0!==ne[jt]?ne[jt]:Jt(kr||new Fe.Z({fieldName:as}),null==(E=this.popupTemplate)?void 0:E.expressionInfos);return Jr.tooltip=this._getTooltip({label:hs,value:ne[as],chartType:Ye}),Jr}};(0,C._)([(0,M.Cb)()],js.prototype,"abilities",void 0),(0,C._)([(0,Y.p)("abilities")],js.prototype,"castAbilities",null),(0,C._)([(0,M.Cb)()],js.prototype,"activeMediaInfoIndex",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],js.prototype,"activeMediaInfo",null),(0,C._)([(0,M.Cb)()],js.prototype,"attributes",void 0),(0,C._)([(0,M.Cb)()],js.prototype,"description",void 0),(0,C._)([(0,M.Cb)()],js.prototype,"fieldInfoMap",void 0),(0,C._)([(0,M.Cb)()],js.prototype,"formattedAttributes",void 0),(0,C._)([(0,M.Cb)()],js.prototype,"expressionAttributes",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],js.prototype,"formattedMediaInfos",null),(0,C._)([(0,M.Cb)()],js.prototype,"layer",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],js.prototype,"formattedMediaInfoCount",null),(0,C._)([(0,M.Cb)()],js.prototype,"mediaInfos",void 0),(0,C._)([(0,M.Cb)()],js.prototype,"popupTemplate",void 0),(0,C._)([(0,M.Cb)()],js.prototype,"relatedInfos",void 0),(0,C._)([(0,M.Cb)()],js.prototype,"title",void 0),js=(0,C._)([(0,ee.j)("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],js);const Gn=js;var Ks=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],dl=[{name:"default",colors:[].concat(Ks.slice(30,39),Ks.slice(28,30).reverse())},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}],ra=p(56683);const Co=new Map([["ar",()=>p.e(3309).then(p.bind(p,93309)).then(v=>v.a)],["bg-bg",()=>p.e(2504).then(p.bind(p,82504)).then(v=>v.b)],["bs-ba",()=>p.e(88).then(p.bind(p,88)).then(v=>v.b)],["ca-es",()=>p.e(2371).then(p.bind(p,32371)).then(v=>v.c)],["cs-cz",()=>p.e(3690).then(p.bind(p,93690)).then(v=>v.c)],["da-dk",()=>p.e(2125).then(p.bind(p,42125)).then(v=>v.d)],["de-de",()=>p.e(7396).then(p.bind(p,7396)).then(v=>v.d)],["de-ch",()=>p.e(2479).then(p.bind(p,62479)).then(v=>v.d)],["el-gr",()=>p.e(9548).then(p.bind(p,39548)).then(v=>v.e)],["en-us",()=>p.e(700).then(p.bind(p,20700)).then(v=>v.e)],["en-ca",()=>p.e(7028).then(p.bind(p,37028)).then(v=>v.e)],["es-es",()=>p.e(4824).then(p.bind(p,54824)).then(v=>v.e)],["et-ee",()=>p.e(3914).then(p.bind(p,23914)).then(v=>v.e)],["fi-fi",()=>p.e(1299).then(p.bind(p,1299)).then(v=>v.f)],["fr-fr",()=>p.e(9856).then(p.bind(p,39856)).then(v=>v.f)],["he-il",()=>p.e(4609).then(p.bind(p,24609)).then(v=>v.h)],["hr-hr",()=>p.e(7731).then(p.bind(p,87731)).then(v=>v.h)],["hu-hu",()=>p.e(7127).then(p.bind(p,57127)).then(v=>v.h)],["id-id",()=>p.e(6560).then(p.bind(p,36560)).then(v=>v.i)],["it-it",()=>p.e(7708).then(p.bind(p,67708)).then(v=>v.i)],["ja-jp",()=>p.e(6651).then(p.bind(p,36651)).then(v=>v.j)],["ko-kr",()=>p.e(7016).then(p.bind(p,7016)).then(v=>v.k)],["lt-lt",()=>p.e(5010).then(p.bind(p,5010)).then(v=>v.l)],["lv-lv",()=>p.e(2620).then(p.bind(p,92620)).then(v=>v.l)],["nb-no",()=>p.e(5237).then(p.bind(p,55237)).then(v=>v.n)],["nl-nl",()=>p.e(948).then(p.bind(p,948)).then(v=>v.n)],["pl-pl",()=>p.e(8351).then(p.bind(p,58351)).then(v=>v.p)],["pt-br",()=>p.e(6681).then(p.bind(p,86681)).then(v=>v.p)],["pt-pt",()=>p.e(8110).then(p.bind(p,48110)).then(v=>v.p)],["ro-ro",()=>p.e(8372).then(p.bind(p,78372)).then(v=>v.r)],["ru-ru",()=>p.e(8073).then(p.bind(p,88073)).then(v=>v.r)],["sk-sk",()=>p.e(7419).then(p.bind(p,7419)).then(v=>v.s)],["sl-sl",()=>p.e(1218).then(p.bind(p,11218)).then(v=>v.s)],["sr-rs",()=>p.e(5302).then(p.bind(p,85302)).then(v=>v.s)],["sv-se",()=>p.e(6079).then(p.bind(p,86079)).then(v=>v.s)],["th-th",()=>p.e(5508).then(p.bind(p,55508)).then(v=>v.t)],["tr-tr",()=>p.e(6844).then(p.bind(p,56844)).then(v=>v.t)],["uk-ua",()=>p.e(4978).then(p.bind(p,4978)).then(v=>v.u)],["vi-vn",()=>p.e(9202).then(p.bind(p,29202)).then(v=>v.v)],["zh-cn",()=>p.e(865).then(p.bind(p,70865)).then(v=>v.z)],["zh-hk",()=>p.e(3207).then(p.bind(p,3207)).then(v=>v.z)],["zh-tw",()=>p.e(3207).then(p.bind(p,3207)).then(v=>v.z)]]);function na(v){return v?Co.has(v.toLowerCase())?v.toLowerCase():function Oo(v){const E=v.split("-")[0].toLowerCase();let P=null;for(const F of Co.keys())if(F.startsWith(E)){P=F;break}return P}(v)||"en-us":"en-us"}let oi,Ti;function Po(){return(Po=(0,j.Z)(function*(v=(0,ra.Kd)()){if(v=na(v),oi&&v===Ti)return oi;oi=p.e(4430).then(p.bind(p,4430)).then(E=>E.i),Ti=v;try{const[E,P]=yield Promise.all([oi,Co.get(Ti)()]);Ti===v&&(E.am4core.options.defaultLocale=P.default),E.am4core.options.suppressWarnings=!0,E.am4core.options.autoDispose=!0}catch(E){return oi=null,Ti=null,null}return oi})).apply(this,arguments)}var ia=p(38745);const Os_mediaIcon="esri-feature-media__icon";let Ps=class extends me.Z{constructor(v,E){var P;super(v,E),P=this,this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new Gn,this.messages=null,this._getChartDependencies=function(){var F=(0,j.Z)(function*(ne){const _e=yield function bn(){return Po.apply(this,arguments)}(),{destroyed:Se,viewModel:je}=P;if(Se||!je||!ne)return;const{activeMediaInfo:Ye}=je;P._renderChart({chartDiv:ne,mediaInfo:Ye,chartsModule:_e})});return function(ne){return F.apply(this,arguments)}}()}initialize(){this._featureElementInfo=new Xr,this.own((0,xe.S1)(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),(0,xe.S1)(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var v;return(0,Nt.u)("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},null==(v=this._featureElementInfo)?void 0:v.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:v}=this.viewModel;return v?(0,Nt.u)("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(v){const{_refreshIntervalInfo:E}=this,{activeMediaInfoIndex:P,formattedMediaInfoCount:F}=this.viewModel,{value:ne,refreshInterval:_e,altText:Se,title:je,type:Ye}=v,{sourceURL:yt,linkURL:Pt}=ne,jt=et(Pt)?"_blank":"_self",tr="_blank"===jt?"noreferrer":"",rr=_e?E:null,kr=(0,Nt.u)("img",{alt:Se||je,key:`media-${Ye}-${P}-${F}-${rr?rr.timestamp:0}`,src:rr?rr.sourceURL:yt});return(Pt?(0,Nt.u)("a",{title:je,href:Pt,rel:tr,target:jt},kr):null)||kr}renderChartMediaInfo(v){const{activeMediaInfoIndex:E,formattedMediaInfoCount:P}=this.viewModel;return(0,Nt.u)("div",{key:`media-${v.type}-${E}-${P}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:v}=this.viewModel;return v?"image"===v.type?this.renderImageMediaInfo(v):-1!==v.type.indexOf("chart")?this.renderChartMediaInfo(v):null:null}renderMediaInfo(){const{activeMediaInfo:v}=this.viewModel;if(!v)return null;const E=v.title?(0,Nt.u)("div",{key:"media-title",class:"esri-feature-media__item-title",innerHTML:v.title}):null,P=v.caption?(0,Nt.u)("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:v.caption}):null;return(0,Nt.u)("div",{key:"media-container",class:"esri-feature-media__item-container"},(0,Nt.u)("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),E,P)}renderMediaPageButton(v){if(this.viewModel.formattedMediaInfoCount<2)return null;const E="previous"===v,P=E?this.messages.previous:this.messages.next,F=this.classes("esri-feature-media__button",E?"esri-feature-media__previous":"esri-feature-media__next"),ne=E?this.classes(Os_mediaIcon,"esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes(Os_mediaIcon,"esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),_e=E?this.classes(Os_mediaIcon,"esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes(Os_mediaIcon,"esri-feature-media__next-icon--rtl","esri-icon-left-triangle-arrow");return(0,Nt.u)("button",{type:"button",key:E?"media-previous":"media-next",title:P,"aria-label":P,tabIndex:0,class:F,bind:this,onclick:E?this._previous:this._next},(0,Nt.u)("span",{"aria-hidden":"true",class:ne}),(0,Nt.u)("span",{"aria-hidden":"true",class:_e}))}_setupFeatureElementInfo(){const{description:v,title:E}=this;this._featureElementInfo.set({description:v,title:E})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_handleMediaKeyup(v){const E=(0,Je.kK)(v);"ArrowLeft"===E&&(v.stopPropagation(),this.viewModel.previous()),"ArrowRight"===E&&(v.stopPropagation(),this.viewModel.next())}_renderChart(v){const{abilities:E}=this.viewModel,{chartsModule:P,chartDiv:F,mediaInfo:ne}=v,{value:_e,type:Se}=ne,{am4core:je}=P,Ye=function cs(v,E="default"){const P=dl.find(F=>F.name===E);return P?P.colors.map(F=>v.color(F)):null}(je);(0,ia.$o)()&&je.useTheme(P.am4themes_dark);const Pt=window.matchMedia("(prefers-reduced-motion: reduce)");E.chartAnimation&&!Pt.matches?je.useTheme(P.am4themes_animated):je.unuseTheme(P.am4themes_animated),je.useTheme(function yt(tr){tr instanceof je.ColorSet&&Ye&&(tr.list=Ye)});const jt="pie-chart"===Se?this._createPieChart(v):this._createXYChart(v);F.setAttribute("aria-label",ne.altText||ne.title),jt.data=_e.series.map(tr=>({tooltip:tr.tooltip,value:tr.value})).filter(tr=>"pie-chart"!==Se||tr.value>0)}_customizeChartTooltip(v,E){v.label.wrap=!0,v.label.maxWidth=200,v.autoTextColor=!1,v.getFillFromObject=!1,v.label.fill=E.color("#ffffff"),v.background.fill=E.color({r:0,g:0,b:0,a:.7})}_createPieChart(v){const{chartDiv:E,chartsModule:P}=v,{am4core:F,am4charts:ne}=P,_e=F.create(E,ne.PieChart);_e.rtl=(0,ts.dZ)(this.container);const Se=_e.series.push(new ne.PieSeries);return Se.labels.template.disabled=!0,Se.ticks.template.disabled=!0,Se.dataFields.value="value",Se.dataFields.category="tooltip",this._customizeChartTooltip(Se.tooltip,F),Se.slices.template.tooltipText=_e.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",_e}_getMinSeriesValue(v){let E=0;return v.forEach(P=>E=Math.min(P.value,E)),E}_createColumnChart(v,E){const{chartsModule:P,mediaInfo:F}=E,{value:ne}=F,{am4core:_e,am4charts:Se}=P,je=v.xAxes.push(new Se.CategoryAxis);je.dataFields.category="tooltip",je.renderer.labels.template.disabled=!0,this._customizeChartTooltip(je.tooltip,_e),je.tooltip.events.on("sizechanged",()=>{je.tooltip.dy=-je.tooltip.contentHeight});const Ye=v.yAxes.push(new Se.ValueAxis),yt=Ye.renderer.labels.template;Ye.renderer.minLabelPosition=.05,Ye.renderer.maxLabelPosition=.95,Ye.min=this._getMinSeriesValue(ne.series),this._customizeChartTooltip(Ye.tooltip,_e),yt.wrap=!0;const Pt=v.series.push(new Se.ColumnSeries);Pt.dataFields.valueY="value",Pt.dataFields.categoryX="tooltip",v.cursor=new Se.XYCursor,ne.series.length>15&&(v.scrollbarX=new _e.Scrollbar)}_createBarChart(v,E){const{chartsModule:P,mediaInfo:F}=E,{value:ne}=F,{am4core:_e,am4charts:Se}=P,je=v.yAxes.push(new Se.CategoryAxis);je.dataFields.category="tooltip",je.renderer.inversed=!0,je.renderer.labels.template.disabled=!0,this._customizeChartTooltip(je.tooltip,_e),je.tooltip.events.on("sizechanged",()=>{je.tooltip.dx=je.tooltip.contentWidth});const Ye=v.xAxes.push(new Se.ValueAxis),yt=Ye.renderer.labels.template;Ye.renderer.minLabelPosition=.05,Ye.renderer.maxLabelPosition=.95,Ye.min=this._getMinSeriesValue(ne.series),this._customizeChartTooltip(Ye.tooltip,_e),yt.wrap=!0;const Pt=v.series.push(new Se.ColumnSeries);Pt.dataFields.valueX="value",Pt.dataFields.categoryY="tooltip",v.cursor=new Se.XYCursor,ne.series.length>15&&(v.scrollbarY=new _e.Scrollbar)}_createLineChart(v,E){const{chartsModule:P,mediaInfo:F}=E,{value:ne}=F,{am4core:_e,am4charts:Se}=P,je=v.xAxes.push(new Se.CategoryAxis);je.dataFields.category="tooltip",je.renderer.labels.template.disabled=!0,this._customizeChartTooltip(je.tooltip,_e),je.tooltip.events.on("sizechanged",()=>{je.tooltip.dy=-je.tooltip.contentHeight});const Ye=v.yAxes.push(new Se.ValueAxis),yt=Ye.renderer.labels.template;Ye.renderer.minLabelPosition=.05,Ye.renderer.maxLabelPosition=.95,Ye.min=this._getMinSeriesValue(ne.series),this._customizeChartTooltip(Ye.tooltip,_e),yt.wrap=!0;const Pt=v.series.push(new Se.LineSeries);Pt.dataFields.categoryX="tooltip",Pt.dataFields.valueY="value",v.cursor=new Se.XYCursor,ne.series.length>15&&(v.scrollbarX=new _e.Scrollbar)}_createXYChart(v){const{chartDiv:E,chartsModule:P,mediaInfo:F}=v,{type:ne}=F,{am4core:_e,am4charts:Se}=P,je=_e.create(E,Se.XYChart);return je.rtl=(0,ts.dZ)(this.container),"column-chart"===ne&&this._createColumnChart(je,v),"bar-chart"===ne&&this._createBarChart(je,v),"line-chart"===ne&&this._createLineChart(je,v),je}_clearMediaRefreshTimer(){const{_refreshTimer:v}=this;v&&(clearTimeout(v),this._refreshTimer=null)}_updateMediaInfoTimestamp(v){const E=Date.now();this._refreshIntervalInfo={timestamp:E,sourceURL:this._getImageSource(v,E)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:v}=this.viewModel;v&&"image"===v.type&&v.refreshInterval&&this._setRefreshTimeout(v)}_setRefreshTimeout(v){const{refreshInterval:E,value:P}=v;if(!E)return;const F=6e4*E;this._updateMediaInfoTimestamp(P.sourceURL);const ne=setInterval(()=>{this._updateMediaInfoTimestamp(P.sourceURL)},F);this._refreshTimer=ne}_getImageSource(v,E){const P=-1!==v.indexOf("?")?"&":"?",[F,ne=""]=v.split("#");return`${F}${P}timestamp=${E}${ne?"#":""}${ne}`}};(0,C._)([(0,Be.B)("viewModel.attributes")],Ps.prototype,"attributes",void 0),(0,C._)([(0,Be.B)("viewModel.activeMediaInfoIndex")],Ps.prototype,"activeMediaInfoIndex",void 0),(0,C._)([(0,Be.B)("viewModel.description")],Ps.prototype,"description",void 0),(0,C._)([(0,Be.B)("viewModel.fieldInfoMap")],Ps.prototype,"fieldInfoMap",void 0),(0,C._)([(0,Be.B)("viewModel.layer")],Ps.prototype,"layer",void 0),(0,C._)([(0,Be.B)("viewModel.mediaInfos")],Ps.prototype,"mediaInfos",void 0),(0,C._)([(0,Be.B)("viewModel.popupTemplate")],Ps.prototype,"popupTemplate",void 0),(0,C._)([(0,Be.B)("viewModel.relatedInfos")],Ps.prototype,"relatedInfos",void 0),(0,C._)([(0,Be.B)("viewModel.title")],Ps.prototype,"title",void 0),(0,C._)([(0,M.Cb)({type:Gn})],Ps.prototype,"viewModel",void 0),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/widgets/Feature/t9n/Feature")],Ps.prototype,"messages",void 0),Ps=(0,C._)([(0,ee.j)("esri.widgets.Feature.FeatureMedia")],Ps);const To=Ps;var Do=p(47562),hl=(p(55664),p(55013),p(16615),p(82561),p(75484)),pl=p(64531),oa=p(501),Io=p(38159),fl=p(15382);const ml=["$datastore","$map","$layer","$aggregatedfeatures"],aa=X.Z.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");function _l(v){return"string"==typeof v?Er(br(v)):Array.isArray(v)?function la(v){return`<ul class="esri-widget__list">${v.map(E=>`<li>${"string"==typeof E?Er(br(E)):E}</li>`).join("")}</ul>`}(v):"esri.arcade.Dictionary"===(null==v?void 0:v.declaredClass)?function ua(v){return`<table class="esri-widget__table">${v.keys().map(E=>{const P=v.field(E);return`<tr><th>${E}</th><td>${"string"==typeof P?Er(br(P)):P}</td></tr>`}).join("")}</table>`}(v):v}function mn({aggregatedFeatures:v,arcadeUtils:E,featureSetVars:P,context:F,viewInfo:ne,map:_e,graphic:Se,interceptor:je}){P.forEach(Ye=>{const yt=Ye.toLowerCase();if("$map"===yt&&(F.vars[yt]=E.convertMapToFeatureSetCollection({map:_e,spatialReference:ne.sr,interceptor:je})),"$layer"===yt&&(F.vars[yt]=E.convertFeatureLayerToFeatureSet({layer:Se.sourceLayer,spatialReference:ne.sr,interceptor:je})),"$datastore"===yt&&(F.vars[yt]=E.convertServiceUrlToWorkspace({url:Se.sourceLayer.url,spatialReference:ne.sr,interceptor:je})),"$aggregatedfeatures"===yt){const jt=Se.layer,{fields:tr,objectIdField:rr,geometryType:wr,spatialReference:Jr,displayField:kr}=jt,as=new fl.default(Sr(_t({fields:tr,objectIdField:rr,geometryType:wr,spatialReference:Jr,displayField:kr},"feature"===jt.type?{templates:jt.templates,typeIdField:jt.typeIdField,types:jt.types}:null),{source:v}));F.vars[yt]=E.convertFeatureLayerToFeatureSet({layer:as,spatialReference:ne.sr,interceptor:je})}})}function wo(){return p.e(5068).then(p.bind(p,75068))}function ca(v){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,j.Z)(function*({graphic:v,view:E}){const{isAggregate:P,layer:F}=v;if(!P||!F||"2d"!==(null==E?void 0:E.type))return[];const ne=yield E.whenLayerView(F);if(!ne.createQuery||!ne.queryFeatures)return[];const _e=ne.createQuery();_e.aggregateIds=[v.getObjectId()];const{features:Se}=yield ne.queryFeatures(_e);return Se})).apply(this,arguments)}function Hi(v){return ki.apply(this,arguments)}function ki(){return(ki=(0,j.Z)(function*({expressionInfo:v,arcadeUtils:E,interceptor:P,spatialReference:F,map:ne,graphic:_e,view:Se}){if(!v||!v.expression)return null;const je=E.createSyntaxTree(v.expression),Ye=ml.filter(rr=>E.hasVariable(je,rr)),[yt]=yield(0,w.$6)([ca({graphic:_e,view:Se}),E.loadScriptDependencies(je,!0,Ye)]),Pt=E.getViewInfo({spatialReference:F}),jt=E.createExecContext(_e,Pt);jt.interceptor=P,jt.useAsync=!0,mn({aggregatedFeatures:yt,arcadeUtils:E,featureSetVars:Ye,context:jt,viewInfo:Pt,map:ne,graphic:_e,interceptor:P});const tr=E.createFunction(je,jt);return E.executeAsyncFunction(tr,jt).catch(rr=>aa.error("arcade-execution-error",{error:rr,graphic:_e,expressionInfo:v}))})).apply(this,arguments)}function xo(v){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,j.Z)(function*({expressionInfos:v,spatialReference:E,graphic:P,interceptor:F,map:ne,view:_e}){if(!v||!v.length)return{};const Se=yield wo(),je={};for(const Pt of v)je[`expression/${Pt.name}`]=Hi({expressionInfo:Pt,arcadeUtils:Se,interceptor:F,spatialReference:E,map:ne,graphic:P,view:_e});const Ye=yield(0,w.as)(je),yt={};for(const Pt in Ye)yt[Pt]=_l(Ye[Pt].value);return yt})).apply(this,arguments)}let dn=class extends((0,er.p)(be.Z)){constructor(v){var E;super(v),E=this,this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:P}=this;P&&P.abort(),this._abortController=null},this._createVM=()=>{var P,F;const ne=null==(P=this.contentElement)?void 0:P.type;null==(F=this.contentElementViewModel)||F.destroy();const _e="fields"===ne?new Mt:"media"===ne?new Gn:"text"===ne?new ze:null;this._set("contentElementViewModel",_e)},this._compile=(0,j.Z)(function*(){E._cancelQuery();const P=new AbortController;E._abortController=P,yield E._compileExpression(),E._abortController===P&&(E._abortController=null)}),this._compileThrottled=(0,Oe.P)(this._compile,1,this),this._compileExpression=(0,j.Z)(function*(){const{expressionInfo:P,graphic:F,interceptor:ne,spatialReference:_e,map:Se,view:je,_abortController:Ye}=E;if(!(P&&F&&_e&&Se))return void E._set("contentElement",null);const yt=yield wo();if(Ye!==E._abortController)return;const Pt=yield Hi({arcadeUtils:yt,expressionInfo:P,graphic:F,interceptor:ne,map:Se,spatialReference:_e,view:je});if(!Pt||"esri.arcade.Dictionary"!==Pt.declaredClass)return void E._set("contentElement",null);const jt=yield(0,Do.x)(Pt,Ye.signal),tr=null==jt?void 0:jt.type,rr="media"===tr?pl.Z.fromJSON(jt):"text"===tr?oa.Z.fromJSON(jt):"fields"===tr?hl.Z.fromJSON(jt):null;E._set("contentElement",rr)}),this.handles.add([(0,xe.S1)(this,["expressionInfo","graphic","map","spatialReference","view"],this._compileThrottled),(0,xe.S1)(this,"contentElement",this._createVM)])}destroy(){var v;this._cancelQuery(),null==(v=this.contentElementViewModel)||v.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var v;return(null==(v=this.view)?void 0:v.spatialReference)||null}set spatialReference(v){void 0!==v?this._override("spatialReference",v):this._clearOverride("spatialReference")}get state(){const{_abortController:v,contentElement:E,contentElementViewModel:P}=this;return v?"loading":E||P?"ready":"disabled"}get map(){var v;return(null==(v=this.view)?void 0:v.map)||null}set map(v){void 0!==v?this._override("map",v):this._clearOverride("map")}};(0,C._)([(0,M.Cb)()],dn.prototype,"_abortController",void 0),(0,C._)([(0,M.Cb)({type:Io.Z})],dn.prototype,"expressionInfo",void 0),(0,C._)([(0,M.Cb)({type:$.Z})],dn.prototype,"graphic",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],dn.prototype,"contentElement",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],dn.prototype,"contentElementViewModel",void 0),(0,C._)([(0,M.Cb)()],dn.prototype,"interceptor",void 0),(0,C._)([(0,M.Cb)()],dn.prototype,"spatialReference",null),(0,C._)([(0,M.Cb)({readOnly:!0})],dn.prototype,"state",null),(0,C._)([(0,M.Cb)()],dn.prototype,"map",null),(0,C._)([(0,M.Cb)()],dn.prototype,"view",void 0),dn=(0,C._)([(0,ee.j)("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],dn);const Yi=dn;let ai=class extends me.Z{constructor(v,E){super(v,E),this.viewModel=new Yi}initialize(){(0,xe.S1)(this,"viewModel.contentElementViewModel",()=>this._setupExpressionWidget())}destroy(){this._destroyContentWidget()}renderLoading(){return(0,Nt.u)("div",{key:"loading-container",class:"esri-feature__loading-container"},(0,Nt.u)("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))}render(){var v;const{state:E}=this.viewModel;return(0,Nt.u)("div",{class:"esri-feature-expression"},"loading"===E?this.renderLoading():"disabled"===E?null:null==(v=this._contentWidget)?void 0:v.render())}_destroyContentWidget(){const{_contentWidget:v}=this;v&&(v.viewModel=null,v.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:v,contentElement:E}=this.viewModel,P=null==E?void 0:E.type;this._destroyContentWidget();const F=v?"fields"===P?new ss({viewModel:v}):"media"===P?new To({viewModel:v}):"text"===P?new wt({viewModel:v}):null:null;this._contentWidget=F,this.scheduleRender()}};(0,C._)([(0,M.Cb)({type:Yi})],ai.prototype,"viewModel",void 0),ai=(0,C._)([(0,ee.j)("esri.widgets.Feature.FeatureExpression")],ai);const da=ai;var li;const Ao="content-view-models",Lo="esri.widgets.FeatureViewModel",Xi=X.Z.getLogger(Lo),Ro={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let ps=li=class extends be.Z{constructor(v){super(v),this._handles=new se.Z,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=(0,Oe.P)(this._graphicChanged,1,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities=_t({},Ro),this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=E=>{const{abilities:P}=this;return"attachments"===E.type&&P.attachmentsContent||"custom"===E.type&&P.customContent||"fields"===E.type&&P.fieldsContent||"media"===E.type&&P.mediaContent||"text"===E.type&&P.textContent||"expression"===E.type&&P.expressionContent},this._handles.add((0,xe.S1)(this,["graphic","_effectivePopupTemplate","abilities"],()=>this.graphicChangedThrottled()))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return(0,V.pC)(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return function sr(v,E){const P=new Map;return v&&v.forEach(F=>{const ne=Gr(F.fieldName,E);F.fieldName=ne,P.set(ne.toLowerCase(),F)}),P}(cr(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return vt(this.graphic)}castAbilities(v){return _t(_t({},Ro),v)}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(v){this._set("graphic",v?v.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(v){void 0!==v?this._override("spatialReference",v):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(v){void 0!==v?this._override("map",v):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(v,E){const P=this.contentViewModels[v];P instanceof Gn&&P.setActiveMedia(E)}nextMedia(v){const E=this.contentViewModels[v];E instanceof Gn&&E.next()}previousMedia(v){const E=this.contentViewModels[v];E instanceof Gn&&E.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}_graphicChanged(){var v=this;return(0,j.Z)(function*(){v._cancelFeatureQuery(),v._error=null,v._clear();const{graphic:E}=v;if(!E)return;const P=new AbortController;v._featureAbortController=P;try{yield v._queryFeature({signal:P.signal})}catch(F){(0,w.D_)(F)||(v._error=F,Xi.error("error","The popupTemplate could not be displayed for this feature.",{error:F,graphic:E,popupTemplate:v._effectivePopupTemplate}))}v._featureAbortController===P&&(v._featureAbortController=null)})()}_cancelFeatureQuery(){const{_featureAbortController:v}=this;v&&v.abort(),this._featureAbortController=null}_compileContentElement(v,E){return"attachments"===v.type?this._compileAttachments(v,E):"custom"===v.type?this._compileCustom(v,E):"fields"===v.type?this._compileFields(v,E):"media"===v.type?this._compileMedia(v,E):"text"===v.type?this._compileText(v,E):"expression"===v.type?this._compileExpression(v,E):void 0}_compileContent(v){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(v)?v.filter(this._isAllowedContentType).map((E,P)=>this._compileContentElement(E,P)):"string"==typeof v?this._compileText(new oa.Z({text:v}),0).text:v}_destroyContentViewModels(){var v;null==(v=this._handles)||v.remove(Ao),this.contentViewModels.forEach(E=>E&&!E.destroyed&&E.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(v,E){const{formattedAttributes:P}=this,{contentElement:F,contentElementViewModel:ne}=v,_e=null==F?void 0:F.type;ne&&_e&&("fields"===_e&&(this._createFieldsFormattedAttributes({contentElement:F,contentElementIndex:E,formattedAttributes:P}),ne.set(this._createFieldsVMParams(F,E))),"media"===_e&&(this._createMediaFormattedAttributes({contentElement:F,contentElementIndex:E,formattedAttributes:P}),ne.set(this._createMediaVMParams(F,E))),"text"===_e&&ne.set(this._createTextVMParams(F)))}_compileExpression(v,E){const{expressionInfo:P}=v,{graphic:F,map:ne,spatialReference:_e,view:Se}=this,je=new Yi({expressionInfo:P,graphic:F,interceptor:li.interceptor,map:ne,spatialReference:_e,view:Se});return this.contentViewModels[E]=je,this._handles.add((0,xe.S1)(je,"contentElementViewModel",()=>this._setExpressionContentVM(je,E)),Ao),v}_compileAttachments(v,E){const{graphic:P}=this,{description:F,title:ne}=v;return this.contentViewModels[E]=new ds(_t({graphic:P},this._compileTitleAndDesc({title:ne,description:F}))),v}_compileCustom(v,E){const{graphic:P}=this,{creator:F,destroyer:ne}=v;return this.contentViewModels[E]=new ze({graphic:P,creator:F,destroyer:ne}),v}_compileTitleAndDesc({title:v,description:E}){const{_fieldInfoMap:P,_sourceLayer:F,graphic:ne,formattedAttributes:_e,_expressionAttributes:Se}=this,{attributes:je}=ne,Ye=_e.global;return{title:bs({attributes:je,fieldInfoMap:P,globalAttributes:Ye,expressionAttributes:Se,layer:F,text:v}),description:bs({attributes:je,fieldInfoMap:P,globalAttributes:Ye,expressionAttributes:Se,layer:F,text:E})}}_createFieldsVMParams(v,E){const{_effectivePopupTemplate:P,formattedAttributes:F}=this,ne=_t(_t({},F.global),F.content[E]),_e=(null==v?void 0:v.fieldInfos)||(null==P?void 0:P.fieldInfos),Se=null==_e?void 0:_e.filter(({fieldName:Pt})=>Rt(Pt)||Tt(Pt)||ne.hasOwnProperty(Pt)),je=null==P?void 0:P.expressionInfos,{description:Ye,title:yt}=v;return _t({attributes:ne,expressionInfos:je,fieldInfos:Se},this._compileTitleAndDesc({title:yt,description:Ye}))}_compileFields(v,E){const P=v.clone(),F=new Mt(this._createFieldsVMParams(v,E));return this.contentViewModels[E]=F,P.fieldInfos=F.formattedFieldInfos.slice(0),P}_createMediaVMParams(v,E){const{abilities:P,graphic:F,_fieldInfoMap:ne,formattedAttributes:_e,_effectivePopupTemplate:Se,relatedInfos:je,_sourceLayer:Ye,_expressionAttributes:yt}=this,{attributes:Pt}=F,{description:jt,mediaInfos:tr,title:rr}=v;return _t({abilities:{chartAnimation:P.chartAnimation},activeMediaInfoIndex:v.activeMediaInfoIndex||0,attributes:Pt,layer:Ye,fieldInfoMap:ne,formattedAttributes:_t(_t({},_e.global),_e.content[E]),expressionAttributes:yt,mediaInfos:tr,popupTemplate:Se,relatedInfos:je},this._compileTitleAndDesc({title:rr,description:jt}))}_compileMedia(v,E){const P=v.clone(),F=new Gn(this._createMediaVMParams(v,E));return P.mediaInfos=F.formattedMediaInfos.slice(0),this.contentViewModels[E]=F,P}_createTextVMParams(v){const{graphic:E,_fieldInfoMap:P,_sourceLayer:F,_expressionAttributes:ne}=this;if(v&&v.text){const{attributes:_e}=E;v.text=bs({attributes:_e,fieldInfoMap:P,globalAttributes:this.formattedAttributes.global,expressionAttributes:ne,layer:F,text:v.text})}return{graphic:E,creator:v.text}}_compileText(v,E){const P=v.clone();return this.contentViewModels[E]=new ze(this._createTextVMParams(P)),P}_compileLastEditInfo(){const{_effectivePopupTemplate:v,_sourceLayer:E,graphic:P}=this;if(!v)return;const{lastEditInfoEnabled:F}=v,ne=null==E?void 0:E.editFieldsInfo;return F&&ne?function It(v,E){const{creatorField:P,creationDateField:F,editorField:ne,editDateField:_e}=v;if(!E)return;const Se=E[_e];if("number"==typeof Se){const Ye=E[ne];return{type:"edit",date:(0,hr.p6)(Se,Ge),user:Ye}}const je=E[F];if("number"==typeof je){const Ye=E[P];return{type:"create",date:(0,hr.p6)(je,Ge),user:Ye}}return null}(ne,P.attributes):void 0}_compileTitle(v){const{_fieldInfoMap:E,_sourceLayer:P,graphic:F,_expressionAttributes:ne}=this,{attributes:_e}=F;return bs({attributes:_e,fieldInfoMap:E,globalAttributes:this.formattedAttributes.global,expressionAttributes:ne,layer:P,text:v})}_getTitle(){var v=this;return(0,j.Z)(function*(){const{_effectivePopupTemplate:E,graphic:P}=v;return zt(null==E?void 0:E.title,{graphic:P})})()}_getContent(){var v=this;return(0,j.Z)(function*(){const{_effectivePopupTemplate:E,graphic:P}=v;return zt(null==E?void 0:E.content,{graphic:P})})()}_queryFeature(v){var E=this;return(0,j.Z)(function*(){const{_featureAbortController:P,_sourceLayer:F,graphic:ne,_effectivePopupTemplate:_e,spatialReference:Se,map:je,view:Ye}=E,{content:{value:yt},title:{value:Pt}}=yield(0,w.as)({content:E._getContent(),title:E._getTitle()});if(P!==E._featureAbortController||!ne)return;yield function Ct(v,E){return lt.apply(this,arguments)}({graphic:ne,popupTemplate:_e,layer:F,spatialReference:Se},v);const{expressionAttributes:{value:jt}}=yield(0,w.as)({checkForRelatedFeatures:E._checkForRelatedFeatures(v),expressionAttributes:xo({expressionInfos:null==_e?void 0:_e.expressionInfos,spatialReference:Se,graphic:ne,map:je,interceptor:li.interceptor,view:Ye})});P===E._featureAbortController&&ne&&(E._expressionAttributes=jt,E._graphicExpressionAttributes=_t(_t({},ne.attributes),jt),E._set("formattedAttributes",E._createFormattedAttributes(yt)),E._set("title",E._compileTitle(Pt)),E._set("lastEditInfo",E._compileLastEditInfo()||null),E._set("content",E._compileContent(yt)||null))})()}_createMediaFormattedAttributes({contentElement:v,contentElementIndex:E,formattedAttributes:P}){const{_effectivePopupTemplate:F,graphic:ne,relatedInfos:_e,_sourceLayer:Se,_fieldInfoMap:je,_graphicExpressionAttributes:Ye}=this;P.content[E]=Ar({fieldInfos:null==F?void 0:F.fieldInfos,graphic:ne,attributes:_t(_t({},Ye),v.attributes),layer:Se,fieldInfoMap:je,relatedInfos:_e})}_createFieldsFormattedAttributes({contentElement:v,contentElementIndex:E,formattedAttributes:P}){if(v.fieldInfos){const{graphic:F,relatedInfos:ne,_sourceLayer:_e,_fieldInfoMap:Se,_graphicExpressionAttributes:je}=this;P.content[E]=Ar({fieldInfos:v.fieldInfos,graphic:F,attributes:_t(_t({},je),v.attributes),layer:_e,fieldInfoMap:Se,relatedInfos:ne})}}_createFormattedAttributes(v){const{_effectivePopupTemplate:E,graphic:P,relatedInfos:F,_sourceLayer:ne,_fieldInfoMap:_e,_graphicExpressionAttributes:Se}=this,Ye={global:Ar({fieldInfos:null==E?void 0:E.fieldInfos,graphic:P,attributes:Se,layer:ne,fieldInfoMap:_e,relatedInfos:F}),content:[]};return Array.isArray(v)&&v.forEach((yt,Pt)=>{"fields"===yt.type&&this._createFieldsFormattedAttributes({contentElement:yt,contentElementIndex:Pt,formattedAttributes:Ye}),"media"===yt.type&&this._createMediaFormattedAttributes({contentElement:yt,contentElementIndex:Pt,formattedAttributes:Ye})}),Ye}_checkForRelatedFeatures(v){const{graphic:E,_effectivePopupTemplate:P}=this;return this._queryRelatedInfos(E,cr(P),v)}_queryRelatedInfos(v,E,P){var F=this;return(0,j.Z)(function*(){const{relatedInfos:ne,_sourceLayer:_e}=F;ne.clear();const Se=(0,V.pC)(_e.associatedLayer)?yield _e.associatedLayer.load(P):_e;if(!Se)return;const je=E.filter(Pt=>Pt&&Tt(Pt.fieldName));if(!je||!je.length)return;E.forEach(Pt=>F._configureRelatedInfo(Pt,Se));const Ye=yield function ul({relatedInfos:v,layer:E},P){const F={};return v.forEach((ne,_e)=>{const{relation:Se}=ne;if(!Se){const jt=new W.Z("relation-required","A relation is required on a layer to retrieve related records.");throw Xo.error(jt),jt}const{relatedTableId:je}=Se;if("number"!=typeof je){const jt=new W.Z("A related table ID is required on a layer to retrieve related records.");throw Xo.error(jt),jt}const Ye=`${E.url}/${je}`,yt=qo.get(Ye),Pt=yt||function ii(v,E){return(0,ms.default)(v,{query:{f:"json"},signal:E&&E.signal})}(Ye,P);yt||qo.set(Ye,Pt),F[_e]=Pt}),(0,w.as)(F)}({relatedInfos:ne,layer:Se},P);Object.keys(Ye).forEach(Pt=>{var jt;const tr=ne.get(Pt.toString()),rr=null==(jt=Ye[Pt])?void 0:jt.value;tr&&rr&&(tr.layerInfo=rr.data)});const yt=yield function $n({graphic:v,relatedInfos:E,layer:P},F){const ne={};return E.forEach((_e,Se)=>{_e.layerInfo&&(ne[Se]=function ll(v,E,P,F){return un.apply(this,arguments)}(v,_e,P,F))}),(0,w.as)(ne)}({graphic:v,relatedInfos:ne,layer:Se},P);Object.keys(yt).forEach(Pt=>{var jt;!function ol(v,E){if(!E||!v)return;const{features:P,statsFeatures:F}=v,ne=P&&P.value;E.relatedFeatures=ne?ne.features:[];const _e=F&&F.value;E.relatedStatsFeatures=_e?_e.features:[]}(null==(jt=yt[Pt])?void 0:jt.value,ne.get(Pt.toString()))})})()}_configureRelatedInfo(v,E){const{relatedInfos:P}=this,F=Pi(v.fieldName);if(!F)return;const{layerId:ne,fieldName:_e}=F;if(!ne)return;const Se=P.get(ne.toString())||function il(v,E){const P=function rl(v,E){if(!E.relationships)return null;let P=null;const{relationships:F}=E;return F.some(ne=>ne.id===parseInt(v,10)&&(P=ne,!0)),P}(v,E);if(!P)return;const F=`${E.url}/${P.relatedTableId}`;return{url:F,queryTask:new el.Z({url:F,sourceSpatialReference:E.spatialReference}),relation:P,relatedFields:[],outStatistics:[]}}(ne,E);Se&&(function cl({relatedInfo:v,fieldName:E,fieldInfo:P}){if(v.relatedFields.push(E),P.statisticType){const F=new qa.Z({statisticType:P.statisticType,onStatisticField:E,outStatisticFieldName:E});v.outStatistics.push(F)}}({relatedInfo:Se,fieldName:_e,fieldInfo:v}),this.relatedInfos.set(ne,Se))}};ps.interceptor=new class Qi{constructor(E,P){this.preLayerQueryCallback=E,this.preRequestCallback=P,this.preLayerQueryCallback||(this.preLayerQueryCallback=F=>{}),this.preRequestCallback||(this.preLayerQueryCallback=F=>{})}}(({query:v,layer:E,method:P})=>{xr({layer:E,method:P,query:v,definitionExpression:`${E.definitionExpression} ${E.serviceDefinitionExpression}`})},({queryPayload:v,layer:E,method:P})=>{xr({layer:E,method:P,query:v,definitionExpression:`${E.definitionExpression} ${E.serviceDefinitionExpression}`})}),(0,C._)([(0,M.Cb)()],ps.prototype,"_error",void 0),(0,C._)([(0,M.Cb)()],ps.prototype,"_featureAbortController",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],ps.prototype,"_effectivePopupTemplate",null),(0,C._)([(0,M.Cb)({readOnly:!0})],ps.prototype,"_fieldInfoMap",null),(0,C._)([(0,M.Cb)({readOnly:!0})],ps.prototype,"_sourceLayer",null),(0,C._)([(0,M.Cb)()],ps.prototype,"abilities",void 0),(0,C._)([(0,Y.p)("abilities")],ps.prototype,"castAbilities",null),(0,C._)([(0,M.Cb)({readOnly:!0})],ps.prototype,"content",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],ps.prototype,"contentViewModels",void 0),(0,C._)([(0,M.Cb)({type:Boolean})],ps.prototype,"defaultPopupTemplateEnabled",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],ps.prototype,"state",null),(0,C._)([(0,M.Cb)({readOnly:!0})],ps.prototype,"formattedAttributes",void 0),(0,C._)([(0,M.Cb)({type:$.Z,value:null})],ps.prototype,"graphic",null),(0,C._)([(0,M.Cb)({readOnly:!0})],ps.prototype,"lastEditInfo",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],ps.prototype,"relatedInfos",void 0),(0,C._)([(0,M.Cb)()],ps.prototype,"spatialReference",null),(0,C._)([(0,M.Cb)({readOnly:!0})],ps.prototype,"title",void 0),(0,C._)([(0,M.Cb)()],ps.prototype,"map",null),(0,C._)([(0,M.Cb)({readOnly:!0})],ps.prototype,"waitingForContent",null),(0,C._)([(0,M.Cb)()],ps.prototype,"view",void 0),ps=li=(0,C._)([(0,ee.j)(Lo)],ps);const ui=ps;p(82255);const jo=v=>{let E=class extends v{constructor(){super(...arguments),this.renderNodeContent=P=>(0,ct.Qd)(P)&&!P.destroyed?(0,Nt.u)("div",{key:P},P.render()):P instanceof HTMLElement?(0,Nt.u)("div",{key:P,bind:P,afterCreate:this._attachToNode}):(0,ct.o)(P)?(0,Nt.u)("div",{key:P,bind:P.domNode,afterCreate:this._attachToNode}):null}_attachToNode(P){P.appendChild(this)}};return E=(0,C._)([(0,ee.j)("esri.widgets.Feature.ContentMixin")],E),E};var On=p(97059);const Gs_contentElement="esri-feature__content-element",pa={title:!0,content:!0,lastEditedInfo:!0};let Vs=class extends(jo(me.Z)){constructor(v,E){super(v,E),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements=_t({},pa),this.map=null,this.view=null,this.viewModel=new ui}initialize(){this.own((0,xe.S1)(this,"viewModel.contentViewModels",()=>this._setupContentWidgets()))}loadDependencies(){return p.e(1360).then(p.bind(p,61360))}destroy(){this._destroyContentWidgets()}castVisibleElements(v){return _t(_t({},pa),v)}render(){const{state:v}=this.viewModel,E=(0,Nt.u)("div",{class:"esri-feature__size-container",key:"container"},this.renderTitle(),"error"===v?this.renderError():"loading"===v?this.renderLoading():this.renderContentContainer());return(0,Nt.u)("div",{class:this.classes("esri-feature","esri-widget")},E)}setActiveMedia(v,E){this.viewModel.setActiveMedia(v,E)}nextMedia(v){this.viewModel.nextMedia(v)}previousMedia(v){this.viewModel.previousMedia(v)}renderError(){const{messagesCommon:v,messages:E,visibleElements:P}=this;return(0,Nt.u)("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},P.title?(0,Nt.u)("div",{key:"error-title",slot:"title"},v.errorMessage):null,(0,Nt.u)("div",{key:"error-message",slot:"message"},E.loadingError))}renderLoading(){return(0,Nt.u)("div",{key:"loading-container",class:"esri-feature__loading-container"},(0,Nt.u)("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")}))}renderContentContainer(){const{visibleElements:v}=this;return v.content?(0,Nt.u)("div",{class:"esri-feature__main-container"},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:v,title:E}=this;return v.title?(0,Nt.u)(an,{level:this.headingLevel,class:"esri-feature__title",innerHTML:E}):null}renderContent(){const v=this.viewModel.content,E="content";if(!v)return null;if(Array.isArray(v))return v.length?(0,Nt.u)("div",{key:`${E}-content-elements`},v.map(this.renderContentElement,this)):null;if("string"==typeof v){const P=this._contentWidgets[0];return!P||P.destroyed?null:(0,Nt.u)("div",{key:`${E}-content`},P.render())}return this.renderNodeContent(v)}renderContentElement(v,E){const{visibleElements:P}=this;if("boolean"!=typeof P.content&&!P.content[v.type])return null;switch(v.type){case"attachments":return this.renderAttachments(E);case"custom":return this.renderCustom(v,E);case"fields":return this.renderFields(E);case"media":return this.renderMedia(E);case"text":return this.renderText(v,E);case"expression":return this.renderExpression(E);default:return null}}renderAttachments(v){const E=this._contentWidgets[v];if(!E||E.destroyed)return null;const{state:P,attachmentInfos:F}=E.viewModel;return"loading"===P||F.length>0?(0,Nt.u)("div",{key:this._buildKey("attachments-element",v),class:this.classes(Gs_contentElement)},E.render()):null}renderExpression(v){const E=this._contentWidgets[v];return!E||E.destroyed?null:(0,Nt.u)("div",{key:this._buildKey("expression-element",v),class:Gs_contentElement},E.render())}renderCustom(v,E){const{creator:P}=v,F=this._contentWidgets[E];return!F||F.destroyed?null:P?(0,Nt.u)("div",{key:this._buildKey("custom-element",E),class:Gs_contentElement},F.render()):null}renderFields(v){const E=this._contentWidgets[v];return!E||E.destroyed?null:(0,Nt.u)("div",{key:this._buildKey("fields-element",v),class:Gs_contentElement},E.render())}renderMedia(v){const E=this._contentWidgets[v];return!E||E.destroyed?null:(0,Nt.u)("div",{key:this._buildKey("media-element",v),class:Gs_contentElement},E.render())}renderLastEditInfo(){const{visibleElements:v,messages:E}=this,{lastEditInfo:P}=this.viewModel;if(!P||!v.lastEditedInfo)return null;const{date:F,user:ne}=P,Se=(0,On.n)("edit"===P.type?ne?E.lastEditedByUser:E.lastEdited:ne?E.lastCreatedByUser:E.lastCreated,{date:F,user:ne});return(0,Nt.u)("div",{key:"edit-info-element",class:this.classes("esri-feature__last-edited-info",Gs_contentElement)},Se)}renderText(v,E){const F=this._contentWidgets[E];return!F||F.destroyed?null:v.text?(0,Nt.u)("div",{key:this._buildKey("text-element",E),class:this.classes(Gs_contentElement,"esri-feature__text")},F.render()):null}_buildKey(v,...E){return`${v}__${this.get("viewModel.graphic.uid")||"0"}-${E.join("-")}`}_destroyContentWidget(v){v&&(v.viewModel=null,!v.destroyed&&v.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(v=>this._destroyContentWidget(v)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:v,visibleElements:E}=this,P=this.get("viewModel.content"),{contentViewModels:F}=this.viewModel;if(Array.isArray(P))P.forEach((ne,_e)=>{"attachments"===ne.type&&(this._contentWidgets[_e]=new cn({displayType:ne.displayType,headingLevel:E.title?v+1:v,viewModel:F[_e]})),"fields"===ne.type&&(this._contentWidgets[_e]=new ss({viewModel:F[_e]})),"media"===ne.type&&(this._contentWidgets[_e]=new To({viewModel:F[_e]})),"text"===ne.type&&(this._contentWidgets[_e]=new wt({viewModel:F[_e]})),"custom"===ne.type&&(this._contentWidgets[_e]=new wt({viewModel:F[_e]})),"expression"===ne.type&&(this._contentWidgets[_e]=new da({viewModel:F[_e]}))},this);else{const ne=F[0];ne&&!ne.destroyed&&(this._contentWidgets[0]=new wt({viewModel:ne}))}this.scheduleRender()}};(0,C._)([(0,Be.B)("viewModel.graphic")],Vs.prototype,"graphic",void 0),(0,C._)([(0,Be.B)("viewModel.defaultPopupTemplateEnabled")],Vs.prototype,"defaultPopupTemplateEnabled",void 0),(0,C._)([(0,M.Cb)()],Vs.prototype,"headingLevel",void 0),(0,C._)([(0,M.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Vs.prototype,"label",void 0),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/widgets/Feature/t9n/Feature")],Vs.prototype,"messages",void 0),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/t9n/common")],Vs.prototype,"messagesCommon",void 0),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/widgets/support/t9n/uriUtils")],Vs.prototype,"messagesURIUtils",void 0),(0,C._)([(0,Be.B)("viewModel.spatialReference")],Vs.prototype,"spatialReference",void 0),(0,C._)([(0,Be.B)("viewModel.title")],Vs.prototype,"title",void 0),(0,C._)([(0,M.Cb)()],Vs.prototype,"visibleElements",void 0),(0,C._)([(0,Y.p)("visibleElements")],Vs.prototype,"castVisibleElements",null),(0,C._)([(0,Be.B)("viewModel.map")],Vs.prototype,"map",void 0),(0,C._)([(0,Be.B)("viewModel.view")],Vs.prototype,"view",void 0),(0,C._)([(0,M.Cb)({type:ui})],Vs.prototype,"viewModel",void 0),Vs=(0,C._)([(0,ee.j)("esri.widgets.Feature")],Vs);const vl=Vs;var qi=p(61885);let Un=class extends qi.Z.EventedAccessor{constructor(v){super(v),this._anchorHandles=new se.Z,this.location=null,this.screenLocation=null,this.screenLocationEnabled=!1,this.view=null,this._anchorHandles.add([(0,xe.YP)(this,["screenLocationEnabled","location","view.size","view.stationary"],()=>this._updateScreenPointAndHandle()),(0,xe.YP)(this,["view","view.ready"],()=>this._wireUpView())])}destroy(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null}_wireUpView(){const v="view";if(this._anchorHandles.remove(v),this._viewpointHandle=null,!this.get("view.ready"))return;this._setScreenLocation();const{view:E}=this,F=(0,xe.Wy)(E,"3d"===E.type?"camera":"viewpoint",()=>this._viewpointChange());this._anchorHandles.add(F,v),this._viewpointHandle=F,this._toggleWatchingViewpoint()}_viewpointChange(){this._setScreenLocation(),this.emit("view-change")}_updateScreenPointAndHandle(){this._setScreenLocation(),this._toggleWatchingViewpoint()}_toggleWatchingViewpoint(){const{_viewpointHandle:v,location:E,screenLocationEnabled:P}=this;!v||(E&&P?v.resume():v.pause())}_setScreenLocation(){const{location:v,view:E,screenLocationEnabled:P}=this,F=this.get("view.ready"),ne=P&&F&&(0,V.pC)(v)?E.toScreen(v):null;this._set("screenLocation",ne)}};(0,C._)([(0,M.Cb)()],Un.prototype,"location",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Un.prototype,"screenLocation",void 0),(0,C._)([(0,M.Cb)()],Un.prototype,"screenLocationEnabled",void 0),(0,C._)([(0,M.Cb)()],Un.prototype,"view",void 0),Un=(0,C._)([(0,ee.j)("esri.widgets.support.AnchorElementViewModel")],Un);const Uo=Un;let wi=class extends Uo{constructor(v){super(v),this.visible=!1}};(0,C._)([(0,M.Cb)()],wi.prototype,"visible",void 0),wi=(0,C._)([(0,ee.j)("esri.widgets.CompassViewModel")],wi);const xs=wi;let kn=class extends me.Z{constructor(v,E){super(v,E),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new xs,this.visible=!1}initialize(){this.own([(0,xe.YP)(this,"visible",v=>this._visibleChange(v))])}destroy(){this._animationPromise=null}show(v){const{location:E,promise:P}=v;E&&(this.viewModel.location=E),this.visible=!0,P&&P.catch(()=>{}).then(()=>this.hide())}hide(){this.visible=!1}render(){const{visible:v}=this,{screenLocation:E}=this.viewModel,P=!!E,_e={"esri-spinner--start":v&&P,"esri-spinner--finish":!v&&P},Se=this._getPositionStyles();return(0,Nt.u)("div",{class:this.classes("esri-spinner",_e),styles:Se})}_visibleChange(v){if(v)return void(this.viewModel.screenLocationEnabled=!0);const E=(0,w.e4)(this._animationDelay);this._animationPromise=E,E.catch(()=>{}).then(()=>{this._animationPromise===E&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:v,view:E}=this.viewModel;if(!E||(0,V.Wi)(v))return{};const{padding:P}=E;return{left:v.x-P.left+"px",top:v.y-P.top+"px"}}};(0,C._)([(0,Be.B)("viewModel.location")],kn.prototype,"location",void 0),(0,C._)([(0,Be.B)("viewModel.view")],kn.prototype,"view",void 0),(0,C._)([(0,M.Cb)({type:xs})],kn.prototype,"viewModel",void 0),(0,C._)([(0,Be.B)("viewModel.visible")],kn.prototype,"visible",void 0),kn=(0,C._)([(0,ee.j)("esri.widgets.Spinner")],kn);const Ce=kn;p(29132),p(65787);var ge=p(46367),Ae=p(63602),Ve=p(59397),pt=p(48753),Et=p(10671),kt=(p(71131),p(86606));function Fr(v){return v&&"opacity"in v?v.opacity*Fr(v.parent):1}function ci(){return(ci=(0,j.Z)(function*(v,E){var P,F;if(!v)return;const ne=v.sourceLayer,_e=null!=(P=(0,V.pC)(E)&&null!=(F=E.useSourceLayer)&&F?ne:v.layer)?P:ne,Se=Fr(_e);if((0,V.pC)(v.symbol)&&(!(0,V.pC)(E)||!0!==E.ignoreGraphicSymbol)){const hs="web-style"===v.symbol.type?yield v.symbol.fetchSymbol((0,V.pC)(E)?E.abortOptions:null):v.symbol.clone();return(0,kt.tb)(hs,null,Se),hs}const je=(0,V.pC)(E)&&E.renderer||_e&&"renderer"in _e&&_e.renderer;let Ye=je&&"getSymbolAsync"in je?yield je.getSymbolAsync(v,E):null;if(!Ye)return;if(Ye="web-style"===Ye.type?yield Ye.fetchSymbol((0,V.pC)(E)?E.abortOptions:null):Ye.clone(),!("visualVariables"in je)||!je.visualVariables||!je.visualVariables.length)return(0,kt.tb)(Ye,null,Se),Ye;if("arcadeRequiredForVisualVariables"in je&&je.arcadeRequiredForVisualVariables&&((0,V.Wi)(E)||(0,V.Wi)(E.arcade))){const hs=_t({},(0,V.Wg)(E));hs.arcade=yield(0,St.LC)(),E=hs}const yt=yield Promise.resolve().then(p.bind(p,81808)),Pt=[],jt=[],tr=[],rr=[];for(const hs of je.visualVariables)switch(hs.type){case"color":Pt.push(hs);break;case"opacity":jt.push(hs);break;case"rotation":rr.push(hs);break;case"size":hs.target||tr.push(hs)}const wr=!!Pt.length&&Pt[Pt.length-1],Jr=wr?yt.getColor(wr,v,E):null,kr=!!jt.length&&jt[jt.length-1];let as=kr?yt.getOpacity(kr,v,E):null;if(null!=Se&&(as=null!=as?as*Se:Se),(0,kt.tb)(Ye,Jr,as),tr.length){const hs=yt.getAllSizes(tr,v,E);yield(0,kt.e3)(Ye,hs)}for(const hs of rr)(0,kt.BR)(Ye,yt.getRotationAngle(hs,v,E),hs.axis);return Ye})).apply(this,arguments)}var Pn=p(58677);const to_iconZoom="esri-icon-zoom-in-magnifying-glass",Bn=new pt.Z({id:"zoom-to-feature",title:"{messages.zoom}",className:to_iconZoom}),xi=new pt.Z({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),Ai=new pt.Z({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:to_iconZoom}),Li=new pt.Z({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"}),di=X.Z.getLogger("esri.widgets.Popup.PopupViewModel");function Wu(v){const{selectedFeature:E,location:P,view:F}=v;return F?"3d"===F.type?E||P:v.get("selectedFeature.geometry")||P:null}function eh(v,E){if("3d"!==(null==E?void 0:E.type)||!v||"esri.Graphic"!==v.declaredClass)return!0;const P=E.getViewForGraphic(v);if(P&&"whenGraphicBounds"in P){let F=!1;return P.whenGraphicBounds(v,{useViewElevation:!0}).then(ne=>{F=!ne||!ne.boundingBox||ne.boundingBox[0]===ne.boundingBox[3]&&ne.boundingBox[1]===ne.boundingBox[4]&&ne.boundingBox[2]===ne.boundingBox[5]}).catch(()=>{const ne=new W.Z("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:v});di.error(ne)}),F}return!0}function Cl(){return(Cl=(0,j.Z)(function*(v){const{location:E,selectedFeature:P,view:F,zoomFactor:ne}=v,_e=Wu(v);if(!_e){const yt=new W.Z("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:_e,view:F});return di.error(yt),Promise.reject(yt)}const Se=F.scale/ne,je=v.get("selectedFeature.geometry")||E,Ye=je&&"point"===je.type&&eh(P,F);Bn.active=!0,Bn.disabled=!0;try{yield v.view.goTo({target:_e,scale:Ye?Se:void 0})}finally{Bn.active=!1,Bn.disabled=!1,v.zoomToLocation=null,Ye&&(v.location=je)}})).apply(this,arguments)}function Ol(){return(Ol=(0,j.Z)(function*(v){const{selectedFeature:E,view:P}=v;if("2d"!==(null==P?void 0:P.type)){const je=new W.Z("zoomToCluster:invalid-view","View must be 2d MapView.",{view:P});throw di.error(je),je}if(!E.isAggregate){const je=new W.Z("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:E});throw di.error(je),je}const F=E.sourceLayer,ne=yield P.whenLayerView(F),_e=ne.createQuery();_e.aggregateIds=[E.getObjectId()],Ai.active=!0,Ai.disabled=!0;const{extent:Se}=yield ne.queryExtent(_e);yield P.goTo({target:Se}),Ai.active=!1,Ai.disabled=!1})).apply(this,arguments)}function Pl(){return(Pl=(0,j.Z)(function*(v){const{selectedFeature:E,view:P}=v;if("2d"!==(null==P?void 0:P.type)){const je=new W.Z("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:P});throw di.error(je),je}if(!E.isAggregate){const je=new W.Z("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:E});throw di.error(je),je}const F=E.sourceLayer,ne=yield P.whenLayerView(F),_e=ne.createQuery();_e.aggregateIds=[E.getObjectId()];const{extent:Se}=yield ne.queryExtent(_e);v.selectedClusterBoundaryFeature.geometry=Se,P.graphics.add(v.selectedClusterBoundaryFeature)})).apply(this,arguments)}function Sl(){return(Sl=(0,j.Z)(function*(v){const{selectedFeature:E,view:P}=v;if("2d"!==(null==P?void 0:P.type)){const je=new W.Z("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:P});throw di.error(je),je}if(!E.isAggregate){const je=new W.Z("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:E});throw di.error(je),je}const F=E.sourceLayer,ne=yield P.whenLayerView(F),_e=ne.createQuery();_e.aggregateIds=[E.getObjectId()],Li.active=!0,Li.disabled=!0;const{features:Se}=yield ne.queryFeatures(_e);Li.active=!1,Li.disabled=!1,P.popup.open({features:[E].concat(Se),featureMenuOpen:!0})})).apply(this,arguments)}const Nu=v=>{let E=class extends v{constructor(...P){super(...P),this.goToOverride=null,this.view=null}callGoTo(P){const{view:F}=this;return this.goToOverride?this.goToOverride(F,P):F.goTo(P.target,P.options)}};return(0,C._)([(0,M.Cb)()],E.prototype,"goToOverride",void 0),(0,C._)([(0,M.Cb)()],E.prototype,"view",void 0),E=(0,C._)([(0,ee.j)("esri.widgets.support.GoTo")],E),E};var oh=p(88493);const Bo=D.Z.ofType({key:"type",defaultKeyValue:"button",base:Ve.Z,typeMap:{button:pt.Z,toggle:Et.Z}}),Zu="esri.widgets.Popup.PopupViewModel",Ku=X.Z.getLogger(Zu);let qr=class extends(Nu(Uo)){constructor(v){super(v),this._handles=new se.Z,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new Bo,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new $.Z({symbol:new oh.Z({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(v=>v.waitingForContent)}initialize(){this._handles.add([(0,xe.S1)(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),(0,xe.YP)(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),(0,xe.YP)(this,"view.animation.state",v=>this._animationStateChange(v)),(0,xe.YP)(this,"location",v=>this._locationChange(v)),(0,xe.YP)(this,"selectedFeature",v=>this._selectedFeatureChange(v)),(0,xe.YP)(this,["selectedFeatureIndex","featureCount","featuresPerPage"],()=>this._selectedFeatureIndexChange()),(0,xe.YP)(this,["featurePage","selectedFeatureIndex","featureCount","featuresPerPage, featureViewModels"],()=>this._setGraphicOnFeatureViewModels()),(0,xe.YP)(this,"featureViewModels",()=>this._featureViewModelsChange()),this.on("trigger-action",v=>function(v){const{event:E,view:P}=v,{action:F}=E,ne=P&&P.popup;if(!F)return Promise.reject(new W.Z("trigger-action:missing-arguments","Event has no action"));if(!ne)return Promise.reject(new W.Z("trigger-action:missing-arguments","view.popup is missing"));const{disabled:_e,id:Se}=F;if(!Se)return Promise.reject(new W.Z("trigger-action:invalid-action","action.id is missing"));if(_e)return Promise.reject(new W.Z("trigger-action:invalid-action","Action is disabled"));if(Se===Bn.id)return function th(v){return Cl.apply(this,arguments)}(ne.viewModel).catch(w.H9);if(Se===Ai.id)return function rh(v){return Ol.apply(this,arguments)}(ne.viewModel);if(Se===Li.id)return ne.featureMenuOpen=!ne.featureMenuOpen,ne.viewModel.browseClusterEnabled=!ne.viewModel.browseClusterEnabled,Promise.resolve();if(ne.viewModel.browseClusterEnabled=!1,Se===xi.id){ne.close();const{selectedFeature:je}=ne;if(!je)return Promise.reject(new W.Z(`trigger-action:${xi.id}`,"selectedFeature is required",{selectedFeature:je}));const{sourceLayer:Ye}=je;return Ye?Ye.remove(je):P.graphics.remove(je),Promise.resolve()}return Promise.resolve()}({event:v,view:this.view})),(0,xe.Nj)(this,"waitingForResult",()=>this._waitingForResultChange(),!0),(0,xe.YP)(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs()),(0,xe.YP)(this,["view.scale"],this._viewScaleChange),(0,xe.Nj)(this,"visible",()=>this.browseClusterEnabled=!1),(0,xe.YP)(this,"browseClusterEnabled",v=>v?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const v=this._get("allActions")||new Bo;v.removeAll();const{actions:E,defaultActions:P,defaultPopupTemplateEnabled:F,includeDefaultActions:ne,selectedFeature:_e}=this,Se=ne?P.concat(E):E,je=_e&&("function"==typeof _e.getEffectivePopupTemplate&&_e.getEffectivePopupTemplate(F)||_e.popupTemplate),Ye=je&&je.actions,yt=je&&je.overwriteActions?Ye:Ye?Ye.concat(Se):Se;return yt&&yt.filter(Boolean).forEach(Pt=>v.add(Pt)),v}get defaultActions(){var v;const E=this._get("defaultActions")||new Bo;return E.removeAll(),E.addMany(null!=(v=this.selectedFeature)&&v.isAggregate?[Ai.clone(),Li.clone()]:[Bn.clone()]),E}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(v){const E=v||[];this._set("features",E);const{pendingPromisesCount:P,promiseCount:F,selectedFeatureIndex:ne}=this,_e=F&&E.length;_e&&P&&-1===ne?this.selectedFeatureIndex=0:_e&&-1!==ne||(this.selectedFeatureIndex=E.length?0:-1)}get location(){return this._get("location")||null}set location(v){const E=this.get("view.spatialReference.isWebMercator");v&&v.get("spatialReference.isWGS84")&&E&&(v=(0,ge.$)(v)),this._set("location",v)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(v){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(v)||!v.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",v),(v=v.slice(0)).forEach(E=>{this._pendingPromises.add(E),E.then(ne=>{this._pendingPromises.has(E)&&this._updateFeatures(ne),this._updatePendingPromises(E)},()=>this._updatePendingPromises(E))}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:v,selectedFeatureIndex:E}=this;return-1===E?null:v[E]||null}get selectedFeatureIndex(){const v=this._get("selectedFeatureIndex");return"number"==typeof v?v:-1}set selectedFeatureIndex(v){const{featureCount:E}=this;v=isNaN(v)||v<-1||!E?-1:(v+E)%E,this._set("selectedFeatureIndex",v)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:v}=this,E=Wu(this);if(!E){const P=new W.Z("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:E,view:v});return Ku.error(P),Promise.reject(P)}return this.callGoTo({target:{target:E,scale:v.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null})}fetchFeatures(v,E){const{view:P}=this;if(!P||!v){const F=new W.Z("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:v,view:P});return Ku.error(F),Promise.reject(F)}return P.fetchPopupFeatures(v,{event:E&&E.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:E&&E.signal})}open(v){const E=Sr(_t({updateLocationEnabled:!1,promises:[],fetchFeatures:!1},v),{visible:!0}),{fetchFeatures:P}=E;delete E.fetchFeatures,P&&this._setFetchFeaturesPromises(E.location);const F=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const ne of F)delete E[ne];this.set(E)}triggerAction(v){const E=this.allActions.getItemAt(v);E&&!E.disabled&&this.emit("trigger-action",{action:E})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){(function ih(v){var E;null!=(E=v.selectedFeature)&&E.isAggregate&&(v.features=v.features.filter(P=>P.isAggregate))})(this),this._clearBrowsedClusterGraphics()}enableClusterBrowsing(){var v=this;return(0,j.Z)(function*(){yield function sh(v){return Pl.apply(this,arguments)}(v),yield function nh(v){return Sl.apply(this,arguments)}(v)})()}_animationStateChange(v){this.zoomToLocation||(Bn.disabled="waiting-for-target"===v)}_clearBrowsedClusterGraphics(){var v;const E=null==(v=this.view)?void 0:v.graphics;E&&(E.remove(this.selectedClusterBoundaryFeature),E.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){var v;if(null!=(v=this.selectedFeature)&&v.isAggregate)return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.browseClusterEnabled=!1,this.features=[this.selectedFeature])}_locationChange(v){const{selectedFeature:E,updateLocationEnabled:P}=this;P&&v&&(!E||E.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:v,featureCount:E,featurePage:P,featuresPerPage:F,featureViewModels:ne}=this;if(null===P)return;const _e=((P-1)*F+E)%E;ne.slice(_e,_e+F).forEach((je,Ye)=>{je&&!je.graphic&&(je.graphic=v[_e+Ye])})}_selectedFeatureChange(v){var E=this;return(0,j.Z)(function*(){if(!v)return;const{location:P,updateLocationEnabled:F,view:ne}=E;if(E.browseClusterEnabled)return E._selectedClusterFeature&&(ne.graphics.remove(E._selectedClusterFeature),E._selectedClusterFeature=null),v.isAggregate?void 0:(v.symbol=yield function As(v,E){return ci.apply(this,arguments)}(v),E._selectedClusterFeature=v,void ne.graphics.add(E._selectedClusterFeature));!F&&P||!v.geometry?F&&!v.geometry&&E.centerAtLocation().then(()=>{E.location=ne.center.clone()}):E.location=(0,V.Wg)(E._getPointFromGeometry(v.geometry))})()}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(v){return this._fetchFeaturesWithController(this._getScreenPoint(v||this.location)).then(E=>{const{clientOnlyGraphics:P,promisesPerLayerView:F}=E,ne=Promise.resolve(P),_e=F.map(Se=>Se.promise);this.promises=[ne,..._e]})}_destroyFeatureVMs(){this.featureViewModels.forEach(v=>v&&!v.destroyed&&v.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:v,features:E,featureViewModels:P}=this;if(null!=v&&v.isAggregate||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!E||!E.length)return;const F=P.slice(0),ne=[];E.forEach((_e,Se)=>{if(!_e)return;let je=null;if(F.some((Pt,jt)=>(Pt&&Pt.graphic===_e&&(je=Pt,F.splice(jt,1)),!!je)),je)ne[Se]=je;else{var Ye,yt;const Pt=new ui({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:null==(Ye=this.view)?void 0:Ye.spatialReference,graphic:_e===v?_e:null,map:null==(yt=this.view)?void 0:yt.map,view:this.view});ne[Se]=Pt}}),F.forEach(_e=>_e&&!_e.destroyed&&_e.destroy()),this._set("featureViewModels",ne)}_getScreenPoint(v){const{view:E}=this;return E&&v&&"function"==typeof E.toScreen?E.toScreen(v):null}_autoOpenEnabledChange(){const v="auto-fetch-features",{_handles:E,autoOpenEnabled:P}=this;if(E.remove(v),P&&this.view){const F=this.view.on("click",ne=>{"mouse"===ne.pointerType&&0!==ne.button||this._fetchFeaturesAndOpen(ne)},Pn.f.WIDGET);E.add(F,v)}}_cancelFetchingFeatures(){const v=this._fetchFeaturesController;v&&v.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(v,E){this._cancelFetchingFeatures();const P=new AbortController,{signal:F}=P;this._fetchFeaturesController=P,this.notifyChange("waitingForResult");const ne=this.fetchFeatures(v,{signal:F,event:E});return ne.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),ne}_fetchFeaturesAndOpen(v){const{screenPoint:E,mapPoint:P}=v,{view:F}=this;this._fetchFeaturesWithController(E,v).then(ne=>{const{clientOnlyGraphics:_e,promisesPerLayerView:Se,location:je}=ne,Ye=[Promise.resolve(_e),...Se.map(yt=>yt.promise)];return F.popup.open({location:je||P,promises:Ye}),ne})}_updatePendingPromises(v){v&&this._pendingPromises.has(v)&&(this._pendingPromises.delete(v),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(v){return(0,V.Wi)(v)?null:"point"===v.type?v:"extent"===v.type?v.center:"polygon"===v.type?v.centroid:"multipoint"===v.type||"polyline"===v.type?v.extent.center:null}_getLayerView(v,E){return(0,j.Z)(function*(){return yield v.when(),v.whenLayerView(E)})()}_highlightFeature(){var v=this;return(0,j.Z)(function*(){const E="highlight";v._handles.remove(E);const{selectedFeature:P,highlightEnabled:F,view:ne,visible:_e}=v;if(!(P&&ne&&F&&_e))return;let{layer:Se,sourceLayer:je}=P;if("map-notes"!==(null==je?void 0:je.type)&&"subtype-group"!==(null==je?void 0:je.type)||(Se=je),!(Se&&Se instanceof Ae.Z))return;const Ye=v._getLayerView(ne,Se);v._highlightPromise=Ye;const yt=yield Ye;if(!(yt&&function El(v){return v&&"function"==typeof v.highlight}(yt)&&v._highlightPromise===Ye&&v.selectedFeature&&v.highlightEnabled&&v.visible))return;const Pt="imagery"===Se.type?void 0:"objectIdField"in Se&&Se.objectIdField,jt=P.attributes,rr=yt.highlight(jt&&Pt&&jt[Pt]||P);v._handles.add(rr,E)})()}_updateFeatures(v){const{features:E}=this;if(!v||!v.length)return;if(!E.length)return void(this.features=v);const P=v.filter(F=>-1===E.indexOf(F));this.features=E.concat(P)}};(0,C._)([(0,M.Cb)()],qr.prototype,"featurePage",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"isLoadingFeature",null),(0,C._)([(0,M.Cb)({type:Bo})],qr.prototype,"actions",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],qr.prototype,"active",null),(0,C._)([(0,M.Cb)({readOnly:!0})],qr.prototype,"allActions",null),(0,C._)([(0,M.Cb)({type:Boolean})],qr.prototype,"defaultPopupTemplateEnabled",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"autoCloseEnabled",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"autoOpenEnabled",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"browseClusterEnabled",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"content",void 0),(0,C._)([(0,M.Cb)({type:Bo,readOnly:!0})],qr.prototype,"defaultActions",null),(0,C._)([(0,M.Cb)({readOnly:!0})],qr.prototype,"featureCount",null),(0,C._)([(0,M.Cb)()],qr.prototype,"features",null),(0,C._)([(0,M.Cb)()],qr.prototype,"featuresPerPage",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"featureViewModelAbilities",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],qr.prototype,"featureViewModels",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"highlightEnabled",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"includeDefaultActions",void 0),(0,C._)([(0,M.Cb)({type:oe.Z})],qr.prototype,"location",null),(0,C._)([(0,M.Cb)({readOnly:!0})],qr.prototype,"pendingPromisesCount",null),(0,C._)([(0,M.Cb)({readOnly:!0})],qr.prototype,"selectedClusterBoundaryFeature",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],qr.prototype,"waitingForResult",null),(0,C._)([(0,M.Cb)({readOnly:!0})],qr.prototype,"promiseCount",null),(0,C._)([(0,M.Cb)()],qr.prototype,"promises",null),(0,C._)([(0,M.Cb)({value:null,readOnly:!0})],qr.prototype,"selectedFeature",null),(0,C._)([(0,M.Cb)({value:-1})],qr.prototype,"selectedFeatureIndex",null),(0,C._)([(0,M.Cb)({readOnly:!0})],qr.prototype,"selectedFeatureViewModel",null),(0,C._)([(0,M.Cb)({readOnly:!0})],qr.prototype,"state",null),(0,C._)([(0,M.Cb)()],qr.prototype,"title",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"updateLocationEnabled",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"view",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"visible",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"zoomFactor",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"zoomToLocation",void 0),(0,C._)([(0,M.Cb)()],qr.prototype,"centerAtLocation",null),qr=(0,C._)([(0,ee.j)(Zu)],qr);const Vu=qr;var Sn=p(24940);const $u="selected-index",zu="popup-spinner",yr_shadow="esri-popup--shadow",yr_button="esri-popup__button",yr_icon="esri-popup__icon",Gu={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},Hu="esri-popup";function Jn(v,E){return void 0===E?`${Hu}__${v}`:`${Hu}__${v}-${E}`}const ku="esri.widgets.Popup",Ju=X.Z.getLogger(ku),Yu={closeButton:!0,featureNavigation:!0};let Rr=class extends(jo(me.Z)){constructor(v,E){super(v,E),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new se.Z,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([P])=>{null!=P&&P.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=(0,Oe.P)(()=>this._displaySpinner(),0),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new Vu,this.visible=null,this.visibleElements=_t({},Yu),this._addSelectedFeatureIndexHandle(),this.own([(0,xe.YP)(this,"viewModel.screenLocation",()=>this._positionContainer()),(0,xe.YP)(this,["viewModel.active","dockEnabled"],()=>this._toggleScreenLocationEnabled()),(0,xe.YP)(this,"viewModel.screenLocation",(P,F)=>{!!P!=!!F&&this.reposition()}),(0,xe.YP)(this,["viewModel.view.padding","viewModel.view.size","viewModel.active","viewModel.location","alignment"],()=>this.reposition()),(0,xe.YP)(this,"spinnerEnabled",P=>this._spinnerEnabledChange(P)),(0,xe.YP)(this,"viewModel.view.size",(P,F)=>this._updateDockEnabledForViewSize(P,F)),(0,xe.YP)(this,"viewModel.view",(P,F)=>this._viewChange(P,F)),(0,xe.YP)(this,"viewModel.view.ready",(P,F)=>this._viewReadyChange(P,F)),(0,xe.YP)(this,["viewModel.waitingForResult","viewModel.location"],()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),(0,xe.YP)(this,["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],()=>this._setTitleFromFeatureWidget()),(0,xe.YP)(this,["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],()=>this._setContentFromFeatureWidget()),(0,xe.Nj)(this,"collapsed",()=>{var P,F;"xsmall"===(null==(P=this.viewModel)||null==(F=P.view)?void 0:F.widthBreakpoint)&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),(0,xe.on)(this,"viewModel.allActions","change",()=>this._watchActions()),(0,xe.S1)(this,"viewModel.allActions",()=>this._watchActions()),(0,xe.YP)(this,"viewModel.featureViewModels",()=>this._featureMenuViewportScrollTop())])}destroy(){var v,E;this._destroySelectedFeatureWidget(),this._destroySpinner(),null==(v=this._handles)||v.destroy(),this._unobserveFeatureMenuObserver(),null==(E=this._featureMenuIntersectionObserver)||E.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var v,E,P,F,ne,_e,Se;return!!(this.selectedFeatureWidget?(null==(v=this.selectedFeatureWidget)||null==(E=v.viewModel)?void 0:E.waitingForContent)||"error"===(null==(P=this.selectedFeatureWidget)||null==(F=P.viewModel)?void 0:F.state)||(null==(ne=this.selectedFeatureWidget)||null==(_e=ne.viewModel)?void 0:_e.content):null==(Se=this.viewModel)?void 0:Se.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(v){this._set("actionsMenuOpen",!!v)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||Gu}set dockOptions(v){const E=_t({},Gu),P=this.get("viewModel.view.breakpoints"),F={};P&&(F.width=P.xsmall,F.height=P.xsmall);const ne=_t(_t({},E),v),_e=_t(_t({},E.breakpoint),F),{breakpoint:Se}=ne;!0===Se?ne.breakpoint=_e:"object"==typeof Se&&(ne.breakpoint=_t(_t({},_e),Se)),this._set("dockOptions",ne),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:v,visibleElements:E,headingLevel:P}=this,{selectedFeatureViewModel:F}=this.viewModel,ne=Sr(_t({},E),{title:!1});return F?(v?(v.viewModel=F,v.visibleElements=ne):this._feature=new vl({headingLevel:P+1,viewModel:F,visibleElements:ne}),this._feature):null}castVisibleElements(v){return _t(_t({},Yu),v)}blur(){const{active:v}=this.viewModel;v||Ju.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(v,E){return this.viewModel.fetchFeatures(v,E)}focus(){const{active:v}=this.viewModel;v||Ju.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(v){var E,P;this._handles.remove($u);const _e={collapsed:!!v&&!!v.collapsed,actionsMenuOpen:!!v&&!!v.actionsMenuOpen,featureMenuOpen:!!v&&!!v.featureMenuOpen};"xsmall"===(null==(E=this.viewModel)||null==(P=E.view)?void 0:P.widthBreakpoint)&&(_e.collapsed=!0),this.set(_e),this.viewModel.open(v),this._shouldFocus(v),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(v){this.viewModel.triggerAction(v)}render(){var v,E,P,F;const{actionsMenuOpen:ne,dockEnabled:_e,featureMenuVisible:Se,dividedActions:je,currentAlignment:Ye,currentDockPosition:yt}=this,{active:Pt}=this.viewModel,{menuActions:jt}=je,Jr=null==(v=this.selectedFeature)||null==(E=v.layer)?void 0:E.title,kr=null==(P=this.selectedFeature)||null==(F=P.layer)?void 0:F.id;return(0,Nt.u)("div",{class:this.classes("esri-popup",{"esri-popup--aligned-top-center":"top-center"===Ye,"esri-popup--aligned-bottom-center":"bottom-center"===Ye,"esri-popup--aligned-top-left":"top-left"===Ye,"esri-popup--aligned-bottom-left":"bottom-left"===Ye,"esri-popup--aligned-top-right":"top-right"===Ye,"esri-popup--aligned-bottom-right":"bottom-right"===Ye,"esri-popup--is-docked":Pt&&_e,[yr_shadow]:Pt&&!_e,"esri-popup--is-docked-top-left":"top-left"===yt,"esri-popup--is-docked-top-center":"top-center"===yt,"esri-popup--is-docked-top-right":"top-right"===yt,"esri-popup--is-docked-bottom-left":"bottom-left"===yt,"esri-popup--is-docked-bottom-center":"bottom-center"===yt,"esri-popup--is-docked-bottom-right":"bottom-right"===yt,"esri-popup--feature-menu-open":Se,"esri-popup--actions-menu-open":Pt&&jt.length>1&&ne}),role:"presentation","data-layer-title":Jr,"data-layer-id":kr,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},Pt?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return(0,Nt.u)("span",{"aria-hidden":"true",class:this.classes(yr_icon,"esri-icon-loading-indicator","esri-rotating")})}renderNavigationLoading(){const{messagesCommon:v}=this;return this.viewModel.pendingPromisesCount?(0,Nt.u)("div",{key:Jn("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":v.loading,title:v.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const v=(0,ts.dZ)(this.container);return(0,Nt.u)("span",{"aria-hidden":"true",class:this.classes(yr_icon,{"esri-icon-right-triangle-arrow":v,"esri-popup__pagination-previous-icon--rtl":v,"esri-icon-left-triangle-arrow":!v,"esri-popup__pagination-previous-icon":!v})})}renderPreviousButton(){const{messages:v}=this;return(0,Nt.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(yr_button,"esri-popup__pagination-previous"),"aria-label":v.previous,title:v.previous},this.renderPreviousIcon())}renderNextIcon(){const v=(0,ts.dZ)(this.container);return(0,Nt.u)("span",{"aria-hidden":"true",class:this.classes(yr_icon,{"esri-icon-left-triangle-arrow":v,"esri-popup__pagination-next-icon--rtl":v,"esri-icon-right-triangle-arrow":!v,"esri-popup__pagination-next-icon":!v})})}renderNextButton(){const{messages:v}=this;return(0,Nt.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(yr_button,"esri-popup__pagination-next"),"aria-label":v.next,title:v.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:v,featureMenuId:E,messagesCommon:P}=this,{featureCount:F,selectedFeatureIndex:ne}=this.viewModel;return(0,Nt.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(yr_button,"esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":E,"aria-expanded":v.toString(),"aria-label":P.menu,title:P.menu},this._getPageText(F,ne))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:v}=this,E=this._wouldDockTo();return(0,Nt.u)("span",{"aria-hidden":"true",class:this.classes({"esri-icon-minimize":v,"esri-popup__icon--dock-icon":!v,"esri-icon-dock-right":!v&&("top-right"===E||"bottom-right"===E),"esri-icon-dock-left":!v&&("top-left"===E||"bottom-left"===E),"esri-icon-maximize":!v&&"top-center"===E,"esri-icon-dock-bottom":!v&&"bottom-center"===E},yr_icon)})}renderDockButton(){var v,E,P;const{dockEnabled:F,messages:ne}=this,_e=null==(v=this.viewModel)||null==(E=v.view)?void 0:E.widthBreakpoint,Se=F?ne.undock:ne.dock;return"xsmall"!==_e&&null!=(P=this.dockOptions)&&P.buttonEnabled?(0,Nt.u)("div",{role:"button","aria-label":Se,title:Se,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(yr_button,"esri-popup__button--dock")},this.renderDockIcon()):null}renderTitle(){const{title:v}=this.viewModel,{titleId:E,collapsible:P,contentCollapsed:F,messagesCommon:ne}=this,_e={"esri-popup__header-container--button":P},Se=(0,Nt.u)(an,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:v}),je=P?(0,Nt.u)("button",{key:`${v}--collapsible`,id:E,title:F?ne.expand:ne.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",_e),"aria-expanded":F?"false":"true",onclick:this._toggleCollapsed,type:"button"},Se):(0,Nt.u)("div",{key:v,id:E,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",_e)},Se);return v?je:null}renderCloseIcon(){return(0,Nt.u)("span",{"aria-hidden":"true",class:this.classes(yr_icon,"esri-icon-close")})}renderCloseButton(){const{visibleElements:v,messagesCommon:E}=this;return v.closeButton?(0,Nt.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:yr_button,"aria-label":E.close,title:E.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return(0,Nt.u)("header",{class:"esri-popup__header"},this.renderTitle(),(0,Nt.u)("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:v,hasContent:E,contentCollapsed:P}=this,{content:F}=this.viewModel;return E&&!P?(0,Nt.u)("article",{key:F,enterAnimation:this._createFeatureUpdatedAnimation(),id:v,class:"esri-popup__content"},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:v,actionsMenuButtonId:E,actionsMenuOpen:P,dividedActions:F,messagesCommon:ne}=this,_e=P?ne.close:ne.open,{menuActions:Se}=F;return Se.length?(0,Nt.u)("div",{key:Jn("actions-menu-button"),class:this.classes(yr_button,"esri-popup__actions-menu-button"),role:"button",id:E,"aria-haspopup":"true","aria-controls":P?v:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":_e,title:_e},(0,Nt.u)("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null}renderMenuActions(){const{actionsMenuId:v,actionsMenuButtonId:E,actionsMenuOpen:P,dividedActions:F}=this,{menuActions:ne}=F;return ne.length&&P?(0,Nt.u)("ul",{id:v,role:"menu","aria-labelledby":E,key:Jn("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},ne.toArray().map(_e=>this.renderAction({action:_e,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:v}=this.dividedActions;return!!v.length&&v.toArray().map(E=>this.renderAction({action:E,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:v,menuActions:E}=this.dividedActions,P=!!v.length,F=!!E.length;return P||F?(0,Nt.u)("div",{key:"inline-actions-container","data-inline-actions":P.toString(),"data-menu-actions":F.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?(0,Nt.u)("section",{key:Jn("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:v,dividedActions:E}=this,{inlineActions:P,menuActions:F}=E,ne=!!P.length,Se={"esri-popup__footer--has-pagination":v,"esri-popup__footer--has-actions":ne,"esri-popup__footer--has-actions-menu":!!F.length};return v||ne?(0,Nt.u)("div",{key:Jn("feature-buttons"),class:this.classes("esri-popup__footer",Se)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:v}=this,{featureViewModels:E,isLoadingFeature:P}=this.viewModel,F=(0,On.n)(v.selectedFeatures,{total:E.length});return(0,Nt.u)("section",{key:Jn("menu"),class:"esri-popup__feature-menu"},(0,Nt.u)("strong",{class:"esri-popup__feature-menu-header"},F),(0,Nt.u)("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:ts.Yo},this.renderFeatureMenu(),(0,Nt.u)("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),P?(0,Nt.u)("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:(0,Nt.u)("div",{key:Jn("pointer"),class:"esri-popup__pointer",role:"presentation"},(0,Nt.u)("div",{class:this.classes("esri-popup__pointer-direction",yr_shadow)}))}renderMainContainer(){const{dockEnabled:v,currentAlignment:E,currentDockPosition:P,titleId:F,contentId:ne,collapsible:_e,hasContent:Se,contentCollapsed:je,visibleElements:Ye}=this,{title:yt}=this.viewModel,Pt="bottom-left"===E||"bottom-center"===E||"bottom-right"===E||"top-left"===P||"top-center"===P||"top-right"===P,jt="top-left"===E||"top-center"===E||"top-right"===E||"bottom-left"===P||"bottom-center"===P||"bottom-right"===P;return(0,Nt.u)("div",{class:this.classes("esri-popup__main-container","esri-widget",{[yr_shadow]:v,"esri-popup--is-collapsible":_e,"esri-popup--is-collapsed":je}),tabIndex:Ye.closeButton?null:-1,role:"dialog","aria-labelledby":yt?F:"","aria-describedby":Se&&!je?ne:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},Pt?this.renderFooter():null,Pt?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),jt?this.renderFooter():null,jt?this.renderFeatureMenuContainer():null)}renderContent(){var v;const E=null==(v=this.viewModel)?void 0:v.content;return E?"string"==typeof E?(0,Nt.u)("div",{key:E,innerHTML:E}):this.renderNodeContent(E):null}renderActionText(v){return(0,Nt.u)("span",{key:"text",class:"esri-popup__action-text"},v)}renderActionIcon(v){const E=this._getActionClass(v),P=this._getActionImage(v),F={"esri-icon-loading-indicator":v.active,"esri-rotating":v.active,[yr_icon]:!!E,"esri-popup__action-image":!v.active&&!!P};return E&&(F[E]=!v.active),(0,Nt.u)("span",{key:"icon","aria-hidden":"true",class:this.classes(yr_icon,F),styles:this._getIconStyles(P)})}renderAction(v){const{action:E,type:P}=v,F=this._getActionTitle(E),ne={"esri-popup__action":"toggle"!==E.type,"esri-popup__action-toggle":"toggle"===E.type,"esri-popup__action-toggle--on":"toggle"===E.type&&E.value,"esri-popup__button--disabled":E.disabled},_e=[this.renderActionIcon(E),this.renderActionText(F)],Se="menu-item"===P?(0,Nt.u)("li",{key:E.uid,role:"menuitem",tabIndex:0,title:F,"aria-label":F,class:this.classes(yr_button,ne),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":E.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},_e):(0,Nt.u)("div",{key:E.uid,role:"button",tabIndex:0,title:F,"aria-label":F,class:this.classes(yr_button,ne),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":E.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},_e);return E.visible?Se:null}renderFeatureMenuItem(v,E){const{messages:P,messagesCommon:F}=this,{selectedFeatureIndex:ne,selectedFeatureViewModel:_e}=this.viewModel,Se=v===_e,je={"esri-popup__feature-menu-item--selected":Se},Ye=Se?(0,Nt.u)("span",{key:Jn(`feature-menu-selected-feature-${ne}`),title:P.selectedFeature,"aria-label":P.selectedFeature,class:"esri-icon-check-mark"}):null,yt=(0,Nt.u)("span",{innerHTML:v.title||F.untitled});return(0,Nt.u)("li",{role:"menuitem",tabIndex:-1,key:Jn(`feature-menu-feature-${ne}`),class:this.classes(je,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":E,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},(0,Nt.u)("span",{class:"esri-popup__feature-menu-title"},yt,Ye))}renderFeatureMenu(){const{featureMenuId:v}=this,{featureViewModels:E}=this.viewModel;return E.length>1?(0,Nt.u)("ol",{class:"esri-popup__feature-menu-list",id:v,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},E.filter(P=>!!P.graphic).map((P,F)=>this.renderFeatureMenuItem(P,F))):null}_getActionTitle(v){const{messages:E,selectedFeature:P,messagesCommon:F}=this,{id:ne}=v,_e=null==P?void 0:P.attributes,Se="zoom-to-feature"===ne?(0,On.n)(v.title,{messages:E}):"remove-selected-feature"===ne?(0,On.n)(v.title,{messages:F}):"zoom-to-clustered-features"===ne||"browse-clustered-features"===ne?(0,On.n)(v.title,{messages:E}):v.title;return Se&&_e?(0,On.n)(Se,_e):Se}_getActionClass(v){const{selectedFeature:E}=this,P=null==E?void 0:E.attributes,{className:F,image:ne}=v,_e=ne||F?F:"esri-icon-default-action";return _e&&P?(0,On.n)(_e,P):_e}_getActionImage(v){const{selectedFeature:E}=this,P=null==E?void 0:E.attributes,{image:F}=v;return F&&P?(0,On.n)(F,P):F}_createFeatureUpdatedAnimation(){return(0,ts.vU)("enter","esri-popup--feature-updated")}_getInlineActionCount(){const{maxInlineActions:v,featureNavigationVisible:E}=this;if("number"!=typeof v)return null;const P=Math.round(v);return Math.max(E?P-1:P,0)}_watchActions(){const{allActions:v}=this.viewModel;this.notifyChange("dividedActions");const E="actions";this._handles.remove(E),v&&v.forEach(P=>{this._handles.add((0,xe.YP)(P,["uid","active","className","disabled","id","title","image","visible"],()=>this.scheduleRender()),E)})}_divideActions(){const{allActions:v}=this.viewModel,E=v.filter(_e=>_e.visible),P=this._getInlineActionCount(),F=null===P,ne=0===P;return{inlineActions:F?E.slice(0):ne?new D.Z:E.slice(0,P),menuActions:F?new D.Z:E.slice(ne?0:P)}}_featureMenuOpenChanged(v){v?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(v){v?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:v,messagesCommon:E}=this;var P,F;v&&(this.viewModel.title="error"===(null==(P=v.viewModel)?void 0:P.state)?E.errorMessage:(null==(F=v.viewModel)?void 0:F.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:v}=this;v&&(this.viewModel.content=v)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(v){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(v),this._featureMenuIntersectionObserverNode=v}_handleFeatureMenuKeyup(v){"Escape"===(0,Je.kK)(v)&&(v.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(v){"Escape"===(0,Je.kK)(v)&&(v.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_handleFeatureMenuItemKeyup(v){const E=(0,Je.kK)(v),{_featureMenuNode:P}=this,F=v.currentTarget["data-feature-index"];if(!P)return;const ne=P.querySelectorAll("li"),_e=ne.length;"ArrowUp"!==E?"ArrowDown"!==E?"Home"!==E?"End"!==E||(v.stopPropagation(),ne[ne.length-1].focus()):(v.stopPropagation(),ne[0].focus()):(v.stopPropagation(),ne[(F+1+_e)%_e].focus()):(v.stopPropagation(),ne[(F-1+_e)%_e].focus())}_handleActionMenuItemKeyup(v){const E=(0,Je.kK)(v),{_actionsMenuNode:P}=this,F=v.currentTarget.dataset.actionUid,{menuActions:ne}=this.dividedActions,_e=ne.findIndex(Ye=>Ye.uid===F);if(!P)return;const Se=P.querySelectorAll("li"),je=Se.length;"ArrowUp"!==E?"ArrowDown"!==E?"Home"!==E?"End"!==E||(v.stopPropagation(),Se[Se.length-1].focus()):(v.stopPropagation(),Se[0].focus()):(v.stopPropagation(),Se[(_e+1+je)%je].focus()):(v.stopPropagation(),Se[(_e-1+je)%je].focus())}_handleMainKeyup(v){const E=(0,Je.kK)(v);"ArrowLeft"===E&&(v.stopPropagation(),this.previous()),"ArrowRight"===E&&(v.stopPropagation(),this.next())}_spinnerEnabledChange(v){if(this._destroySpinner(),!v)return;const E=this.get("viewModel.view");this._createSpinner(E)}_hideSpinner(){const{_spinner:v}=this;v&&(v.location=null,v.hide())}_displaySpinner(){const{_spinner:v}=this;if(!v)return;const{location:E,waitingForResult:P}=this.viewModel;P?v.show({location:E}):v.hide()}_getIconStyles(v){return{"background-image":v?`url(${v})`:""}}_shouldFocus(v){var E=this;return(0,j.Z)(function*(){v.shouldFocus&&(yield(0,T.N1)(()=>{var P;return!0===(null==(P=E.viewModel)?void 0:P.active)}),E.focus())})()}_addSelectedFeatureIndexHandle(){const v=(0,xe.YP)(this,"viewModel.selectedFeatureIndex",(E,P)=>this._selectedFeatureIndexUpdated(E,P));this._handles.add(v,$u)}_selectedFeatureIndexUpdated(v,E){const{featureCount:P}=this;P&&v!==E&&-1!==v&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:v}=this;v&&(v.viewModel=null,v&&!v.destroyed&&v.destroy()),this._feature=null}_isScreenLocationWithinView(v,E){return v.x>-1&&v.y>-1&&v.x<=E.width&&v.y<=E.height}_isOutsideView(v){const{popupHeight:E,popupWidth:P,screenLocation:F,side:ne,view:_e}=v;if(isNaN(P)||isNaN(E)||!_e||!F)return!1;const Se=_e.padding;return"right"===ne&&F.x+P/2>_e.width-Se.right||"left"===ne&&F.x-P/2<Se.left||"top"===ne&&F.y-E<Se.top||"bottom"===ne&&F.y+E>_e.height-Se.bottom}_calculateAutoAlignment(v){if("auto"!==v)return v;const{_pointerOffsetInPx:E,_containerNode:P,_mainContainerNode:F,viewModel:ne}=this,{screenLocation:_e,view:Se}=ne;if((0,V.Wi)(_e)||!Se||!P)return"top-center";if(!this._isScreenLocationWithinView(_e,Se))return this._get("currentAlignment")||"top-center";function je(Es){return parseInt(Es.replace(/[^-\d\.]/g,""),10)}const Ye=F?window.getComputedStyle(F,null):null,yt=Ye?je(Ye.getPropertyValue("max-height")):0,Pt=Ye?je(Ye.getPropertyValue("height")):0,{height:jt,width:tr}=P.getBoundingClientRect(),rr=tr+E,wr=Math.max(jt,yt,Pt)+E,Jr=this._isOutsideView({popupHeight:wr,popupWidth:rr,screenLocation:_e,side:"right",view:Se}),kr=this._isOutsideView({popupHeight:wr,popupWidth:rr,screenLocation:_e,side:"left",view:Se}),as=this._isOutsideView({popupHeight:wr,popupWidth:rr,screenLocation:_e,side:"top",view:Se}),hs=this._isOutsideView({popupHeight:wr,popupWidth:rr,screenLocation:_e,side:"bottom",view:Se});return kr?as?"bottom-right":"top-right":Jr?as?"bottom-left":"top-left":as?hs?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(v){return"function"==typeof v?v.call(this):v}_getCurrentAlignment(){const{alignment:v,dockEnabled:E}=this;return E||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(v)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(v){const E=["left","right"];return(0,ts.dZ)(this.container)&&E.reverse(),v.replace(/leading/gi,E[0]).replace(/trailing/gi,E[1])}_callDockPosition(v){return"function"==typeof v?v.call(this):v}_getDockPosition(){var v;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null==(v=this.dockOptions)?void 0:v.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(v){var E;if("auto"!==v)return v;const P=null==(E=this.viewModel)?void 0:E.view,F=(0,ts.dZ)(this.container)?"top-left":"top-right";if(!P)return F;const ne=P.padding||{left:0,right:0,top:0,bottom:0},_e=P.width-ne.left-ne.right,{breakpoints:Se}=P;return Se&&_e<=Se.xsmall?"bottom-center":F}_positionContainer(v=this._containerNode){if(v&&(this._containerNode=v),!v)return;const{screenLocation:E}=this.viewModel,{width:P}=v.getBoundingClientRect(),F=this._calculatePositionStyle(E,P);F&&(v.style.top=F.top,v.style.left=F.left,v.style.bottom=F.bottom,v.style.right=F.right)}_calculateFullWidth(v){const{currentAlignment:E,_pointerOffsetInPx:P}=this;return"top-left"===E||"bottom-left"===E||"top-right"===E||"bottom-right"===E?v+P:v}_calculateAlignmentPosition(v,E,P,F){const{currentAlignment:ne,_pointerOffsetInPx:_e}=this,Se=F/2,je=P.height-E,Ye=P.width-v,{padding:yt}=this.view;return"bottom-center"===ne?{top:E+_e-yt.top,left:v-Se-yt.left}:"top-left"===ne?{bottom:je+_e-yt.bottom,right:Ye+_e-yt.right}:"bottom-left"===ne?{top:E+_e-yt.top,right:Ye+_e-yt.right}:"top-right"===ne?{bottom:je+_e-yt.bottom,left:v+_e-yt.left}:"bottom-right"===ne?{top:E+_e-yt.top,left:v+_e-yt.left}:"top-center"===ne?{bottom:je+_e-yt.bottom,left:v-Se-yt.left}:void 0}_calculatePositionStyle(v,E){const{dockEnabled:P,view:F}=this;if(!F)return;if(P)return{left:"",top:"",right:"",bottom:""};if((0,V.Wi)(v)||!E)return;const ne=this._calculateFullWidth(E),_e=this._calculateAlignmentPosition(v.x,v.y,F,ne);return _e?{top:void 0!==_e.top?`${_e.top}px`:"auto",left:void 0!==_e.left?`${_e.left}px`:"auto",bottom:void 0!==_e.bottom?`${_e.bottom}px`:"auto",right:void 0!==_e.right?`${_e.right}px`:"auto"}:void 0}_viewChange(v,E){v&&E&&(this.close(),this.clear())}_viewReadyChange(v,E){if(v){const P=this.get("viewModel.view");this._wireUpView(P)}else E&&(this.close(),this.clear())}_wireUpView(v){if(this._destroySpinner(),!v)return;const{spinnerEnabled:E}=this;E&&this._createSpinner(v),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(v,E,P){const[F,ne]=v,[_e,Se]=E,{width:je,height:Ye}=P;return F<=je&&_e>je||F>je&&_e<=je||ne<=Ye&&Se>Ye||ne>Ye&&Se<=Ye}_updateDockEnabledForViewSize(v,E){if(!v||!E)return;const P=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},F=P.left+P.right,ne=P.top+P.bottom,_e=[],Se=[];_e[0]=v[0]-F,_e[1]=v[1]-ne,Se[0]=E[0]-F,Se[1]=E[1]-ne;const{dockOptions:je}=this;this._dockingThresholdCrossed(_e,Se,je.breakpoint)&&this._setDockEnabledForViewSize(je),this._setCurrentDockPosition()}_focusDockButtonNode(v){this._focusDockButton&&(this._focusDockButton=!1,v.focus())}_closeButtonNodeUpdated(v){return this._focusClose?(this._focusClose=!1,void v.focus()):this._blurClose?(this._blurClose=!1,void v.blur()):void 0}_mainContainerNodeUpdated(v){return this._mainContainerNode=v,this._focusContainer?(this._focusContainer=!1,void v.focus()):this._blurContainer?(this._blurContainer=!1,void v.blur()):void 0}_featureMenuNodeUpdated(v){if(this._featureMenuNode=v,!v||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const E=v.querySelectorAll("li");E.length&&E[0].focus()}_actionsMenuNodeUpdated(v){if(this._actionsMenuNode=v,!v||!this._focusFirstAction)return;this._focusFirstAction=!1;const E=v.querySelectorAll("li");E.length&&E[0].focus()}_focusFeatureMenuButtonNode(v){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,v.focus())}_focusActionsMenuButtonNode(v){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,v.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:v,viewModel:E}=this;E&&(E.screenLocationEnabled=E.active&&!v)}_shouldDockAtCurrentViewSize(v){var E,P;const F=v.breakpoint,ne=null==(E=this.viewModel)||null==(P=E.view)?void 0:P.ui;if(!ne)return!1;const{width:_e,height:Se}=ne;if(isNaN(_e)||isNaN(Se))return!1;const je=F.hasOwnProperty("width")&&_e<=F.width,Ye=F.hasOwnProperty("height")&&Se<=F.height;return je||Ye}_setDockEnabledForViewSize(v){v.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(v))}_getPageText(v,E){return this.featureNavigationVisible?(0,On.n)(this.messages.pageText,{index:E+1,total:v}):null}_destroySpinner(){const{_spinner:v,view:E}=this;v&&(E&&E.ui&&E.ui.remove(this._spinner,zu),v.destroy(),this._spinner=null)}_createSpinner(v){v&&(this._spinner=new Ce({view:v}),v.ui.add(this._spinner,{key:zu,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const v=!this.featureMenuOpen;this._featureMenuOpenChanged(v),this.actionsMenuOpen=!1,this.featureMenuOpen=v}_toggleActionsMenu(){const v=!this.actionsMenuOpen;this._actionsMenuOpenChanged(v),this.featureMenuOpen=!1,this.actionsMenuOpen=v}_triggerAction(v){const E=v.currentTarget.dataset.actionUid,{allActions:P}=this.viewModel,F=P.findIndex(_e=>_e.uid===E),ne=P.getItemAt(F);ne&&"toggle"===ne.type&&(ne.value=!ne.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(F)}_selectFeature(v){const E=v.currentTarget["data-feature-index"];isNaN(E)||(this.viewModel.selectedFeatureIndex=E),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"actionsMenuId",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"actionsMenuButtonId",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"featureMenuId",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"titleId",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"contentId",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"hasContent",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"featureNavigationVisible",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"collapsible",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"featureMenuVisible",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"contentCollapsed",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"dividedActions",null),(0,C._)([(0,Be.B)("viewModel.actions")],Rr.prototype,"actions",void 0),(0,C._)([(0,M.Cb)()],Rr.prototype,"actionsMenuOpen",null),(0,C._)([(0,M.Cb)()],Rr.prototype,"alignment",void 0),(0,C._)([(0,Be.B)("viewModel.autoCloseEnabled")],Rr.prototype,"autoCloseEnabled",void 0),(0,C._)([(0,Be.B)("viewModel.autoOpenEnabled")],Rr.prototype,"autoOpenEnabled",void 0),(0,C._)([(0,Be.B)("viewModel.defaultPopupTemplateEnabled")],Rr.prototype,"defaultPopupTemplateEnabled",void 0),(0,C._)([(0,Be.B)("viewModel.content")],Rr.prototype,"content",void 0),(0,C._)([(0,M.Cb)()],Rr.prototype,"collapsed",void 0),(0,C._)([(0,M.Cb)()],Rr.prototype,"collapseEnabled",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"currentAlignment",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"currentDockPosition",null),(0,C._)([(0,M.Cb)()],Rr.prototype,"dockOptions",null),(0,C._)([(0,M.Cb)()],Rr.prototype,"dockEnabled",void 0),(0,C._)([(0,Be.B)("viewModel.featureCount")],Rr.prototype,"featureCount",void 0),(0,C._)([(0,M.Cb)()],Rr.prototype,"featureMenuOpen",void 0),(0,C._)([(0,Be.B)("viewModel.features")],Rr.prototype,"features",void 0),(0,C._)([(0,Be.B)("viewModel.goToOverride")],Rr.prototype,"goToOverride",void 0),(0,C._)([(0,M.Cb)()],Rr.prototype,"headingLevel",void 0),(0,C._)([(0,Be.B)("viewModel.highlightEnabled")],Rr.prototype,"highlightEnabled",void 0),(0,C._)([(0,Be.B)("viewModel.location")],Rr.prototype,"location",void 0),(0,C._)([(0,M.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Rr.prototype,"label",void 0),(0,C._)([(0,M.Cb)()],Rr.prototype,"maxInlineActions",void 0),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/widgets/Popup/t9n/Popup")],Rr.prototype,"messages",void 0),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/t9n/common")],Rr.prototype,"messagesCommon",void 0),(0,C._)([(0,Be.B)("viewModel.promises")],Rr.prototype,"promises",void 0),(0,C._)([(0,Be.B)("viewModel.selectedFeature")],Rr.prototype,"selectedFeature",void 0),(0,C._)([(0,Be.B)("viewModel.selectedFeatureIndex")],Rr.prototype,"selectedFeatureIndex",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Rr.prototype,"selectedFeatureWidget",null),(0,C._)([(0,M.Cb)()],Rr.prototype,"spinnerEnabled",void 0),(0,C._)([(0,Be.B)("viewModel.title")],Rr.prototype,"title",void 0),(0,C._)([(0,Be.B)("viewModel.updateLocationEnabled")],Rr.prototype,"updateLocationEnabled",void 0),(0,C._)([(0,Be.B)("viewModel.view")],Rr.prototype,"view",void 0),(0,C._)([(0,M.Cb)({type:Vu}),function dh(v){return E=>{E.hasOwnProperty("_delegatedEventNames")||(E._delegatedEventNames=E._delegatedEventNames?E._delegatedEventNames.slice():[]);const P=E._delegatedEventNames,F=Array.isArray(v)?v:function uh(v){return v.split(",").map(E=>E.trim())}(v);P.push(...F)}}(["triggerAction","trigger-action"])],Rr.prototype,"viewModel",void 0),(0,C._)([(0,Be.B)("viewModel.visible")],Rr.prototype,"visible",void 0),(0,C._)([(0,M.Cb)()],Rr.prototype,"visibleElements",void 0),(0,C._)([(0,Y.p)("visibleElements")],Rr.prototype,"castVisibleElements",null),(0,C._)([(0,Sn.h)()],Rr.prototype,"_close",null),(0,C._)([(0,Sn.h)()],Rr.prototype,"_toggleDockEnabled",null),(0,C._)([(0,Sn.h)()],Rr.prototype,"_toggleFeatureMenu",null),(0,C._)([(0,Sn.h)()],Rr.prototype,"_toggleActionsMenu",null),(0,C._)([(0,Sn.h)()],Rr.prototype,"_triggerAction",null),(0,C._)([(0,Sn.h)()],Rr.prototype,"_selectFeature",null),(0,C._)([(0,Sn.h)()],Rr.prototype,"_next",null),(0,C._)([(0,Sn.h)()],Rr.prototype,"_previous",null),Rr=(0,C._)([(0,ee.j)(ku)],Rr);const Qu=Rr,Tl=[0,0];function Xu(v){v&&((0,Ee.cS)(v),v.parentNode&&v.parentNode.removeChild(v))}const _h=v=>{let E=class extends v{constructor(...P){super(...P),this._freqInfo={freq:16,time:750},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([this.watch("cursor",F=>{const ne=this.surface;ne&&ne.setAttribute("data-cursor",F)}),this.watch("interacting",F=>{const ne=this.surface;ne&&ne.setAttribute("data-interacting",F.toString())})])}initialize(){this.handles.add(this.watch("ui",(P,F)=>this._handleUIChange(P,F))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(P){const F=this._get("container");if(F===P)return;const ne="dom-size";if(this.handles.remove(ne),this._stopMeasuring(),F&&(F.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),Xu(this.root),this._set("root",null),(0,Ee.YD)(this.userContent,F),Xu(this.userContent),this._set("userContent",null)),P){P.classList.add("esri-view");const _e=document.createElement("div");_e.className="esri-view-user-storage",(0,Ee.YD)(P,_e),P.appendChild(_e),this._set("userContent",_e);const Se=document.createElement("div");Se.className="esri-view-root",P.insertBefore(Se,P.firstChild),this._set("root",Se);const je=document.createElement("div");je.className="esri-view-surface",je.setAttribute("role","application"),je.tabIndex=0,Se.appendChild(je),this._set("surface",je);const Ye=new Me;Se.appendChild(Ye.surface),this._set("overlay",Ye),Ye.watch("needsRender",yt=>{yt&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=(0,fe.A)({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add((0,T.YP)(()=>this.size,yt=>{const[Pt,jt]=yt,tr="esri-view-surface--inset-outline";Pt>=document.body.clientWidth||jt>=document.body.clientHeight?je.classList.add(tr):je.classList.remove(tr)},T.nn),ne),this._set("container",P),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const P=document.activeElement===this.surface;return document.hasFocus()&&P}get popup(){return this._get("popup")||new Qu({view:this})}set popup(P){const F=this._get("popup");F&&F!==P&&F.destroy(),this._set("popup",P)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(P,F,ne){const _e=this.position;return P-=_e[0],F-=_e[1],ne?(ne[0]=P,ne[1]=F):ne=[P,F],ne}containerToPage(P,F,ne){const _e=this.position;return P+=_e[0],F+=_e[1],ne?(ne[0]=P,ne[1]=F):ne=[P,F],ne}_handleUIChange(P,F){F&&(this.handles.remove("ui"),F.destroy()),P&&this._wireUI(P),this._set("ui",P)}_wireUI(P){this.handles.remove("ui"),P&&(P.view=this,this.handles.add([(0,T.YP)(()=>this.root,F=>{P.container=F?function fh(v){const E=document.createElement("div");return v.appendChild(E),E}(F):null},T.nn),(0,T.YP)(()=>this.popup,(F,ne)=>{ne&&P.remove(ne,"popup"),F&&(F.view=P.view,P.add(F,{key:"popup",position:"manual"}))},T.nn)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const P=this._freqInfo;P.freq=16,P.time=750,this.handles.add([(()=>{const F=()=>{P.freq=16,P.time=750};return window.addEventListener("resize",F),{remove(){window.removeEventListener("resize",F)}}})(),(0,fe.A)({prepare:F=>{const ne=this._measure(),_e=this._freqInfo;if(_e.time+=F.deltaTime,ne&&(_e.freq=16,this._get("resizing")||this._set("resizing",!0)),_e.time<_e.freq)return;_e.time=0;const Se=this._position();_e.freq=Se||ne?16:Math.min(750,2*_e.freq),!ne&&_e.freq>=512&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const P=this.container,F=P?P.clientWidth:0,ne=P?P.clientHeight:0;if(0===F||0===ne)return this.suspended||this._set("suspended",!0),!1;const _e=this.width,Se=this.height;return F===_e&&ne===Se?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",F),this._set("height",ne),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:_e,oldHeight:Se,width:F,height:ne}),!0)}_position(){const F=this.position,ne=function ph(v){const E=(v.ownerDocument||window.document).defaultView,P=v.getBoundingClientRect();return Tl[0]=P.left+E.pageXOffset,Tl[1]=P.top+E.pageYOffset,Tl}(this.container);return!(F&&ne[0]===F[0]&&ne[1]===F[1]||(this._set("position",[ne[0],ne[1]]),0))}forceDOMReadyCycle(){}};return(0,C._)([(0,M.Cb)({value:null,cast:P=>(0,Ee.L7)(P)})],E.prototype,"container",null),(0,C._)([(0,M.Cb)({readOnly:!0})],E.prototype,"focused",null),(0,C._)([(0,M.Cb)({readOnly:!0})],E.prototype,"height",void 0),(0,C._)([(0,M.Cb)({type:Qu})],E.prototype,"popup",null),(0,C._)([(0,M.Cb)({type:Me})],E.prototype,"overlay",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],E.prototype,"position",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],E.prototype,"resizing",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],E.prototype,"root",void 0),(0,C._)([(0,M.Cb)({value:null,readOnly:!0})],E.prototype,"size",null),(0,C._)([(0,M.Cb)({readOnly:!0})],E.prototype,"surface",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],E.prototype,"suspended",void 0),(0,C._)([(0,M.Cb)()],E.prototype,"ui",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],E.prototype,"userContent",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],E.prototype,"width",void 0),(0,C._)([(0,M.Cb)()],E.prototype,"widthBreakpoint",void 0),E=(0,C._)([(0,ee.j)("esri.views.DOMContainer")],E),E},gh=v=>{let E=class extends v{fetchPopupFeatures(P,F){var ne=this;return(0,j.Z)(function*(){yield ne.when();const{location:_e,queryArea:Se,layerViewsAndGraphics:je,clientOnlyGraphics:Ye}=yield ne._prepareFetchPopupFeatures(P,F),yt=Promise.resolve(Ye),Pt=ne._queryLayerPopupFeatures(Se,je,F),jt=Pt.map(tr=>tr.promise);return{location:_e,clientOnlyGraphics:Ye,allGraphicsPromise:(0,w.WW)([yt,...jt]).then(tr=>Array.from(new Set(tr.flat()))),promisesPerLayerView:Pt}})()}_queryLayerPopupFeatures(P,F,ne){return F.map(({layerView:_e,graphics:Se})=>{const je={clientGraphics:Se,event:(0,V.pC)(ne)?ne.event:null,signal:(0,V.pC)(ne)?ne.signal:null,defaultPopupTemplateEnabled:!!(0,V.pC)(ne)&&!!ne.defaultPopupTemplateEnabled},Ye=_e.fetchPopupFeatures(P,je);return{layerView:_e,promise:Ye}})}_isValidPopupGraphic(P,F){return P&&!!P.getEffectivePopupTemplate((0,V.pC)(F)&&F.defaultPopupTemplateEnabled)}_prepareFetchPopupFeatures(P,F){var ne=this;return(0,j.Z)(function*(){const{clientGraphics:_e,queryArea:Se,location:je}=yield ne._popupHitTestGraphics(P,F),Ye=ne._getFetchPopupLayerViews(),{layerViewsAndGraphics:yt,clientOnlyGraphics:Pt}=ne._graphicsPerFetchPopupLayerView(_e,Ye);return{clientOnlyGraphics:Pt,layerViewsAndGraphics:yt,queryArea:Se,location:je}})()}_popupHitTestGraphics(P,F){var ne=this;return(0,j.Z)(function*(){const{results:_e,mapPoint:Se}=yield ne.popupHitTest(P),je=_e.filter(yt=>ne._isValidPopupGraphic(yt.graphic,F)),Ye=je.length?je[0].mapPoint:null;return{clientGraphics:je.map(yt=>yt.graphic),queryArea:Se,location:Se||Ye}})()}_getFetchPopupLayerViews(){const P=[];return this.allLayerViews.forEach(F=>{this._isValidPopupLayerView(F)&&P.push(F)}),(0,V.pC)(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&P.push(this.graphicsView),P.reverse()}_isValidPopupLayerView(P){return(0,V.pC)(P)&&(!("layer"in P)||!P.suspended)&&"fetchPopupFeatures"in P}_graphicsPerFetchPopupLayerView(P,F){const ne=[],_e=new Map,Se=F.map(je=>{const Ye=[];return _e.set("layer"in je?je.layer:je.graphics,Ye),{layerView:je,graphics:Ye}});for(const je of P){const Ye=_e.get(je.layer)||_e.get(je.sourceLayer)||null;Ye?Ye.push(je):ne.push(je)}return{layerViewsAndGraphics:Se,clientOnlyGraphics:ne}}};return E=(0,C._)([(0,ee.j)("esri.views.PopupView")],E),E};var wl,Dl=p(73386),ro=p(91558),vh=p(89726),Eh=p(94573),Ts=p(86810),yn=p(58817),Wo=p(47996),qu=p(47877),Mn=p(99433),Il=p(55342);let _a=wl=class extends Ts.wq{constructor(v){super(v),this.type="none"}clone(){return new wl({type:this.type})}};(0,C._)([(0,Il.J)({none:"none",stayAbove:"stay-above"})],_a.prototype,"type",void 0),_a=wl=(0,C._)([(0,ee.j)("esri.ground.NavigationConstraint")],_a);var xl,ec=p(92236);const tc=X.Z.getLogger("esri.Ground");let Yn=xl=class extends((0,Ts.eC)(Wo.Z)){constructor(v){super(v),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new D.Z;const E=F=>{F.parent&&F.parent!==this&&"remove"in F.parent&&F.parent.remove(F),F.parent=this,"elevation"!==F.type&&"base-elevation"!==F.type&&tc.error(`Layer '${F.title}, id:${F.id}' of type '${F.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)};this.layers.on("after-add",F=>E(F.item)),this.layers.on("after-remove",F=>(F=>{F.parent=null})(F.item))}initialize(){this.when().catch(v=>{tc.error("#load()","Failed to load ground",v)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const v=this.layers.removeAll();for(const E of v)E.destroy();this.layers.destroy()}normalizeCtorArgs(v){return v&&"resourceInfo"in v&&(this._set("resourceInfo",v.resourceInfo),delete(v=_t({},v)).resourceInfo),v}set layers(v){this._set("layers",(0,vh.Z)(v,this._get("layers")))}writeLayers(v,E,P,F){const ne=[];v&&(F=Sr(_t({},F),{layerContainerType:"ground"}),v.forEach(_e=>{if("write"in _e){const Se={};(0,Eh.sM)(_e)().write(Se,F)&&ne.push(Se)}else F&&F.messages&&F.messages.push(new W.Z("layer:unsupported",`Layers (${_e.title}, ${_e.id}) of type '${_e.declaredClass}' cannot be persisted in the ground`,{layer:_e}))})),E.layers=ne}load(v){return this.addResolvingPromise(this._loadFromSource(v)),Promise.resolve(this)}loadAll(){return(0,qu.G)(this,v=>{v(this.layers)})}queryElevation(v,E){var P=this;return(0,j.Z)(function*(){yield P.load({signal:null==E?void 0:E.signal});const{ElevationQuery:F}=yield p.e(1991).then(p.bind(p,1991));(0,w.k_)(E);const ne=new F,_e=P.layers.filter(rc).toArray();return ne.queryAll(_e,v,E)})()}createElevationSampler(v,E){var P=this;return(0,j.Z)(function*(){yield P.load({signal:null==E?void 0:E.signal});const{ElevationQuery:F}=yield p.e(1991).then(p.bind(p,1991));(0,w.k_)(E);const ne=new F,_e=P.layers.filter(rc).toArray();return ne.createSamplerAll(_e,v,E)})()}clone(){const v={opacity:this.opacity,surfaceColor:(0,yn.d9)(this.surfaceColor),navigationConstraint:(0,yn.d9)(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(v.loadStatus="loaded"),new xl({resourceInfo:this.resourceInfo}).set(v)}read(v,E){this.resourceInfo||this._set("resourceInfo",{data:v,context:E}),super.read(v,E)}_loadFromSource(v){const E=this.resourceInfo;return E?this._loadLayersFromJSON(E.data,E.context,v):Promise.resolve(null)}_loadLayersFromJSON(v,E,P){const F=E&&E.origin||"web-scene",ne=E&&E.portal||null,_e=E&&E.url||null;return Promise.all([p.e(7534),p.e(1074)]).then(p.bind(p,71074)).then(({populateOperationalLayers:Se})=>{(0,w.k_)(P);const je=[];return v.layers&&Array.isArray(v.layers)&&je.push(Se(this.layers,v.layers,{context:{origin:F,url:_e,portal:ne,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"})),(0,w.as)(je)}).then(()=>{})}};function rc(v){return"elevation"===v.type||function bh(v){return v&&"createElevationSampler"in v}(v)}(0,C._)([(0,M.Cb)({json:{read:!1}})],Yn.prototype,"layers",null),(0,C._)([(0,Mn.c)("layers")],Yn.prototype,"writeLayers",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Yn.prototype,"resourceInfo",void 0),(0,C._)([(0,M.Cb)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:z.z8,read:{reader:ec.b,source:"transparency"},write:{writer:(v,E)=>{E.transparency=(0,ec.a)(v)},target:"transparency"}}})],Yn.prototype,"opacity",void 0),(0,C._)([(0,M.Cb)({type:ro.Z,json:{type:[z.z8],write:(v,E)=>{E.surfaceColor=v.toJSON().slice(0,3)}}})],Yn.prototype,"surfaceColor",void 0),(0,C._)([(0,M.Cb)({type:_a,json:{write:!0}})],Yn.prototype,"navigationConstraint",void 0),Yn=xl=(0,C._)([(0,ee.j)("esri.Ground")],Yn);const ga=Yn;function Mh(v){var E;return!(!(v&&v.loaded&&"capabilities"in v&&null!=v&&null!=(E=v.capabilities)&&E.operations&&"supportsEditing"in v.capabilities.operations&&!0===v.capabilities.operations.supportsEditing)||"editingEnabled"in v&&!v.editingEnabled)}var sc=p(59318),hi=p(21726),nc=p(33954);const ic=X.Z.getLogger("esri.support.basemapUtils");function lc(v){if(uc(v.url))return!0;if("vector-tile"===v.type)for(const E in v.sourceNameToSource){const P=v.sourceNameToSource[E];if(uc(null==P?void 0:P.sourceUrl))return!0}return!1}const Th=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function uc(v){if(!v)return!1;const E=new hi.R9((0,hi.hF)(v));return Th.test(E.authority)}const Ih=X.Z.getLogger("esri.support.groundUtils"),_c={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};var xh=p(6432),Ah=p(6119);let Fn=class extends((0,Ah.Q)((0,xh.K)(qi.Z.EventedMixin(be.Z)))){constructor(v){super(v),this.allLayers=new I.Z({getCollections:()=>{var E,P,F;return[null==(E=this.basemap)?void 0:E.baseLayers,null==(P=this.ground)?void 0:P.layers,this.layers,null==(F=this.basemap)?void 0:F.referenceLayers]},getChildrenFunction:E=>"layers"in E?E.layers:null}),this.allTables=new I.Z({getCollections:()=>[this.tables,this.layers],getChildrenFunction:E=>{const P=[];return"tables"in E&&P.push(E.tables),"layers"in E&&P.push(E.layers),P},itemFilterFunction:E=>{const P=E.parent;return P&&"tables"in P&&P.tables.includes(E)}}),this.basemap=null,this.editableLayers=new I.Z({getCollections:()=>[this.allLayers],itemFilterFunction:Mh}),this.ground=new ga,this._basemapCache={}}destroy(){var v,E;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),null==(v=this.ground)||v.destroy(),null==(E=this.basemap)||E.destroy(),function Oh(v){for(const E in v){const P=v[E];!1===(null==P?void 0:P.destroyed)&&P.destroy(),delete v[E]}}(this._basemapCache),this._basemapCache=null}castBasemap(v){return function oc(v,E){var P;let F;if("string"==typeof v){if(!(v in nc.s)){const ne=Object.entries(nc.s).filter(([_e,Se])=>sc.Z.apiKey&&!Se.classic||!sc.Z.apiKey&&Se.classic&&!Se.deprecated).map(([_e])=>`"${_e}"`).join(", ");return ic.warn(`Unable to find basemap definition for: ${v}. Try one of these: ${ne}`),null}E&&(F=E[v]),F||(F=Dl.default.fromId(v),E&&(E[v]=F))}else F=(0,z.se)(Dl.default,v);return null!=(P=F)&&P.destroyed&&(ic.warn("The provided basemap is already destroyed",{basemap:F}),F=null),F}(v,this._basemapCache)}castGround(v){const E=function wh(v){let E=null;return"string"==typeof v?v in _c?E=new ga({resourceInfo:{data:{layers:[_c[v]]}}}):Ih.warn(`Unable to find ground definition for: ${v}. Try "world-elevation"`):E=(0,z.se)(ga,v),E}(v);return(0,V.Wi)(E)?this._get("ground"):E}findLayerById(v){return this.allLayers.find(E=>E.id===v)}findTableById(v){return this.allTables.find(E=>E.id===v)}};(0,C._)([(0,M.Cb)({readOnly:!0,dependsOn:[]})],Fn.prototype,"allLayers",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Fn.prototype,"allTables",void 0),(0,C._)([(0,M.Cb)({type:Dl.default})],Fn.prototype,"basemap",void 0),(0,C._)([(0,Y.p)("basemap")],Fn.prototype,"castBasemap",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Fn.prototype,"editableLayers",void 0),(0,C._)([(0,M.Cb)({type:ga,nonNullable:!0})],Fn.prototype,"ground",void 0),(0,C._)([(0,Y.p)("ground")],Fn.prototype,"castGround",null),Fn=(0,C._)([(0,ee.j)("esri.Map")],Fn);const gc=Fn;var so=p(97478),vc=p(54024),Rl=p(60330),jl=p(28705),Ul=p(79334),Ri=p(65234);const Lh=X.Z.getLogger("esri.support.AnalysesCollection");let va=class extends jl.a{constructor(v){super(v),this.handles.add(this.on("before-add",E=>{(0,V.Wi)(E.item)||E.item.parent===this.owner&&(Lh.warn("Analysis inside the collection must be unique. Not adding this element again."),E.preventDefault())}))}_own(v){v.parent=this.owner}_release(v){v.parent=null}};va=(0,C._)([(0,ee.j)("esri.support.AnalysesCollection")],va);var Ec=p(51815);let pi=class extends be.Z{constructor(v){super(v),this.view=null,this.baseLayerViews=new D.Z,this.referenceLayerViews=new D.Z,this._loadingHandle=(0,xe.S1)(this,"view.map.basemap",E=>{E&&E.load().catch(()=>{})})}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var v,E;if(this.view&&this.view.suspended)return!1;const P=null==(v=this.view)||null==(E=v.map)?void 0:E.basemap;return!!P&&!!P.loaded&&(this.baseLayerViews.some(F=>F.updating)||this.referenceLayerViews.some(F=>F.updating))}};(0,C._)([(0,M.Cb)({constructOnly:!0})],pi.prototype,"view",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],pi.prototype,"baseLayerViews",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],pi.prototype,"referenceLayerViews",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],pi.prototype,"suspended",null),(0,C._)([(0,M.Cb)({type:Boolean,readOnly:!0})],pi.prototype,"updating",null),pi=(0,C._)([(0,ee.j)("esri.views.BasemapView")],pi);var Ea=p(88159);const Rh=X.Z.getLogger("esri.views.LayerViewManager");class jh{constructor(E,P,F){this.layer=E,this.view=P,this.layerViewImporter=F,this._controller=new AbortController,this._deferred=(0,w.dD)(),this._started=!1,this.done=!1,(0,w.fu)(this._controller.signal,()=>{const ne=new W.Z("cancelled:layerview-create","layerview creation cancelled",{layer:E});this._deferred.reject(ne)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:E}=this;if(!E)return;const{layer:P,view:F}=this;P.emit("layerview-destroy",{view:F,layerView:E}),F.emit("layerview-destroy",{layer:P,layerView:E}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}start(){var E=this;return(0,j.Z)(function*(){if(E._started)return;E._started=!0;const{_controller:{signal:P},layer:F,view:ne}=E;E._map=ne.map;try{var _e,Se;let je,Ye;if(yield F.load({signal:P}),"prefetchResources"in F&&(yield F.prefetchResources({signal:P})),F.createLayerView)je=yield F.createLayerView(ne,{signal:P});else{if(!E.layerViewImporter.hasLayerViewModule(F))throw new W.Z("layer:view-not-supported","No layerview implementation was found");const Pt=yield E.layerViewImporter.importLayerView(F);(0,w.k_)(P),je="default"in Pt?new Pt.default({layer:F,view:ne}):new Pt({layer:F,view:ne})}const yt=()=>{Ye=(0,V.hw)(Ye),je.destroyed||je.destroy(),je.layer=null,je.parent=null,je.view=null,E.done=!0};Ye=(0,w.fu)(P,yt),(0,w.k_)(P);try{yield je.when()}catch(Pt){throw yt(),Pt}if(!(null==(_e=E._map)||null==(Se=_e.allLayers)?void 0:Se.includes(F)))return yt(),void E._deferred.reject(new W.Z("view:no-layerview-for-layer","The layer has been removed from the map",{layer:F}));E.layerView=je,F.emit("layerview-create",{view:ne,layerView:je}),ne.emit("layerview-create",{layer:F,layerView:je}),E.done=!0,E._deferred.resolve(je)}catch(je){F.emit("layerview-create-error",{view:ne,error:je}),ne.emit("layerview-create-error",{layer:F,error:je}),E.done=!0,E._deferred.reject(new W.Z("layerview:create-error","layerview creation failed",{layer:F,error:je}))}})()}}let Tn=class extends er.r{constructor(v){super(v),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new Ue.t,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var E;const P=null==(E=this.view.map)?void 0:E.allLayers;if(P)for(const F of P)this.layerViewImporter.hasLayerViewModule(F)&&this.layerViewImporter.importLayerView(F)},this._reschedule=()=>((0,V.Wi)(this._workPromise)&&(this._workPromise=(0,w.dD)()),this.handles.remove("reschedule"),this.handles.add((0,fe.Os)(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var E,P,F;const ne=this.view.map;if(this._map!==ne&&(this.clear(),this._map=ne),(0,V.Wi)(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const _e=new I.Z({getCollections:()=>this._rootCollectionNames.map(Ye=>this.get(Ye)),getChildrenFunction:Ye=>Ye&&"layers"in Ye?Ye.layers:null});if(!_e)return this._workPromise.resolve(),void(this._workPromise=null);for(const Ye of _e)this._createLayerView(Ye);this._refreshCollections();for(const[Ye,yt]of this._layerLayerViewInfoMap)_e.includes(Ye)||(this._layerLayerViewInfoMap.delete(yt.layer),yt.destroy());const Se=_e.filter(Ye=>"group"===Ye.type).map(Ye=>Ye.layers),je=[null==ne||null==(E=ne.ground)?void 0:E.layers,null==ne||null==(P=ne.basemap)?void 0:P.baseLayers,null==ne||null==(F=ne.basemap)?void 0:F.referenceLayers,null==ne?void 0:ne.layers,...Se].filter(Ye=>!!Ye);this.handles.add(je.map(Ye=>this._watchUpdatingTracking.addOnCollectionChange(()=>Ye,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([(0,T.on)(()=>{var v,E;return null==(v=this.view)||null==(E=v.map)?void 0:E.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),(0,T.YP)(()=>{const v=this.view,E=null==v?void 0:v.map;return[null==E?void 0:E.basemap,null==E?void 0:E.ground,null==E?void 0:E.layers,null==v?void 0:v.ready]},()=>this._reschedule(),T.tX)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const v=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&v.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(v)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return(0,V.pC)(this._workPromise)||this._watchUpdatingTracking.updating||(0,Ea.oE)(this._layerLayerViewInfoMap,v=>!v.done)}get updatingRemaining(){let v=0;for(const E of this._layerLayerViewInfoMap.values())E.done||++v;return v}clear(){if(!this.destroyed){for(const v of this._layerLayerViewInfoMap.values())v.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}whenLayerView(v){var E=this;return(0,j.Z)(function*(){if(yield E._reschedule(),!E._layerLayerViewInfoMap.has(v))throw new W.Z("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:v});return E._layerLayerViewInfoMap.get(v).promise})()}_refreshCollections(){for(const[v,E]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(v),this.get(E),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(v,E,P){if(!v||!E)return void(E&&E.removeAll());let F=0;for(const ne of v){const _e=this._layerLayerViewInfoMap.get(ne);if(!_e||!_e.layerView)continue;const Se=_e.layerView;Se.layer=ne,Se.parent=P,E.getItemAt(F)!==Se&&E.splice(F,0,Se),ne.layers&&this._populateLayerViewsOwners(ne.layers,Se.layerViews,Se),F+=1}F<E.length&&E.splice(F,E.length)}_createLayerView(v){if(this._layerLayerViewInfoMap.has(v))return this.view.ready&&this._layerLayerViewInfoMap.get(v).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");v.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(v)&&this.layerViewImporter.importLayerView(v);const E=new jh(v,this.view,this.layerViewImporter);E.promise.then(()=>this._refreshCollections(),P=>{var F,ne;P&&((0,w.D_)(P)||"cancelled:layerview-create"===P.name)||Rh.error(`Failed to create layerview for layer title:'${null!=(F=v.title)?F:"no title"}', id:'${null!=(ne=v.id)?ne:"no id"}' of type '${v.type}'.`,{layer:v,error:P}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(v,E),this.view.ready&&E.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};(0,C._)([(0,M.Cb)()],Tn.prototype,"_workPromise",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Tn.prototype,"_watchUpdatingTracking",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Tn.prototype,"_layersToLayerViews",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Tn.prototype,"_rootCollectionNames",null),(0,C._)([(0,M.Cb)()],Tn.prototype,"layerViewImporter",void 0),(0,C._)([(0,M.Cb)()],Tn.prototype,"supportsGround",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Tn.prototype,"updating",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Tn.prototype,"updatingRemaining",null),(0,C._)([(0,M.Cb)({constructOnly:!0})],Tn.prototype,"view",void 0),Tn=(0,C._)([(0,ee.j)("esri.views.LayerViewManager")],Tn);const Uh=Tn;let Cn=class extends be.Z{constructor(v){super(v),this.factor=1.5,this.offset=(0,O.vW)(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};(0,C._)([(0,M.Cb)({type:Number})],Cn.prototype,"factor",void 0),(0,C._)([(0,M.Cb)({nonNullable:!0})],Cn.prototype,"offset",void 0),(0,C._)([(0,M.Cb)()],Cn.prototype,"position",void 0),(0,C._)([(0,M.Cb)({type:Number,range:{min:0}})],Cn.prototype,"size",void 0),(0,C._)([(0,M.Cb)()],Cn.prototype,"maskUrl",void 0),(0,C._)([(0,M.Cb)()],Cn.prototype,"maskEnabled",void 0),(0,C._)([(0,M.Cb)()],Cn.prototype,"overlayUrl",void 0),(0,C._)([(0,M.Cb)()],Cn.prototype,"overlayEnabled",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Cn.prototype,"version",null),(0,C._)([(0,M.Cb)({type:Boolean})],Cn.prototype,"visible",void 0),Cn=(0,C._)([(0,ee.j)("esri.views.Magnifier")],Cn);const bc=Cn;var Mc=p(74447);let No=class extends be.Z{constructor(v,E){var P;super({}),this._stage=v,this._textureRequests=new Map,this._frameTask=null!=(P=null==E?void 0:E.registerTask(Mc.T8.TEXTURE_UNLOAD))?P:Mc.sq}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(v=>this._releaseTextureRequest(v)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(v,E,P){const F=this.makeUid(v);let ne=this._textureRequests.get(F);return ne||(ne={referenceCount:0,texture:E(),textureAsync:null,abortController:null,onRemove:P},this._stage&&(this._stage.add(ne.texture),this._stage.loadImmediate(ne.texture)),this._textureRequests.set(F,ne)),ne.referenceCount++,{uid:F,texture:ne.texture,release:()=>this._release(F)}}_release(v){const E=this._textureRequests.get(v);E?(E.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+v),E.referenceCount--,E.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(v))):console.warn(`TextureCollection: texture doesn't exist: '${v}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(v){if(!this._textureRequests)return;const E=this._textureRequests.get(v);!E||E.referenceCount>0||(this._releaseTextureRequest(E),this._textureRequests.delete(v))}_releaseTextureRequest(v){var E;v.onRemove&&v.onRemove(),v.texture?null==(E=this._stage)||E.remove(v.texture):v.abortController&&(v.abortController.abort(),v.abortController=null)}makeUid(v,E=null){return(0,V.pC)(E)?`${v}.${E}px`:v}};(0,C._)([(0,M.Cb)()],No.prototype,"_frameTask",void 0),(0,C._)([(0,M.Cb)()],No.prototype,"updating",null),No=(0,C._)([(0,ee.j)("esri.views.3d.support.TextureCollection")],No);var Cc,v,sn=p(35216);(v=Cc||(Cc={}))[v.Left=0]="Left",v[v.Middle=1]="Middle",v[v.Right=2]="Right";const Oc=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Pc={};function Sc(v){return!!Pc[v]}Oc.forEach(v=>{Pc[v]=!0});class Fh{constructor(E){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=E,this.inputManager=null}connect(E){E&&this.disconnect(),this.inputManager=E,this.handlers.forEach(({handler:P,priority:F},ne)=>this.inputManager.installHandlers(ne,[P],F))}disconnect(){this.inputManager&&this.handlers.forEach((E,P)=>this.inputManager.uninstallHandlers(P)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(E,P,F,ne){const _e=Array.isArray(E)?E:E.split(",");if(!function Bh(v){for(const E of v)if(!Sc(E))return!1;return!0}(_e))return _e.some(Sc)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let Se,je;Array.isArray(P)?je=P:(Se=P,je=[]),"function"==typeof F?Se=F:ne=F,ne=null!=ne?ne:Pn.f.DEFAULT;const Ye=this._createUniqueGroupName(),yt=new Wh(this.view,_e,je,Se);this.handlers.set(Ye,{handler:yt,priority:ne});for(const Pt of _e){const jt=this.handlerCounts.get(Pt)||0;this.handlerCounts.set(Pt,jt+1)}return this.inputManager&&this.inputManager.installHandlers(Ye,[yt],ne),{remove:()=>this._removeHandler(Ye,_e)}}hasHandler(E){return!!this.handlerCounts.get(E)}_removeHandler(E,P){if(this.handlers.has(E)){this.handlers.delete(E);for(const F of P){const ne=this.handlerCounts.get(F);void 0===ne?console.error("Trying to remove handler for event that has no handlers registered: ",F):1===ne?this.handlerCounts.delete(F):this.handlerCounts.set(F,ne-1)}}this.inputManager&&this.inputManager.uninstallHandlers(E)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class Wh extends sn.a{constructor(E,P,F,ne){super(!0),this.view=E;for(const _e of P)switch(_e){case"click":this.registerIncoming("click",F,Se=>ne(this._wrapClick(Se)));break;case"double-click":this.registerIncoming("double-click",F,Se=>ne(this._wrapDoubleClick(Se)));break;case"immediate-click":this.registerIncoming("immediate-click",F,Se=>ne(this._wrapImmediateClick(Se)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",F,Se=>ne(this._wrapImmediateDoubleClick(Se)));break;case"hold":this.registerIncoming("hold",F,Se=>ne(this._wrapHold(Se)));break;case"drag":this.registerIncoming("drag",F,Se=>{const je=this._wrapDrag(Se);je&&ne(je)});break;case"key-down":this.registerIncoming("key-down",F,Se=>ne(this._wrapKeyDown(Se)));break;case"key-up":this.registerIncoming("key-up",F,Se=>ne(this._wrapKeyUp(Se)));break;case"pointer-down":this.registerIncoming("pointer-down",F,Se=>ne(this._wrapPointer(Se,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",F,Se=>ne(this._wrapPointer(Se,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",F,Se=>ne(this._wrapPointer(Se,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",F,Se=>ne(this._wrapPointerDrag(Se)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",F,Se=>ne(this._wrapMouseWheel(Se)));break;case"pointer-enter":this.registerIncoming("pointer-enter",F,Se=>ne(this._wrapPointer(Se,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",F,Se=>ne(this._wrapPointer(Se,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",F,Se=>{ne(this._wrapGamepad(Se))});break;case"focus":this.registerIncoming("focus",F,Se=>{ne(this._wrapFocus(Se))});break;case"blur":this.registerIncoming("blur",F,Se=>{ne(this._wrapBlur(Se))})}}_wrapFocus(E){return{type:"focus",timestamp:E.timestamp,native:E.data.native,cancelable:E.cancelable,stopPropagation:()=>E.stopPropagation(),async:P=>E.async(P),preventDefault:()=>E.preventDefault()}}_wrapBlur(E){return{type:"blur",timestamp:E.timestamp,native:E.data.native,cancelable:E.cancelable,stopPropagation:()=>E.stopPropagation(),async:P=>E.async(P),preventDefault:()=>E.preventDefault()}}_wrapClick(E){const{pointerType:P,button:F,buttons:ne,x:_e,y:Se,native:je,eventId:Ye}=E.data,{cancelable:yt,timestamp:Pt}=E;return{type:"click",pointerType:P,button:F,buttons:ne,x:_e,y:Se,native:je,timestamp:Pt,screenPoint:(0,O.vW)(_e,Se),mapPoint:this._getMapPoint(_e,Se),eventId:Ye,cancelable:yt,stopPropagation:()=>E.stopPropagation(),async:jt=>E.async(jt),preventDefault:()=>E.preventDefault()}}_wrapDoubleClick(E){const{pointerType:P,button:F,buttons:ne,x:_e,y:Se,native:je,eventId:Ye}=E.data,{cancelable:yt,timestamp:Pt}=E;return{type:"double-click",pointerType:P,button:F,buttons:ne,x:_e,y:Se,native:je,timestamp:Pt,mapPoint:this._getMapPoint(_e,Se),eventId:Ye,cancelable:yt,stopPropagation:()=>E.stopPropagation(),async:jt=>E.async(jt),preventDefault:()=>E.preventDefault()}}_wrapImmediateClick(E){const{pointerType:P,button:F,buttons:ne,x:_e,y:Se,native:je,eventId:Ye}=E.data,yt=je.pointerId,{cancelable:Pt,timestamp:jt}=E;return{type:"immediate-click",pointerId:yt,pointerType:P,button:F,buttons:ne,x:_e,y:Se,native:je,timestamp:jt,mapPoint:this._getMapPoint(_e,Se),eventId:Ye,cancelable:Pt,stopPropagation:()=>E.stopPropagation(),async:tr=>E.async(tr),preventDefault:()=>E.preventDefault()}}_wrapImmediateDoubleClick(E){const{pointerType:P,button:F,buttons:ne,x:_e,y:Se,native:je,eventId:Ye}=E.data,yt=je.pointerId,{cancelable:Pt,timestamp:jt}=E;return{type:"immediate-double-click",pointerId:yt,pointerType:P,button:F,buttons:ne,x:_e,y:Se,native:je,timestamp:jt,mapPoint:this._getMapPoint(_e,Se),eventId:Ye,cancelable:Pt,stopPropagation:()=>E.stopPropagation(),async:tr=>E.async(tr),preventDefault:()=>E.preventDefault()}}_wrapHold(E){const{pointerType:P,button:F,buttons:ne,x:_e,y:Se,native:je}=E.data,{cancelable:Ye,timestamp:yt}=E;return{type:"hold",pointerType:P,button:F,buttons:ne,x:_e,y:Se,native:je,timestamp:yt,mapPoint:this._getMapPoint(_e,Se),cancelable:Ye,stopPropagation:()=>E.stopPropagation(),async:Pt=>E.async(Pt),preventDefault:()=>E.preventDefault()}}_getMapPoint(E,P){return this.view.toMap((0,O.vW)(E,P),{exclude:[]})}_wrapDrag(E){const P=E.data,{x:F,y:ne}=P.center,{action:_e,pointerType:Se,button:je}=P;if("start"===_e&&(this.latestDragStart=P),!this.latestDragStart)return;const Ye=P.pointer.native,yt=P.buttons,{cancelable:Pt,timestamp:jt}=E,tr={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return"end"===_e&&(this.latestDragStart=void 0),{type:"drag",action:_e,x:F,y:ne,origin:tr,pointerType:Se,button:je,buttons:yt,radius:P.radius,angle:(0,$e.BV)(P.angle),native:Ye,timestamp:jt,cancelable:Pt,stopPropagation:()=>E.stopPropagation(),async:rr=>E.async(rr),preventDefault:()=>E.preventDefault()}}_wrapKeyDown(E){const{key:P,repeat:F,native:ne}=E.data,{cancelable:_e,timestamp:Se}=E;return{type:"key-down",key:P,repeat:F,native:ne,timestamp:Se,cancelable:_e,stopPropagation:()=>E.stopPropagation(),async:je=>E.async(je),preventDefault:()=>E.preventDefault()}}_wrapKeyUp(E){const{key:P,native:F}=E.data,{cancelable:ne,timestamp:_e}=E;return{type:"key-up",key:P,native:F,timestamp:_e,cancelable:ne,stopPropagation:()=>E.stopPropagation(),async:Se=>E.async(Se),preventDefault:()=>E.preventDefault()}}_wrapPointer(E,P){const{x:F,y:ne,button:_e,buttons:Se,native:je,eventId:Ye}=E.data,yt=je.pointerId,Pt=je.pointerType,{cancelable:jt,timestamp:tr}=E;return{type:P,x:F,y:ne,pointerId:yt,pointerType:Pt,button:_e,buttons:Se,native:je,timestamp:tr,eventId:Ye,cancelable:jt,stopPropagation:()=>E.stopPropagation(),async:rr=>E.async(rr),preventDefault:()=>E.preventDefault()}}_wrapPointerDrag(E){const{x:P,y:F,buttons:ne,native:_e,eventId:Se}=E.data.currentEvent,{button:je}=E.data.startEvent,Ye=E.data.startEvent.native.pointerId,yt=E.data.startEvent.native.pointerType,Pt=E.data.action,jt={x:E.data.startEvent.x,y:E.data.startEvent.y},{cancelable:tr,timestamp:rr}=E;return{type:"pointer-drag",x:P,y:F,pointerId:Ye,pointerType:yt,button:je,buttons:ne,action:Pt,origin:jt,native:_e,timestamp:rr,eventId:Se,cancelable:tr,stopPropagation:()=>E.stopPropagation(),async:wr=>E.async(wr),preventDefault:()=>E.preventDefault()}}_wrapMouseWheel(E){const{cancelable:P,data:F,timestamp:ne}=E,{x:_e,y:Se,deltaY:je,native:Ye}=F;return{type:"mouse-wheel",x:_e,y:Se,deltaY:je,native:Ye,timestamp:ne,cancelable:P,stopPropagation:()=>E.stopPropagation(),async:yt=>E.async(yt),preventDefault:()=>E.preventDefault()}}_wrapGamepad(E){const{action:P,state:F,device:ne}=E.data,{cancelable:_e,timestamp:Se}=E,{buttons:je,axes:Ye}=F;return{type:"gamepad",device:ne,timestamp:Se,action:P,buttons:je,axes:Ye,cancelable:_e,stopPropagation:()=>E.stopPropagation(),async:yt=>E.async(yt),preventDefault:()=>E.preventDefault()}}}var Zo,Tc,Dc;(function(v){v[v.USER=0]="USER",v[v.MANAGER=1]="MANAGER"})(Zo||(Zo={})),function(v){v[v.None=0]="None",v[v.Unfocused=1]="Unfocused",v[v.Focused=2]="Focused",v[v.Unselected=4]="Unselected",v[v.Selected=8]="Selected",v[v.All=15]="All"}(Tc||(Tc={})),function(v){v[v.None=0]="None",v[v.Custom1=16]="Custom1",v[v.Custom2=32]="Custom2",v[v.Custom3=64]="Custom3",v[v.Custom4=128]="Custom4",v[v.Custom5=256]="Custom5",v[v.Custom6=512]="Custom6",v[v.Custom7=1024]="Custom7",v[v.Custom8=2048]="Custom8",v[v.Custom9=4096]="Custom9",v[v.Custom10=8192]="Custom10",v[v.Custom11=16384]="Custom11",v[v.Custom12=32768]="Custom12",v[v.All=65520]="All"}(Dc||(Dc={}));const Nh=X.Z.getLogger("esri.views.interactive.interactiveToolUtils");function Zh(v){return[v.on("before-add",E=>{const P=E.item;if(null==P||v.includes(P))return Nh.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void E.preventDefault()}),v.on("after-remove",E=>{const P=E.item;P.visible=!1,P.active&&(P.view.activeTool=null),P.destroy()})]}function ba(v){return v.visible&&v.getEditableFlag(Zo.USER)&&v.getEditableFlag(Zo.MANAGER)}function Wn(v){return(0,O.vW)(v.x,v.y)}function Ic(v,E){const P=(v instanceof HTMLElement?v:v.surface).getBoundingClientRect();return(0,O.vW)(E.clientX-P.left,E.clientY-P.top)}function wc(v,E){return E instanceof Event?Ic(v,E):Wn(E)}function xc(v){if(v instanceof Event)return!0;if("object"==typeof v&&"type"in v)switch(v.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class Kh{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(E,P){const F=()=>E.stopPropagation();switch(E.type){case"pointer-move":Ac(E.pointerType)&&this._pointerLocations.set(E.pointerId,{x:E.x,y:E.y,pointerType:E.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(F(),"end"===E.action&&(this._stopDrag=!1));break;case"pointer-down":{if(!Lc(E))break;const ne=Wn(E),_e=this._intersect(ne,E.pointerType,P.forEachTool);if((0,V.Wi)(_e))break;const Se=this._findToolAndManipulatorByKey(_e,P.forEachTool,Ma),je=(0,V.yw)(Se,yt=>yt.manipulator),Ye=(0,V.yw)(Se,yt=>yt.tool);!((0,V.pC)(je)&&(0,V.pC)(Ye)&&je.interactive)||je.grabbable&&je.grabbableForEvent(E)||!je.grabbing||je.dragging||this._ungrabManipulatorBeforeDragging(je,Ye,E),(0,V.pC)(je)&&je.interactive&&je.grabbable&&je.grabbableForEvent(E)&&!je.grabbing&&(this._grabbedManipulators.set(E.pointerId,{key:_e,start:ne,pointerType:E.pointerType}),1===this._grabbedManipulators.size&&P.activeTool!==_e.tool&&(this._currentlyActiveTool=P.activeTool,this._revertToActiveTool=!0,P.setActiveTool(_e.tool)),je.grabbing=!0,je.events.emit("grab-changed",{action:"start",pointerType:E.pointerType,screenPoint:ne}),F());break}case"pointer-up":this._handlePointerEnd(E,P);break;case"pointer-drag":{if(!Lc(E))break;const ne=this._grabbedManipulators.get(E.pointerId),_e=this._draggedManipulators.get(E.pointerId),Se=(0,V.yw)(ne||_e,({key:Pt})=>Pt),je=this._findManipulatorByKey(Se,P.forEachTool);if((0,V.Wi)(je))break;const Ye=Wn(E);Ye.x=(0,$e.uZ)(Ye.x,0,P.view.width),Ye.y=(0,$e.uZ)(Ye.y,0,P.view.height);const yt=(0,V.Wg)(ne||_e).start;switch(E.action){case"start":case"update":"update"!==E.action&&1!==this._grabbedManipulators.size||(je.dragging=!0,je.events.emit("drag",_e?{action:"update",start:yt,screenPoint:Ye}:{action:"start",start:yt,screenPoint:Ye,pointerType:E.pointerType}),this._draggedManipulators.set(E.pointerId,{key:(0,V.Wg)(Se),start:yt}));break;case"end":je.dragging=!1,_e&&je.events.emit("drag",{action:"end",start:yt,screenPoint:Ye}),this._draggedManipulators.delete(E.pointerId),this._handlePointerEnd(E,P)}F();break}case"immediate-click":{const ne=Wn(E),_e=this._intersect(ne,E.pointerType,P.forEachTool),Se=this._findToolAndManipulatorByKey(_e,P.forEachTool,Ma);if(function Vh(v){return!!v.native.shiftKey}(E)||P.forEachTool(Pt=>{if((!(0,V.pC)(Se)||Se.tool!==Pt||Pt.automaticManipulatorSelection)&&Pt.manipulators){let jt=!1;Pt.manipulators.forEach(({manipulator:tr})=>{tr.selected&&(tr.selected=!1,jt=!0)}),jt&&Pt.manipulatorSelectionChanged&&Pt.manipulatorSelectionChanged()}}),(0,V.Wi)(Se))break;const{manipulator:je,tool:Ye}=Se;if(!je.interactive)break;je.selectable&&Ye.automaticManipulatorSelection&&(je.selected=!je.selected,Ye.manipulatorSelectionChanged&&Ye.manipulatorSelectionChanged()),je.events.emit("immediate-click",{screenPoint:ne,button:E.button,pointerType:E.pointerType,shiftKey:E.native.shiftKey,stopPropagation:F});break}case"click":{const ne=Wn(E),_e=this._intersect(ne,E.pointerType,P.forEachTool),Se=this._findManipulatorByKey(_e,P.forEachTool);if((0,V.Wi)(Se)||!Se.interactive)break;Se.events.emit(E.type,{screenPoint:ne,button:E.button,pointerType:E.pointerType,shiftKey:E.native.shiftKey}),F();break}case"double-click":{const ne=Wn(E),_e=this._intersect(ne,E.pointerType,P.forEachTool),Se=this._findManipulatorByKey(_e,P.forEachTool);if((0,V.Wi)(Se)||!Se.interactive)break;Se.events.emit("double-click",{screenPoint:ne,button:E.button,pointerType:E.pointerType,shiftKey:E.native.shiftKey,stopPropagation:F});break}case"immediate-double-click":{const ne=Wn(E),_e=this._intersect(ne,E.pointerType,P.forEachTool),Se=this._findManipulatorByKey(_e,P.forEachTool);if((0,V.Wi)(Se)||!Se.interactive)break;Se.events.emit("immediate-double-click",{screenPoint:ne,button:E.button,pointerType:E.pointerType,shiftKey:E.native.shiftKey,stopPropagation:F});break}}this._updateCursor(P.forEachTool)}_ungrabManipulatorBeforeDragging(E,P,F){E.grabbing=!1,E.events.emit("grab-changed",{action:"end",pointerType:F.pointerType,screenPoint:Wn(F)}),this._grabbedManipulators.forEach(({key:ne},_e)=>{ne.tool===P&&P.manipulators.findById(ne.manipulatorId)===E&&this._grabbedManipulators.delete(_e)})}_handlePointerEnd(E,P){const F=(0,V.yw)(this._grabbedManipulators.get(E.pointerId),({key:_e})=>_e),ne=this._findManipulatorByKey(F,P.forEachTool);(0,V.pC)(ne)&&!ne.dragging&&(1===this._grabbedManipulators.size&&0===this._draggedManipulators.size&&this._revertToActiveTool&&(P.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),ne.grabbing&&(ne.grabbing=!1,ne.events.emit("grab-changed",{action:"end",pointerType:E.pointerType,screenPoint:Wn(E)})),this._grabbedManipulators.delete(E.pointerId))}_cursorFromMap(E,P){let F=null;return(0,Ea.oE)(E,({key:ne})=>{const _e=this._findManipulatorByKey(ne,P);return!!((0,V.pC)(_e)&&_e.interactive&&"cursor"in _e&&_e.cursor)&&(F=_e.cursor,!0)}),F}_updateCursor(E){this._cursor=this._grabbedManipulators.size>0?this._cursorFromMap(this._grabbedManipulators,E)||"grabbing":this._hoveredManipulators.size>0?this._cursorFromMap(this._hoveredManipulators,E)||"pointer":null}clearPointers(E,P,F=!0,ne){const _e=Se=>Se.tool===E&&((0,V.Wi)(ne)||Se.manipulatorId===ne);this._grabbedManipulators.forEach(({key:Se,pointerType:je},Ye)=>{if(_e(Se)){this._grabbedManipulators.delete(Ye);const yt=this._findManipulatorByKey(Se,P);(0,V.pC)(yt)&&(yt.grabbing=!1,yt.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:je}))}}),this._draggedManipulators.forEach(({key:Se},je)=>{if(_e(Se)){this._draggedManipulators.delete(je);const Ye=this._findManipulatorByKey(Se,P);(0,V.pC)(Ye)&&(Ye.dragging=!1,Ye.events.emit("drag",{action:"cancel"}))}}),F&&this._hoveredManipulators.forEach(({key:Se},je)=>{if(_e(Se)){this._hoveredManipulators.delete(je);const Ye=this._findManipulatorByKey(Se,P);(0,V.pC)(Ye)&&(Ye.hovering=!1)}}),this._updateCursor(P)}_intersect(E,P,F){let ne=null;return F(_e=>{if(null==_e.manipulators||!ba(_e))return!1;const Se=_e.manipulators.intersect(E,P);return!(0,V.Wi)(Se)&&(ne={manipulatorId:Se.id,tool:_e},!0)}),ne}updateHoveredStateFromKnownPointers(E){this._pointerLocations.forEach((P,F)=>{this._updateHoveredStateForPointerAtScreenPosition((0,O.vW)(P.x,P.y),F,P.pointerType,E)})}handleHoverEvent(E,P){"pointer-up"!==E.type&&"immediate-click"!==E.type&&"pointer-move"!==E.type||!Ac(E.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Wn(E),E.pointerId,E.pointerType,P)}_updateHoveredStateForPointerAtScreenPosition(E,P,F,ne){const _e=this._intersect(E,F,ne);let Se=this._findManipulatorByKey(_e,ne);const je=(0,V.yw)(this._hoveredManipulators.get(P),({key:yt})=>yt),Ye=this._findManipulatorByKey(je,ne);(0,V.pC)(Se)&&!Se.interactive&&(Se=null),Ye!==Se&&((0,V.pC)(Ye)&&(Ye.hovering=!1),(0,V.pC)(Se)?(Se.hovering=!0,this._hoveredManipulators.set(P,{key:(0,V.Wg)(_e)})):this._hoveredManipulators.delete(P),this._updateCursor(ne))}_findManipulatorByKey(E,P){return this._findToolAndManipulatorByKey(E,P,Ma)?Ma.manipulator:null}_findToolAndManipulatorByKey(E,P,F){return(0,V.Wi)(E)?null:(F.tool=null,F.manipulator=null,P(ne=>{if(ne!==E.tool||null==ne.manipulators||!ba(ne))return!1;const _e=ne.manipulators.findById(E.manipulatorId);return!!(0,V.pC)(_e)&&(F.manipulator=_e,F.tool=ne,!0)}),F.manipulator?F:null)}}function Ac(v){return"mouse"===v}function Lc(v){return"mouse"!==v.pointerType||0===v.button}const Ma={manipulator:null,tool:null},Rc=X.Z.getLogger("esri.views.ToolViewManager"),jc="attached",Bl="tools";let Qn=class extends er.r{constructor(v){super(v),this._manipulatorState=new Kh,this.tools=new D.Z,this.cursor=null,this._forEachTool=E=>{for(const P of this.tools.items)if(E(P))return}}initialize(){this.handles.add([this.view.on(Oc,v=>{this._handleInputEvent(v)},Pn.f.TOOL),...Zh(this.tools),this.tools.on("before-remove",({item:v})=>{this._manipulatorState.clearPointers(v,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(v){if((0,V.pC)(v)&&!this.view.ready)return void Rc.error("Cannot set active tool while view is not ready.");if(v===this.activeTool)return void((0,V.pC)(v)&&Rc.warn("Tool is already active - ignoring activation request."));const E=this.activeTool;this._set("activeTool",v),(0,V.pC)(E)&&E.deactivate(),(0,V.pC)(v)&&v.activate(),this._removeIncompleteTools(v);const P=(0,V.Wi)(this.activeTool);for(const F of this.tools){F.setEditableFlag(Zo.MANAGER,P||F===this.activeTool);const ne=ba(F);!P&&ne||this._manipulatorState.clearPointers(F,this._forEachTool,!ne)}this._updateCursor()}get updating(){var v,E;return this.updatingHandles.updating||this.tools.some(P=>P.updating)||null!=(v=null==(E=this.textures)?void 0:E.updating)&&v}attach(){"3d"===this.view.type?(this._set("textures",new No(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([this.view.state.watch("camera",()=>{this._forEachManipulator(v=>{null!=v.onViewChange&&v.onViewChange()})}),this.view.elevationProvider.on("elevation-change",v=>{this._forEachManipulator(E=>{null!=E.onElevationChange&&E.onElevationChange(v)})}),(0,vc.kB)(()=>this._set("textures",(0,V.SC)(this.textures)))],jc)):this.handles.add(this.view.watch("extent",()=>{this._forEachManipulator(v=>{null!=v.onViewChange&&v.onViewChange()})}))}detach(){(0,V.pC)(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(jc)}_forEachManipulator(v){this._forEachTool(E=>{E.manipulators&&E.manipulators.forEach(({manipulator:P})=>v(P,E))})}_handleInputEvent(v){let E=!1;const P=Sr(_t({},v),{stopPropagation:()=>{E=!0,v.stopPropagation()}});(0,V.pC)(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(P):this._forEachTool(F=>{!E&&F.visible&&F.handleInputEvent(P)}),!E&&"key-down"===v.type&&"Escape"===v.key&&this.activeTool&&(v.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(P,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:F=>{this.activeTool=F},view:this.view}),!E&&(0,V.pC)(this.activeTool)&&this.activeTool.handleInputEventAfter(P),this._manipulatorState.handleHoverEvent(P,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(Bl),this._forEachTool(v=>{if(v instanceof be.Z){const E=(0,xe.YP)(v,["cursor","visible","editable"],()=>{ba(v)||this._manipulatorState.clearPointers(v,this._forEachTool),this._updateCursor()});this.handles.add(E,Bl)}v.manipulators&&this.handles.add(v.manipulators.on("change",E=>{E.removed.forEach(({id:P})=>{this._manipulatorState.clearPointers(v,this._forEachTool,!0,P)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),Bl)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){let v=this._manipulatorState.cursor;this._forEachTool(E=>!(!(0,V.pC)(E.cursor)||!E.visible||(v=E.cursor,0))),this._get("cursor")!==v&&this._set("cursor",v)}_removeIncompleteTools(v){this.tools.filter(E=>((0,V.Wi)(v)||E!==v)&&!E.created).forEach(E=>{this.tools.remove(E)})}};(0,C._)([(0,M.Cb)({constructOnly:!0,nonNullable:!0})],Qn.prototype,"view",void 0),(0,C._)([(0,M.Cb)({readOnly:!0,nonNullable:!0})],Qn.prototype,"textures",void 0),(0,C._)([(0,M.Cb)({value:null})],Qn.prototype,"activeTool",null),(0,C._)([(0,M.Cb)({readOnly:!0,type:D.Z})],Qn.prototype,"tools",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Qn.prototype,"cursor",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Qn.prototype,"updating",null),Qn=(0,C._)([(0,ee.j)("esri.views.ToolViewManager")],Qn);const $h=Qn;let no=class extends be.Z{constructor(v){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",this._detectedDeviceType="standard"===v.mapping?"standard":zh.test(v.id)?"spacemouse":"unknown",this.nativeIndex=v.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return Gh[this.deviceType]}};(0,C._)([(0,M.Cb)({nonNullable:!0,readOnly:!0})],no.prototype,"nativeIndex",void 0),(0,C._)([(0,M.Cb)({type:String,readOnly:!0})],no.prototype,"deviceType",null),(0,C._)([(0,M.Cb)({type:Number,readOnly:!0})],no.prototype,"axisThreshold",null),no=(0,C._)([(0,ee.j)("esri.views.input.gamepad.GamepadInputDevice")],no);const zh=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),Gh={standard:.15,spacemouse:.025,unknown:0},Fl=no;let Ko=class extends be.Z{constructor(...v){super(...v),this.devices=new D.Z,this.enabledFocusMode="document"}};(0,C._)([(0,M.Cb)({type:D.Z.ofType(Fl),readOnly:!0})],Ko.prototype,"devices",void 0),(0,C._)([(0,M.Cb)({type:["document","view","none"]})],Ko.prototype,"enabledFocusMode",void 0),Ko=(0,C._)([(0,ee.j)("esri.views.input.gamepad.GamepadSettings")],Ko);const Hh=Ko;let Ca=class extends be.Z{constructor(){super(...arguments),this.gamepad=new Hh}};(0,C._)([(0,M.Cb)({readOnly:!0})],Ca.prototype,"gamepad",void 0),Ca=(0,C._)([(0,ee.j)("esri.views.input.Input")],Ca);const kh=Ca;let fi=class extends be.Z{constructor(v){super(v),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};(0,C._)([(0,M.Cb)({type:Boolean,nonNullable:!0})],fi.prototype,"enabled",void 0),(0,C._)([(0,M.Cb)({type:Fl})],fi.prototype,"device",void 0),(0,C._)([(0,M.Cb)({type:["pan","zoom"],nonNullable:!0})],fi.prototype,"mode",void 0),(0,C._)([(0,M.Cb)({type:["forward-down","forward-up"],nonNullable:!0})],fi.prototype,"tiltDirection",void 0),(0,C._)([(0,M.Cb)({type:Number,nonNullable:!0})],fi.prototype,"velocityFactor",void 0),fi=(0,C._)([(0,ee.j)("esri.views.navigation.gamepad.GamepadSettings")],fi);const Uc=fi;let ji=class extends be.Z{constructor(v){super(v),this.browserTouchPanEnabled=!0,this.gamepad=new Uc,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};(0,C._)([(0,M.Cb)({type:Boolean})],ji.prototype,"browserTouchPanEnabled",void 0),(0,C._)([(0,M.Cb)({type:Uc,nonNullable:!0})],ji.prototype,"gamepad",void 0),(0,C._)([(0,M.Cb)({type:Boolean})],ji.prototype,"momentumEnabled",void 0),(0,C._)([(0,M.Cb)({type:Boolean})],ji.prototype,"mouseWheelZoomEnabled",void 0),ji=(0,C._)([(0,ee.j)("esri.views.navigation.Navigation")],ji);const Bc=ji;var _n,Oa=p(38305);function Fc(v){const E=v.url&&(0,Oa.Qc)(v.url);return null==(v.spatialReference&&v.spatialReference.vcsWkid)&&(0,V.pC)(E)&&"ImageServer"===E.serverType||!Wc(v)||!v.heightModelInfo?function Zc(v){return Nc(v)?!!(v.capabilities&&v.capabilities.data&&v.capabilities.data.supportsZ):Kc(v)}(v)?Ul.Z.deriveUnitFromSR(Xh,v.spatialReference):null:v.heightModelInfo}function Wc(v){return"heightModelInfo"in v}function Nc(v){if("unknown"===v.type||!("capabilities"in v))return!1;switch(v.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function Qh(v){return null!=v.layers||Kc(v)||Nc(v)||Wc(v)}function Kc(v){switch(v.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"analysis":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}!function(v){v[v.Ok=0]="Ok",v[v.Units=1]="Units",v[v.HeightModel=2]="HeightModel",v[v.CRS=3]="CRS",v[v.Unsupported=4]="Unsupported"}(_n||(_n={}));const Xh=new Ul.Z({heightModel:"gravity-related-height"});var Pa=p(59617);let Nl,Zl=null;function qh(v){return Kl.apply(this,arguments)}function Kl(){return Kl=(0,j.Z)(function*(v){Zl||(Zl=p.e(5082).then(p.bind(p,35082)).then(E=>Nl=E)),yield Zl,(0,w.k_)(v)}),Kl.apply(this,arguments)}function Vc(v,E,P,F){return Vl.apply(this,arguments)}function Vl(){return Vl=(0,j.Z)(function*(v,E,P,F){if(!v)return null;const ne=v.spatialReference;return(0,ce.kR)()||(0,ce.Up)(ne,E)?(0,ce.iV)(v,E):Nl?Nl.projectGeometry(v,E,P,F):(yield Promise.race([qh(F),(0,ce.zD)(F)]),Vc(v,E,P,F))}),Vl.apply(this,arguments)}const $c=X.Z.getLogger("esri.views.support.DefaultsFromMap");$c.level="info";let fs=class extends be.Z{constructor(v){super(v),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.logDebugInformation=!1,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._debug("Aborting project extent task"),this._projectExtentTask.task=(0,V.IM)(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return(0,V.pC)(this.userSpatialReference)?this.userSpatialReference:(0,V.Wg)(this._spatialReferenceTask.spatialReference)}get extent(){return(0,V.Wg)(this._extentTask.extent)}get heightModelInfo(){return(0,V.Wg)(this._heightModelInfoTask.heightModelInfo)}get vcsWkid(){return(0,V.Wg)(this._heightModelInfoTask.vcsWkid)}get latestVcsWkid(){return(0,V.Wg)(this._heightModelInfoTask.latestVcsWkid)}get viewingMode(){return(0,V.Wi)(this.userSpatialReference)||this.userSpatialReference.equals((0,V.Wg)(this._spatialReferenceTask.spatialReference))?(0,V.Wg)(this._spatialReferenceTask.viewingMode):null}get tileInfo(){return(0,V.Wg)(this._tileInfoTask.tileInfo)}get mapCollections(){var v,E,P,F;const ne=null==(v=this.map)?void 0:v.call(this),_e=[];return(0,V.pC)(this.priorityCollection)&&_e.push(this.priorityCollection),_e.push({parent:null==ne?void 0:ne.basemap,layers:null==ne||null==(E=ne.basemap)?void 0:E.baseLayers},{layers:null==ne?void 0:ne.layers},{parent:null==ne?void 0:ne.ground,layers:null==ne||null==(P=ne.ground)?void 0:P.layers},{parent:null==ne?void 0:ne.basemap,layers:null==ne||null==(F=ne.basemap)?void 0:F.referenceLayers}),_e}get _allLayers(){var v,E;const P=this._collectLayers(this.mapCollections);return this._debug("Collected",null!=(v=null==(E=P.layers)?void 0:E.length)?v:0,"layers, updating",P.updating),P}get _spatialReferenceTask(){var v,E;if(this.suspended)return null!=(E=this._get("_spatialReferenceTask"))?E:{updating:!1};const{layers:P,updating:F}=this._allLayers,ne={candidates:null};for(const Se of P)if(this._processSpatialReferenceCandidates(Se,ne),ne.candidates&&1===ne.candidates.length)break;if(1!==(null==(v=ne.candidates)?void 0:v.length)&&F)return{updating:!0};const _e=this._pickSpatialReferenceCandidate(ne.candidates);return this._debug("Finished spatial reference",(0,V.pC)(_e)?`${_e.spatialReference.wkid}:${(0,V.pC)(_e.viewingMode)?(0,Pa.M7)(_e.viewingMode):"global/local"}`:"none available"),{spatialReference:(0,V.pC)(_e)?_e.spatialReference:null,viewingMode:(0,V.pC)(_e)?_e.viewingMode:null,updating:!1}}get _tileInfoTask(){var v,E,P,F,ne,_e,Se,je;if(!this.required.tileInfo)return null!=(je=this._get("_tileInfoTask"))?je:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:Ye,updating:yt}=this._collectLayers([{parent:null==(v=this.map)||null==(E=v.call(this))?void 0:E.basemap,layers:null==(P=this.map)||null==(F=P.call(this))||null==(ne=F.basemap)?void 0:ne.baseLayers},{layers:null==(_e=this.map)||null==(Se=_e.call(this))?void 0:Se.layers}]);if(Ye&&Ye.length>0&&"tileInfo"in Ye[0]){const Pt=Ye[0].tileInfo;return{tileInfo:Pt&&Pt.spatialReference.equals(this.spatialReference)?Pt:null,updating:!1}}return{updating:yt}}get _heightModelInfoTask(){var v,E;if(!this.required.heightModelInfo||this.suspended&&null!=(v=this._get("_heightModelInfoTask"))&&v.heightModelInfo)return null!=(E=this._get("_heightModelInfoTask"))?E:{updating:!1};const{layers:P,updating:F}=this._allLayers;for(const Ye of P){var ne,_e;if(this._debug("Considering",null!=(ne=null!=(_e=Ye.title)?_e:Ye.id)?ne:Ye.declaredClass,"for height model info"),Qh(Ye)){const yt=Fc(Ye);var Se,je;if(yt)return this._debug("Derived height model info",yt),{heightModelInfo:yt,vcsWkid:null==(Se=Ye.spatialReference)?void 0:Se.vcsWkid,latestVcsWkid:null==(je=Ye.spatialReference)?void 0:je.latestVcsWkid,updating:!1}}this._debug("Layer does not support height models")}return this._debug("No height model info found,","updating",F),{updating:F}}get _extentCandidatesTask(){var v;if(this.suspended||!this.required.extent)return null!=(v=this._get("_extentCandidatesTask"))?v:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const E=this._allLayers,P=E.updating,F=[];for(const _e of E.layers){var ne;const Se="fullExtents"in _e&&_e.fullExtents||((0,V.pC)(_e.fullExtent)?[_e.fullExtent]:[]),je=this.requiresExtentInSpatialReference?null:Se[0],Ye=null!=(ne=Se.find(yt=>yt.spatialReference.equals(this.spatialReference)))?ne:je;if(Ye)return{candidates:[{extent:Ye,layer:_e}],updating:!1};if(this._getSupportedSpatialReferences(_e).length>0)for(const yt of Se)F.push({extent:yt,layer:_e})}return{candidates:F,updating:P}}get _extentTask(){var v=this;const{candidates:E,updating:P}=this._extentCandidatesTask;if(P)return{updating:P};if((0,V.Wi)(E)||0===E.length)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const F=this._pickExtentCandidate(E),ne=this.spatialReference;return F.extent.equals(this._projectExtentTask.input)&&ne.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:(0,V.pC)(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:((0,V.pC)(this._projectExtentTask.task)&&(this._debug("Aborting project extent task"),this._projectExtentTask.task=(0,V.IM)(this._projectExtentTask.task)),this._debug("Starting project extent task for",F.extent),this._projectExtentTask={input:F.extent.clone(),output:null,spatialReference:ne.clone(),task:(0,w.vr)(function(){var _e=(0,j.Z)(function*(Se){try{const je=yield Vc(F.extent,ne,F.layer.portalItem,Se);v._debug("Project extent task finished",je),v._projectExtentTask=Sr(_t({},v._projectExtentTask),{task:null,output:je})}catch(je){if((0,w.Hc)(Se))return;v._projectExtentTask=Sr(_t({},v._projectExtentTask),{task:null})}});return function(Se){return _e.apply(this,arguments)}}())},{updating:!0})}_processSpatialReferenceCandidates(v,E){var P;const F=this._getSupportedSpatialReferences(v);if(0!==F.length)if(this._debug("Spatial reference candidates from",null!=(P=v.title)?P:v.id,":",F.map(ne=>`${ne.spatialReference.wkid}:${(0,V.pC)(ne.viewingMode)?(0,Pa.M7)(ne.viewingMode):"global/local"}`).join(", ")),E.candidates){const ne=[],_e=(Se,je)=>(0,V.Wi)(Se.viewingMode)?je.viewingMode:((0,V.Wi)(je.viewingMode)||Se.viewingMode===je.viewingMode)&&Se.viewingMode;for(const Se of E.candidates)for(const je of F){if(!Se.spatialReference.equals(je.spatialReference))continue;const Ye=_e(Se,je);if(!1!==Ye){ne.push({spatialReference:Se.spatialReference,viewingMode:Ye});break}}ne.length>0&&(E.candidates=ne)}else E.candidates=F}_pickSpatialReferenceCandidate(v){const E=this.defaultSpatialReference;return!v||v.length<1?(0,V.pC)(E)?{spatialReference:E,viewingMode:null}:null:((0,V.pC)(E)&&v.length>1&&v.some(({spatialReference:P})=>P.equals(E))&&(v=v.filter(({spatialReference:P})=>P.equals(E))),v.length>1&&v.some(({viewingMode:P})=>P!==Pa.JY.Local)&&(v=v.filter(({viewingMode:P})=>P!==Pa.JY.Local)),v[0])}_getSupportedSpatialReferences(v){const E="supportedSpatialReferences"in v&&v.supportedSpatialReferences||(v.spatialReference?[v.spatialReference]:[]);if(0===E.length)return[];const P=[];for(const F of E){const ne=this.getSpatialReferenceSupport({spatialReference:F,layer:v});if((0,V.pC)(ne)){const _e=(0,V.pC)(ne.constraints)?ne.constraints:[{spatialReference:F}];for(const{spatialReference:Se,viewingMode:je}of _e)(!this.requiresExtentInSpatialReference||(0,V.Wi)(this.userSpatialReference)||Se.equals(this.userSpatialReference))&&P.push({spatialReference:Se,viewingMode:je})}}return P}_pickExtentCandidate(v){const E=this.spatialReference;return v.find(({extent:P})=>E.equals(P.spatialReference))||v[0]}_collectLayers(v){var E;if("loaded"!==this._loadMaybe(null==(E=this.map)?void 0:E.call(this)))return{layers:[],updating:!0};const P={layers:[],preloading:-1,updating:!1};for(const F of v)if(this._collectCollection(F,P),P.preloading===this.sourcePreloadCount)break;return{layers:P.layers,updating:P.updating}}_collectCollection(v,E){if(v.layers){switch(this._loadMaybe(v.parent)){case"loading":return E.updating=!0,void++E.preloading;case"failed":return}for(const ne of v.layers){switch(this._loadMaybe(ne)){case"failed":continue;case"loading":E.updating=!0,++E.preloading;break;case"loaded":var P,F;E.updating||(this._debug("Considering layer",null!=(P=null!=(F=ne.title)?F:ne.id)?P:ne.declaredClass),E.layers.push(ne)),"layers"in ne&&this._collectCollection({layers:ne.layers},E)}if(E.preloading===this.sourcePreloadCount)break}}}_loadMaybe(v){return v&&"loadStatus"in v?"not-loaded"===v.loadStatus?(this._debug("Triggering load",null!=(E=null!=(P=v.title)?P:v.id)?E:v.declaredClass),v.load(),"loading"):v.loadStatus:"loaded";var E,P}_debug(...v){this.logDebugInformation&&$c.info(...v)}};(0,C._)([(0,M.Cb)()],fs.prototype,"required",void 0),(0,C._)([(0,M.Cb)({constructOnly:!0})],fs.prototype,"map",void 0),(0,C._)([(0,M.Cb)({constructOnly:!0})],fs.prototype,"getSpatialReferenceSupport",void 0),(0,C._)([(0,M.Cb)()],fs.prototype,"defaultSpatialReference",void 0),(0,C._)([(0,M.Cb)()],fs.prototype,"userSpatialReference",void 0),(0,C._)([(0,M.Cb)()],fs.prototype,"sourcePreloadCount",void 0),(0,C._)([(0,M.Cb)()],fs.prototype,"priorityCollection",void 0),(0,C._)([(0,M.Cb)()],fs.prototype,"logDebugInformation",void 0),(0,C._)([(0,M.Cb)()],fs.prototype,"requiresExtentInSpatialReference",void 0),(0,C._)([(0,M.Cb)()],fs.prototype,"suspended",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"ready",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"heightModelInfoReady",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"spatialReference",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"extent",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"heightModelInfo",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"vcsWkid",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"latestVcsWkid",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"viewingMode",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"tileInfo",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"mapCollections",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"_allLayers",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"_spatialReferenceTask",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"_tileInfoTask",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"_heightModelInfoTask",null),(0,C._)([(0,M.Cb)({readOnly:!0})],fs.prototype,"_extentCandidatesTask",null),(0,C._)([(0,M.Cb)()],fs.prototype,"_extentTask",null),(0,C._)([(0,M.Cb)()],fs.prototype,"_projectExtentTask",void 0),fs=(0,C._)([(0,ee.j)("esri.views.support.DefaultsFromMap")],fs);const ep=fs;var Sa;const Ta=X.Z.getLogger("esri.views.View");let Wr=Sa=class extends((0,er.p)(qi.Z.EventedMixin((0,Rl.v)(be.Z)))){constructor(v){super(v),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new I.Z({getCollections:()=>{var E,P,F;return[null==(E=this.basemapView)?void 0:E.baseLayerViews,null==(P=this.groundView)?void 0:P.layerViews,this.layerViews,null==(F=this.basemapView)?void 0:F.referenceLayerViews]},getChildrenFunction:E=>E.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new Ec.J,this.analyses=new va,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new D.Z,this.magnifier=new bc,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new kh,this.navigation=new Bc,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Fh(this),this.persistableViewModels=new D.Z,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(this.watch("preconditionsReady",E=>{var P,F;E?(this._currentSpatialReference=this.spatialReference,Sa.views.add(this)):(this._currentSpatialReference=null,Sa.views.remove(this)),this.notifyChange("spatialReference"),!E&&this.ready?(null==(P=this.layerViewManager)||P.clear(),null==(F=this.toolViewManager)||F.detach(),(0,V.pC)(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):E&&!this.ready&&((0,V.pC)(this.analysisViewManager)&&this.analysisViewManager.attach(),this._startup(),this.toolViewManager.attach())},!0))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,(0,T.N1)(()=>this.ready)))),this.basemapView=new pi({view:this}),this.layerViewManager=new Uh({view:this,layerViewImporter:{importLayerView:v=>this.importLayerView(v),hasLayerViewModule:v=>this.hasLayerViewModule(v)},supportsGround:this.supportsGround}),this.toolViewManager=new $h({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([(0,T.YP)(()=>this.initialExtentRequired,v=>this.defaultsFromMap.required=Sr(_t({},this.defaultsFromMap.required),{extent:v}),{sync:!0,initial:!0}),(0,T.YP)(()=>this.ready,v=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=v,this.defaultsFromMap.userSpatialReference=v?this.spatialReference:this._userSpatialReference)},{sync:!0}),(0,T.YP)(()=>this._userSpatialReference,v=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=v)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){var v=this;let E=null;this.handles.add([(0,T.YP)(()=>{var P;return null==(P=this.defaultsFromMap)?void 0:P.ready},P=>{var F;const ne=(null==(F=this.map)?void 0:F.allLayers.length)>0;if(P&&!this.spatialReference&&ne){if((0,V.pC)(E))return;const _e=(0,vc.kB)(()=>E=(0,V.IM)(E));E=(0,w.vr)(function(){var Se=(0,j.Z)(function*(je){try{yield(0,w.e4)(v.spatialReferenceWarningDelay,null,je)}catch(Ye){return}finally{E=null}Ta.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")});return function(je){return Se.apply(this,arguments)}}()),this.handles.add(_e,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=(0,V.SC)(this.graphics),this.analyses=(0,V.SC)(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.toolViewManager=(0,V.SC)(this.toolViewManager),this.layerViewManager=(0,V.SC)(this.layerViewManager),this.basemapView=(0,V.SC)(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const v=this.map;this.map=null,null==v||v.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Ta.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new ep(_t({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:v=>this.getSpatialReferenceSupport(v)},this._defaultsFromMapSettings))}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var v;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Wo.Z.isLoadable(this.map)&&!this.map.loaded||0===this.width||0===this.height||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!(this._currentSpatialReference||null!=(v=this.defaultsFromMap)&&v.ready)||!this.typeSpecificPreconditionsReady)}set map(v){var E;v!==this._get("map")&&(null!=(E=v)&&E.destroyed&&(Ta.warn("#map","The provided map is already destroyed",{map:v}),v=null),Wo.Z.isLoadable(v)&&v.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",v))}get spatialReference(){var v,E;let P=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return P&&null!=(v=this.defaultsFromMap)&&null!=(E=v.required)&&E.heightModelInfo&&(P=P.clone(),P.vcsWkid=this.defaultsFromMap.vcsWkid,P.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),P}set spatialReference(v){const E=!(0,re.fS)(v,this._get("spatialReference"));this._set("_userSpatialReference",v),E&&(this._set("spatialReference",v),this._spatialReferenceChanged(v))}_spatialReferenceChanged(v){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var v;return null==(v=this.defaultsFromMap)?void 0:v.extent}get cursor(){const v=this.toolViewManager?this.toolViewManager.cursor:null;return(0,V.pC)(v)?v:this._cursor||"default"}set cursor(v){this._cursor=v,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(v){return this.layerViewManager.whenLayerView(v)}getDefaultSpatialReference(){var v;return null==(v=this.defaultsFromMap)?void 0:v.spatialReference}getDefaultHeightModelInfo(){var v,E,P;return null!=(v=null!=(E=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)?E:null==(P=this.defaultsFromMap)?void 0:P.heightModelInfo)?v:null}importLayerView(v){throw new W.Z("importLayerView() not implemented")}hasLayerViewModule(v){return!1}validate(){return(0,j.Z)(function*(){})()}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{}}_validateSpatialReference(v){return(0,V.pC)(this.getSpatialReferenceSupport({spatialReference:v}))}when(v,E){return this.isResolved()&&!this.ready&&Ta.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(v,E)}forceReadyCycle(){this.ready&&((0,T.gx)(()=>!1===this.preconditionsReady,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(v){this.toolViewManager.tools.add(v),this.activeTool=v}tryFatalErrorRecovery(){this.fatalError=null}};Wr.views=new D.Z,(0,C._)([(0,M.Cb)()],Wr.prototype,"_userSpatialReference",void 0),(0,C._)([(0,Be.B)("toolViewManager.activeTool")],Wr.prototype,"activeTool",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"allLayerViews",void 0),(0,C._)([(0,M.Cb)()],Wr.prototype,"groundView",void 0),(0,C._)([(0,M.Cb)()],Wr.prototype,"animation",void 0),(0,C._)([(0,M.Cb)()],Wr.prototype,"basemapView",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"_defaultsFromMapSettings",null),(0,C._)([(0,M.Cb)()],Wr.prototype,"defaultsFromMap",null),(0,C._)([(0,M.Cb)()],Wr.prototype,"fatalError",void 0),(0,C._)([(0,M.Cb)({type:le.Z})],Wr.prototype,"extent",void 0),(0,C._)([(0,M.Cb)((0,jl.z)(Ec.J,"graphics"))],Wr.prototype,"graphics",void 0),(0,C._)([(0,M.Cb)((0,jl.z)(va,"analyses"))],Wr.prototype,"analyses",void 0),(0,C._)([(0,M.Cb)({readOnly:!0,type:Ul.Z})],Wr.prototype,"heightModelInfo",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"interacting",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"navigating",void 0),(0,C._)([(0,M.Cb)({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Wr.prototype,"preconditionsReady",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"typeSpecificPreconditionsReady",void 0),(0,C._)([(0,M.Cb)({type:D.Z,readOnly:!0})],Wr.prototype,"layerViews",void 0),(0,C._)([(0,M.Cb)({type:bc})],Wr.prototype,"magnifier",void 0),(0,C._)([(0,M.Cb)({value:null,type:gc})],Wr.prototype,"map",null),(0,C._)([(0,M.Cb)()],Wr.prototype,"padding",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"ready",void 0),(0,C._)([(0,M.Cb)({type:Ri.Z})],Wr.prototype,"spatialReference",null),(0,C._)([(0,M.Cb)()],Wr.prototype,"spatialReferenceWarningDelay",void 0),(0,C._)([(0,M.Cb)()],Wr.prototype,"stationary",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"supportsGround",void 0),(0,C._)([(0,M.Cb)({type:so.Z})],Wr.prototype,"timeExtent",void 0),(0,C._)([(0,Be.B)("toolViewManager.tools")],Wr.prototype,"tools",void 0),(0,C._)([(0,M.Cb)()],Wr.prototype,"toolViewManager",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"type",void 0),(0,C._)([(0,M.Cb)({type:Number})],Wr.prototype,"scale",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"updating",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"initialExtentRequired",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"initialExtent",null),(0,C._)([(0,M.Cb)()],Wr.prototype,"cursor",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"input",void 0),(0,C._)([(0,M.Cb)({type:Bc,nonNullable:!0})],Wr.prototype,"navigation",void 0),(0,C._)([(0,M.Cb)()],Wr.prototype,"layerViewManager",void 0),(0,C._)([(0,M.Cb)()],Wr.prototype,"analysisViewManager",void 0),(0,C._)([(0,M.Cb)()],Wr.prototype,"width",void 0),(0,C._)([(0,M.Cb)()],Wr.prototype,"height",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"resizing",void 0),(0,C._)([(0,M.Cb)({value:null,readOnly:!0})],Wr.prototype,"size",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"suspended",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"viewEvents",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Wr.prototype,"persistableViewModels",void 0),(0,C._)([(0,M.Cb)()],Wr.prototype,"_isValid",void 0),(0,C._)([(0,M.Cb)()],Wr.prototype,"_readyCycleForced",void 0),(0,C._)([(0,M.Cb)()],Wr.prototype,"_currentSpatialReference",void 0),Wr=Sa=(0,C._)([(0,ee.j)("esri.views.View")],Wr);const tp=Wr;let mi=class extends Rl.D{constructor(v){super(v),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((v,E)=>this._dfd={resolve:v,reject:E}))}get done(){return"finished"===this.state||"stopped"===this.state}stop(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),this._dfd.reject(new W.Z("ViewAnimation stopped")))}finish(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),this._dfd.resolve())}update(v,E){E||(E=(0,w.y8)(v)?"waiting-for-target":"running"),this._set("target",v),this._set("state",E)}};(0,C._)([(0,M.Cb)({readOnly:!0})],mi.prototype,"done",null),(0,C._)([(0,M.Cb)({readOnly:!0,type:String})],mi.prototype,"state",void 0),(0,C._)([(0,M.Cb)()],mi.prototype,"target",void 0),mi=(0,C._)([(0,ee.j)("esri.views.ViewAnimation")],mi),function(v){v.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(mi||(mi={}));const $l=mi;var Da=p(78041),Us=p(24926);class rp{constructor(E,P,F,ne){const _e=E.targetGeometry,Se=P.targetGeometry;ne?"string"==typeof ne&&(ne=(0,Da.Qc)(ne)||Da.LI.ease):ne=Da.LI.ease,this.easing=ne,this.duration=F,this.sCenterX=_e.x,this.sCenterY=_e.y,this.sScale=E.scale,this.sRotation=E.rotation,this.tCenterX=Se.x,this.tCenterY=Se.y,this.tScale=P.scale,this.tRotation=P.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(E,P){const F=this.easing(P);let ne,_e,Se,je;P>=1?(ne=this.tCenterX,_e=this.tCenterY,Se=this.tRotation,je=this.tScale):(ne=this.sCenterX+F*this.dCenterX,_e=this.sCenterY+F*this.dCenterY,Se=this.sRotation+F*this.dRotation,je=this.sScale+F*this.dScale),E.targetGeometry.x=ne,E.targetGeometry.y=_e,E.scale=je,E.rotation=Se}}let Xn=class extends be.Z{constructor(v){super(v),this.duration=200,this.transition=null,this.easing=Da.LI.ease,this.view=null,this.viewpoint=null,this.viewpoint=new L.Z({targetGeometry:new oe.Z,scale:0,rotation:0}),this._updateTask=(0,fe.A)({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(v,E,P){this.stop(),(0,Us.JG)(this.viewpoint,E),this.transition=new rp(this.viewpoint,v.target,P&&P.duration||this.duration,P&&P.easing||this.easing);const ne=()=>{this.animation===v&&this._updateTask&&("finished"===v.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return v.when(ne,ne),this._startTime=performance.now(),this._updateTask.resume(),this.animation=v,v}animateContinous(v,E){this.stop(),this.updateFunction=E,this.viewpoint=v;const P=new $l({target:v.clone()}),F=()=>{this.animation===P&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return P.when(F,F),this._startTime=performance.now(),this._updateTask.resume(),this.animation=P,P}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(v){const E=this.animation;if(E&&E.state!==$l.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,v.deltaTime);else{const P=(performance.now()-this._startTime)/this.transition.duration,F=P>=1;this.transition.applyRatio(this.viewpoint,P),F&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};(0,C._)([(0,M.Cb)()],Xn.prototype,"animation",void 0),(0,C._)([(0,M.Cb)()],Xn.prototype,"duration",void 0),(0,C._)([(0,M.Cb)()],Xn.prototype,"transition",void 0),(0,C._)([(0,M.Cb)()],Xn.prototype,"easing",void 0),(0,C._)([(0,M.Cb)()],Xn.prototype,"view",void 0),(0,C._)([(0,M.Cb)()],Xn.prototype,"viewpoint",void 0),Xn=(0,C._)([(0,ee.j)("esri.views.2d.AnimationManager")],Xn);const sp=Xn;class np{constructor(E){this.view=E,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:P,graphicsView:F,labelManager:ne,layerViews:_e,state:{id:Se}}=this.view;P.baseLayerViews.forEach(this._updateLayerView,this),_e.forEach(this._updateLayerView,this),P.referenceLayerViews.forEach(this._updateLayerView,this),(0,V.pC)(ne)&&(ne.lastUpdateId!==Se&&(ne.viewChange(),ne.lastUpdateId=Se),ne.updateRequested&&ne.processUpdate(this._updateParameters)),(0,V.pC)(F)&&(F.lastUpdateId!==Se&&(F.viewChange(),F.lastUpdateId=Se),F.updateRequested&&F.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){this._frameTaskHandle||(this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",E=>{this.stationary=E,this.requestFrame()}),this._frameTaskHandle=(0,fe.A)(this),this.requestUpdate())}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(E){const P=this.view.state,F=E.lastUpdateId;null!=F&&(this.stationary||E.moving)||(E.moving=!0,E.moveStart()),F!==P.id&&E.viewChange(),this.stationary&&E.moving&&(E.moving=!1,E.moveEnd()),E.lastUpdateId=P.id,E.updateRequested&&E.processUpdate(this._updateParameters),"layerViews"in E&&E.layerViews.forEach(this._updateLayerView,this)}}function Hs(){return Promise.all([Promise.all([p.e(5086),p.e(5314),p.e(5506),p.e(8592),p.e(4376)]).then(p.bind(p,34376)),Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(3751),p.e(5909),p.e(4175),p.e(2408),p.e(4522),p.e(1619),p.e(9091),p.e(4056),p.e(8773),p.e(8592),p.e(2339)]).then(p.bind(p,2339))])}const Vo=()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(9516),p.e(8592),p.e(5391)]).then(p.bind(p,55391))),Ia=()=>Hs().then(()=>Promise.all([p.e(5086),p.e(3755),p.e(5024),p.e(3751),p.e(5909),p.e(4175),p.e(2408),p.e(1607)]).then(p.bind(p,68915))),zc={"base-dynamic":()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(5207),p.e(4126)]).then(p.bind(p,54126))),"base-tile":Vo,"bing-maps":Vo,csv:Ia,"geo-rss":()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(3751),p.e(5909),p.e(4175),p.e(2408),p.e(4522),p.e(1619),p.e(9091),p.e(4056),p.e(8773),p.e(8592),p.e(5072)]).then(p.bind(p,5072))),feature:Ia,geojson:Ia,graphics:()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(3751),p.e(5909),p.e(4175),p.e(2408),p.e(4522),p.e(1619),p.e(9091),p.e(4056),p.e(8773),p.e(8592),p.e(3375)]).then(p.bind(p,63375))),group:()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(408)]).then(p.bind(p,60408))),imagery:()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(3751),p.e(5909),p.e(4175),p.e(2408),p.e(4522),p.e(1619),p.e(9091),p.e(4056),p.e(8773),p.e(6926),p.e(5207),p.e(8594),p.e(4127),p.e(8592),p.e(3825)]).then(p.bind(p,53825))),"imagery-tile":()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(6926),p.e(8594),p.e(4127),p.e(8592),p.e(1795)]).then(p.bind(p,51795))),kml:()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(3751),p.e(5909),p.e(4175),p.e(2408),p.e(4522),p.e(1619),p.e(9091),p.e(4056),p.e(8773),p.e(8592),p.e(5868)]).then(p.bind(p,85868))),"map-image":()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(3751),p.e(5909),p.e(4175),p.e(2408),p.e(4522),p.e(1619),p.e(9091),p.e(4056),p.e(8773),p.e(5207),p.e(8592),p.e(7618)]).then(p.bind(p,69772))),"map-notes":()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(3751),p.e(5909),p.e(4175),p.e(2408),p.e(4522),p.e(1619),p.e(9091),p.e(4056),p.e(8773),p.e(8592),p.e(6899)]).then(p.bind(p,36899))),"ogc-feature":()=>Hs().then(()=>Promise.all([p.e(5086),p.e(3755),p.e(5024),p.e(3751),p.e(5909),p.e(4175),p.e(2408),p.e(1607),p.e(6829)]).then(p.bind(p,96829))),"open-street-map":Vo,route:()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(3751),p.e(5909),p.e(4175),p.e(2408),p.e(4522),p.e(1619),p.e(9091),p.e(4056),p.e(8773),p.e(8592),p.e(9066)]).then(p.bind(p,9066))),stream:()=>Hs().then(()=>Promise.all([p.e(5086),p.e(3755),p.e(5024),p.e(3751),p.e(5909),p.e(4175),p.e(2408),p.e(1607),p.e(9051)]).then(p.bind(p,39051))),"subtype-group":()=>Hs().then(()=>Promise.all([p.e(5086),p.e(3755),p.e(5024),p.e(3751),p.e(5909),p.e(4175),p.e(2408),p.e(1607),p.e(5876)]).then(p.bind(p,65876))),tile:Vo,"vector-tile":()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(3751),p.e(5909),p.e(8364),p.e(2039)]).then(p.bind(p,1651))),wcs:()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(6926),p.e(8594),p.e(4127),p.e(8592),p.e(1795)]).then(p.bind(p,51795))),"web-tile":Vo,wfs:Ia,wms:()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(5207),p.e(8592),p.e(6053)]).then(p.bind(p,6053))),wmts:()=>Hs().then(()=>Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(9516),p.e(9300)]).then(p.bind(p,49300))),analysis:null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};var Gl,op=p(72258),zl=p(33190),Dn=p(67831),ap=p(25748);const up=X.Z.getLogger("esri.views.MapView");let Ui=Gl=class extends be.Z{constructor(v){super(v),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if((0,V.Wi)(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return(0,ce.iV)(this.geometry,this.spatialReference)}catch(v){return up.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:v}),null}return this.geometry}constrain(v,E){if((0,V.Wi)(this.normalizedGeometry))return v;const P=v.targetGeometry;if("extent"===this.normalizedGeometry.type?(0,zl.aV)(this.normalizedGeometry,P):(0,zl.CI)(this.normalizedGeometry,P))return v;const{coordinate:F}=function lp(v,E){const{spatialReference:P}=E,F=[E.x,E.y];let ne=Number.POSITIVE_INFINITY,_e=0,Se=0;const je=[0,0],Ye="extent"===v.type?[[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]]]:v.rings;for(const yt of Ye)for(let Pt=0;Pt<yt.length-1;Pt++){(0,ap.Tx)(je,F,yt,Pt);const jt=(0,Dn.b)(F,je);jt<ne&&(ne=jt,_e=je[0],Se=je[1])}return{coordinate:new oe.Z({x:_e,y:Se,spatialReference:P}),distance:ne}}(this.normalizedGeometry,P);return F&&(v.targetGeometry=F),v}clone(){var v,E;return new Gl({geometry:null==(v=this.geometry)?void 0:v.clone(),spatialReference:null==(E=this.spatialReference)?void 0:E.clone()})}};var Hl;(0,C._)([(0,M.Cb)({constructOnly:!0})],Ui.prototype,"geometry",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Ui.prototype,"normalizedGeometry",null),(0,C._)([(0,M.Cb)({constructOnly:!0})],Ui.prototype,"spatialReference",void 0),Ui=Gl=(0,C._)([(0,ee.j)("esri.views.2d.constraints.GeometryConstraint")],Ui);let $o=Hl=class extends be.Z{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(v,E){return this.enabled&&E&&(this.rotationEnabled||(v.rotation=E.rotation)),v}clone(){return new Hl({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};(0,C._)([(0,M.Cb)()],$o.prototype,"enabled",void 0),(0,C._)([(0,M.Cb)()],$o.prototype,"rotationEnabled",void 0),$o=Hl=(0,C._)([(0,ee.j)("esri.views.2d.constraints.RotationConstraint")],$o);const Hc=$o;var kl;let gn=kl=class extends be.Z{constructor(v){super(v),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let v,{lods:E,minScale:P,maxScale:F,minZoom:ne,maxZoom:_e}=this,Se=-1,je=-1,Ye=!1,yt=!1;if(0!==P&&0!==F&&P<F&&([P,F]=[F,P]),!E||!E.length)return this._set("effectiveMinScale",P),void this._set("effectiveMaxScale",F);E=E.map(Pt=>Pt.clone()),E.sort((Pt,jt)=>jt.scale-Pt.scale),E.forEach((Pt,jt)=>Pt.level=jt);for(const Pt of E)!Ye&&P>0&&P>=Pt.scale&&(Se=Pt.level,Ye=!0),!yt&&F>0&&F>=Pt.scale&&(je=v?v.level:-1,yt=!0),v=Pt;-1===ne&&(ne=0===P?0:Se),-1===_e&&(_e=0===F?E.length-1:je),ne=Math.max(ne,0),ne=Math.min(ne,E.length-1),_e=Math.max(_e,0),_e=Math.min(_e,E.length-1),ne>_e&&([ne,_e]=[_e,ne]),P=E[ne].scale,F=E[_e].scale,E.splice(0,ne),E.splice(_e-ne+1,E.length),E.forEach((Pt,jt)=>{this._lodByScale[Pt.scale]=Pt,this._scales[jt]=Pt.scale}),this._set("effectiveLODs",E),this._set("effectiveMinZoom",ne),this._set("effectiveMaxZoom",_e),this._set("effectiveMinScale",P),this._set("effectiveMaxScale",F)}constrain(v,E){if(E&&v.scale===E.scale)return v;const P=this.effectiveMinScale,F=this.effectiveMaxScale,ne=v.targetGeometry,_e=E&&E.targetGeometry,je=0!==P&&v.scale>P;if(0!==F&&v.scale<F||je){const Ye=je?P:F;if(_e){const yt=(Ye-E.scale)/(v.scale-E.scale);ne.x=_e.x+(ne.x-_e.x)*yt,ne.y=_e.y+(ne.y-_e.y)*yt}v.scale=Ye}return this.snapToZoom&&this.effectiveLODs&&(v.scale=this._getClosestScale(v.scale)),v}fit(v){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(v,null);const E=this.scaleToZoom(v.scale),P=Math.abs(E-Math.floor(E));return v.scale=this.zoomToScale(P>.99?Math.round(E):Math.floor(E)),v}zoomToScale(v){if(!this.effectiveLODs)return 0;v-=this.effectiveMinZoom,v=Math.max(0,v);const E=this._scales;if(v<=0)return E[0];if(v>=E.length)return E[E.length-1];const P=Math.round(v-.5),F=Math.round(v);return E[F]+(F-v)*(E[P]-E[F])}scaleToZoom(v){if(!this.effectiveLODs)return-1;const E=this._scales;let P,F;if(v>=E[0])return this.effectiveMinZoom;if(v<=E[E.length-1])return this.effectiveMaxZoom;for(let ne=0;ne<E.length-1;ne++){if(P=E[ne],F=E[ne+1],F===v)return ne+this.effectiveMinZoom+1;if(P>v&&F<v)return ne+this.effectiveMinZoom+1-(v-F)/(P-F)}}snapToClosestScale(v){if(!this.effectiveLODs)return v;const E=this.scaleToZoom(v);return this.zoomToScale(Math.round(E))}snapToNextScale(v,E=.5){if(!this.effectiveLODs)return v*E;const P=Math.round(this.scaleToZoom(v));return this.zoomToScale(P+1)}snapToPreviousScale(v,E=2){if(!this.effectiveLODs)return v*E;const P=Math.round(this.scaleToZoom(v));return this.zoomToScale(P-1)}clone(){return new kl({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(v){return this._lodByScale[v]||(v=this._scales.reduce((E,P)=>Math.abs(P-v)<=Math.abs(E-v)?P:E,this._scales[0])),this._lodByScale[v].scale}};(0,C._)([(0,M.Cb)({readOnly:!0})],gn.prototype,"effectiveLODs",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],gn.prototype,"effectiveMinZoom",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],gn.prototype,"effectiveMaxZoom",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],gn.prototype,"effectiveMinScale",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],gn.prototype,"effectiveMaxScale",void 0),(0,C._)([(0,M.Cb)()],gn.prototype,"lods",void 0),(0,C._)([(0,M.Cb)()],gn.prototype,"minZoom",void 0),(0,C._)([(0,M.Cb)()],gn.prototype,"maxZoom",void 0),(0,C._)([(0,M.Cb)()],gn.prototype,"minScale",void 0),(0,C._)([(0,M.Cb)()],gn.prototype,"maxScale",void 0),(0,C._)([(0,M.Cb)()],gn.prototype,"snapToZoom",void 0),gn=kl=(0,C._)([(0,ee.j)("esri.views.2d.constraints.ZoomConstraint")],gn);const kc=gn;var cp=p(37118);const dp={base:null,key:"type",typeMap:{extent:le.Z,polygon:cp.Z}};let Bs=class extends be.Z{constructor(v){super(v),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(v){this._set("geometry",v||null)}get version(){var v;return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),(null!=(v=this._get("version"))?v:0)+1}get _defaultLODs(){var v,E,P;const F=null==(v=this.view)||null==(E=v.defaultsFromMap)?void 0:E.tileInfo,ne=null==(P=this.view)?void 0:P.spatialReference;return F&&ne&&F.spatialReference.equals(ne)?F.lods:null}get _geometry(){var v;return new Ui({geometry:this.geometry,spatialReference:null==(v=this.view)?void 0:v.spatialReference})}get _rotation(){return new Hc({rotationEnabled:this.rotationEnabled})}get _zoom(){const v=this._get("_zoom"),E=this.lods||this._defaultLODs,P=this.minZoom,F=this.maxZoom,ne=this.minScale,_e=this.maxScale,Se=this.snapToZoom;return v&&v.lods===E&&v.minZoom===P&&v.maxZoom===F&&v.minScale===ne&&v.maxScale===_e&&v.snapToZoom===Se?v:new kc({lods:E,minZoom:P,maxZoom:F,minScale:ne,maxScale:_e,snapToZoom:Se})}canZoomInTo(v){const E=this.effectiveMaxScale;return 0===E||v>=E}canZoomOutTo(v){const E=this.effectiveMinScale;return 0===E||v<=E}constrain(v,E){return this._zoom.constrain(v,E),this._rotation.constrain(v,E),this._geometry.constrain(v,E),v}constrainByGeometry(v){return this._geometry.constrain(v)}fit(v){return this._zoom.fit(v)}zoomToScale(v){return this._zoom.zoomToScale(v)}scaleToZoom(v){return this._zoom.scaleToZoom(v)}snapScale(v){return this._zoom.snapToClosestScale(v)}snapToNextScale(v){return this._zoom.snapToNextScale(v)}snapToPreviousScale(v){return this._zoom.snapToPreviousScale(v)}};(0,C._)([(0,M.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],Bs.prototype,"effectiveLODs",void 0),(0,C._)([(0,M.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],Bs.prototype,"effectiveMinScale",void 0),(0,C._)([(0,M.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],Bs.prototype,"effectiveMaxScale",void 0),(0,C._)([(0,M.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],Bs.prototype,"effectiveMinZoom",void 0),(0,C._)([(0,M.Cb)({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],Bs.prototype,"effectiveMaxZoom",void 0),(0,C._)([(0,M.Cb)({types:dp,value:null})],Bs.prototype,"geometry",null),(0,C._)([(0,M.Cb)({type:[op.Z]})],Bs.prototype,"lods",void 0),(0,C._)([(0,M.Cb)()],Bs.prototype,"minScale",void 0),(0,C._)([(0,M.Cb)()],Bs.prototype,"maxScale",void 0),(0,C._)([(0,M.Cb)()],Bs.prototype,"minZoom",void 0),(0,C._)([(0,M.Cb)()],Bs.prototype,"maxZoom",void 0),(0,C._)([(0,M.Cb)()],Bs.prototype,"rotationEnabled",void 0),(0,C._)([(0,M.Cb)()],Bs.prototype,"snapToZoom",void 0),(0,C._)([(0,M.Cb)()],Bs.prototype,"view",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Bs.prototype,"version",null),(0,C._)([(0,M.Cb)()],Bs.prototype,"_defaultLODs",null),(0,C._)([(0,M.Cb)({type:Ui})],Bs.prototype,"_geometry",null),(0,C._)([(0,M.Cb)({type:Hc})],Bs.prototype,"_rotation",null),(0,C._)([(0,M.Cb)({readOnly:!0,type:kc})],Bs.prototype,"_zoom",null),Bs=(0,C._)([(0,ee.j)("esri.views.2d.MapViewConstraints")],Bs);const Jc=Bs;var Xl,Yc=p(99770),hp=p(39863),wa=p(31478),pp=p(12225),Jl=p(46342),io=p(30217),Yl=p(49966),Qc=p(9545);function Ql(v){return function fp(v){return v instanceof Float32Array&&v.length>=2}(v)||function mp(v){return Array.isArray(v)&&v.length>=2}(v)}const qn=[0,0];let yi=Xl=class extends Ts.wq{constructor(v){super(v),this._viewpoint2D={center:(0,Yc.a)(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new le.Z,this.id=0,this.inverseTransform=(0,Jl.c)(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=(0,Jl.c)(),this.transformNoRotation=(0,Jl.c)(),this.displayMat3=(0,Yl.c)(),this.displayViewMat3=(0,Yl.c)(),this.viewMat3=(0,Yl.c)(),this.viewMat2d=(0,pp.c)(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(v){this._set("pixelRatio",v),this._update()}set size(v){this._set("size",v),this._update()}set viewpoint(v){if(v){const E=this._viewpoint2D,P=v.targetGeometry;E.center[0]=P.x,E.center[1]=P.y,E.rotation=v.rotation,E.scale=v.scale,E.spatialReference=P.spatialReference}this._update()}copy(v){const E=this.size,P=this.viewpoint;return P&&E?(this.viewpoint=(0,Us.JG)(P,v.viewpoint),this._set("size",(0,Dn.c)(E,v.size))):(this.viewpoint=v.viewpoint.clone(),this._set("size",[v.size[0],v.size[1]])),this._set("pixelRatio",v.pixelRatio),this}clone(){return new Xl({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(v,E,P){return Ql(E)?(0,Dn.t)(v,E,this.inverseTransform):(qn[0]=E,qn[1]=P,(0,Dn.t)(v,qn,this.inverseTransform))}toScreen(v,E,P){return Ql(E)?(0,Dn.t)(v,E,this.transform):(qn[0]=E,qn[1]=P,(0,Dn.t)(v,qn,this.transform))}toScreenNoRotation(v,E,P){return Ql(E)?(0,Dn.t)(v,E,this.transformNoRotation):(qn[0]=E,qn[1]=P,(0,Dn.t)(v,qn,this.transformNoRotation))}getScreenTransform(v,E){const{center:P}=this._viewpoint2D,F=this._get("pixelRatio")||1,ne=this._get("size");return(0,Us.Rb)(v,P,ne,E,0,F),v}_update(){const{center:v,spatialReference:E,scale:P,rotation:F}=this._viewpoint2D,ne=this._get("pixelRatio")||1,_e=this._get("size"),Se=new L.Z({targetGeometry:new oe.Z(v[0],v[1],E),scale:P,rotation:F});if(this._set("viewpoint",Se),!_e||!E||!P)return;this.resolution=(0,Us.uG)(Se),this.rotation=F,this.scale=P,this.spatialReference=E,(0,Dn.c)(this.center,v),(0,io.s)(this.displayMat3,0!==_e[0]?2/_e[0]:0,0,0,0,0!==_e[1]?-2/_e[1]:0,0,-1,1,1);const yt=(0,io.b)(this.viewMat3),Pt=(0,Qc.f)(_e[0]/2,_e[1]/2),jt=(0,Qc.f)(-_e[0]/2,-_e[1]/2),tr=(0,hp.t)(F);(0,io.c)(yt,yt,Pt),(0,io.r)(yt,yt,tr),(0,io.c)(yt,yt,jt),(0,io.m)(this.displayViewMat3,this.displayMat3,yt);const rr=(0,wa.a)(this.viewMat2d,Pt);return(0,wa.r)(rr,rr,tr),(0,wa.t)(rr,rr,jt),(0,Us.bk)(this.extent,Se,_e),(0,Us.Ck)(this.transform,Se,_e,ne),(0,wa.i)(this.inverseTransform,this.transform),(0,Us.Jp)(this.transformNoRotation,Se,_e,ne),this.worldScreenWidth=(0,Us.L2)(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};(0,C._)([(0,M.Cb)({readOnly:!0})],yi.prototype,"id",void 0),(0,C._)([(0,M.Cb)({value:1,json:{write:!0}})],yi.prototype,"pixelRatio",null),(0,C._)([(0,M.Cb)({json:{write:!0}})],yi.prototype,"size",null),(0,C._)([(0,M.Cb)()],yi.prototype,"spatialReference",void 0),(0,C._)([(0,M.Cb)({type:L.Z,json:{write:!0}})],yi.prototype,"viewpoint",null),yi=Xl=(0,C._)([(0,ee.j)("esri.views.2d.ViewState")],yi);const Xc=yi;var ql,eu;let ei=ql=class extends be.Z{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new ql({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};(0,C._)([(0,M.Cb)()],ei.prototype,"left",void 0),(0,C._)([(0,M.Cb)()],ei.prototype,"top",void 0),(0,C._)([(0,M.Cb)()],ei.prototype,"right",void 0),(0,C._)([(0,M.Cb)()],ei.prototype,"bottom",void 0),ei=ql=(0,C._)([(0,ee.j)("esri.views.2d.PaddedViewState.Padding")],ei);let oo=eu=class extends Xc{constructor(...v){super(...v),this.paddedViewState=new Xc,this._updateContent=(()=>{const E=(0,Yc.a)();return()=>{const P=this._get("size"),F=this._get("padding");if(!P||!F)return;const ne=this.paddedViewState;(0,Dn.s)(E,F.left+F.right,F.top+F.bottom),(0,Dn.f)(E,P,E),(0,Dn.c)(ne.size,E);const _e=ne.viewpoint;_e&&(this.viewpoint=_e)}})(),this.watch(["size","padding"],this._updateContent,!0),this.padding=new ei,this.size=[0,0]}set padding(v){this._set("padding",v||new ei)}set viewpoint(v){if(v){const E=v.clone();this.paddedViewState.viewpoint=v,(0,Us.H4)(E,v,this._get("size"),this._get("padding"));const P=this._viewpoint2D,F=E.targetGeometry;P.center[0]=F.x,P.center[1]=F.y,P.rotation=E.rotation,P.scale=E.scale,P.spatialReference=F.spatialReference,this._update()}}clone(){return new eu({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};(0,C._)([(0,M.Cb)()],oo.prototype,"paddedViewState",void 0),(0,C._)([(0,M.Cb)({type:ei})],oo.prototype,"padding",null),(0,C._)([(0,M.Cb)()],oo.prototype,"viewpoint",null),oo=eu=(0,C._)([(0,ee.j)("esri.views.2d.PaddedViewState")],oo);const yp=oo;p(17083);var _p=p(9598);function tu(v,E){switch(E){case"primary":return"touch"===v.pointerType||0===v.button;case"secondary":return"touch"!==v.pointerType&&2===v.button;case"tertiary":return"touch"!==v.pointerType&&1===v.button}}p(58098),p(8480),p(79527);class qc extends sn.a{constructor(E,P){super(!0),this.view=E,this.registerIncoming("double-click",P,F=>this._handleDoubleClick(F,P))}_handleDoubleClick(E,P){tu(E.data,"primary")&&(E.stopPropagation(),P?this.view.mapViewNavigation.zoomOut([E.data.x,E.data.y]):this.view.mapViewNavigation.zoomIn([E.data.x,E.data.y]))}}class gp extends sn.a{constructor(E,P,F){super(!0),this.view=E,this.pointerType=P,this.registerIncoming("double-tap-drag",F,ne=>this._handleDoubleTapDrag(ne))}_handleDoubleTapDrag(E){const{data:P}=E,{pointerType:F}=P;if(F!==this.pointerType)return;E.stopPropagation();const{action:ne,delta:_e}=P,{view:Se}=this,{mapViewNavigation:je}=Se;switch(ne){case"begin":{const{scale:Ye}=Se;this._startScale=Ye,this._currentScale=Ye,this._previousDelta=_e,je.begin();break}case"update":{if(this._previousDelta.y===_e.y)return;this._previousDelta=_e;const yt=this._startScale*1.015**_e.y;je.setViewpointImmediate(yt/this._currentScale),this._currentScale=yt;break}case"end":{const{constraints:Ye}=Se,{effectiveLODs:yt,snapToZoom:Pt}=Ye;if(!Pt||!yt)return void je.end();const jt=Ye.snapScale(this._currentScale),tr=(_e.y>0?Math.max(jt,Ye.snapToPreviousScale(this._startScale)):Math.min(jt,Ye.snapToNextScale(this._startScale)))/this._currentScale;je.zoom(tr);break}}}}class xa{constructor(E){this.callbacks=E,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(E){const P=E.data,F=P.pointers.size;switch(P.action){case"start":this.currentCount=F,this._emitStart(E);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=F,this._emitStart(E);break;case"update":this._emitUpdate(E);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=F,this._emitStart(E);break;case"end":this._emitEnd(E),this.currentCount=0}this.previousEvent=E}_emitStart(E){this.startEvent=E,this.callbacks.condition(this.currentCount,E)&&this.callbacks.start(this.currentCount,E,this.startEvent)}_emitUpdate(E){this.callbacks.condition(this.currentCount,E)&&this.callbacks.update(this.currentCount,E,this.startEvent)}_emitEnd(E){this.callbacks.condition(this.currentCount,E)&&this.callbacks.end(this.currentCount,E,this.startEvent),this.startEvent=null}}class vp extends sn.a{constructor(E,P,F){super(!0),this.view=E,this.pointerAction=P,this.registerIncoming("drag",F,ne=>this._handleDrag(ne)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(E){super.onInstall(E),this.dragEventSeparator=new xa({start:(P,F)=>{this.view.mapViewNavigation.pan.begin(this.view,F.data),F.stopPropagation()},update:(P,F)=>{this.view.mapViewNavigation.pan.update(this.view,F.data),F.stopPropagation()},end:(P,F)=>{this.view.mapViewNavigation.pan.end(this.view,F.data),F.stopPropagation()},condition:(P,F)=>1===P&&tu(F.data,this.pointerAction)})}_handleDrag(E){const P=this.view.mapViewNavigation;P.pinch.zoomMomentum||P.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(E)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class Ep extends sn.a{constructor(E,P,F){super(!0),this.view=E,this.pointerAction=P;const ne=this.view.mapViewNavigation;this.dragEventSeparator=new xa({start:(_e,Se)=>{ne.rotate.begin(this.view,Se.data),Se.stopPropagation()},update:(_e,Se)=>{ne.rotate.update(this.view,Se.data),Se.stopPropagation()},end:(_e,Se)=>{ne.rotate.end(),Se.stopPropagation()},condition:(_e,Se)=>1===_e&&tu(Se.data,this.pointerAction)}),this.registerIncoming("drag",F,_e=>this.dragEventSeparator.handle(_e))}}var bp=p(84161);function Ln(v){let E=v*v;return v<0&&(E*=-1),E}class Pp extends sn.a{constructor(E){super(!0),this.view=E,this.frameTask=null,this.watchHandles=new se.Z,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",P=>this._handleGamePadEvent(P)),this.handle.pause()}onInstall(E){super.onInstall(E),this.watchHandles.add([(0,xe.S1)(this.view.navigation.gamepad,"enabled",P=>{P?(this.handle.resume(),this.frameTask||(this.frameTask=(0,fe.A)({update:F=>this._frameUpdate(F.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))})])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(E){const P=this.view.navigation.gamepad.device;P&&E.data.device!==P||this.currentDevice&&this.currentDevice!==E.data.device||("end"===E.data.action?(this.currentDevice=null,function Mp(v){v.translation[0]=0,v.translation[1]=0,v.translation[2]=0,v.heading=0,v.tilt=0}(this.transformation)):(this.currentDevice=E.data.device,function Cp(v,E,P){const F=P,ne=v.state,_e=v.device,Se="forward-down"===E.tiltDirection?1:-1;"standard"===_e.deviceType?(F.translation[0]=Ln(ne.axes[0]),F.translation[1]=Ln(ne.axes[1]),F.translation[2]=Ln(ne.buttons[7])-Ln(ne.buttons[6]),F.heading=Ln(ne.axes[2]),F.tilt=Ln(ne.axes[3])):"spacemouse"===_e.deviceType&&(F.translation[0]=1.2*Ln(ne.axes[0]),F.translation[1]=1.2*Ln(ne.axes[1]),F.translation[2]=2*-Ln(ne.axes[2]),F.heading=1.2*Ln(ne.axes[5]),F.tilt=1.2*Ln(ne.axes[3])),F.tilt*=Se,(0,bp.a)(F.translation,F.translation,1)}(E.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(E){const P=this.transformation;if(function Op(v){return 0===v.translation[0]&&0===v.translation[1]&&0===v.translation[2]&&0===v.heading&&0===v.tilt&&0===v.zoom}(P))return;const F=this.view.viewpoint.clone(),_e=Tp*this.view.navigation.gamepad.velocityFactor*E;(0,Us.Rx)(F,F,[P.translation[0]*_e,-P.translation[1]*_e]);const Ye=this.view.size;(0,Us.UZ)(F,F,1+P.translation[2]*Dp*E,this.view.constraints.rotationEnabled?-P.heading*Sp*E:0,[Ye[0]/2,Ye[1]],Ye);const Pt=this.view.constraints.constrain(F,this.view.viewpoint);this.view.viewpoint=Pt}}const Sp=.06,Tp=.7,Dp=6e-4;class Ip extends sn.a{constructor(E,P,F){super(!0),this.view=E,this.keys=P,this._pressed=!1,this._keyMap={[P.left]:"left",[P.right]:"right",[P.up]:"up",[P.down]:"down"},this.registerIncoming("key-down",F,ne=>this._handleKeyDown(ne)),this.registerIncoming("key-up",F,ne=>this._handleKeyUp(ne)),this.registerIncoming("blur",F,()=>this._handleBlur())}_handleKeyDown(E){E.data.repeat||this._handleKey(E,!0)}_handleKeyUp(E){this._handleKey(E,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(E,P){const F=this._keyMap[E.data.key];if(this._pressed=null!=F,this._pressed){if(P)switch(this.view.mapViewNavigation.begin(),F){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();E.stopPropagation()}}}class wp extends sn.a{constructor(E,P,F){super(!0),this.view=E,this.keys=P,this._pressed=!1,this._keyToDirection={[P.clockwiseOption1]:"clockwise",[P.clockwiseOption2]:"clockwise",[P.counterClockwiseOption1]:"counterClockwise",[P.counterClockwiseOption2]:"counterClockwise",[P.resetOption1]:"reset",[P.resetOption2]:"reset"},this.registerIncoming("key-down",F,ne=>this._handleKeyDown(ne)),this.registerIncoming("key-up",F,ne=>this._handleKeyUp(ne)),this.registerIncoming("blur",F,()=>this._handleBlur())}_handleKeyDown(E){E.data.repeat||this._handleKey(E,!0)}_handleKeyUp(E){this._handleKey(E,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(E,P){const F=E.modifiers;if(F.size>0&&!F.has("Shift")||!this.view.constraints.rotationEnabled)return;const ne=this._keyToDirection[E.data.key];if(this._pressed=null!=ne,this._pressed){if(P)switch(this.view.mapViewNavigation.begin(),ne){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();E.stopPropagation()}}}var ao;!function(v){v[v.IN=0]="IN",v[v.OUT=1]="OUT"}(ao||(ao={}));class xp extends sn.a{constructor(E,P,F){super(!0),this.view=E,this.keys=P,this._keysToZoomAction={},this.registerIncoming("key-down",F,ne=>this._handleKeyDown(ne)),P.zoomIn.forEach(ne=>this._keysToZoomAction[ne]=ao.IN),P.zoomOut.forEach(ne=>this._keysToZoomAction[ne]=ao.OUT)}_handleKeyDown(E){this._handleKey(E)}_handleKey(E){const P=E.modifiers;if(P.size>0&&!P.has("Shift"))return;const{key:F}=E.data;if(!(F in this._keysToZoomAction))return;const ne=this._keysToZoomAction[F],{mapViewNavigation:_e}=this.view;let Se=null;switch(ne){case ao.IN:Se=_e.zoomIn();break;case ao.OUT:Se=_e.zoomOut();break;default:return}_e.begin(),Se.then(()=>_e.end()),E.stopPropagation()}}class Lp extends sn.a{constructor(E,P){super(!0),this.view=E,this._canZoom=!0,this.registerIncoming("mouse-wheel",P,F=>this._handleMouseWheel(F))}_handleMouseWheel(E){if(!this.view.navigation.mouseWheelZoomEnabled||(E.preventDefault(),E.stopPropagation(),!this._canZoom))return;const P=this.view.mapViewNavigation,{x:F,y:ne,deltaY:_e}=E.data,je=P.zoom(1/.6**(1/60*_e),[F,ne]);je&&(this._canZoom=!1,je.catch(()=>{}).then(()=>{this._canZoom=!0,P.end()}))}}class Rp extends sn.a{constructor(E){super(!0),this.view=E,this.registerIncoming("drag",F=>this._handleDrag(F)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const P=this.view.mapViewNavigation;this.dragEventSeparator=new xa({start:(F,ne)=>{P.pinch.begin(this.view,ne.data),ne.stopPropagation()},update:(F,ne)=>{P.pinch.update(this.view,ne.data),ne.stopPropagation()},end:(F,ne)=>{P.pinch.end(this.view),ne.stopPropagation()},condition:F=>F>=2})}_handleDrag(E){this.dragEventSeparator.handle(E)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}var jp=p(25441);function ed(v){const E=v.native;return E?{buttons:E.buttons.map(P=>P.pressed?P.value?P.value:1:0),axes:E.axes.map(P=>function Fp(v,E){const P=Math.abs(v);return P<E?0:Math.sign(v)*(P-E)/(1-E)}(P,v.axisThreshold))}:{buttons:[],axes:[]}}class Wp{constructor(E,P){this.element=E,this.input=P,this._hasEventListeners=!1,this._onConnectGamepad=_e=>{this._connectGamepad(_e.gamepad)},this._onDisconnectGamepad=_e=>{const Se=_e.gamepad,je=Se.index,Ye=this.inputDevices[je];Ye&&(this._emitGamepadEvent(Se,ed(Ye),!1),this.inputDevices.splice(je,1),this.latestUpdate.splice(je,1),this.input.gamepad.devices.remove(Ye),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const F="getGamepads"in window.navigator,ne=window.isSecureContext;this.supported=F&&ne,this.supported&&(this._forEachGamepad(_e=>this._connectGamepad(_e)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(E){this._hasEventListeners!==E&&(this._hasEventListeners=E,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(E){this.callback=E}_connectGamepad(E){const P=new Fl(E);"unknown"!==P.deviceType&&(this.inputDevices[E.index]=P,this.input.gamepad.devices.add(P)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){null==this.frameTask&&(this.frameTask=(0,fe.A)({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const E=document.hasFocus(),P=this.element.contains(document.activeElement),F="document"===this.input.gamepad.enabledFocusMode&&!E||"view"===this.input.gamepad.enabledFocusMode&&!P;this._forEachGamepad(ne=>{const _e=this.inputDevices[ne.index];if(!_e)return;const Se=this.latestUpdate[ne.index],je=ed(_e),Ye=F||function Bp(v){for(let E=0;E<v.axes.length;E++)if(0!==v.axes[E])return!1;for(let E=0;E<v.buttons.length;E++)if(0!==v.buttons[E])return!1;return!0}(je);Se&&(Se.timestamp===ne.timestamp||!Se.active&&Ye||function Up(v,E){if(v.axes.length!==E.axes.length||v.buttons.length!==E.buttons.length)return!1;for(let P=0;P<v.axes.length;P++)if(v.axes[P]!==E.axes[P])return!1;for(let P=0;P<v.buttons.length;P++)if(v.buttons[P]!==E.buttons[P])return!1;return!0}(Se.state,je))||this._emitGamepadEvent(ne,je,!Ye)})}_forEachGamepad(E){const P=window.navigator.getGamepads();for(let F=0;F<P.length;F++){const ne=P[F];this._validate(ne)&&E(ne)}}_emitGamepadEvent(E,P,F){const ne=this.latestUpdate[E.index],_e=ne&&ne.active;if(!_e&&!F)return;const Se=!_e&&F?"start":_e&&F?"update":"end";this.latestUpdate[E.index]={timestamp:E.timestamp,state:P,active:F},this.callback&&this.callback({device:this.inputDevices[E.index],state:P,action:Se})}_validate(E){if(!E||!E.connected)return!1;for(let P=0;P<E.axes.length;P++)if(isNaN(E.axes[P]))return!1;return!0}}const td=(0,k.Z)("trident"),rd=(0,k.Z)("edge"),Np=(0,k.Z)("chrome"),Zp=(0,k.Z)("ff"),Kp=(0,k.Z)("safari"),lo_touchNone="esri-view-surface--touch-none",lo_touchPan="esri-view-surface--touch-pan";let Vp=(()=>{class v{constructor(P,F){this.input=F,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=P,P.getAttribute("tabindex")||P.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Wp(P,this.input),this._gamepadSource.onEvent=ne=>this._callback("gamepad",ne)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(P=>{this._releasePointerCaptureSafe(P)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(P){this._browserTouchPanningEnabled=P,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(P){this._callback=P}set activeEvents(P){for(const F in this._active)P&&P.has(F)||(this._element.removeEventListener(ru[F],this._active[F]),delete this._active[F]);P&&P.forEach(F=>{if(!this._active[F]&&ru[F]){const ne=(this._eventHandlers[F]||this._handleDefault).bind(this,F);this._element.addEventListener(ru[F],ne),this._active[F]=ne}}),this._gamepadSource.hasEventListeners=P&&P.has("gamepad")}setPointerCapture(P,F){F?(this._element.setPointerCapture(P.pointerId),this._activePointerCaptures.add(P.pointerId)):(this._releasePointerCaptureSafe(P.pointerId),this._activePointerCaptures.delete(P.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?lo_touchNone:lo_touchPan),this._element.classList.add(this._browserTouchPanningEnabled?lo_touchPan:lo_touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(lo_touchNone),this._element.classList.remove(lo_touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(P){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(P))return;this._element.releasePointerCapture(P)}catch(F){}}_updateNormalizedPointerLikeEvent(P,F){const ne=Ic(this._element,P);return v.test.disableSubpixelCoordinates&&(ne.x=Math.round(ne.x),ne.y=Math.round(ne.y)),F.x=ne.x,F.y=ne.y,F}_handleKey(P,F){const ne=(0,jp.kK)(F);ne&&"key-up"===P&&this._keyDownState.delete(ne);const _e={native:F,key:ne,repeat:ne&&this._keyDownState.has(ne)};ne&&"key-down"===P&&this._keyDownState.add(_e.key),this._callback(P,_e)}_handlePointer(P,F){const ne=this._updateNormalizedPointerLikeEvent(F,{native:F,x:0,y:0,pointerType:F.pointerType,button:F.button,buttons:F.buttons,eventId:this._eventId++});this._callback(P,ne)}_handlePointerPreventDefault(P,F){const ne=this._updateNormalizedPointerLikeEvent(F,{native:F,x:0,y:0,pointerType:F.pointerType,button:F.button,buttons:F.buttons,eventId:this._eventId++});F.preventDefault(),this._callback(P,ne)}_handleMouseWheel(P,F){let ne=F.deltaY;switch(F.deltaMode){case 0:(td||rd)&&(ne=ne/document.documentElement.clientHeight*600);break;case 1:ne*=30;break;case 2:ne*=900}td||rd?ne*=.7:Np||Kp?ne*=.6:Zp&&(ne*=1.375);const Se=Math.abs(ne);Se>100&&(ne=ne/Se*200/(1+Math.exp(-.02*(Se-100))));const je=this._updateNormalizedPointerLikeEvent(F,{native:F,x:0,y:0,deltaY:ne});this._callback(P,je)}_handlePointerCaptureLost(P,F){this._activePointerCaptures.delete(F.pointerId),this._handleDefault(P,F)}_handleDefault(P,F){const ne={native:F};F.preventDefault(),this._callback(P,ne)}_preventAltKeyDefault(P){"Alt"===P.key&&P.preventDefault()}_preventMultiTouchPanning(P){P.touches.length>1&&P.preventDefault()}}return v.test={disableSubpixelCoordinates:!1},v})();const ru={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class $p extends sn.a{constructor(){super(!0),this.registerIncoming("context-menu",E=>{E.data.native.preventDefault()})}}var Aa=p(84244);function su(v,E){return Math.abs(E.x-v.x)+Math.abs(E.y-v.y)}class Hp extends sn.a{constructor(E=250,P=10,F=350,ne=35,_e=Aa.m){super(!1),this.maximumDoubleClickDelay=E,this.maximumDoubleClickDistance=P,this.maximumDoubleTouchDelay=F,this.maximumDoubleTouchDistance=ne,this._clock=_e,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(E=>E.doubleClickTimeout=(0,V.hw)(E.doubleClickTimeout))}get hasPendingInputs(){return(0,Ea.oE)(this._pointerState,E=>null!=E.doubleClickTimeout)}_pointerId(E){const P=E.native;return"mouse"===P.pointerType?`${P.pointerId}:${P.button}`:`${P.pointerType}`}_handleImmediateClick(E){const P=E.data,F=this._pointerId(P),ne=this._pointerState.get(F);if(ne){const _e="touch"===P.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;su(ne.event.data,P)>_e?(this._clearDoubleClickTimeout(F,!0),this._startClick(E)):(this._clearDoubleClickTimeout(F,!1),this._doubleClick.emit(ne.event.data,void 0,ne.event.modifiers))}else this._startClick(E)}_startClick(E){const P=this._pointerId(E.data);this._pointerState.set(P,{event:E,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(P),"touch"===E.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}),this.refreshHasPendingInputs()}_handlePointerDrag(E){const P=this._pointerId(E.data.currentEvent);this._clearDoubleClickTimeout(P,!0)}_handleDrag(E){const P=this._pointerId(E.data.pointer);this._clearDoubleClickTimeout(P,!0)}_clearDoubleClickTimeout(E,P){const F=this._pointerState.get(E);F&&(F.doubleClickTimeout.remove(),F.doubleClickTimeout=null,P&&this._doubleClickTimeoutExceeded(E),this._pointerState.delete(E),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(E){const P=this._pointerState.get(E);this._click.emit(P.event.data,void 0,P.event.modifiers),P.doubleClickTimeout=null,this._pointerState.delete(E),this.refreshHasPendingInputs()}}class kp extends sn.a{constructor(E=250,P=10,F=350,ne=35,_e=Aa.m){super(!1),this.maximumDoubleClickDelay=E,this.maximumDoubleClickDistance=P,this.maximumDoubleTouchDelay=F,this.maximumDoubleTouchDistance=ne,this._clock=_e,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=(0,O.vW)(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new xa({start:(Se,je)=>this._dragStart(Se,je),update:(Se,je)=>this._dragUpdate(je),end:(Se,je)=>this._dragEnd(je)}),this.registerIncoming("drag",Se=>this._dragEventSeparator.handle(Se)),this.registerIncoming("pointer-down",Se=>this._handlePointerDown(Se)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(E=>{null!=E.doubleTapTimeout&&(E.doubleTapTimeout.remove(),E.doubleTapTimeout=null)})}get hasPendingInputs(){return(0,Ea.oE)(this._pointerState,E=>null!=E.doubleTapTimeout)}_clearPointerDown(E){const P=this._pointerState.get(E);P&&(P.doubleTapTimeout.remove(),P.doubleTapTimeout=null,this._pointerState.delete(E),this.refreshHasPendingInputs())}_createDoubleTapDragData(E,P,F){const{button:ne,buttons:_e,pointer:Se,pointers:je,pointerType:Ye,timestamp:yt}=F;return{action:E,delta:P,button:ne,buttons:_e,pointer:Se,pointers:je,pointerType:Ye,timestamp:yt}}_dragStart(E,P){if(!this._doubleTapDragReady||1!==E)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:F,modifiers:ne}=P,{center:_e}=F;this._dragStartCenter=_e;const Se=this._createDoubleTapDragData("begin",(0,O.vW)(0,0),F);this._doubleTapDrag.emit(Se,void 0,ne),P.stopPropagation()}_dragUpdate(E){if(!this._doubleTapDragActive)return;const{data:P,modifiers:F}=E,{center:ne}=P,_e=(0,O.vW)(ne.x-this._dragStartCenter.x,ne.y-this._dragStartCenter.y),Se=this._createDoubleTapDragData("update",_e,P);this._doubleTapDrag.emit(Se,void 0,F),E.stopPropagation()}_dragEnd(E){if(!this._doubleTapDragActive)return;const{data:P,modifiers:F}=E,{center:ne}=P,_e=(0,O.vW)(ne.x-this._dragStartCenter.x,ne.y-this._dragStartCenter.y),Se=this._createDoubleTapDragData("end",_e,P);this._doubleTapDrag.emit(Se,void 0,F),this._doubleTapDragActive=!1,E.stopPropagation()}_handlePointerDown(E){const{data:P}=E,F=this._pointerId(P),ne=this._pointerState.get(F),{pointerType:_e}=P.native;if(ne){const Se="touch"===_e?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(F),su(ne.event.data,P)>Se?this._storePointerDown(E):this._doubleTapDragReady=!0}else this._storePointerDown(E)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(E){const{native:P}=E,{pointerId:F,button:ne,pointerType:_e}=P;return"mouse"===_e?`${F}:${ne}`:`${_e}`}_storePointerDown(E){const{data:P}=E,{pointerType:F}=P.native,ne=this._pointerId(P),Se=this._clock.setTimeout(()=>this._clearPointerDown(ne),"touch"===F?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);this._pointerState.set(ne,{event:E,doubleTapTimeout:Se}),this.refreshHasPendingInputs()}}var nd,nu=p(27422);class Jp extends sn.a{constructor(E){super(!1),this.navigationTouch=E,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(E,P,F,ne){return{action:E,pointerType:this.pointerType,button:this.mouseButton,buttons:P.buttons,timestamp:ne,pointers:Yp(this.activePointerMap),pointer:P,angle:F.angle,radius:F.radius,center:F.center}}_addPointer(E){const P=E.native.pointerId,F=La(this.activePointerMap).angle,ne={event:E,initialAngle:0,lastAngle:0};this.activePointerMap.set(P,ne);const _e=Ra(ne,sd(this.activePointerMap));ne.initialAngle=_e,ne.lastAngle=_e,this._updatePointerAngles(F)}_updatePointer(E){if(E&&null==E.x&&null==E.y)return;const F=this.activePointerMap.get(E.native.pointerId);F?F.event=E:this._addPointer(E)}_removePointer(E){const P=La(this.activePointerMap).angle;this.activePointerMap.delete(E),this._updatePointerAngles(P)}_updatePointerAngles(E){const P=La(this.activePointerMap);this.activePointerMap.forEach(F=>{F.initialAngle=Ra(F,P)-E,F.lastAngle=Ra(F,P)-E})}_emitEvent(E,P,F){const ne=La(this.activePointerMap);this.drag.emit(this._createPayload(E,P,ne,F),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(E){const P=E.data.native.pointerId,F=(0,nu.HA)(E.timestamp);this.activePointerMap.get(P)&&(1===this.activePointerMap.size?(this._updatePointer(E.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",E.data,F),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(P)):(this._removePointer(P),this._emitEvent("removed",E.data,(0,nu.HA)(E.timestamp))))}_handlePointerDrag(E){const P=E.data,F=P.currentEvent,ne=(0,nu.HA)(E.timestamp);switch(P.action){case"start":case"update":this.isDragging?this.activePointerMap.has(F.native.pointerId)?(this._updatePointer(F),!this.isCurrentDragSuppressed&&this._emitEvent("update",F,ne)):(this._addPointer(F),this._emitEvent("added",F,ne),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(F),this.pointerType=E.data.startEvent.pointerType,this.mouseButton=E.data.startEvent.button,this.startStateModifiers=E.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",F,ne))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}function sd(v){const E=[];return v.forEach(P=>{E.push((0,O.vW)(P.event.x,P.event.y))}),function Gp(v,E){if(E?(E.radius=0,E.center.x=0,E.center.y=0):E={radius:0,center:(0,O.vW)()},0===v.length)return E;if(1===v.length)return E.center.x=v[0].x,E.center.y=v[0].y,E;if(2===v.length){const[Es,$s]=v,[nn,En]=[$s.x-Es.x,$s.y-Es.y];return E.radius=Math.sqrt(nn*nn+En*En)/2,E.center.x=(Es.x+$s.x)/2,E.center.y=(Es.y+$s.y)/2,E}let P=0,F=0;for(let Es=0;Es<v.length;Es++)P+=v[Es].x,F+=v[Es].y;P/=v.length,F/=v.length;const ne=v.map(Es=>Es.x-P),_e=v.map(Es=>Es.y-F);let Se=0,je=0,Ye=0,yt=0,Pt=0,jt=0,tr=0;for(let Es=0;Es<ne.length;Es++){const $s=ne[Es],nn=_e[Es],En=$s*$s,Qo=nn*nn;Se+=En,je+=Qo,Ye+=$s*nn,yt+=En*$s,Pt+=Qo*nn,jt+=$s*Qo,tr+=nn*En}const rr=.5*(yt+jt),wr=.5*(Pt+tr),Jr=Se*je-Ye*Ye,kr=(rr*je-wr*Ye)/Jr,as=(Se*wr-Ye*rr)/Jr,hs=(0,O.vW)(kr+P,as+F);return{radius:Math.sqrt(kr*kr+as*as+(Se+je)/v.length),center:hs}}(E)}function La(v){const E=sd(v);let P=0;return v.forEach(F=>{let ne=Ra(F,E),_e=ne-F.lastAngle;for(;_e>Math.PI;)_e-=2*Math.PI;for(;_e<-Math.PI;)_e+=2*Math.PI;ne=F.lastAngle+_e,F.lastAngle=ne,P+=ne-F.initialAngle}),P/=v.size||1,{angle:P,radius:E.radius,center:E.center}}function Yp(v){const E=new Map;return v.forEach((P,F)=>E.set(F,P.event)),E}function Ra(v,E){const P=v.event;return Math.atan2(P.y-E.center.y,P.x-E.center.x)}!function(v){v[v.Left=0]="Left",v[v.Middle=1]="Middle",v[v.Right=2]="Right",v[v.Back=3]="Back",v[v.Forward=4]="Forward",v[v.Undefined=-1]="Undefined"}(nd||(nd={}));class Qp extends sn.a{constructor(E=250,P=10,F=350,ne=35,_e=Aa.m){super(!1),this.maximumDoubleClickDelay=E,this.maximumDoubleClickDistance=P,this.maximumDoubleTouchDelay=F,this.maximumDoubleTouchDistance=ne,this._clock=_e,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",Se=>{this._handlePointerLoss(Se,"pointer-up")}),this.registerIncoming("pointer-capture-lost",Se=>{this._handlePointerLoss(Se,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",Se=>{this._handlePointerLoss(Se,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(E=>{E.immediateDoubleClick&&E.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(E){const P=E.data,F=this._pointerId(P);this._pointerState.has(F)||(this._pointerState.set(F,{downButton:P.native.button,immediateDoubleClick:null}),this.startCapturingPointer(P.native))}_handlePointerLoss(E,P){const F=E.data,ne=this._pointerId(F),_e=this._pointerState.get(ne);if(_e&&"pointer-up"===P&&_e.downButton===F.native.button){const Se=_e.immediateDoubleClick;if(Se){Se.timeoutHandle.remove();const je="touch"===E.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;su(Se,E.data)>je?this._startImmediateDoubleClick(E,_e):(this._immediateDoubleClick.emit(E.data,void 0,Se.modifiers),this._removeState(F))}else this._startImmediateDoubleClick(E,_e)}}_startImmediateDoubleClick(E,P){P.immediateDoubleClick={x:E.data.x,y:E.data.y,modifiers:E.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(E.data),"touch"===E.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}}_pointerId(E){const P=E.native;return"mouse"===P.pointerType?`${P.pointerId}:${P.button}`:`${P.pointerType}`}_removeState(E){const P=this._pointerId(E);this._pointerState.delete(P),this.stopCapturingPointer(E.native),this.refreshHasPendingInputs()}}class Xp extends sn.a{constructor(E=300,P=1.5,F=6,ne=6,_e=500,Se=Aa.m){super(!1),this.maximumClickDelay=E,this.movementUntilMouseDrag=P,this.movementUntilPenDrag=F,this.movementUntilTouchDrag=ne,this.holdDelay=_e,this._clock=Se,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",je=>{this._handlePointerLoss(je,"pointer-up")}),this.registerIncoming("pointer-capture-lost",je=>{this._handlePointerLoss(je,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",je=>{this._handlePointerLoss(je,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(E=>{null!=E.holdTimeout&&(E.holdTimeout.remove(),E.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(E){const P=E.data,F=P.native.pointerId;let ne=null;0===this._pointerState.size&&(ne=this._clock.setTimeout(()=>{const Se=this._pointerState.get(F);Se&&(Se.isDragging||(this._pointerHold.emit(Se.previousEvent,void 0,E.modifiers),Se.holdEmitted=!0),Se.holdTimeout=null)},this.holdDelay)),this._pointerState.set(F,{startEvent:P,previousEvent:P,startTimestamp:E.timestamp,isDragging:!1,downButton:P.native.button,holdTimeout:ne,modifiers:new Set}),this.startCapturingPointer(P.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(E)}_createPointerDragData(E,P,F){return{action:E,startEvent:P.startEvent,previousEvent:P.previousEvent,currentEvent:F}}_handlePointerMove(E){const P=E.data,ne=this._pointerState.get(P.native.pointerId);ne&&(ne.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",ne,P),void 0,ne.modifiers):function zp(v,E){const P=E.x-v.x,F=E.y-v.y;return Math.sqrt(P*P+F*F)}(P,ne.startEvent)>this._getDragThreshold(P.native.pointerType)&&this._startDragging(E),ne.previousEvent=P)}_getDragThreshold(E){switch(E){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(E){const P=E.data,F=P.native.pointerId;this._pointerState.forEach(ne=>{null!=ne.holdTimeout&&(ne.holdTimeout.remove(),ne.holdTimeout=null),ne.isDragging||(ne.modifiers=E.modifiers,ne.isDragging=!0,F===ne.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",ne,P)):this._pointerDrag.emit(this._createPointerDragData("start",ne,ne.previousEvent),E.timestamp))})}_handlePointerLoss(E,P){const F=E.data,ne=F.native.pointerId,_e=this._pointerState.get(ne);_e&&(null!=_e.holdTimeout&&(_e.holdTimeout.remove(),_e.holdTimeout=null),_e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",_e,"pointer-up"===P?F:_e.previousEvent),void 0,_e.modifiers):"pointer-up"===P&&_e.downButton===F.native.button&&E.timestamp-_e.startTimestamp<=this.maximumClickDelay&&!_e.holdEmitted&&this._immediateClick.emit(F),this._pointerState.delete(ne),this.stopCapturingPointer(F.native),0===this._pointerState.size&&this._moveHandle.pause())}}const ja_pan={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},ja_zoom={zoomIn:["=","+"],zoomOut:["-","_"]},ja_rotate={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};let Ua=class extends be.Z{constructor(){super(...arguments),this._handles=new se.Z}initialize(){this._handles.add([(0,xe.PA)(this.view,"ready",()=>this._disconnect()),(0,xe.gx)(this.view,"ready",()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const E=new Vp(this.view.surface,this.view.input),P=[new Qp,new Xp,new Hp,new Jp(this.view.navigation),new kp],F=new Pn.$({eventSource:E,recognizers:P});F.installHandlers("prevent-context-menu",[new $p],Pn.f.INTERNAL),F.installHandlers("navigation",[new Rp(this.view),new Pp(this.view),new Lp(this.view),new qc(this.view),new qc(this.view,["Ctrl"]),new vp(this.view,"primary"),new Ip(this.view,ja_pan),new xp(this.view,ja_zoom),new wp(this.view,ja_rotate),new Ep(this.view,"secondary"),new gp(this.view,"touch")],Pn.f.INTERNAL),this.view.viewEvents.connect(F),this._source=E,this._inputManager=F,(0,xe.S1)(this.view.navigation,"browserTouchPanEnabled",ne=>{this._source.browserTouchPanningEnabled=!ne})}get test(){return{inputManager:this._inputManager}}};(0,C._)([(0,M.Cb)()],Ua.prototype,"view",void 0),Ua=(0,C._)([(0,ee.j)("esri.views.2d.input.MapViewInputManager")],Ua);const qp=Ua;var e0=p(56656);let t0=0,_i=class extends be.Z{constructor(){super(...arguments),this.color=new ro.Z([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return t0++}};(0,C._)([(0,M.Cb)({readOnly:!0})],_i.prototype,"version",null),(0,C._)([(0,M.Cb)({type:ro.Z})],_i.prototype,"color",void 0),(0,C._)([(0,M.Cb)({type:ro.Z})],_i.prototype,"haloColor",void 0),(0,C._)([(0,M.Cb)()],_i.prototype,"haloOpacity",void 0),(0,C._)([(0,M.Cb)()],_i.prototype,"fillOpacity",void 0),_i=(0,C._)([(0,ee.j)("esri.views.2d.support.HighlightOptions")],_i);const id=_i;var od=p(33412),ad=p(18605),ld=p(31637),ud=p(57596);let Bi=class extends be.Z{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(v){const E=this._get("node");v!==E&&(v&&v.classList.add("esri-component"),E&&E.classList.remove("esri-component"),this._set("node",v))}castNode(v){return v?"string"==typeof v||function i0(v){return v&&"nodeType"in v}(v)?(this._set("widget",null),(0,Ee.L7)(v)):(function o0(v){return v&&"function"==typeof v.render}(v)&&!v.domNode&&(v.domNode=document.createElement("div")),this._set("widget",v),v.domNode):(this._set("widget",null),null)}};(0,C._)([(0,M.Cb)({dependsOn:[]})],Bi.prototype,"id",null),(0,C._)([(0,M.Cb)()],Bi.prototype,"node",null),(0,C._)([(0,Y.p)("node")],Bi.prototype,"castNode",null),(0,C._)([(0,M.Cb)({readOnly:!0})],Bi.prototype,"widget",void 0),Bi=(0,C._)([(0,ee.j)("esri.views.ui.Component")],Bi);const Ba=Bi,a0={left:0,top:0,bottom:0,right:0},dd={bottom:30,top:15,right:15,left:15},iu="manual",hn_corner="esri-ui-corner";function ou(v){const E=v,P="object"==typeof E&&null!==E&&Object.getPrototypeOf(E);return null!==P&&P!==Object.prototype||!("component"in E||"index"in E||"position"in E)?null:v}function au(v,{top:E,bottom:P,left:F,right:ne}){v.style.top=E,v.style.bottom=P,v.style.left=F,v.style.right=ne}let ti=class extends qi.Z.EventedAccessor{constructor(v){super(v),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new se.Z,this.view=null,this._applyViewPadding=()=>{const E=this.container;E&&au(E,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const E=this._innerContainer;E&&au(E,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([(0,T.YP)(()=>{var v;return[null==(v=this.view)?void 0:v.padding,this.container]},this._applyViewPadding,T.nn),(0,T.YP)(()=>this.padding,this._applyUIPadding,T.nn)])}destroy(){this.container=null;for(const v of this._components)v.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(v){const E=this._get("container");v!==E&&(v&&(v.classList.add("esri-ui"),v.classList.add((0,ia.rk)()),this._attachContainers(v)),E&&(E.classList.remove("esri-ui"),au(E,{top:"",bottom:"",left:"",right:""}),(0,Ee.cS)(E)),this._set("container",v))}get height(){const v=this.get("view.height")||0;if(0===v)return v;const E=this._getViewPadding();return Math.max(v-(E.top+E.bottom),0)}get padding(){return this._get("padding")}set padding(v){v?this._override("padding",v):this._clearOverride("padding")}castPadding(v){return"number"==typeof v?{bottom:v,top:v,right:v,left:v}:_t(_t({},dd),v)}get width(){const v=this.get("view.width")||0;if(0===v)return v;const E=this._getViewPadding();return Math.max(v-(E.left+E.right),0)}add(v,E){let P,F;if(Array.isArray(v))return void v.forEach(_e=>this.add(_e,E));const ne=ou(v);ne&&({index:P,position:E,component:v,key:F}=ne),E&&"object"==typeof E&&({index:P,key:F,position:E}=E),!v||E&&!this._isValidPosition(E)||this._add(v,E,P,F)}remove(v,E){if(!v)return;if(Array.isArray(v))return v.map(F=>this.remove(F,E));const P=this._find(v);if(P){const F=this._componentToKey;if(F.has(v)&&F.get(v)!==E)return;const ne=this._components.indexOf(P);return P.node.parentNode&&P.node.parentNode.removeChild(P.node),this._componentToKey.delete(v),this._components.splice(ne,1)[0]}}empty(v){return Array.isArray(v)?v.map(E=>this.empty(E)).reduce((E,P)=>E.concat(P)):(v=v||iu)===iu?Array.prototype.slice.call(this._manualContainer.children).filter(E=>!E.classList.contains(hn_corner)).map(E=>this.remove(E)):this._isValidPosition(v)?Array.prototype.slice.call(this._cornerNameToContainerLookup[v].children).map(this.remove,this):null}move(v,E){if(Array.isArray(v)&&v.forEach(_e=>this.move(_e,E)),!v)return;let P;const F=ou(v)||ou(E);if(F&&(P=F.index,E=F.position,v=F.component||v),E&&!this._isValidPosition(E))return;const ne=this.remove(v);ne&&this.add(ne,{position:E,index:P})}find(v){if(!v)return null;const E=this._findById(v);return E&&(E.widget||E.node)}getPosition(v){for(const E in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[E].contains(v))return E;return null}_add(v,E,P,F){v instanceof Ba||(v=new Ba({node:v})),this._place({component:v,position:E,index:P}),this._components.push(v),F&&this._componentToKey.set(v,F)}_find(v){return v?v instanceof Ba?this._findByComponent(v):"string"==typeof v?this._findById(v):this._findByNode(v.domNode||v):null}_getViewPadding(){return this.get("view.padding")||a0}_attachContainers(v){v.appendChild(this._innerContainer),v.appendChild(this._manualContainer)}_initContainers(){const v=document.createElement("div");v.classList.add("esri-ui-inner-container"),v.classList.add("esri-ui-corner-container");const E=document.createElement("div");E.classList.add("esri-ui-inner-container"),E.classList.add("esri-ui-manual-container");const P=document.createElement("div");P.classList.add("esri-ui-top-left"),P.classList.add(hn_corner),v.appendChild(P);const F=document.createElement("div");F.classList.add("esri-ui-top-right"),F.classList.add(hn_corner),v.appendChild(F);const ne=document.createElement("div");ne.classList.add("esri-ui-bottom-left"),ne.classList.add(hn_corner),v.appendChild(ne);const _e=document.createElement("div");_e.classList.add("esri-ui-bottom-right"),_e.classList.add(hn_corner),v.appendChild(_e),this._innerContainer=v,this._manualContainer=E;const Se=(0,ts.dZ)();this._cornerNameToContainerLookup={"top-left":P,"top-right":F,"bottom-left":ne,"bottom-right":_e,"top-leading":Se?F:P,"top-trailing":Se?P:F,"bottom-leading":Se?_e:ne,"bottom-trailing":Se?ne:_e},this._positionNameToContainerLookup=_t({manual:E},this._cornerNameToContainerLookup)}_isValidPosition(v){return!!this._positionNameToContainerLookup[v]}_place(v){const E=v.component,F=v.index,ne=this._positionNameToContainerLookup[v.position||iu],_e=F>-1;if(function l0(v){return v&&!v._started&&"function"==typeof v.postMixInProperties&&"function"==typeof v.buildRendering&&"function"==typeof v.postCreate&&"function"==typeof v.startup}(E.widget)&&E.widget.startup(),!_e)return void ne.appendChild(E.node);const Se=Array.prototype.slice.call(ne.children);0!==F?F>=Se.length?ne.appendChild(E.node):(0,Ee.Vt)(E.node,Se[F]):ne.firstChild?(0,Ee.Vt)(E.node,ne.firstChild):ne.appendChild(E.node)}_toPxPosition(v){return{top:this._toPxUnit(v.top),left:this._toPxUnit(v.left),right:this._toPxUnit(v.right),bottom:this._toPxUnit(v.bottom)}}_toPxUnit(v){return 0===v?"0":v+"px"}_findByComponent(v){let E,P=null;return this._components.some(F=>(E=F===v,E&&(P=F),E)),P}_findById(v){let E,P=null;return this._components.some(F=>(E=F.id===v,E&&(P=F),E)),P}_findByNode(v){let E,P=null;return this._components.some(F=>(E=F.node===v,E&&(P=F),E)),P}};(0,C._)([(0,M.Cb)()],ti.prototype,"container",null),(0,C._)([(0,M.Cb)()],ti.prototype,"height",null),(0,C._)([(0,M.Cb)({value:dd})],ti.prototype,"padding",null),(0,C._)([(0,Y.p)("padding")],ti.prototype,"castPadding",null),(0,C._)([(0,M.Cb)()],ti.prototype,"view",void 0),(0,C._)([(0,M.Cb)()],ti.prototype,"width",null),ti=(0,C._)([(0,ee.j)("esri.views.ui.UI")],ti);const u0=ti;var c0=p(59213);function hd(v,E){return v&&"copyright"in v&&(!E||"function"==typeof v.originOf&&"user"===v.originOf("copyright"))}function Fa(v,E,P){!P||!E||v.find(F=>F.layerView===E&&F.text===P)||v.push({text:P,layerView:E})}const gi=[];let uo=class extends er.r{constructor(v){super(v),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new D.Z,this.view=null,this._allLayerViewsChange=E=>{this.handles.remove("suspension");const P=this.get("view.allLayerViews");P&&this.handles.add(P.map(F=>F.watch(["suspended","attributionVisible"],this._updateAttributionItems)),"suspension"),E&&E.removed&&E.removed.forEach(F=>{this._pendingAttributions.delete(F),this._fetchedAttributionData.delete(F)}),this._updateAttributionItems()},this._updateAttributionItems=()=>{const E=this.get("view.allLayerViews");gi.length=0,E?(E.forEach(P=>{if(P.suspended||!P.get("layer.attributionVisible"))return;const F=P.layer;if(hd(F,"user"))return void Fa(gi,P,F.copyright);if(F.hasAttributionData){if(this._fetchedAttributionData.has(P)){const _e=this._fetchedAttributionData.get(P);return void(_e?Fa(gi,P,this._getDynamicAttribution(_e,this.view,F)):hd(F)&&Fa(gi,P,F.copyright))}return void this._fetchAttributionData(P)}const ne=F.get("portalItem.accessInformation");Fa(gi,P,ne||F.copyright)}),function d0(v,E){return v.length!==E.length||v.some((P,F)=>P.text!==E[F].text)}(this.items,gi)&&(this.items.removeAll(),this.items.addMany(gi)),gi.length=0,this.notifyChange("state")):this._clear()},this.handles.add([(0,xe.on)(this,"view.allLayerViews","change",this._allLayerViewsChange,this._allLayerViewsChange,this._clear),(0,xe.Z4)(this,"view.stationary",()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_fetchAttributionData(v){var E=this;return(0,j.Z)(function*(){if(E._pendingAttributions.has(v))return;E._pendingAttributions.add(v);const P=yield(0,c0.q6)(v.layer.fetchAttributionData());if(E._pendingAttributions.has(v)){const F=P.ok?E._createContributionIndex(P.value,function h0(v){return"bing-maps"===v.type}(v.layer)):null;E._pendingAttributions.delete(v),E._fetchedAttributionData.set(v,F)}E._updateAttributionItems()})()}_createContributionIndex(v,E){const P=v.contributors,F={};if(!P)return F;for(let ne=0;ne<P.length;ne++){const _e=P[ne],Se=_e.coverageAreas;if(!Se)return;for(const je of Se){const Ye=je.bbox,yt=je.zoomMin-(E&&je.zoomMin?1:0),Pt=je.zoomMax-(E&&je.zoomMax?1:0),tr={extent:(0,ge.$)({xmin:Ye[1],ymin:Ye[0],xmax:Ye[3],ymax:Ye[2],spatialReference:Ri.Z.WGS84}),attribution:_e.attribution||"",score:null!=je.score?je.score:100,id:ne};for(let rr=yt;rr<=Pt;rr++)F[rr]=F[rr]||[],F[rr].push(tr)}}return F.maxKey=Math.max.apply(null,Object.keys(F)),F}_getDynamicAttribution(v,E,P){const{extent:F,scale:ne}=E;let _e=P.tileInfo.scaleToZoom(ne);if(_e=Math.min(v.maxKey,Math.round(_e)),!F||null==_e||_e<=-1)return"";const Se=v[_e],je=(0,ge.iV)(F.center.clone().normalize(),E.spatialReference),Ye={};return Se?Se.filter(yt=>{const Pt=!Ye[yt.id]&&je&&(0,zl.aV)(yt.extent,je);return Pt&&(Ye[yt.id]=!0),Pt}).sort((yt,Pt)=>Pt.score-yt.score||yt.objectId-Pt.objectId).map(yt=>yt.attribution).join(", "):""}};(0,C._)([(0,M.Cb)({readOnly:!0,type:D.Z})],uo.prototype,"items",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],uo.prototype,"state",null),(0,C._)([(0,M.Cb)()],uo.prototype,"view",void 0),uo=(0,C._)([(0,ee.j)("esri.widgets.Attribution.AttributionViewModel")],uo);const pd=uo;let pn=class extends me.Z{constructor(v,E){super(v,E),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this.iconClass="esri-icon-description",this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new pd}initialize(){this.own((0,xe.on)(this,"viewModel.items","change",()=>this.scheduleRender()))}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((v,E)=>(-1===v.indexOf(E.text)&&v.push(E.text),v),[]).join(this.itemDelimiter)}render(){return(0,Nt.u)("div",{bind:this,class:this.classes("esri-attribution esri-widget",{"esri-attribution--open":this._isOpen}),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return(0,Nt.u)("div",{class:"esri-attribution__powered-by"},"Powered by"," ",(0,Nt.u)("a",{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const v=this._isOpen,E=this._isInteractive,P=E?0:-1,{attributionText:F}=this,ne=E?"button":void 0;return(0,Nt.u)("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",{"esri-attribution__sources--open":v,"esri-interactive":E}),innerHTML:F,role:ne,tabIndex:P})}_afterSourcesNodeCreate(v){this._prevSourceNodeHeight=v.clientWidth}_afterSourcesNodeUpdate(v){let E=!1;const{clientHeight:P,clientWidth:F,scrollWidth:ne}=v,_e=ne>=F,Se=this._attributionTextOverflowed!==_e;if(this._attributionTextOverflowed=_e,Se&&(E=!0),this._isOpen){const je=P<this._prevSourceNodeHeight;this._prevSourceNodeHeight=P,je&&(this._isOpen=!1,E=!0)}E&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};(0,C._)([(0,M.Cb)()],pn.prototype,"_isOpen",void 0),(0,C._)([(0,M.Cb)()],pn.prototype,"_isInteractive",null),(0,C._)([(0,M.Cb)()],pn.prototype,"_attributionTextOverflowed",void 0),(0,C._)([(0,M.Cb)()],pn.prototype,"_prevSourceNodeHeight",void 0),(0,C._)([(0,M.Cb)({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],pn.prototype,"attributionText",null),(0,C._)([(0,M.Cb)()],pn.prototype,"iconClass",void 0),(0,C._)([(0,M.Cb)()],pn.prototype,"itemDelimiter",void 0),(0,C._)([(0,M.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],pn.prototype,"label",void 0),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/widgets/Attribution/t9n/Attribution")],pn.prototype,"messages",void 0),(0,C._)([(0,Be.B)("viewModel.view")],pn.prototype,"view",void 0),(0,C._)([(0,M.Cb)({type:pd})],pn.prototype,"viewModel",void 0),(0,C._)([(0,Sn.h)()],pn.prototype,"_toggleState",null),pn=(0,C._)([(0,ee.j)("esri.widgets.Attribution")],pn);const p0=pn;let Fi=class extends(Nu(be.Z)){constructor(v){super(v),this._handles=new se.Z,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add((0,xe.S1)(this,"view",this._updateRotationWatcher))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get canShowNorth(){const v=this.get("view.spatialReference");return!(!v||!v.isWebMercator&&!v.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const v={};"2d"===this.view.type?v.rotation=0:v.heading=0,this.callGoTo({target:v})}_updateForRotation(v){null!=v&&(this.orientation={z:v})}_updateForCamera(v){v&&(this.orientation={x:0,y:0,z:-v.heading})}_updateRotationWatcher(v){this._handles.removeAll(),v&&this._handles.add("2d"===v.type?(0,xe.S1)(this,"view.rotation",this._updateForRotation):(0,xe.S1)(this,"view.camera",this._updateForCamera))}};(0,C._)([(0,M.Cb)({readOnly:!0})],Fi.prototype,"canShowNorth",null),(0,C._)([(0,M.Cb)()],Fi.prototype,"orientation",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Fi.prototype,"state",null),(0,C._)([(0,M.Cb)()],Fi.prototype,"view",void 0),Fi=(0,C._)([(0,ee.j)("esri.widgets.CompassViewModel")],Fi);const fd=Fi;let Nn=class extends me.Z{constructor(v,E){super(v,E),this.goToOverride=null,this.iconClass="esri-icon-locate-circled",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new fd}reset(){return this.viewModel.reset()}render(){const{orientation:v,state:E}=this.viewModel,P="disabled"===E,F="compass"==("rotation"===E?"rotation":"compass"),ne=P?-1:0,_e={"esri-disabled":P,"esri-interactive":!P},Se={"esri-icon-compass":F,"esri-icon-dial":!F},{messages:je}=this;return(0,Nt.u)("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",_e),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:ne,"aria-label":je.reset,title:je.reset},(0,Nt.u)("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",Se),styles:this._toRotationTransform(v)}),(0,Nt.u)("span",{class:"esri-icon-font-fallback-text"},je.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(v){return{transform:`rotateZ(${v.z}deg)`}}};(0,C._)([(0,Be.B)("viewModel.goToOverride")],Nn.prototype,"goToOverride",void 0),(0,C._)([(0,M.Cb)()],Nn.prototype,"iconClass",void 0),(0,C._)([(0,M.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Nn.prototype,"label",void 0),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/widgets/Compass/t9n/Compass")],Nn.prototype,"messages",void 0),(0,C._)([(0,Be.B)("viewModel.view")],Nn.prototype,"view",void 0),(0,C._)([(0,M.Cb)({type:fd})],Nn.prototype,"viewModel",void 0),(0,C._)([(0,Sn.h)()],Nn.prototype,"_reset",null),Nn=(0,C._)([(0,ee.j)("esri.widgets.Compass")],Nn);const m0=Nn;let co=class extends be.Z{constructor(v){super(v),this._handles=new se.Z,this.navigationMode="pan",this.view=null}initialize(){this._handles.add((0,xe.gx)(this,"view.inputManager",this._setNavigationMode.bind(this)))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"}};(0,C._)([(0,M.Cb)({readOnly:!0})],co.prototype,"state",null),(0,C._)([(0,M.Cb)()],co.prototype,"navigationMode",void 0),(0,C._)([(0,M.Cb)()],co.prototype,"view",void 0),co=(0,C._)([(0,ee.j)("esri.widgets.NavigationToggleViewModel")],co);const md=co,wn_button="esri-navigation-toggle__button esri-widget--button";let Zn=class extends me.Z{constructor(v,E){super(v,E),this.iconClass="esri-icon-pan2",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new md}set layout(v){"horizontal"!==v&&(v="vertical"),this._set("layout",v)}toggle(){return this.viewModel.toggle()}render(){const v="disabled"===this.get("viewModel.state"),E="pan"===this.get("viewModel.navigationMode"),F={"esri-navigation-toggle__button--active":E},ne={"esri-navigation-toggle__button--active":!E},_e=v?-1:0,Se=this.messages.toggle;return(0,Nt.u)("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",{"esri-disabled":v,"esri-navigation-toggle--horizontal":"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:_e,"aria-label":Se,title:Se},(0,Nt.u)("div",{class:this.classes(wn_button,"esri-navigation-toggle__button--pan",F)},(0,Nt.u)("span",{class:"esri-icon-pan"})),(0,Nt.u)("div",{class:this.classes(wn_button,"esri-navigation-toggle__button--rotate",ne)},(0,Nt.u)("span",{class:"esri-icon-rotate"})))}_toggle(){this.toggle()}};(0,C._)([(0,M.Cb)()],Zn.prototype,"iconClass",void 0),(0,C._)([(0,M.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Zn.prototype,"label",void 0),(0,C._)([(0,M.Cb)({value:"vertical"})],Zn.prototype,"layout",null),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Zn.prototype,"messages",void 0),(0,C._)([(0,Be.B)("viewModel.view")],Zn.prototype,"view",void 0),(0,C._)([(0,M.Cb)({type:md})],Zn.prototype,"viewModel",void 0),(0,C._)([(0,Sn.h)()],Zn.prototype,"_toggle",null),Zn=(0,C._)([(0,ee.j)("esri.widgets.NavigationToggle")],Zn);const y0=Zn;let bi=class extends me.Z{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const v=this.enabled?0:-1,P={[this.iconClass]:!!this.iconClass};return(0,Nt.u)("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{"esri-disabled":!this.enabled,"esri-interactive":this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:v,title:this.title},(0,Nt.u)("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",P)}),(0,Nt.u)("span",{class:"esri-icon-font-fallback-text"},this.title))}_triggerAction(){this.action.call(this)}};(0,C._)([(0,M.Cb)()],bi.prototype,"action",void 0),(0,C._)([(0,M.Cb)()],bi.prototype,"enabled",void 0),(0,C._)([(0,M.Cb)()],bi.prototype,"iconClass",void 0),(0,C._)([(0,M.Cb)()],bi.prototype,"title",void 0),(0,C._)([(0,Sn.h)()],bi.prototype,"_triggerAction",null),bi=(0,C._)([(0,ee.j)("esri.widgets.IconButton")],bi);const yd=bi;let ho=class extends be.Z{get canZoomIn(){if(!this.get("view.ready"))return!1;const v=this.get("view.animation.target.scale")||this.get("view.scale"),E=this.get("view.constraints.effectiveMaxScale");return 0===E||v>E}get canZoomOut(){if(!this.get("view.ready"))return!1;const v=this.get("view.animation.target.scale")||this.get("view.scale"),E=this.get("view.constraints.effectiveMinScale");return 0===E||v<E}};(0,C._)([(0,M.Cb)({readOnly:!0})],ho.prototype,"canZoomIn",null),(0,C._)([(0,M.Cb)({readOnly:!0})],ho.prototype,"canZoomOut",null),(0,C._)([(0,M.Cb)()],ho.prototype,"view",void 0),ho=(0,C._)([(0,ee.j)("esri.widgets.Zoom.ZoomConditions2D")],ho);const _0=ho;let po=class extends be.Z{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};(0,C._)([(0,M.Cb)({readOnly:!0})],po.prototype,"canZoomIn",null),(0,C._)([(0,M.Cb)({readOnly:!0})],po.prototype,"canZoomOut",null),(0,C._)([(0,M.Cb)()],po.prototype,"view",void 0),po=(0,C._)([(0,ee.j)("esri.widgets.Zoom.ZoomConditions3D")],po);const g0=po;let Mi=class extends be.Z{constructor(v){super(v),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(v){v?"2d"===v.type?this._zoomConditions=new _0({view:v}):"3d"===v.type&&(this._zoomConditions=new g0({view:v})):this._zoomConditions=null,this._set("view",v)}zoomIn(){if(!this.canZoomIn)return;const v=this.view;"2d"===v.type?v.mapViewNavigation.zoomIn():(0,w.R8)(v.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const v=this.view;"2d"===v.type?v.mapViewNavigation.zoomOut():(0,w.R8)(v.goTo({zoomFactor:.5}))}};(0,C._)([(0,M.Cb)()],Mi.prototype,"_zoomConditions",void 0),(0,C._)([(0,M.Cb)({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],Mi.prototype,"canZoomIn",void 0),(0,C._)([(0,M.Cb)({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],Mi.prototype,"canZoomOut",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],Mi.prototype,"state",null),(0,C._)([(0,M.Cb)()],Mi.prototype,"view",null),Mi=(0,C._)([(0,ee.j)("esri.widgets.Zoom.ZoomViewModel")],Mi);const _d=Mi;let ri=class extends me.Z{constructor(v,E){super(v,E),this.iconClass="esri-icon-zoom-in-magnifying-glass",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new _d}initialize(){this._zoomInButton=new yd({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"}),this._zoomOutButton=new yd({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(v){"horizontal"!==v&&(v="vertical"),this._set("layout",v)}render(){const v=this.viewModel,E={"esri-zoom--horizontal":"horizontal"===this.layout};return this._zoomInButton.enabled="ready"===v.state&&v.canZoomIn,this._zoomOutButton.enabled="ready"===v.state&&v.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,(0,Nt.u)("div",{class:this.classes("esri-zoom esri-widget",E)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};(0,C._)([(0,M.Cb)()],ri.prototype,"iconClass",void 0),(0,C._)([(0,M.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ri.prototype,"label",void 0),(0,C._)([(0,M.Cb)({value:"vertical"})],ri.prototype,"layout",null),(0,C._)([(0,M.Cb)(),(0,$r.H)("esri/widgets/Zoom/t9n/Zoom")],ri.prototype,"messages",void 0),(0,C._)([(0,Be.B)("viewModel.view")],ri.prototype,"view",void 0),(0,C._)([(0,M.Cb)({type:_d})],ri.prototype,"viewModel",void 0),ri=(0,C._)([(0,ee.j)("esri.widgets.Zoom")],ri);const v0=ri,gd="esri.views.ui.DefaultUI";X.Z.getLogger(gd);let Wa=class extends u0{constructor(v){super(v),this._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"},this.components=[]}initialize(){this._handles.add([(0,T.YP)(()=>this.components,this._componentsWatcher.bind(this),T.nn),(0,T.YP)(()=>this.view,this._updateViewAwareWidgets.bind(this),T.nn)])}_add(v,E,P,F){if("string"==typeof v&&this._defaultPositionLookup[v]){if(this._find(v))return;v=this._createComponent(v)}super._add(v,E,P,F)}_removeComponents(v){v.forEach(E=>{const P=this._find(E);P&&(this.remove(P),P.destroy())})}_updateViewAwareWidgets(v){this.components.forEach(E=>{const P=this._find(E),F=P&&P.widget;(function E0(v){return v&&void 0!==v.view})(F)&&(F.view=v)})}_componentsWatcher(v,E){this._removeComponents(E),this._addComponents(v),this._adjustPadding(v)}_adjustPadding(v){if(-1===v.indexOf("attribution")&&!this._isOverridden("padding")){const{top:E}=this.padding;this.padding=E}}_addComponents(v){this.initialized&&v.forEach(E=>this.add(this._createComponent(E),this._defaultPositionLookup[E]))}_createComponent(v){const E=this._createWidget(v);if(E)return new Ba({id:v,node:E})}_createWidget(v){return"attribution"===v?this._createAttribution():"compass"===v?this._createCompass():"navigation-toggle"===v?this._createNavigationToggle():"zoom"===v?this._createZoom():void 0}_createAttribution(){return new p0({view:this.view})}_createCompass(){return new m0({view:this.view})}_createNavigationToggle(){return new y0({view:this.view})}_createZoom(){return new v0({view:this.view})}};(0,C._)([(0,M.Cb)()],Wa.prototype,"components",void 0),Wa=(0,C._)([(0,ee.j)(gd)],Wa);const b0=Wa;let Na=class extends b0{constructor(v){super(v),this.components=["attribution","zoom"]}};(0,C._)([(0,M.Cb)()],Na.prototype,"components",void 0),Na=(0,C._)([(0,ee.j)("esri.views.ui.2d.DefaultUI2D")],Na);const vd=Na;var lu;let Za=lu=class extends Ts.wq{constructor(v){super(v),this.color=new ro.Z([0,0,0,1])}clone(){return new lu((0,yn.d9)({color:this.color}))}};(0,C._)([(0,M.Cb)({type:ro.Z,json:{write:!0}})],Za.prototype,"color",void 0),Za=lu=(0,C._)([(0,ee.j)("esri.webmap.background.ColorBackground")],Za);const Ka=Za,si=X.Z.getLogger("esri.views.MapView");let Ed,bd,Md,Cd,Od,Pd;function uu(){return uu=(0,j.Z)(function*(){const[,{GraphicsView2D:v,GraphicContainer:E,LabelManager:P,MapViewNavigation:F,MagnifierView2D:ne,Stage:_e}]=yield Promise.all([Promise.all([p.e(5086),p.e(5314),p.e(5506),p.e(8592),p.e(4376)]).then(p.bind(p,34376)),Promise.all([p.e(5086),p.e(7692),p.e(3755),p.e(5314),p.e(5024),p.e(5506),p.e(4821),p.e(4589),p.e(3751),p.e(5909),p.e(4175),p.e(2408),p.e(4522),p.e(1619),p.e(9091),p.e(4056),p.e(8773),p.e(8592),p.e(2339)]).then(p.bind(p,2339))]);bd=v,Md=E,Cd=P,Od=F,Pd=ne,Ed=_e}),uu.apply(this,arguments)}let zr=class extends(te(_h(gh(tp)))){constructor(v){super(v),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new I.Z({getCollections:()=>{var E,P;return[null==(E=this.basemapView)?void 0:E.baseLayerViews,this.layerViews,null==(P=this.basemapView)?void 0:P.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new np(this),this._pePromise=null,this.floors=new D.Z,this.highlightOptions=new id,this.inputManager=new qp({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new od.T,this.type="2d",this.ui=new vd,this.constraints=new Jc,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([(0,T.YP)(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(160)},T.Z_),this.on("resize",E=>this._resizeHandler(E)),(0,T.YP)(()=>{var E;return null==(E=this.animationManager)?void 0:E.animation},E=>{this.animation=E})]),(0,N.j2)()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new e0.Z(this.featuresTilingScheme)}get initialExtentRequired(){var v;const{scale:E,constraints:P,center:F,viewpoint:ne,extent:_e}=this;let Se=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&null!=(v=this.map.initialViewProperties)&&v.viewpoint||_e||(null!=P&&P.effectiveLODs||(Se=-1),F&&(0!==E||-1!==Se)||ne&&(0,V.pC)(ne.targetGeometry)&&("extent"===ne.targetGeometry.type||ne.scale)))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!(0,ce.kR)()||(this._pePromise||(this._pePromise=(0,ce.zD)().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const v=this._getDefaultViewpoint();if(!v)return!1;const E=this.spatialReference,P=(0,V.Wg)(v.targetGeometry);return!!(0,ce.Up)(P.spatialReference,E)||this._projectionEngineLoaded}set animation(v){const E=this._get("animation");if(v===E)return;if(E&&E.stop(),!v||v.isFulfilled())return void this._set("animation",null);this._set("animation",v),this.frameTask.animationInProgress=!0;const P=()=>{v===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};v.when(P,P)}get background(){return this.get("map.initialViewProperties.background")||null}set background(v){void 0===v?this._clearOverride("background"):this._override("background",v)}get center(){if(!this.ready)return this._get("center");const{center:v,spatialReference:E}=this.state.paddedViewState;return new oe.Z({x:v[0],y:v[1],spatialReference:E})}set center(v){if(null==v)return;if(!this.ready)return this._set("center",v),void this.notifyChange("initialExtentRequired");let E;try{E=this._project(v,this.spatialReference)}catch(F){return void si.error(new W.Z("mapview:invalid-center","could not project the value in the view's spatial reference",{input:v,error:F}))}const P=this.viewpoint;(0,Us.o2)(P,P,E),this.viewpoint=P}set constraints(v){const E=this._get("constraints");E&&(this.handles.remove("map-view-constraints"),E.destroy()),this._set("constraints",v),v&&(v.view=this,this.ready&&(this.state.viewpoint=v.fit(this.state.paddedViewState.viewpoint)),this.handles.add((0,T.YP)(()=>v.version,()=>{this.ready&&this.state&&(this.state.viewpoint=v.fit(this.state.paddedViewState.viewpoint))},T.Z_),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(v){if(null==v)return;if(!v.width||!v.height)return void si.error(new W.Z("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",v),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let E;try{E=this._project(v,this.spatialReference)}catch(F){return void si.error(new W.Z("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:F}))}const P=this.viewpoint;(0,Us.qf)(P,P,E,this.size,{constraints:this.constraints}),this.viewpoint=P}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(v){this.ready?(this.state.padding=v,this._set("padding",this.state.padding)):this._set("padding",v)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(v){if(isNaN(v))return;if(!this.ready)return void this._set("rotation",v);const E=this.viewpoint;(0,Us.YQ)(E,E,v),this.viewpoint=E}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(v){if(!v||isNaN(v))return;if(!this.ready){this._set("scale",v),this._set("zoom",-1);const P=this._get("extent");return P&&(this._set("extent",null),this._set("center",P.center)),void this.notifyChange("initialExtentRequired")}const E=this.viewpoint;(0,Us.Hy)(E,E,v),this.viewpoint=E}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some(v=>!v.destroyed&&!("layerViews"in v)&&!0===v.updating))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const v=this.state.paddedViewState;return v&&v.viewpoint.clone()}set viewpoint(v){if(null==v)return;if(!this.ready)return this._set("viewpoint",v),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let E,P;try{E=this._project(v,this.spatialReference),!v.scale||isNaN(v.scale)?P=new W.Z("mapview:invalid-viewpoint",`invalid scale value of ${v.scale}`):(0,V.Wi)(v.targetGeometry)&&(P=new W.Z("mapview:invalid-viewpoint","geometry not defined"))}catch(ne){P=new W.Z("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:ne})}if(P)return void si.error(P);this._scaleBeforeChangingSpatialReference=null;const F=new L.Z({targetGeometry:new oe.Z,scale:0,rotation:0});(0,Us.JG)(F,E),this.constraints.constrain(F,this.state.paddedViewState.viewpoint),this.state.viewpoint=F,this.frameTask.requestFrame(),this._set("viewpoint",F)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(v){if(null==v)return;if(!this.ready){this._set("zoom",v),this._set("scale",0);const P=this._get("extent");return P&&(this._set("extent",null),this._set("center",P.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const E=this.viewpoint;(0,Us.Hy)(E,E,this.constraints.zoomToScale(v)),this.viewpoint=E,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(v,E){if(v)return this.animation&&(this.animation=null),this._createAnimation(),(0,T.N1)(()=>this.ready,E).then(()=>{const P=_t({animate:!0},E),F=(0,Us.Ue)(v,this);return this.animation.update(F),this._gotoTask={},P.animate?this._gotoAnimated(F,P):this._gotoImmediate(F,P)});si.error("#goTo()","target cannot be null or undefined")}hitTest(v,E){var P=this;return(0,j.Z)(function*(){const F=xc(v)?wc(P,v):v;if(!P.ready||isNaN(F.x)||isNaN(F.y))return{screenPoint:F,results:[]};let ne=new Set,_e=!1,Se=null,je=null;null!=E&&E.include?Dd(E.include,Td(P,jt=>ne.add(jt),jt=>{Se||(Se=new Set),Se.add(jt)},jt=>ne.add(jt),()=>_e=!0)):(_e=!0,ne=new Set(P.allLayerViews)),null!=E&&E.exclude&&Dd(E.exclude,Td(P,jt=>ne.delete(jt),jt=>{je||(je=new Set),je.add(jt)}));const Ye=P.allLayerViews.filter(jt=>!jt.suspended&&ne.has(jt)).reverse(),yt=P.toMap(F);let Pt=(yield Promise.all([_e?P.graphicsView.hitTest(yt):null,...Ye.map(jt=>jt.hitTest(yt,F))])).filter(V.pC).flat();return Se&&(Pt=Pt.filter(jt=>Se.has(cu(jt)))),je&&(Pt=Pt.filter(jt=>!je.has(cu(jt)))),{screenPoint:F,results:Pt.map(jt=>({mapPoint:yt,graphic:jt}))}})()}takeScreenshot(v){v=v||{};const E=this.supersampleScreenshotsEnabled?Math.min(4,(0,ad.RZ)(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let P;v.layers?(P=[],v.layers.forEach(Se=>{const je=this.allLayerViews.find(Ye=>Ye.layer.id===Se.id);je&&"container"in je&&je.container&&P.push(je.container)})):P=this._stage.children;const{format:F,quality:ne}=(0,ad.LI)(v.format,v.quality),_e=function r0(v,E,P,F,ne,_e,Se,je){let Ye;v.ignorePadding&&(F={left:0,right:0,top:0,bottom:0}),null!=v.width&&null!=v.height?Ye=[v.width,v.height]:null==v.width&&null!=v.height?Ye=[v.height,v.height]:null!=v.width&&null==v.height?Ye=[v.width,v.width]:null==v.width&&null==v.height&&(Ye=null);const yt=P[0]-(F.left+F.right),Pt=P[1]-(F.top+F.bottom);let jt,tr,rr=v.area||{x:0,y:0,width:yt,height:Pt};if(Ye){const Jr=Ye[0]/Ye[1];if(Jr>yt/Pt){const kr=rr.width/Jr;rr={x:rr.x,y:Math.round(rr.y+(rr.height-kr)/2),width:rr.width,height:Math.round(kr)}}else{const kr=rr.height*Jr;rr={x:Math.round(rr.x+(rr.width-kr)/2),y:rr.y,width:Math.round(kr),height:rr.height}}}else Ye=[rr.width,rr.height];return Ye[0]>rr.width?(jt=Math.min(Ye[0]/rr.width,E),tr=Ye[0]/rr.width/jt):(jt=1,tr=Ye[0]/rr.width),{resolutionScale:jt,cropArea:{x:Math.round((rr.x+F.left)*jt),y:Math.round((rr.y+F.top)*jt),width:Math.round(rr.width*jt),height:Math.round(rr.height*jt)},outputScale:tr,format:ne,quality:_e,children:Se,rotation:je}}(v,E,this.size,this.padding,F,ne,P,v.rotation);return this._stage.takeScreenshot(_e)}toMap(v){if(!this.ready)return null;const E=xc(v)?wc(this,v):v,[F,ne]=this.state.toMap([0,0],[E.x,E.y]);return new oe.Z({x:F,y:ne,spatialReference:this.spatialReference})}toScreen(v){if(!this.ready)return null;const E=this._project(v,this.spatialReference),P=[E.x,E.y];return this.state.toScreen(P,P),(0,O.vW)(P[0],P[1])}on(v,E,P,F){return this.inputManager&&this.viewEvents.on(v,E,P,F)||super.on(v,E)}hasEventListener(v){return super.hasEventListener(v)||this.viewEvents.hasHandler(v)}whenLayerView(v){return super.whenLayerView(v)}graphicChanged(v){this.graphicsView&&this.graphicsView.graphicUpdateHandler(v)}whenReady(){return new Promise(v=>{this.ready?v(this):this._resolveWhenReady.push(v)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var v,E,P;return this.map&&"initialViewProperties"in this.map&&(null==(v=this.map)||null==(E=v.initialViewProperties)?void 0:E.spatialReference)||(null==(P=this.defaultsFromMap)?void 0:P.spatialReference)||null}hasLayerViewModule(v){return(v=>(0,V.pC)(zc[v.type]))(v)}importLayerView(v){return(v=>{const E=zc[v.type];if(!(0,V.pC)(E))throw function ip(v){const E=v.declaredClass?v.declaredClass.slice(v.declaredClass.lastIndexOf(".")+1):"Unknown",P=E.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new W.Z(`${P}:view-not-supported`,`${E} is not supported in 2D`)}(v);return E(v)})(v)}pixelSizeAt(){return this.ready?this.state.resolution:(si.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(v){return this.hitTest(v).then(E=>Sr(_t({},E),{mapPoint:this.toMap(v)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let v=function s0(v){const E=function n0(v){const E=(0,ud.Sh)(v);for(;E.length>1;){const P=(0,ld.hc)(E.shift());if(P.available)return P}return(0,ld.hc)(E.shift())}(v);if(!E.available)return new W.Z("webgl:required","WebGL is required but not supported.");if("3d"===v&&E.majorPerformanceCaveat)return new W.Z("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!E.supportsHighPrecisionFragment)return new W.Z("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!E.supportsVertexShaderSamplers)return new W.Z("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(E.type===ud.zO.WEBGL1){if(!E.supportsElementIndexUint)return new W.Z("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!E.supportsStandardDerivatives)return new W.Z("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!E.supportsInstancedArrays)return new W.Z("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}(this.type);return(0,k.Z)("safari")&&(0,k.Z)("safari")<9&&(v=new W.Z("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:(0,k.Z)("safari")})),(0,V.pC)(v)?(si.warn("#validate()",v.message),Promise.reject(v)):function M0(){return uu.apply(this,arguments)}()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new $l),this.animation}_cancellableGoTo(v,E,P){const F=()=>v===this._gotoTask,ne=P.then(()=>{F()&&(this.animation=null)}).catch(Se=>{throw F()&&(this.animation=null,E.done||(E.stop(),this.frameTask.animationInProgress=!1)),Se}),_e=new Promise(Se=>Se(ne));return E.when().catch(()=>{F()&&_e.cancel&&_e.cancel()}),_e}_gotoImmediate(v,E){const P=this._gotoTask,F=this.animation,ne=v.then(_e=>{if((0,w.k_)(E),P!==this._gotoTask)throw new W.Z("view:goto-interrupted","Goto was interrupted");this.viewpoint=F.target=_e,F.finish()});return this._cancellableGoTo(P,F,ne)}_flipStationary(v){return null!==this._stationaryTimer||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const E=performance.now()-this._lastStationaryEventTimestamp;E<160&&(this._stationaryTimer=this._flipStationary(E))},v)),this._stationaryTimer}_getDefaultViewpoint(){var v,E,P,F;const{constraints:ne,initialExtent:_e,map:Se}=this;if(!ne)return null;const je=Se&&"initialViewProperties"in Se&&Se.initialViewProperties,Ye={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};ne.effectiveLODs?-1!==Ye.zoom&&(Ye.scale=ne.zoomToScale(Ye.zoom)):Ye.zoom=-1;let yt=null,Pt=null,jt=0;const tr=Ye.viewpoint&&Ye.viewpoint.rotation,rr=Ye.viewpoint&&Ye.viewpoint.targetGeometry;(0,V.pC)(rr)&&("extent"===rr.type?yt=rr:"point"===rr.type&&(Pt=rr,jt=Ye.viewpoint.scale));const wr=Ye.extent||yt||(null==(v=(0,V.Wg)(null==je||null==(E=je.viewpoint)?void 0:E.targetGeometry))?void 0:v.extent)||_e,Jr=Ye.center||Pt||(null==wr?void 0:wr.center),kr=Ye.scale||jt||(null==je||null==(P=je.viewpoint)?void 0:P.scale)||wr&&(0,Us.EK)(wr,this.size),as=Ye.rotation||tr||(null==je||null==(F=je.viewpoint)?void 0:F.rotation)||0;return Jr&&kr?new L.Z({targetGeometry:Jr,scale:kr,rotation:as}):null}_gotoAnimated(v,E){const P=this._gotoTask,F=this.animation,ne=v.then(_e=>{if((0,w.k_)(E),P!==this._gotoTask)throw new W.Z("view:goto-interrupted","Goto was interrupted");return F.update(_e),this.animationManager.animate(F,this.viewpoint,E),F.when().then(()=>{},()=>{})});return this._cancellableGoTo(P,F,ne)}_project(v,E){var P;const F=v&&v.targetGeometry||v;if(!E)return v;if(!F)return null;if(E.imageCoordinateSystem||null!=(P=F.spatialReference)&&P.imageCoordinateSystem||(0,re.fS)(E,F.spatialReference))return v;const ne=(0,ce.iV)(F,E);if(!ne)throw new W.Z("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:F,spatialReference:E});return function C0(v){return v&&"esri.Viewpoint"===v.declaredClass}(v)?(v.targetGeometry=ne,v):ne}_resizeHandler(v){if(!this.ready)return;const E=this.state;let P=this.state.paddedViewState.viewpoint;const F=this.state.paddedViewState.size.concat();E.size=[v.width,v.height],(0,Us.SI)(P,P,F,this.state.paddedViewState.size,this.resizeAlign),P=this.constraints.constrain(P,null),this.state.viewpoint=P}_startup(){var v;this.timeline.begin("MapView Startup");const E=this._getDefaultViewpoint(),P=E.targetGeometry;try{this._project(E,this.spatialReference)}catch(yt){var F;si.warn(new x.Z("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:P.toJSON(),spatialReference:this.spatialReference,error:yt})),E.targetGeometry=(null==(F=this.defaultsFromMap.extent)?void 0:F.center)||new oe.Z({x:0,y:0,spatialReference:this.spatialReference})}null==(v=this.constraints)||v.fit(E),this._set("state",new yp({padding:this._get("padding"),size:this.size,viewpoint:E})),this.graphics.owner=this;const ne=new Ed(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=ne,this._magnifierView=new Pd,this._magnifierView.magnifier=this.magnifier;const _e=new Cd({view:this});this._set("labelManager",_e);const Se=new sp({view:this});this._set("animationManager",Se);const je=new Od({view:this,animationManager:Se});this._set("mapViewNavigation",je),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),ne.on("post-render",()=>this._set("rendering",ne.renderRequested)),ne.on("will-render",()=>this._set("rendering",ne.renderRequested)),ne.on("webgl-error",yt=>this.fatalError=yt.error),(0,T.YP)(()=>this.stationary,yt=>ne.stationary=yt,T.tX),(0,T.YP)(()=>this.background,yt=>{ne.background=yt,this._magnifierView.background=yt},T.tX),(0,T.YP)(()=>this.magnifier,yt=>this._magnifierView.magnifier=yt,T.tX),(0,T.YP)(()=>this.renderingOptions,yt=>ne.renderingOptions=yt,T.tX),(0,T.YP)(()=>this.highlightOptions,yt=>ne.highlightOptions=yt,T.tX),(0,T.YP)(()=>this.state.id,()=>ne.state=this.state,T.tX)],"map-view"),this._updateStageChildren();const Ye=this._resolveWhenReady;this._resolveWhenReady=[],Ye.forEach(yt=>yt(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[v,E],spatialReference:P,rotation:F,scale:ne}=this.state.paddedViewState,_e=new oe.Z({x:v,y:E,spatialReference:P});this._set("viewpoint",null),this._set("extent",null),this._set("center",_e),this._set("zoom",-1),this._set("rotation",F),this._set("scale",ne),this._set("spatialReference",P),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(E=>{this._stage.addChild(E.container)}),this._stage.addChild(this.graphicsView.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const v=new _p.Z(K.Z.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",v);const E=new bd({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Md(v)});this.frameTask.graphicsView=E,this._set("graphicsView",E)}_destroySpatialReferenceDependentProperties(){const v=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,v.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(v){if(!this.ready)return;this.frameTask.stop();for(const je of this.allLayerViews)je.processDetach();this._destroySpatialReferenceDependentProperties();const E=this.state.paddedViewState.clone();if((0,V.Wi)(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=E.scale;else{const je=E.viewpoint.clone();je.scale=this._scaleBeforeChangingSpatialReference,E.viewpoint=je}const P=E.clone(),[F,ne]=E.center;let _e=null;try{_e=this._project(new oe.Z({x:F,y:ne,spatialReference:E.spatialReference}),v)}catch(je){(0,ce.kR)()||si.warn(new x.Z("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:_e.toJSON(),spatialReference:v,error:je}))}_e||(_e=new oe.Z({x:0,y:0,spatialReference:v}));const Se=(0,Us.o2)(new L.Z({targetGeometry:new oe.Z,scale:0,rotation:0}),E.viewpoint,_e);P.viewpoint=Se;try{const Ye=[E.size[0]/2,E.size[1]/2],yt=[Ye[0]+20,Ye[1]],Pt=E.toMap([0,0],yt),{x:jt,y:tr}=this._project(new oe.Z({x:Pt[0],y:Pt[1],spatialReference:E.spatialReference}),v);Pt[0]=jt,Pt[1]=tr,P.toScreen(Pt,Pt);const rr=(0,Us.dI)(Ye,Pt,yt),wr=Math.hypot(Pt[0]-Ye[0],Pt[1]-Ye[1])/20;!Number.isFinite(wr)||Math.abs(wr)>4?(Se.rotation=0,Se.targetGeometry=new oe.Z({x:0,y:0,spatialReference:v})):(Se.scale*=wr,Se.scale>(0,k.Z)("mapview-srswitch-adjust-rotation-scale-threshold")?Se.rotation=0:Se.rotation+=Number.isFinite(rr)?rr:0)}catch(je){}this._get("constraints").constrain(Se,null),this._get("state").viewpoint=Se,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const je of this.allLayerViews)je.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"animationManager",void 0),(0,C._)([(0,M.Cb)({constructOnly:!0})],zr.prototype,"deactivatedWebGLExtensions",void 0),(0,C._)([(0,M.Cb)({constructOnly:!0})],zr.prototype,"debugWebGLExtensions",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"featuresTilingScheme",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"fullOpacity",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"graphicsTileStore",null),(0,C._)([(0,M.Cb)()],zr.prototype,"graphicsView",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"state",void 0),(0,C._)([(0,M.Cb)()],zr.prototype,"initialExtentRequired",null),(0,C._)([(0,M.Cb)()],zr.prototype,"labelManager",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"resourceManager",null),(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"textureManager",null),(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"mapViewNavigation",void 0),(0,C._)([(0,M.Cb)({constructOnly:!0})],zr.prototype,"renderCanvas",void 0),(0,C._)([(0,M.Cb)()],zr.prototype,"renderingOptions",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"rendering",void 0),(0,C._)([(0,M.Cb)({constructOnly:!0})],zr.prototype,"supersampleScreenshotsEnabled",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"supportsGround",void 0),(0,C._)([(0,M.Cb)()],zr.prototype,"_stationaryTimer",void 0),(0,C._)([(0,M.Cb)()],zr.prototype,"_defaultsFromMapSettings",null),(0,C._)([(0,M.Cb)()],zr.prototype,"_pePromise",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"typeSpecificPreconditionsReady",null),(0,C._)([(0,M.Cb)()],zr.prototype,"animation",null),(0,C._)([(0,M.Cb)({type:Ka})],zr.prototype,"background",null),(0,C._)([(0,M.Cb)({value:null,type:oe.Z,dependsOn:["state.id","ready"]})],zr.prototype,"center",null),(0,C._)([(0,M.Cb)({type:Jc})],zr.prototype,"constraints",null),(0,C._)([(0,M.Cb)({value:null,type:le.Z,dependsOn:["state.id","ready"]})],zr.prototype,"extent",null),(0,C._)([(0,M.Cb)()],zr.prototype,"floors",void 0),(0,C._)([(0,M.Cb)({type:id})],zr.prototype,"highlightOptions",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"inputManager",void 0),(0,C._)([(0,M.Cb)()],zr.prototype,"map",void 0),(0,C._)([(0,M.Cb)({value:{top:0,right:0,bottom:0,left:0},cast:v=>_t({top:0,right:0,bottom:0,left:0},v)})],zr.prototype,"padding",null),(0,C._)([(0,M.Cb)()],zr.prototype,"resizeAlign",void 0),(0,C._)([(0,M.Cb)({readOnly:!0,dependsOn:["state.id"]})],zr.prototype,"resolution",null),(0,C._)([(0,M.Cb)({value:0,type:Number,dependsOn:["state.id","ready"]})],zr.prototype,"rotation",null),(0,C._)([(0,M.Cb)({value:0,type:Number,dependsOn:["state.id","ready"]})],zr.prototype,"scale",null),(0,C._)([(0,M.Cb)({constructOnly:!0})],zr.prototype,"spatialReferenceLocked",void 0),(0,C._)([(0,M.Cb)()],zr.prototype,"stationary",null),(0,C._)([(0,M.Cb)({type:od.T,readOnly:!0})],zr.prototype,"timeline",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"type",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],zr.prototype,"updating",null),(0,C._)([(0,M.Cb)({value:null,type:L.Z,dependsOn:["state.id","ready"]})],zr.prototype,"viewpoint",null),(0,C._)([(0,M.Cb)({value:-1,dependsOn:["state.id"]})],zr.prototype,"zoom",null),(0,C._)([(0,M.Cb)({type:Boolean})],zr.prototype,"navigating",null),(0,C._)([(0,M.Cb)({type:vd})],zr.prototype,"ui",void 0),zr=(0,C._)([(0,ee.j)("esri.views.MapView")],zr);const O0=zr;function cu(v){const E=v.getObjectId();var P,F,ne,_e;return E?`${null!=(P=null!=(F=null==(ne=v.layer)?void 0:ne.uid)?F:null==(_e=v.sourceLayer)?void 0:_e.uid)?P:"MapView"}/${E}`:`"MapView/${v.uid}`}function Td(v,E,P,F,ne){return _e=>{if(_e instanceof $.Z){if(_e.layer===v)null==ne||ne();else{const Se=v.allLayerViews.find(je=>je.layer===_e.layer);Se&&(null==F||F(Se))}P(cu(_e))}else{const Se=v.allLayerViews.find(je=>je.layer===_e);Se&&E(Se)}}}function Dd(v,E){if(v)if((0,Z.TW)(v))for(const P of v)if((0,Z.TW)(P))for(const F of P)E(F);else E(P);else E(v)}var P0=p(24263),Va=p(99959),ni=p(68653),S0=p(52489),T0=p(29338);const D0=X.Z.getLogger("esri.networks.Network");let qs=class extends((0,Va.R)(Wo.Z)){constructor(v){super(v),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null}initialize(){this.when().catch(v=>{var E,P;(0,w.D_)(v)||D0.error("#load()",`Failed to load layer (title: '${null!=(E=this.title)?E:"no title"}', id: '${null!=(P=this.id)?P:"no id"}')`,{error:v})})}get datasetName(){var v;return null==(v=this.dataElement)?void 0:v.name}get owner(){var v;return null==(v=this.dataElement)?void 0:v.userIdentity}get schemaGeneration(){var v;return null==(v=this.dataElement)?void 0:v.schemaGeneration}get parsedUrl(){const v=this.layerUrl;return v?(0,hi.mN)(v):null}get featureServiceUrl(){const v=this.parsedUrl&&(0,Oa.Qc)(this.parsedUrl.path);return(0,V.pC)(v)?v.url.path:null}get networkServiceUrl(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}get layerId(){const v=this.parsedUrl&&(0,Oa.Qc)(this.parsedUrl.path);return(0,V.pC)(v)?v.sublayer:null}load(v){var E=this;return(0,j.Z)(function*(){return E.addResolvingPromise(E._fetchDataElement(E.featureServiceUrl,E.layerId.toString(),v)),E.addResolvingPromise(E._fetchLayerMetaData(E.layerUrl,v)),E})()}getLayerIdBySourceId(v){if(this.dataElement){const E=this.dataElement.domainNetworks;for(const P of E){for(const F of P.edgeSources?P.edgeSources:[])if(F.sourceId===v)return F.layerId;for(const F of P.junctionSources?P.junctionSources:[])if(F.sourceId===v)return F.layerId}return null}return null}_fetchLayerMetaData(v,E){var P=this;return(0,j.Z)(function*(){const F=yield(0,ms.default)(v,_t({responseType:"json",query:{f:"json"}},E));P.sourceJSON=F.data,P.read(F.data,{origin:"service"})})()}_fetchDataElement(v,E,P){var F=this;return(0,j.Z)(function*(){if(F.dataElement)return;const ne=yield(0,ms.default)(`${v}/queryDataElements`,_t({responseType:"json",query:{layers:JSON.stringify([E]),f:"json"}},P)).then(_e=>{var Se;return null==(Se=_e.data.layerDataElements)?void 0:Se[0]});ne&&F.read(ne,{origin:"service"})})()}};(0,C._)([(0,M.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],qs.prototype,"id",void 0),(0,C._)([(0,M.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}}},read:!1}})],qs.prototype,"title",void 0),(0,C._)([(0,M.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],qs.prototype,"layerUrl",void 0),(0,C._)([(0,M.Cb)({type:Object,json:{origins:{service:{read:!0}},read:!1}})],qs.prototype,"dataElement",void 0),(0,C._)([(0,M.Cb)({type:le.Z,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],qs.prototype,"fullExtent",void 0),(0,C._)([(0,M.Cb)({type:Ri.Z,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],qs.prototype,"spatialReference",void 0),(0,C._)([(0,M.Cb)({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],qs.prototype,"type",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],qs.prototype,"datasetName",null),(0,C._)([(0,M.Cb)({readOnly:!0})],qs.prototype,"owner",null),(0,C._)([(0,M.Cb)({readOnly:!0})],qs.prototype,"schemaGeneration",null),(0,C._)([(0,M.Cb)({readOnly:!0})],qs.prototype,"parsedUrl",null),(0,C._)([(0,M.Cb)({readOnly:!0})],qs.prototype,"featureServiceUrl",null),(0,C._)([(0,M.Cb)({readOnly:!0})],qs.prototype,"networkServiceUrl",null),(0,C._)([(0,M.Cb)({readOnly:!0})],qs.prototype,"layerId",null),(0,C._)([(0,M.Cb)()],qs.prototype,"sourceJSON",void 0),qs=(0,C._)([(0,ee.j)("esri.networks.Network")],qs);const I0=qs;let xn=class extends Ts.wq{constructor(v){super(v),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};(0,C._)([(0,M.Cb)({type:[Object],json:{write:!0}})],xn.prototype,"conditionBarriers",void 0),(0,C._)([(0,M.Cb)({type:[Object],json:{write:!0}})],xn.prototype,"outputConditions",void 0),(0,C._)([(0,M.Cb)({type:[Object],json:{write:!0}})],xn.prototype,"functions",void 0),(0,C._)([(0,M.Cb)({type:[Object],json:{write:!0}})],xn.prototype,"functionBarriers",void 0),(0,C._)([(0,M.Cb)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],xn.prototype,"traversabilityScope",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],xn.prototype,"shortestPathNetworkAttributeName",void 0),(0,C._)([(0,M.Cb)({type:Boolean,json:{write:!0}})],xn.prototype,"includeBarriers",void 0),(0,C._)([(0,M.Cb)({type:Boolean,json:{write:!0}})],xn.prototype,"validateConsistency",void 0),(0,C._)([(0,M.Cb)({type:Boolean,json:{write:!0}})],xn.prototype,"ignoreBarriersAtStartingPoints",void 0),xn=(0,C._)([(0,ee.j)("esri.networks.support.TraceConfiguration")],xn);const du=xn;var hu=p(2076);const pu=new hu.X({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork","subnetwork controllers":"subnetwork-controllers",loops:"loops",isolation:"isolation"});let Fs=class extends du{constructor(v){super(v),this.filterBarriers=[],this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.tierName=null,this.validateLocatability=null}};(0,C._)([(0,M.Cb)({type:[Object],json:{write:!0}})],Fs.prototype,"filterBarriers",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Fs.prototype,"domainNetworkName",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Fs.prototype,"filterBitsetNetworkAttributeName",void 0),(0,C._)([(0,M.Cb)({type:[Object],json:{write:!0}})],Fs.prototype,"filterFunctionBarriers",void 0),(0,C._)([(0,M.Cb)({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Fs.prototype,"filterScope",void 0),(0,C._)([(0,M.Cb)({type:Boolean,json:{write:!0}})],Fs.prototype,"includeContainers",void 0),(0,C._)([(0,M.Cb)({type:Boolean,json:{write:!0}})],Fs.prototype,"includeContent",void 0),(0,C._)([(0,M.Cb)({type:Boolean,json:{write:!0}})],Fs.prototype,"includeIsolated",void 0),(0,C._)([(0,M.Cb)({type:Boolean,json:{write:!0}})],Fs.prototype,"includeStructures",void 0),(0,C._)([(0,M.Cb)({type:Boolean,json:{write:!0}})],Fs.prototype,"includeUpToFirstSpatialContainer",void 0),(0,C._)([(0,M.Cb)({type:Object,json:{write:!0}})],Fs.prototype,"nearestNeighbor",void 0),(0,C._)([(0,M.Cb)({type:[Object],json:{write:!0}})],Fs.prototype,"outputFilterCategories",void 0),(0,C._)([(0,M.Cb)({type:[Object],json:{write:!0}})],Fs.prototype,"outputFilters",void 0),(0,C._)([(0,M.Cb)({type:[Object],json:{write:!0}})],Fs.prototype,"propagators",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Fs.prototype,"subnetworkName",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Fs.prototype,"targetTierName",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Fs.prototype,"tierName",void 0),(0,C._)([(0,M.Cb)({type:Boolean,json:{write:!0}})],Fs.prototype,"validateLocatability",void 0),Fs=(0,C._)([(0,ee.j)("esri.networks.support.UNTraceConfiguration")],Fs);const w0=Fs;let vn=class extends Va.w{constructor(v){super(v),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(v,E){return void 0!==v.tierName?w0.fromJSON(v):du.fromJSON(v)}};(0,C._)([(0,M.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"}}},read:!1}})],vn.prototype,"globalId",void 0),(0,C._)([(0,M.Cb)({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],vn.prototype,"title",void 0),(0,C._)([(0,M.Cb)({type:du,json:{origins:{service:{read:!0}},read:!1}})],vn.prototype,"traceConfiguration",void 0),(0,C._)([(0,ni.r)("service","traceConfiguration")],vn.prototype,"readTraceConfiguration",null),(0,C._)([(0,M.Cb)({type:Date,json:{origins:{service:{read:!0}},read:!1}})],vn.prototype,"creationDate",void 0),(0,C._)([(0,M.Cb)({type:String,json:{origins:{service:{read:!0}},read:!1}})],vn.prototype,"creator",void 0),(0,C._)([(0,M.Cb)({type:String,json:{origins:{service:{read:!0}},read:!1}})],vn.prototype,"description",void 0),(0,C._)([(0,M.Cb)({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"}}},read:!1}})],vn.prototype,"minStartingPoints",void 0),(0,C._)([(0,M.Cb)({type:[Object],json:{origins:{service:{read:!0}},read:!1}})],vn.prototype,"resultTypes",void 0),(0,C._)([(0,M.Cb)({type:[String],json:{origins:{service:{read:!0}},read:!1}})],vn.prototype,"tags",void 0),(0,C._)([(0,M.Cb)({type:pu.apiValues,json:{type:pu.jsonValues,origins:{service:{read:pu.read}},read:!1}})],vn.prototype,"traceType",void 0),vn=(0,C._)([(0,ee.j)("esri.networks.support.NamedTraceConfiguration")],vn);const x0=vn;let fo=class extends Ts.wq{constructor(v){super(v),this.id=null,this.name=null}};(0,C._)([(0,M.Cb)({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],fo.prototype,"id",void 0),(0,C._)([(0,M.Cb)({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],fo.prototype,"name",void 0),(0,C._)([(0,M.Cb)({type:Boolean,json:{write:!0}})],fo.prototype,"isUpstreamTerminal",void 0),fo=(0,C._)([(0,ee.j)("esri.networks.support.Terminal")],fo);const A0=fo,$a=new hu.X({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let Ci=class extends Ts.wq{constructor(v){super(v),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Ci.prototype,"defaultConfiguration",void 0),(0,C._)([(0,M.Cb)({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],Ci.prototype,"id",void 0),(0,C._)([(0,M.Cb)({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],Ci.prototype,"name",void 0),(0,C._)([(0,M.Cb)({type:[A0],json:{write:!0}})],Ci.prototype,"terminals",void 0),(0,C._)([(0,M.Cb)({type:$a.apiValues,json:{type:$a.jsonValues,read:$a.read,write:$a.write}})],Ci.prototype,"traversabilityModel",void 0),Ci=(0,C._)([(0,ee.j)("esri.networks.support.TerminalConfiguration")],Ci);const Id=Ci;let An=class extends I0{constructor(v){super(v),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){var v;return null==(v=this.dataElement)?void 0:v.serviceTerritoryFeatureLayerId}get rulesTableId(){var v;return null==(v=this.sourceJSON)?void 0:v.systemLayers.rulesTableId}get rulesTableUrl(){return this.sourceJSON?`${this.featureServiceUrl}/${this.rulesTableId}`:null}get subnetworksTableId(){var v;return null==(v=this.sourceJSON)?void 0:v.systemLayers.subnetworksTableId}get subnetworksTableUrl(){return this.sourceJSON?`${this.featureServiceUrl}/${this.subnetworksTableId}`:null}get terminalConfigurations(){var v;return(null==(v=this.dataElement)?void 0:v.terminalConfigurations.map(E=>Id.fromJSON(E)))||[]}get domainNetworkNames(){var v;return(null==(v=this.dataElement)?void 0:v.domainNetworks.map(E=>E.domainNetworkName))||[]}load(v){var E=()=>super.load,P=this;return(0,j.Z)(function*(){return P.addResolvingPromise(E().call(P,v)),P.addResolvingPromise(P._loadNamedTraceConfigurationsFromNetwork(v)),P})()}getTerminalConfiguration(v){let E=null,P=null;const F=v.layer;let ne=null;if("feature"!==(null==F?void 0:F.type)||(ne=F.layerId,null===ne))return null;const _e=v.attributes;if(null==_e)return null;for(const jt of Object.keys(_e))"ASSETGROUP"===jt.toUpperCase()&&(E=v.getAttribute(jt)),"ASSETTYPE"===jt.toUpperCase()&&(P=v.getAttribute(jt));if(!this.dataElement)return null;let Se=null;const je=this.dataElement.domainNetworks;for(const jt of je){var Ye;const tr=null==(Ye=jt.junctionSources)?void 0:Ye.find(rr=>rr.layerId===ne);if(tr){var yt;const rr=null==(yt=tr.assetGroups)?void 0:yt.find(wr=>wr.assetGroupCode===E);if(rr){var Pt;const wr=null==(Pt=rr.assetTypes)?void 0:Pt.find(Jr=>Jr.assetTypeCode===P);if(wr){Se=wr.terminalConfigurationId;break}}}}if(null!=Se){const jt=this.dataElement.terminalConfigurations,tr=null==jt?void 0:jt.find(rr=>rr.terminalConfigurationId===Se);return tr?Id.fromJSON(tr):null}return null}getTierNames(v){var E;const P=null==(E=this.dataElement)?void 0:E.domainNetworks.find(F=>F.domainNetworkName===v);return(null==P?void 0:P.tiers.map(F=>F.name))||[]}_loadNamedTraceConfigurationsFromNetwork(v){var E=this;return(0,j.Z)(function*(){var P;if(0===(null==(P=E.sharedNamedTraceConfigurations)?void 0:P.length))return;const F=E.sharedNamedTraceConfigurations.map(_e=>_e.globalId),ne=yield E._fetchTraceConfigData(E.networkServiceUrl,F,v);for(const _e of E.sharedNamedTraceConfigurations){const Se=null==ne?void 0:ne.find(je=>je.globalId===_e.globalId);Se&&_e.read(Se,{origin:"service"})}})()}_fetchTraceConfigData(v,E,P){return(0,ms.default)(`${v}/traceConfigurations/query`,_t({responseType:"json",query:{globalIds:JSON.stringify(E),f:"json"}},P)).then(F=>F.data.traceConfigurations)}};(0,C._)([(0,M.Cb)({type:[x0],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],An.prototype,"sharedNamedTraceConfigurations",void 0),(0,C._)([(0,M.Cb)({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],An.prototype,"type",void 0),(0,C._)([(0,M.Cb)({readOnly:!0})],An.prototype,"serviceTerritoryFeatureLayerId",null),(0,C._)([(0,M.Cb)({readOnly:!0})],An.prototype,"rulesTableId",null),(0,C._)([(0,M.Cb)({readOnly:!0})],An.prototype,"rulesTableUrl",null),(0,C._)([(0,M.Cb)({readOnly:!0})],An.prototype,"subnetworksTableId",null),(0,C._)([(0,M.Cb)({readOnly:!0})],An.prototype,"subnetworksTableUrl",null),(0,C._)([(0,M.Cb)({readOnly:!0})],An.prototype,"terminalConfigurations",null),(0,C._)([(0,M.Cb)({readOnly:!0})],An.prototype,"domainNetworkNames",null),An=(0,C._)([(0,ee.j)("esri.networks.UtilityNetwork")],An);const L0=An;var za=p(84687),wd=p(55463),Ws=p(37281),xd=p(39636),Ad=p(77294);let Oi=class extends Ts.wq{constructor(v){super(v),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Oi.prototype,"facilityIdField",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Oi.prototype,"layerId",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Oi.prototype,"nameField",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Oi.prototype,"siteIdField",void 0),(0,C._)([(0,M.Cb)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Oi.prototype,"sublayerId",void 0),Oi=(0,C._)([(0,ee.j)("esri.layers.support.FacilityLayerInfo")],Oi);const R0=Oi;let Rn=class extends Ts.wq{constructor(v){super(v),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Rn.prototype,"facilityIdField",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Rn.prototype,"layerId",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Rn.prototype,"levelIdField",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Rn.prototype,"levelNumberField",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Rn.prototype,"longNameField",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Rn.prototype,"shortNameField",void 0),(0,C._)([(0,M.Cb)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Rn.prototype,"sublayerId",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Rn.prototype,"verticalOrderField",void 0),Rn=(0,C._)([(0,ee.j)("esri.layers.support.LevelLayerInfo")],Rn);const j0=Rn;let Wi=class extends Ts.wq{constructor(v){super(v),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Wi.prototype,"layerId",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Wi.prototype,"nameField",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Wi.prototype,"siteIdField",void 0),(0,C._)([(0,M.Cb)({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Wi.prototype,"sublayerId",void 0),Wi=(0,C._)([(0,ee.j)("esri.layers.support.SiteLayerInfo")],Wi);const U0=Wi;let mo=class extends Ts.wq{constructor(v){super(v),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};(0,C._)([(0,M.Cb)({type:j0,json:{write:!0}})],mo.prototype,"levelLayer",void 0),(0,C._)([(0,M.Cb)({type:R0,json:{write:!0}})],mo.prototype,"facilityLayer",void 0),(0,C._)([(0,M.Cb)({type:U0,json:{write:!0}})],mo.prototype,"siteLayer",void 0),mo=(0,C._)([(0,ee.j)("esri.support.MapFloorInfo")],mo);const B0=mo;var fu;let yo=fu=class extends Ts.wq{constructor(v){super(v),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new fu((0,yn.d9)({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};(0,C._)([(0,M.Cb)({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],yo.prototype,"activeRange",void 0),(0,C._)([(0,M.Cb)({type:[Number],json:{write:!0}})],yo.prototype,"currentRangeExtent",void 0),(0,C._)([(0,M.Cb)({type:[Number],json:{write:!0}})],yo.prototype,"fullRangeExtent",void 0),yo=fu=(0,C._)([(0,ee.j)("esri.webdoc.RangeInfo")],yo);const mu=yo;var yu;let Kn=yu=class extends Ts.wq{constructor(v){super(v),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new yu((0,yn.d9)({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};(0,C._)([(0,M.Cb)({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],Kn.prototype,"enabled",void 0),(0,C._)([(0,M.Cb)({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],Kn.prototype,"longNames",void 0),(0,C._)([(0,M.Cb)({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],Kn.prototype,"minimized",void 0),(0,C._)([(0,M.Cb)({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],Kn.prototype,"pinnedLevels",void 0),(0,C._)([(0,M.Cb)({type:String,json:{read:{source:"site"},write:{target:"site"}}})],Kn.prototype,"site",void 0),(0,C._)([(0,M.Cb)({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],Kn.prototype,"facility",void 0),(0,C._)([(0,M.Cb)({type:String,json:{read:{source:"level"},write:{target:"level"}}})],Kn.prototype,"level",void 0),Kn=yu=(0,C._)([(0,ee.j)("esri.webdoc.widgets.FloorFilter")],Kn);const F0=Kn;var _u;const Ga=new hu.X({slider:"slider",picker:"picker"});let _o=_u=class extends Ts.wq{constructor(v){super(v),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new _u({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};(0,C._)([(0,M.Cb)({type:Ga.apiValues,nonNullable:!0,json:{type:Ga.jsonValues,default:null,read:{reader:Ga.read},write:{isRequired:!0,writer:Ga.write}}})],_o.prototype,"interactionMode",void 0),(0,C._)([(0,M.Cb)({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const v=null!=this.stopInterval;return{enabled:!v,isRequired:!v}}}}})],_o.prototype,"numStops",void 0),(0,C._)([(0,M.Cb)({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],_o.prototype,"stopInterval",void 0),_o=_u=(0,C._)([(0,ee.j)("esri.webdoc.widgets.Range")],_o);const W0=_o;var vu,Ld=p(20849),gu=p(94113);let ks=vu=class extends Ts.wq{constructor(v){super(v),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(v){if(!v)return;const E=null!=v[0]?new Date(v[0]):null,P=null!=v[1]?new Date(v[1]):null;return new so.Z({start:E,end:P})}writeCurrentTimeExtent(v,E,P){v&&(0,gu.RB)(P,[(0,V.pC)(v.start)?v.start.getTime():null,(0,V.pC)(v.end)?v.end.getTime():null],E)}readFullTimeExtent(v,E){const P=E.properties;if(!P)return;const F=null!=P.endTime?new Date(P.endTime):null,ne=null!=P.startTime?new Date(P.startTime):null;return new so.Z({start:ne,end:F})}writeFullTimeExtent(v,E){if(!v)return;const P=E.properties=E.properties||{},F=v.end,ne=v.start;F&&(P.endTime=(0,V.pC)(F)?F.getTime():null),ne&&(P.startTime=(0,V.pC)(ne)?ne.getTime():null)}readStopInterval(v,E,P){return v?Ld.Z.fromJSON({value:v.interval,unit:v.units},P):null}writeStopInterval(v,E,P,F){if(!v)return;const ne=v.toJSON(F);(0,gu.RB)(P,{interval:ne.value,units:ne.unit},E)}readStops(v){return v&&v.length?v.map(E=>new Date(E)):null}writeStops(v,E,P){v&&v.length&&(0,gu.RB)(P,v.map(F=>F.getTime()),E)}clone(){return new vu((0,yn.d9)({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};(0,C._)([(0,M.Cb)({type:so.Z,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],ks.prototype,"currentTimeExtent",void 0),(0,C._)([(0,ni.r)("currentTimeExtent")],ks.prototype,"readCurrentTimeExtent",null),(0,C._)([(0,Mn.c)("currentTimeExtent")],ks.prototype,"writeCurrentTimeExtent",null),(0,C._)([(0,M.Cb)({type:so.Z,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],ks.prototype,"fullTimeExtent",void 0),(0,C._)([(0,ni.r)("fullTimeExtent")],ks.prototype,"readFullTimeExtent",null),(0,C._)([(0,Mn.c)("fullTimeExtent")],ks.prototype,"writeFullTimeExtent",null),(0,C._)([(0,M.Cb)({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],ks.prototype,"loop",void 0),(0,C._)([(0,M.Cb)({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var v;const P=!(null==(v=this.stops)||!v.length),F=!(this.stopInterval||P);return{enabled:F,isRequired:F}}}}})],ks.prototype,"numStops",void 0),(0,C._)([(0,M.Cb)({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],ks.prototype,"numThumbs",void 0),(0,C._)([(0,M.Cb)({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],ks.prototype,"stopDelay",void 0),(0,C._)([(0,M.Cb)({type:Ld.Z,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var v;const P=!(null==(v=this.stops)||!v.length);return{enabled:!P,isRequired:!(null!=this.numStops||P)}}}}})],ks.prototype,"stopInterval",void 0),(0,C._)([(0,ni.r)("stopInterval")],ks.prototype,"readStopInterval",null),(0,C._)([(0,Mn.c)("stopInterval")],ks.prototype,"writeStopInterval",null),(0,C._)([(0,M.Cb)({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],ks.prototype,"stops",void 0),(0,C._)([(0,ni.r)("stops")],ks.prototype,"readStops",null),(0,C._)([(0,Mn.c)("stops")],ks.prototype,"writeStops",null),ks=vu=(0,C._)([(0,ee.j)("esri.webdoc.widgets.TimeSlider")],ks);const N0=ks;var Eu;let go=Eu=class extends Ts.wq{constructor(v){super(v),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new Eu((0,yn.d9)({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};(0,C._)([(0,M.Cb)({type:W0,json:{write:!0}})],go.prototype,"range",void 0),(0,C._)([(0,M.Cb)({type:N0,json:{write:!0}})],go.prototype,"timeSlider",void 0),(0,C._)([(0,M.Cb)({type:F0,json:{write:!0}})],go.prototype,"floorFilter",void 0),go=Eu=(0,C._)([(0,ee.j)("esri.webdoc.Widgets")],go);const Z0=go,K0={width:600,height:400};var $0=p(32584);function Rd(v){return{enabled:!(null==v||!v.length)}}var bu,jd=p(85);let vo=bu=class extends Ts.wq{constructor(v){super(v),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new bu({exactMatch:this.exactMatch,type:this.type,name:this.name})}};(0,C._)([(0,M.Cb)({type:Boolean,json:{write:!0}})],vo.prototype,"exactMatch",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],vo.prototype,"name",void 0),(0,C._)([(0,Il.J)(jd.v)],vo.prototype,"type",void 0),vo=bu=(0,C._)([(0,ee.j)("esri.webdoc.applicationProperties.SearchLayerField")],vo);const z0=vo;var Mu;let Eo=Mu=class extends Ts.wq{constructor(v){super(v),this.field=null,this.id=null,this.subLayer=null}clone(){return new Mu((0,yn.d9)({field:this.field,id:this.id,subLayer:this.subLayer}))}};(0,C._)([(0,M.Cb)({type:z0,json:{write:{isRequired:!0}}})],Eo.prototype,"field",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:{isRequired:!0}}})],Eo.prototype,"id",void 0),(0,C._)([(0,M.Cb)({type:z.z8,json:{write:!0}})],Eo.prototype,"subLayer",void 0),Eo=Mu=(0,C._)([(0,ee.j)("esri.webdoc.applicationProperties.SearchLayer")],Eo);const G0=Eo;var Cu;let bo=Cu=class extends Ts.wq{constructor(v){super(v),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new Cu({exactMatch:this.exactMatch,type:this.type,name:this.name})}};(0,C._)([(0,M.Cb)({type:Boolean,json:{write:!0}})],bo.prototype,"exactMatch",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],bo.prototype,"name",void 0),(0,C._)([(0,Il.J)(jd.v)],bo.prototype,"type",void 0),bo=Cu=(0,C._)([(0,ee.j)("esri.webdoc.applicationProperties.SearchTableField")],bo);const H0=bo;var Ou;let ko=Ou=class extends Ts.wq{constructor(v){super(v),this.field=null,this.id=null}clone(){return new Ou((0,yn.d9)({field:this.field,id:this.id}))}};(0,C._)([(0,M.Cb)({type:H0,json:{write:{isRequired:!0}}})],ko.prototype,"field",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:{isRequired:!0}}})],ko.prototype,"id",void 0),ko=Ou=(0,C._)([(0,ee.j)("esri.webdoc.applicationProperties.SearchTable")],ko);const k0=ko;var Pu;const Ud=D.Z.ofType(G0),Bd=D.Z.ofType(k0);let Vn=Pu=class extends Ts.wq{constructor(v){super(v),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Ud,this.tables=new Bd}readAddressSearchEnabled(v){return!v}writeAddressSearchEnabled(v,E,P){E[P]=!v}clone(){return new Pu((0,yn.d9)({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};(0,C._)([(0,M.Cb)({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],Vn.prototype,"addressSearchEnabled",void 0),(0,C._)([(0,ni.r)("addressSearchEnabled")],Vn.prototype,"readAddressSearchEnabled",null),(0,C._)([(0,Mn.c)("addressSearchEnabled")],Vn.prototype,"writeAddressSearchEnabled",null),(0,C._)([(0,M.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],Vn.prototype,"enabled",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:!0}})],Vn.prototype,"hintText",void 0),(0,C._)([(0,M.Cb)({type:Ud,json:{write:{overridePolicy:Rd},origins:{"web-scene":{write:{isRequired:!0}}}}})],Vn.prototype,"layers",void 0),(0,C._)([(0,M.Cb)({type:Bd,json:{read:!0,write:{overridePolicy:Rd}}})],Vn.prototype,"tables",void 0),Vn=Pu=(0,C._)([(0,ee.j)("esri.webdoc.applicationProperties.Search")],Vn);const J0=Vn;var Su;let ka=Su=class extends Ts.wq{constructor(v){super(v),this.search=null}clone(){return new Su((0,yn.d9)({search:this.search}))}};(0,C._)([(0,M.Cb)({type:J0,json:{write:!0}})],ka.prototype,"search",void 0),ka=Su=(0,C._)([(0,ee.j)("esri.webdoc.applicationProperties.Viewing")],ka);const Y0=ka;var Tu;let Mo=Tu=class extends Ts.wq{constructor(v){super(v),this.editing=null,this.offline=null,this.viewing=null}clone(){return new Tu((0,yn.d9)({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};(0,C._)([(0,M.Cb)({json:{write:!0}})],Mo.prototype,"editing",void 0),(0,C._)([(0,M.Cb)({json:{write:!0}})],Mo.prototype,"offline",void 0),(0,C._)([(0,M.Cb)({type:Y0,json:{write:!0}})],Mo.prototype,"viewing",void 0),Mo=Tu=(0,C._)([(0,ee.j)("esri.webmap.ApplicationProperties")],Mo);const Q0=Mo;var Du,X0=p(55538),q0=p(61996);let Ni=Du=class extends Ts.wq{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new Du({url:this.url})}};var Iu;(0,C._)([(0,M.Cb)({type:String,json:{write:{isRequired:!0}}})],Ni.prototype,"url",void 0),Ni=Du=(0,C._)([(0,ee.j)("esri.webdoc.support.SlideThumbnail")],Ni);const Fd="esri.webmap.Bookmark",wu=X.Z.getLogger(Fd);let jn=Iu=class extends((0,q0.I)(Ts.wq)){constructor(v){super(v),this.name=null,this.thumbnail=new Ni,this.timeExtent=null}set extent(v){(0,X0.Mr)(wu,"extent",{replacement:"viewpoint",version:"4.17"}),this._set("viewpoint",new L.Z({targetGeometry:v.clone()})),this._set("extent",v)}castThumbnail(v){return"string"==typeof v?new Ni({url:v}):(0,z.se)(Ni,v)}set viewpoint(v){const{targetGeometry:E,scale:P}=v;(0,V.pC)(E)&&("extent"===E.type?this._set("extent",E.clone()):"point"===E.type&&(0,V.Wi)(P)&&wu.warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",v)),this._set("viewpoint",v)}readViewpoint(v,E){const{extent:P,viewpoint:F}=E;return L.Z.fromJSON(F||{targetGeometry:P})}writeViewpoint(v,E,P,F){if(!v)return;const{targetGeometry:ne}=v;if((0,V.pC)(ne)&&"extent"!==ne.type){const _e="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";null!=F&&F.messages?F.messages.push(new W.Z("property:unsupported",_e)):wu.error(_e)}else E[P]=v.toJSON()}clone(){return new Iu((0,yn.d9)({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};(0,C._)([(0,M.Cb)({type:le.Z,nonNullable:!0,json:{read:!1,write:{isRequired:!0}}})],jn.prototype,"extent",null),(0,C._)([(0,M.Cb)({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],jn.prototype,"name",void 0),(0,C._)([(0,M.Cb)({type:Ni,json:{write:{overridePolicy:v=>({enabled:!(!v||!v.url)})}}})],jn.prototype,"thumbnail",void 0),(0,C._)([(0,Y.p)("thumbnail")],jn.prototype,"castThumbnail",null),(0,C._)([(0,M.Cb)({type:so.Z,json:{write:!0}})],jn.prototype,"timeExtent",void 0),(0,C._)([(0,M.Cb)({type:L.Z,nonNullable:!0,json:{write:!0}})],jn.prototype,"viewpoint",null),(0,C._)([(0,ni.r)("viewpoint",["extent","viewpoint"])],jn.prototype,"readViewpoint",null),(0,C._)([(0,Mn.c)("viewpoint")],jn.prototype,"writeViewpoint",null),jn=Iu=(0,C._)([(0,ee.j)(Fd)],jn);const ef=jn;var xu;let Zi=xu=class extends be.Z{constructor(v){super(v),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null}clone(){return new xu((0,yn.d9)({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};(0,C._)([(0,M.Cb)({type:Ka})],Zi.prototype,"background",void 0),(0,C._)([(0,M.Cb)({type:mu})],Zi.prototype,"rangeInfo",void 0),(0,C._)([(0,M.Cb)({type:Ri.Z})],Zi.prototype,"spatialReference",void 0),(0,C._)([(0,M.Cb)({type:L.Z})],Zi.prototype,"viewpoint",void 0),Zi=xu=(0,C._)([(0,ee.j)("esri.webmap.InitialViewProperties")],Zi);const Ja=Zi;var tf=p(10349);class Jo extends tf.G{constructor(E,P){super(E,P,"webmap")}}const Ya=new Jo(2,24),Au="Web Map",Wd=D.Z.ofType(ef),rf=D.Z.ofType(L0),Qa=X.Z.getLogger("esri.WebMap"),Yo=new Map;Yo.set("image/jpeg","jpeg"),Yo.set("image/jpg","jpg"),Yo.set("image/png","png"),Yo.set("image/gif","gif");const Nd="ArcGIS API for JavaScript",Zd="CollectorDisabled",Kd="Collector",Vd="Data Editing",$d="OfflineDisabled",zd="Offline",Gd="Workforce Project",Hd="Workforce Worker",kd="Workforce Dispatcher",Jd="DeveloperBasemap",af=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map(v=>v.toLowerCase());let vs=class extends((0,Va.R)(Wo.Z.LoadableMixin((0,Rl.v)(gc)))){constructor(v){super(v),this.applicationProperties=null,this.bookmarks=new Wd,this.floorInfo=null,this.initialViewProperties=new Ja,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){const v=this.portalItem;this.portalItem=null,null==v||v.destroy()}initialize(){if(this.when().catch(v=>{Qa.error("#load()","Failed to load web map",v)}),this.resourceInfo){let v;try{v=this._validateJSON(this.resourceInfo)}catch(E){return void this.addResolvingPromise(Promise.reject(E))}this.read(v)}}set authoringApp(v){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",v)}writeAuthoringApp(v,E){E.authoringApp=v&&this._isAuthoringAppSetByUser?v:Nd}set authoringAppVersion(v){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",v)}writeAuthoringAppVersion(v,E){E.authoringAppVersion=v&&this._isAuthoringAppVersionSetByUser?v:P0.i8}readInitialViewProperties(v,E){var P;const F=new Ja;E.background&&(F.background=Ka.fromJSON(E.background));const ne=null==(P=E.initialState)?void 0:P.viewpoint;return ne&&(ne.rotation&&Jo.parse(E.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===E.authoringApp&&(ne.rotation*=-1),F.viewpoint=L.Z.fromJSON(ne)),E.mapRangeInfo&&(F.rangeInfo=mu.fromJSON(E.mapRangeInfo)),E.spatialReference&&(F.spatialReference=Ri.Z.fromJSON(E.spatialReference)),F}writeInitialViewProperties(v,E,P,F){if(!v)return;const ne=v.background;ne&&ne.color&&(E.background=ne.write({},F)),v.viewpoint&&(E.initialState={viewpoint:v.viewpoint.write({},F)}),v.rangeInfo&&(E.mapRangeInfo=v.rangeInfo.toJSON(F)),v.spatialReference&&(E.spatialReference=v.spatialReference.write({},F))}writeLayers(v,E,P,F){E[P]=this._writeLayers(v,F,"operational-layers")}readSourceVersion(v,E){const[P,F]=E.version.split(".");return new Jo(parseInt(P,10),parseInt(F,10))}writeSourceVersion(v,E,P){E[P]=`${Ya.major}.${Ya.minor}`}writeTables(v,E,P,F){const ne=this._writeLayers(v,F,"tables");ne.length&&(E[P]=ne)}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(v){v?(this._override("thumbnailUrl",v),this._thumbnailFilename=this._generateCustomThumbnailFilename(v)):this._clearThumbnailOverride()}load(v){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return(0,qu.G)(this,v=>{v(this.ground,this.basemap,this.layers,this.tables)})}read(v,E){E=Sr(_t({},E),{origin:"web-map"});const P=this._getAuthoringPropsState();(0,T0.$)(this,v,F=>super.read(v,F),E),this._restoreAuthoringPropsFromState(P)}write(v,E){if("loaded"!==this.loadStatus){const P=new W.Z("webmap:not-loaded","Web map must be loaded before it can be serialized");throw Qa.error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),P}return this._removeDanglingLayerRefs(),E=Sr(_t({},E),{origin:"web-map",restrictedWebMapWriting:!0,webmap:this}),super.write(v,E)}save(v){var E=this;return(0,j.Z)(function*(){v=v||{},E._validateItem(),yield E._updateFromPromise,yield E.load(),yield E._loadLayerContainers(),yield E._beforeSave(),yield E._validateMap();const P=E.portalItem,F={origin:"web-map",messages:[],writtenProperties:[],url:P.itemUrl&&(0,hi.mN)(P.itemUrl),portal:P.portal||za.Z.getDefault()},ne=E.write({},F);return E._validateJSONForWriting(F,v),yield E._updateItemProperties(P),yield E._updateItem(P,ne,F),yield E._updateItemThumbnail(),P})()}saveAs(v,E){var P=this;return(0,j.Z)(function*(){E=E||{};const F=P._getPortalItem(v);yield P._updateFromPromise,yield P.load(),yield P._loadLayerContainers(),yield P._beforeSave(),yield P._validateMap();const ne={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:F.portal},_e=P.write({},ne);P._validateJSONForWriting(ne,E),yield P._updateItemPropertiesForSaveAs(F);const Se=P._getThumbnailState();return yield P._createItem(F,_e,ne,E),P._restoreThumbnailFromState(Se),yield P._updateItemThumbnail(),F})()}updateFrom(v,E){var P=this;return(0,j.Z)(function*(){const F=P._updateFromInternal(v,E);P._updateFromPromise=F,yield F,F===P._updateFromPromise&&(P._updateFromPromise=null)})()}getLayerJSONFromResourceInfo(v){var E,P,F,ne;const _e=this.resourceInfo;return this._collectAllLayersJSON((0,Q.xH)([null==_e||null==(E=_e.baseMap)?void 0:E.baseMapLayers,null==_e?void 0:_e.operationalLayers,null==(P=this.basemap)||null==(F=P.resourceInfo)||null==(ne=F.data)?void 0:ne.baseMapLayers])).find(Se=>Se.id===v.id)}_collectAllLayersJSON(v){return v.reduce((E,P)=>(E.push(P),"GroupLayer"===P.layerType&&(E=E.concat(this._collectAllLayersJSON(P.layers||[]))),E),[])}_writeLayers(v,E,P){return E=Sr(_t({},E),{layerContainerType:P}),v.map(F=>(0,V.Wg)((0,$0.Nw)(F,"tables"===P?null:this.getLayerJSONFromResourceInfo(F),E))).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve(null)}_loadFromItem(v){return v.load().catch(E=>{throw new W.Z("webmap:load-portal-item","Failed to load portal item",{error:E})}).then(()=>{if("Web Map"!==v.type)throw new W.Z("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:v.type})}).then(()=>v.fetchData()).then(E=>(this.resourceInfo=E,this._readAndLoadFromJSON(E,{origin:"web-map",portal:v.portal||za.Z.getDefault()}))).then(()=>this._computeInitialViewpoint())}_readAndLoadFromJSON(v,E){const P=this._validateJSON(v);return this.read(P,E),this._loadFromJSON(P,E)}_validateJSON(v){const E=Jo.parse(v.version||"","webmap");return Ya.validate(E),v.version=`${E.major}.${E.minor}`,v}_loadFromJSON(v,E){const P={context:Sr(_t({},E),{layerContainerType:"operational-layers"})};return this.portalItem&&(P.context.portal=this.portalItem.portal||za.Z.getDefault()),Promise.all([p.e(7534),p.e(1074)]).then(p.bind(p,71074)).then(({populateOperationalLayers:F})=>{const ne=[],_e=v.operationalLayers;_e&&_e.length&&ne.push(F(this.layers,_e,P));const Se=Sr(_t({},P),{context:Sr(_t({},P.context),{layerContainerType:"tables"}),defaultLayerType:"ArcGISFeatureLayer"}),je=v.tables;return je&&je.length&&ne.push(F(this.tables,je,Se)),(0,w.as)(ne).then(()=>{})})}_computeInitialViewpoint(){var v=this;return(0,j.Z)(function*(){var E,P;let F=v.initialViewProperties;if(null==(E=F)||null==(P=E.viewpoint)?void 0:P.targetGeometry)return;const ne=yield v._getExtentFromItem();ne&&(F=F?F.clone():new Ja,F.viewpoint=new L.Z,F.viewpoint.targetGeometry=ne,v.initialViewProperties=F)})()}_getExtentFromItem(){var v=this;return(0,j.Z)(function*(){var E,P;const F=null==(E=v.initialViewProperties)?void 0:E.spatialReference,ne=null==(P=v.portalItem)?void 0:P.extent;return F&&ne?F.isWGS84?ne.clone():F.isWebMercator?(0,ge.$)(ne):(yield p.e(5082).then(p.bind(p,35082))).getGeometryServiceURL(v.portalItem).then(_e=>{const Se=new Ad.Z;return Se.geometries=[ne],Se.outSpatialReference=F,(0,xd.i)(_e,Se)}).then(_e=>_e[0]).catch(_e=>(Qa.error("Error projecting item's extent:",_e),null)):null})()}_removeDanglingLayerRefs(){const v=this.applicationProperties,E=v&&v.viewing&&v.viewing.search,P=_e=>!!this.allLayers.find(Se=>Se.id===_e);E&&E.layers&&(E.layers=E.layers.filter(_e=>P(_e.id))),E&&E.tables&&(E.tables=E.tables.filter(_e=>!!this.tables.find(Se=>Se.id===_e.id)));const F=v&&v.editing&&v.editing.locationTracking;F&&F.info&&!P(F.info.layerId)&&(v.editing=null);const ne=this.presentation&&this.presentation.slides;ne&&ne.forEach(_e=>{_e.visibleLayers&&(_e.visibleLayers=_e.visibleLayers.filter(Se=>P(Se.id)))})}_validateMap(){var v=this;return(0,j.Z)(function*(){var E;if(null==(E=v.basemap)||!E.baseLayers.length)throw new W.Z("webmap:save","Map does not have a valid basemap with a base layer.");let P=null;if(yield(0,T.N1)(()=>{const F=function Sh(v,E){var P,F,ne;if((0,V.Wi)(E)||(0,V.Wi)(v))return{spatialReference:null,updating:!1};if("not-loaded"===E.loadStatus)return E.load(),{spatialReference:null,updating:!0};if(E.spatialReference)return{spatialReference:E.spatialReference,updating:!1};if(0===E.baseLayers.length)return{spatialReference:null,updating:!1};const _e=E.baseLayers.getItemAt(0);switch(_e.loadStatus){case"not-loaded":_e.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const Se=(("supportedSpatialReferences"in _e?_e.supportedSpatialReferences:null)||["tileInfo"in _e?null==(P=_e.tileInfo)?void 0:P.spatialReference:_e.spatialReference]).filter(Boolean);return v.spatialReference?{spatialReference:null!=(F=null!=(ne=Se.find(je=>v.spatialReference.equals(je)))?ne:Se[0])?F:null,updating:!1}:{spatialReference:Se[0],updating:!1}}(v.initialViewProperties,v.basemap);return P=F.spatialReference,!F.updating}),!(0,re.fS)(P,v.initialViewProperties.spatialReference))throw new W.Z("webmap:save","The spatial reference of the basemap is not compatible with the one from the map.",{expected:v.initialViewProperties.spatialReference,actual:P})})()}_validateItem(){if(!this.portalItem)throw Qa.error("save: requires the portalItem property to be set"),new W.Z("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)}_validateItemType(v){if(v.type!==Au)throw new W.Z("webmap:portal-item-wrong-type",`Portal item needs to have type "${Au}"`)}_loadLayerContainers(){const v=[];return this.basemap&&v.push(this.basemap.load()),this.ground&&v.push(this.ground.load()),(0,w.as)(v).then(()=>{})}_beforeSave(){var v=this;return(0,j.Z)(function*(){const E=[];for(const P of v.allLayers)if("beforeSave"in P&&"function"==typeof P.beforeSave){const F=P.beforeSave();F&&E.push(F)}yield(0,w.as)(E)})()}_loadAllLayers(){const v=this._getAllLayersAndTables().map(E=>E.load());return(0,w.as)(v).then(()=>{})}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(v,E){let P=v.messages.filter(F=>"error"===F.type).map(F=>new W.Z(F.name,F.message,F.details));if(E.ignoreUnsupported&&(P=P.filter(F=>"layer:unsupported"!==F.name&&"symbol:unsupported"!==F.name&&"symbol-layer:unsupported"!==F.name&&"property:unsupported"!==F.name&&"url:unsupported"!==F.name)),P.length>0)throw new W.Z("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:P})}_updateItemProperties(v){var E=this;return(0,j.Z)(function*(){v.extent=yield E._getWGS84Extent(E.initialViewProperties.viewpoint.targetGeometry),yield E._updateTypeKeywords(v)})()}_updateItemPropertiesForSaveAs(v){var E=this;return(0,j.Z)(function*(){(0,Ws.ck)(v,Zd),(0,Ws.ck)(v,$d),(0,Ws.ck)(v,Gd),(0,Ws.ck)(v,Hd),(0,Ws.ck)(v,kd),(0,Ws.ck)(v,"Offline Map Areas"),(0,Ws.ck)(v,"FieldMapsDisabled"),yield E._updateItemProperties(v)})()}_getWGS84Extent(v){var E=this;return(0,j.Z)(function*(){const P=v.clone().normalize();let F;if(P.length>1)for(const ne of P)F?ne.width>F.width&&(F=ne):F=ne;else F=P[0];return E._projectToWGS84(F)})()}_projectToWGS84(v){var E=this;return(0,j.Z)(function*(){const P=v.spatialReference;if(P.isWGS84)return v.clone();if(P.isWebMercator)return(0,ge.Sx)(v);const F=yield p.e(5082).then(p.bind(p,35082)),ne=yield F.getGeometryServiceURL(E.portalItem),_e=new Ad.Z;return _e.geometries=[v],_e.outSpatialReference=Ri.Z.WGS84,(yield(0,xd.i)(ne,_e))[0]})()}_updateTypeKeywords(v){var E=this;return(0,j.Z)(function*(){(0,Ws.qj)(v,Nd),yield E._loadAllLayers(),E._evalCollectorKeyword(v),E._evalDataEditingKeyword(v),E._evalOfflineKeyword(v),E._evalDeveloperBasemapKeyword(v),v.typeKeywords&&(v.typeKeywords=v.typeKeywords.filter((P,F,ne)=>ne.indexOf(P)===F))})()}_evalCollectorKeyword(v){(0,Ws._$)(v,Zd)||(0,Ws._$)(v,Gd)||(0,Ws._$)(v,Hd)||(0,Ws._$)(v,kd)||!this._hasEditableFeatureLayer()?(0,Ws.ck)(v,Kd):(0,Ws.qj)(v,Kd)}_evalDataEditingKeyword(v){this._hasEditableFeatureLayer()?(0,Ws.qj)(v,Vd):(0,Ws.ck)(v,Vd)}_evalOfflineKeyword(v){!(0,Ws._$)(v,$d)&&this._isOfflineCapableMap()?(0,Ws.qj)(v,zd):(0,Ws.ck)(v,zd)}_evalDeveloperBasemapKeyword(v){!function Ph(v){return!(null==v||!v.baseLayers.concat(v.referenceLayers).some(lc))}(this.basemap)?(0,Ws.ck)(v,Jd):(0,Ws.qj)(v,Jd)}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some(v=>v.loaded&&this._isFeatureServiceLayer(v)&&v.capabilities.operations.supportsEditing&&v.editingEnabled)}_isFeatureServiceLayer(v){return!("feature"!==v.type||!v.source||"feature-layer"!==v.source.type)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter(v=>"group"!==v.type).every(v=>v.loaded&&this._isOfflineCapableLayer(v))}_isOfflineCapableLayer(v){return this._isFeatureServiceLayer(v)&&v.capabilities.operations.supportsSync||("tile"===v.type||"vector-tile"===v.type)&&(v.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(v)||lc(v))&&v.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(v){return"tile"===v.type&&(0,Oa.h3)(v.url)&&af.some(E=>v.url.toLowerCase().indexOf("/"+E+"/")>-1)}_updateItem(v,E,P){var F=this;return(0,j.Z)(function*(){yield v.update({data:E}),F._syncUpInstanceWithItem(v,E,P)})()}_createItem(v,E,P,F){var ne=this;return(0,j.Z)(function*(){const _e=ne.portalItem,Se=!!(_e&&_e.id&&_e.portal.user),je=v.portal;if(yield je._signIn(),!(yield ne._canCopyItem(_e,Se,je)))throw new W.Z("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");yield je.user.addItem({item:v,folder:F.folder,data:E}),ne.portalItem=v,ne._syncUpInstanceWithItem(v,E,P)})()}_canCopyItem(v,E,P){return(0,j.Z)(function*(){return!((0,V.pC)(v)&&v.id&&v.typeKeywords&&v.typeKeywords.indexOf("useOnly")>-1)||v.portal.portalHostname===P.portalHostname&&(E||(yield v.reload()),"admin"===v.itemControl||"update"===v.itemControl)})()}_syncUpInstanceWithItem(v,E,P){Va.w.prototype.read.call(this,{version:E.version,authoringApp:E.authoringApp,authoringAppVersion:E.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:v.itemUrl&&(0,hi.mN)(v.itemUrl)}),(0,S0.D)(P),this.resourceInfo=E}_updateItemThumbnail(){var v=this;return(0,j.Z)(function*(){v.thumbnailUrl&&v._isOverridden("thumbnailUrl")&&(yield v.portalItem.updateThumbnail({thumbnail:v.thumbnailUrl,filename:v._thumbnailFilename}),v._clearThumbnailOverride())})()}_getPortalItem(v){let E=wd.default.from(v);return E.id&&(E=E.clone(),E.id=null),E.type||(E.type=Au),E.portal||(E.portal=za.Z.getDefault()),this._validateItemType(E),E}_updateFromInternal(v,E){var P=this;return(0,j.Z)(function*(){if(E=E||{},yield(0,T.N1)(()=>v.ready),P._updateInitialViewProperties(v,E),v.map===P)for(const F of v.allLayerViews)for(const ne of["visible","featureEffect"])ne in F&&ne in F.layer&&F._isOverridden(ne)&&(F.layer[ne]=F[ne]);yield P._updateThumbnailUrl(v,E)})()}_updateInitialViewProperties(v,E){var P;if(E.backgroundExcluded||(this.initialViewProperties.background=null==(P=v.background)?void 0:P.clone()),this.initialViewProperties.spatialReference=v.spatialReference.clone(),E.viewpointExcluded||(this.initialViewProperties.viewpoint=new L.Z({rotation:v.rotation,scale:E.scalePreserved?v.scale:null,targetGeometry:this._getViewExtent(v)})),!E.widgetsExcluded)for(const F of v.persistableViewModels)F.updateWebDocument(this)}_getViewExtent(v){const E=v.center.clone().normalize(),P=v.extent.clone(),F=P.width/2;return P.xmin=E.x-F,P.xmax=E.x+F,P}_updateThumbnailUrl(v,E){var P=this;return(0,j.Z)(function*(){if(E.thumbnailExcluded)return;const F=function V0(v,E){E=E||K0;let{width:P,height:F}=E;const ne=P/F;return ne<1.5?F=P/1.5:ne>1.5&&(P=1.5*F),P>v.width&&(F*=v.width/P,P=v.width),F>v.height&&(P*=v.height/F,F=v.height),{width:Math.round(P),height:Math.round(F)}}(v,E.thumbnailSize),ne=yield v.takeScreenshot({format:"png",width:F.width,height:F.height});P._setAutoGeneratedThumbnail(ne.dataUrl)})()}_setAutoGeneratedThumbnail(v){this.thumbnailUrl=v,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(v){if((0,hi.HK)(v)){const E=(0,hi.sJ)(v),P=E&&E.mediaType,F=P&&Yo.get(P.toLowerCase())||null,ne=`thumbnail${Date.now()}`;return F?`${ne}.${F}`:ne}return null}_getThumbnailState(){let v=this.thumbnailUrl;return v&&(v=this._isOverridden("thumbnailUrl")?v:(0,hi.ZN)(v,"w","8192")),{thumbnailUrl:v,filename:this._thumbnailFilename}}_restoreThumbnailFromState(v){this.thumbnailUrl=v.thumbnailUrl,this._thumbnailFilename=v.filename}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(v){v.isAuthoringAppSetByUser?this.authoringApp=v.authoringApp:this._isAuthoringAppSetByUser=!1,v.isAuthoringAppVersionSetByUser?this.authoringAppVersion=v.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(v){const E=v;if(!E)throw new W.Z("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:E})}};vs.VERSION=Ya,(0,C._)([(0,M.Cb)({type:Q0,json:{write:!0}})],vs.prototype,"applicationProperties",void 0),(0,C._)([(0,M.Cb)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],vs.prototype,"authoringApp",null),(0,C._)([(0,Mn.c)("authoringApp")],vs.prototype,"writeAuthoringApp",null),(0,C._)([(0,M.Cb)({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],vs.prototype,"authoringAppVersion",null),(0,C._)([(0,Mn.c)("authoringAppVersion")],vs.prototype,"writeAuthoringAppVersion",null),(0,C._)([(0,M.Cb)({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],vs.prototype,"basemap",void 0),(0,C._)([(0,M.Cb)({type:Wd,json:{write:{overridePolicy:v=>({enabled:!!(v&&v.length>0),ignoreOrigin:!0})}}})],vs.prototype,"bookmarks",void 0),(0,C._)([(0,M.Cb)({type:B0,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],vs.prototype,"floorInfo",void 0),(0,C._)([(0,M.Cb)({type:Ja,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:Ka},"initialState.viewpoint":{type:L.Z},mapRangeInfo:{type:mu},spatialReference:{type:Ri.Z}}}}})],vs.prototype,"initialViewProperties",void 0),(0,C._)([(0,ni.r)("initialViewProperties")],vs.prototype,"readInitialViewProperties",null),(0,C._)([(0,Mn.c)("initialViewProperties")],vs.prototype,"writeInitialViewProperties",null),(0,C._)([(0,M.Cb)({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],vs.prototype,"layers",void 0),(0,C._)([(0,Mn.c)("layers")],vs.prototype,"writeLayers",null),(0,C._)([(0,M.Cb)({type:wd.default})],vs.prototype,"portalItem",void 0),(0,C._)([(0,M.Cb)({json:{write:!0}})],vs.prototype,"presentation",void 0),(0,C._)([(0,M.Cb)()],vs.prototype,"resourceInfo",void 0),(0,C._)([(0,M.Cb)({readOnly:!0,type:Jo,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],vs.prototype,"sourceVersion",void 0),(0,C._)([(0,ni.r)("sourceVersion")],vs.prototype,"readSourceVersion",null),(0,C._)([(0,Mn.c)("sourceVersion")],vs.prototype,"writeSourceVersion",null),(0,C._)([(0,M.Cb)({json:{read:!1,write:{ignoreOrigin:!0}}})],vs.prototype,"tables",void 0),(0,C._)([(0,Mn.c)("tables")],vs.prototype,"writeTables",null),(0,C._)([(0,M.Cb)()],vs.prototype,"thumbnailUrl",null),(0,C._)([(0,M.Cb)({type:Z0,json:{write:!0}})],vs.prototype,"widgets",void 0),(0,C._)([(0,M.Cb)({type:rf,json:{read:!0,write:!0}})],vs.prototype,"utilityNetworks",void 0),vs=(0,C._)([(0,ee.j)("esri.WebMap")],vs);const lf=vs,Xa=(0,p(47423).fo)("Geolocation",{web:()=>p.e(4561).then(p.bind(p,64561)).then(v=>new v.GeolocationWeb)});var Js=p(72096);const cf=["mapViewNode"],df=[{path:"",component:(()=>{class v{constructor(P){this.zone=P,this.view=null,this.options={timeout:1e4,enableHighAccuracy:!0,maximumAge:3600}}initializeMap(){const P=this.mapViewEl.nativeElement,F=new lf({portalItem:{id:"5215a0d222564a92ab57b5896e0a6ccd"}}),ne=new O0({container:P,map:F});return this.view=ne,this.view.when()}ngOnInit(){var P=this;return(0,j.Z)(function*(){P.initializeMap().then(()=>{console.log("The map is ready.")}),yield P.updateUserLocation(),P.view.center=P.userLocationGraphic.geometry,setInterval(P.updateUserLocation.bind(P),1e4)})()}getLocationService(){return(0,j.Z)(function*(){if((yield Xa.checkPermissions()).location.length)return new Promise((F,ne)=>{Xa.getCurrentPosition().then(_e=>{F([_e.coords.latitude,_e.coords.longitude])})})})()}watchPosition(){try{this.watchId=Xa.watchPosition({},(P,F)=>{console.log("Watch",P),this.zone.run(()=>{this.watchCoordinate={latitude:P.coords.latitude,longitude:P.coords.longitude}})})}catch(P){console.error(P)}}clearWatch(){null!=this.watchId&&Xa.clearWatch({id:this.watchId})}updateUserLocation(){var P=this;return(0,j.Z)(function*(){const F=yield P.getLocationService(),ne=new oe.Z({latitude:F[0],longitude:F[1]});P.userLocationGraphic?P.userLocationGraphic.geometry=ne:(P.userLocationGraphic=new $.Z({symbol:{type:"simple-marker",size:"16px",color:[10,132,255],outline:{color:"#efefef",width:"2px"}},geometry:ne}),P.view.graphics.add(P.userLocationGraphic))})()}ngOnDestroy(){this.view&&this.view.destroy()}}return v.\u0275fac=function(P){return new(P||v)(Js.Y36(Js.R0b))},v.\u0275cmp=Js.Xpm({type:v,selectors:[["app-home"]],viewQuery:function(P,F){if(1&P&&Js.Gf(cf,7),2&P){let ne;Js.iGM(ne=Js.CRH())&&(F.mapViewEl=ne.first)}},decls:7,vars:2,consts:[[3,"translucent"],[3,"fullscreen"],["mapViewNode",""]],template:function(P,F){1&P&&(Js.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),Js._uU(3," Location with weather layer "),Js.qZA()()(),Js.TgZ(4,"ion-content",1),Js._UZ(5,"div",null,2),Js.qZA()),2&P&&(Js.Q6J("translucent",!0),Js.xp6(4),Js.Q6J("fullscreen",!0))},directives:[b.Gu,b.sr,b.wd,b.W2],styles:['@import"https://js.arcgis.com/4.23/@arcgis/core/assets/esri/themes/light/main.css";.esri-view[_ngcontent-%COMP%], #mapViewNode[_ngcontent-%COMP%]{padding:0;margin:0;height:100%;width:100%}']}),v})()}];let hf=(()=>{class v{}return v.\u0275fac=function(P){return new(P||v)},v.\u0275mod=Js.oAB({type:v}),v.\u0275inj=Js.cJS({imports:[[B.Bz.forChild(df)],B.Bz]}),v})(),pf=(()=>{class v{}return v.\u0275fac=function(P){return new(P||v)},v.\u0275mod=Js.oAB({type:v}),v.\u0275inj=Js.cJS({imports:[[g.ez,J.u5,b.Pc,hf]]}),v})()},27122:(He,ve)=>{"use strict";function g(Ce,Re){for(var Te=0;Te<Re.length;Te++){var ge=Re[Te];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(Ce,ge.key,ge)}}function b(Ce,Re,Te){return Re&&g(Ce.prototype,Re),Te&&g(Ce,Te),Ce}function J(){return J=Object.assign||function(Ce){for(var Re=1;Re<arguments.length;Re++){var Te=arguments[Re];for(var ge in Te)Object.prototype.hasOwnProperty.call(Te,ge)&&(Ce[ge]=Te[ge])}return Ce},J.apply(this,arguments)}function B(Ce,Re){Ce.prototype=Object.create(Re.prototype),Ce.prototype.constructor=Ce,C(Ce,Re)}function j(Ce){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(Te){return Te.__proto__||Object.getPrototypeOf(Te)})(Ce)}function C(Ce,Re){return(C=Object.setPrototypeOf||function(ge,Ae){return ge.__proto__=Ae,ge})(Ce,Re)}function $(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Ce){return!1}}function L(Ce,Re,Te){return(L=$()?Reflect.construct:function(Ae,Ve,pt){var Et=[null];Et.push.apply(Et,Ve);var kt=new(Function.bind.apply(Ae,Et));return pt&&C(kt,pt.prototype),kt}).apply(null,arguments)}function I(Ce){var Re="function"==typeof Map?new Map:void 0;return I=function(ge){if(null===ge||!function D(Ce){return-1!==Function.toString.call(Ce).indexOf("[native code]")}(ge))return ge;if("function"!=typeof ge)throw new TypeError("Super expression must either be null or a function");if(void 0!==Re){if(Re.has(ge))return Re.get(ge);Re.set(ge,Ae)}function Ae(){return L(ge,arguments,j(this).constructor)}return Ae.prototype=Object.create(ge.prototype,{constructor:{value:Ae,enumerable:!1,writable:!0,configurable:!0}}),C(Ae,ge)},I(Ce)}function W(Ce,Re){if(null==Ce)return{};var Ae,Ve,Te={},ge=Object.keys(Ce);for(Ve=0;Ve<ge.length;Ve++)!(Re.indexOf(Ae=ge[Ve])>=0)&&(Te[Ae]=Ce[Ae]);return Te}function Z(Ce,Re){(null==Re||Re>Ce.length)&&(Re=Ce.length);for(var Te=0,ge=new Array(Re);Te<Re;Te++)ge[Te]=Ce[Te];return ge}function X(Ce,Re){var Te="undefined"!=typeof Symbol&&Ce[Symbol.iterator]||Ce["@@iterator"];if(Te)return(Te=Te.call(Ce)).next.bind(Te);if(Array.isArray(Ce)||(Te=function k(Ce,Re){if(Ce){if("string"==typeof Ce)return Z(Ce,Re);var Te=Object.prototype.toString.call(Ce).slice(8,-1);if("Object"===Te&&Ce.constructor&&(Te=Ce.constructor.name),"Map"===Te||"Set"===Te)return Array.from(Ce);if("Arguments"===Te||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te))return Z(Ce,Re)}}(Ce))||Re&&Ce&&"number"==typeof Ce.length){Te&&(Ce=Te);var ge=0;return function(){return ge>=Ce.length?{done:!0}:{done:!1,value:Ce[ge++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var V=function(Ce){function Re(){return Ce.apply(this,arguments)||this}return B(Re,Ce),Re}(I(Error)),w=function(Ce){function Re(Te){return Ce.call(this,"Invalid DateTime: "+Te.toMessage())||this}return B(Re,Ce),Re}(V),T=function(Ce){function Re(Te){return Ce.call(this,"Invalid Interval: "+Te.toMessage())||this}return B(Re,Ce),Re}(V),O=function(Ce){function Re(Te){return Ce.call(this,"Invalid Duration: "+Te.toMessage())||this}return B(Re,Ce),Re}(V),x=function(Ce){function Re(){return Ce.apply(this,arguments)||this}return B(Re,Ce),Re}(V),N=function(Ce){function Re(Te){return Ce.call(this,"Invalid unit "+Te)||this}return B(Re,Ce),Re}(V),M=function(Ce){function Re(){return Ce.apply(this,arguments)||this}return B(Re,Ce),Re}(V),Q=function(Ce){function Re(){return Ce.call(this,"Zone is an abstract class")||this}return B(Re,Ce),Re}(V),z="numeric",ee="short",le="long",oe={year:z,month:z,day:z},ce={year:z,month:ee,day:z},re={year:z,month:ee,day:z,weekday:ee},K={year:z,month:le,day:z},ae={year:z,month:le,day:z,weekday:le},se={hour:z,minute:z},de={hour:z,minute:z,second:z},ue={hour:z,minute:z,second:z,timeZoneName:ee},pe={hour:z,minute:z,second:z,timeZoneName:le},ie={hour:z,minute:z,hourCycle:"h23"},te={hour:z,minute:z,second:z,hourCycle:"h23"},Ee={hour:z,minute:z,second:z,hourCycle:"h23",timeZoneName:ee},fe={hour:z,minute:z,second:z,hourCycle:"h23",timeZoneName:le},be={year:z,month:z,day:z,hour:z,minute:z},ye={year:z,month:z,day:z,hour:z,minute:z,second:z},Ke={year:z,month:ee,day:z,hour:z,minute:z},Ue={year:z,month:ee,day:z,hour:z,minute:z,second:z},he={year:z,month:ee,day:z,weekday:ee,hour:z,minute:z},Me={year:z,month:le,day:z,hour:z,minute:z,timeZoneName:ee},Le={year:z,month:le,day:z,hour:z,minute:z,second:z,timeZoneName:ee},Je={year:z,month:le,day:z,weekday:le,hour:z,minute:z,timeZoneName:le},Oe={year:z,month:le,day:z,weekday:le,hour:z,minute:z,second:z,timeZoneName:le};function xe(Ce){return void 0===Ce}function Be(Ce){return"number"==typeof Ce}function Y(Ce){return"number"==typeof Ce&&Ce%1==0}function $e(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(Ce){return!1}}function Qe(Ce,Re,Te){if(0!==Ce.length)return Ce.reduce(function(ge,Ae){var Ve=[Re(Ae),Ae];return ge&&Te(ge[0],Ve[0])===ge[0]?ge:Ve},null)[1]}function qe(Ce,Re){return Object.prototype.hasOwnProperty.call(Ce,Re)}function ke(Ce,Re,Te){return Y(Ce)&&Ce>=Re&&Ce<=Te}function We(Ce,Re){return void 0===Re&&(Re=2),Ce<0?"-"+(""+-Ce).padStart(Re,"0"):(""+Ce).padStart(Re,"0")}function nt(Ce){if(!xe(Ce)&&null!==Ce&&""!==Ce)return parseInt(Ce,10)}function ht(Ce){if(!xe(Ce)&&null!==Ce&&""!==Ce)return parseFloat(Ce)}function mt(Ce){if(!xe(Ce)&&null!==Ce&&""!==Ce){var Re=1e3*parseFloat("0."+Ce);return Math.floor(Re)}}function Kt(Ce,Re,Te){void 0===Te&&(Te=!1);var ge=Math.pow(10,Re);return(Te?Math.trunc:Math.round)(Ce*ge)/ge}function Bt(Ce){return Ce%4==0&&(Ce%100!=0||Ce%400==0)}function $t(Ce){return Bt(Ce)?366:365}function qt(Ce,Re){var Te=function dt(Ce,Re){return Ce-Re*Math.floor(Ce/Re)}(Re-1,12)+1;return 2===Te?Bt(Ce+(Re-Te)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][Te-1]}function gr(Ce){var Re=Date.UTC(Ce.year,Ce.month-1,Ce.day,Ce.hour,Ce.minute,Ce.second,Ce.millisecond);return Ce.year<100&&Ce.year>=0&&(Re=new Date(Re)).setUTCFullYear(Re.getUTCFullYear()-1900),+Re}function er(Ce){var Re=(Ce+Math.floor(Ce/4)-Math.floor(Ce/100)+Math.floor(Ce/400))%7,Te=Ce-1,ge=(Te+Math.floor(Te/4)-Math.floor(Te/100)+Math.floor(Te/400))%7;return 4===Re||3===ge?53:52}function vr(Ce){return Ce>99?Ce:Ce>60?1900+Ce:2e3+Ce}function pr(Ce,Re,Te,ge){void 0===ge&&(ge=null);var Ae=new Date(Ce),Ve={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};ge&&(Ve.timeZone=ge);var pt=J({timeZoneName:Re},Ve),Et=new Intl.DateTimeFormat(Te,pt).formatToParts(Ae).find(function(xt){return"timezonename"===xt.type.toLowerCase()});return Et?Et.value:null}function hr(Ce,Re){var Te=parseInt(Ce,10);Number.isNaN(Te)&&(Te=0);var ge=parseInt(Re,10)||0;return 60*Te+(Te<0||Object.is(Te,-0)?-ge:ge)}function st(Ce){var Re=Number(Ce);if("boolean"==typeof Ce||""===Ce||Number.isNaN(Re))throw new M("Invalid unit value "+Ce);return Re}function ft(Ce,Re){var Te={};for(var ge in Ce)if(qe(Ce,ge)){var Ae=Ce[ge];if(null==Ae)continue;Te[Re(ge)]=st(Ae)}return Te}function St(Ce,Re){var Te=Math.trunc(Math.abs(Ce/60)),ge=Math.trunc(Math.abs(Ce%60)),Ae=Ce>=0?"+":"-";switch(Re){case"short":return""+Ae+We(Te,2)+":"+We(ge,2);case"narrow":return""+Ae+Te+(ge>0?":"+ge:"");case"techie":return""+Ae+We(Te,2)+We(ge,2);default:throw new RangeError("Value format "+Re+" is out of range for property format")}}function Lt(Ce){return function Xe(Ce,Re){return Re.reduce(function(Te,ge){return Te[ge]=Ce[ge],Te},{})}(Ce,["hour","minute","second","millisecond"])}var Dt=["January","February","March","April","May","June","July","August","September","October","November","December"],Vt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Gt=["J","F","M","A","M","J","J","A","S","O","N","D"];function Qt(Ce){switch(Ce){case"narrow":return[].concat(Gt);case"short":return[].concat(Vt);case"long":return[].concat(Dt);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var gt=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ut=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Ze=["M","T","W","T","F","S","S"];function ot(Ce){switch(Ce){case"narrow":return[].concat(Ze);case"short":return[].concat(ut);case"long":return[].concat(gt);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Pe=["AM","PM"],Ge=["Before Christ","Anno Domini"],vt=["BC","AD"],zt=["B","A"];function Yt(Ce){switch(Ce){case"narrow":return[].concat(zt);case"short":return[].concat(vt);case"long":return[].concat(Ge);default:return null}}function Tr(Ce,Re){for(var Ae,Te="",ge=X(Ce);!(Ae=ge()).done;){var Ve=Ae.value;Te+=Ve.literal?Ve.val:Re(Ve.val)}return Te}var Gr={D:oe,DD:ce,DDD:K,DDDD:ae,t:se,tt:de,ttt:ue,tttt:pe,T:ie,TT:te,TTT:Ee,TTTT:fe,f:be,ff:Ke,fff:Me,ffff:Je,F:ye,FF:Ue,FFF:Le,FFFF:Oe},Qr=function(){function Ce(Te,ge){this.opts=ge,this.loc=Te,this.systemLoc=null}Ce.create=function(ge,Ae){return void 0===Ae&&(Ae={}),new Ce(ge,Ae)},Ce.parseFormat=function(ge){for(var Ae=null,Ve="",pt=!1,Et=[],xt=0;xt<ge.length;xt++){var kt=ge.charAt(xt);"'"===kt?(Ve.length>0&&Et.push({literal:pt,val:Ve}),Ae=null,Ve="",pt=!pt):pt||kt===Ae?Ve+=kt:(Ve.length>0&&Et.push({literal:!1,val:Ve}),Ve=kt,Ae=kt)}return Ve.length>0&&Et.push({literal:pt,val:Ve}),Et},Ce.macroTokenToFormatOpts=function(ge){return Gr[ge]};var Re=Ce.prototype;return Re.formatWithSystemDefault=function(ge,Ae){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(ge,J({},this.opts,Ae)).format()},Re.formatDateTime=function(ge,Ae){return void 0===Ae&&(Ae={}),this.loc.dtFormatter(ge,J({},this.opts,Ae)).format()},Re.formatDateTimeParts=function(ge,Ae){return void 0===Ae&&(Ae={}),this.loc.dtFormatter(ge,J({},this.opts,Ae)).formatToParts()},Re.resolvedOptions=function(ge,Ae){return void 0===Ae&&(Ae={}),this.loc.dtFormatter(ge,J({},this.opts,Ae)).resolvedOptions()},Re.num=function(ge,Ae){if(void 0===Ae&&(Ae=0),this.opts.forceSimple)return We(ge,Ae);var Ve=J({},this.opts);return Ae>0&&(Ve.padTo=Ae),this.loc.numberFormatter(Ve).format(ge)},Re.formatDateTimeFromString=function(ge,Ae){var Ve=this,pt="en"===this.loc.listingMode(),Et=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,xt=function(Fr,As){return Ve.loc.extract(ge,Fr,As)},kt=function(Fr){return ge.isOffsetFixed&&0===ge.offset&&Fr.allowZ?"Z":ge.isValid?ge.zone.formatOffset(ge.ts,Fr.format):""},ar=function(Fr,As){return pt?function Ut(Ce,Re){return Qt(Re)[Ce.month-1]}(ge,Fr):xt(As?{month:Fr}:{month:Fr,day:"numeric"},"month")},mr=function(Fr,As){return pt?function Rt(Ce,Re){return ot(Re)[Ce.weekday-1]}(ge,Fr):xt(As?{weekday:Fr}:{weekday:Fr,month:"long",day:"numeric"},"weekday")},Vr=function(Fr){return pt?function Jt(Ce,Re){return Yt(Re)[Ce.year<0?0:1]}(ge,Fr):xt({era:Fr},"era")};return Tr(Ce.parseFormat(Ae),function(Fr){switch(Fr){case"S":return Ve.num(ge.millisecond);case"u":case"SSS":return Ve.num(ge.millisecond,3);case"s":return Ve.num(ge.second);case"ss":return Ve.num(ge.second,2);case"uu":return Ve.num(Math.floor(ge.millisecond/10),2);case"uuu":return Ve.num(Math.floor(ge.millisecond/100));case"m":return Ve.num(ge.minute);case"mm":return Ve.num(ge.minute,2);case"h":return Ve.num(ge.hour%12==0?12:ge.hour%12);case"hh":return Ve.num(ge.hour%12==0?12:ge.hour%12,2);case"H":return Ve.num(ge.hour);case"HH":return Ve.num(ge.hour,2);case"Z":return kt({format:"narrow",allowZ:Ve.opts.allowZ});case"ZZ":return kt({format:"short",allowZ:Ve.opts.allowZ});case"ZZZ":return kt({format:"techie",allowZ:Ve.opts.allowZ});case"ZZZZ":return ge.zone.offsetName(ge.ts,{format:"short",locale:Ve.loc.locale});case"ZZZZZ":return ge.zone.offsetName(ge.ts,{format:"long",locale:Ve.loc.locale});case"z":return ge.zoneName;case"a":return pt?function et(Ce){return Pe[Ce.hour<12?0:1]}(ge):xt({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return Et?xt({day:"numeric"},"day"):Ve.num(ge.day);case"dd":return Et?xt({day:"2-digit"},"day"):Ve.num(ge.day,2);case"c":case"E":return Ve.num(ge.weekday);case"ccc":return mr("short",!0);case"cccc":return mr("long",!0);case"ccccc":return mr("narrow",!0);case"EEE":return mr("short",!1);case"EEEE":return mr("long",!1);case"EEEEE":return mr("narrow",!1);case"L":return Et?xt({month:"numeric",day:"numeric"},"month"):Ve.num(ge.month);case"LL":return Et?xt({month:"2-digit",day:"numeric"},"month"):Ve.num(ge.month,2);case"LLL":return ar("short",!0);case"LLLL":return ar("long",!0);case"LLLLL":return ar("narrow",!0);case"M":return Et?xt({month:"numeric"},"month"):Ve.num(ge.month);case"MM":return Et?xt({month:"2-digit"},"month"):Ve.num(ge.month,2);case"MMM":return ar("short",!1);case"MMMM":return ar("long",!1);case"MMMMM":return ar("narrow",!1);case"y":return Et?xt({year:"numeric"},"year"):Ve.num(ge.year);case"yy":return Et?xt({year:"2-digit"},"year"):Ve.num(ge.year.toString().slice(-2),2);case"yyyy":return Et?xt({year:"numeric"},"year"):Ve.num(ge.year,4);case"yyyyyy":return Et?xt({year:"numeric"},"year"):Ve.num(ge.year,6);case"G":return Vr("short");case"GG":return Vr("long");case"GGGGG":return Vr("narrow");case"kk":return Ve.num(ge.weekYear.toString().slice(-2),2);case"kkkk":return Ve.num(ge.weekYear,4);case"W":return Ve.num(ge.weekNumber);case"WW":return Ve.num(ge.weekNumber,2);case"o":return Ve.num(ge.ordinal);case"ooo":return Ve.num(ge.ordinal,3);case"q":return Ve.num(ge.quarter);case"qq":return Ve.num(ge.quarter,2);case"X":return Ve.num(Math.floor(ge.ts/1e3));case"x":return Ve.num(ge.ts);default:return function(Fr){var As=Ce.macroTokenToFormatOpts(Fr);return As?Ve.formatWithSystemDefault(ge,As):Fr}(Fr)}})},Re.formatDurationFromString=function(ge,Ae){var mr,Ve=this,pt=function(mr){switch(mr[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},xt=Ce.parseFormat(Ae),kt=xt.reduce(function(ar,mr){return mr.literal?ar:ar.concat(mr.val)},[]),dr=ge.shiftTo.apply(ge,kt.map(pt).filter(function(ar){return ar}));return Tr(xt,(mr=dr,function(Lr){var Vr=pt(Lr);return Vr?Ve.num(mr.get(Vr),Lr.length):Lr}))},Ce}(),Zr=function(){function Ce(Te,ge){this.reason=Te,this.explanation=ge}return Ce.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},Ce}(),es=function(){function Ce(){}var Re=Ce.prototype;return Re.offsetName=function(ge,Ae){throw new Q},Re.formatOffset=function(ge,Ae){throw new Q},Re.offset=function(ge){throw new Q},Re.equals=function(ge){throw new Q},b(Ce,[{key:"type",get:function(){throw new Q}},{key:"name",get:function(){throw new Q}},{key:"isUniversal",get:function(){throw new Q}},{key:"isValid",get:function(){throw new Q}}]),Ce}(),bs=null,Ms=function(Ce){function Re(){return Ce.apply(this,arguments)||this}B(Re,Ce);var Te=Re.prototype;return Te.offsetName=function(Ae,Ve){return pr(Ae,Ve.format,Ve.locale)},Te.formatOffset=function(Ae,Ve){return St(this.offset(Ae),Ve)},Te.offset=function(Ae){return-new Date(Ae).getTimezoneOffset()},Te.equals=function(Ae){return"system"===Ae.type},b(Re,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return null===bs&&(bs=new Re),bs}}]),Re}(es),ys={},fn={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6},ws={},Ns=function(Ce){function Re(ge){var Ae;return(Ae=Ce.call(this)||this).zoneName=ge,Ae.valid=Re.isValidZone(ge),Ae}B(Re,Ce),Re.create=function(Ae){return ws[Ae]||(ws[Ae]=new Re(Ae)),ws[Ae]},Re.resetCache=function(){ws={},ys={}},Re.isValidSpecifier=function(Ae){return this.isValidZone(Ae)},Re.isValidZone=function(Ae){if(!Ae)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:Ae}).format(),!0}catch(Ve){return!1}};var Te=Re.prototype;return Te.offsetName=function(Ae,Ve){return pr(Ae,Ve.format,Ve.locale,this.name)},Te.formatOffset=function(Ae,Ve){return St(this.offset(Ae),Ve)},Te.offset=function(Ae){var Ve=new Date(Ae);if(isNaN(Ve))return NaN;var pt=function Ys(Ce){return ys[Ce]||(ys[Ce]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:Ce,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),ys[Ce]}(this.name),Et=pt.formatToParts?function Ls(Ce,Re){for(var Te=Ce.formatToParts(Re),ge=[],Ae=0;Ae<Te.length;Ae++){var Ve=Te[Ae],pt=Ve.type,Et=Ve.value,xt=fn[pt];"era"===pt?ge[xt]=Et:xe(xt)||(ge[xt]=parseInt(Et,10))}return ge}(pt,Ve):function en(Ce,Re){var Te=Ce.format(Re).replace(/\u200E/g,""),ge=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(Te);return[ge[3],ge[1],ge[2],ge[4],ge[5],ge[6],ge[7]]}(pt,Ve),xt=Et[0],kt=Et[1],dr=Et[2],mr=Et[4],Lr=Et[5],Vr=Et[6];"BC"===Et[3]&&(xt=1-Math.abs(xt));var Fr=+Ve,As=Fr%1e3;return(gr({year:xt,month:kt,day:dr,hour:24===mr?0:mr,minute:Lr,second:Vr,millisecond:0})-(Fr-=As>=0?As:1e3+As))/6e4},Te.equals=function(Ae){return"iana"===Ae.type&&Ae.name===this.name},b(Re,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),Re}(es),tn=null,ls=function(Ce){function Re(ge){var Ae;return(Ae=Ce.call(this)||this).fixed=ge,Ae}B(Re,Ce),Re.instance=function(Ae){return 0===Ae?Re.utcInstance:new Re(Ae)},Re.parseSpecifier=function(Ae){if(Ae){var Ve=Ae.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(Ve)return new Re(hr(Ve[1],Ve[2]))}return null};var Te=Re.prototype;return Te.offsetName=function(){return this.name},Te.formatOffset=function(Ae,Ve){return St(this.fixed,Ve)},Te.offset=function(){return this.fixed},Te.equals=function(Ae){return"fixed"===Ae.type&&Ae.fixed===this.fixed},b(Re,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+St(this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){return null===tn&&(tn=new Re(0)),tn}}]),Re}(es),Qs=function(Ce){function Re(ge){var Ae;return(Ae=Ce.call(this)||this).zoneName=ge,Ae}B(Re,Ce);var Te=Re.prototype;return Te.offsetName=function(){return null},Te.formatOffset=function(){return""},Te.offset=function(){return NaN},Te.equals=function(){return!1},b(Re,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),Re}(es);function Ds(Ce,Re){if(xe(Ce)||null===Ce)return Re;if(Ce instanceof es)return Ce;if(function me(Ce){return"string"==typeof Ce}(Ce)){var Te=Ce.toLowerCase();return"local"===Te||"system"===Te?Re:"utc"===Te||"gmt"===Te?ls.utcInstance:ls.parseSpecifier(Te)||Ns.create(Ce)}return Be(Ce)?ls.instance(Ce):"object"==typeof Ce&&Ce.offset&&"number"==typeof Ce.offset?Ce:new Qs(Ce)}var br,De=function(){return Date.now()},Wt="system",It=null,sr=null,cr=null,Er=function(){function Ce(){}return Ce.resetCaches=function(){is.resetCache(),Ns.resetCache()},b(Ce,null,[{key:"now",get:function(){return De},set:function(Te){De=Te}},{key:"defaultZone",get:function(){return Ds(Wt,Ms.instance)},set:function(Te){Wt=Te}},{key:"defaultLocale",get:function(){return It},set:function(Te){It=Te}},{key:"defaultNumberingSystem",get:function(){return sr},set:function(Te){sr=Te}},{key:"defaultOutputCalendar",get:function(){return cr},set:function(Te){cr=Te}},{key:"throwOnInvalid",get:function(){return br},set:function(Te){br=Te}}]),Ce}(),fr=["base"],Ar=["padTo","floor"],Ur={},At={};function at(Ce,Re){void 0===Re&&(Re={});var Te=JSON.stringify([Ce,Re]),ge=At[Te];return ge||(ge=new Intl.DateTimeFormat(Ce,Re),At[Te]=ge),ge}var Ct={},Tt={},lr=null;function us(Ce,Re,Te,ge,Ae){var Ve=Ce.listingMode(Te);return"error"===Ve?null:"en"===Ve?ge(Re):Ae(Re)}var _s=function(){function Ce(Te,ge,Ae){this.padTo=Ae.padTo||0,this.floor=Ae.floor||!1;var Ve=W(Ae,Ar);if(!ge||Object.keys(Ve).length>0){var pt=J({useGrouping:!1},Ae);Ae.padTo>0&&(pt.minimumIntegerDigits=Ae.padTo),this.inf=function lt(Ce,Re){void 0===Re&&(Re={});var Te=JSON.stringify([Ce,Re]),ge=Ct[Te];return ge||(ge=new Intl.NumberFormat(Ce,Re),Ct[Te]=ge),ge}(Te,pt)}}return Ce.prototype.format=function(ge){if(this.inf){var Ae=this.floor?Math.floor(ge):ge;return this.inf.format(Ae)}return We(this.floor?Math.floor(ge):Kt(ge,3),this.padTo)},Ce}(),Br=function(){function Ce(Te,ge,Ae){var Ve;if(this.opts=Ae,Te.zone.isUniversal){var pt=Te.offset/60*-1,Et=pt>=0?"Etc/GMT+"+pt:"Etc/GMT"+pt;0!==Te.offset&&Ns.create(Et).valid?(Ve=Et,this.dt=Te):(Ve="UTC",this.dt=Ae.timeZoneName||0===Te.offset?Te:xs.fromMillis(Te.ts+60*Te.offset*1e3))}else"system"===Te.zone.type?this.dt=Te:(this.dt=Te,Ve=Te.zone.name);var xt=J({},this.opts);Ve&&(xt.timeZone=Ve),this.dtf=at(ge,xt)}var Re=Ce.prototype;return Re.format=function(){return this.dtf.format(this.dt.toJSDate())},Re.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())},Re.resolvedOptions=function(){return this.dtf.resolvedOptions()},Ce}(),Ss=function(){function Ce(Te,ge,Ae){this.opts=J({style:"long"},Ae),!ge&&$e()&&(this.rtf=function Zt(Ce,Re){void 0===Re&&(Re={});var ge=W(Re,fr),Ae=JSON.stringify([Ce,ge]),Ve=Tt[Ae];return Ve||(Ve=new Intl.RelativeTimeFormat(Ce,Re),Tt[Ae]=Ve),Ve}(Te,Ae))}var Re=Ce.prototype;return Re.format=function(ge,Ae){return this.rtf?this.rtf.format(ge,Ae):function nr(Ce,Re,Te,ge){void 0===Te&&(Te="always"),void 0===ge&&(ge=!1);var Ae={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},Ve=-1===["hours","minutes","seconds"].indexOf(Ce);if("auto"===Te&&Ve){var pt="days"===Ce;switch(Re){case 1:return pt?"tomorrow":"next "+Ae[Ce][0];case-1:return pt?"yesterday":"last "+Ae[Ce][0];case 0:return pt?"today":"this "+Ae[Ce][0]}}var Et=Object.is(Re,-0)||Re<0,xt=Math.abs(Re),kt=1===xt,dr=Ae[Ce],ar=ge?kt?dr[1]:dr[2]||dr[1]:kt?Ae[Ce][0]:Ce;return Et?xt+" "+ar+" ago":"in "+xt+" "+ar}(Ae,ge,this.opts.numeric,"long"!==this.opts.style)},Re.formatToParts=function(ge,Ae){return this.rtf?this.rtf.formatToParts(ge,Ae):[]},Ce}(),is=function(){function Ce(Te,ge,Ae,Ve){var pt=function ur(Ce){var Re=Ce.indexOf("-u-");if(-1===Re)return[Ce];var Te,ge=Ce.substring(0,Re);try{Te=at(Ce).resolvedOptions()}catch(Et){Te=at(ge).resolvedOptions()}return[ge,Te.numberingSystem,Te.calendar]}(Te),xt=pt[1],kt=pt[2];this.locale=pt[0],this.numberingSystem=ge||xt||null,this.outputCalendar=Ae||kt||null,this.intl=function xr(Ce,Re,Te){return(Te||Re)&&(Ce+="-u",Te&&(Ce+="-ca-"+Te),Re&&(Ce+="-nu-"+Re)),Ce}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=Ve,this.fastNumbersCached=null}Ce.fromOpts=function(ge){return Ce.create(ge.locale,ge.numberingSystem,ge.outputCalendar,ge.defaultToEN)},Ce.create=function(ge,Ae,Ve,pt){void 0===pt&&(pt=!1);var Et=ge||Er.defaultLocale;return new Ce(Et||(pt?"en-US":function _r(){return lr||(lr=(new Intl.DateTimeFormat).resolvedOptions().locale)}()),Ae||Er.defaultNumberingSystem,Ve||Er.defaultOutputCalendar,Et)},Ce.resetCache=function(){lr=null,At={},Ct={},Tt={}},Ce.fromObject=function(ge){var Ae=void 0===ge?{}:ge;return Ce.create(Ae.locale,Ae.numberingSystem,Ae.outputCalendar)};var Re=Ce.prototype;return Re.listingMode=function(){return this.isEnglish()&&!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar)?"en":"intl"},Re.clone=function(ge){return ge&&0!==Object.getOwnPropertyNames(ge).length?Ce.create(ge.locale||this.specifiedLocale,ge.numberingSystem||this.numberingSystem,ge.outputCalendar||this.outputCalendar,ge.defaultToEN||!1):this},Re.redefaultToEN=function(ge){return void 0===ge&&(ge={}),this.clone(J({},ge,{defaultToEN:!0}))},Re.redefaultToSystem=function(ge){return void 0===ge&&(ge={}),this.clone(J({},ge,{defaultToEN:!1}))},Re.months=function(ge,Ae,Ve){var pt=this;return void 0===Ae&&(Ae=!1),void 0===Ve&&(Ve=!0),us(this,ge,Ve,Qt,function(){var Et=Ae?{month:ge,day:"numeric"}:{month:ge},xt=Ae?"format":"standalone";return pt.monthsCache[xt][ge]||(pt.monthsCache[xt][ge]=function jr(Ce){for(var Re=[],Te=1;Te<=12;Te++){var ge=xs.utc(2016,Te,1);Re.push(Ce(ge))}return Re}(function(kt){return pt.extract(kt,Et,"month")})),pt.monthsCache[xt][ge]})},Re.weekdays=function(ge,Ae,Ve){var pt=this;return void 0===Ae&&(Ae=!1),void 0===Ve&&(Ve=!0),us(this,ge,Ve,ot,function(){var Et=Ae?{weekday:ge,year:"numeric",month:"long",day:"numeric"}:{weekday:ge},xt=Ae?"format":"standalone";return pt.weekdaysCache[xt][ge]||(pt.weekdaysCache[xt][ge]=function Nr(Ce){for(var Re=[],Te=1;Te<=7;Te++){var ge=xs.utc(2016,11,13+Te);Re.push(Ce(ge))}return Re}(function(kt){return pt.extract(kt,Et,"weekday")})),pt.weekdaysCache[xt][ge]})},Re.meridiems=function(ge){var Ae=this;return void 0===ge&&(ge=!0),us(this,void 0,ge,function(){return Pe},function(){if(!Ae.meridiemCache){var Ve={hour:"numeric",hourCycle:"h12"};Ae.meridiemCache=[xs.utc(2016,11,13,9),xs.utc(2016,11,13,19)].map(function(pt){return Ae.extract(pt,Ve,"dayperiod")})}return Ae.meridiemCache})},Re.eras=function(ge,Ae){var Ve=this;return void 0===Ae&&(Ae=!0),us(this,ge,Ae,Yt,function(){var pt={era:ge};return Ve.eraCache[ge]||(Ve.eraCache[ge]=[xs.utc(-40,1,1),xs.utc(2017,1,1)].map(function(Et){return Ve.extract(Et,pt,"era")})),Ve.eraCache[ge]})},Re.extract=function(ge,Ae,Ve){var xt=this.dtFormatter(ge,Ae).formatToParts().find(function(kt){return kt.type.toLowerCase()===Ve});return xt?xt.value:null},Re.numberFormatter=function(ge){return void 0===ge&&(ge={}),new _s(this.intl,ge.forceSimple||this.fastNumbers,ge)},Re.dtFormatter=function(ge,Ae){return void 0===Ae&&(Ae={}),new Br(ge,this.intl,Ae)},Re.relFormatter=function(ge){return void 0===ge&&(ge={}),new Ss(this.intl,this.isEnglish(),ge)},Re.listFormatter=function(ge){return void 0===ge&&(ge={}),function Or(Ce,Re){void 0===Re&&(Re={});var Te=JSON.stringify([Ce,Re]),ge=Ur[Te];return ge||(ge=new Intl.ListFormat(Ce,Re),Ur[Te]=ge),ge}(this.intl,ge)},Re.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},Re.equals=function(ge){return this.locale===ge.locale&&this.numberingSystem===ge.numberingSystem&&this.outputCalendar===ge.outputCalendar},b(Ce,[{key:"fastNumbers",get:function(){return null==this.fastNumbersCached&&(this.fastNumbersCached=function Ir(Ce){return(!Ce.numberingSystem||"latn"===Ce.numberingSystem)&&("latn"===Ce.numberingSystem||!Ce.locale||Ce.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(Ce.intl).resolvedOptions().numberingSystem)}(this)),this.fastNumbersCached}}]),Ce}();function Is(){for(var Ce=arguments.length,Re=new Array(Ce),Te=0;Te<Ce;Te++)Re[Te]=arguments[Te];var ge=Re.reduce(function(Ae,Ve){return Ae+Ve.source},"");return RegExp("^"+ge+"$")}function Cs(){for(var Ce=arguments.length,Re=new Array(Ce),Te=0;Te<Ce;Te++)Re[Te]=arguments[Te];return function(ge){return Re.reduce(function(Ae,Ve){var pt=Ae[0],Et=Ae[1],kt=Ve(ge,Ae[2]),ar=kt[1],mr=kt[2];return[J({},pt,kt[0]),Et||ar,mr]},[{},null,1]).slice(0,2)}}function ts(Ce){if(null==Ce)return[null,null];for(var Re=arguments.length,Te=new Array(Re>1?Re-1:0),ge=1;ge<Re;ge++)Te[ge-1]=arguments[ge];for(var Ae=0,Ve=Te;Ae<Ve.length;Ae++){var pt=Ve[Ae],Et=pt[0],xt=pt[1],kt=Et.exec(Ce);if(kt)return xt(kt)}return[null,null]}function $r(){for(var Ce=arguments.length,Re=new Array(Ce),Te=0;Te<Ce;Te++)Re[Te]=arguments[Te];return function(ge,Ae){var pt,Ve={};for(pt=0;pt<Re.length;pt++)Ve[Re[pt]]=nt(ge[Ae+pt]);return[Ve,null,Ae+pt]}}var Nt=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,zs=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Mr=RegExp(""+zs.source+Nt.source+"?"),Xs=RegExp("(?:T"+Mr.source+")?"),ds=$r("weekYear","weekNumber","weekDay"),on=$r("year","ordinal"),bt=RegExp(zs.source+" ?(?:"+Nt.source+"|("+/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/.source+"))?"),Xt=RegExp("(?: "+bt.source+")?");function ir(Ce,Re,Te){var ge=Ce[Re];return xe(ge)?Te:nt(ge)}function Pr(Ce,Re){return[{year:ir(Ce,Re),month:ir(Ce,Re+1,1),day:ir(Ce,Re+2,1)},null,Re+3]}function Xr(Ce,Re){return[{hours:ir(Ce,Re,0),minutes:ir(Ce,Re+1,0),seconds:ir(Ce,Re+2,0),milliseconds:mt(Ce[Re+3])},null,Re+4]}function rs(Ce,Re){var Te=!Ce[Re]&&!Ce[Re+1],ge=hr(Ce[Re+1],Ce[Re+2]);return[{},Te?null:ls.instance(ge),Re+3]}function Dr(Ce,Re){return[{},Ce[Re]?Ns.create(Ce[Re]):null,Re+1]}var cn=RegExp("^T?"+zs.source+"$"),Ne=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function ze(Ce){var ge=Ce[2],Ae=Ce[3],Ve=Ce[4],pt=Ce[5],Et=Ce[6],xt=Ce[7],kt=Ce[8],dr="-"===Ce[0][0],ar=xt&&"-"===xt[0],mr=function(Vr,os){return void 0===os&&(os=!1),void 0!==Vr&&(os||Vr&&dr)?-Vr:Vr};return[{years:mr(ht(Ce[1])),months:mr(ht(ge)),weeks:mr(ht(Ae)),days:mr(ht(Ve)),hours:mr(ht(pt)),minutes:mr(ht(Et)),seconds:mr(ht(xt),"-0"===xt),milliseconds:mr(mt(kt),ar)}]}var ct={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function it(Ce,Re,Te,ge,Ae,Ve,pt){var Et={year:2===Re.length?vr(nt(Re)):nt(Re),month:Vt.indexOf(Te)+1,day:nt(ge),hour:nt(Ae),minute:nt(Ve)};return pt&&(Et.second=nt(pt)),Ce&&(Et.weekday=Ce.length>3?gt.indexOf(Ce)+1:ut.indexOf(Ce)+1),Et}var Ot=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function wt(Ce){var Lr,xt=Ce[8],kt=Ce[9],dr=Ce[10],ar=Ce[11],mr=it(Ce[1],Ce[4],Ce[3],Ce[2],Ce[5],Ce[6],Ce[7]);return Lr=xt?ct[xt]:kt?0:hr(dr,ar),[mr,new ls(Lr)]}var Fe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,tt=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Mt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Ht(Ce){return[it(Ce[1],Ce[4],Ce[3],Ce[2],Ce[5],Ce[6],Ce[7]),ls.utcInstance]}function or(Ce){return[it(Ce[1],Ce[7],Ce[2],Ce[3],Ce[4],Ce[5],Ce[6]),ls.utcInstance]}var Cr=Is(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Xs),Kr=Is(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Xs),Hr=Is(/(\d{4})-?(\d{3})/,Xs),ss=Is(Mr),Yr=Cs(Pr,Xr,rs),ms=Cs(ds,Xr,rs),ln=Cs(on,Xr,rs),Rs=Cs(Xr,rs),qo=Cs(Xr),rl=Is(/(\d{4})-(\d\d)-(\d\d)/,Xt),sl=Is(bt),nl=Cs(Pr,Xr,rs,Dr),il=Cs(Xr,rs,Dr),ea={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},ll=J({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6}},ea),un=365.2425,ii=30.436875,ul=J({years:{quarters:4,months:12,weeks:un/7,days:un,hours:24*un,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:un/28,days:un/4,hours:24*un/4,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:ii/7,days:ii,hours:24*ii,minutes:43829.1,seconds:2629746,milliseconds:2629746e3}},ea),$n=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],cl=$n.slice(0).reverse();function zn(Ce,Re,Te){void 0===Te&&(Te=!1);var ge={values:Te?Re.values:J({},Ce.values,Re.values||{}),loc:Ce.loc.clone(Re.loc),conversionAccuracy:Re.conversionAccuracy||Ce.conversionAccuracy};return new Ks(ge)}function js(Ce,Re,Te,ge,Ae){var Ve=Ce[Ae][Te],pt=Re[Te]/Ve,xt=Math.sign(pt)!==Math.sign(ge[Ae])&&0!==ge[Ae]&&Math.abs(pt)<=1?function ta(Ce){return Ce<0?Math.floor(Ce):Math.ceil(Ce)}(pt):Math.trunc(pt);ge[Ae]+=xt,Re[Te]-=xt*Ve}var Ks=function(){function Ce(Te){var ge="longterm"===Te.conversionAccuracy||!1;this.values=Te.values,this.loc=Te.loc||is.create(),this.conversionAccuracy=ge?"longterm":"casual",this.invalid=Te.invalid||null,this.matrix=ge?ul:ll,this.isLuxonDuration=!0}Ce.fromMillis=function(ge,Ae){return Ce.fromObject({milliseconds:ge},Ae)},Ce.fromObject=function(ge,Ae){if(void 0===Ae&&(Ae={}),null==ge||"object"!=typeof ge)throw new M("Duration.fromObject: argument expected to be an object, got "+(null===ge?"null":typeof ge));return new Ce({values:ft(ge,Ce.normalizeUnit),loc:is.fromObject(Ae),conversionAccuracy:Ae.conversionAccuracy})},Ce.fromDurationLike=function(ge){if(Be(ge))return Ce.fromMillis(ge);if(Ce.isDuration(ge))return ge;if("object"==typeof ge)return Ce.fromObject(ge);throw new M("Unknown duration argument "+ge+" of type "+typeof ge)},Ce.fromISO=function(ge,Ae){var Ve=function Xo(Ce){return ts(Ce,[Ne,ze])}(ge),pt=Ve[0];return pt?Ce.fromObject(pt,Ae):Ce.invalid("unparsable",'the input "'+ge+"\" can't be parsed as ISO 8601")},Ce.fromISOTime=function(ge,Ae){var Ve=function Pi(Ce){return ts(Ce,[cn,qo])}(ge),pt=Ve[0];return pt?Ce.fromObject(pt,Ae):Ce.invalid("unparsable",'the input "'+ge+"\" can't be parsed as ISO 8601")},Ce.invalid=function(ge,Ae){if(void 0===Ae&&(Ae=null),!ge)throw new M("need to specify a reason the Duration is invalid");var Ve=ge instanceof Zr?ge:new Zr(ge,Ae);if(Er.throwOnInvalid)throw new O(Ve);return new Ce({invalid:Ve})},Ce.normalizeUnit=function(ge){var Ae={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[ge&&ge.toLowerCase()];if(!Ae)throw new N(ge);return Ae},Ce.isDuration=function(ge){return ge&&ge.isLuxonDuration||!1};var Re=Ce.prototype;return Re.toFormat=function(ge,Ae){void 0===Ae&&(Ae={});var Ve=J({},Ae,{floor:!1!==Ae.round&&!1!==Ae.floor});return this.isValid?Qr.create(this.loc,Ve).formatDurationFromString(this,ge):"Invalid Duration"},Re.toHuman=function(ge){var Ae=this;void 0===ge&&(ge={});var Ve=$n.map(function(pt){var Et=Ae.values[pt];return xe(Et)?null:Ae.loc.numberFormatter(J({style:"unit",unitDisplay:"long"},ge,{unit:pt.slice(0,-1)})).format(Et)}).filter(function(pt){return pt});return this.loc.listFormatter(J({type:"conjunction",style:ge.listStyle||"narrow"},ge)).format(Ve)},Re.toObject=function(){return this.isValid?J({},this.values):{}},Re.toISO=function(){if(!this.isValid)return null;var ge="P";return 0!==this.years&&(ge+=this.years+"Y"),(0!==this.months||0!==this.quarters)&&(ge+=this.months+3*this.quarters+"M"),0!==this.weeks&&(ge+=this.weeks+"W"),0!==this.days&&(ge+=this.days+"D"),(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)&&(ge+="T"),0!==this.hours&&(ge+=this.hours+"H"),0!==this.minutes&&(ge+=this.minutes+"M"),(0!==this.seconds||0!==this.milliseconds)&&(ge+=Kt(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===ge&&(ge+="T0S"),ge},Re.toISOTime=function(ge){if(void 0===ge&&(ge={}),!this.isValid)return null;var Ae=this.toMillis();if(Ae<0||Ae>=864e5)return null;ge=J({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},ge);var Ve=this.shiftTo("hours","minutes","seconds","milliseconds"),pt="basic"===ge.format?"hhmm":"hh:mm";(!ge.suppressSeconds||0!==Ve.seconds||0!==Ve.milliseconds)&&(pt+="basic"===ge.format?"ss":":ss",(!ge.suppressMilliseconds||0!==Ve.milliseconds)&&(pt+=".SSS"));var Et=Ve.toFormat(pt);return ge.includePrefix&&(Et="T"+Et),Et},Re.toJSON=function(){return this.toISO()},Re.toString=function(){return this.toISO()},Re.toMillis=function(){return this.as("milliseconds")},Re.valueOf=function(){return this.toMillis()},Re.plus=function(ge){if(!this.isValid)return this;for(var Et,Ae=Ce.fromDurationLike(ge),Ve={},pt=X($n);!(Et=pt()).done;){var xt=Et.value;(qe(Ae.values,xt)||qe(this.values,xt))&&(Ve[xt]=Ae.get(xt)+this.get(xt))}return zn(this,{values:Ve},!0)},Re.minus=function(ge){if(!this.isValid)return this;var Ae=Ce.fromDurationLike(ge);return this.plus(Ae.negate())},Re.mapUnits=function(ge){if(!this.isValid)return this;for(var Ae={},Ve=0,pt=Object.keys(this.values);Ve<pt.length;Ve++){var Et=pt[Ve];Ae[Et]=st(ge(this.values[Et],Et))}return zn(this,{values:Ae},!0)},Re.get=function(ge){return this[Ce.normalizeUnit(ge)]},Re.set=function(ge){return this.isValid?zn(this,{values:J({},this.values,ft(ge,Ce.normalizeUnit))}):this},Re.reconfigure=function(ge){var Ae=void 0===ge?{}:ge,Et=Ae.conversionAccuracy,kt={loc:this.loc.clone({locale:Ae.locale,numberingSystem:Ae.numberingSystem})};return Et&&(kt.conversionAccuracy=Et),zn(this,kt)},Re.as=function(ge){return this.isValid?this.shiftTo(ge).get(ge):NaN},Re.normalize=function(){if(!this.isValid)return this;var ge=this.toObject();return function Gn(Ce,Re){cl.reduce(function(Te,ge){return xe(Re[ge])?Te:(Te&&js(Ce,Re,Te,Re,ge),ge)},null)}(this.matrix,ge),zn(this,{values:ge},!0)},Re.shiftTo=function(){for(var ge=arguments.length,Ae=new Array(ge),Ve=0;Ve<ge;Ve++)Ae[Ve]=arguments[Ve];if(!this.isValid)return this;if(0===Ae.length)return this;Ae=Ae.map(function(As){return Ce.normalizeUnit(As)});for(var kt,ar,pt={},Et={},xt=this.toObject(),dr=X($n);!(ar=dr()).done;){var mr=ar.value;if(Ae.indexOf(mr)>=0){kt=mr;var Lr=0;for(var Vr in Et)Lr+=this.matrix[Vr][mr]*Et[Vr],Et[Vr]=0;Be(xt[mr])&&(Lr+=xt[mr]);var os=Math.trunc(Lr);for(var ns in pt[mr]=os,Et[mr]=(1e3*Lr-1e3*os)/1e3,xt)$n.indexOf(ns)>$n.indexOf(mr)&&js(this.matrix,xt,ns,pt,mr)}else Be(xt[mr])&&(Et[mr]=xt[mr])}for(var Fr in Et)0!==Et[Fr]&&(pt[kt]+=Fr===kt?Et[Fr]:Et[Fr]/this.matrix[kt][Fr]);return zn(this,{values:pt},!0).normalize()},Re.negate=function(){if(!this.isValid)return this;for(var ge={},Ae=0,Ve=Object.keys(this.values);Ae<Ve.length;Ae++){var pt=Ve[Ae];ge[pt]=0===this.values[pt]?0:-this.values[pt]}return zn(this,{values:ge},!0)},Re.equals=function(ge){if(!this.isValid||!ge.isValid||!this.loc.equals(ge.loc))return!1;for(var pt,Ve=X($n);!(pt=Ve()).done;){var Et=pt.value;if(kt=ge.values[Et],!(void 0===(xt=this.values[Et])||0===xt?void 0===kt||0===kt:xt===kt))return!1}var xt,kt;return!0},b(Ce,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),Ce}(),Si="Invalid Interval",Ki=function(){function Ce(Te){this.s=Te.start,this.e=Te.end,this.invalid=Te.invalid||null,this.isLuxonInterval=!0}Ce.invalid=function(ge,Ae){if(void 0===Ae&&(Ae=null),!ge)throw new M("need to specify a reason the Interval is invalid");var Ve=ge instanceof Zr?ge:new Zr(ge,Ae);if(Er.throwOnInvalid)throw new T(Ve);return new Ce({invalid:Ve})},Ce.fromDateTimes=function(ge,Ae){var Ve=Hn(ge),pt=Hn(Ae),Et=function dl(Ce,Re){return Ce&&Ce.isValid?Re&&Re.isValid?Re<Ce?Ki.invalid("end before start","The end of an interval must be after its start, but you had start="+Ce.toISO()+" and end="+Re.toISO()):null:Ki.invalid("missing or invalid end"):Ki.invalid("missing or invalid start")}(Ve,pt);return null==Et?new Ce({start:Ve,end:pt}):Et},Ce.after=function(ge,Ae){var Ve=Ks.fromDurationLike(Ae),pt=Hn(ge);return Ce.fromDateTimes(pt,pt.plus(Ve))},Ce.before=function(ge,Ae){var Ve=Ks.fromDurationLike(Ae),pt=Hn(ge);return Ce.fromDateTimes(pt.minus(Ve),pt)},Ce.fromISO=function(ge,Ae){var Ve=(ge||"").split("/",2),pt=Ve[0],Et=Ve[1];if(pt&&Et){var xt,kt,dr,ar;try{kt=(xt=xs.fromISO(pt,Ae)).isValid}catch(Vr){kt=!1}try{ar=(dr=xs.fromISO(Et,Ae)).isValid}catch(Vr){ar=!1}if(kt&&ar)return Ce.fromDateTimes(xt,dr);if(kt){var mr=Ks.fromISO(Et,Ae);if(mr.isValid)return Ce.after(xt,mr)}else if(ar){var Lr=Ks.fromISO(pt,Ae);if(Lr.isValid)return Ce.before(dr,Lr)}}return Ce.invalid("unparsable",'the input "'+ge+"\" can't be parsed as ISO 8601")},Ce.isInterval=function(ge){return ge&&ge.isLuxonInterval||!1};var Re=Ce.prototype;return Re.length=function(ge){return void 0===ge&&(ge="milliseconds"),this.isValid?this.toDuration.apply(this,[ge]).get(ge):NaN},Re.count=function(ge){if(void 0===ge&&(ge="milliseconds"),!this.isValid)return NaN;var Ae=this.start.startOf(ge),Ve=this.end.startOf(ge);return Math.floor(Ve.diff(Ae,ge).get(ge))+1},Re.hasSame=function(ge){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,ge))},Re.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},Re.isAfter=function(ge){return!!this.isValid&&this.s>ge},Re.isBefore=function(ge){return!!this.isValid&&this.e<=ge},Re.contains=function(ge){return!!this.isValid&&this.s<=ge&&this.e>ge},Re.set=function(ge){var Ae=void 0===ge?{}:ge;return this.isValid?Ce.fromDateTimes(Ae.start||this.s,Ae.end||this.e):this},Re.splitAt=function(){var ge=this;if(!this.isValid)return[];for(var Ae=arguments.length,Ve=new Array(Ae),pt=0;pt<Ae;pt++)Ve[pt]=arguments[pt];for(var Et=Ve.map(Hn).filter(function(Lr){return ge.contains(Lr)}).sort(),xt=[],kt=this.s,dr=0;kt<this.e;){var ar=Et[dr]||this.e,mr=+ar>+this.e?this.e:ar;xt.push(Ce.fromDateTimes(kt,mr)),kt=mr,dr+=1}return xt},Re.splitBy=function(ge){var Ae=Ks.fromDurationLike(ge);if(!this.isValid||!Ae.isValid||0===Ae.as("milliseconds"))return[];for(var Et,Ve=this.s,pt=1,xt=[];Ve<this.e;){var kt=this.start.plus(Ae.mapUnits(function(dr){return dr*pt}));xt.push(Ce.fromDateTimes(Ve,Et=+kt>+this.e?this.e:kt)),Ve=Et,pt+=1}return xt},Re.divideEqually=function(ge){return this.isValid?this.splitBy(this.length()/ge).slice(0,ge):[]},Re.overlaps=function(ge){return this.e>ge.s&&this.s<ge.e},Re.abutsStart=function(ge){return!!this.isValid&&+this.e==+ge.s},Re.abutsEnd=function(ge){return!!this.isValid&&+ge.e==+this.s},Re.engulfs=function(ge){return!!this.isValid&&this.s<=ge.s&&this.e>=ge.e},Re.equals=function(ge){return!(!this.isValid||!ge.isValid)&&this.s.equals(ge.s)&&this.e.equals(ge.e)},Re.intersection=function(ge){if(!this.isValid)return this;var Ae=this.s>ge.s?this.s:ge.s,Ve=this.e<ge.e?this.e:ge.e;return Ae>=Ve?null:Ce.fromDateTimes(Ae,Ve)},Re.union=function(ge){return this.isValid?Ce.fromDateTimes(this.s<ge.s?this.s:ge.s,this.e>ge.e?this.e:ge.e):this},Ce.merge=function(ge){var Ae=ge.sort(function(Et,xt){return Et.s-xt.s}).reduce(function(Et,xt){var kt=Et[0],dr=Et[1];return dr?dr.overlaps(xt)||dr.abutsStart(xt)?[kt,dr.union(xt)]:[kt.concat([dr]),xt]:[kt,xt]},[[],null]),Ve=Ae[0],pt=Ae[1];return pt&&Ve.push(pt),Ve},Ce.xor=function(ge){for(var Ae,mr,Ve=null,pt=0,Et=[],xt=ge.map(function(Vr){return[{time:Vr.s,type:"s"},{time:Vr.e,type:"e"}]}),ar=X((Ae=Array.prototype).concat.apply(Ae,xt).sort(function(Vr,os){return Vr.time-os.time}));!(mr=ar()).done;){var Lr=mr.value;1===(pt+="s"===Lr.type?1:-1)?Ve=Lr.time:(Ve&&+Ve!=+Lr.time&&Et.push(Ce.fromDateTimes(Ve,Lr.time)),Ve=null)}return Ce.merge(Et)},Re.difference=function(){for(var ge=this,Ae=arguments.length,Ve=new Array(Ae),pt=0;pt<Ae;pt++)Ve[pt]=arguments[pt];return Ce.xor([this].concat(Ve)).map(function(Et){return ge.intersection(Et)}).filter(function(Et){return Et&&!Et.isEmpty()})},Re.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":Si},Re.toISO=function(ge){return this.isValid?this.s.toISO(ge)+"/"+this.e.toISO(ge):Si},Re.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():Si},Re.toISOTime=function(ge){return this.isValid?this.s.toISOTime(ge)+"/"+this.e.toISOTime(ge):Si},Re.toFormat=function(ge,Ae){var pt=(void 0===Ae?{}:Ae).separator,Et=void 0===pt?" \u2013 ":pt;return this.isValid?""+this.s.toFormat(ge)+Et+this.e.toFormat(ge):Si},Re.toDuration=function(ge,Ae){return this.isValid?this.e.diff(this.s,ge,Ae):Ks.invalid(this.invalidReason)},Re.mapEndpoints=function(ge){return Ce.fromDateTimes(ge(this.s),ge(this.e))},b(Ce,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),Ce}(),Vi=function(){function Ce(){}return Ce.hasDST=function(Te){void 0===Te&&(Te=Er.defaultZone);var ge=xs.now().setZone(Te).set({month:12});return!Te.isUniversal&&ge.offset!==ge.set({month:6}).offset},Ce.isValidIANAZone=function(Te){return Ns.isValidZone(Te)},Ce.normalizeZone=function(Te){return Ds(Te,Er.defaultZone)},Ce.months=function(Te,ge){void 0===Te&&(Te="long");var Ae=void 0===ge?{}:ge,Ve=Ae.locale,Et=Ae.numberingSystem,kt=Ae.locObj,ar=Ae.outputCalendar;return((void 0===kt?null:kt)||is.create(void 0===Ve?null:Ve,void 0===Et?null:Et,void 0===ar?"gregory":ar)).months(Te)},Ce.monthsFormat=function(Te,ge){void 0===Te&&(Te="long");var Ae=void 0===ge?{}:ge,Ve=Ae.locale,Et=Ae.numberingSystem,kt=Ae.locObj,ar=Ae.outputCalendar;return((void 0===kt?null:kt)||is.create(void 0===Ve?null:Ve,void 0===Et?null:Et,void 0===ar?"gregory":ar)).months(Te,!0)},Ce.weekdays=function(Te,ge){void 0===Te&&(Te="long");var Ae=void 0===ge?{}:ge,Ve=Ae.locale,Et=Ae.numberingSystem,kt=Ae.locObj;return((void 0===kt?null:kt)||is.create(void 0===Ve?null:Ve,void 0===Et?null:Et,null)).weekdays(Te)},Ce.weekdaysFormat=function(Te,ge){void 0===Te&&(Te="long");var Ae=void 0===ge?{}:ge,Ve=Ae.locale,Et=Ae.numberingSystem,kt=Ae.locObj;return((void 0===kt?null:kt)||is.create(void 0===Ve?null:Ve,void 0===Et?null:Et,null)).weekdays(Te,!0)},Ce.meridiems=function(Te){var Ae=(void 0===Te?{}:Te).locale;return is.create(void 0===Ae?null:Ae).meridiems()},Ce.eras=function(Te,ge){void 0===Te&&(Te="short");var Ve=(void 0===ge?{}:ge).locale;return is.create(void 0===Ve?null:Ve,null,"gregory").eras(Te)},Ce.features=function(){return{relative:$e()}},Ce}();function ra(Ce,Re){var Te=function(Ve){return Ve.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},ge=Te(Re)-Te(Ce);return Math.floor(Ks.fromMillis(ge).as("days"))}var Oo={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},na={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},oi=Oo.hanidec.replace(/[\[|\]]/g,"").split("");function bn(Ce,Re){return void 0===Re&&(Re=""),new RegExp(""+Oo[Ce.numberingSystem||"latn"]+Re)}function cs(Ce,Re){return void 0===Re&&(Re=function(ge){return ge}),{regex:Ce,deser:function(ge){return Re(function Ti(Ce){var Re=parseInt(Ce,10);if(isNaN(Re)){Re="";for(var Te=0;Te<Ce.length;Te++){var ge=Ce.charCodeAt(Te);if(-1!==Ce[Te].search(Oo.hanidec))Re+=oi.indexOf(Ce[Te]);else for(var Ae in na){var Ve=na[Ae],pt=Ve[0];ge>=pt&&ge<=Ve[1]&&(Re+=ge-pt)}}return parseInt(Re,10)}return Re}(ge[0]))}}}var Os="( |"+String.fromCharCode(160)+")",$i=new RegExp(Os,"g");function So(Ce){return Ce.replace(/\./g,"\\.?").replace($i,Os)}function zi(Ce){return Ce.replace(/\./g,"").replace($i," ").toLowerCase()}function Ps(Ce,Re){return null===Ce?null:{regex:RegExp(Ce.map(So).join("|")),deser:function(ge){var Ae=ge[0];return Ce.findIndex(function(Ve){return zi(Ae)===zi(Ve)})+Re}}}function To(Ce,Re){return{regex:Ce,deser:function(ge){return hr(ge[1],ge[2])},groups:Re}}function Do(Ce){return{regex:Ce,deser:function(Te){return Te[0]}}}function Lu(Ce){return Ce.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var ju={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},Io=null;function aa(Ce,Re,Te){var ge=function yl(Ce,Re){var Te;return(Te=Array.prototype).concat.apply(Te,Ce.map(function(ge){return function ml(Ce,Re){if(Ce.literal)return Ce;var Te=Qr.macroTokenToFormatOpts(Ce.val);if(!Te)return Ce;var Ve=Qr.create(Re,Te).formatDateTimeParts(function fl(){return Io||(Io=xs.fromMillis(1555555555555)),Io}()).map(function(pt){return function Uu(Ce,Re,Te){var ge=Ce.type;if("literal"===ge)return{literal:!0,val:Ce.value};var pt=ju[ge];return"object"==typeof pt&&(pt=pt[Te[ge]]),pt?{literal:!1,val:pt}:void 0}(pt,0,Te)});return Ve.includes(void 0)?Ce:Ve}(ge,Re)}))}(Qr.parseFormat(Te),Ce),Ae=ge.map(function(Fr){return function Ru(Ce,Re){var Te=bn(Re),ge=bn(Re,"{2}"),Ae=bn(Re,"{3}"),Ve=bn(Re,"{4}"),pt=bn(Re,"{6}"),Et=bn(Re,"{1,2}"),xt=bn(Re,"{1,3}"),kt=bn(Re,"{1,6}"),dr=bn(Re,"{1,9}"),ar=bn(Re,"{2,4}"),mr=bn(Re,"{4,6}"),Lr=function(Fr){return{regex:RegExp(Lu(Fr.val)),deser:function(ci){return ci[0]},literal:!0}},os=function(Fr){if(Ce.literal)return Lr(Fr);switch(Fr.val){case"G":return Ps(Re.eras("short",!1),0);case"GG":return Ps(Re.eras("long",!1),0);case"y":return cs(kt);case"yy":case"kk":return cs(ar,vr);case"yyyy":case"kkkk":return cs(Ve);case"yyyyy":return cs(mr);case"yyyyyy":return cs(pt);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return cs(Et);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return cs(ge);case"MMM":return Ps(Re.months("short",!0,!1),1);case"MMMM":return Ps(Re.months("long",!0,!1),1);case"LLL":return Ps(Re.months("short",!1,!1),1);case"LLLL":return Ps(Re.months("long",!1,!1),1);case"o":case"S":return cs(xt);case"ooo":case"SSS":return cs(Ae);case"u":return Do(dr);case"uu":return Do(Et);case"uuu":case"E":case"c":return cs(Te);case"a":return Ps(Re.meridiems(),0);case"EEE":return Ps(Re.weekdays("short",!1,!1),1);case"EEEE":return Ps(Re.weekdays("long",!1,!1),1);case"ccc":return Ps(Re.weekdays("short",!0,!1),1);case"cccc":return Ps(Re.weekdays("long",!0,!1),1);case"Z":case"ZZ":return To(new RegExp("([+-]"+Et.source+")(?::("+ge.source+"))?"),2);case"ZZZ":return To(new RegExp("([+-]"+Et.source+")("+ge.source+")?"),2);case"z":return Do(/[a-z_+-/]{1,256}?/i);default:return Lr(Fr)}}(Ce)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return os.token=Ce,os}(Fr,Ce)}),Ve=Ae.find(function(Fr){return Fr.invalidReason});if(Ve)return{input:Re,tokens:ge,invalidReason:Ve.invalidReason};var pt=function hl(Ce){return["^"+Ce.map(function(Te){return Te.regex}).reduce(function(Te,ge){return Te+"("+ge.source+")"},"")+"$",Ce]}(Ae),xt=pt[1],kt=RegExp(pt[0],"i"),dr=function pl(Ce,Re,Te){var ge=Ce.match(Re);if(ge){var Ae={},Ve=1;for(var pt in Te)if(qe(Te,pt)){var Et=Te[pt],xt=Et.groups?Et.groups+1:1;!Et.literal&&Et.token&&(Ae[Et.token.val[0]]=Et.deser(ge.slice(Ve,Ve+xt))),Ve+=xt}return[ge,Ae]}return[ge,{}]}(Re,kt,xt),ar=dr[0],mr=dr[1],Lr=mr?function oa(Ce){var ge,Te=null;return xe(Ce.z)||(Te=Ns.create(Ce.z)),xe(Ce.Z)||(Te||(Te=new ls(Ce.Z)),ge=Ce.Z),xe(Ce.q)||(Ce.M=3*(Ce.q-1)+1),xe(Ce.h)||(Ce.h<12&&1===Ce.a?Ce.h+=12:12===Ce.h&&0===Ce.a&&(Ce.h=0)),0===Ce.G&&Ce.y&&(Ce.y=-Ce.y),xe(Ce.u)||(Ce.S=mt(Ce.u)),[Object.keys(Ce).reduce(function(Ve,pt){var Et=function(pt){switch(pt){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}}(pt);return Et&&(Ve[Et]=Ce[pt]),Ve},{}),Te,ge]}(mr):[null,null,void 0],Vr=Lr[0],os=Lr[1],ns=Lr[2];if(qe(mr,"a")&&qe(mr,"H"))throw new x("Can't include meridiem when specifying 24-hour format");return{input:Re,tokens:ge,regex:kt,rawMatches:ar,matches:mr,result:Vr,zone:os,specificOffset:ns}}var la=[0,31,59,90,120,151,181,212,243,273,304,334],ua=[0,31,60,91,121,152,182,213,244,274,305,335];function mn(Ce,Re){return new Zr("unit out of range","you specified "+Re+" (of type "+typeof Re+") as a "+Ce+", which is invalid")}function wo(Ce,Re,Te){var ge=new Date(Date.UTC(Ce,Re-1,Te));Ce<100&&Ce>=0&&ge.setUTCFullYear(ge.getUTCFullYear()-1900);var Ae=ge.getUTCDay();return 0===Ae?7:Ae}function ca(Ce,Re,Te){return Te+(Bt(Ce)?ua:la)[Re-1]}function Gi(Ce,Re){var Te=Bt(Ce)?ua:la,ge=Te.findIndex(function(Ve){return Ve<Re});return{month:ge+1,day:Re-Te[ge]}}function Hi(Ce){var Et,Re=Ce.year,Te=Ce.month,ge=Ce.day,Ae=ca(Re,Te,ge),Ve=wo(Re,Te,ge),pt=Math.floor((Ae-Ve+10)/7);return pt<1?pt=er(Et=Re-1):pt>er(Re)?(Et=Re+1,pt=1):Et=Re,J({weekYear:Et,weekNumber:pt,weekday:Ve},Lt(Ce))}function ki(Ce){var Et,Re=Ce.weekYear,Te=Ce.weekNumber,ge=Ce.weekday,Ae=wo(Re,1,4),Ve=$t(Re),pt=7*Te+ge-Ae-3;pt<1?pt+=$t(Et=Re-1):pt>Ve?(Et=Re+1,pt-=$t(Re)):Et=Re;var xt=Gi(Et,pt);return J({year:Et,month:xt.month,day:xt.day},Lt(Ce))}function xo(Ce){var Re=Ce.year;return J({year:Re,ordinal:ca(Re,Ce.month,Ce.day)},Lt(Ce))}function Ji(Ce){var Re=Ce.year,ge=Gi(Re,Ce.ordinal);return J({year:Re,month:ge.month,day:ge.day},Lt(Ce))}function Yi(Ce){var Re=Y(Ce.year),Te=ke(Ce.month,1,12),ge=ke(Ce.day,1,qt(Ce.year,Ce.month));return Re?Te?!ge&&mn("day",Ce.day):mn("month",Ce.month):mn("year",Ce.year)}function Di(Ce){var Re=Ce.hour,Te=Ce.minute,ge=Ce.second,Ae=Ce.millisecond,Ve=ke(Re,0,23)||24===Re&&0===Te&&0===ge&&0===Ae,pt=ke(Te,0,59),Et=ke(ge,0,59),xt=ke(Ae,0,999);return Ve?pt?Et?!xt&&mn("millisecond",Ae):mn("second",ge):mn("minute",Te):mn("hour",Re)}var ai="Invalid DateTime",da=864e13;function Qi(Ce){return new Zr("unsupported zone",'the zone "'+Ce.name+'" is not supported')}function li(Ce){return null===Ce.weekData&&(Ce.weekData=Hi(Ce.c)),Ce.weekData}function Ii(Ce,Re){var Te={ts:Ce.ts,zone:Ce.zone,c:Ce.c,o:Ce.o,loc:Ce.loc,invalid:Ce.invalid};return new xs(J({},Te,Re,{old:Te}))}function Ao(Ce,Re,Te){var ge=Ce-60*Re*1e3,Ae=Te.offset(ge);if(Re===Ae)return[ge,Re];var Ve=Te.offset(ge-=60*(Ae-Re)*1e3);return Ae===Ve?[ge,Ae]:[Ce-60*Math.min(Ae,Ve)*1e3,Math.max(Ae,Ve)]}function Lo(Ce,Re){var Te=new Date(Ce+=60*Re*1e3);return{year:Te.getUTCFullYear(),month:Te.getUTCMonth()+1,day:Te.getUTCDate(),hour:Te.getUTCHours(),minute:Te.getUTCMinutes(),second:Te.getUTCSeconds(),millisecond:Te.getUTCMilliseconds()}}function Xi(Ce,Re,Te){return Ao(gr(Ce),Re,Te)}function Ro(Ce,Re){var Te=Ce.o,ge=Ce.c.year+Math.trunc(Re.years),Ae=Ce.c.month+Math.trunc(Re.months)+3*Math.trunc(Re.quarters),Ve=J({},Ce.c,{year:ge,month:Ae,day:Math.min(Ce.c.day,qt(ge,Ae))+Math.trunc(Re.days)+7*Math.trunc(Re.weeks)}),pt=Ks.fromObject({years:Re.years-Math.trunc(Re.years),quarters:Re.quarters-Math.trunc(Re.quarters),months:Re.months-Math.trunc(Re.months),weeks:Re.weeks-Math.trunc(Re.weeks),days:Re.days-Math.trunc(Re.days),hours:Re.hours,minutes:Re.minutes,seconds:Re.seconds,milliseconds:Re.milliseconds}).as("milliseconds"),xt=Ao(gr(Ve),Te,Ce.zone),kt=xt[0],dr=xt[1];return 0!==pt&&(dr=Ce.zone.offset(kt+=pt)),{ts:kt,o:dr}}function ps(Ce,Re,Te,ge,Ae,Ve){var pt=Te.setZone,Et=Te.zone;if(Ce&&0!==Object.keys(Ce).length){var kt=xs.fromObject(Ce,J({},Te,{zone:Re||Et,specificOffset:Ve}));return pt?kt:kt.setZone(Et)}return xs.invalid(new Zr("unparsable",'the input "'+Ae+"\" can't be parsed as "+ge))}function ui(Ce,Re,Te){return void 0===Te&&(Te=!0),Ce.isValid?Qr.create(is.create("en-US"),{allowZ:Te,forceSimple:!0}).formatDateTimeFromString(Ce,Re):null}function ha(Ce,Re){var Te=Ce.c.year>9999||Ce.c.year<0,ge="";return Te&&Ce.c.year>=0&&(ge+="+"),ge+=We(Ce.c.year,Te?6:4),Re?(ge+="-",ge+=We(Ce.c.month),ge+="-",ge+=We(Ce.c.day)):(ge+=We(Ce.c.month),ge+=We(Ce.c.day)),ge}function jo(Ce,Re,Te,ge,Ae){var Ve=We(Ce.c.hour);return Re?(Ve+=":",Ve+=We(Ce.c.minute),(0!==Ce.c.second||!Te)&&(Ve+=":")):Ve+=We(Ce.c.minute),(0!==Ce.c.second||!Te)&&(Ve+=We(Ce.c.second),(0!==Ce.c.millisecond||!ge)&&(Ve+=".",Ve+=We(Ce.c.millisecond,3))),Ae&&(Ce.isOffsetFixed&&0===Ce.offset?Ve+="Z":Ce.o<0?(Ve+="-",Ve+=We(Math.trunc(-Ce.o/60)),Ve+=":",Ve+=We(Math.trunc(-Ce.o%60))):(Ve+="+",Ve+=We(Math.trunc(Ce.o/60)),Ve+=":",Ve+=We(Math.trunc(Ce.o%60)))),Ve}var On={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Gs={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},pa={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Vs=["year","month","day","hour","minute","second","millisecond"],vl=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],qi=["year","ordinal","hour","minute","second","millisecond"];function Un(Ce){var Re={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[Ce.toLowerCase()];if(!Re)throw new N(Ce);return Re}function Uo(Ce,Re){var Ve,pt,Te=Ds(Re.zone,Er.defaultZone),ge=is.fromObject(Re),Ae=Er.now();if(xe(Ce.year))Ve=Ae;else{for(var xt,Et=X(Vs);!(xt=Et()).done;){var kt=xt.value;xe(Ce[kt])&&(Ce[kt]=On[kt])}var dr=Yi(Ce)||Di(Ce);if(dr)return xs.invalid(dr);var mr=Xi(Ce,Te.offset(Ae),Te);Ve=mr[0],pt=mr[1]}return new xs({ts:Ve,zone:Te,loc:ge,o:pt})}function fa(Ce,Re,Te){var ge=!!xe(Te.round)||Te.round,Ae=function(ar,mr){return ar=Kt(ar,ge||Te.calendary?0:2,!0),Re.loc.clone(Te).relFormatter(Te).format(ar,mr)},Ve=function(ar){return Te.calendary?Re.hasSame(Ce,ar)?0:Re.startOf(ar).diff(Ce.startOf(ar),ar).get(ar):Re.diff(Ce,ar).get(ar)};if(Te.unit)return Ae(Ve(Te.unit),Te.unit);for(var Et,pt=X(Te.units);!(Et=pt()).done;){var xt=Et.value,kt=Ve(xt);if(Math.abs(kt)>=1)return Ae(kt,xt)}return Ae(Ce>Re?-0:0,Te.units[Te.units.length-1])}function wi(Ce){var Te,Re={};return Ce.length>0&&"object"==typeof Ce[Ce.length-1]?(Re=Ce[Ce.length-1],Te=Array.from(Ce).slice(0,Ce.length-1)):Te=Array.from(Ce),[Re,Te]}var xs=function(){function Ce(Te){var ge=Te.zone||Er.defaultZone,Ae=Te.invalid||(Number.isNaN(Te.ts)?new Zr("invalid input"):null)||(ge.isValid?null:Qi(ge));this.ts=xe(Te.ts)?Er.now():Te.ts;var Ve=null,pt=null;if(!Ae)if(Te.old&&Te.old.ts===this.ts&&Te.old.zone.equals(ge)){var xt=[Te.old.c,Te.old.o];Ve=xt[0],pt=xt[1]}else{var kt=ge.offset(this.ts);Ve=Lo(this.ts,kt),Ve=(Ae=Number.isNaN(Ve.year)?new Zr("invalid input"):null)?null:Ve,pt=Ae?null:kt}this._zone=ge,this.loc=Te.loc||is.create(),this.invalid=Ae,this.weekData=null,this.c=Ve,this.o=pt,this.isLuxonDateTime=!0}Ce.now=function(){return new Ce({})},Ce.local=function(){var ge=wi(arguments),Ae=ge[0],Ve=ge[1],pt=Ve[0],Et=Ve[1],xt=Ve[2],kt=Ve[3],dr=Ve[4],ar=Ve[5],mr=Ve[6];return Uo({year:pt,month:Et,day:xt,hour:kt,minute:dr,second:ar,millisecond:mr},Ae)},Ce.utc=function(){var ge=wi(arguments),Ae=ge[0],Ve=ge[1],pt=Ve[0],Et=Ve[1],xt=Ve[2],kt=Ve[3],dr=Ve[4],ar=Ve[5],mr=Ve[6];return Ae.zone=ls.utcInstance,Uo({year:pt,month:Et,day:xt,hour:kt,minute:dr,second:ar,millisecond:mr},Ae)},Ce.fromJSDate=function(ge,Ae){void 0===Ae&&(Ae={});var Ve=function Ie(Ce){return"[object Date]"===Object.prototype.toString.call(Ce)}(ge)?ge.valueOf():NaN;if(Number.isNaN(Ve))return Ce.invalid("invalid input");var pt=Ds(Ae.zone,Er.defaultZone);return pt.isValid?new Ce({ts:Ve,zone:pt,loc:is.fromObject(Ae)}):Ce.invalid(Qi(pt))},Ce.fromMillis=function(ge,Ae){if(void 0===Ae&&(Ae={}),Be(ge))return ge<-da||ge>da?Ce.invalid("Timestamp out of range"):new Ce({ts:ge,zone:Ds(Ae.zone,Er.defaultZone),loc:is.fromObject(Ae)});throw new M("fromMillis requires a numerical input, but received a "+typeof ge+" with value "+ge)},Ce.fromSeconds=function(ge,Ae){if(void 0===Ae&&(Ae={}),Be(ge))return new Ce({ts:1e3*ge,zone:Ds(Ae.zone,Er.defaultZone),loc:is.fromObject(Ae)});throw new M("fromSeconds requires a numerical input")},Ce.fromObject=function(ge,Ae){void 0===Ae&&(Ae={}),ge=ge||{};var Ve=Ds(Ae.zone,Er.defaultZone);if(!Ve.isValid)return Ce.invalid(Qi(Ve));var pt=Er.now(),Et=xe(Ae.specificOffset)?Ve.offset(pt):Ae.specificOffset,xt=ft(ge,Un),kt=!xe(xt.ordinal),dr=!xe(xt.year),ar=!xe(xt.month)||!xe(xt.day),mr=dr||ar,Lr=xt.weekYear||xt.weekNumber,Vr=is.fromObject(Ae);if((mr||kt)&&Lr)throw new x("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ar&&kt)throw new x("Can't mix ordinal dates with month/day");var ns,Fr,os=Lr||xt.weekday&&!mr,As=Lo(pt,Et);os?(ns=vl,Fr=Gs,As=Hi(As)):kt?(ns=qi,Fr=pa,As=xo(As)):(ns=Vs,Fr=On);for(var eo,ci=!1,ma=X(ns);!(eo=ma()).done;){var Pn=eo.value;xe(xt[Pn])?xt[Pn]=ci?Fr[Pn]:As[Pn]:ci=!0}var Bu=os?function gl(Ce){var Re=Y(Ce.weekYear),Te=ke(Ce.weekNumber,1,er(Ce.weekYear)),ge=ke(Ce.weekday,1,7);return Re?Te?!ge&&mn("weekday",Ce.weekday):mn("week",Ce.week):mn("weekYear",Ce.weekYear)}(xt):kt?function dn(Ce){var Re=Y(Ce.year),Te=ke(Ce.ordinal,1,$t(Ce.year));return Re?!Te&&mn("ordinal",Ce.ordinal):mn("year",Ce.year)}(xt):Yi(xt),bl=Bu||Di(xt);if(bl)return Ce.invalid(bl);var Ml=Xi(os?ki(xt):kt?Ji(xt):xt,Et,Ve),xi=new Ce({ts:Ml[0],zone:Ve,o:Ml[1],loc:Vr});return xt.weekday&&mr&&ge.weekday!==xi.weekday?Ce.invalid("mismatched weekday","you can't specify both a weekday of "+xt.weekday+" and a date of "+xi.toISO()):xi},Ce.fromISO=function(ge,Ae){void 0===Ae&&(Ae={});var Ve=function qa(Ce){return ts(Ce,[Cr,Yr],[Kr,ms],[Hr,ln],[ss,Rs])}(ge);return ps(Ve[0],Ve[1],Ae,"ISO 8601",ge)},Ce.fromRFC2822=function(ge,Ae){void 0===Ae&&(Ae={});var Ve=function el(Ce){return ts(function we(Ce){return Ce.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(Ce),[Ot,wt])}(ge);return ps(Ve[0],Ve[1],Ae,"RFC 2822",ge)},Ce.fromHTTP=function(ge,Ae){void 0===Ae&&(Ae={});var Ve=function tl(Ce){return ts(Ce,[Fe,Ht],[tt,Ht],[Mt,or])}(ge);return ps(Ve[0],Ve[1],Ae,"HTTP",Ae)},Ce.fromFormat=function(ge,Ae,Ve){if(void 0===Ve&&(Ve={}),xe(ge)||xe(Ae))throw new M("fromFormat requires an input string and a format");var Et=Ve.locale,kt=Ve.numberingSystem,mr=function _l(Ce,Re,Te){var ge=aa(Ce,Re,Te);return[ge.result,ge.zone,ge.specificOffset,ge.invalidReason]}(is.fromOpts({locale:void 0===Et?null:Et,numberingSystem:void 0===kt?null:kt,defaultToEN:!0}),ge,Ae),Lr=mr[0],Vr=mr[1],os=mr[2],ns=mr[3];return ns?Ce.invalid(ns):ps(Lr,Vr,Ve,"format "+Ae,ge,os)},Ce.fromString=function(ge,Ae,Ve){return void 0===Ve&&(Ve={}),Ce.fromFormat(ge,Ae,Ve)},Ce.fromSQL=function(ge,Ae){void 0===Ae&&(Ae={});var Ve=function ol(Ce){return ts(Ce,[rl,nl],[sl,il])}(ge);return ps(Ve[0],Ve[1],Ae,"SQL",ge)},Ce.invalid=function(ge,Ae){if(void 0===Ae&&(Ae=null),!ge)throw new M("need to specify a reason the DateTime is invalid");var Ve=ge instanceof Zr?ge:new Zr(ge,Ae);if(Er.throwOnInvalid)throw new w(Ve);return new Ce({invalid:Ve})},Ce.isDateTime=function(ge){return ge&&ge.isLuxonDateTime||!1};var Re=Ce.prototype;return Re.get=function(ge){return this[ge]},Re.resolvedLocaleOptions=function(ge){void 0===ge&&(ge={});var Ae=Qr.create(this.loc.clone(ge),ge).resolvedOptions(this);return{locale:Ae.locale,numberingSystem:Ae.numberingSystem,outputCalendar:Ae.calendar}},Re.toUTC=function(ge,Ae){return void 0===ge&&(ge=0),void 0===Ae&&(Ae={}),this.setZone(ls.instance(ge),Ae)},Re.toLocal=function(){return this.setZone(Er.defaultZone)},Re.setZone=function(ge,Ae){var Ve=void 0===Ae?{}:Ae,pt=Ve.keepLocalTime,Et=void 0!==pt&&pt,xt=Ve.keepCalendarTime,kt=void 0!==xt&&xt;if((ge=Ds(ge,Er.defaultZone)).equals(this.zone))return this;if(ge.isValid){var dr=this.ts;if(Et||kt){var ar=ge.offset(this.ts);dr=Xi(this.toObject(),ar,ge)[0]}return Ii(this,{ts:dr,zone:ge})}return Ce.invalid(Qi(ge))},Re.reconfigure=function(ge){var Ae=void 0===ge?{}:ge;return Ii(this,{loc:this.loc.clone({locale:Ae.locale,numberingSystem:Ae.numberingSystem,outputCalendar:Ae.outputCalendar})})},Re.setLocale=function(ge){return this.reconfigure({locale:ge})},Re.set=function(ge){if(!this.isValid)return this;var ar,Ae=ft(ge,Un),Ve=!xe(Ae.weekYear)||!xe(Ae.weekNumber)||!xe(Ae.weekday),pt=!xe(Ae.ordinal),Et=!xe(Ae.year),xt=!xe(Ae.month)||!xe(Ae.day);if((Et||xt||pt)&&(Ae.weekYear||Ae.weekNumber))throw new x("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(xt&&pt)throw new x("Can't mix ordinal dates with month/day");Ve?ar=ki(J({},Hi(this.c),Ae)):xe(Ae.ordinal)?(ar=J({},this.toObject(),Ae),xe(Ae.day)&&(ar.day=Math.min(qt(ar.year,ar.month),ar.day))):ar=Ji(J({},xo(this.c),Ae));var mr=Xi(ar,this.o,this.zone);return Ii(this,{ts:mr[0],o:mr[1]})},Re.plus=function(ge){return this.isValid?Ii(this,Ro(this,Ks.fromDurationLike(ge))):this},Re.minus=function(ge){return this.isValid?Ii(this,Ro(this,Ks.fromDurationLike(ge).negate())):this},Re.startOf=function(ge){if(!this.isValid)return this;var Ae={},Ve=Ks.normalizeUnit(ge);switch(Ve){case"years":Ae.month=1;case"quarters":case"months":Ae.day=1;case"weeks":case"days":Ae.hour=0;case"hours":Ae.minute=0;case"minutes":Ae.second=0;case"seconds":Ae.millisecond=0}if("weeks"===Ve&&(Ae.weekday=1),"quarters"===Ve){var pt=Math.ceil(this.month/3);Ae.month=3*(pt-1)+1}return this.set(Ae)},Re.endOf=function(ge){var Ae;return this.isValid?this.plus((Ae={},Ae[ge]=1,Ae)).startOf(ge).minus(1):this},Re.toFormat=function(ge,Ae){return void 0===Ae&&(Ae={}),this.isValid?Qr.create(this.loc.redefaultToEN(Ae)).formatDateTimeFromString(this,ge):ai},Re.toLocaleString=function(ge,Ae){return void 0===ge&&(ge=oe),void 0===Ae&&(Ae={}),this.isValid?Qr.create(this.loc.clone(Ae),ge).formatDateTime(this):ai},Re.toLocaleParts=function(ge){return void 0===ge&&(ge={}),this.isValid?Qr.create(this.loc.clone(ge),ge).formatDateTimeParts(this):[]},Re.toISO=function(ge){var Ae=void 0===ge?{}:ge,Ve=Ae.format,Et=Ae.suppressSeconds,xt=void 0!==Et&&Et,kt=Ae.suppressMilliseconds,dr=void 0!==kt&&kt,ar=Ae.includeOffset,mr=void 0===ar||ar;if(!this.isValid)return null;var Lr="extended"===(void 0===Ve?"extended":Ve),Vr=ha(this,Lr);return(Vr+="T")+jo(this,Lr,xt,dr,mr)},Re.toISODate=function(ge){var Ve=(void 0===ge?{}:ge).format;return this.isValid?ha(this,"extended"===(void 0===Ve?"extended":Ve)):null},Re.toISOWeekDate=function(){return ui(this,"kkkk-'W'WW-c")},Re.toISOTime=function(ge){var Ae=void 0===ge?{}:ge,Ve=Ae.suppressMilliseconds,Et=Ae.suppressSeconds,kt=Ae.includeOffset,ar=Ae.includePrefix,Lr=Ae.format;return this.isValid?(void 0!==ar&&ar?"T":"")+jo(this,"extended"===(void 0===Lr?"extended":Lr),void 0!==Et&&Et,void 0!==Ve&&Ve,void 0===kt||kt):null},Re.toRFC2822=function(){return ui(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},Re.toHTTP=function(){return ui(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},Re.toSQLDate=function(){return this.isValid?ha(this,!0):null},Re.toSQLTime=function(ge){var Ae=void 0===ge?{}:ge,Ve=Ae.includeOffset,pt=void 0===Ve||Ve,Et=Ae.includeZone,xt=void 0!==Et&&Et,kt=Ae.includeOffsetSpace,ar="HH:mm:ss.SSS";return(xt||pt)&&((void 0===kt||kt)&&(ar+=" "),xt?ar+="z":pt&&(ar+="ZZ")),ui(this,ar,!0)},Re.toSQL=function(ge){return void 0===ge&&(ge={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(ge):null},Re.toString=function(){return this.isValid?this.toISO():ai},Re.valueOf=function(){return this.toMillis()},Re.toMillis=function(){return this.isValid?this.ts:NaN},Re.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},Re.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1e3):NaN},Re.toJSON=function(){return this.toISO()},Re.toBSON=function(){return this.toJSDate()},Re.toObject=function(ge){if(void 0===ge&&(ge={}),!this.isValid)return{};var Ae=J({},this.c);return ge.includeConfig&&(Ae.outputCalendar=this.outputCalendar,Ae.numberingSystem=this.loc.numberingSystem,Ae.locale=this.loc.locale),Ae},Re.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},Re.diff=function(ge,Ae,Ve){if(void 0===Ae&&(Ae="milliseconds"),void 0===Ve&&(Ve={}),!this.isValid||!ge.isValid)return Ks.invalid("created by diffing an invalid DateTime");var pt=J({locale:this.locale,numberingSystem:this.numberingSystem},Ve),Et=function rt(Ce){return Array.isArray(Ce)?Ce:[Ce]}(Ae).map(Ks.normalizeUnit),xt=ge.valueOf()>this.valueOf(),ar=function Co(Ce,Re,Te,ge){var ar,Ae=function sa(Ce,Re,Te){for(var Ve,pt,Ae={},Et=0,xt=[["years",function(os,ns){return ns.year-os.year}],["quarters",function(os,ns){return ns.quarter-os.quarter}],["months",function(os,ns){return ns.month-os.month+12*(ns.year-os.year)}],["weeks",function(os,ns){var Fr=ra(os,ns);return(Fr-Fr%7)/7}],["days",ra]];Et<xt.length;Et++){var kt=xt[Et],dr=kt[0],ar=kt[1];if(Te.indexOf(dr)>=0){var mr;Ve=dr;var Vr,Lr=ar(Ce,Re);(pt=Ce.plus(((mr={})[dr]=Lr,mr)))>Re?(Ce=Ce.plus(((Vr={})[dr]=Lr-1,Vr)),Lr-=1):Ce=pt,Ae[dr]=Lr}}return[Ce,Ae,pt,Ve]}(Ce,Re,Te),Ve=Ae[0],pt=Ae[1],Et=Ae[2],xt=Ae[3],kt=Re-Ve,dr=Te.filter(function(Vr){return["hours","minutes","seconds","milliseconds"].indexOf(Vr)>=0});0===dr.length&&(Et<Re&&(Et=Ve.plus(((ar={})[xt]=1,ar))),Et!==Ve&&(pt[xt]=(pt[xt]||0)+kt/(Et-Ve)));var Lr,mr=Ks.fromObject(pt,ge);return dr.length>0?(Lr=Ks.fromMillis(kt,ge)).shiftTo.apply(Lr,dr).plus(mr):mr}(xt?this:ge,xt?ge:this,Et,pt);return xt?ar.negate():ar},Re.diffNow=function(ge,Ae){return void 0===ge&&(ge="milliseconds"),void 0===Ae&&(Ae={}),this.diff(Ce.now(),ge,Ae)},Re.until=function(ge){return this.isValid?Ki.fromDateTimes(this,ge):this},Re.hasSame=function(ge,Ae){if(!this.isValid)return!1;var Ve=ge.valueOf(),pt=this.setZone(ge.zone,{keepLocalTime:!0});return pt.startOf(Ae)<=Ve&&Ve<=pt.endOf(Ae)},Re.equals=function(ge){return this.isValid&&ge.isValid&&this.valueOf()===ge.valueOf()&&this.zone.equals(ge.zone)&&this.loc.equals(ge.loc)},Re.toRelative=function(ge){if(void 0===ge&&(ge={}),!this.isValid)return null;var Ae=ge.base||Ce.fromObject({},{zone:this.zone}),Ve=ge.padding?this<Ae?-ge.padding:ge.padding:0,pt=["years","months","days","hours","minutes","seconds"],Et=ge.unit;return Array.isArray(ge.unit)&&(pt=ge.unit,Et=void 0),fa(Ae,this.plus(Ve),J({},ge,{numeric:"always",units:pt,unit:Et}))},Re.toRelativeCalendar=function(ge){return void 0===ge&&(ge={}),this.isValid?fa(ge.base||Ce.fromObject({},{zone:this.zone}),this,J({},ge,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},Ce.min=function(){for(var ge=arguments.length,Ae=new Array(ge),Ve=0;Ve<ge;Ve++)Ae[Ve]=arguments[Ve];if(!Ae.every(Ce.isDateTime))throw new M("min requires all arguments be DateTimes");return Qe(Ae,function(pt){return pt.valueOf()},Math.min)},Ce.max=function(){for(var ge=arguments.length,Ae=new Array(ge),Ve=0;Ve<ge;Ve++)Ae[Ve]=arguments[Ve];if(!Ae.every(Ce.isDateTime))throw new M("max requires all arguments be DateTimes");return Qe(Ae,function(pt){return pt.valueOf()},Math.max)},Ce.fromFormatExplain=function(ge,Ae,Ve){void 0===Ve&&(Ve={});var Et=Ve.locale,kt=Ve.numberingSystem;return aa(is.fromOpts({locale:void 0===Et?null:Et,numberingSystem:void 0===kt?null:kt,defaultToEN:!0}),ge,Ae)},Ce.fromStringExplain=function(ge,Ae,Ve){return void 0===Ve&&(Ve={}),Ce.fromFormatExplain(ge,Ae,Ve)},b(Ce,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?li(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?li(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?li(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?xo(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?Vi.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?Vi.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?Vi.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?Vi.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return!this.isOffsetFixed&&(this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset)}},{key:"isInLeapYear",get:function(){return Bt(this.year)}},{key:"daysInMonth",get:function(){return qt(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?$t(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?er(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return oe}},{key:"DATE_MED",get:function(){return ce}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return re}},{key:"DATE_FULL",get:function(){return K}},{key:"DATE_HUGE",get:function(){return ae}},{key:"TIME_SIMPLE",get:function(){return se}},{key:"TIME_WITH_SECONDS",get:function(){return de}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return ue}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return pe}},{key:"TIME_24_SIMPLE",get:function(){return ie}},{key:"TIME_24_WITH_SECONDS",get:function(){return te}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return Ee}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return fe}},{key:"DATETIME_SHORT",get:function(){return be}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return ye}},{key:"DATETIME_MED",get:function(){return Ke}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return Ue}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return he}},{key:"DATETIME_FULL",get:function(){return Me}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return Le}},{key:"DATETIME_HUGE",get:function(){return Je}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Oe}}]),Ce}();function Hn(Ce){if(xs.isDateTime(Ce))return Ce;if(Ce&&Ce.valueOf&&Be(Ce.valueOf()))return xs.fromJSDate(Ce);if(Ce&&"object"==typeof Ce)return xs.fromObject(Ce);throw new M("Unknown datetime argument: "+Ce+", of type "+typeof Ce)}ve.ou=xs},47394:He=>{function ve(p){return Promise.resolve().then(()=>{var g=new Error("Cannot find module '"+p+"'");throw g.code="MODULE_NOT_FOUND",g})}ve.keys=()=>[],ve.resolve=ve,ve.id=47394,He.exports=ve},73386:(He,ve,p)=>{"use strict";p.r(ve),p.d(ve,{default:()=>ce});var z,g=p(15861),b=p(17626),J=p(48701),B=p(89726),j=p(55538),C=p(86810),$=p(58817),L=p(47996),D=p(47877),I=p(63290),W=p(62208),k=p(10699),Z=p(21726),X=p(77712),w=(p(90912),p(76898)),T=p(99433),O=p(65234),x=p(84687),N=p(55463),M=p(33954),Q=p(32584);let ee=0;const le=I.Z.getLogger("esri.Basemap");let oe=z=class extends((0,C.eC)(L.Z)){constructor(re){super(re),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+ee++,this.baseLayers=new J.Z,this.referenceLayers=new J.Z;const K=se=>{se.parent&&se.parent!==this&&"remove"in se.parent&&se.parent.remove(se),se.parent=this,"elevation"===se.type&&le.error(`Layer '${se.title}, id:${se.id}' of type '${se.type}' is not supported as a basemap layer and will therefore be ignored.`)},ae=se=>{se.parent=null};this.baseLayers.on("after-add",se=>K(se.item)),this.referenceLayers.on("after-add",se=>K(se.item)),this.baseLayers.on("after-remove",se=>ae(se.item)),this.referenceLayers.on("after-remove",se=>ae(se.item))}initialize(){this.when().catch(re=>{le.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,re)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var re;const K=this.baseLayers.removeAll();for(const se of K)se.destroy();const ae=this.referenceLayers.removeAll();for(const se of ae)se.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),null==(re=this.portalItem)||re.destroy(),this.portalItem=null}normalizeCtorArgs(re){return re&&"resourceInfo"in re&&(this._set("resourceInfo",re.resourceInfo),delete(re=_t({},re)).resourceInfo),re}set baseLayers(re){this._set("baseLayers",(0,B.Z)(re,this._get("baseLayers")))}_writeBaseLayers(re,K,ae){const se=[];re&&(ae=Sr(_t({},ae),{layerContainerType:"basemap"}),this.baseLayers.forEach(de=>{const ue=(0,Q.Nw)(de,ae.webmap?ae.webmap.getLayerJSONFromResourceInfo(de):null,ae);(0,W.pC)(ue)&&se.push(ue)}),this.referenceLayers.forEach(de=>{const ue=(0,Q.Nw)(de,ae.webmap?ae.webmap.getLayerJSONFromResourceInfo(de):null,ae);(0,W.pC)(ue)&&(ue.isReference=!0,se.push(ue))})),K.baseMapLayers=se}set referenceLayers(re){this._set("referenceLayers",(0,B.Z)(re,this._get("referenceLayers")))}writeTitle(re,K){K.title=re||"Basemap"}load(re){return this.addResolvingPromise(this._loadFromSource(re)),Promise.resolve(this)}loadAll(){return(0,D.G)(this,re=>{re(this.baseLayers,this.referenceLayers)})}clone(){const re={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(re.loadStatus="loaded"),new z({resourceInfo:this.resourceInfo}).set(re)}read(re,K){this.resourceInfo||this._set("resourceInfo",{data:re,context:K}),super.read(re,K)}write(re,K){return re=re||{},K&&K.origin||(K=_t({origin:"web-map"},K)),super.write(re,K),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(re.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(ae=>{const se=(0,$.d9)(ae);return se.url&&(0,Z.oC)(se.url)&&(se.url=`https:${se.url}`),se.templateUrl&&(0,Z.oC)(se.templateUrl)&&(se.templateUrl=`https:${se.templateUrl}`),se})),re}_loadFromSource(re){var K=this;return(0,g.Z)(function*(){const{resourceInfo:ae,portalItem:se}=K;(0,k.k_)(re);const de=[];ae?(de.push(K._loadLayersFromJSON(ae.data,ae.context?ae.context.url:null,re)),ae.data.id&&!ae.data.title&&de.push((0,M.g)(ae.data.id).then(ie=>{ie&&K.read({title:ie},ae.context)}))):se&&de.push(K._loadFromItem(se,re)),yield Promise.all(de)})()}_loadLayersFromJSON(re,K,ae){var se=this;return(0,g.Z)(function*(){const de=se.resourceInfo&&se.resourceInfo.context,ue=se.portalItem&&se.portalItem.portal||de&&de.portal||null,pe=de&&"web-scene"===de.origin?"web-scene":"web-map",{populateOperationalLayers:ie}=yield Promise.all([p.e(7534),p.e(1074)]).then(p.bind(p,71074)),te=[];if((0,k.k_)(ae),re.baseMapLayers&&Array.isArray(re.baseMapLayers)){const Ee={context:{origin:pe,url:K,portal:ue,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},fe=ie(se.baseLayers,re.baseMapLayers.filter(ye=>!ye.isReference),Ee);te.push(fe);const be=ie(se.referenceLayers,re.baseMapLayers.filter(ye=>ye.isReference),Ee);te.push(be)}yield(0,k.as)(te)})()}_loadFromItem(re,K){var ae=this;return(0,g.Z)(function*(){const se=yield re.load(K),de=yield se.fetchData("json",K),ue=(0,Z.mN)(re.itemUrl);return ae._set("resourceInfo",{data:de.baseMap,context:{origin:"web-map",portal:re.portal||x.Z.getDefault(),url:ue}}),ae.read(ae.resourceInfo.data,ae.resourceInfo.context),ae.read({spatialReference:de.spatialReference},ae.resourceInfo.context),ae.read({title:re.title,thumbnailUrl:re.thumbnailUrl},{origin:"portal-item",portal:re.portal||x.Z.getDefault(),url:ue}),ae._loadLayersFromJSON(ae.resourceInfo.data,ue,K)})()}static fromId(re){const K=M.s[re];if(K){if(K.deprecated){let ae=null;"dark-gray"===re?ae="dark-gray-vector":"gray"===re?ae="gray-vector":"streets"===re?ae="streets-vector":"topo"===re&&(ae="topo-vector"),(0,j.x9)(le,`The ${re} basemap has entered mature support and is no longer being updated.`,{replacement:ae,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return z.fromJSON(K)}return null}};(0,b._)([(0,X.Cb)({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(re,K,ae,se){this._writeBaseLayers(re,K,se)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:J.Z}},writer(re,K,ae,se){this._writeBaseLayers(re,K,se)}}}}}})],oe.prototype,"baseLayers",null),(0,b._)([(0,X.Cb)({type:String,json:{origins:{"web-scene":{write:!0}}}})],oe.prototype,"id",void 0),(0,b._)([(0,X.Cb)({type:N.default})],oe.prototype,"portalItem",void 0),(0,b._)([(0,X.Cb)()],oe.prototype,"referenceLayers",null),(0,b._)([(0,X.Cb)({readOnly:!0})],oe.prototype,"resourceInfo",void 0),(0,b._)([(0,X.Cb)({type:O.Z})],oe.prototype,"spatialReference",void 0),(0,b._)([(0,X.Cb)()],oe.prototype,"thumbnailUrl",void 0),(0,b._)([(0,X.Cb)({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],oe.prototype,"title",void 0),(0,b._)([(0,T.c)("title")],oe.prototype,"writeTitle",null),oe=z=(0,b._)([(0,w.j)("esri.Basemap")],oe);const ce=oe},91558:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>L});var D,I,g=p(20414),b=p(21286),J=p(62208),B=p(90912);function j(D){return(0,b.uZ)((0,B.vU)(D),0,255)}function C(D,I,W){return D=Number(D),isNaN(D)?W:D<I?I:D>W?W:D}class ${constructor(I){this.r=255,this.g=255,this.b=255,this.a=1,I&&this.setColor(I)}static blendColors(I,W,k,Z=new $){return Z.r=Math.round(I.r+(W.r-I.r)*k),Z.g=Math.round(I.g+(W.g-I.g)*k),Z.b=Math.round(I.b+(W.b-I.b)*k),Z.a=I.a+(W.a-I.a)*k,Z._sanitize()}static fromRgb(I,W){const k=I.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(k){const Z=k[2].split(/\s*,\s*/),X=k[1];if("rgb"===X&&3===Z.length||"rgba"===X&&4===Z.length){const V=Z[0];if("%"===V.charAt(V.length-1)){const w=Z.map(T=>2.56*parseFloat(T));return 4===Z.length&&(w[3]=parseFloat(Z[3])),$.fromArray(w,W)}return $.fromArray(Z.map(w=>parseFloat(w)),W)}if("hsl"===X&&3===Z.length||"hsla"===X&&4===Z.length)return $.fromArray((0,g.B7)(parseFloat(Z[0]),parseFloat(Z[1])/100,parseFloat(Z[2])/100,parseFloat(Z[3])),W)}return null}static fromHex(I,W=new $){if(4!==I.length&&7!==I.length||"#"!==I[0])return null;const k=4===I.length?4:8,Z=(1<<k)-1;let X=Number("0x"+I.substr(1));return isNaN(X)?null:(["b","g","r"].forEach(V=>{const w=X&Z;X>>=k,W[V]=4===k?17*w:w}),W.a=1,W)}static fromArray(I,W=new $){return W._set(Number(I[0]),Number(I[1]),Number(I[2]),Number(I[3])),isNaN(W.a)&&(W.a=1),W._sanitize()}static fromString(I,W){const k=(0,g.St)(I)?(0,g.h$)(I):null;return k&&$.fromArray(k,W)||$.fromRgb(I,W)||$.fromHex(I,W)}static fromJSON(I){return I&&new $([I[0],I[1],I[2],I[3]/255])}static toUnitRGB(I){return(0,J.pC)(I)?[I.r/255,I.g/255,I.b/255]:null}static toUnitRGBA(I){return(0,J.pC)(I)?[I.r/255,I.g/255,I.b/255,null!=I.a?I.a:1]:null}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(I){if("string"==typeof I)$.fromString(I,this);else if(Array.isArray(I))$.fromArray(I,this);else{var W,k,Z,X;this._set(null!=(W=I.r)?W:0,null!=(k=I.g)?k:0,null!=(Z=I.b)?Z:0,null!=(X=I.a)?X:1),I instanceof $||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const I=this.r.toString(16),W=this.g.toString(16),k=this.b.toString(16);return`#${I.length<2?"0"+I:I}${W.length<2?"0"+W:W}${k.length<2?"0"+k:k}`}toCss(I=!1){const W=this.r+", "+this.g+", "+this.b;return I?`rgba(${W}, ${this.a})`:`rgb(${W})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(I=$.AlphaMode.ALWAYS){const W=j(this.r),k=j(this.g),Z=j(this.b);return I===$.AlphaMode.ALWAYS||1!==this.a?[W,k,Z,j(255*this.a)]:[W,k,Z]}clone(){return new $(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(I){return(0,J.pC)(I)&&I.r===this.r&&I.g===this.g&&I.b===this.b&&I.a===this.a}_sanitize(){return this.r=Math.round(C(this.r,0,255)),this.g=Math.round(C(this.g,0,255)),this.b=Math.round(C(this.b,0,255)),this.a=C(this.a,0,1),this}_set(I,W,k,Z){this.r=I,this.g=W,this.b=k,this.a=Z}}$.prototype.declaredClass="esri.Color",(I=(D=$||($={})).AlphaMode||(D.AlphaMode={}))[I.ALWAYS=0]="ALWAYS",I[I.UNLESS_OPAQUE=1]="UNLESS_OPAQUE";const L=$},88879:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>O});var g=p(17626),b=p(29132),J=p(73281),B=p(65787),j=p(79608),C=p(86810),$=p(62208),L=p(86236),D=p(77712),Z=(p(85931),p(8314),p(90912),p(76898)),X=p(91179);function w(x){if(!(0,$.pC)(x))return null;const N={};for(const M in x){const Q=x[M];Q&&(N[M]=Q.toJSON())}return 0!==Object.keys(N).length?N:null}let T=class extends((0,j.J)(C.wq)){constructor(...x){super(...x),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:(0,L.D)(),configurable:!0})}normalizeCtorArgs(x,N,M,Q){return x&&!x.declaredClass?x:{geometry:x,symbol:N,attributes:M,popupTemplate:Q}}set aggregateGeometries(x){const N=this._get("aggregateGeometries");JSON.stringify(N)!==JSON.stringify(x)&&this._set("aggregateGeometries",x)}set attributes(x){const N=this._get("attributes");N!==x&&(this._set("attributes",x),this._notifyLayer("attributes",N,x))}set geometry(x){const N=this._get("geometry");N!==x&&(this._set("geometry",x),this._notifyLayer("geometry",N,x))}set symbol(x){const N=this._get("symbol");N!==x&&(this._set("symbol",x),this._notifyLayer("symbol",N,x))}set visible(x){const N=this._get("visible");N!==x&&(this._set("visible",x),this._notifyLayer("visible",N,x))}getEffectivePopupTemplate(x=!1){if(this.popupTemplate)return this.popupTemplate;for(const N of[this.sourceLayer,this.layer])if(N){if("popupTemplate"in N&&N.popupTemplate)return N.popupTemplate;if(x&&"defaultPopupTemplate"in N&&(0,$.pC)(N.defaultPopupTemplate))return N.defaultPopupTemplate}return null}getAttribute(x){return this.attributes&&this.attributes[x]}setAttribute(x,N){if(this.attributes){const M=this.getAttribute(x);this.attributes[x]=N,this._notifyLayer("attributes",M,N,x)}else this.attributes={[x]:N},this._notifyLayer("attributes",void 0,N,x)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:w(this.aggregateGeometries),geometry:(0,$.pC)(this.geometry)?this.geometry.toJSON():null,symbol:(0,$.pC)(this.symbol)?this.symbol.toJSON():null,attributes:_t({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){(0,$.pC)(this.geometry)&&"mesh"===this.geometry.type&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(x,N,M,Q){if(!this.layer||!("graphicChanged"in this.layer))return;const z={graphic:this,property:x,oldValue:N,newValue:M};"attributes"===x&&(z.attributeName=Q),this.layer.graphicChanged(z)}};(0,g._)([(0,D.Cb)({value:null,json:{read:function V(x){if(!x)return null;const N={};for(const M in x){const Q=(0,X.im)(x[M]);Q&&(N[M]=Q)}return 0!==Object.keys(N).length?N:null}}})],T.prototype,"aggregateGeometries",null),(0,g._)([(0,D.Cb)({value:null})],T.prototype,"attributes",null),(0,g._)([(0,D.Cb)({value:null,types:b.qM,json:{read:X.im}})],T.prototype,"geometry",null),(0,g._)([(0,D.Cb)({type:Boolean})],T.prototype,"isAggregate",void 0),(0,g._)([(0,D.Cb)({clonable:"reference"})],T.prototype,"layer",void 0),(0,g._)([(0,D.Cb)({type:J.Z})],T.prototype,"popupTemplate",void 0),(0,g._)([(0,D.Cb)({clonable:"reference"})],T.prototype,"sourceLayer",void 0),(0,g._)([(0,D.Cb)({value:null,types:B.LB})],T.prototype,"symbol",null),(0,g._)([(0,D.Cb)({type:Boolean,value:!0})],T.prototype,"visible",null),T=(0,g._)([(0,Z.j)("esri.Graphic")],T),(T||(T={})).generateUID=L.D;const O=T},73281:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>Je});var g=p(15861),b=p(17626),J=p(48701),B=p(86810),j=p(58817),C=p(63290),$=p(10699),L=p(77712),D=p(66656),I=p(68653),W=p(76898),k=p(99433),Z=p(90912),X=p(36630),V=p(55664),w=p(55013),T=p(16615),O=p(82561),x=p(75484),N=p(64531),M=p(501);const z={base:null,key:"type",typeMap:{attachment:V.Z,media:N.Z,text:M.Z,expression:O.Z,field:x.Z}};var re,ee=p(38439),le=p(25621);p(85931),p(8314);let K=re=class extends B.wq{constructor(Oe){super(Oe),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new re({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};(0,b._)([(0,L.Cb)({type:Boolean,json:{write:!0}})],K.prototype,"returnTopmostRaster",void 0),(0,b._)([(0,L.Cb)({type:Boolean,json:{write:!0}})],K.prototype,"showNoDataRecords",void 0),K=re=(0,b._)([(0,W.j)("esri.popup.LayerOptions")],K);const ae=K;var de,se=p(51686);let ue=de=class extends B.wq{constructor(Oe){super(Oe),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new de({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?(0,j.d9)(this.orderByFields):null})}};(0,b._)([(0,L.Cb)({type:Boolean,json:{write:!0}})],ue.prototype,"showRelatedRecords",void 0),(0,b._)([(0,L.Cb)({type:[se.Z],json:{write:!0}})],ue.prototype,"orderByFields",void 0),ue=de=(0,b._)([(0,W.j)("esri.popup.RelatedRecordsInfo")],ue);const pe=ue;var be,ie=p(65560),te=p(59397),Ee=p(48753),fe=p(10671);const ye=J.Z.ofType({key:"type",defaultKeyValue:"button",base:te.Z,typeMap:{button:Ee.Z,toggle:fe.Z}}),Ke={base:w.Z,key:"type",typeMap:{media:N.Z,custom:T.Z,text:M.Z,attachments:V.Z,fields:x.Z,expression:O.Z}},Ue="esri.PopupTemplate",he=C.Z.getLogger(Ue),Me=["attachments","fields","media","text","expression"];let Le=be=class extends B.wq{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(Oe){return Array.isArray(Oe)?Oe.map(xe=>(0,Z.N7)(Ke,xe)):"string"==typeof Oe||"function"==typeof Oe||Oe instanceof HTMLElement||(0,$.y8)(Oe)?Oe:(he.error("content error","unsupported content value",{value:Oe}),null)}readContent(Oe,xe){const{popupElements:Be}=xe;return Array.isArray(Be)&&Be.length>0?this._readPopupInfoElements(xe):this._readPopupInfo(xe)}writeContent(Oe,xe,Be,Y){"string"!=typeof Oe?Array.isArray(Oe)&&(xe.popupElements=Oe.filter(me=>-1!==Me.indexOf(me.type)).map(me=>me&&me.toJSON(Y)),xe.popupElements.forEach(me=>{"attachments"===me.type?this._writeAttachmentContent(xe):"media"===me.type?this._writeMediaContent(me,xe):"text"===me.type&&this._writeTextContent(me,xe)})):xe.description=Oe}writeFieldInfos(Oe,xe,Be,Y){const{content:me}=this,Ie=Array.isArray(me)?me:null;if(Oe){const $e=Ie?Ie.filter(Qe=>"fields"===Qe.type):[],rt=$e.length&&$e.every(Qe=>{var Xe;return null==(Xe=Qe.fieldInfos)?void 0:Xe.length});xe.fieldInfos=Oe.filter(Boolean).map(Qe=>{const Xe=Qe.toJSON(Y);return rt&&(Xe.visible=!1),Xe})}if(Ie)for(const $e of Ie)"fields"===$e.type&&this._writeFieldsContent($e,xe)}writeLayerOptions(Oe,xe,Be,Y){xe[Be]=!Oe||null===Oe.showNoDataRecords&&null===Oe.returnTopmostRaster?null:Oe.toJSON(Y)}writeTitle(Oe,xe){xe.title=Oe||""}clone(){const{actions:Oe}=this,xe=Oe?(0,j.d9)(Oe.toArray()):[];return new be({actions:xe,content:Array.isArray(this.content)?(0,j.d9)(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?(0,j.d9)(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?(0,j.d9)(this.fieldInfos):null,layerOptions:this.layerOptions?(0,j.d9)(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?(0,j.d9)(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?(0,j.d9)(this.relatedRecordsInfo):null})}collectRequiredFields(Oe,xe){var Be=this;return(0,g.Z)(function*(){const Y=Be.expressionInfos||[];yield Be._collectExpressionInfoFields(Oe,xe,[...Y,...Be._getContentExpressionInfos(Be.content,Y)]),(0,X.gd)(Oe,xe,[...Be.outFields||[],...Be._getActionsFields(Be.actions),...Be._getTitleFields(Be.title),...Be._getContentFields(Be.content)])})()}getRequiredFields(Oe){var xe=this;return(0,g.Z)(function*(){const Be=new Set;return yield xe.collectRequiredFields(Be,Oe),[...Be].sort()})()}_writeFieldsContent(Oe,xe){if(!Array.isArray(Oe.fieldInfos)||!Oe.fieldInfos.length)return;const Be=(0,j.d9)(Oe.fieldInfos);Array.isArray(xe.fieldInfos)?Be.forEach(Y=>{const me=xe.fieldInfos.find(Ie=>Ie.fieldName.toLowerCase()===Y.fieldName.toLowerCase());me?me.visible=!0:xe.fieldInfos.push(Y)}):xe.fieldInfos=Be}_writeAttachmentContent(Oe){Oe.showAttachments||(Oe.showAttachments=!0)}_writeTextContent(Oe,xe){!xe.description&&Oe.text&&(xe.description=Oe.text)}_writeMediaContent(Oe,xe){if(!Array.isArray(Oe.mediaInfos)||!Oe.mediaInfos.length)return;const Be=(0,j.d9)(Oe.mediaInfos);xe.mediaInfos=Array.isArray(xe.mediaInfos)?[...xe.mediaInfos,...Be]:Be}_readPopupInfoElements({description:Oe,mediaInfos:xe,popupElements:Be}){const Y={description:!1,mediaInfos:!1};return Be.map(me=>"media"===me.type?(me.mediaInfos||!xe||Y.mediaInfos||(me.mediaInfos=xe,Y.mediaInfos=!0),N.Z.fromJSON(me)):"text"===me.type?(me.text||!Oe||Y.description||(me.text=Oe,Y.description=!0),M.Z.fromJSON(me)):"attachments"===me.type?V.Z.fromJSON(me):"fields"===me.type?x.Z.fromJSON(me):"expression"===me.type?O.Z.fromJSON(me):void 0).filter(Boolean)}_readPopupInfo({description:Oe,mediaInfos:xe,showAttachments:Be}){const Y=[];return Y.push(Oe?new M.Z({text:Oe}):new x.Z),Array.isArray(xe)&&xe.length&&Y.push(N.Z.fromJSON({mediaInfos:xe})),Be&&Y.push(V.Z.fromJSON({displayType:"auto"})),Y.length?Y:Oe}_getContentElementFields(Oe){const xe=null==Oe?void 0:Oe.type;if("attachments"===xe)return[...this._extractFieldNames(Oe.title),...this._extractFieldNames(Oe.description)];if("custom"===xe)return Oe.outFields||[];if("fields"===xe)return[...this._extractFieldNames(Oe.title),...this._extractFieldNames(Oe.description),...this._getFieldInfoFields(Oe.fieldInfos||this.fieldInfos)];if("media"===xe){const Be=Oe.mediaInfos||[];return[...this._extractFieldNames(Oe.title),...this._extractFieldNames(Oe.description),...Be.reduce((Y,me)=>[...Y,...this._getMediaInfoFields(me)],[])]}return"text"===xe?this._extractFieldNames(Oe.text):[]}_getMediaInfoFields(Oe){const{caption:xe,title:Be,value:Y}=Oe,me=Y||{},{fields:Ie=[],normalizeField:$e,tooltipField:rt,sourceURL:Qe,linkURL:Xe}=me,qe=[...this._extractFieldNames(Be),...this._extractFieldNames(xe),...this._extractFieldNames(Qe),...this._extractFieldNames(Xe),...Ie];return $e&&qe.push($e),rt&&qe.push(rt),qe}_getContentExpressionInfos(Oe,xe){return Array.isArray(Oe)?Oe.reduce((Be,Y)=>[...Be,..."expression"===Y.type&&Y.expressionInfo?[Y.expressionInfo]:[]],xe):[]}_getContentFields(Oe){return"string"==typeof Oe?this._extractFieldNames(Oe):Array.isArray(Oe)?Oe.reduce((xe,Be)=>[...xe,...this._getContentElementFields(Be)],[]):[]}_collectExpressionInfoFields(Oe,xe,Be){return(0,g.Z)(function*(){Be&&(yield Promise.all(Be.map(Y=>(0,X.io)(Oe,xe,Y.expression))))})()}_getFieldInfoFields(Oe){return Oe?Oe.filter(xe=>void 0===xe.visible||!!xe.visible).map(xe=>xe.fieldName).filter(xe=>-1===xe.indexOf("relationships/")&&-1===xe.indexOf("expression/")):[]}_getActionsFields(Oe){return Oe?Oe.toArray().reduce((xe,Be)=>[...xe,...this._getActionFields(Be)],[]):[]}_getActionFields(Oe){const{className:xe,title:Be,type:Y}=Oe,me="button"===Y||"toggle"===Y?Oe.image:"";return[...this._extractFieldNames(Be),...this._extractFieldNames(xe),...this._extractFieldNames(me)]}_getTitleFields(Oe){return"string"==typeof Oe?this._extractFieldNames(Oe):[]}_extractFieldNames(Oe){if(!Oe||"string"!=typeof Oe)return[];const Be=Oe.match(/{[^}]*}/g);if(!Be)return[];const Y=/\{(\w+):.+\}/,me=Be.filter(Ie=>!(0===Ie.indexOf("{relationships/")||0===Ie.indexOf("{expression/"))).map(Ie=>Ie.replace(Y,"{$1}"));return me?me.map(Ie=>Ie.slice(1,-1)):[]}};(0,b._)([(0,L.Cb)({type:ye})],Le.prototype,"actions",void 0),(0,b._)([(0,L.Cb)()],Le.prototype,"content",void 0),(0,b._)([(0,D.p)("content")],Le.prototype,"castContent",null),(0,b._)([(0,I.r)("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],Le.prototype,"readContent",null),(0,b._)([(0,k.c)("content",{popupElements:{type:J.Z.ofType(z)},showAttachments:{type:Boolean},mediaInfos:{type:J.Z.ofType(ie.V)},description:{type:String}})],Le.prototype,"writeContent",null),(0,b._)([(0,L.Cb)({type:[ee.Z],json:{write:!0}})],Le.prototype,"expressionInfos",void 0),(0,b._)([(0,L.Cb)({type:[le.Z]})],Le.prototype,"fieldInfos",void 0),(0,b._)([(0,k.c)("fieldInfos")],Le.prototype,"writeFieldInfos",null),(0,b._)([(0,L.Cb)({type:ae})],Le.prototype,"layerOptions",void 0),(0,b._)([(0,k.c)("layerOptions")],Le.prototype,"writeLayerOptions",null),(0,b._)([(0,L.Cb)({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Le.prototype,"lastEditInfoEnabled",void 0),(0,b._)([(0,L.Cb)()],Le.prototype,"outFields",void 0),(0,b._)([(0,L.Cb)()],Le.prototype,"overwriteActions",void 0),(0,b._)([(0,L.Cb)()],Le.prototype,"returnGeometry",void 0),(0,b._)([(0,L.Cb)({json:{type:String}})],Le.prototype,"title",void 0),(0,b._)([(0,k.c)("title")],Le.prototype,"writeTitle",null),(0,b._)([(0,L.Cb)({type:pe,json:{write:!0}})],Le.prototype,"relatedRecordsInfo",void 0),Le=be=(0,b._)([(0,W.j)(Ue)],Le);const Je=Le},97478:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>w});var k,g=p(17626),b=p(86810),J=p(62208),B=p(28170),j=p(77712),D=(p(85931),p(8314),p(90912),p(68653)),I=p(76898),W=p(99433);let Z=k=class extends b.wq{constructor(T){super(T),this.end=null,this.start=null}static get allTime(){return X}static get empty(){return V}readEnd(T,O){return null!=O.end?new Date(O.end):null}writeEnd(T,O){O.end=T?T.getTime():null}get isAllTime(){return this.equals(k.allTime)}get isEmpty(){return this.equals(k.empty)}readStart(T,O){return null!=O.start?new Date(O.start):null}writeStart(T,O){O.start=T?T.getTime():null}clone(){return new k({end:this.end,start:this.start})}equals(T){if(!T)return!1;const O=(0,J.pC)(this.start)?this.start.getTime():this.start,x=(0,J.pC)(this.end)?this.end.getTime():this.end,N=(0,J.pC)(T.start)?T.start.getTime():T.start,M=(0,J.pC)(T.end)?T.end.getTime():T.end;return O===N&&x===M}expandTo(T){if(this.isEmpty||this.isAllTime)return this.clone();const O=(0,J.yw)(this.start,N=>(0,B.JE)(N,T)),x=(0,J.yw)(this.end,N=>(0,B.Nm)((0,B.JE)(N,T),1,T));return new k({start:O,end:x})}intersection(T){if(!T)return this.clone();if(this.isEmpty||T.isEmpty)return k.empty;if(this.isAllTime)return T.clone();if(T.isAllTime)return this.clone();const O=(0,J.R2)(this.start,-1/0,ee=>ee.getTime()),x=(0,J.R2)(this.end,1/0,ee=>ee.getTime()),N=(0,J.R2)(T.start,-1/0,ee=>ee.getTime()),M=(0,J.R2)(T.end,1/0,ee=>ee.getTime());let Q,z;if(N>=O&&N<=x?Q=N:O>=N&&O<=M&&(Q=O),x>=N&&x<=M?z=x:M>=O&&M<=x&&(z=M),!isNaN(Q)&&!isNaN(z)){const ee=new k;return ee.start=Q===-1/0?null:new Date(Q),ee.end=z===1/0?null:new Date(z),ee}return k.empty}offset(T,O){if(this.isEmpty||this.isAllTime)return this.clone();const x=new k,{start:N,end:M}=this;return(0,J.pC)(N)&&(x.start=(0,B.Nm)(N,T,O)),(0,J.pC)(M)&&(x.end=(0,B.Nm)(M,T,O)),x}union(T){if(!T||T.isEmpty)return this.clone();if(this.isEmpty)return T.clone();if(this.isAllTime||T.isAllTime)return X.clone();const O=(0,J.pC)(this.start)&&(0,J.pC)(T.start)?new Date(Math.min(this.start.getTime(),T.start.getTime())):null,x=(0,J.pC)(this.end)&&(0,J.pC)(T.end)?new Date(Math.max(this.end.getTime(),T.end.getTime())):null;return new k({start:O,end:x})}};(0,g._)([(0,j.Cb)({type:Date,json:{write:{allowNull:!0}}})],Z.prototype,"end",void 0),(0,g._)([(0,D.r)("end")],Z.prototype,"readEnd",null),(0,g._)([(0,W.c)("end")],Z.prototype,"writeEnd",null),(0,g._)([(0,j.Cb)({readOnly:!0,json:{read:!1}})],Z.prototype,"isAllTime",null),(0,g._)([(0,j.Cb)({readOnly:!0,json:{read:!1}})],Z.prototype,"isEmpty",null),(0,g._)([(0,j.Cb)({type:Date,json:{write:{allowNull:!0}}})],Z.prototype,"start",void 0),(0,g._)([(0,D.r)("start")],Z.prototype,"readStart",null),(0,g._)([(0,W.c)("start")],Z.prototype,"writeStart",null),Z=k=(0,g._)([(0,I.j)("esri.TimeExtent")],Z);const X=new Z,V=new Z({start:void 0,end:void 0}),w=Z},20849:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>k});var I,g=p(17626),b=p(86810),J=p(28170),B=p(77712),L=(p(85931),p(8314),p(90912),p(76898)),D=p(58926);let W=I=class extends b.wq{constructor(Z){super(Z),this.value=0,this.unit="milliseconds"}toMilliseconds(){return(0,J.rJ)(this.value,this.unit,"milliseconds")}clone(){return new I({value:this.value,unit:this.unit})}};(0,g._)([(0,B.Cb)({type:Number,json:{write:!0},nonNullable:!0})],W.prototype,"value",void 0),(0,g._)([(0,B.Cb)({type:D.v.apiValues,json:{type:D.v.jsonValues,read:D.v.read,write:D.v.write},nonNullable:!0})],W.prototype,"unit",void 0),W=I=(0,g._)([(0,L.j)("esri.TimeInterval")],W);const k=W},76687:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>xe});var g=p(17626),b=p(79608),J=p(86810),B=p(21286),j=p(77712),L=(p(85931),p(8314),p(66656)),D=p(68653),I=p(76898),W=p(99433),k=p(90912),Z=p(49672),V=(p(84161),p(28093));class K{constructor(Y,me){this.min=Y,this.max=me,this.range=me-Y}ndiff(Y,me=0){return Math.ceil((Y-me)/this.range)*this.range+me}_normalize(Y,me,Ie,$e=0,rt=!1){return(Ie-=$e)<Y?Ie+=this.ndiff(Y-Ie):Ie>me&&(Ie-=this.ndiff(Ie-me)),rt&&Ie===me&&(Ie=Y),Ie+$e}normalize(Y,me=0,Ie=!1){return this._normalize(this.min,this.max,Y,me,Ie)}clamp(Y,me=0){return(0,B.uZ)(Y-me,this.min,this.max)+me}monotonic(Y,me,Ie){return Y<me?me:me+this.ndiff(Y-me,Ie)}minimalMonotonic(Y,me,Ie){return this._normalize(Y,Y+this.range,me,Ie)}center(Y,me,Ie){return me=this.monotonic(Y,me,Ie),this.normalize((Y+me)/2,Ie)}diff(Y,me,Ie){return this.monotonic(Y,me,Ie)-Y}shortestSignedDiff(Y,me){Y=this.normalize(Y);const Ie=(me=this.normalize(me))-Y,$e=me<Y?this.minimalMonotonic(Y,me)-Y:me-this.minimalMonotonic(me,Y);return Math.abs(Ie)<Math.abs($e)?Ie:$e}contains(Y,me,Ie){return me=this.minimalMonotonic(Y,me),(Ie=this.minimalMonotonic(Y,Ie))>Y&&Ie<me}}function ue(Be){for(const Y in Be){const me=Be[Y];me instanceof Function&&(Be[Y]=me.bind(Be))}return Be}(0,V.c)(),(0,V.c)(),ue(new K(0,2*Math.PI)),ue(new K(-Math.PI,Math.PI));const te=ue(new K(0,360));(0,V.c)(),(0,V.c)(),(0,V.c)();let ye=class extends((0,b.J)(J.wq)){constructor(...Be){super(...Be),this.position=new Z.Z([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(Be,Y,me,Ie){if(Be&&"object"==typeof Be&&("x"in Be||Array.isArray(Be))){const $e={position:Be};return null!=Y&&($e.heading=Y),null!=me&&($e.tilt=me),null!=Ie&&($e.fov=Ie),$e}return Be}writePosition(Be,Y,me,Ie){const $e=Be.clone();$e.x=(0,k.q9)(Be.x||0),$e.y=(0,k.q9)(Be.y||0),$e.z=Be.hasZ?(0,k.q9)(Be.z||0):Be.z,Y[me]=$e.write({},Ie)}readPosition(Be,Y){const me=new Z.Z;return me.read(Be,Y),me.x=(0,k.q9)(me.x||0),me.y=(0,k.q9)(me.y||0),me.z=me.hasZ?(0,k.q9)(me.z||0):me.z,me}equals(Be){return!!Be&&this.tilt===Be.tilt&&this.heading===Be.heading&&this.fov===Be.fov&&this.position.equals(Be.position)}};(0,g._)([(0,j.Cb)({type:Z.Z,json:{write:{isRequired:!0}}})],ye.prototype,"position",void 0),(0,g._)([(0,W.c)("position")],ye.prototype,"writePosition",null),(0,g._)([(0,D.r)("position")],ye.prototype,"readPosition",null),(0,g._)([(0,j.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,L.p)(Be=>te.normalize((0,k.q9)(Be)))],ye.prototype,"heading",void 0),(0,g._)([(0,j.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,L.p)(Be=>(0,B.uZ)((0,k.q9)(Be),-180,180))],ye.prototype,"tilt",void 0),(0,g._)([(0,j.Cb)({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],ye.prototype,"fov",void 0),ye=(0,g._)([(0,I.j)("esri.Camera")],ye);const Ke=ye;var Le,Ue=p(29132),he=p(62208),Me=p(91179);let Je=Le=class extends J.wq{constructor(Be){super(Be),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(Be){return(Be%=360)<0&&(Be+=360),Be}clone(){return new Le({rotation:this.rotation,scale:this.scale,targetGeometry:(0,he.pC)(this.targetGeometry)?this.targetGeometry.clone():null,camera:(0,he.pC)(this.camera)?this.camera.clone():null})}};function Oe(){return{enabled:!this.camera}}(0,g._)([(0,j.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Oe}}}}})],Je.prototype,"rotation",void 0),(0,g._)([(0,L.p)("rotation")],Je.prototype,"castRotation",null),(0,g._)([(0,j.Cb)({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:Oe}}}}})],Je.prototype,"scale",void 0),(0,g._)([(0,j.Cb)({types:Ue.qM,json:{read:Me.im,write:!0,origins:{"web-scene":{read:Me.im,write:{overridePolicy:Oe}}}}})],Je.prototype,"targetGeometry",void 0),(0,g._)([(0,j.Cb)({type:Ke,json:{write:!0}})],Je.prototype,"camera",void 0),Je=Le=(0,g._)([(0,I.j)("esri.Viewpoint")],Je);const xe=Je},7652:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>g});class g{constructor(J,B){this.definition=null,this.context=null,this.definition=J,this.context=B}}},98362:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>g});class g{constructor(J=[]){this._elements=J}length(){return this._elements.length}get(J){return this._elements[J]}toArray(){const J=[];for(let B=0;B<this.length();B++)J.push(this.get(B));return J}}},5371:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>J});var g=p(98362),b=p(26685);class J extends g.Z{constructor(j,C,$,L,D){super(j),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=$,this._hasM=L,this._spRef=C,this._cacheId=D}get(j){if(void 0===this._lazyPath[j]){const C=this._elements[j];if(void 0===C)return;this._lazyPath[j]=new b.Z(C,this._spRef,this._hasZ,this._hasM,this._cacheId,j)}return this._lazyPath[j]}equalityTest(j){return j===this||null!==j&&j instanceof J&&j.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}},26685:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>J});var g=p(98362),b=p(49672);class J extends g.Z{constructor(j,C,$,L,D,I){super(j),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=C,this._hasZ=$,this._hasM=L,this._cacheId=D,this._partId=I}get(j){if(void 0===this._lazyPt[j]){const C=this._elements[j];if(void 0===C)return;const $=this._hasZ,L=this._hasM;let D=null;D=$&&!L?new b.Z(C[0],C[1],C[2],void 0,this._spRef):L&&!$?new b.Z(C[0],C[1],void 0,C[2],this._spRef):$&&L?new b.Z(C[0],C[1],C[2],C[3],this._spRef):new b.Z(C[0],C[1],this._spRef),D.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+j.toString(),this._lazyPt[j]=D}return this._lazyPt[j]}equalityTest(j){return j===this||null!==j&&j instanceof J&&j.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}},77132:(He,ve,p)=>{"use strict";p.d(ve,{Bj:()=>B,dj:()=>j,JW:()=>C,Lz:()=>T,EI:()=>V,tI:()=>x,tt:()=>Z,Sh:()=>$,US:()=>ce,hj:()=>I,HD:()=>L,yE:()=>ee,Qk:()=>Q,q2:()=>z,Dt:()=>oe,SV:()=>w,hd:()=>re});var B,j,K,g=p(10699),b=p(2004),J=p(36255);function C(K){return J.Z.fromJSON(K.toJSON())}function $(K){return K.toJSON?K.toJSON():K}function L(K){return"string"==typeof K||K instanceof String}function I(K){return"number"==typeof K}function k(K){return K instanceof Date}function Z(K,ae){return K===ae||!(!k(K)||!k(ae))&&K.getTime()===ae.getTime()}function V(K){if(void 0===K)return null;if("number"==typeof K)return K;switch(K.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function w(K){if(null===K)return null;switch(K.type){case"polygon":case"multipoint":case"polyline":return K.extent;case"point":return new b.Z({xmin:K.x,ymin:K.y,xmax:K.x,ymax:K.y,spatialReference:K.spatialReference});case"extent":return K}return null}function T(K){if(void 0===K)return null;if("number"==typeof K||"number"==typeof K)return K;switch(K.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(K=B||(B={}))[K.Standardised=0]="Standardised",K[K.StandardisedNoInterval=1]="StandardisedNoInterval",K[K.SqlServer=2]="SqlServer",K[K.Oracle=3]="Oracle",K[K.Postgres=4]="Postgres",K[K.PGDB=5]="PGDB",K[K.FILEGDB=6]="FILEGDB",K[K.NotEvaluated=7]="NotEvaluated",function(K){K[K.InFeatureSet=0]="InFeatureSet",K[K.NotInFeatureSet=1]="NotInFeatureSet",K[K.Unknown=2]="Unknown"}(j||(j={}));const x=1e3,Q={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},z={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},ee={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function oe(K,ae){return(0,g.Ue)((se,de)=>{const ue=(0,g.DB)(!0);K.reduce((pe,ie,te,Ee)=>pe.then(fe=>{try{return ae(fe,ie,te,Ee)}catch(be){return(0,g.d1)(be)}},fe=>(0,g.d1)(fe)),ue).then(se,de)})}function ce(K){return void 0===K?"":K=(K=(K=K.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function re(K,ae){ae||(ae={}),"function"==typeof ae&&(ae={cmp:ae});const se="boolean"==typeof ae.cycles&&ae.cycles,de=ae.cmp&&(ue=ae.cmp,function(ie){return function(te,Ee){return ue({key:te,value:ie[te]},{key:Ee,value:ie[Ee]})}});var ue;const pe=[];return function ie(te){if(te&&te.toJSON&&"function"==typeof te.toJSON&&(te=te.toJSON()),void 0===te)return;if("number"==typeof te)return isFinite(te)?""+te:"null";if("object"!=typeof te)return JSON.stringify(te);let Ee,fe;if(Array.isArray(te)){for(fe="[",Ee=0;Ee<te.length;Ee++)Ee&&(fe+=","),fe+=ie(te[Ee])||"null";return fe+"]"}if(null===te)return"null";if(-1!==pe.indexOf(te)){if(se)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const be=pe.push(te)-1,ye=Object.keys(te).sort(de&&de(te));for(fe="",Ee=0;Ee<ye.length;Ee++){const Ke=ye[Ee],Ue=ie(te[Ke]);Ue&&(fe&&(fe+=","),fe+=JSON.stringify(Ke)+":"+Ue)}return pe.splice(be,1),"{"+fe+"}"}(K)}},54346:(He,ve,p)=>{"use strict";p.d(ve,{V:()=>L});var g=p(59318),J=(p(84792),p(26584)),B=p(63290),j=p(21726);const C=B.Z.getLogger("esri.assets");function L(D){if(!g.Z.assetsPath)throw C.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new J.Z("assets:path-not-set","config.assetsPath is not set");return(0,j.v_)(g.Z.assetsPath,D)}},71530:(He,ve,p)=>{"use strict";p.d(ve,{a:()=>W});var D,g=p(17626),b=p(91558),J=p(86810),B=p(58817),j=p(77712),$=(p(90912),p(76898)),L=p(60958);let I=D=class extends J.wq{constructor(){super(...arguments),this.color=new b.Z("white")}clone(){return new D({color:(0,B.d9)(this.color)})}};(0,g._)([(0,j.Cb)(L.a)],I.prototype,"color",void 0),I=D=(0,g._)([(0,$.j)("esri.symbols.callouts.LineCallout3DBorder")],I);const W=I;Object.freeze({__proto__:null,get LineCallout3DBorder(){return I},default:W})},1719:(He,ve,p)=>{"use strict";p.d(ve,{a:()=>J,c:()=>g,g:()=>b});var g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function b(B){return B&&B.__esModule&&Object.prototype.hasOwnProperty.call(B,"default")?B.default:B}function J(B){throw new Error('Could not dynamically require "'+B+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}},39863:(He,ve,p)=>{"use strict";p.d(ve,{E:()=>g,R:()=>b,t:()=>j});const g=1e-6,b=Math.random,J=Math.PI/180,B=180/Math.PI;function j(D){return D*J}Object.freeze({__proto__:null,EPSILON:g,RANDOM:b,toRadian:j,toDegree:function C(D){return D*B},equals:function $(D,I){return Math.abs(D-I)<=g*Math.max(1,Math.abs(D),Math.abs(I))}})},47562:(He,ve,p)=>{"use strict";p.d(ve,{$:()=>Kt,A:()=>qe,B:()=>te,C:()=>de,D:()=>xe,E:()=>ke,F:()=>Me,G:()=>ht,H:()=>gr,I:()=>z,J:()=>pr,K:()=>vr,L:()=>hr,M:()=>K,N:()=>Q,O:()=>Le,P:()=>Ze,Q:()=>Qt,R:()=>ee,S:()=>le,T:()=>Gt,U:()=>gt,V:()=>ut,W:()=>$e,X:()=>St,Y:()=>st,Z:()=>Bt,_:()=>mt,a:()=>Ee,b:()=>Ke,c:()=>ae,d:()=>Ie,e:()=>me,f:()=>ue,g:()=>Y,h:()=>Lt,i:()=>pe,j:()=>ie,k:()=>fe,l:()=>ot,m:()=>ce,n:()=>re,o:()=>Ue,p:()=>he,q:()=>be,r:()=>ye,s:()=>nt,t:()=>Xe,u:()=>rt,v:()=>oe,w:()=>Ft,x:()=>Vt,y:()=>se,z:()=>We});var g=p(7652),b=p(98362),J=p(5371),B=p(26685),j=p(10699),C=p(2004),$=p(21674),L=p(72854),D=p(49672),I=p(37118),W=p(55214),k=p(27122),Z=p(62208),X=p(75327),V=p(25748),w=p(56683),T=p(77132);class O{constructor(Ge){this.value=Ge}}class x{constructor(Ge){this.value=Ge}}class N{constructor(Ge){this.fn=Ge}}class M{constructor(Ge,vt){this.paramCount=vt,this.fn=Ge}}const Q=N,z=x,ee=O,le=M,oe={type:"VOID"},ce={type:"BREAK"},re={type:"CONTINUE"};function K(Pe,Ge,vt){return""===Ge||null==Ge||Ge===vt||Ge===vt?Pe:Pe=Pe.split(Ge).join(vt)}function ae(Pe){return Pe instanceof N||Pe instanceof g.Z||Pe instanceof M}function se(Pe){return!!(ue(Pe)||ie(Pe)||Ue(Pe)||pe(Pe)||null===Pe||Pe===oe||"number"==typeof Pe)}function de(Pe,Ge){return void 0===Pe?Ge:Pe}function ue(Pe){return"string"==typeof Pe||Pe instanceof String}function pe(Pe){return"boolean"==typeof Pe}function ie(Pe){return"number"==typeof Pe}function te(Pe){return"number"==typeof Pe&&isFinite(Pe)&&Math.floor(Pe)===Pe}function Ee(Pe){return Pe instanceof Array}function fe(Pe){return"esri.arcade.Feature"===(null==Pe?void 0:Pe.arcadeDeclaredClass)}function be(Pe){return!0===(Pe&&Pe.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===Pe.declaredRootClass)}function ye(Pe){return!0===(Pe&&Pe.declaredRootClass&&"esri.arcade.featureSetCollection"===Pe.declaredRootClass)}function Ke(Pe){return Pe instanceof b.Z}function Ue(Pe){return Pe instanceof Date}function he(Pe,Ge,vt){if(Pe.length<Ge||Pe.length>vt)throw new Error("Function called with wrong number of Parameters")}function Me(Pe){return Pe<0?-Math.round(-Pe):Math.round(Pe)}function Le(){let Pe=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Ge){const vt=(Pe+16*Math.random())%16|0;return Pe=Math.floor(Pe/16),("x"===Ge?vt:3&vt|8).toString(16)})}function Je(Pe,Ge){return!1===isNaN(Pe)?null==Ge||""===Ge?Pe.toString():(Ge=K(Ge,"\u2030",""),Ge=K(Ge,"\xa4",""),(0,X.WU)(Pe,{pattern:Ge})):Pe.toString()}function Oe(Pe,Ge){const vt=k.ou.fromJSDate(Pe);return null==Ge||""===Ge?vt.toISO({suppressMilliseconds:!0}):vt.toFormat(xe(Ge),{locale:(0,w.Kd)(),numberingSystem:"latn"})}function xe(Pe){Pe=Pe.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let Ge="";const vt=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const zt of Pe.match(vt))switch(zt){case"D":Ge+="d";break;case"DD":Ge+="dd";break;case"DDD":Ge+="o";break;case"d":Ge+="c";break;case"ddd":Ge+="ccc";break;case"dddd":Ge+="cccc";break;case"M":Ge+="L";break;case"MM":Ge+="LL";break;case"MMM":Ge+="LLL";break;case"MMMM":Ge+="LLLL";break;case"YY":Ge+="yy";break;case"Y":case"YYYY":Ge+="yyyy";break;case"Q":Ge+="q";break;case"Z":Ge+="ZZ";break;case"ZZ":Ge+="ZZZ";break;case"S":Ge+="'S'";break;case"SS":Ge+="'SS'";break;case"SSS":Ge+="u";break;case"A":case"a":Ge+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":Ge+=zt;break;default:zt.length>=2&&"["===zt.slice(0,1)&&"]"===zt.slice(-1)?Ge+=`'${zt.slice(1,-1)}'`:Ge+=`'${zt}'`}return Ge}function Be(Pe,Ge,vt){switch(vt){case">":return Pe>Ge;case"<":return Pe<Ge;case">=":return Pe>=Ge;case"<=":return Pe<=Ge}return!1}function Y(Pe,Ge,vt){if(null===Pe){if(null===Ge||Ge===oe)return Be(null,null,vt);if(ie(Ge))return Be(0,Ge,vt);if(ue(Ge)||pe(Ge))return Be(0,Xe(Ge),vt);if(Ue(Ge))return Be(0,Ge.getTime(),vt)}if(Pe===oe){if(null===Ge||Ge===oe)return Be(null,null,vt);if(ie(Ge))return Be(0,Ge,vt);if(ue(Ge)||pe(Ge))return Be(0,Xe(Ge),vt);if(Ue(Ge))return Be(0,Ge.getTime(),vt)}else if(ie(Pe)){if(ie(Ge))return Be(Pe,Ge,vt);if(pe(Ge))return Be(Pe,Xe(Ge),vt);if(null===Ge||Ge===oe)return Be(Pe,0,vt);if(ue(Ge))return Be(Pe,Xe(Ge),vt);if(Ue(Ge))return Be(Pe,Ge.getTime(),vt)}else if(ue(Pe)){if(ue(Ge))return Be(Ie(Pe),Ie(Ge),vt);if(Ue(Ge))return Be(Xe(Pe),Ge.getTime(),vt);if(ie(Ge))return Be(Xe(Pe),Ge,vt);if(null===Ge||Ge===oe)return Be(Xe(Pe),0,vt);if(pe(Ge))return Be(Xe(Pe),Xe(Ge),vt)}else if(Ue(Pe)){if(Ue(Ge))return Be(Pe,Ge,vt);if(null===Ge||Ge===oe)return Be(Pe.getTime(),0,vt);if(ie(Ge))return Be(Pe.getTime(),Ge,vt);if(pe(Ge)||ue(Ge))return Be(Pe.getTime(),Xe(Ge),vt)}else if(pe(Pe)){if(pe(Ge))return Be(Pe,Ge,vt);if(ie(Ge))return Be(Xe(Pe),Xe(Ge),vt);if(Ue(Ge))return Be(Xe(Pe),Ge.getTime(),vt);if(null===Ge||Ge===oe)return Be(Xe(Pe),0,vt);if(ue(Ge))return Be(Xe(Pe),Xe(Ge),vt)}return!!me(Pe,Ge)&&("<="===vt||">="===vt)}function me(Pe,Ge){if(Pe===Ge||null===Pe&&Ge===oe||null===Ge&&Pe===oe)return!0;if(Ue(Pe)&&Ue(Ge))return Pe.getTime()===Ge.getTime();if(Pe instanceof J.Z||Pe instanceof B.Z)return Pe.equalityTest(Ge);if(Pe instanceof D.Z&&Ge instanceof D.Z){const vt=Pe.cache._arcadeCacheId,zt=Ge.cache._arcadeCacheId;if(null!=vt)return vt===zt}return void 0!==Pe&&void 0!==Ge&&null!==Pe&&null!==Ge&&"object"==typeof Pe&&"object"==typeof Ge&&(Pe._arcadeCacheId===Ge._arcadeCacheId&&null!=Pe._arcadeCacheId||Pe._underlyingGraphic===Ge._underlyingGraphic&&null!=Pe._underlyingGraphic)}function Ie(Pe,Ge){if(ue(Pe))return Pe;if(null===Pe)return"";if(ie(Pe))return Je(Pe,Ge);if(pe(Pe))return Pe.toString();if(Ue(Pe))return Oe(Pe,Ge);if(Pe instanceof $.Z)return JSON.stringify(Pe.toJSON());if(Ee(Pe)){const vt=[];for(let zt=0;zt<Pe.length;zt++)vt[zt]=Qe(Pe[zt]);return"["+vt.join(",")+"]"}if(Pe instanceof b.Z){const vt=[];for(let zt=0;zt<Pe.length();zt++)vt[zt]=Qe(Pe.get(zt));return"["+vt.join(",")+"]"}return null!==Pe&&"object"==typeof Pe&&void 0!==Pe.castToText?Pe.castToText():ae(Pe)?"object, Function":""}function $e(Pe){const Ge=[];if(!1===Ee(Pe))return null;if(Pe instanceof b.Z){for(let vt=0;vt<Pe.length();vt++)Ge[vt]=Xe(Pe.get(vt));return Ge}for(let vt=0;vt<Pe.length;vt++)Ge[vt]=Xe(Pe[vt]);return Ge}function rt(Pe,Ge){if(ue(Pe))return Pe;if(null===Pe)return"";if(ie(Pe))return Je(Pe,Ge);if(pe(Pe))return Pe.toString();if(Ue(Pe))return Oe(Pe,Ge);if(Pe instanceof $.Z)return Pe instanceof C.Z?'{"xmin":'+Pe.xmin.toString()+',"ymin":'+Pe.ymin.toString()+","+(Pe.hasZ?'"zmin":'+Pe.zmin.toString()+",":"")+(Pe.hasM?'"mmin":'+Pe.mmin.toString()+",":"")+'"xmax":'+Pe.xmax.toString()+',"ymax":'+Pe.ymax.toString()+","+(Pe.hasZ?'"zmax":'+Pe.zmax.toString()+",":"")+(Pe.hasM?'"mmax":'+Pe.mmax.toString()+",":"")+'"spatialReference":'+qt(Pe.spatialReference)+"}":qt(Pe.toJSON(),(vt,zt)=>vt.key===zt.key?0:"spatialReference"===vt.key?1:"spatialReference"===zt.key||vt.key<zt.key?-1:vt.key>zt.key?1:0);if(Ee(Pe)){const vt=[];for(let zt=0;zt<Pe.length;zt++)vt[zt]=Qe(Pe[zt]);return"["+vt.join(",")+"]"}if(Pe instanceof b.Z){const vt=[];for(let zt=0;zt<Pe.length();zt++)vt[zt]=Qe(Pe.get(zt));return"["+vt.join(",")+"]"}return null!==Pe&&"object"==typeof Pe&&void 0!==Pe.castToText?Pe.castToText():ae(Pe)?"object, Function":""}function Qe(Pe){if(null===Pe)return"null";if(pe(Pe)||ie(Pe)||ue(Pe))return JSON.stringify(Pe);if(Pe instanceof $.Z||Pe instanceof b.Z||Pe instanceof Array)return rt(Pe);if(Pe instanceof Date)return JSON.stringify(Oe(Pe,""));if(null!==Pe&&"object"==typeof Pe){if(void 0!==Pe.castToText)return Pe.castToText()}else if(Pe===oe)return"null";return"null"}function Xe(Pe,Ge){return ie(Pe)?Pe:null===Pe||""===Pe?0:Ue(Pe)?NaN:pe(Pe)?Pe?1:0:Ee(Pe)||""===Pe||void 0===Pe?NaN:void 0!==Ge&&ue(Pe)?(Ge=K(Ge,"\u2030",""),Ge=K(Ge,"\xa4",""),(0,X.Qc)(Pe,{pattern:Ge})):Pe===oe?0:Number(Pe)}function qe(Pe){if(Ue(Pe))return Pe;if(ue(Pe)){const Ge=dt(Pe);if(Ge)return Ge.toJSDate()}return null}function ke(Pe){return Ue(Pe)?k.ou.fromJSDate(Pe):ue(Pe)?dt(Pe):null}function dt(Pe){const Ge=/ (\d\d)/;let vt=k.ou.fromISO(Pe);return vt.isValid||Ge.test(Pe)&&(Pe=Pe.replace(Ge,"T$1"),vt=k.ou.fromISO(Pe),vt.isValid)?vt:null}function We(Pe){return pe(Pe)?Pe:ue(Pe)?"true"===(Pe=Pe.toLowerCase()):!!ie(Pe)&&0!==Pe&&!isNaN(Pe)}function nt(Pe,Ge){return(0,Z.Wi)(Pe)?null:(null!=Pe.spatialReference||(Pe.spatialReference=Ge),Pe)}function ht(Pe){if(null===Pe)return null;if(Pe instanceof D.Z)return"NaN"===Pe.x||null===Pe.x||isNaN(Pe.x)?null:Pe;if(Pe instanceof I.Z){if(0===Pe.rings.length)return null;for(const Ge of Pe.rings)if(Ge.length>0)return Pe;return null}if(Pe instanceof W.Z){if(0===Pe.paths.length)return null;for(const Ge of Pe.paths)if(Ge.length>0)return Pe;return null}return Pe instanceof L.Z?0===Pe.points.length?null:Pe:Pe instanceof C.Z?"NaN"===Pe.xmin||null===Pe.xmin||isNaN(Pe.xmin)?null:Pe:null}function mt(Pe,Ge){if(!Pe||!Pe.domain)return Ge;let vt=null;if("string"===Pe.field.type||"esriFieldTypeString"===Pe.field.type)Ge=Ie(Ge);else{if(null==Ge)return null;if(""===Ge)return Ge;Ge=Xe(Ge)}for(let zt=0;zt<Pe.domain.codedValues.length;zt++){const Yt=Pe.domain.codedValues[zt];Yt.code===Ge&&(vt=Yt)}return null===vt?Ge:vt.name}function Kt(Pe,Ge){if(!Pe||!Pe.domain)return Ge;let vt=null;Ge=Ie(Ge);for(let zt=0;zt<Pe.domain.codedValues.length;zt++){const Yt=Pe.domain.codedValues[zt];Yt.name===Ge&&(vt=Yt)}return null===vt?Ge:vt.code}function Bt(Pe,Ge,vt=null,zt=null){if(!Ge||!Ge.fields)return null;let Yt,et,Rt=null;for(let Ut=0;Ut<Ge.fields.length;Ut++){const Jt=Ge.fields[Ut];Jt.name.toLowerCase()===Pe.toString().toLowerCase()&&(Rt=Jt)}if(null===Rt)throw new Error("Field not found");return null===zt&&vt&&Ge.typeIdField&&(zt=vt.hasField(Ge.typeIdField)?vt.field(Ge.typeIdField):null),null!=zt&&Ge.types.some(function(Ut){return Ut.id===zt&&(Yt=Ut.domains&&Ut.domains[Rt.name],Yt&&"inherited"===Yt.type&&(Yt=$t(Rt.name,Ge),et=!0),!0)}),et||Yt||(Yt=$t(Pe,Ge)),{field:Rt,domain:Yt}}function $t(Pe,Ge){let vt;return Ge.fields.some(function(zt){return zt.name.toLowerCase()===Pe.toLowerCase()&&(vt=zt.domain),!!vt}),vt}function qt(Pe,Ge){Ge||(Ge={}),"function"==typeof Ge&&(Ge={cmp:Ge});const vt="boolean"==typeof Ge.cycles&&Ge.cycles,zt=Ge.cmp&&(Yt=Ge.cmp,function(Rt){return function(Ut,Jt){return Yt({key:Ut,value:Rt[Ut]},{key:Jt,value:Rt[Jt]})}});var Yt;const et=[];return function Rt(Ut){if(Ut&&Ut.toJSON&&"function"==typeof Ut.toJSON&&(Ut=Ut.toJSON()),void 0===Ut)return;if("number"==typeof Ut)return isFinite(Ut)?""+Ut:"null";if("object"!=typeof Ut)return JSON.stringify(Ut);let Jt,nr;if(Array.isArray(Ut)){for(nr="[",Jt=0;Jt<Ut.length;Jt++)Jt&&(nr+=","),nr+=Rt(Ut[Jt])||"null";return nr+"]"}if(null===Ut)return"null";if(-1!==et.indexOf(Ut)){if(vt)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const Tr=et.push(Ut)-1,Gr=Object.keys(Ut).sort(zt&&zt(Ut));for(nr="",Jt=0;Jt<Gr.length;Jt++){const Qr=Gr[Jt],Zr=Rt(Ut[Qr]);Zr&&(nr&&(nr+=","),nr+=JSON.stringify(Qr)+":"+Zr)}return et.splice(Tr,1),"{"+nr+"}"}(Pe)}function gr(Pe){if(null===Pe)return null;const Ge=[];for(const vt of Pe)Ge.push(vt&&vt.arcadeDeclaredClass&&"esri.arcade.Feature"===vt.arcadeDeclaredClass?vt.geometry():vt);return Ge}function er(Pe,Ge){if(!(Ge instanceof D.Z))throw new Error("Invalid Argument");Pe.push(Ge.hasZ?Ge.hasM?[Ge.x,Ge.y,Ge.z,Ge.m]:[Ge.x,Ge.y,Ge.z]:[Ge.x,Ge.y])}function vr(Pe,Ge){if(Ee(Pe)||Ke(Pe)){let vt=!1,zt=!1,Yt=[],et=Ge;if(Ee(Pe)){for(const Rt of Pe)er(Yt,Rt);Yt.length>0&&(et=Pe[0].spatialReference,vt=Pe[0].hasZ,zt=Pe[0].hasM)}else if(Pe instanceof B.Z)Yt=Pe._elements,Yt.length>0&&(vt=Pe._hasZ,zt=Pe._hasM,et=Pe.get(0).spatialReference);else{if(!Ke(Pe))throw new Error("Invalid Argument");for(const Rt of Pe.toArray())er(Yt,Rt);Yt.length>0&&(et=Pe.get(0).spatialReference,vt=!0===Pe.get(0).hasZ,zt=!0===Pe.get(0).hasM)}return 0===Yt.length?null:(!1===(0,V.bu)(Yt,zt,vt)&&(Yt=Yt.slice(0).reverse()),new I.Z({rings:[Yt],spatialReference:et,hasZ:vt,hasM:zt}))}return Pe}function pr(Pe,Ge){if(Ee(Pe)||Ke(Pe)){let vt=!1,zt=!1,Yt=[],et=Ge;if(Ee(Pe)){for(const Rt of Pe)er(Yt,Rt);Yt.length>0&&(et=Pe[0].spatialReference,vt=!0===Pe[0].hasZ,zt=!0===Pe[0].hasM)}else if(Pe instanceof B.Z)Yt=Pe._elements,Yt.length>0&&(vt=Pe._hasZ,zt=Pe._hasM,et=Pe.get(0).spatialReference);else if(Ke(Pe)){for(const Rt of Pe.toArray())er(Yt,Rt);Yt.length>0&&(et=Pe.get(0).spatialReference,vt=!0===Pe.get(0).hasZ,zt=!0===Pe.get(0).hasM)}return 0===Yt.length?null:new W.Z({paths:[Yt],spatialReference:et,hasZ:vt,hasM:zt})}return Pe}function hr(Pe,Ge){if(Ee(Pe)||Ke(Pe)){let vt=!1,zt=!1,Yt=[],et=Ge;if(Ee(Pe)){for(const Rt of Pe)er(Yt,Rt);Yt.length>0&&(et=Pe[0].spatialReference,vt=!0===Pe[0].hasZ,zt=!0===Pe[0].hasM)}else if(Pe instanceof B.Z)Yt=Pe._elements,Yt.length>0&&(vt=Pe._hasZ,zt=Pe._hasM,et=Pe.get(0).spatialReference);else if(Ke(Pe)){for(const Rt of Pe.toArray())er(Yt,Rt);Yt.length>0&&(et=Pe.get(0).spatialReference,vt=!0===Pe.get(0).hasZ,zt=!0===Pe.get(0).hasM)}return 0===Yt.length?null:new L.Z({points:Yt,spatialReference:et,hasZ:vt,hasM:zt})}return Pe}function st(Pe,Ge=!1){const vt=[];if(null===Pe)return vt;if(!0===Ee(Pe)){for(let zt=0;zt<Pe.length;zt++){const Yt=Ie(Pe[zt]);""===Yt&&!0!==Ge||vt.push(Yt)}return vt}if(Pe instanceof b.Z){for(let zt=0;zt<Pe.length();zt++){const Yt=Ie(Pe.get(zt));""===Yt&&!0!==Ge||vt.push(Yt)}return vt}if(se(Pe)){const zt=Ie(Pe);return""===zt&&!0!==Ge||vt.push(zt),vt}return[]}let ft=0;function St(Pe){return ft++,ft%100==0?(ft=0,(0,j.Ue)(Ge=>{setTimeout(()=>{Ge(Pe)},0)})):Pe}function Lt(Pe,Ge,vt){switch(vt){case"&":return Pe&Ge;case"|":return Pe|Ge;case"^":return Pe^Ge;case"<<":return Pe<<Ge;case">>":return Pe>>Ge;case">>>":return Pe>>>Ge}}function Ft(Pe,Ge=null){return null==Pe?null:pe(Pe)||ie(Pe)||ue(Pe)?Pe:Pe instanceof $.Z?!0===(null==Ge?void 0:Ge.keepGeometryType)?Pe:Pe.toJSON():Pe instanceof b.Z?Pe.toArray().map(vt=>Ft(vt,Ge)):Pe instanceof Array?Pe.map(vt=>Ft(vt,Ge)):Pe instanceof Date?Pe:null!==Pe&&"object"==typeof Pe&&void 0!==Pe.castAsJson?Pe.castAsJson(Ge):null}function Dt(Pe,Ge,vt,zt,Yt){return Vt(Pe,Ge,vt).then(et=>{Yt[zt]=et})}function Vt(Pe,Ge=null,vt=null){if(Pe instanceof b.Z&&(Pe=Pe.toArray()),null==Pe)return(0,j.DB)(null);if(se(Pe)||Pe instanceof $.Z||Pe instanceof Date)return(0,j.DB)(Ft(Pe,vt));if(Pe instanceof Array){const zt=[],Yt=[];for(const et of Pe)null===et||se(et)||et instanceof $.Z||et instanceof Date?Yt.push(Ft(et,vt)):(Yt.push(null),zt.push(Dt(et,Ge,vt,Yt.length-1,Yt)));return zt.length>0?(0,j.$6)(zt).then(()=>Yt):(0,j.DB)(Yt)}return null!==Pe&&"object"==typeof Pe&&void 0!==Pe.castAsJsonAsync?Pe.castAsJsonAsync(Ge,vt):(0,j.DB)(null)}function Gt(Pe,Ge,vt){const zt=Pe.fullSchema();return null!==zt&&zt.fields?Bt(Ge,zt,Pe,vt):null}function Qt(Pe){const Ge=Pe.fullSchema();return null===Ge?null:Ge.fields&&Ge.typeIdField?{subtypeField:Ge.typeIdField,subtypes:Ge.types?Ge.types.map(vt=>({name:vt.name,code:vt.id})):[]}:null}function gt(Pe,Ge,vt,zt){const Yt=Pe.fullSchema();if(null===Yt||!Yt.fields)return null;const et=Bt(Ge,Yt,Pe,zt);if(void 0===vt)try{vt=Pe.field(Ge)}catch(Rt){return null}return mt(et,vt)}function ut(Pe,Ge,vt,zt){const Yt=Pe.fullSchema();if(null===Yt||!Yt.fields)return null;if(void 0===vt){try{vt=Pe.field(Ge)}catch(et){return null}return vt}return Kt(Bt(Ge,Yt,Pe,zt),vt)}function Ze(Pe){const Ge=Pe.fullSchema();if(null===Ge||!Ge.fields)return null;const vt=[];for(const zt of Ge.fields)vt.push((0,T.Sh)(zt));return{objectIdField:Ge.objectIdField,globalIdField:Ge.globalIdField,geometryType:void 0===T.q2[Ge.geometryType]?"":T.q2[Ge.geometryType],fields:vt}}const ot=Object.freeze({__proto__:null,ReturnResultE:O,ImplicitResultE:x,NativeFunctionE:N,SizzleFunctionE:M,NativeFunction:Q,ImplicitResult:z,ReturnResult:ee,SizzleFunction:le,voidOperation:oe,breakResult:ce,continueResult:re,multiReplace:K,isFunctionParameter:ae,isSimpleType:se,defaultUndefined:de,isString:ue,isBoolean:pe,isNumber:ie,isInteger:te,isArray:Ee,isFeature:fe,isFeatureSet:be,isFeatureSetCollection:ye,isImmutableArray:Ke,isDate:Ue,pcCheck:he,absRound:Me,generateUUID:Le,formatNumber:Je,formatDate:Oe,standardiseDateFormat:xe,greaterThanLessThan:Y,equalityTest:me,toString:Ie,toNumberArray:$e,toStringExplicit:rt,toNumber:Xe,toDate:qe,toDateTime:ke,toBoolean:We,fixSpatialReference:nt,fixNullGeometry:ht,getDomainValue:mt,getDomainCode:Kt,getDomain:Bt,stableStringify:qt,autoCastFeatureToGeometry:gr,autoCastArrayOfPointsToPolygon:vr,autoCastArrayOfPointsToPolyline:pr,autoCastArrayOfPointsToMultiPoint:hr,toStringArray:st,tick:St,binaryOperator:Lt,castAsJson:Ft,castAsJsonAsync:Vt,featureFullDomain:Gt,featureSubtypes:Qt,featureDomainValueLookup:gt,featureDomainCodeLookup:ut,featureSchema:Ze})},31478:(He,ve,p)=>{"use strict";p.d(ve,{a:()=>Z,b:()=>W,c:()=>J,f:()=>k,i:()=>j,m:()=>$,r:()=>L,s:()=>D,t:()=>I});var g=p(39863);function J(le){return le[0]=1,le[1]=0,le[2]=0,le[3]=1,le[4]=0,le[5]=0,le}function j(le,oe){const ce=oe[0],re=oe[1],K=oe[2],ae=oe[3],se=oe[4],de=oe[5];let ue=ce*ae-re*K;return ue?(ue=1/ue,le[0]=ae*ue,le[1]=-re*ue,le[2]=-K*ue,le[3]=ce*ue,le[4]=(K*de-ae*se)*ue,le[5]=(re*se-ce*de)*ue,le):null}function $(le,oe,ce){const re=oe[0],K=oe[1],ae=oe[2],se=oe[3],de=oe[4],ue=oe[5],pe=ce[0],ie=ce[1],te=ce[2],Ee=ce[3],fe=ce[4],be=ce[5];return le[0]=re*pe+ae*ie,le[1]=K*pe+se*ie,le[2]=re*te+ae*Ee,le[3]=K*te+se*Ee,le[4]=re*fe+ae*be+de,le[5]=K*fe+se*be+ue,le}function L(le,oe,ce){const re=oe[0],K=oe[1],ae=oe[2],se=oe[3],de=oe[4],ue=oe[5],pe=Math.sin(ce),ie=Math.cos(ce);return le[0]=re*ie+ae*pe,le[1]=K*ie+se*pe,le[2]=re*-pe+ae*ie,le[3]=K*-pe+se*ie,le[4]=de,le[5]=ue,le}function D(le,oe,ce){const K=oe[1],ae=oe[2],se=oe[3],de=oe[4],ue=oe[5],pe=ce[0],ie=ce[1];return le[0]=oe[0]*pe,le[1]=K*pe,le[2]=ae*ie,le[3]=se*ie,le[4]=de,le[5]=ue,le}function I(le,oe,ce){const re=oe[0],K=oe[1],ae=oe[2],se=oe[3],de=oe[4],ue=oe[5],pe=ce[0],ie=ce[1];return le[0]=re,le[1]=K,le[2]=ae,le[3]=se,le[4]=re*pe+ae*ie+de,le[5]=K*pe+se*ie+ue,le}function W(le,oe){const ce=Math.sin(oe),re=Math.cos(oe);return le[0]=re,le[1]=ce,le[2]=-ce,le[3]=re,le[4]=0,le[5]=0,le}function k(le,oe){return le[0]=oe[0],le[1]=0,le[2]=0,le[3]=oe[1],le[4]=0,le[5]=0,le}function Z(le,oe){return le[0]=1,le[1]=0,le[2]=0,le[3]=1,le[4]=oe[0],le[5]=oe[1],le}function T(le,oe,ce){return le[0]=oe[0]-ce[0],le[1]=oe[1]-ce[1],le[2]=oe[2]-ce[2],le[3]=oe[3]-ce[3],le[4]=oe[4]-ce[4],le[5]=oe[5]-ce[5],le}Object.freeze({__proto__:null,copy:function b(le,oe){return le[0]=oe[0],le[1]=oe[1],le[2]=oe[2],le[3]=oe[3],le[4]=oe[4],le[5]=oe[5],le},identity:J,set:function B(le,oe,ce,re,K,ae,se){return le[0]=oe,le[1]=ce,le[2]=re,le[3]=K,le[4]=ae,le[5]=se,le},invert:j,determinant:function C(le){return le[0]*le[3]-le[1]*le[2]},multiply:$,rotate:L,scale:D,translate:I,fromRotation:W,fromScaling:k,fromTranslation:Z,str:function X(le){return"mat2d("+le[0]+", "+le[1]+", "+le[2]+", "+le[3]+", "+le[4]+", "+le[5]+")"},frob:function V(le){return Math.sqrt(le[0]**2+le[1]**2+le[2]**2+le[3]**2+le[4]**2+le[5]**2+1)},add:function w(le,oe,ce){return le[0]=oe[0]+ce[0],le[1]=oe[1]+ce[1],le[2]=oe[2]+ce[2],le[3]=oe[3]+ce[3],le[4]=oe[4]+ce[4],le[5]=oe[5]+ce[5],le},subtract:T,multiplyScalar:function O(le,oe,ce){return le[0]=oe[0]*ce,le[1]=oe[1]*ce,le[2]=oe[2]*ce,le[3]=oe[3]*ce,le[4]=oe[4]*ce,le[5]=oe[5]*ce,le},multiplyScalarAndAdd:function x(le,oe,ce,re){return le[0]=oe[0]+ce[0]*re,le[1]=oe[1]+ce[1]*re,le[2]=oe[2]+ce[2]*re,le[3]=oe[3]+ce[3]*re,le[4]=oe[4]+ce[4]*re,le[5]=oe[5]+ce[5]*re,le},exactEquals:function N(le,oe){return le[0]===oe[0]&&le[1]===oe[1]&&le[2]===oe[2]&&le[3]===oe[3]&&le[4]===oe[4]&&le[5]===oe[5]},equals:function M(le,oe){const ce=le[0],re=le[1],K=le[2],ae=le[3],se=le[4],de=le[5],ue=oe[0],pe=oe[1],ie=oe[2],te=oe[3],Ee=oe[4],fe=oe[5];return Math.abs(ce-ue)<=g.E*Math.max(1,Math.abs(ce),Math.abs(ue))&&Math.abs(re-pe)<=g.E*Math.max(1,Math.abs(re),Math.abs(pe))&&Math.abs(K-ie)<=g.E*Math.max(1,Math.abs(K),Math.abs(ie))&&Math.abs(ae-te)<=g.E*Math.max(1,Math.abs(ae),Math.abs(te))&&Math.abs(se-Ee)<=g.E*Math.max(1,Math.abs(se),Math.abs(Ee))&&Math.abs(de-fe)<=g.E*Math.max(1,Math.abs(de),Math.abs(fe))},mul:$,sub:T})},12225:(He,ve,p)=>{"use strict";function g(){const L=new Float32Array(6);return L[0]=1,L[3]=1,L}function j(L,D,I,W){const k=D[W],Z=D[W+1];L[W]=I[0]*k+I[2]*Z+I[4],L[W+1]=I[1]*k+I[3]*Z+I[5]}function C(L,D,I,W=0,k=0,Z=2){const X=k||D.length/Z;for(let V=W;V<X;V++)j(L,D,I,V*Z)}p.d(ve,{c:()=>g,t:()=>C}),Object.freeze({__proto__:null,create:g,clone:function b(L){const D=new Float32Array(6);return D[0]=L[0],D[1]=L[1],D[2]=L[2],D[3]=L[3],D[4]=L[4],D[5]=L[5],D},fromValues:function J(L,D,I,W,k,Z){const X=new Float32Array(6);return X[0]=L,X[1]=D,X[2]=I,X[3]=W,X[4]=k,X[5]=Z,X},createView:function B(L,D){return new Float32Array(L,D,6)},transform:j,transformMany:C})},46342:(He,ve,p)=>{"use strict";function g(){return[1,0,0,1,0,0]}p.d(ve,{c:()=>g}),Object.freeze({__proto__:null,create:g,clone:function b(C){return[C[0],C[1],C[2],C[3],C[4],C[5]]},fromValues:function J(C,$,L,D,I,W){return[C,$,L,D,I,W]},createView:function B(C,$){return new Float64Array(C,$,6)}})},30217:(He,ve,p)=>{"use strict";p.d(ve,{a:()=>M,b:()=>j,c:()=>W,d:()=>Z,f:()=>b,i:()=>se,j:()=>X,l:()=>V,m:()=>I,r:()=>k,s:()=>B,t:()=>C});var g=p(39863);function b(ie,te){return ie[0]=te[0],ie[1]=te[1],ie[2]=te[2],ie[3]=te[4],ie[4]=te[5],ie[5]=te[6],ie[6]=te[8],ie[7]=te[9],ie[8]=te[10],ie}function B(ie,te,Ee,fe,be,ye,Ke,Ue,he,Me){return ie[0]=te,ie[1]=Ee,ie[2]=fe,ie[3]=be,ie[4]=ye,ie[5]=Ke,ie[6]=Ue,ie[7]=he,ie[8]=Me,ie}function j(ie){return ie[0]=1,ie[1]=0,ie[2]=0,ie[3]=0,ie[4]=1,ie[5]=0,ie[6]=0,ie[7]=0,ie[8]=1,ie}function C(ie,te){if(ie===te){const Ee=te[1],fe=te[2],be=te[5];ie[1]=te[3],ie[2]=te[6],ie[3]=Ee,ie[5]=te[7],ie[6]=fe,ie[7]=be}else ie[0]=te[0],ie[1]=te[3],ie[2]=te[6],ie[3]=te[1],ie[4]=te[4],ie[5]=te[7],ie[6]=te[2],ie[7]=te[5],ie[8]=te[8];return ie}function I(ie,te,Ee){const fe=te[0],be=te[1],ye=te[2],Ke=te[3],Ue=te[4],he=te[5],Me=te[6],Le=te[7],Je=te[8],Oe=Ee[0],xe=Ee[1],Be=Ee[2],Y=Ee[3],me=Ee[4],Ie=Ee[5],$e=Ee[6],rt=Ee[7],Qe=Ee[8];return ie[0]=Oe*fe+xe*Ke+Be*Me,ie[1]=Oe*be+xe*Ue+Be*Le,ie[2]=Oe*ye+xe*he+Be*Je,ie[3]=Y*fe+me*Ke+Ie*Me,ie[4]=Y*be+me*Ue+Ie*Le,ie[5]=Y*ye+me*he+Ie*Je,ie[6]=$e*fe+rt*Ke+Qe*Me,ie[7]=$e*be+rt*Ue+Qe*Le,ie[8]=$e*ye+rt*he+Qe*Je,ie}function W(ie,te,Ee){const fe=te[0],be=te[1],ye=te[2],Ke=te[3],Ue=te[4],he=te[5],Me=te[6],Le=te[7],Je=te[8],Oe=Ee[0],xe=Ee[1];return ie[0]=fe,ie[1]=be,ie[2]=ye,ie[3]=Ke,ie[4]=Ue,ie[5]=he,ie[6]=Oe*fe+xe*Ke+Me,ie[7]=Oe*be+xe*Ue+Le,ie[8]=Oe*ye+xe*he+Je,ie}function k(ie,te,Ee){const fe=te[0],be=te[1],ye=te[2],Ke=te[3],Ue=te[4],he=te[5],Me=te[6],Le=te[7],Je=te[8],Oe=Math.sin(Ee),xe=Math.cos(Ee);return ie[0]=xe*fe+Oe*Ke,ie[1]=xe*be+Oe*Ue,ie[2]=xe*ye+Oe*he,ie[3]=xe*Ke-Oe*fe,ie[4]=xe*Ue-Oe*be,ie[5]=xe*he-Oe*ye,ie[6]=Me,ie[7]=Le,ie[8]=Je,ie}function Z(ie,te,Ee){const fe=Ee[0],be=Ee[1],ye=Ee[2];return ie[0]=fe*te[0],ie[1]=fe*te[1],ie[2]=fe*te[2],ie[3]=be*te[3],ie[4]=be*te[4],ie[5]=be*te[5],ie[6]=ye*te[6],ie[7]=ye*te[7],ie[8]=ye*te[8],ie}function X(ie,te,Ee){const fe=Ee[0],be=Ee[1];return ie[0]=fe*te[0],ie[1]=fe*te[1],ie[2]=fe*te[2],ie[3]=be*te[3],ie[4]=be*te[4],ie[5]=be*te[5],ie}function V(ie,te){return ie[0]=1,ie[1]=0,ie[2]=0,ie[3]=0,ie[4]=1,ie[5]=0,ie[6]=te[0],ie[7]=te[1],ie[8]=1,ie}function M(ie,te){const Ee=te[0],fe=te[1],be=te[2],ye=te[3],Ke=te[4],Ue=te[5],he=te[6],Me=te[7],Le=te[8],Je=te[9],Oe=te[10],xe=te[11],Be=te[12],Y=te[13],me=te[14],Ie=te[15],$e=Ee*Ue-fe*Ke,rt=Ee*he-be*Ke,Qe=Ee*Me-ye*Ke,Xe=fe*he-be*Ue,qe=fe*Me-ye*Ue,ke=be*Me-ye*he,dt=Le*Y-Je*Be,We=Le*me-Oe*Be,nt=Le*Ie-xe*Be,ht=Je*me-Oe*Y,mt=Je*Ie-xe*Y,Kt=Oe*Ie-xe*me;let Bt=$e*Kt-rt*mt+Qe*ht+Xe*nt-qe*We+ke*dt;return Bt?(Bt=1/Bt,ie[0]=(Ue*Kt-he*mt+Me*ht)*Bt,ie[1]=(he*nt-Ke*Kt-Me*We)*Bt,ie[2]=(Ke*mt-Ue*nt+Me*dt)*Bt,ie[3]=(be*mt-fe*Kt-ye*ht)*Bt,ie[4]=(Ee*Kt-be*nt+ye*We)*Bt,ie[5]=(fe*nt-Ee*mt-ye*dt)*Bt,ie[6]=(Y*ke-me*qe+Ie*Xe)*Bt,ie[7]=(me*Qe-Be*ke-Ie*rt)*Bt,ie[8]=(Be*qe-Y*Qe+Ie*$e)*Bt,ie):null}function oe(ie,te,Ee){return ie[0]=te[0]-Ee[0],ie[1]=te[1]-Ee[1],ie[2]=te[2]-Ee[2],ie[3]=te[3]-Ee[3],ie[4]=te[4]-Ee[4],ie[5]=te[5]-Ee[5],ie[6]=te[6]-Ee[6],ie[7]=te[7]-Ee[7],ie[8]=te[8]-Ee[8],ie}function se(ie){const te=g.E,Ee=ie[0],fe=ie[1],be=ie[2],ye=ie[3],Ke=ie[4],Ue=ie[5],he=ie[6],Me=ie[7],Le=ie[8];return Math.abs(1-(Ee*Ee+ye*ye+he*he))<=te&&Math.abs(1-(fe*fe+Ke*Ke+Me*Me))<=te&&Math.abs(1-(be*be+Ue*Ue+Le*Le))<=te}Object.freeze({__proto__:null,fromMat4:b,copy:function J(ie,te){return ie[0]=te[0],ie[1]=te[1],ie[2]=te[2],ie[3]=te[3],ie[4]=te[4],ie[5]=te[5],ie[6]=te[6],ie[7]=te[7],ie[8]=te[8],ie},set:B,identity:j,transpose:C,invert:function $(ie,te){const Ee=te[0],fe=te[1],be=te[2],ye=te[3],Ke=te[4],Ue=te[5],he=te[6],Me=te[7],Le=te[8],Je=Le*Ke-Ue*Me,Oe=-Le*ye+Ue*he,xe=Me*ye-Ke*he;let Be=Ee*Je+fe*Oe+be*xe;return Be?(Be=1/Be,ie[0]=Je*Be,ie[1]=(-Le*fe+be*Me)*Be,ie[2]=(Ue*fe-be*Ke)*Be,ie[3]=Oe*Be,ie[4]=(Le*Ee-be*he)*Be,ie[5]=(-Ue*Ee+be*ye)*Be,ie[6]=xe*Be,ie[7]=(-Me*Ee+fe*he)*Be,ie[8]=(Ke*Ee-fe*ye)*Be,ie):null},adjoint:function L(ie,te){const Ee=te[0],fe=te[1],be=te[2],ye=te[3],Ke=te[4],Ue=te[5],he=te[6],Me=te[7],Le=te[8];return ie[0]=Ke*Le-Ue*Me,ie[1]=be*Me-fe*Le,ie[2]=fe*Ue-be*Ke,ie[3]=Ue*he-ye*Le,ie[4]=Ee*Le-be*he,ie[5]=be*ye-Ee*Ue,ie[6]=ye*Me-Ke*he,ie[7]=fe*he-Ee*Me,ie[8]=Ee*Ke-fe*ye,ie},determinant:function D(ie){const be=ie[3],ye=ie[4],Ke=ie[5],Ue=ie[6],he=ie[7],Me=ie[8];return ie[0]*(Me*ye-Ke*he)+ie[1]*(-Me*be+Ke*Ue)+ie[2]*(he*be-ye*Ue)},multiply:I,translate:W,rotate:k,scale:Z,scaleByVec2:X,fromTranslation:V,fromRotation:function w(ie,te){const Ee=Math.sin(te),fe=Math.cos(te);return ie[0]=fe,ie[1]=Ee,ie[2]=0,ie[3]=-Ee,ie[4]=fe,ie[5]=0,ie[6]=0,ie[7]=0,ie[8]=1,ie},fromScaling:function T(ie,te){return ie[0]=te[0],ie[1]=0,ie[2]=0,ie[3]=0,ie[4]=te[1],ie[5]=0,ie[6]=0,ie[7]=0,ie[8]=1,ie},fromMat2d:function O(ie,te){return ie[0]=te[0],ie[1]=te[1],ie[2]=0,ie[3]=te[2],ie[4]=te[3],ie[5]=0,ie[6]=te[4],ie[7]=te[5],ie[8]=1,ie},fromQuat:function x(ie,te){const Ee=te[0],fe=te[1],be=te[2],ye=te[3],Ke=Ee+Ee,Ue=fe+fe,he=be+be,Me=Ee*Ke,Le=fe*Ke,Je=fe*Ue,Oe=be*Ke,xe=be*Ue,Be=be*he,Y=ye*Ke,me=ye*Ue,Ie=ye*he;return ie[0]=1-Je-Be,ie[3]=Le-Ie,ie[6]=Oe+me,ie[1]=Le+Ie,ie[4]=1-Me-Be,ie[7]=xe-Y,ie[2]=Oe-me,ie[5]=xe+Y,ie[8]=1-Me-Je,ie},normalFromMat4Legacy:function N(ie,te){const Ee=te[0],fe=te[1],be=te[2],ye=te[4],Ke=te[5],Ue=te[6],he=te[8],Me=te[9],Le=te[10],Je=Le*Ke-Ue*Me,Oe=-Le*ye+Ue*he,xe=Me*ye-Ke*he,Be=Ee*Je+fe*Oe+be*xe;if(!Be)return null;const Y=1/Be;return ie[0]=Je*Y,ie[1]=(-Le*fe+be*Me)*Y,ie[2]=(Ue*fe-be*Ke)*Y,ie[3]=Oe*Y,ie[4]=(Le*Ee-be*he)*Y,ie[5]=(-Ue*Ee+be*ye)*Y,ie[6]=xe*Y,ie[7]=(-Me*Ee+fe*he)*Y,ie[8]=(Ke*Ee-fe*ye)*Y,ie},normalFromMat4:M,projection:function Q(ie,te,Ee){return ie[0]=2/te,ie[1]=0,ie[2]=0,ie[3]=0,ie[4]=-2/Ee,ie[5]=0,ie[6]=-1,ie[7]=1,ie[8]=1,ie},str:function z(ie){return"mat3("+ie[0]+", "+ie[1]+", "+ie[2]+", "+ie[3]+", "+ie[4]+", "+ie[5]+", "+ie[6]+", "+ie[7]+", "+ie[8]+")"},frob:function ee(ie){return Math.sqrt(ie[0]**2+ie[1]**2+ie[2]**2+ie[3]**2+ie[4]**2+ie[5]**2+ie[6]**2+ie[7]**2+ie[8]**2)},add:function le(ie,te,Ee){return ie[0]=te[0]+Ee[0],ie[1]=te[1]+Ee[1],ie[2]=te[2]+Ee[2],ie[3]=te[3]+Ee[3],ie[4]=te[4]+Ee[4],ie[5]=te[5]+Ee[5],ie[6]=te[6]+Ee[6],ie[7]=te[7]+Ee[7],ie[8]=te[8]+Ee[8],ie},subtract:oe,multiplyScalar:function ce(ie,te,Ee){return ie[0]=te[0]*Ee,ie[1]=te[1]*Ee,ie[2]=te[2]*Ee,ie[3]=te[3]*Ee,ie[4]=te[4]*Ee,ie[5]=te[5]*Ee,ie[6]=te[6]*Ee,ie[7]=te[7]*Ee,ie[8]=te[8]*Ee,ie},multiplyScalarAndAdd:function re(ie,te,Ee,fe){return ie[0]=te[0]+Ee[0]*fe,ie[1]=te[1]+Ee[1]*fe,ie[2]=te[2]+Ee[2]*fe,ie[3]=te[3]+Ee[3]*fe,ie[4]=te[4]+Ee[4]*fe,ie[5]=te[5]+Ee[5]*fe,ie[6]=te[6]+Ee[6]*fe,ie[7]=te[7]+Ee[7]*fe,ie[8]=te[8]+Ee[8]*fe,ie},exactEquals:function K(ie,te){return ie[0]===te[0]&&ie[1]===te[1]&&ie[2]===te[2]&&ie[3]===te[3]&&ie[4]===te[4]&&ie[5]===te[5]&&ie[6]===te[6]&&ie[7]===te[7]&&ie[8]===te[8]},equals:function ae(ie,te){const Ee=ie[0],fe=ie[1],be=ie[2],ye=ie[3],Ke=ie[4],Ue=ie[5],he=ie[6],Me=ie[7],Le=ie[8],Je=te[0],Oe=te[1],xe=te[2],Be=te[3],Y=te[4],me=te[5],Ie=te[6],$e=te[7],rt=te[8];return Math.abs(Ee-Je)<=g.E*Math.max(1,Math.abs(Ee),Math.abs(Je))&&Math.abs(fe-Oe)<=g.E*Math.max(1,Math.abs(fe),Math.abs(Oe))&&Math.abs(be-xe)<=g.E*Math.max(1,Math.abs(be),Math.abs(xe))&&Math.abs(ye-Be)<=g.E*Math.max(1,Math.abs(ye),Math.abs(Be))&&Math.abs(Ke-Y)<=g.E*Math.max(1,Math.abs(Ke),Math.abs(Y))&&Math.abs(Ue-me)<=g.E*Math.max(1,Math.abs(Ue),Math.abs(me))&&Math.abs(he-Ie)<=g.E*Math.max(1,Math.abs(he),Math.abs(Ie))&&Math.abs(Me-$e)<=g.E*Math.max(1,Math.abs(Me),Math.abs($e))&&Math.abs(Le-rt)<=g.E*Math.max(1,Math.abs(Le),Math.abs(rt))},isOrthoNormal:se,mul:I,sub:oe})},49966:(He,ve,p)=>{"use strict";function g(){const C=new Float32Array(9);return C[0]=1,C[4]=1,C[8]=1,C}function b(C){const $=new Float32Array(9);return $[0]=C[0],$[1]=C[1],$[2]=C[2],$[3]=C[3],$[4]=C[4],$[5]=C[5],$[6]=C[6],$[7]=C[7],$[8]=C[8],$}p.d(ve,{a:()=>b,c:()=>g}),Object.freeze({__proto__:null,create:g,clone:b,fromValues:function J(C,$,L,D,I,W,k,Z,X){const V=new Float32Array(9);return V[0]=C,V[1]=$,V[2]=L,V[3]=D,V[4]=I,V[5]=W,V[6]=k,V[7]=Z,V[8]=X,V},createView:function B(C,$){return new Float32Array(C,$,9)}})},28347:(He,ve,p)=>{"use strict";p.d(ve,{a:()=>$,d:()=>x,e:()=>Z,f:()=>T,h:()=>k,i:()=>j,j:()=>W,m:()=>I,p:()=>Je,s:()=>B,t:()=>C,u:()=>O,v:()=>Le,w:()=>Me,y:()=>N});var g=p(28093),b=p(39863);function B(Y,me,Ie,$e,rt,Qe,Xe,qe,ke,dt,We,nt,ht,mt,Kt,Bt,$t){return Y[0]=me,Y[1]=Ie,Y[2]=$e,Y[3]=rt,Y[4]=Qe,Y[5]=Xe,Y[6]=qe,Y[7]=ke,Y[8]=dt,Y[9]=We,Y[10]=nt,Y[11]=ht,Y[12]=mt,Y[13]=Kt,Y[14]=Bt,Y[15]=$t,Y}function j(Y){return Y[0]=1,Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=0,Y[5]=1,Y[6]=0,Y[7]=0,Y[8]=0,Y[9]=0,Y[10]=1,Y[11]=0,Y[12]=0,Y[13]=0,Y[14]=0,Y[15]=1,Y}function C(Y,me){if(Y===me){const Ie=me[1],$e=me[2],rt=me[3],Qe=me[6],Xe=me[7],qe=me[11];Y[1]=me[4],Y[2]=me[8],Y[3]=me[12],Y[4]=Ie,Y[6]=me[9],Y[7]=me[13],Y[8]=$e,Y[9]=Qe,Y[11]=me[14],Y[12]=rt,Y[13]=Xe,Y[14]=qe}else Y[0]=me[0],Y[1]=me[4],Y[2]=me[8],Y[3]=me[12],Y[4]=me[1],Y[5]=me[5],Y[6]=me[9],Y[7]=me[13],Y[8]=me[2],Y[9]=me[6],Y[10]=me[10],Y[11]=me[14],Y[12]=me[3],Y[13]=me[7],Y[14]=me[11],Y[15]=me[15];return Y}function $(Y,me){const Ie=me[0],$e=me[1],rt=me[2],Qe=me[3],Xe=me[4],qe=me[5],ke=me[6],dt=me[7],We=me[8],nt=me[9],ht=me[10],mt=me[11],Kt=me[12],Bt=me[13],$t=me[14],qt=me[15],gr=Ie*qe-$e*Xe,er=Ie*ke-rt*Xe,vr=Ie*dt-Qe*Xe,pr=$e*ke-rt*qe,hr=$e*dt-Qe*qe,st=rt*dt-Qe*ke,ft=We*Bt-nt*Kt,St=We*$t-ht*Kt,Lt=We*qt-mt*Kt,Ft=nt*$t-ht*Bt,Dt=nt*qt-mt*Bt,Vt=ht*qt-mt*$t;let Gt=gr*Vt-er*Dt+vr*Ft+pr*Lt-hr*St+st*ft;return Gt?(Gt=1/Gt,Y[0]=(qe*Vt-ke*Dt+dt*Ft)*Gt,Y[1]=(rt*Dt-$e*Vt-Qe*Ft)*Gt,Y[2]=(Bt*st-$t*hr+qt*pr)*Gt,Y[3]=(ht*hr-nt*st-mt*pr)*Gt,Y[4]=(ke*Lt-Xe*Vt-dt*St)*Gt,Y[5]=(Ie*Vt-rt*Lt+Qe*St)*Gt,Y[6]=($t*vr-Kt*st-qt*er)*Gt,Y[7]=(We*st-ht*vr+mt*er)*Gt,Y[8]=(Xe*Dt-qe*Lt+dt*ft)*Gt,Y[9]=($e*Lt-Ie*Dt-Qe*ft)*Gt,Y[10]=(Kt*hr-Bt*vr+qt*gr)*Gt,Y[11]=(nt*vr-We*hr-mt*gr)*Gt,Y[12]=(qe*St-Xe*Ft-ke*ft)*Gt,Y[13]=(Ie*Ft-$e*St+rt*ft)*Gt,Y[14]=(Bt*er-Kt*pr-$t*gr)*Gt,Y[15]=(We*pr-nt*er+ht*gr)*Gt,Y):null}function I(Y,me,Ie){const $e=me[0],rt=me[1],Qe=me[2],Xe=me[3],qe=me[4],ke=me[5],dt=me[6],We=me[7],nt=me[8],ht=me[9],mt=me[10],Kt=me[11],Bt=me[12],$t=me[13],qt=me[14],gr=me[15];let er=Ie[0],vr=Ie[1],pr=Ie[2],hr=Ie[3];return Y[0]=er*$e+vr*qe+pr*nt+hr*Bt,Y[1]=er*rt+vr*ke+pr*ht+hr*$t,Y[2]=er*Qe+vr*dt+pr*mt+hr*qt,Y[3]=er*Xe+vr*We+pr*Kt+hr*gr,er=Ie[4],vr=Ie[5],pr=Ie[6],hr=Ie[7],Y[4]=er*$e+vr*qe+pr*nt+hr*Bt,Y[5]=er*rt+vr*ke+pr*ht+hr*$t,Y[6]=er*Qe+vr*dt+pr*mt+hr*qt,Y[7]=er*Xe+vr*We+pr*Kt+hr*gr,er=Ie[8],vr=Ie[9],pr=Ie[10],hr=Ie[11],Y[8]=er*$e+vr*qe+pr*nt+hr*Bt,Y[9]=er*rt+vr*ke+pr*ht+hr*$t,Y[10]=er*Qe+vr*dt+pr*mt+hr*qt,Y[11]=er*Xe+vr*We+pr*Kt+hr*gr,er=Ie[12],vr=Ie[13],pr=Ie[14],hr=Ie[15],Y[12]=er*$e+vr*qe+pr*nt+hr*Bt,Y[13]=er*rt+vr*ke+pr*ht+hr*$t,Y[14]=er*Qe+vr*dt+pr*mt+hr*qt,Y[15]=er*Xe+vr*We+pr*Kt+hr*gr,Y}function W(Y,me,Ie){const $e=Ie[0],rt=Ie[1],Qe=Ie[2];let Xe,qe,ke,dt,We,nt,ht,mt,Kt,Bt,$t,qt;return me===Y?(Y[12]=me[0]*$e+me[4]*rt+me[8]*Qe+me[12],Y[13]=me[1]*$e+me[5]*rt+me[9]*Qe+me[13],Y[14]=me[2]*$e+me[6]*rt+me[10]*Qe+me[14],Y[15]=me[3]*$e+me[7]*rt+me[11]*Qe+me[15]):(Xe=me[0],qe=me[1],ke=me[2],dt=me[3],We=me[4],nt=me[5],ht=me[6],mt=me[7],Kt=me[8],Bt=me[9],$t=me[10],qt=me[11],Y[0]=Xe,Y[1]=qe,Y[2]=ke,Y[3]=dt,Y[4]=We,Y[5]=nt,Y[6]=ht,Y[7]=mt,Y[8]=Kt,Y[9]=Bt,Y[10]=$t,Y[11]=qt,Y[12]=Xe*$e+We*rt+Kt*Qe+me[12],Y[13]=qe*$e+nt*rt+Bt*Qe+me[13],Y[14]=ke*$e+ht*rt+$t*Qe+me[14],Y[15]=dt*$e+mt*rt+qt*Qe+me[15]),Y}function k(Y,me,Ie){const $e=Ie[0],rt=Ie[1],Qe=Ie[2];return Y[0]=me[0]*$e,Y[1]=me[1]*$e,Y[2]=me[2]*$e,Y[3]=me[3]*$e,Y[4]=me[4]*rt,Y[5]=me[5]*rt,Y[6]=me[6]*rt,Y[7]=me[7]*rt,Y[8]=me[8]*Qe,Y[9]=me[9]*Qe,Y[10]=me[10]*Qe,Y[11]=me[11]*Qe,Y[12]=me[12],Y[13]=me[13],Y[14]=me[14],Y[15]=me[15],Y}function Z(Y,me,Ie,$e){let rt,Qe,Xe,qe,ke,dt,We,nt,ht,mt,Kt,Bt,$t,qt,gr,er,vr,pr,hr,st,ft,St,Lt,Ft,Dt=$e[0],Vt=$e[1],Gt=$e[2],Qt=Math.sqrt(Dt*Dt+Vt*Vt+Gt*Gt);return Qt<b.E?null:(Qt=1/Qt,Dt*=Qt,Vt*=Qt,Gt*=Qt,rt=Math.sin(Ie),Qe=Math.cos(Ie),Xe=1-Qe,qe=me[0],ke=me[1],dt=me[2],We=me[3],nt=me[4],ht=me[5],mt=me[6],Kt=me[7],Bt=me[8],$t=me[9],qt=me[10],gr=me[11],er=Dt*Dt*Xe+Qe,vr=Vt*Dt*Xe+Gt*rt,pr=Gt*Dt*Xe-Vt*rt,hr=Dt*Vt*Xe-Gt*rt,st=Vt*Vt*Xe+Qe,ft=Gt*Vt*Xe+Dt*rt,St=Dt*Gt*Xe+Vt*rt,Lt=Vt*Gt*Xe-Dt*rt,Ft=Gt*Gt*Xe+Qe,Y[0]=qe*er+nt*vr+Bt*pr,Y[1]=ke*er+ht*vr+$t*pr,Y[2]=dt*er+mt*vr+qt*pr,Y[3]=We*er+Kt*vr+gr*pr,Y[4]=qe*hr+nt*st+Bt*ft,Y[5]=ke*hr+ht*st+$t*ft,Y[6]=dt*hr+mt*st+qt*ft,Y[7]=We*hr+Kt*st+gr*ft,Y[8]=qe*St+nt*Lt+Bt*Ft,Y[9]=ke*St+ht*Lt+$t*Ft,Y[10]=dt*St+mt*Lt+qt*Ft,Y[11]=We*St+Kt*Lt+gr*Ft,me!==Y&&(Y[12]=me[12],Y[13]=me[13],Y[14]=me[14],Y[15]=me[15]),Y)}function T(Y,me){return Y[0]=1,Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=0,Y[5]=1,Y[6]=0,Y[7]=0,Y[8]=0,Y[9]=0,Y[10]=1,Y[11]=0,Y[12]=me[0],Y[13]=me[1],Y[14]=me[2],Y[15]=1,Y}function O(Y,me){return Y[0]=me[0],Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=0,Y[5]=me[1],Y[6]=0,Y[7]=0,Y[8]=0,Y[9]=0,Y[10]=me[2],Y[11]=0,Y[12]=0,Y[13]=0,Y[14]=0,Y[15]=1,Y}function x(Y,me,Ie){let $e,rt,Qe,Xe=Ie[0],qe=Ie[1],ke=Ie[2],dt=Math.sqrt(Xe*Xe+qe*qe+ke*ke);return dt<b.E?null:(dt=1/dt,Xe*=dt,qe*=dt,ke*=dt,$e=Math.sin(me),rt=Math.cos(me),Qe=1-rt,Y[0]=Xe*Xe*Qe+rt,Y[1]=qe*Xe*Qe+ke*$e,Y[2]=ke*Xe*Qe-qe*$e,Y[3]=0,Y[4]=Xe*qe*Qe-ke*$e,Y[5]=qe*qe*Qe+rt,Y[6]=ke*qe*Qe+Xe*$e,Y[7]=0,Y[8]=Xe*ke*Qe+qe*$e,Y[9]=qe*ke*Qe-Xe*$e,Y[10]=ke*ke*Qe+rt,Y[11]=0,Y[12]=0,Y[13]=0,Y[14]=0,Y[15]=1,Y)}function N(Y,me){const Ie=Math.sin(me),$e=Math.cos(me);return Y[0]=1,Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=0,Y[5]=$e,Y[6]=Ie,Y[7]=0,Y[8]=0,Y[9]=-Ie,Y[10]=$e,Y[11]=0,Y[12]=0,Y[13]=0,Y[14]=0,Y[15]=1,Y}function z(Y,me,Ie){const $e=me[0],rt=me[1],Qe=me[2],Xe=me[3],qe=$e+$e,ke=rt+rt,dt=Qe+Qe,We=$e*qe,nt=$e*ke,ht=$e*dt,mt=rt*ke,Kt=rt*dt,Bt=Qe*dt,$t=Xe*qe,qt=Xe*ke,gr=Xe*dt;return Y[0]=1-(mt+Bt),Y[1]=nt+gr,Y[2]=ht-qt,Y[3]=0,Y[4]=nt-gr,Y[5]=1-(We+Bt),Y[6]=Kt+$t,Y[7]=0,Y[8]=ht+qt,Y[9]=Kt-$t,Y[10]=1-(We+mt),Y[11]=0,Y[12]=Ie[0],Y[13]=Ie[1],Y[14]=Ie[2],Y[15]=1,Y}const le=(0,g.c)();function Ke(Y,me,Ie){return Y[0]=me[0]-Ie[0],Y[1]=me[1]-Ie[1],Y[2]=me[2]-Ie[2],Y[3]=me[3]-Ie[3],Y[4]=me[4]-Ie[4],Y[5]=me[5]-Ie[5],Y[6]=me[6]-Ie[6],Y[7]=me[7]-Ie[7],Y[8]=me[8]-Ie[8],Y[9]=me[9]-Ie[9],Y[10]=me[10]-Ie[10],Y[11]=me[11]-Ie[11],Y[12]=me[12]-Ie[12],Y[13]=me[13]-Ie[13],Y[14]=me[14]-Ie[14],Y[15]=me[15]-Ie[15],Y}function Me(Y,me){return Y[0]===me[0]&&Y[1]===me[1]&&Y[2]===me[2]&&Y[3]===me[3]&&Y[4]===me[4]&&Y[5]===me[5]&&Y[6]===me[6]&&Y[7]===me[7]&&Y[8]===me[8]&&Y[9]===me[9]&&Y[10]===me[10]&&Y[11]===me[11]&&Y[12]===me[12]&&Y[13]===me[13]&&Y[14]===me[14]&&Y[15]===me[15]}function Le(Y,me){if(Y===me)return!0;const Ie=Y[0],$e=Y[1],rt=Y[2],Qe=Y[3],Xe=Y[4],qe=Y[5],ke=Y[6],dt=Y[7],We=Y[8],nt=Y[9],ht=Y[10],mt=Y[11],Kt=Y[12],Bt=Y[13],$t=Y[14],qt=Y[15],gr=me[0],er=me[1],vr=me[2],pr=me[3],hr=me[4],st=me[5],ft=me[6],St=me[7],Lt=me[8],Ft=me[9],Dt=me[10],Vt=me[11],Gt=me[12],Qt=me[13],gt=me[14],ut=me[15];return Math.abs(Ie-gr)<=b.E*Math.max(1,Math.abs(Ie),Math.abs(gr))&&Math.abs($e-er)<=b.E*Math.max(1,Math.abs($e),Math.abs(er))&&Math.abs(rt-vr)<=b.E*Math.max(1,Math.abs(rt),Math.abs(vr))&&Math.abs(Qe-pr)<=b.E*Math.max(1,Math.abs(Qe),Math.abs(pr))&&Math.abs(Xe-hr)<=b.E*Math.max(1,Math.abs(Xe),Math.abs(hr))&&Math.abs(qe-st)<=b.E*Math.max(1,Math.abs(qe),Math.abs(st))&&Math.abs(ke-ft)<=b.E*Math.max(1,Math.abs(ke),Math.abs(ft))&&Math.abs(dt-St)<=b.E*Math.max(1,Math.abs(dt),Math.abs(St))&&Math.abs(We-Lt)<=b.E*Math.max(1,Math.abs(We),Math.abs(Lt))&&Math.abs(nt-Ft)<=b.E*Math.max(1,Math.abs(nt),Math.abs(Ft))&&Math.abs(ht-Dt)<=b.E*Math.max(1,Math.abs(ht),Math.abs(Dt))&&Math.abs(mt-Vt)<=b.E*Math.max(1,Math.abs(mt),Math.abs(Vt))&&Math.abs(Kt-Gt)<=b.E*Math.max(1,Math.abs(Kt),Math.abs(Gt))&&Math.abs(Bt-Qt)<=b.E*Math.max(1,Math.abs(Bt),Math.abs(Qt))&&Math.abs($t-gt)<=b.E*Math.max(1,Math.abs($t),Math.abs(gt))&&Math.abs(qt-ut)<=b.E*Math.max(1,Math.abs(qt),Math.abs(ut))}function Je(Y){const me=b.E,Ie=Y[0],$e=Y[1],rt=Y[2],Qe=Y[4],Xe=Y[5],qe=Y[6],ke=Y[8],dt=Y[9],We=Y[10];return Math.abs(1-(Ie*Ie+Qe*Qe+ke*ke))<=me&&Math.abs(1-($e*$e+Xe*Xe+dt*dt))<=me&&Math.abs(1-(rt*rt+qe*qe+We*We))<=me}Object.freeze({__proto__:null,copy:function J(Y,me){return Y[0]=me[0],Y[1]=me[1],Y[2]=me[2],Y[3]=me[3],Y[4]=me[4],Y[5]=me[5],Y[6]=me[6],Y[7]=me[7],Y[8]=me[8],Y[9]=me[9],Y[10]=me[10],Y[11]=me[11],Y[12]=me[12],Y[13]=me[13],Y[14]=me[14],Y[15]=me[15],Y},set:B,identity:j,transpose:C,invert:$,adjoint:function L(Y,me){const Ie=me[0],$e=me[1],rt=me[2],Qe=me[3],Xe=me[4],qe=me[5],ke=me[6],dt=me[7],We=me[8],nt=me[9],ht=me[10],mt=me[11],Kt=me[12],Bt=me[13],$t=me[14],qt=me[15];return Y[0]=qe*(ht*qt-mt*$t)-nt*(ke*qt-dt*$t)+Bt*(ke*mt-dt*ht),Y[1]=-($e*(ht*qt-mt*$t)-nt*(rt*qt-Qe*$t)+Bt*(rt*mt-Qe*ht)),Y[2]=$e*(ke*qt-dt*$t)-qe*(rt*qt-Qe*$t)+Bt*(rt*dt-Qe*ke),Y[3]=-($e*(ke*mt-dt*ht)-qe*(rt*mt-Qe*ht)+nt*(rt*dt-Qe*ke)),Y[4]=-(Xe*(ht*qt-mt*$t)-We*(ke*qt-dt*$t)+Kt*(ke*mt-dt*ht)),Y[5]=Ie*(ht*qt-mt*$t)-We*(rt*qt-Qe*$t)+Kt*(rt*mt-Qe*ht),Y[6]=-(Ie*(ke*qt-dt*$t)-Xe*(rt*qt-Qe*$t)+Kt*(rt*dt-Qe*ke)),Y[7]=Ie*(ke*mt-dt*ht)-Xe*(rt*mt-Qe*ht)+We*(rt*dt-Qe*ke),Y[8]=Xe*(nt*qt-mt*Bt)-We*(qe*qt-dt*Bt)+Kt*(qe*mt-dt*nt),Y[9]=-(Ie*(nt*qt-mt*Bt)-We*($e*qt-Qe*Bt)+Kt*($e*mt-Qe*nt)),Y[10]=Ie*(qe*qt-dt*Bt)-Xe*($e*qt-Qe*Bt)+Kt*($e*dt-Qe*qe),Y[11]=-(Ie*(qe*mt-dt*nt)-Xe*($e*mt-Qe*nt)+We*($e*dt-Qe*qe)),Y[12]=-(Xe*(nt*$t-ht*Bt)-We*(qe*$t-ke*Bt)+Kt*(qe*ht-ke*nt)),Y[13]=Ie*(nt*$t-ht*Bt)-We*($e*$t-rt*Bt)+Kt*($e*ht-rt*nt),Y[14]=-(Ie*(qe*$t-ke*Bt)-Xe*($e*$t-rt*Bt)+Kt*($e*ke-rt*qe)),Y[15]=Ie*(qe*ht-ke*nt)-Xe*($e*ht-rt*nt)+We*($e*ke-rt*qe),Y},determinant:function D(Y){const me=Y[0],Ie=Y[1],$e=Y[2],rt=Y[3],Qe=Y[4],Xe=Y[5],qe=Y[6],ke=Y[7],dt=Y[8],We=Y[9],nt=Y[10],ht=Y[11],mt=Y[12],Kt=Y[13],Bt=Y[14],$t=Y[15];return(me*Xe-Ie*Qe)*(nt*$t-ht*Bt)-(me*qe-$e*Qe)*(We*$t-ht*Kt)+(me*ke-rt*Qe)*(We*Bt-nt*Kt)+(Ie*qe-$e*Xe)*(dt*$t-ht*mt)-(Ie*ke-rt*Xe)*(dt*Bt-nt*mt)+($e*ke-rt*qe)*(dt*Kt-We*mt)},multiply:I,translate:W,scale:k,rotate:Z,rotateX:function X(Y,me,Ie){const $e=Math.sin(Ie),rt=Math.cos(Ie),Qe=me[4],Xe=me[5],qe=me[6],ke=me[7],dt=me[8],We=me[9],nt=me[10],ht=me[11];return me!==Y&&(Y[0]=me[0],Y[1]=me[1],Y[2]=me[2],Y[3]=me[3],Y[12]=me[12],Y[13]=me[13],Y[14]=me[14],Y[15]=me[15]),Y[4]=Qe*rt+dt*$e,Y[5]=Xe*rt+We*$e,Y[6]=qe*rt+nt*$e,Y[7]=ke*rt+ht*$e,Y[8]=dt*rt-Qe*$e,Y[9]=We*rt-Xe*$e,Y[10]=nt*rt-qe*$e,Y[11]=ht*rt-ke*$e,Y},rotateY:function V(Y,me,Ie){const $e=Math.sin(Ie),rt=Math.cos(Ie),Qe=me[0],Xe=me[1],qe=me[2],ke=me[3],dt=me[8],We=me[9],nt=me[10],ht=me[11];return me!==Y&&(Y[4]=me[4],Y[5]=me[5],Y[6]=me[6],Y[7]=me[7],Y[12]=me[12],Y[13]=me[13],Y[14]=me[14],Y[15]=me[15]),Y[0]=Qe*rt-dt*$e,Y[1]=Xe*rt-We*$e,Y[2]=qe*rt-nt*$e,Y[3]=ke*rt-ht*$e,Y[8]=Qe*$e+dt*rt,Y[9]=Xe*$e+We*rt,Y[10]=qe*$e+nt*rt,Y[11]=ke*$e+ht*rt,Y},rotateZ:function w(Y,me,Ie){const $e=Math.sin(Ie),rt=Math.cos(Ie),Qe=me[0],Xe=me[1],qe=me[2],ke=me[3],dt=me[4],We=me[5],nt=me[6],ht=me[7];return me!==Y&&(Y[8]=me[8],Y[9]=me[9],Y[10]=me[10],Y[11]=me[11],Y[12]=me[12],Y[13]=me[13],Y[14]=me[14],Y[15]=me[15]),Y[0]=Qe*rt+dt*$e,Y[1]=Xe*rt+We*$e,Y[2]=qe*rt+nt*$e,Y[3]=ke*rt+ht*$e,Y[4]=dt*rt-Qe*$e,Y[5]=We*rt-Xe*$e,Y[6]=nt*rt-qe*$e,Y[7]=ht*rt-ke*$e,Y},fromTranslation:T,fromScaling:O,fromRotation:x,fromXRotation:N,fromYRotation:function M(Y,me){const Ie=Math.sin(me),$e=Math.cos(me);return Y[0]=$e,Y[1]=0,Y[2]=-Ie,Y[3]=0,Y[4]=0,Y[5]=1,Y[6]=0,Y[7]=0,Y[8]=Ie,Y[9]=0,Y[10]=$e,Y[11]=0,Y[12]=0,Y[13]=0,Y[14]=0,Y[15]=1,Y},fromZRotation:function Q(Y,me){const Ie=Math.sin(me),$e=Math.cos(me);return Y[0]=$e,Y[1]=Ie,Y[2]=0,Y[3]=0,Y[4]=-Ie,Y[5]=$e,Y[6]=0,Y[7]=0,Y[8]=0,Y[9]=0,Y[10]=1,Y[11]=0,Y[12]=0,Y[13]=0,Y[14]=0,Y[15]=1,Y},fromRotationTranslation:z,fromQuat2:function ee(Y,me){const Ie=le,$e=-me[0],rt=-me[1],Qe=-me[2],Xe=me[3],qe=me[4],ke=me[5],dt=me[6],We=me[7],nt=$e*$e+rt*rt+Qe*Qe+Xe*Xe;return nt>0?(Ie[0]=2*(qe*Xe+We*$e+ke*Qe-dt*rt)/nt,Ie[1]=2*(ke*Xe+We*rt+dt*$e-qe*Qe)/nt,Ie[2]=2*(dt*Xe+We*Qe+qe*rt-ke*$e)/nt):(Ie[0]=2*(qe*Xe+We*$e+ke*Qe-dt*rt),Ie[1]=2*(ke*Xe+We*rt+dt*$e-qe*Qe),Ie[2]=2*(dt*Xe+We*Qe+qe*rt-ke*$e)),z(Y,me,Ie),Y},getTranslation:function oe(Y,me){return Y[0]=me[12],Y[1]=me[13],Y[2]=me[14],Y},getScaling:function ce(Y,me){const Ie=me[0],$e=me[1],rt=me[2],Qe=me[4],Xe=me[5],qe=me[6],ke=me[8],dt=me[9],We=me[10];return Y[0]=Math.sqrt(Ie*Ie+$e*$e+rt*rt),Y[1]=Math.sqrt(Qe*Qe+Xe*Xe+qe*qe),Y[2]=Math.sqrt(ke*ke+dt*dt+We*We),Y},getRotation:function re(Y,me){const Ie=me[0]+me[5]+me[10];let $e=0;return Ie>0?($e=2*Math.sqrt(Ie+1),Y[3]=.25*$e,Y[0]=(me[6]-me[9])/$e,Y[1]=(me[8]-me[2])/$e,Y[2]=(me[1]-me[4])/$e):me[0]>me[5]&&me[0]>me[10]?($e=2*Math.sqrt(1+me[0]-me[5]-me[10]),Y[3]=(me[6]-me[9])/$e,Y[0]=.25*$e,Y[1]=(me[1]+me[4])/$e,Y[2]=(me[8]+me[2])/$e):me[5]>me[10]?($e=2*Math.sqrt(1+me[5]-me[0]-me[10]),Y[3]=(me[8]-me[2])/$e,Y[0]=(me[1]+me[4])/$e,Y[1]=.25*$e,Y[2]=(me[6]+me[9])/$e):($e=2*Math.sqrt(1+me[10]-me[0]-me[5]),Y[3]=(me[1]-me[4])/$e,Y[0]=(me[8]+me[2])/$e,Y[1]=(me[6]+me[9])/$e,Y[2]=.25*$e),Y},fromRotationTranslationScale:function K(Y,me,Ie,$e){const rt=me[0],Qe=me[1],Xe=me[2],qe=me[3],ke=rt+rt,dt=Qe+Qe,We=Xe+Xe,nt=rt*ke,ht=rt*dt,mt=rt*We,Kt=Qe*dt,Bt=Qe*We,$t=Xe*We,qt=qe*ke,gr=qe*dt,er=qe*We,vr=$e[0],pr=$e[1],hr=$e[2];return Y[0]=(1-(Kt+$t))*vr,Y[1]=(ht+er)*vr,Y[2]=(mt-gr)*vr,Y[3]=0,Y[4]=(ht-er)*pr,Y[5]=(1-(nt+$t))*pr,Y[6]=(Bt+qt)*pr,Y[7]=0,Y[8]=(mt+gr)*hr,Y[9]=(Bt-qt)*hr,Y[10]=(1-(nt+Kt))*hr,Y[11]=0,Y[12]=Ie[0],Y[13]=Ie[1],Y[14]=Ie[2],Y[15]=1,Y},fromRotationTranslationScaleOrigin:function ae(Y,me,Ie,$e,rt){const Qe=me[0],Xe=me[1],qe=me[2],ke=me[3],dt=Qe+Qe,We=Xe+Xe,nt=qe+qe,ht=Qe*dt,mt=Qe*We,Kt=Qe*nt,Bt=Xe*We,$t=Xe*nt,qt=qe*nt,gr=ke*dt,er=ke*We,vr=ke*nt,pr=$e[0],hr=$e[1],st=$e[2],ft=rt[0],St=rt[1],Lt=rt[2],Ft=(1-(Bt+qt))*pr,Dt=(mt+vr)*pr,Vt=(Kt-er)*pr,Gt=(mt-vr)*hr,Qt=(1-(ht+qt))*hr,gt=($t+gr)*hr,ut=(Kt+er)*st,Ze=($t-gr)*st,ot=(1-(ht+Bt))*st;return Y[0]=Ft,Y[1]=Dt,Y[2]=Vt,Y[3]=0,Y[4]=Gt,Y[5]=Qt,Y[6]=gt,Y[7]=0,Y[8]=ut,Y[9]=Ze,Y[10]=ot,Y[11]=0,Y[12]=Ie[0]+ft-(Ft*ft+Gt*St+ut*Lt),Y[13]=Ie[1]+St-(Dt*ft+Qt*St+Ze*Lt),Y[14]=Ie[2]+Lt-(Vt*ft+gt*St+ot*Lt),Y[15]=1,Y},fromQuat:function se(Y,me){const Ie=me[0],$e=me[1],rt=me[2],Qe=me[3],Xe=Ie+Ie,qe=$e+$e,ke=rt+rt,dt=Ie*Xe,We=$e*Xe,nt=$e*qe,ht=rt*Xe,mt=rt*qe,Kt=rt*ke,Bt=Qe*Xe,$t=Qe*qe,qt=Qe*ke;return Y[0]=1-nt-Kt,Y[1]=We+qt,Y[2]=ht-$t,Y[3]=0,Y[4]=We-qt,Y[5]=1-dt-Kt,Y[6]=mt+Bt,Y[7]=0,Y[8]=ht+$t,Y[9]=mt-Bt,Y[10]=1-dt-nt,Y[11]=0,Y[12]=0,Y[13]=0,Y[14]=0,Y[15]=1,Y},frustum:function de(Y,me,Ie,$e,rt,Qe,Xe){const qe=1/(Ie-me),ke=1/(rt-$e),dt=1/(Qe-Xe);return Y[0]=2*Qe*qe,Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=0,Y[5]=2*Qe*ke,Y[6]=0,Y[7]=0,Y[8]=(Ie+me)*qe,Y[9]=(rt+$e)*ke,Y[10]=(Xe+Qe)*dt,Y[11]=-1,Y[12]=0,Y[13]=0,Y[14]=Xe*Qe*2*dt,Y[15]=0,Y},perspective:function ue(Y,me,Ie,$e,rt){const Qe=1/Math.tan(me/2);let Xe;return Y[0]=Qe/Ie,Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=0,Y[5]=Qe,Y[6]=0,Y[7]=0,Y[8]=0,Y[9]=0,Y[11]=-1,Y[12]=0,Y[13]=0,Y[15]=0,null!=rt&&rt!==1/0?(Xe=1/($e-rt),Y[10]=(rt+$e)*Xe,Y[14]=2*rt*$e*Xe):(Y[10]=-1,Y[14]=-2*$e),Y},perspectiveFromFieldOfView:function pe(Y,me,Ie,$e){const rt=Math.tan(me.upDegrees*Math.PI/180),Qe=Math.tan(me.downDegrees*Math.PI/180),Xe=Math.tan(me.leftDegrees*Math.PI/180),qe=Math.tan(me.rightDegrees*Math.PI/180),ke=2/(Xe+qe),dt=2/(rt+Qe);return Y[0]=ke,Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=0,Y[5]=dt,Y[6]=0,Y[7]=0,Y[8]=-(Xe-qe)*ke*.5,Y[9]=(rt-Qe)*dt*.5,Y[10]=$e/(Ie-$e),Y[11]=-1,Y[12]=0,Y[13]=0,Y[14]=$e*Ie/(Ie-$e),Y[15]=0,Y},ortho:function ie(Y,me,Ie,$e,rt,Qe,Xe){const qe=1/(me-Ie),ke=1/($e-rt),dt=1/(Qe-Xe);return Y[0]=-2*qe,Y[1]=0,Y[2]=0,Y[3]=0,Y[4]=0,Y[5]=-2*ke,Y[6]=0,Y[7]=0,Y[8]=0,Y[9]=0,Y[10]=2*dt,Y[11]=0,Y[12]=(me+Ie)*qe,Y[13]=(rt+$e)*ke,Y[14]=(Xe+Qe)*dt,Y[15]=1,Y},lookAt:function te(Y,me,Ie,$e){let rt,Qe,Xe,qe,ke,dt,We,nt,ht,mt;const Kt=me[0],Bt=me[1],$t=me[2],qt=$e[0],gr=$e[1],er=$e[2],vr=Ie[0],pr=Ie[1],hr=Ie[2];return Math.abs(Kt-vr)<b.E&&Math.abs(Bt-pr)<b.E&&Math.abs($t-hr)<b.E?j(Y):(We=Kt-vr,nt=Bt-pr,ht=$t-hr,mt=1/Math.sqrt(We*We+nt*nt+ht*ht),We*=mt,nt*=mt,ht*=mt,rt=gr*ht-er*nt,Qe=er*We-qt*ht,Xe=qt*nt-gr*We,mt=Math.sqrt(rt*rt+Qe*Qe+Xe*Xe),mt?(mt=1/mt,rt*=mt,Qe*=mt,Xe*=mt):(rt=0,Qe=0,Xe=0),qe=nt*Xe-ht*Qe,ke=ht*rt-We*Xe,dt=We*Qe-nt*rt,mt=Math.sqrt(qe*qe+ke*ke+dt*dt),mt?(mt=1/mt,qe*=mt,ke*=mt,dt*=mt):(qe=0,ke=0,dt=0),Y[0]=rt,Y[1]=qe,Y[2]=We,Y[3]=0,Y[4]=Qe,Y[5]=ke,Y[6]=nt,Y[7]=0,Y[8]=Xe,Y[9]=dt,Y[10]=ht,Y[11]=0,Y[12]=-(rt*Kt+Qe*Bt+Xe*$t),Y[13]=-(qe*Kt+ke*Bt+dt*$t),Y[14]=-(We*Kt+nt*Bt+ht*$t),Y[15]=1,Y)},targetTo:function Ee(Y,me,Ie,$e){const rt=me[0],Qe=me[1],Xe=me[2],qe=$e[0],ke=$e[1],dt=$e[2];let We=rt-Ie[0],nt=Qe-Ie[1],ht=Xe-Ie[2],mt=We*We+nt*nt+ht*ht;mt>0&&(mt=1/Math.sqrt(mt),We*=mt,nt*=mt,ht*=mt);let Kt=ke*ht-dt*nt,Bt=dt*We-qe*ht,$t=qe*nt-ke*We;return mt=Kt*Kt+Bt*Bt+$t*$t,mt>0&&(mt=1/Math.sqrt(mt),Kt*=mt,Bt*=mt,$t*=mt),Y[0]=Kt,Y[1]=Bt,Y[2]=$t,Y[3]=0,Y[4]=nt*$t-ht*Bt,Y[5]=ht*Kt-We*$t,Y[6]=We*Bt-nt*Kt,Y[7]=0,Y[8]=We,Y[9]=nt,Y[10]=ht,Y[11]=0,Y[12]=rt,Y[13]=Qe,Y[14]=Xe,Y[15]=1,Y},str:function fe(Y){return"mat4("+Y[0]+", "+Y[1]+", "+Y[2]+", "+Y[3]+", "+Y[4]+", "+Y[5]+", "+Y[6]+", "+Y[7]+", "+Y[8]+", "+Y[9]+", "+Y[10]+", "+Y[11]+", "+Y[12]+", "+Y[13]+", "+Y[14]+", "+Y[15]+")"},frob:function be(Y){return Math.sqrt(Y[0]**2+Y[1]**2+Y[2]**2+Y[3]**2+Y[4]**2+Y[5]**2+Y[6]**2+Y[7]**2+Y[8]**2+Y[9]**2+Y[10]**2+Y[11]**2+Y[12]**2+Y[13]**2+Y[14]**2+Y[15]**2)},add:function ye(Y,me,Ie){return Y[0]=me[0]+Ie[0],Y[1]=me[1]+Ie[1],Y[2]=me[2]+Ie[2],Y[3]=me[3]+Ie[3],Y[4]=me[4]+Ie[4],Y[5]=me[5]+Ie[5],Y[6]=me[6]+Ie[6],Y[7]=me[7]+Ie[7],Y[8]=me[8]+Ie[8],Y[9]=me[9]+Ie[9],Y[10]=me[10]+Ie[10],Y[11]=me[11]+Ie[11],Y[12]=me[12]+Ie[12],Y[13]=me[13]+Ie[13],Y[14]=me[14]+Ie[14],Y[15]=me[15]+Ie[15],Y},subtract:Ke,multiplyScalar:function Ue(Y,me,Ie){return Y[0]=me[0]*Ie,Y[1]=me[1]*Ie,Y[2]=me[2]*Ie,Y[3]=me[3]*Ie,Y[4]=me[4]*Ie,Y[5]=me[5]*Ie,Y[6]=me[6]*Ie,Y[7]=me[7]*Ie,Y[8]=me[8]*Ie,Y[9]=me[9]*Ie,Y[10]=me[10]*Ie,Y[11]=me[11]*Ie,Y[12]=me[12]*Ie,Y[13]=me[13]*Ie,Y[14]=me[14]*Ie,Y[15]=me[15]*Ie,Y},multiplyScalarAndAdd:function he(Y,me,Ie,$e){return Y[0]=me[0]+Ie[0]*$e,Y[1]=me[1]+Ie[1]*$e,Y[2]=me[2]+Ie[2]*$e,Y[3]=me[3]+Ie[3]*$e,Y[4]=me[4]+Ie[4]*$e,Y[5]=me[5]+Ie[5]*$e,Y[6]=me[6]+Ie[6]*$e,Y[7]=me[7]+Ie[7]*$e,Y[8]=me[8]+Ie[8]*$e,Y[9]=me[9]+Ie[9]*$e,Y[10]=me[10]+Ie[10]*$e,Y[11]=me[11]+Ie[11]*$e,Y[12]=me[12]+Ie[12]*$e,Y[13]=me[13]+Ie[13]*$e,Y[14]=me[14]+Ie[14]*$e,Y[15]=me[15]+Ie[15]*$e,Y},exactEquals:Me,equals:Le,isOrthoNormal:Je,mul:I,sub:Ke})},55494:(He,ve,p)=>{"use strict";function g(){const $=new Float32Array(16);return $[0]=1,$[5]=1,$[10]=1,$[15]=1,$}p.d(ve,{c:()=>g});const j=g();Object.freeze({__proto__:null,create:g,clone:function b($){const L=new Float32Array(16);return L[0]=$[0],L[1]=$[1],L[2]=$[2],L[3]=$[3],L[4]=$[4],L[5]=$[5],L[6]=$[6],L[7]=$[7],L[8]=$[8],L[9]=$[9],L[10]=$[10],L[11]=$[11],L[12]=$[12],L[13]=$[13],L[14]=$[14],L[15]=$[15],L},fromValues:function J($,L,D,I,W,k,Z,X,V,w,T,O,x,N,M,Q){const z=new Float32Array(16);return z[0]=$,z[1]=L,z[2]=D,z[3]=I,z[4]=W,z[5]=k,z[6]=Z,z[7]=X,z[8]=V,z[9]=w,z[10]=T,z[11]=O,z[12]=x,z[13]=N,z[14]=M,z[15]=Q,z},createView:function B($,L){return new Float32Array($,L,16)},IDENTITY:j})},44956:(He,ve,p)=>{"use strict";p.d(ve,{e:()=>I,f:()=>D,g:()=>L,h:()=>X,i:()=>j,j:()=>x,l:()=>$,p:()=>oe});var g=p(54346),b=p(8314);let J,B=null;function j(){return!!B}function $(){return J||(J=p.e(352).then(p.bind(p,73714)).then(ce=>ce.p).then(({default:ce})=>ce({locateFile:re=>(0,g.V)(`esri/geometry/support/${re}`)})).then(ce=>{M(ce)}),J)}var L,D,I,ce;(function(ce){function re(de,ue,pe){B.ensureCache.prepare();const ie=ee(pe),te=pe===ie,Ee=B.ensureFloat64(ie),fe=B._pe_geog_to_proj(B.getPointer(de),ue,Ee);return fe&&le(pe,ue,Ee,te),fe}function ae(de,ue,pe){return se(de,ue,pe,0)}function se(de,ue,pe,ie){B.ensureCache.prepare();const te=ee(pe),Ee=pe===te,fe=B.ensureFloat64(te),be=B._pe_proj_to_geog_center(B.getPointer(de),ue,fe,ie);return be&&le(pe,ue,fe,Ee),be}ce.geogToProj=re,ce.projGeog=function K(de,ue,pe,ie){switch(ie){case D.PE_TRANSFORM_P_TO_G:return ae(de,ue,pe);case D.PE_TRANSFORM_G_TO_P:return re(de,ue,pe)}return 0},ce.projToGeog=ae,ce.projToGeogCenter=se})(L||(L={})),(ce=D||(D={})).init=function re(){ce.PE_BUFFER_MAX=B.PeDefs.prototype.PE_BUFFER_MAX,ce.PE_NAME_MAX=B.PeDefs.prototype.PE_NAME_MAX,ce.PE_MGRS_MAX=B.PeDefs.prototype.PE_MGRS_MAX,ce.PE_USNG_MAX=B.PeDefs.prototype.PE_USNG_MAX,ce.PE_DD_MAX=B.PeDefs.prototype.PE_DD_MAX,ce.PE_DDM_MAX=B.PeDefs.prototype.PE_DDM_MAX,ce.PE_DMS_MAX=B.PeDefs.prototype.PE_DMS_MAX,ce.PE_UTM_MAX=B.PeDefs.prototype.PE_UTM_MAX,ce.PE_PARM_MAX=B.PeDefs.prototype.PE_PARM_MAX,ce.PE_TYPE_NONE=B.PeDefs.prototype.PE_TYPE_NONE,ce.PE_TYPE_GEOGCS=B.PeDefs.prototype.PE_TYPE_GEOGCS,ce.PE_TYPE_PROJCS=B.PeDefs.prototype.PE_TYPE_PROJCS,ce.PE_TYPE_GEOGTRAN=B.PeDefs.prototype.PE_TYPE_GEOGTRAN,ce.PE_TYPE_COORDSYS=B.PeDefs.prototype.PE_TYPE_COORDSYS,ce.PE_TYPE_UNIT=B.PeDefs.prototype.PE_TYPE_UNIT,ce.PE_TYPE_LINUNIT=B.PeDefs.prototype.PE_TYPE_LINUNIT,ce.PE_STR_OPTS_NONE=B.PeDefs.prototype.PE_STR_OPTS_NONE,ce.PE_STR_AUTH_NONE=B.PeDefs.prototype.PE_STR_AUTH_NONE,ce.PE_STR_AUTH_TOP=B.PeDefs.prototype.PE_STR_AUTH_TOP,ce.PE_STR_NAME_CANON=B.PeDefs.prototype.PE_STR_NAME_CANON,ce.PE_PARM_X0=B.PeDefs.prototype.PE_PARM_X0,ce.PE_PARM_ND=B.PeDefs.prototype.PE_PARM_ND,ce.PE_TRANSFORM_1_TO_2=B.PeDefs.prototype.PE_TRANSFORM_1_TO_2,ce.PE_TRANSFORM_2_TO_1=B.PeDefs.prototype.PE_TRANSFORM_2_TO_1,ce.PE_TRANSFORM_P_TO_G=B.PeDefs.prototype.PE_TRANSFORM_P_TO_G,ce.PE_TRANSFORM_G_TO_P=B.PeDefs.prototype.PE_TRANSFORM_G_TO_P,ce.PE_HORIZON_RECT=B.PeDefs.prototype.PE_HORIZON_RECT,ce.PE_HORIZON_POLY=B.PeDefs.prototype.PE_HORIZON_POLY,ce.PE_HORIZON_LINE=B.PeDefs.prototype.PE_HORIZON_LINE,ce.PE_HORIZON_DELTA=B.PeDefs.prototype.PE_HORIZON_DELTA},function(ce){const re={},K={},ae=ye=>{if(ye){const Ke=ye.getType();switch(Ke){case D.PE_TYPE_GEOGCS:ye=B.castObject(ye,B.PeGeogcs);break;case D.PE_TYPE_PROJCS:ye=B.castObject(ye,B.PeProjcs);break;case D.PE_TYPE_GEOGTRAN:ye=B.castObject(ye,B.PeGeogtran);break;default:Ke&D.PE_TYPE_UNIT&&(ye=B.castObject(ye,B.PeUnit))}}return ye};function ue(ye,Ke){let Ue=null,he=re[ye];if(he||(he={},re[ye]=he),he.hasOwnProperty(String(Ke)))Ue=he[Ke];else{const Me=B.PeFactory.prototype.factoryByType(ye,Ke);B.compare(Me,B.NULL)||(Ue=Me,he[Ke]=Ue)}return Ue=ae(Ue),Ue}ce.initialize=function se(){B.PeFactory.prototype.initialize(null)},ce.coordsys=function de(ye){return ue(D.PE_TYPE_COORDSYS,ye)},ce.factoryByType=ue,ce.fromString=function pe(ye,Ke){let Ue=null,he=K[ye];if(he||(he={},K[ye]=he),he.hasOwnProperty(Ke))Ue=he[Ke];else{const Me=B.PeFactory.prototype.fromString(ye,Ke);B.compare(Me,B.NULL)||(Ue=Me,he[Ke]=Ue)}return Ue=ae(Ue),Ue},ce.geogcs=function ie(ye){return ue(D.PE_TYPE_GEOGCS,ye)},ce.geogtran=function te(ye){return ue(D.PE_TYPE_GEOGTRAN,ye)},ce.getCode=function Ee(ye){return B.PeFactory.prototype.getCode(ye)},ce.projcs=function fe(ye){return ue(D.PE_TYPE_PROJCS,ye)},ce.unit=function be(ye){return ue(D.PE_TYPE_UNIT,ye)}}(I||(I={}));let W=null;var k,Z,X,V,w,T,O,x,N;function M(ce){function re(de,ue,pe){de[ue]=pe(de[ue])}B=ce,D.init(),k.init(),w.init(),O.init(),x.init(),W=class extends B.PeGCSExtent{destroy(){B.destroy(this)}};const K=[B.PeDatum,B.PeGeogcs,B.PeGeogtran,B.PeObject,B.PeParameter,B.PePrimem,B.PeProjcs,B.PeSpheroid,B.PeUnit];for(const de of K)re(de.prototype,"getName",ue=>function(){return ue.call(this,new Array(D.PE_NAME_MAX))});for(const de of[B.PeGeogtran,B.PeProjcs])re(de.prototype,"getParameters",ue=>function(){const pe=new Array(D.PE_PARM_MAX);let ie=ue.call(this);for(let te=0;te<pe.length;te++){const Ee=B.getValue(ie,"*");pe[te]=Ee?B.wrapPointer(Ee,B.PeParameter):null,ie+=Int32Array.BYTES_PER_ELEMENT}return pe});re(B.PeHorizon.prototype,"getCoord",de=>function(){const ue=this.getSize();if(!ue)return null;const pe=[];return le(pe,ue,de.call(this)),pe}),re(B.PeGTlistExtendedEntry.prototype,"getEntries",de=>{const ue=B._pe_getPeGTlistExtendedGTsSize();return function(){let pe=null;const ie=de.call(this);if(!B.compare(ie,B.NULL)){pe=[ie];const te=this.getSteps();if(te>1){const Ee=B.getPointer(ie);for(let fe=1;fe<te;fe++)pe.push(B.wrapPointer(Ee+ue*fe,B.PeGTlistExtendedGTs))}}return pe}});const ae=B._pe_getPeHorizonSize(),se=de=>function(){let ue=this._cache;if(ue||(ue=new Map,this._cache=ue),ue.has(de))return ue.get(de);let pe=null;const ie=de.call(this);if(!B.compare(ie,B.NULL)){pe=[ie];const te=ie.getNump();if(te>1){const Ee=B.getPointer(ie);for(let fe=1;fe<te;fe++)pe.push(B.wrapPointer(Ee+ae*fe,B.PeHorizon))}}return ue.set(de,pe),pe};re(B.PeProjcs.prototype,"horizonGcsGenerate",se),re(B.PeProjcs.prototype,"horizonPcsGenerate",se),B.PeObject.prototype.toString=function(de=D.PE_STR_OPTS_NONE){B.ensureCache.prepare();const ue=B.getPointer(this),pe=B.ensureInt8(new Array(D.PE_BUFFER_MAX));return B.UTF8ToString(B._pe_object_to_string_ext(ue,de,pe))}}function Q(ce){if(!ce)return;const re=B.getClass(ce);if(!re)return;const K=B.getCache(re);if(!K)return;const ae=B.getPointer(ce);ae&&delete K[ae]}function z(ce,re){const K=[],ae=new Array(re);for(let se=0;se<ce;se++)K.push(B.ensureInt8(ae));return K}function ee(ce){let re;return Array.isArray(ce[0])?(re=[],ce.forEach(K=>{re.push(K[0],K[1])})):re=ce,re}function le(ce,re,K,ae=!1){if(ae)for(let se=0;se<2*re;se++)ce[se]=B.getValue(K+se*Float64Array.BYTES_PER_ELEMENT,"double");else{const se=0===ce.length;for(let de=0;de<re;de++)se&&(ce[de]=new Array(2)),ce[de][0]=B.getValue(K,"double"),ce[de][1]=B.getValue(K+Float64Array.BYTES_PER_ELEMENT,"double"),K+=2*Float64Array.BYTES_PER_ELEMENT}}(function(ce){let re;ce.init=function K(){ce.PE_GTLIST_OPTS_COMMON=B.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,re=B._pe_getPeGTlistExtendedEntrySize()},ce.getGTlist=function ae(se,de,ue,pe,ie,te){let Ee=null;const fe=new B.PeInteger(te);try{const be=B.PeGTlistExtended.prototype.getGTlist(se,de,ue,pe,ie,fe);if((te=fe.val)&&(Ee=[be],te>1)){const ye=B.getPointer(be);for(let Ke=1;Ke<te;Ke++)Ee.push(B.wrapPointer(ye+re*Ke,B.PeGTlistExtendedEntry))}}finally{B.destroy(fe)}return Ee}})(k||(k={})),function(ce){ce.destroy=function re(K){if(K&&K.length){for(const ae of K)Q(ae),ae.getEntries().forEach(se=>{Q(se);const de=se.getGeogtran();Q(de),de.getParameters().forEach(Q),[de.getGeogcs1(),de.getGeogcs2()].forEach(ue=>{Q(ue);const pe=ue.getDatum();Q(pe),Q(pe.getSpheroid()),Q(ue.getPrimem()),Q(ue.getUnit())})});B.PeGTlistExtendedEntry.prototype.Delete(K[0])}}}(Z||(Z={})),function(ce){ce.geogToGeog=function re(K,ae,se,de,ue){B.ensureCache.prepare();const pe=ee(se),ie=se===pe,te=B.ensureFloat64(pe);let Ee=0;de&&(Ee=B.ensureFloat64(de));const fe=B._pe_geog_to_geog(B.getPointer(K),ae,te,Ee,ue);return fe&&le(se,ae,te,ie),fe}}(X||(X={})),function(ce){const re=(te,Ee,fe,be,ye,Ke)=>{let Ue,he;switch(B.ensureCache.prepare(),te){case"dd":Ue=B._pe_geog_to_dd,he=D.PE_DD_MAX;break;case"ddm":Ue=B._pe_geog_to_ddm,he=D.PE_DDM_MAX;break;case"dms":Ue=B._pe_geog_to_dms,he=D.PE_DMS_MAX}let Me=0;Ee&&(Me=B.getPointer(Ee));const Le=ee(be),Je=B.ensureFloat64(Le),Oe=z(fe,he),xe=Ue(Me,fe,Je,ye,B.ensureInt32(Oe));if(xe)for(let Be=0;Be<fe;Be++)Ke[Be]=B.UTF8ToString(Oe[Be]);return xe},K=(te,Ee,fe,be,ye)=>{let Ke;switch(B.ensureCache.prepare(),te){case"dd":Ke=B._pe_dd_to_geog;break;case"ddm":Ke=B._pe_ddm_to_geog;break;case"dms":Ke=B._pe_dms_to_geog}let Ue=0;Ee&&(Ue=B.getPointer(Ee));const he=be.map(Oe=>B.ensureString(Oe)),Me=B.ensureInt32(he),Le=B.ensureFloat64(new Array(2*fe)),Je=Ke(Ue,fe,Me,Le);return Je&&le(ye,fe,Le),Je};ce.geogToDms=function ae(te,Ee,fe,be,ye){return re("dms",te,Ee,fe,be,ye)},ce.dmsToGeog=function se(te,Ee,fe,be){return K("dms",te,Ee,fe,be)},ce.geogToDdm=function de(te,Ee,fe,be,ye){return re("ddm",te,Ee,fe,be,ye)},ce.ddmToGeog=function ue(te,Ee,fe,be){return K("ddm",te,Ee,fe,be)},ce.geogToDd=function pe(te,Ee,fe,be,ye){return re("dd",te,Ee,fe,be,ye)},ce.ddToGeog=function ie(te,Ee,fe,be){return K("dd",te,Ee,fe,be)}}(V||(V={})),function(ce){ce.init=function re(){ce.PE_MGRS_STYLE_NEW=B.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,ce.PE_MGRS_STYLE_OLD=B.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,ce.PE_MGRS_STYLE_AUTO=B.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,ce.PE_MGRS_180_ZONE_1_PLUS=B.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,ce.PE_MGRS_ADD_SPACES=B.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},ce.geogToMgrsExtended=function K(se,de,ue,pe,ie,te,Ee){B.ensureCache.prepare();let fe=0;se&&(fe=B.getPointer(se));const be=ee(ue),ye=B.ensureFloat64(be),Ke=z(de,D.PE_MGRS_MAX),Ue=B.ensureInt32(Ke),he=B._pe_geog_to_mgrs_extended(fe,de,ye,pe,ie,te,Ue);if(he)for(let Me=0;Me<de;Me++)Ee[Me]=B.UTF8ToString(Ke[Me]);return he},ce.mgrsToGeogExtended=function ae(se,de,ue,pe,ie){B.ensureCache.prepare();let te=0;se&&(te=B.getPointer(se));const Ee=ue.map(Ke=>B.ensureString(Ke)),fe=B.ensureInt32(Ee),be=B.ensureFloat64(new Array(2*de)),ye=B._pe_mgrs_to_geog_extended(te,de,fe,pe,be);return ye&&le(ie,de,be),ye}}(w||(w={})),function(ce){ce.geogToUsng=function re(ae,se,de,ue,pe,ie,te){B.ensureCache.prepare();let Ee=0;ae&&(Ee=B.getPointer(ae));const fe=ee(de),be=B.ensureFloat64(fe),ye=z(se,D.PE_MGRS_MAX),Ke=B.ensureInt32(ye),Ue=B._pe_geog_to_usng(Ee,se,be,ue,pe,ie,Ke);if(Ue)for(let he=0;he<se;he++)te[he]=B.UTF8ToString(ye[he]);return Ue},ce.usngToGeog=function K(ae,se,de,ue){B.ensureCache.prepare();let pe=0;ae&&(pe=B.getPointer(ae));const ie=de.map(be=>B.ensureString(be)),te=B.ensureInt32(ie),Ee=B.ensureFloat64(new Array(2*se)),fe=B._pe_usng_to_geog(pe,se,te,Ee);return fe&&le(ue,se,Ee),fe}}(T||(T={})),function(ce){ce.init=function re(){ce.PE_UTM_OPTS_NONE=B.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,ce.PE_UTM_OPTS_ADD_SPACES=B.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,ce.PE_UTM_OPTS_NS=B.PeNotationUtm.prototype.PE_UTM_OPTS_NS},ce.geogToUtm=function K(se,de,ue,pe,ie){B.ensureCache.prepare();let te=0;se&&(te=B.getPointer(se));const Ee=ee(ue),fe=B.ensureFloat64(Ee),be=z(de,D.PE_UTM_MAX),ye=B.ensureInt32(be),Ke=B._pe_geog_to_utm(te,de,fe,pe,ye);if(Ke)for(let Ue=0;Ue<de;Ue++)ie[Ue]=B.UTF8ToString(be[Ue]);return Ke},ce.utmToGeog=function ae(se,de,ue,pe,ie){B.ensureCache.prepare();let te=0;se&&(te=B.getPointer(se));const Ee=ue.map(Ke=>B.ensureString(Ke)),fe=B.ensureInt32(Ee),be=B.ensureFloat64(new Array(2*de)),ye=B._pe_utm_to_geog(te,de,fe,pe,be);return ye&&le(ie,de,be),ye}}(O||(O={})),function(ce){const re=new Map;ce.init=function K(){ce.PE_PCSINFO_OPTION_NONE=B.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,ce.PE_PCSINFO_OPTION_DOMAIN=B.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,ce.PE_POLE_OUTSIDE_BOUNDARY=B.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,ce.PE_POLE_POINT=B.PePCSInfo.prototype.PE_POLE_POINT},ce.generate=function ae(se,de=ce.PE_PCSINFO_OPTION_DOMAIN){let ue,pe;return re.has(se)&&(pe=re.get(se),pe[de]&&(ue=pe[de])),ue||(ue=B.PePCSInfo.prototype.generate(se,de),pe||(pe=[],re.set(se,pe)),pe[de]=ue),ue}}(x||(x={})),function(ce){ce.versionString=function re(){return B.PeVersion.prototype.version_string()}}(N||(N={}));const oe=Object.freeze({__proto__:null,get _pe(){return B},isLoaded:j,isSupported:function C(){return!!(0,b.Z)("esri-wasm")},load:$,get PeCSTransformations(){return L},get PeDefs(){return D},get PeFactory(){return I},get PeGCSExtent(){return W},get PeGTlistExtended(){return k},get PeGTlistExtendedEntry(){return Z},get PeGTTransformations(){return X},get PeNotationDms(){return V},get PeNotationMgrs(){return w},get PeNotationUsng(){return T},get PeNotationUtm(){return O},get PePCSInfo(){return x},get PeVersion(){return N},_init:M})},29840:(He,ve,p)=>{"use strict";p.d(ve,{M:()=>k,f:()=>J,i:()=>D,p:()=>Z,r:()=>j,t:()=>B,w:()=>C});var g=p(62208),b=p(21726);function J(X,V){const w=V&&V.url&&V.url.path;if(X&&w&&(X=(0,b.hF)(X,w,{preserveProtocolRelative:!0}),V.portalItem&&V.readResourcePaths)){const T=(0,b.PF)(X,V.portalItem.itemUrl);L.test(T)&&V.readResourcePaths.push(V.portalItem.resourceFromPath(T).path)}return W(X,V&&V.portal)}function B(X,V,w=k.YES){if(!X)return X;!(0,b.YP)(X)&&V&&V.blockedRelativeUrls&&V.blockedRelativeUrls.push(X);let T=(0,b.hF)(X);if(V){const O=V.verifyItemRelativeUrls&&V.verifyItemRelativeUrls.rootPath||V.url&&V.url.path;if(O){const x=W(O,V.portal);T=(0,b.PF)(W(T,V.portal),x,x),T!==X&&V.verifyItemRelativeUrls&&V.verifyItemRelativeUrls.writtenUrls.push(T)}}return T=function I(X,V){return V&&!V.isPortal&&V.urlKey&&V.customBaseUrl?(0,b.Ie)(X,`${V.urlKey}.${V.customBaseUrl}`,V.portalHostname):X}(T,V&&V.portal),(0,b.YP)(T)&&(T=(0,b.Fv)(T)),null!=V&&V.resources&&null!=V&&V.portalItem&&!(0,b.YP)(T)&&!(0,b.HK)(T)&&w===k.YES&&V.resources.toKeep.push({resource:V.portalItem.resourceFromPath(T)}),T}function j(X,V,w){return J(X,w)}function C(X,V,w,T){const O=B(X,T);void 0!==O&&(V[w]=O)}const $=/\/items\/([^\/]+)\/resources\//,L=/^\.\/resources\//;function D(X){const V=(0,g.pC)(X)?X.match($):null;return(0,g.pC)(V)?V[1]:null}function W(X,V){if(!V||V.isPortal||!V.urlKey||!V.customBaseUrl)return X;const w=`${V.urlKey}.${V.customBaseUrl}`,T=(0,b.TI)();return(0,b.D6)(T,`${T.scheme}://${w}`)?(0,b.Ie)(X,V.portalHostname,w):(0,b.Ie)(X,w,V.portalHostname)}var k,X;(X=k||(k={}))[X.YES=0]="YES",X[X.NO=1]="NO";const Z=Object.freeze({__proto__:null,fromJSON:J,toJSON:B,read:j,write:C,itemIdFromResourceUrl:D,get MarkKeep(){return k}})},14259:(He,ve,p)=>{"use strict";p.d(ve,{q:()=>j});var g,J,B={exports:{}};g=B,void 0!==(J=function(){function $(I,W,k,Z,X){for(;Z>k;){if(Z-k>600){var V=Z-k+1,w=W-k+1,T=Math.log(V),O=.5*Math.exp(2*T/3),x=.5*Math.sqrt(T*O*(V-O)/V)*(w-V/2<0?-1:1);$(I,W,Math.max(k,Math.floor(W-w*O/V+x)),Math.min(Z,Math.floor(W+(V-w)*O/V+x)),X)}var N=I[W],M=k,Q=Z;for(L(I,k,W),X(I[Z],N)>0&&L(I,k,Z);M<Q;){for(L(I,M,Q),M++,Q--;X(I[M],N)<0;)M++;for(;X(I[Q],N)>0;)Q--}0===X(I[k],N)?L(I,k,Q):L(I,++Q,Z),Q<=W&&(k=Q+1),W<=Q&&(Z=Q-1)}}function L(I,W,k){var Z=I[W];I[W]=I[k],I[k]=Z}function D(I,W){return I<W?-1:I>W?1:0}return function C(I,W,k,Z,X){$(I,W,k||0,Z||I.length-1,X||D)}}())&&(g.exports=J);const j=B.exports},76279:(He,ve,p)=>{"use strict";p.d(ve,{r:()=>b});var g=p(14259);function b(T,O){if(!(this instanceof b))return new b(T,O);this._maxEntries=Math.max(4,T||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),O&&("function"==typeof O?this.toBBox=O:this._initFormat(O)),this.clear()}function J(T,O,x){if(!x)return O.indexOf(T);for(var N=0;N<O.length;N++)if(x(T,O[N]))return N;return-1}function B(T,O){j(T,0,T.children.length,O,T)}function j(T,O,x,N,M){M||(M=V(null)),M.minX=1/0,M.minY=1/0,M.maxX=-1/0,M.maxY=-1/0;for(var Q,z=O;z<x;z++)Q=T.children[z],C(M,T.leaf?N(Q):Q);return M}function C(T,O){return T.minX=Math.min(T.minX,O.minX),T.minY=Math.min(T.minY,O.minY),T.maxX=Math.max(T.maxX,O.maxX),T.maxY=Math.max(T.maxY,O.maxY),T}function $(T,O){return T.minX-O.minX}function L(T,O){return T.minY-O.minY}function D(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function I(T){return T.maxX-T.minX+(T.maxY-T.minY)}function W(T,O){return(Math.max(O.maxX,T.maxX)-Math.min(O.minX,T.minX))*(Math.max(O.maxY,T.maxY)-Math.min(O.minY,T.minY))}function k(T,O){var x=Math.max(T.minX,O.minX),N=Math.max(T.minY,O.minY),M=Math.min(T.maxX,O.maxX),Q=Math.min(T.maxY,O.maxY);return Math.max(0,M-x)*Math.max(0,Q-N)}function Z(T,O){return T.minX<=O.minX&&T.minY<=O.minY&&O.maxX<=T.maxX&&O.maxY<=T.maxY}function X(T,O){return O.minX<=T.maxX&&O.minY<=T.maxY&&O.maxX>=T.minX&&O.maxY>=T.minY}function V(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w(T,O,x,N,M){for(var Q,z=[O,x];z.length;)(x=z.pop())-(O=z.pop())<=N||(Q=O+Math.ceil((x-O)/N/2)*N,(0,g.q)(T,Q,O,x,M),z.push(O,Q,Q,x))}b.prototype={all:function(){return this._all(this.data,[])},search:function(T){var O=this.data,x=[],N=this.toBBox;if(!X(T,O))return x;for(var M,Q,z,ee,le=[];O;){for(M=0,Q=O.children.length;M<Q;M++)z=O.children[M],X(T,ee=O.leaf?N(z):z)&&(O.leaf?x.push(z):Z(T,ee)?this._all(z,x):le.push(z));O=le.pop()}return x},collides:function(T){var O=this.data,x=this.toBBox;if(!X(T,O))return!1;for(var N,M,Q,z,ee=[];O;){for(N=0,M=O.children.length;N<M;N++)if(Q=O.children[N],X(T,z=O.leaf?x(Q):Q)){if(O.leaf||Z(T,z))return!0;ee.push(Q)}O=ee.pop()}return!1},load:function(T){if(!T||!T.length)return this;if(T.length<this._minEntries){for(var O=0,x=T.length;O<x;O++)this.insert(T[O]);return this}var N=this._build(T.slice(),0,T.length-1,0);if(this.data.children.length)if(this.data.height===N.height)this._splitRoot(this.data,N);else{if(this.data.height<N.height){var M=this.data;this.data=N,N=M}this._insert(N,this.data.height-N.height-1,!0)}else this.data=N;return this},insert:function(T){return T&&this._insert(T,this.data.height-1),this},clear:function(){return this.data=V([]),this},remove:function(T,O){if(!T)return this;for(var x,N,M,Q,z=this.data,ee=this.toBBox(T),le=[],oe=[];z||le.length;){if(z||(z=le.pop(),N=le[le.length-1],x=oe.pop(),Q=!0),z.leaf&&-1!==(M=J(T,z.children,O)))return z.children.splice(M,1),le.push(z),this._condense(le),this;Q||z.leaf||!Z(z,ee)?N?(x++,z=N.children[x],Q=!1):z=null:(le.push(z),oe.push(x),x=0,N=z,z=z.children[0])}return this},toBBox:function(T){return T},compareMinX:$,compareMinY:L,toJSON:function(){return this.data},fromJSON:function(T){return this.data=T,this},_all:function(T,O){for(var x=[];T;)T.leaf?O.push.apply(O,T.children):x.push.apply(x,T.children),T=x.pop();return O},_build:function(T,O,x,N){var M,Q=x-O+1,z=this._maxEntries;if(Q<=z)return B(M=V(T.slice(O,x+1)),this.toBBox),M;N||(N=Math.ceil(Math.log(Q)/Math.log(z)),z=Math.ceil(Q/Math.pow(z,N-1))),(M=V([])).leaf=!1,M.height=N;var ee,le,oe,ce,re=Math.ceil(Q/z),K=re*Math.ceil(Math.sqrt(z));for(w(T,O,x,K,this.compareMinX),ee=O;ee<=x;ee+=K)for(w(T,ee,oe=Math.min(ee+K-1,x),re,this.compareMinY),le=ee;le<=oe;le+=re)ce=Math.min(le+re-1,oe),M.children.push(this._build(T,le,ce,N-1));return B(M,this.toBBox),M},_chooseSubtree:function(T,O,x,N){for(var M,Q,z,ee,le,oe,ce,re;N.push(O),!O.leaf&&N.length-1!==x;){for(ce=re=1/0,M=0,Q=O.children.length;M<Q;M++)le=D(z=O.children[M]),(oe=W(T,z)-le)<re?(re=oe,ce=le<ce?le:ce,ee=z):oe===re&&le<ce&&(ce=le,ee=z);O=ee||O.children[0]}return O},_insert:function(T,O,x){var M=x?T:(0,this.toBBox)(T),Q=[],z=this._chooseSubtree(M,this.data,O,Q);for(z.children.push(T),C(z,M);O>=0&&Q[O].children.length>this._maxEntries;)this._split(Q,O),O--;this._adjustParentBBoxes(M,Q,O)},_split:function(T,O){var x=T[O],N=x.children.length,M=this._minEntries;this._chooseSplitAxis(x,M,N);var Q=this._chooseSplitIndex(x,M,N),z=V(x.children.splice(Q,x.children.length-Q));z.height=x.height,z.leaf=x.leaf,B(x,this.toBBox),B(z,this.toBBox),O?T[O-1].children.push(z):this._splitRoot(x,z)},_splitRoot:function(T,O){this.data=V([T,O]),this.data.height=T.height+1,this.data.leaf=!1,B(this.data,this.toBBox)},_chooseSplitIndex:function(T,O,x){var N,M,Q,z,ee,le,oe,ce;for(le=oe=1/0,N=O;N<=x-O;N++)z=k(M=j(T,0,N,this.toBBox),Q=j(T,N,x,this.toBBox)),ee=D(M)+D(Q),z<le?(le=z,ce=N,oe=ee<oe?ee:oe):z===le&&ee<oe&&(oe=ee,ce=N);return ce},_chooseSplitAxis:function(T,O,x){var N=T.leaf?this.compareMinX:$,M=T.leaf?this.compareMinY:L;this._allDistMargin(T,O,x,N)<this._allDistMargin(T,O,x,M)&&T.children.sort(N)},_allDistMargin:function(T,O,x,N){T.children.sort(N);var M,Q,z=this.toBBox,ee=j(T,0,O,z),le=j(T,x-O,x,z),oe=I(ee)+I(le);for(M=O;M<x-O;M++)Q=T.children[M],C(ee,T.leaf?z(Q):Q),oe+=I(ee);for(M=x-O-1;M>=O;M--)Q=T.children[M],C(le,T.leaf?z(Q):Q),oe+=I(le);return oe},_adjustParentBBoxes:function(T,O,x){for(var N=x;N>=0;N--)C(O[N],T)},_condense:function(T){for(var O,x=T.length-1;x>=0;x--)0===T[x].children.length?x>0?(O=T[x-1].children).splice(O.indexOf(T[x]),1):this.clear():B(T[x],this.toBBox)},_initFormat:function(T){var O=["return a"," - b",";"];this.compareMinX=new Function("a","b",O.join(T[0])),this.compareMinY=new Function("a","b",O.join(T[1])),this.toBBox=new Function("a","return {minX: a"+T[0]+", minY: a"+T[1]+", maxX: a"+T[2]+", maxY: a"+T[3]+"};")}}},17626:(He,ve,p)=>{"use strict";function g(b,J,B,j){var C,$=arguments.length,L=$<3?J:null===j?j=Object.getOwnPropertyDescriptor(J,B):j;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)L=Reflect.decorate(b,J,B,j);else for(var D=b.length-1;D>=0;D--)(C=b[D])&&(L=($<3?C(L):$>3?C(J,B,L):C(J,B))||L);return $>3&&L&&Object.defineProperty(J,B,L),L}p.d(ve,{_:()=>g})},67831:(He,ve,p)=>{"use strict";p.d(ve,{a:()=>w,b:()=>V,c:()=>b,f:()=>j,g:()=>Z,h:()=>Ee,i:()=>M,j:()=>z,k:()=>Q,l:()=>T,m:()=>B,n:()=>x,s:()=>J,t:()=>ce});var g=p(39863);function b(Me,Le){return Me[0]=Le[0],Me[1]=Le[1],Me}function J(Me,Le,Je){return Me[0]=Le,Me[1]=Je,Me}function B(Me,Le,Je){return Me[0]=Le[0]+Je[0],Me[1]=Le[1]+Je[1],Me}function j(Me,Le,Je){return Me[0]=Le[0]-Je[0],Me[1]=Le[1]-Je[1],Me}function C(Me,Le,Je){return Me[0]=Le[0]*Je[0],Me[1]=Le[1]*Je[1],Me}function $(Me,Le,Je){return Me[0]=Le[0]/Je[0],Me[1]=Le[1]/Je[1],Me}function Z(Me,Le,Je){return Me[0]=Le[0]*Je,Me[1]=Le[1]*Je,Me}function V(Me,Le){const Je=Le[0]-Me[0],Oe=Le[1]-Me[1];return Math.sqrt(Je*Je+Oe*Oe)}function w(Me,Le){const Je=Le[0]-Me[0],Oe=Le[1]-Me[1];return Je*Je+Oe*Oe}function T(Me){const Le=Me[0],Je=Me[1];return Math.sqrt(Le*Le+Je*Je)}function O(Me){const Le=Me[0],Je=Me[1];return Le*Le+Je*Je}function x(Me,Le){return Me[0]=-Le[0],Me[1]=-Le[1],Me}function M(Me,Le){const Je=Le[0],Oe=Le[1];let xe=Je*Je+Oe*Oe;return xe>0&&(xe=1/Math.sqrt(xe),Me[0]=Le[0]*xe,Me[1]=Le[1]*xe),Me}function Q(Me,Le){return Me[0]*Le[0]+Me[1]*Le[1]}function z(Me,Le,Je){const Oe=Le[0]*Je[1]-Le[1]*Je[0];return Me[0]=Me[1]=0,Me[2]=Oe,Me}function ce(Me,Le,Je){const Oe=Le[0],xe=Le[1];return Me[0]=Je[0]*Oe+Je[2]*xe+Je[4],Me[1]=Je[1]*Oe+Je[3]*xe+Je[5],Me}const Ee=j;Object.freeze({__proto__:null,copy:b,set:J,add:B,subtract:j,multiply:C,divide:$,ceil:function L(Me,Le){return Me[0]=Math.ceil(Le[0]),Me[1]=Math.ceil(Le[1]),Me},floor:function D(Me,Le){return Me[0]=Math.floor(Le[0]),Me[1]=Math.floor(Le[1]),Me},min:function I(Me,Le,Je){return Me[0]=Math.min(Le[0],Je[0]),Me[1]=Math.min(Le[1],Je[1]),Me},max:function W(Me,Le,Je){return Me[0]=Math.max(Le[0],Je[0]),Me[1]=Math.max(Le[1],Je[1]),Me},round:function k(Me,Le){return Me[0]=Math.round(Le[0]),Me[1]=Math.round(Le[1]),Me},scale:Z,scaleAndAdd:function X(Me,Le,Je,Oe){return Me[0]=Le[0]+Je[0]*Oe,Me[1]=Le[1]+Je[1]*Oe,Me},distance:V,squaredDistance:w,length:T,squaredLength:O,negate:x,inverse:function N(Me,Le){return Me[0]=1/Le[0],Me[1]=1/Le[1],Me},normalize:M,dot:Q,cross:z,lerp:function ee(Me,Le,Je,Oe){const xe=Le[0],Be=Le[1];return Me[0]=xe+Oe*(Je[0]-xe),Me[1]=Be+Oe*(Je[1]-Be),Me},random:function le(Me,Le){Le=Le||1;const Je=2*(0,g.R)()*Math.PI;return Me[0]=Math.cos(Je)*Le,Me[1]=Math.sin(Je)*Le,Me},transformMat2:function oe(Me,Le,Je){const Oe=Le[0],xe=Le[1];return Me[0]=Je[0]*Oe+Je[2]*xe,Me[1]=Je[1]*Oe+Je[3]*xe,Me},transformMat2d:ce,transformMat3:function re(Me,Le,Je){const Oe=Le[0],xe=Le[1];return Me[0]=Je[0]*Oe+Je[3]*xe+Je[6],Me[1]=Je[1]*Oe+Je[4]*xe+Je[7],Me},transformMat4:function K(Me,Le,Je){const Oe=Le[0],xe=Le[1];return Me[0]=Je[0]*Oe+Je[4]*xe+Je[12],Me[1]=Je[1]*Oe+Je[5]*xe+Je[13],Me},rotate:function ae(Me,Le,Je,Oe){const xe=Le[0]-Je[0],Be=Le[1]-Je[1],Y=Math.sin(Oe),me=Math.cos(Oe);return Me[0]=xe*me-Be*Y+Je[0],Me[1]=xe*Y+Be*me+Je[1],Me},angle:function se(Me,Le){const Je=Me[0],Oe=Me[1],xe=Le[0],Be=Le[1];let Y=Je*Je+Oe*Oe;Y>0&&(Y=1/Math.sqrt(Y));let me=xe*xe+Be*Be;me>0&&(me=1/Math.sqrt(me));const Ie=(Je*xe+Oe*Be)*Y*me;return Ie>1?0:Ie<-1?Math.PI:Math.acos(Ie)},str:function de(Me){return"vec2("+Me[0]+", "+Me[1]+")"},exactEquals:function ue(Me,Le){return Me[0]===Le[0]&&Me[1]===Le[1]},equals:function pe(Me,Le){const Je=Me[0],Oe=Me[1],xe=Le[0],Be=Le[1];return Math.abs(Je-xe)<=g.E*Math.max(1,Math.abs(Je),Math.abs(xe))&&Math.abs(Oe-Be)<=g.E*Math.max(1,Math.abs(Oe),Math.abs(Be))},projectAndScale:function ie(Me,Le,Je,Oe,xe){let Be=Le[0]-Je[0],Y=Le[1]-Je[1];const me=(Oe[0]*Be+Oe[1]*Y)*(xe-1);return Be=Oe[0]*me,Y=Oe[1]*me,Me[0]=Le[0]+Be,Me[1]=Le[1]+Y,Me},len:T,sub:Ee,mul:C,div:$,dist:V,sqrDist:w,sqrLen:O})},9545:(He,ve,p)=>{"use strict";function g(){return new Float32Array(2)}function J(X,V){const w=new Float32Array(2);return w[0]=X,w[1]=V,w}function j(){return g()}function C(){return J(1,1)}function $(){return J(1,0)}function L(){return J(0,1)}p.d(ve,{c:()=>g,f:()=>J});const D=j(),I=C(),W=$(),k=L();Object.freeze({__proto__:null,create:g,clone:function b(X){const V=new Float32Array(2);return V[0]=X[0],V[1]=X[1],V},fromValues:J,createView:function B(X,V){return new Float32Array(X,V,2)},zeros:j,ones:C,unitX:$,unitY:L,ZEROS:D,ONES:I,UNIT_X:W,UNIT_Y:k})},99770:(He,ve,p)=>{"use strict";function g(){return[0,0]}function J(V,w){return[V,w]}function j(V,w){return new Float64Array(V,w,2)}function $(){return J(1,1)}function L(){return J(1,0)}function D(){return J(0,1)}p.d(ve,{a:()=>g,c:()=>j,f:()=>J});const W=$(),k=L(),Z=D();Object.freeze({__proto__:null,create:g,clone:function b(V){return[V[0],V[1]]},fromValues:J,fromArray:function B(V){const w=[0,0],T=Math.min(2,V.length);for(let O=0;O<T;++O)w[O]=V[O];return w},createView:j,zeros:function C(){return[0,0]},ones:$,unitX:L,unitY:D,ZEROS:[0,0],ONES:W,UNIT_X:k,UNIT_Y:Z})},84161:(He,ve,p)=>{"use strict";p.d(ve,{E:()=>D,a:()=>V,b:()=>C,c:()=>ee,d:()=>z,e:()=>le,f:()=>$,g:()=>B,h:()=>O,i:()=>T,k:()=>be,l:()=>J,m:()=>K,n:()=>Q,p:()=>x,q:()=>se,r:()=>Ke,s:()=>j,t:()=>ae,u:()=>Oe});var g=p(28093),b=p(39863);function J(Y){const me=Y[0],Ie=Y[1],$e=Y[2];return Math.sqrt(me*me+Ie*Ie+$e*$e)}function B(Y,me){return Y[0]=me[0],Y[1]=me[1],Y[2]=me[2],Y}function j(Y,me,Ie,$e){return Y[0]=me,Y[1]=Ie,Y[2]=$e,Y}function C(Y,me,Ie){return Y[0]=me[0]+Ie[0],Y[1]=me[1]+Ie[1],Y[2]=me[2]+Ie[2],Y}function $(Y,me,Ie){return Y[0]=me[0]-Ie[0],Y[1]=me[1]-Ie[1],Y[2]=me[2]-Ie[2],Y}function L(Y,me,Ie){return Y[0]=me[0]*Ie[0],Y[1]=me[1]*Ie[1],Y[2]=me[2]*Ie[2],Y}function D(Y,me,Ie){return Y[0]=me[0]/Ie[0],Y[1]=me[1]/Ie[1],Y[2]=me[2]/Ie[2],Y}function V(Y,me,Ie){return Y[0]=me[0]*Ie,Y[1]=me[1]*Ie,Y[2]=me[2]*Ie,Y}function T(Y,me){const Ie=me[0]-Y[0],$e=me[1]-Y[1],rt=me[2]-Y[2];return Math.sqrt(Ie*Ie+$e*$e+rt*rt)}function O(Y,me){const Ie=me[0]-Y[0],$e=me[1]-Y[1],rt=me[2]-Y[2];return Ie*Ie+$e*$e+rt*rt}function x(Y){const me=Y[0],Ie=Y[1],$e=Y[2];return me*me+Ie*Ie+$e*$e}function Q(Y,me){const Ie=me[0],$e=me[1],rt=me[2];let Qe=Ie*Ie+$e*$e+rt*rt;return Qe>0&&(Qe=1/Math.sqrt(Qe),Y[0]=me[0]*Qe,Y[1]=me[1]*Qe,Y[2]=me[2]*Qe),Y}function z(Y,me){return Y[0]*me[0]+Y[1]*me[1]+Y[2]*me[2]}function ee(Y,me,Ie){const $e=me[0],rt=me[1],Qe=me[2],Xe=Ie[0],qe=Ie[1],ke=Ie[2];return Y[0]=rt*ke-Qe*qe,Y[1]=Qe*Xe-$e*ke,Y[2]=$e*qe-rt*Xe,Y}function le(Y,me,Ie,$e){const rt=me[0],Qe=me[1],Xe=me[2];return Y[0]=rt+$e*(Ie[0]-rt),Y[1]=Qe+$e*(Ie[1]-Qe),Y[2]=Xe+$e*(Ie[2]-Xe),Y}function K(Y,me,Ie){const $e=me[0],rt=me[1],Qe=me[2];return Y[0]=Ie[0]*$e+Ie[4]*rt+Ie[8]*Qe+Ie[12],Y[1]=Ie[1]*$e+Ie[5]*rt+Ie[9]*Qe+Ie[13],Y[2]=Ie[2]*$e+Ie[6]*rt+Ie[10]*Qe+Ie[14],Y}function ae(Y,me,Ie){const $e=me[0],rt=me[1],Qe=me[2];return Y[0]=$e*Ie[0]+rt*Ie[3]+Qe*Ie[6],Y[1]=$e*Ie[1]+rt*Ie[4]+Qe*Ie[7],Y[2]=$e*Ie[2]+rt*Ie[5]+Qe*Ie[8],Y}function se(Y,me,Ie){const $e=Ie[0],rt=Ie[1],Qe=Ie[2],qe=me[0],ke=me[1],dt=me[2];let We=rt*dt-Qe*ke,nt=Qe*qe-$e*dt,ht=$e*ke-rt*qe,mt=rt*ht-Qe*nt,Kt=Qe*We-$e*ht,Bt=$e*nt-rt*We;const $t=2*Ie[3];return We*=$t,nt*=$t,ht*=$t,mt*=2,Kt*=2,Bt*=2,Y[0]=qe+We+mt,Y[1]=ke+nt+Kt,Y[2]=dt+ht+Bt,Y}const te=(0,g.c)(),Ee=(0,g.c)();function be(Y,me){return Y[0]===me[0]&&Y[1]===me[1]&&Y[2]===me[2]}function Ke(Y,me,Ie){const $e=Ie[0]-me[0],rt=Ie[1]-me[1],Qe=Ie[2]-me[2];let Xe=$e*$e+rt*rt+Qe*Qe;return Xe>0?(Xe=1/Math.sqrt(Xe),Y[0]=$e*Xe,Y[1]=rt*Xe,Y[2]=Qe*Xe,Y):(Y[0]=0,Y[1]=0,Y[2]=0,Y)}const Oe=J;Object.freeze({__proto__:null,length:J,copy:B,set:j,add:C,subtract:$,multiply:L,divide:D,ceil:function I(Y,me){return Y[0]=Math.ceil(me[0]),Y[1]=Math.ceil(me[1]),Y[2]=Math.ceil(me[2]),Y},floor:function W(Y,me){return Y[0]=Math.floor(me[0]),Y[1]=Math.floor(me[1]),Y[2]=Math.floor(me[2]),Y},min:function k(Y,me,Ie){return Y[0]=Math.min(me[0],Ie[0]),Y[1]=Math.min(me[1],Ie[1]),Y[2]=Math.min(me[2],Ie[2]),Y},max:function Z(Y,me,Ie){return Y[0]=Math.max(me[0],Ie[0]),Y[1]=Math.max(me[1],Ie[1]),Y[2]=Math.max(me[2],Ie[2]),Y},round:function X(Y,me){return Y[0]=Math.round(me[0]),Y[1]=Math.round(me[1]),Y[2]=Math.round(me[2]),Y},scale:V,scaleAndAdd:function w(Y,me,Ie,$e){return Y[0]=me[0]+Ie[0]*$e,Y[1]=me[1]+Ie[1]*$e,Y[2]=me[2]+Ie[2]*$e,Y},distance:T,squaredDistance:O,squaredLength:x,negate:function N(Y,me){return Y[0]=-me[0],Y[1]=-me[1],Y[2]=-me[2],Y},inverse:function M(Y,me){return Y[0]=1/me[0],Y[1]=1/me[1],Y[2]=1/me[2],Y},normalize:Q,dot:z,cross:ee,lerp:le,hermite:function oe(Y,me,Ie,$e,rt,Qe){const Xe=Qe*Qe,qe=Xe*(2*Qe-3)+1,ke=Xe*(Qe-2)+Qe,dt=Xe*(Qe-1),We=Xe*(3-2*Qe);return Y[0]=me[0]*qe+Ie[0]*ke+$e[0]*dt+rt[0]*We,Y[1]=me[1]*qe+Ie[1]*ke+$e[1]*dt+rt[1]*We,Y[2]=me[2]*qe+Ie[2]*ke+$e[2]*dt+rt[2]*We,Y},bezier:function ce(Y,me,Ie,$e,rt,Qe){const Xe=1-Qe,qe=Xe*Xe,ke=Qe*Qe,dt=qe*Xe,We=3*Qe*qe,nt=3*ke*Xe,ht=ke*Qe;return Y[0]=me[0]*dt+Ie[0]*We+$e[0]*nt+rt[0]*ht,Y[1]=me[1]*dt+Ie[1]*We+$e[1]*nt+rt[1]*ht,Y[2]=me[2]*dt+Ie[2]*We+$e[2]*nt+rt[2]*ht,Y},random:function re(Y,me){me=me||1;const Ie=2*(0,b.R)()*Math.PI,$e=2*(0,b.R)()-1,rt=Math.sqrt(1-$e*$e)*me;return Y[0]=Math.cos(Ie)*rt,Y[1]=Math.sin(Ie)*rt,Y[2]=$e*me,Y},transformMat4:K,transformMat3:ae,transformQuat:se,rotateX:function de(Y,me,Ie,$e){const rt=[],Qe=[];return rt[0]=me[0]-Ie[0],rt[1]=me[1]-Ie[1],rt[2]=me[2]-Ie[2],Qe[0]=rt[0],Qe[1]=rt[1]*Math.cos($e)-rt[2]*Math.sin($e),Qe[2]=rt[1]*Math.sin($e)+rt[2]*Math.cos($e),Y[0]=Qe[0]+Ie[0],Y[1]=Qe[1]+Ie[1],Y[2]=Qe[2]+Ie[2],Y},rotateY:function ue(Y,me,Ie,$e){const rt=[],Qe=[];return rt[0]=me[0]-Ie[0],rt[1]=me[1]-Ie[1],rt[2]=me[2]-Ie[2],Qe[0]=rt[2]*Math.sin($e)+rt[0]*Math.cos($e),Qe[1]=rt[1],Qe[2]=rt[2]*Math.cos($e)-rt[0]*Math.sin($e),Y[0]=Qe[0]+Ie[0],Y[1]=Qe[1]+Ie[1],Y[2]=Qe[2]+Ie[2],Y},rotateZ:function pe(Y,me,Ie,$e){const rt=[],Qe=[];return rt[0]=me[0]-Ie[0],rt[1]=me[1]-Ie[1],rt[2]=me[2]-Ie[2],Qe[0]=rt[0]*Math.cos($e)-rt[1]*Math.sin($e),Qe[1]=rt[0]*Math.sin($e)+rt[1]*Math.cos($e),Qe[2]=rt[2],Y[0]=Qe[0]+Ie[0],Y[1]=Qe[1]+Ie[1],Y[2]=Qe[2]+Ie[2],Y},angle:function ie(Y,me){B(te,Y),B(Ee,me),Q(te,te),Q(Ee,Ee);const Ie=z(te,Ee);return Ie>1?0:Ie<-1?Math.PI:Math.acos(Ie)},str:function fe(Y){return"vec3("+Y[0]+", "+Y[1]+", "+Y[2]+")"},exactEquals:be,equals:function ye(Y,me){if(Y===me)return!0;const Ie=Y[0],$e=Y[1],rt=Y[2],Qe=me[0],Xe=me[1],qe=me[2];return Math.abs(Ie-Qe)<=b.E*Math.max(1,Math.abs(Ie),Math.abs(Qe))&&Math.abs($e-Xe)<=b.E*Math.max(1,Math.abs($e),Math.abs(Xe))&&Math.abs(rt-qe)<=b.E*Math.max(1,Math.abs(rt),Math.abs(qe))},direction:Ke,sub:$,mul:L,div:D,dist:T,sqrDist:O,len:Oe,sqrLen:x})},28093:(He,ve,p)=>{"use strict";function g(){return[0,0,0]}function b(T){return[T[0],T[1],T[2]]}function J(T,O,x){return[T,O,x]}function B(T){const O=[0,0,0],x=Math.min(3,T.length);for(let N=0;N<x;++N)O[N]=T[N];return O}function j(T,O){return new Float64Array(T,O,3)}function $(){return J(1,1,1)}function L(){return J(1,0,0)}function D(){return J(0,1,0)}function I(){return J(0,0,1)}p.d(ve,{O:()=>k,Z:()=>W,a:()=>b,b:()=>j,c:()=>g,d:()=>B,f:()=>J});const W=[0,0,0],k=$(),Z=L(),X=D(),V=I();Object.freeze({__proto__:null,create:g,clone:b,fromValues:J,fromArray:B,createView:j,zeros:function C(){return[0,0,0]},ones:$,unitX:L,unitY:D,unitZ:I,ZEROS:W,ONES:k,UNIT_X:Z,UNIT_Y:X,UNIT_Z:V})},993:(He,ve,p)=>{"use strict";p.d(ve,{a:()=>B,b:()=>Z,c:()=>b,d:()=>Q,e:()=>T,f:()=>O,g:()=>re,h:()=>K,l:()=>z,n:()=>M,s:()=>J});var g=p(39863);function b(fe,be){return fe[0]=be[0],fe[1]=be[1],fe[2]=be[2],fe[3]=be[3],fe}function J(fe,be,ye,Ke,Ue){return fe[0]=be,fe[1]=ye,fe[2]=Ke,fe[3]=Ue,fe}function B(fe,be,ye){return fe[0]=be[0]+ye[0],fe[1]=be[1]+ye[1],fe[2]=be[2]+ye[2],fe[3]=be[3]+ye[3],fe}function j(fe,be,ye){return fe[0]=be[0]-ye[0],fe[1]=be[1]-ye[1],fe[2]=be[2]-ye[2],fe[3]=be[3]-ye[3],fe}function C(fe,be,ye){return fe[0]=be[0]*ye[0],fe[1]=be[1]*ye[1],fe[2]=be[2]*ye[2],fe[3]=be[3]*ye[3],fe}function $(fe,be,ye){return fe[0]=be[0]/ye[0],fe[1]=be[1]/ye[1],fe[2]=be[2]/ye[2],fe[3]=be[3]/ye[3],fe}function Z(fe,be,ye){return fe[0]=be[0]*ye,fe[1]=be[1]*ye,fe[2]=be[2]*ye,fe[3]=be[3]*ye,fe}function V(fe,be){const ye=be[0]-fe[0],Ke=be[1]-fe[1],Ue=be[2]-fe[2],he=be[3]-fe[3];return Math.sqrt(ye*ye+Ke*Ke+Ue*Ue+he*he)}function w(fe,be){const ye=be[0]-fe[0],Ke=be[1]-fe[1],Ue=be[2]-fe[2],he=be[3]-fe[3];return ye*ye+Ke*Ke+Ue*Ue+he*he}function T(fe){const be=fe[0],ye=fe[1],Ke=fe[2],Ue=fe[3];return Math.sqrt(be*be+ye*ye+Ke*Ke+Ue*Ue)}function O(fe){const be=fe[0],ye=fe[1],Ke=fe[2],Ue=fe[3];return be*be+ye*ye+Ke*Ke+Ue*Ue}function M(fe,be){const ye=be[0],Ke=be[1],Ue=be[2],he=be[3];let Me=ye*ye+Ke*Ke+Ue*Ue+he*he;return Me>0&&(Me=1/Math.sqrt(Me),fe[0]=ye*Me,fe[1]=Ke*Me,fe[2]=Ue*Me,fe[3]=he*Me),fe}function Q(fe,be){return fe[0]*be[0]+fe[1]*be[1]+fe[2]*be[2]+fe[3]*be[3]}function z(fe,be,ye,Ke){const Ue=be[0],he=be[1],Me=be[2],Le=be[3];return fe[0]=Ue+Ke*(ye[0]-Ue),fe[1]=he+Ke*(ye[1]-he),fe[2]=Me+Ke*(ye[2]-Me),fe[3]=Le+Ke*(ye[3]-Le),fe}function re(fe,be){return fe[0]===be[0]&&fe[1]===be[1]&&fe[2]===be[2]&&fe[3]===be[3]}function K(fe,be){const ye=fe[0],Ke=fe[1],Ue=fe[2],he=fe[3],Me=be[0],Le=be[1],Je=be[2],Oe=be[3];return Math.abs(ye-Me)<=g.E*Math.max(1,Math.abs(ye),Math.abs(Me))&&Math.abs(Ke-Le)<=g.E*Math.max(1,Math.abs(Ke),Math.abs(Le))&&Math.abs(Ue-Je)<=g.E*Math.max(1,Math.abs(Ue),Math.abs(Je))&&Math.abs(he-Oe)<=g.E*Math.max(1,Math.abs(he),Math.abs(Oe))}Object.freeze({__proto__:null,copy:b,set:J,add:B,subtract:j,multiply:C,divide:$,ceil:function L(fe,be){return fe[0]=Math.ceil(be[0]),fe[1]=Math.ceil(be[1]),fe[2]=Math.ceil(be[2]),fe[3]=Math.ceil(be[3]),fe},floor:function D(fe,be){return fe[0]=Math.floor(be[0]),fe[1]=Math.floor(be[1]),fe[2]=Math.floor(be[2]),fe[3]=Math.floor(be[3]),fe},min:function I(fe,be,ye){return fe[0]=Math.min(be[0],ye[0]),fe[1]=Math.min(be[1],ye[1]),fe[2]=Math.min(be[2],ye[2]),fe[3]=Math.min(be[3],ye[3]),fe},max:function W(fe,be,ye){return fe[0]=Math.max(be[0],ye[0]),fe[1]=Math.max(be[1],ye[1]),fe[2]=Math.max(be[2],ye[2]),fe[3]=Math.max(be[3],ye[3]),fe},round:function k(fe,be){return fe[0]=Math.round(be[0]),fe[1]=Math.round(be[1]),fe[2]=Math.round(be[2]),fe[3]=Math.round(be[3]),fe},scale:Z,scaleAndAdd:function X(fe,be,ye,Ke){return fe[0]=be[0]+ye[0]*Ke,fe[1]=be[1]+ye[1]*Ke,fe[2]=be[2]+ye[2]*Ke,fe[3]=be[3]+ye[3]*Ke,fe},distance:V,squaredDistance:w,length:T,squaredLength:O,negate:function x(fe,be){return fe[0]=-be[0],fe[1]=-be[1],fe[2]=-be[2],fe[3]=-be[3],fe},inverse:function N(fe,be){return fe[0]=1/be[0],fe[1]=1/be[1],fe[2]=1/be[2],fe[3]=1/be[3],fe},normalize:M,dot:Q,lerp:z,random:function ee(fe,be){let ye,Ke,Ue,he,Me,Le;be=be||1;do{ye=2*(0,g.R)()-1,Ke=2*(0,g.R)()-1,Me=ye*ye+Ke*Ke}while(Me>=1);do{Ue=2*(0,g.R)()-1,he=2*(0,g.R)()-1,Le=Ue*Ue+he*he}while(Le>=1);const Je=Math.sqrt((1-Me)/Le);return fe[0]=be*ye,fe[1]=be*Ke,fe[2]=be*Ue*Je,fe[3]=be*he*Je,fe},transformMat4:function le(fe,be,ye){const Ke=be[0],Ue=be[1],he=be[2],Me=be[3];return fe[0]=ye[0]*Ke+ye[4]*Ue+ye[8]*he+ye[12]*Me,fe[1]=ye[1]*Ke+ye[5]*Ue+ye[9]*he+ye[13]*Me,fe[2]=ye[2]*Ke+ye[6]*Ue+ye[10]*he+ye[14]*Me,fe[3]=ye[3]*Ke+ye[7]*Ue+ye[11]*he+ye[15]*Me,fe},transformQuat:function oe(fe,be,ye){const Ke=be[0],Ue=be[1],he=be[2],Me=ye[0],Le=ye[1],Je=ye[2],Oe=ye[3],xe=Oe*Ke+Le*he-Je*Ue,Be=Oe*Ue+Je*Ke-Me*he,Y=Oe*he+Me*Ue-Le*Ke,me=-Me*Ke-Le*Ue-Je*he;return fe[0]=xe*Oe+me*-Me+Be*-Je-Y*-Le,fe[1]=Be*Oe+me*-Le+Y*-Me-xe*-Je,fe[2]=Y*Oe+me*-Je+xe*-Le-Be*-Me,fe[3]=be[3],fe},str:function ce(fe){return"vec4("+fe[0]+", "+fe[1]+", "+fe[2]+", "+fe[3]+")"},exactEquals:re,equals:K,sub:j,mul:C,div:$,dist:V,sqrDist:w,len:T,sqrLen:O})},20414:(He,ve,p)=>{"use strict";p.d(ve,{h$:()=>J,VL:()=>B,rW:()=>$,B7:()=>C,St:()=>b});const g={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function b(L){return g[L]||g[L.toLowerCase()]}function J(L){var D;return null!=(D=g[L])?D:g[L.toLowerCase()]}function B(L){return[...J(L)]}function j(L,D,I){I<0&&++I,I>1&&--I;const W=6*I;return W<1?L+(D-L)*W:2*I<1?D:3*I<2?L+(D-L)*(2/3-I)*6:L}function C(L,D,I,W=1){const k=(L%360+360)%360/360,Z=I<=.5?I*(D+1):I+D-I*D,X=2*I-Z;return[Math.round(255*j(X,Z,k+1/3)),Math.round(255*j(X,Z,k)),Math.round(255*j(X,Z,k-1/3)),W]}function $(L){const D=L.length>5,I=D?8:4,W=(1<<I)-1,k=D?1:17,Z=D?9===L.length:5===L.length;let X=Number("0x"+L.substr(1));if(isNaN(X))return null;const V=[0,0,0,1];let w;return Z&&(w=X&W,X>>=I,V[3]=k*w/255),w=X&W,X>>=I,V[2]=k*w,w=X&W,X>>=I,V[1]=k*w,w=X&W,X>>=I,V[0]=k*w,V}},59318:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>B}),p(8314);var J,b=p(94113);const B={apiKey:void 0,applicationUrl:null==(J=globalThis.location)?void 0:J.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};globalThis.esriConfig&&((0,b.RH)(B,globalThis.esriConfig,!0),delete B.has),B.assetsPath||(B.assetsPath=`https://js.arcgis.com/${"4.23.7".slice(0,-2)}/@arcgis/core/assets`),B.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(B,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),B.request.corsEnabledServers=[],B.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0}},14517:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>ce});var g=p(55538),b=p(63290),J=p(34595),B=p(44648),j=p(34117),$=(p(8314),p(58817)),L=p(27899),D=p(31283),I=p(36082),W=p(2345),k=p(12196);class Z{constructor(K,ae,se){this.properties=K,this.propertyName=ae,this.metadata=se,this._observers=null,this._accessed=null,this._handles=null,this.flags=W.v.Dirty|(se.nonNullable?W.v.NonNullable:0)|(se.hasOwnProperty("value")?W.v.HasDefaultValue:0)|(void 0===se.get?W.v.DepTrackingInitialized:0)|(void 0===se.dependsOn?W.v.AutoTracked:0)}destroy(){this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){(0,I.it)(this);const K=this.properties.store,ae=this.propertyName,se=this.flags,de=K.get(ae);if(se&W.v.Computing||~se&W.v.Dirty&&K.has(ae))return de;this.flags|=W.v.Computing;const ue=this.properties.host;let pe;se&W.v.AutoTracked?pe=(0,I.LJ)(this,this.metadata.get,ue):((0,I.GF)(ue,this),pe=this.metadata.get.call(ue)),K.set(ae,pe,D.s3.COMPUTED);const ie=K.get(ae);return ie===de?this.flags&=~W.v.Dirty:(0,I.gb)(this.commit,this),this.flags&=~W.v.Computing,ie}onObservableAccessed(K){K!==this&&(null===this._accessed&&(this._accessed=[]),this._accessed.includes(K)||this._accessed.push(K))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=W.v.DepTrackingInitialized;const K=this._accessed;if(null===K)return;let ae=this._handles;null===ae&&(ae=this._handles=[]);for(let se=0;se<K.length;++se)ae.push(K[se].observe(this));K.length=0}observe(K){return null===this._observers&&(this._observers=[]),this._observers.includes(K)||this._observers.push(K),new k.X(this._observers,K)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&W.v.Overriden&&(this.flags|=W.v.Dirty);const K=this._observers;if(null!==K)for(let ae=0;ae<K.length;++ae)K[ae].onInvalidated()}commit(){this.flags&=~W.v.Dirty,this.onCommitted()}onCommitted(){if(null===this._observers)return;const K=this._observers.slice();for(let ae=0;ae<K.length;++ae)K[ae].onCommitted()}_clearObservationHandles(){const K=this._handles;if(null!==K){for(let ae=0;ae<K.length;++ae)K[ae].remove();K.length=0}}}class X{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(K){const ae=new X;return this._values.forEach((se,de)=>{K&&K.has(de)||ae.set(de,(0,$.d9)(se))}),ae}get(K){return this._values.get(K)}originOf(){return D.s3.USER}keys(){return[...this._values.keys()]}set(K,ae){this._values.set(K,ae)}delete(K){this._values.delete(K)}has(K){return this._values.has(K)}forEach(K){this._values.forEach(K)}}var V=p(52323);function w(re,K,ae){return void 0!==re}function T(re,K,ae,se){return!(void 0===re||null==ae&&re.flags&W.v.NonNullable)}b.Z.getLogger("esri.core.accessorSupport.Properties");class x{constructor(K){this.host=K,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=B.F.INITIALIZING,this.store=new X,this._origin=D.s3.USER;const ae=this.host.constructor.__accessorMetadata__,se=ae.properties;for(const de in se){const ue=new Z(this,de,se[de]);this.properties.set(de,ue)}this.metadatas=se,this._autoDestroy=ae.autoDestroy}initialize(){this.lifecycle=B.F.CONSTRUCTING}constructed(){this.lifecycle=B.F.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[K,ae]of this.properties){const se=this.internalGet(K);se&&(re=se)&&"function"==typeof re.destroy&&(se.destroy(),~ae.flags&W.v.NonNullable&&this._internalSet(ae,null)),ae.destroy()}else for(const[K,ae]of this.properties)ae.destroy();var re}get initialized(){return this.lifecycle!==B.F.INITIALIZING}get(K){const ae=this.properties.get(K);if(ae.metadata.get)return ae.getComputed();(0,I.it)(ae);const se=this.store;return se.has(K)?se.get(K):ae.metadata.value}originOf(K){const ae=this.store.originOf(K);if(void 0===ae){const se=this.properties.get(K);if(void 0!==se&&se.flags&W.v.HasDefaultValue)return"defaults"}return(0,D.x3)(ae)}has(K){return!!this.properties.has(K)&&this.store.has(K)}keys(){return[...this.properties.keys()]}internalGet(K){const ae=this.properties.get(K);if(w(ae))return this.store.has(K)?this.store.get(K):ae.metadata.value}internalSet(K,ae){const se=this.properties.get(K);w(se)&&this._internalSet(se,ae)}getDependsInfo(K,ae,se){const de=this.properties.get(ae);if(!w(de))return"";const ue=new Set,pe=(0,I.LJ)({onObservableAccessed:te=>ue.add(te),onTrackingEnd:()=>{}},()=>{var te;return null==(te=de.metadata.get)?void 0:te.call(K)});let ie=`${se}${K.declaredClass.split(".").pop()}.${ae}: ${pe}\n`;if(0===ue.size)return ie;se+="  ";for(const te of ue){if(!(te instanceof Z))continue;const Ee=te.properties.host,fe=te.propertyName,be=(0,V.vw)(Ee);ie+=be?be.getDependsInfo(Ee,fe,se):`${se}${fe}: undefined\n`}return ie}setAtOrigin(K,ae,se){const de=this.properties.get(K);if(w(de))return this._setAtOrigin(de,ae,se)}isOverridden(K){const ae=this.properties.get(K);return void 0!==ae&&!!(ae.flags&W.v.Overriden)}clearOverride(K){const ae=this.properties.get(K);void 0!==ae&&ae.flags&W.v.Overriden&&(ae.flags&=~W.v.Overriden,ae.notifyChange())}override(K,ae){const se=this.properties.get(K);if(!T(se,0,ae))return;const de=se.metadata.cast;if(de){const ue=this._cast(de,ae),{valid:pe,value:ie}=ue;if(M.release(ue),!pe)return;ae=ie}se.flags|=W.v.Overriden,this._internalSet(se,ae)}set(K,ae){const se=this.properties.get(K);if(!T(se,0,ae))return;const de=se.metadata.cast;if(de){const pe=this._cast(de,ae),{valid:ie,value:te}=pe;if(M.release(pe),!ie)return;ae=te}const ue=se.metadata.set;ue?ue.call(this.host,ae):this._internalSet(se,ae)}setDefaultOrigin(K){this._origin=(0,D.M9)(K)}getDefaultOrigin(){return(0,D.x3)(this._origin)}notifyChange(K){const ae=this.properties.get(K);void 0!==ae&&ae.notifyChange()}invalidate(K){const ae=this.properties.get(K);void 0!==ae&&ae.invalidate()}commit(K){const ae=this.properties.get(K);void 0!==ae&&ae.commit()}_internalSet(K,ae){this._setAtOrigin(K,ae,this.lifecycle!==B.F.INITIALIZING?this._origin:D.s3.DEFAULTS)}_setAtOrigin(K,ae,se){const de=this.store,ue=K.propertyName;de.has(ue,se)&&(0,$.fS)(ae,de.get(ue))&&~K.flags&W.v.Overriden&&se===de.originOf(ue)||(K.invalidate(),de.set(ue,ae,se),K.commit(),(0,I.mS)(this.host,K))}_cast(K,ae){const se=M.acquire();return se.valid=!0,se.value=ae,K&&(se.value=K.call(this.host,ae,se)),se}}const M=new L.Z(class N{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});var Q=p(82255),z=p(45262),ee=p(77712),le=p(76898);function oe(re){if(null==re)return{value:re};if(Array.isArray(re))return{type:[re[0]],value:null};switch(typeof re){case"object":return re.constructor&&re.constructor.__accessorMetadata__||re instanceof Date?{type:re.constructor,value:re}:re;case"boolean":return{type:Boolean,value:re};case"string":return{type:String,value:re};case"number":return{type:Number,value:re};case"function":return{type:re,value:null};default:return}}class ce{constructor(...K){if(this.constructor===ce)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new x(this)}),K.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,K))}static createSubclass(K={}){if(Array.isArray(K))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:ae,declaredClass:se,constructor:de}=K;delete K.declaredClass,delete K.properties,delete K.constructor;const ue=this;class pe extends ue{constructor(...te){super(...te),this.inherited=null,de&&de.apply(this,te)}}(0,j.JT)(pe.prototype);for(const ie in K){const te=K[ie];pe.prototype[ie]="function"==typeof te?function(...Ee){const fe=this.inherited;let be;this.inherited=function(...ye){if(ue.prototype[ie])return ue.prototype[ie].apply(this,ye)};try{be=te.apply(this,Ee)}catch(ye){throw this.inherited=fe,ye}return this.inherited=fe,be}:K[ie]}for(const ie in ae){const te=oe(ae[ie]);(0,ee.Cb)(te)(pe.prototype,ie)}return(0,le.j)(se)(pe)}postscript(K){const ae=this.__accessor__,se=ae.ctorArgs||K;ae.initialize(),se&&(this.set(se),ae.ctorArgs=null),ae.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||((0,z.BT)(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===B.F.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(K){this.get(K)}get(K){return(0,J.U2)(this,K)}hasOwnProperty(K){return this.__accessor__?this.__accessor__.has(K):Object.prototype.hasOwnProperty.call(this,K)}isInstanceOf(K){return(0,g.XV)(b.Z.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof K}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(K,ae){return(0,Q.t)(this,K,ae),this}watch(K,ae,se){return(0,z.YP)(this,K,ae,se)}_clearOverride(K){return this.__accessor__.clearOverride(K)}_override(K,ae){return this.__accessor__.override(K,ae)}_isOverridden(K){return this.__accessor__.isOverridden(K)}notifyChange(K){this.__accessor__.notifyChange(K)}_get(K){return this.__accessor__.internalGet(K)}_set(K,ae){return this.__accessor__.internalSet(K,ae),this}}},35575:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>J});var g=p(27899);function b(j){j.length=0}class J{constructor(C=50,$=50){this._pool=new g.Z(Array,void 0,b,$,C)}acquire(){return this._pool.acquire()}release(C){this._pool.release(C)}prune(){this._pool.prune(0)}static acquire(){return B.acquire()}static release(C){return B.release(C)}static prune(){B.prune()}}const B=new J(100)},79608:(He,ve,p)=>{"use strict";p.d(ve,{J:()=>I});var g=p(17626),b=p(14517),B=(p(8314),p(58817)),j=p(63290),C=p(62208),$=p(31283),L=p(52323),D=p(76898);j.Z.getLogger("esri.core.Clonable");const I=k=>{let Z=class extends k{clone(){const X=(0,C.s3)((0,L.vw)(this),"unable to clone instance of non-accessor class"),V=X.metadatas,w=X.store,T={},O=new Map;for(const M in V){const Q=V[M],z=null==w?void 0:w.originOf(M),ee=Q.clonable;if(Q.readOnly||!1===ee||z!==$.s3.USER&&z!==$.s3.DEFAULTS&&z!==$.s3.WEB_MAP&&z!==$.s3.WEB_SCENE)continue;const le=this[M];let oe=null;oe="function"==typeof ee?ee(le):"reference"===ee?le:(0,B.Vo)(le),null!=le&&null==oe||(z===$.s3.DEFAULTS?O.set(M,oe):T[M]=oe)}const x=new(Object.getPrototypeOf(this).constructor)(T);if(O.size){var N;const M=null==(N=(0,L.vw)(x))?void 0:N.store;if(M)for(const[Q,z]of O)M.set(Q,z,$.s3.DEFAULTS)}return x}};return Z=(0,g._)([(0,D.j)("esri.core.Clonable")],Z),Z};let W=class extends(I(b.Z)){};W=(0,g._)([(0,D.j)("esri.core.Clonable")],W)},48701:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>ae});var $,se,g=p(17626),b=p(35575),J=p(61885),B=p(58817),j=p(62208),C=p(27899);(se=$||($={}))[se.ADD=1]="ADD",se[se.REMOVE=2]="REMOVE",se[se.MOVE=4]="MOVE";var w,L=p(50618),D=p(77712),I=p(90912),W=p(61039),k=p(76898),Z=p(36082),X=p(12196);class V{constructor(){this._observers=[]}observe(de){return this._observers.includes(de)||this._observers.push(de),new X.X(this._observers,de)}notify(){const de=this._observers.slice();for(let ue=0;ue<de.length;++ue){const pe=de[ue];pe.onInvalidated(),pe.onCommitted()}}}const O=new C.Z(class T{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(de){this.defaultPrevented=!1,this.item=de}},void 0,se=>{se.item=null,se.target=null,se.defaultPrevented=!1,se.cancellable=!1}),x=()=>{};function N(se){return se?se instanceof K?se.toArray():se.length?Array.prototype.slice.apply(se):[]:[]}function M(se){if(se&&se.length)return se[0]}function Q(se,de,ue,pe){const ie=Math.min(se.length-ue,de.length-pe);let te=0;for(;te<ie&&se[ue+te]===de[pe+te];)te++;return te}function z(se,de,ue,pe){de&&de.forEach((ie,te,Ee)=>{se.push(ie),z(se,ue.call(pe,ie,te,Ee),ue,pe)})}const ee=new Set,le=new Set,oe=new Set,ce=new Map;let re=0,K=w=class extends J.Z.EventedAccessor{constructor(se){super(se),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new V,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:re++})}static isCollection(se){return null!=se&&se instanceof w}normalizeCtorArgs(se){return se?Array.isArray(se)||se instanceof w?{items:se}:se:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return(0,Z.it)(this._observable),this._items}set items(se){this._emitBeforeChanges($.ADD)||(this._splice(0,this.length,N(se)),this._emitAfterChanges($.ADD))}hasEventListener(se){return"change"===se?this._chgListeners.length>0:this._emitter.hasEventListener(se)}on(se,de){if("change"===se){const ue=this._chgListeners,pe={removed:!1,callback:de};return ue.push(pe),this._notifications&&this._notifications.push({listeners:ue.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=x,pe.removed=!0,ue.splice(ue.indexOf(pe),1)}}}return this._emitter.on(se,de)}once(se,de){const ue=this.on(se,de);return{remove(){ue.remove()}}}add(se,de){if((0,Z.it)(this._observable),this._emitBeforeChanges($.ADD))return this;const ue=this.getNextIndex(null!=de?de:null);return this._splice(ue,0,[se]),this._emitAfterChanges($.ADD),this}addMany(se,de=this._items.length){if((0,Z.it)(this._observable),!se||!se.length)return this;if(this._emitBeforeChanges($.ADD))return this;const ue=this.getNextIndex(de);return this._splice(ue,0,N(se)),this._emitAfterChanges($.ADD),this}at(se){if((0,Z.it)(this._observable),(se=Math.trunc(se)||0)<0&&(se+=this.length),!(se<0||se>=this.length))return this._items[se]}removeAll(){if((0,Z.it)(this._observable),!this.length||this._emitBeforeChanges($.REMOVE))return[];const se=this._splice(0,this.length)||[];return this._emitAfterChanges($.REMOVE),se}clone(){return(0,Z.it)(this._observable),this._createNewInstance({items:this._items.map(B.d9)})}concat(...se){(0,Z.it)(this._observable);const de=se.map(N);return this._createNewInstance({items:this._items.concat(...de)})}drain(se,de){if((0,Z.it)(this._observable),!this.length||this._emitBeforeChanges($.REMOVE))return;const ue=(0,j.j0)(this._splice(0,this.length)),pe=ue.length;for(let ie=0;ie<pe;ie++)se.call(de,ue[ie],ie,ue);this._emitAfterChanges($.REMOVE)}every(se,de){return(0,Z.it)(this._observable),this._items.every(se,de)}filter(se,de){let ue;return(0,Z.it)(this._observable),ue=2===arguments.length?this._items.filter(se,de):this._items.filter(se),this._createNewInstance({items:ue})}find(se,de){return(0,Z.it)(this._observable),this._items.find(se,de)}findIndex(se,de){return(0,Z.it)(this._observable),this._items.findIndex(se,de)}flatten(se,de){(0,Z.it)(this._observable);const ue=[];return z(ue,this,se,de),new w(ue)}forEach(se,de){return(0,Z.it)(this._observable),this._items.forEach(se,de)}getItemAt(se){return(0,Z.it)(this._observable),this._items[se]}getNextIndex(se){(0,Z.it)(this._observable);const de=this.length;return(se=null==se?de:se)<0?se=0:se>de&&(se=de),se}includes(se,de=0){return(0,Z.it)(this._observable),this._items.includes(se,de)}indexOf(se,de=0){return(0,Z.it)(this._observable),this._items.indexOf(se,de)}join(se=","){return(0,Z.it)(this._observable),this._items.join(se)}lastIndexOf(se,de=this.length-1){return(0,Z.it)(this._observable),this._items.lastIndexOf(se,de)}map(se,de){(0,Z.it)(this._observable);const ue=this._items.map(se,de);return new w({items:ue})}reorder(se,de=this.length-1){(0,Z.it)(this._observable);const ue=this.indexOf(se);if(-1!==ue){if(de<0?de=0:de>=this.length&&(de=this.length-1),ue!==de){if(this._emitBeforeChanges($.MOVE))return se;this._splice(ue,1),this._splice(de,0,[se]),this._emitAfterChanges($.MOVE)}return se}}pop(){if((0,Z.it)(this._observable),!this.length||this._emitBeforeChanges($.REMOVE))return;const se=M(this._splice(this.length-1,1));return this._emitAfterChanges($.REMOVE),se}push(...se){return(0,Z.it)(this._observable),this._emitBeforeChanges($.ADD)||(this._splice(this.length,0,se),this._emitAfterChanges($.ADD)),this.length}reduce(se,de){(0,Z.it)(this._observable);const ue=this._items;return 2===arguments.length?ue.reduce(se,de):ue.reduce(se)}reduceRight(se,de){(0,Z.it)(this._observable);const ue=this._items;return 2===arguments.length?ue.reduceRight(se,de):ue.reduceRight(se)}remove(se){return(0,Z.it)(this._observable),this.removeAt(this.indexOf(se))}removeAt(se){if((0,Z.it)(this._observable),se<0||se>=this.length||this._emitBeforeChanges($.REMOVE))return;const de=M(this._splice(se,1));return this._emitAfterChanges($.REMOVE),de}removeMany(se){if((0,Z.it)(this._observable),!se||!se.length||this._emitBeforeChanges($.REMOVE))return[];const de=se instanceof w?se.toArray():se,ue=this._items,pe=[],ie=de.length;for(let te=0;te<ie;te++){const fe=ue.indexOf(de[te]);if(fe>-1){const be=1+Q(de,ue,te+1,fe+1),ye=this._splice(fe,be);ye&&ye.length>0&&pe.push.apply(pe,ye),te+=be-1}}return this._emitAfterChanges($.REMOVE),pe}reverse(){if((0,Z.it)(this._observable),this._emitBeforeChanges($.MOVE))return this;const se=this._splice(0,this.length);return se&&(se.reverse(),this._splice(0,0,se)),this._emitAfterChanges($.MOVE),this}shift(){if((0,Z.it)(this._observable),!this.length||this._emitBeforeChanges($.REMOVE))return;const se=M(this._splice(0,1));return this._emitAfterChanges($.REMOVE),se}slice(se=0,de=this.length){return(0,Z.it)(this._observable),this._createNewInstance({items:this._items.slice(se,de)})}some(se,de){return(0,Z.it)(this._observable),this._items.some(se,de)}sort(se){if((0,Z.it)(this._observable),!this.length||this._emitBeforeChanges($.MOVE))return this;const de=(0,j.j0)(this._splice(0,this.length));return arguments.length?de.sort(se):de.sort(),this._splice(0,0,de),this._emitAfterChanges($.MOVE),this}splice(se,de,...ue){(0,Z.it)(this._observable);const pe=(de?$.REMOVE:0)|(ue.length?$.ADD:0);if(this._emitBeforeChanges(pe))return[];const ie=this._splice(se,de,ue)||[];return this._emitAfterChanges(pe),ie}toArray(){return(0,Z.it)(this._observable),this._items.slice()}toJSON(){return(0,Z.it)(this._observable),this.toArray()}toLocaleString(){return(0,Z.it)(this._observable),this._items.toLocaleString()}toString(){return(0,Z.it)(this._observable),this._items.toString()}unshift(...se){return(0,Z.it)(this._observable),!se.length||this._emitBeforeChanges($.ADD)||(this._splice(0,0,se),this._emitAfterChanges($.ADD)),this.length}_createNewInstance(se){return new this.constructor(se)}_splice(se,de,ue){const pe=this._items,ie=this.itemType;let te,Ee;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=(0,L.Os)(()=>this._dispatchChange())),de){if(Ee=pe.splice(se,de),this.hasEventListener("before-remove")){const fe=O.acquire();fe.target=this,fe.cancellable=!0;for(let be=0,ye=Ee.length;be<ye;be++)te=Ee[be],fe.reset(te),this.emit("before-remove",fe),fe.defaultPrevented&&(Ee.splice(be,1),pe.splice(se,0,te),se+=1,be-=1,ye-=1);O.release(fe)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const fe=O.acquire();fe.target=this,fe.cancellable=!1;const be=Ee.length;for(let ye=0;ye<be;ye++)fe.reset(Ee[ye]),this.emit("after-remove",fe);O.release(fe)}}if(ue&&ue.length){if(ie){const Ke=[];for(const Ue of ue){const he=ie.ensureType(Ue);null==he&&null!=Ue||Ke.push(he)}ue=Ke}const fe=this.hasEventListener("before-add"),be=this.hasEventListener("after-add"),ye=se===this.length;if(fe||be){const Ke=O.acquire();Ke.target=this,Ke.cancellable=!0;const Ue=O.acquire();Ue.target=this,Ue.cancellable=!1;for(const he of ue)fe?(Ke.reset(he),this.emit("before-add",Ke),Ke.defaultPrevented||(ye?pe.push(he):pe.splice(se++,0,he),this._set("length",pe.length),be&&(Ue.reset(he),this.emit("after-add",Ue)))):(ye?pe.push(he):pe.splice(se++,0,he),this._set("length",pe.length),Ue.reset(he),this.emit("after-add",Ue));O.release(Ue),O.release(Ke)}else{if(ye)for(const Ke of ue)pe.push(Ke);else pe.splice(se,0,...ue);this._set("length",pe.length)}}return(ue&&ue.length||Ee&&Ee.length)&&this._notifyChangeEvent(ue,Ee),Ee}_emitBeforeChanges(se){let de=!1;if(this.hasEventListener("before-changes")){const ue=O.acquire();ue.target=this,ue.cancellable=!0,ue.type=se,this.emit("before-changes",ue),de=ue.defaultPrevented,O.release(ue)}return de}_emitAfterChanges(se){if(this.hasEventListener("after-changes")){const de=O.acquire();de.target=this,de.cancellable=!1,de.type=se,this.emit("after-changes",de),O.release(de)}this._observable.notify()}_notifyChangeEvent(se,de){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:se,removed:de})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const se=this._notifications;this._notifications=null;for(const de of se){const ue=de.changes;ee.clear(),le.clear(),oe.clear();for(const{added:be,removed:ye}of ue){if(be)if(0===oe.size&&0===le.size)for(const Ke of be)ee.add(Ke);else for(const Ke of be)le.has(Ke)?(oe.add(Ke),le.delete(Ke)):oe.has(Ke)||ee.add(Ke);if(ye)if(0===oe.size&&0===ee.size)for(const Ke of ye)le.add(Ke);else for(const Ke of ye)ee.has(Ke)?ee.delete(Ke):(oe.delete(Ke),le.add(Ke))}const pe=b.Z.acquire();ee.forEach(be=>{pe.push(be)});const ie=b.Z.acquire();le.forEach(be=>{ie.push(be)});const te=this._items,Ee=de.items,fe=b.Z.acquire();if(oe.forEach(be=>{Ee.indexOf(be)!==te.indexOf(be)&&fe.push(be)}),de.listeners&&(pe.length||ie.length||fe.length)){const be={target:this,added:pe,removed:ie,moved:fe},ye=de.listeners.length;for(let Ke=0;Ke<ye;Ke++){const Ue=de.listeners[Ke];Ue.removed||Ue.callback.call(this,be)}}b.Z.release(pe),b.Z.release(ie),b.Z.release(fe)}ee.clear(),le.clear(),oe.clear()}};K.ofType=se=>{if(!se)return w;if(ce.has(se))return ce.get(se);let de=null;if("function"==typeof se)de=se.prototype.declaredClass;else if(se.base)de=se.base.prototype.declaredClass;else for(const pe in se.typeMap){const ie=se.typeMap[pe].prototype.declaredClass;de?de+=` | ${ie}`:de=ie}let ue=class extends w{};return(0,g._)([(0,W.c)({Type:se,ensureType:"function"==typeof se?(0,I.se)(se):(0,I.N7)(se)})],ue.prototype,"itemType",void 0),ue=(0,g._)([(0,k.j)(`esri.core.Collection<${de}>`)],ue),ce.set(se,ue),ue},(0,g._)([(0,D.Cb)()],K.prototype,"length",void 0),(0,g._)([(0,D.Cb)()],K.prototype,"items",null),K=w=(0,g._)([(0,k.j)("esri.core.Collection")],K);const ae=K},46882:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var g=p(17626),b=p(48701),J=p(80542),B=p(62208),L=(p(26584),p(63290),p(45262),p(21352)),D=p(77712),Z=(p(85931),p(8314),p(90912),p(76898));let X=class extends((0,J.p)(b.Z)){constructor(w){super(w),this.getCollections=null}initialize(){this.handles.add((0,L.EH)(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const w=(0,B.pC)(this.getCollections)?this.getCollections():null;if((0,B.Wi)(w))return void this.removeAll();let T=0;for(const O of w)(0,B.pC)(O)&&(T=this._processCollection(T,O));this.splice(T,this.length)}_createNewInstance(w){return new b.Z(w)}_processCollection(w,T){if(!T)return w;const O=this.itemFilterFunction?this.itemFilterFunction:x=>!!x;for(const x of T)if(x){if(O(x)){const N=this.indexOf(x,w);N>=0?N!==w&&this.reorder(x,w):this.add(x,w),++w}if(this.getChildrenFunction){const N=this.getChildrenFunction(x);if(Array.isArray(N))for(const M of N)w=this._processCollection(w,M);else w=this._processCollection(w,N)}}return w}};(0,g._)([(0,D.Cb)()],X.prototype,"getCollections",void 0),(0,g._)([(0,D.Cb)()],X.prototype,"getChildrenFunction",void 0),(0,g._)([(0,D.Cb)()],X.prototype,"itemFilterFunction",void 0),X=(0,g._)([(0,Z.j)("esri.core.CollectionFlattener")],X);const V=X},26584:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>B});var g=p(58817),b=p(63290),J=p(90888);class B extends J.Z{constructor(C,$,L){if(super(C,$,L),!(this instanceof B))return new B(C,$,L)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(C,$)=>{if($&&"object"==typeof $&&"function"==typeof $.toJSON)return $;try{return(0,g.d9)($)}catch(L){return"[object]"}}))}}catch(C){throw b.Z.getLogger("esri.core.Error").error(C),C}return{name:this.name,message:this.message,details:this.details}}static fromJSON(C){return new B(C.name,C.message,C.details)}}B.prototype.type="error"},61885:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>C});var g=p(17626),b=p(14517),J=p(54024),B=p(76898);class j{constructor(){this._emitter=new j.EventEmitter(this)}emit(L,D){return this._emitter.emit(L,D)}on(L,D){return this._emitter.on(L,D)}once(L,D){return this._emitter.once(L,D)}hasEventListener(L){return this._emitter.hasEventListener(L)}}!function($){class L{constructor(W=null){this.target=W,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(W,k){const Z=this._listenersMap&&this._listenersMap.get(W);if(!Z)return!1;const X=this.target||this;return[...Z].forEach(V=>{V.call(X,k)}),Z.length>0}on(W,k){if(Array.isArray(W)){const X=W.map(V=>this.on(V,k));return(0,J.AL)(X)}if(W.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const Z=this._listenersMap.get(W)||[];return Z.push(k),this._listenersMap.set(W,Z),{remove:()=>{const X=this._listenersMap&&this._listenersMap.get(W)||[],V=X.indexOf(k);V>=0&&X.splice(V,1)}}}once(W,k){const Z=this.on(W,X=>{Z.remove(),k.call(null,X)});return Z}hasEventListener(W){const k=this._listenersMap&&this._listenersMap.get(W);return null!=k&&k.length>0}}$.EventEmitter=L,$.EventedMixin=I=>{let W=class extends I{constructor(){super(...arguments),this._emitter=new L}destroy(){this._emitter.clear()}emit(k,Z){return this._emitter.emit(k,Z)}on(k,Z){return this._emitter.on(k,Z)}once(k,Z){return this._emitter.once(k,Z)}hasEventListener(k){return this._emitter.hasEventListener(k)}};return W=(0,g._)([(0,B.j)("esri.core.Evented")],W),W};let D=class extends b.Z{constructor(){super(...arguments),this._emitter=new j.EventEmitter(this)}destroy(){this._emitter.clear()}emit(I,W){return this._emitter.emit(I,W)}on(I,W){return this._emitter.on(I,W)}once(I,W){return this._emitter.once(I,W)}hasEventListener(I){return this._emitter.hasEventListener(I)}};D=(0,g._)([(0,B.j)("esri.core.Evented")],D),$.EventedAccessor=D}(j||(j={}));const C=j},80542:(He,ve,p)=>{"use strict";p.d(ve,{r:()=>L,p:()=>$});var g=p(17626),b=p(14517),J=p(72392),B=p(77712),j=p(76898),C=p(70257);const $=D=>{let I=class extends D{destroy(){var W,k;this.destroyed||(null==(W=this._get("handles"))||W.destroy(),null==(k=this._get("updatingHandles"))||k.destroy())}get handles(){return this._get("handles")||new J.Z}get updatingHandles(){return this._get("updatingHandles")||new C.t}};return(0,g._)([(0,B.Cb)({readOnly:!0})],I.prototype,"handles",null),(0,g._)([(0,B.Cb)({readOnly:!0})],I.prototype,"updatingHandles",null),I=(0,g._)([(0,j.j)("esri.core.HandleOwner")],I),I};let L=class extends($(b.Z)){};L=(0,g._)([(0,j.j)("esri.core.HandleOwner")],L)},72392:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>L});var g=p(17626),b=p(14517),J=p(48701),B=p(62208),j=p(77712),C=p(76898);let $=class extends b.Z{constructor(D){super(D),this._groups=new Map}destroy(){this.removeAll()}get size(){let D=0;return this._groups.forEach(I=>{D+=I.length}),D}add(D,I){if(!this._isHandle(D)&&!Array.isArray(D)&&!J.Z.isCollection(D))return this;const W=this._getOrCreateGroup(I);return Array.isArray(D)||J.Z.isCollection(D)?D.forEach(k=>this._isHandle(k)&&W.push(k)):W.push(D),this.notifyChange("size"),this}forEach(D,I){if("function"==typeof D)this._groups.forEach(W=>W.forEach(D));else{const W=this._getGroup(D);W&&I&&W.forEach(I)}}has(D){return this._groups.has(this._ensureGroupKey(D))}remove(D){if(Array.isArray(D)||J.Z.isCollection(D))return D.forEach(this.remove,this),this;if(!this.has(D))return this;const I=this._getGroup(D);for(let W=0;W<I.length;W++)I[W].remove();return this._deleteGroup(D),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(D=>{for(let I=0;I<D.length;I++)D[I].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(D){return D&&!!D.remove}_getOrCreateGroup(D){if(this.has(D))return this._getGroup(D);const I=[];return this._groups.set(this._ensureGroupKey(D),I),I}_getGroup(D){return(0,B.j0)(this._groups.get(this._ensureGroupKey(D)))}_deleteGroup(D){return this._groups.delete(this._ensureGroupKey(D))}_ensureGroupKey(D){return D||"_default_"}};(0,g._)([(0,j.Cb)({readOnly:!0})],$.prototype,"size",null),$=(0,g._)([(0,C.j)("esri.core.Handles")],$);const L=$},61996:(He,ve,p)=>{"use strict";p.d(ve,{I:()=>B});var g=p(17626),b=p(76898);let J=0;const B=C=>{let $=class extends C{constructor(...L){super(...L),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+J++})}};return $=(0,g._)([(0,b.j)("esri.core.Identifiable")],$),$};let j=class extends(B(class{})){};j=(0,g._)([(0,b.j)("esri.core.Identifiable")],j)},78498:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>b});var g=p(1036);class b{constructor(B,j){this._storage=new g.WJ,this._storage.maxSize=B,j&&this._storage.registerRemoveFunc("",j)}put(B,j){this._storage.put(B,j,1,1)}pop(B){return this._storage.pop(B)}get(B){return this._storage.get(B)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}},86810:(He,ve,p)=>{"use strict";p.d(ve,{wq:()=>w,eC:()=>Z});var g=p(17626),b=p(14517),J=p(62208),B=p(58817),j=p(31283);class C{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(O){const x=new C;return this._values.forEach((N,M)=>{O&&O.has(M)||x.set(M,(0,B.d9)(N.value),N.origin)}),x}get(O,x){x=this._normalizeOrigin(x);const N=this._values.get(O);return null==x||(null==N?void 0:N.origin)===x?null==N?void 0:N.value:void 0}originOf(O){var x,N;return null!=(x=null==(N=this._values.get(O))?void 0:N.origin)?x:j.s3.USER}keys(O){O=this._normalizeOrigin(O);const x=[...this._values.keys()];return null==O?x:x.filter(N=>{var M;return(null==(M=this._values.get(N))?void 0:M.origin)===O})}set(O,x,N){if((N=this._normalizeOrigin(N))===j.s3.DEFAULTS){const M=this._values.get(O);if(M&&null!=M.origin&&M.origin>N)return}this._values.set(O,new $(x,N))}delete(O,x){var N;null!=(x=this._normalizeOrigin(x))&&(null==(N=this._values.get(O))?void 0:N.origin)!==x||this._values.delete(O)}has(O,x){var N;return null!=(x=this._normalizeOrigin(x))?(null==(N=this._values.get(O))?void 0:N.origin)===x:this._values.has(O)}forEach(O){this._values.forEach(({value:x},N)=>O(x,N))}_normalizeOrigin(O){if(null!=O)return O===j.s3.DEFAULTS?O:j.s3.USER}}class ${constructor(O,x){this.value=O,this.origin=x}}var L=p(12590),D=p(29338),I=p(52323),W=p(36054),k=p(76898);const Z=T=>{let O=class extends T{constructor(...x){super(...x);const N=(0,J.j0)((0,I.vw)(this)),M=N.store,Q=new C;N.store=Q,(0,L.M)(N,M,Q)}read(x,N){(0,D.i)(this,x,N)}write(x={},N){return(0,W.c)(this,x,N)}toJSON(x){return this.write({},x)}static fromJSON(x,N){return X.call(this,x,N)}};return O=(0,g._)([(0,k.j)("esri.core.JSONSupport")],O),O.prototype.toJSON.isDefaultToJSON=!0,O};function X(T,O){if(!T)return null;if(T.declaredClass)throw new Error("JSON object is already hydrated");const x=new this;return x.read(T,O),x}let w=class extends(Z(b.Z)){};w=(0,g._)([(0,k.j)("esri.core.JSONSupport")],w)},93961:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>b});var g=p(1036);class b{constructor(B,j){this._storage=new g.WJ,this._storage.maxSize=B,j&&this._storage.registerRemoveFunc("",j)}put(B,j,C){this._storage.put(B,j,C,1)}pop(B){return this._storage.pop(B)}get(B){return this._storage.get(B)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(B){this._storage.maxSize=B}}},47996:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>X});var g=p(17626),b=p(26584),J=p(60330),B=p(10699),j=p(14889),C=p(77712),$=p(76898);const W="loaded",k=V=>{let w=class extends V{constructor(...T){super(...T),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(O=>{const x=this.load.bind(this);this.load=N=>{const M=new Promise((Q,z)=>{const ee=(0,B.$F)(N,z);this.destroyed&&z(new b.Z("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(Q,z).finally(()=>{ee&&ee.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const Q=this._loadController=new AbortController;x({signal:Q.signal}),(0,B.fu)(Q.signal,()=>{this._promiseProps.abort()})}return O(),M}})),this.when(()=>{this._set("loadStatus",W),this._loadController=null},O=>{this._set("loadStatus","failed"),this._set("loadError",O),this._loadController=null})}get loaded(){return this.loadStatus===W}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var T;return this.isFulfilled()||(this._set("loadError",new b.Z("load:cancelled","Cancelled")),null==(T=this._loadController)||T.abort()),this}};return(0,g._)([(0,C.Cb)({readOnly:!0})],w.prototype,"loaded",null),(0,g._)([(0,C.Cb)({readOnly:!0})],w.prototype,"loadError",void 0),(0,g._)([(0,C.Cb)({clonable:!1})],w.prototype,"loadStatus",void 0),(0,g._)([(0,C.Cb)({type:[j.Z],readOnly:!0})],w.prototype,"loadWarnings",null),w=(0,g._)([(0,$.j)("esri.core.Loadable")],w),w};let Z=class extends(k(J.D)){};var V;Z=(0,g._)([(0,$.j)("esri.core.Loadable")],Z),(V=Z||(Z={})).LoadableMixin=k,V.isLoadable=function w(T){return!(!T||!T.load)};const X=Z},63290:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>C});var g=p(59318),J=(p(8314),p(62208)),B=p(77275);const j={info:0,warn:1,error:2,none:3};class C{constructor(L){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=L.level&&(this.level=L.level),null!=L.writer&&(this.writer=L.writer),this._module=L.module,C._loggers[this.module]=this;const D=this.module.lastIndexOf(".");-1!==D&&(this._parent=C.getLogger(this.module.slice(0,D)))}get module(){return this._module}get parent(){return this._parent}error(...L){this._log("error","always",...L)}warn(...L){this._log("warn","always",...L)}info(...L){this._log("info","always",...L)}errorOnce(...L){this._log("error","once",...L)}warnOnce(...L){this._log("warn","once",...L)}infoOnce(...L){this._log("info","once",...L)}errorOncePerTick(...L){this._log("error","oncePerTick",...L)}warnOncePerTick(...L){this._log("warn","oncePerTick",...L)}infoOncePerTick(...L){this._log("info","oncePerTick",...L)}get test(){const L=this;return{loggedMessages:L._loggedMessages,clearLoggedWarnings:()=>L._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(L={}){const D=C._loggers;return C._loggers=L,D},set throttlingDisabled(L){C._throttlingDisabled=L}}}static getLogger(L){let D=C._loggers[L];return D||(D=new C({module:L})),D}_log(L,D,...I){if(this._matchLevel(L)){if("always"!==D&&!C._throttlingDisabled){const W=this._argsToKey(I),k=this._loggedMessages[L].get(W);if("once"===D&&null!=k||"oncePerTick"===D&&k&&k>=C._tickCounter)return;this._loggedMessages[L].set(W,C._tickCounter),C._scheduleTickCounterIncrement()}for(const W of g.Z.log.interceptors)if(W(L,this.module,...I))return;this._inheritedWriter()(L,this.module,...I)}}_parentWithMember(L,D){let I=this;for(;(0,J.pC)(I);){const W=I[L];if((0,J.pC)(W))return W;I=I.parent}return D}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(L,D,...I){console[L](`[${D}]`,...I)}_matchLevel(L){return j[this._parentWithMember("level",g.Z.log.level?g.Z.log.level:"warn")]<=j[L]}_argsToKey(...L){return(0,B.hP)(JSON.stringify(L,(I,W)=>"object"!=typeof W||Array.isArray(W)?W:"[Object]"))}static _scheduleTickCounterIncrement(){C._tickCounterScheduled||(C._tickCounterScheduled=!0,Promise.resolve().then(()=>{C._tickCounter++,C._tickCounterScheduled=!1}))}}C._loggers={},C._tickCounter=0,C._tickCounterScheduled=!1,C._throttlingDisabled=!1},88159:(He,ve,p)=>{"use strict";function g(j,C){for(const[$,L]of j)if(C(L,$))return!0;return!1}function J(j,C,$){const L=j.get(C);if(void 0!==L)return L;const D=$();return j.set(C,D),D}p.d(ve,{s1:()=>J,oE:()=>g})},1036:(He,ve,p)=>{"use strict";p.d(ve,{Xq:()=>j,WJ:()=>C});var B,$,g=p(62208),b=p(77029);($=B||(B={}))[$.ALL=0]="ALL",$[$.SOME=1]="SOME";class j{constructor(L,D,I){this._namespace=L,this._storage=D,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",I&&(this._storage.registerRemoveFunc(this._namespace,I),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(L,D,I,W=0){this._storage.put(this._namespace+L,D,I,W)}get(L){const D=this._storage.get(this._namespace+L);return void 0===D?++this._miss:++this._hit,D}pop(L){const D=this._storage.pop(this._namespace+L);return void 0===D?++this._miss:++this._hit,D}updateSize(L,D,I){this._storage.updateSize(this._namespace+L,D,I)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class C{constructor(L=10485760){this._maxSize=L,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new b.Z,this._users=new b.Z}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(L){this._users.push(L)}deregister(L){this._users.removeUnordered(L)}registerRemoveFunc(L,D){this._removeFuncs.push([L,D])}deregisterRemoveFunc(L){this._removeFuncs.filterInPlace(D=>D[0]!==L)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(L){this._maxSize=Math.max(L,0),this._checkSizeLimit()}put(L,D,I,W){const k=this._db.get(L);if(k&&(this._size-=k.size,this._db.delete(L),k.entry!==D&&this._notifyRemove(L,k.entry,B.ALL)),I>this._maxSize)return void this._notifyRemove(L,D,B.ALL);if(void 0===D)return void console.warn("Refusing to cache undefined entry ");if(!I||I<0)return void console.warn("Refusing to cache entry with invalid size "+I);const Z=1+Math.max(W,-3)- -3;this._db.set(L,{entry:D,size:I,lifetime:Z,lives:Z}),this._size+=I,this._checkSizeLimit()}updateSize(L,D,I){const W=this._db.get(L);if(W&&W.entry===D){for(this._size-=W.size;I>this._maxSize;){const k=this._notifyRemove(L,D,B.SOME);if(!((0,g.pC)(k)&&k>0))return void this._db.delete(L);I=k}W.size=I,this._size+=I,this._checkSizeLimit()}}pop(L){const D=this._db.get(L);if(D)return this._size-=D.size,this._db.delete(L),++this._hit,D.entry;++this._miss}get(L){const D=this._db.get(L);if(void 0!==D)return this._db.delete(L),D.lives=D.lifetime,this._db.set(L,D),++this._hit,D.entry;++this._miss}getStats(){const L={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},D={},I=new Array;this._db.forEach((Z,X)=>{const V=Z.lifetime;I[V]=(I[V]||0)+Z.size,this._users.forAll(w=>{const T=w.namespace;X.startsWith(T)&&(D[T]=(D[T]||0)+Z.size)})});const W={};this._users.forAll(Z=>{const X=Z.namespace;!isNaN(Z.hitRate)&&Z.hitRate>0?(D[X]=D[X]||0,W[X]=Math.round(100*Z.hitRate)+"%"):W[X]="0%"});const k=Object.keys(D);k.sort((Z,X)=>D[X]-D[Z]),k.forEach(Z=>L[Z]=Math.round(D[Z]/2**20)+"MB / "+W[Z]);for(let Z=I.length-1;Z>=0;--Z){const X=I[Z];X&&(L["Priority "+(Z+-3-1)]=Math.round(X/this.size*100)+"%")}return L}resetStats(){this._hit=this._miss=0,this._users.forAll(L=>L.resetHitRate())}clear(L){this._db.forEach((D,I)=>{I.startsWith(L)&&(this._size-=D.size,this._db.delete(I),this._notifyRemove(I,D.entry,B.ALL))})}clearAll(){this._db.forEach((L,D)=>this._notifyRemove(D,L.entry,B.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(L,D,I){let W;return this._removeFuncs.some(k=>{if(L.startsWith(k[0])){const Z=k[1](D,I);return"number"==typeof Z&&(W=Z),!0}return!1}),W}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[L,D]of this._db){if(this._db.delete(L),D.lives<=1){this._size-=D.size;const I=this._notifyRemove(L,D.entry,B.SOME);(0,g.pC)(I)&&I>0&&(this._size+=I,D.lives=D.lifetime,D.size=I,this._db.set(L,D))}else--D.lives,this._db.set(L,D);if(this._size<=.9*this.maxSize)return}}}},90888:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>J});var g=p(94113);class J{constructor(j,C,$){this.name=j,this.details=$,this.message=void 0,this instanceof J&&(this.message=C&&function b(B,j){return B.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(C,$){if(""===$)return"$";const L=(0,g.hS)($,j),D=null==L?"":L;if(void 0===D)throw new Error(`could not find key "${$}" in template`);return D.toString()})}(C,$)||"")}toString(){return"["+this.name+"]: "+this.message}}},99959:(He,ve,p)=>{"use strict";p.d(ve,{R:()=>T,w:()=>O});var g=p(17626),b=p(14517),J=p(62208),B=p(12590),j=p(58817),C=p(31283);class ${constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(C.kk),this._values=new Map,this.multipleOriginsSupported=!0}clone(N){const M=new $,Q=this._originStores[C.s3.DEFAULTS];Q&&Q.forEach((z,ee)=>{M.set(ee,(0,j.d9)(z),C.s3.DEFAULTS)});for(let z=C.s3.SERVICE;z<C.kk;z++){const ee=this._originStores[z];ee&&ee.forEach((le,oe)=>{N&&N.has(oe)||M.set(oe,(0,j.d9)(le),z)})}return M}get(N,M){const Q=void 0===M?this._values:this._originStores[M];return Q?Q.get(N):void 0}keys(N){const M=null==N?this._values:this._originStores[N];return M?[...M.keys()]:[]}set(N,M,Q=C.s3.USER){let z=this._originStores[Q];if(z||(z=new Map,this._originStores[Q]=z),z.set(N,M),!this._values.has(N)||(0,J.j0)(this._propertyOriginMap.get(N))<=Q){const ee=this._values.get(N);return this._values.set(N,M),this._propertyOriginMap.set(N,Q),ee!==M}return!1}delete(N,M=C.s3.USER){const Q=this._originStores[M];if(!Q)return;const z=Q.get(N);if(Q.delete(N),this._values.has(N)&&this._propertyOriginMap.get(N)===M){this._values.delete(N);for(let ee=M-1;ee>=0;ee--){const le=this._originStores[ee];if(le&&le.has(N)){this._values.set(N,le.get(N)),this._propertyOriginMap.set(N,ee);break}}}return z}has(N,M){const Q=void 0===M?this._values:this._originStores[M];return!!Q&&Q.has(N)}revert(N,M){for(;M>0&&!this.has(N,M);)--M;const Q=this._originStores[M],z=Q&&Q.get(N),ee=this._values.get(N);return this._values.set(N,z),this._propertyOriginMap.set(N,M),ee!==z}originOf(N){return this._propertyOriginMap.get(N)||C.s3.DEFAULTS}forEach(N){this._values.forEach(N)}}var L=p(29338),D=p(52323),I=p(76898);const W=x=>{let N=class extends x{constructor(...M){super(...M);const Q=(0,J.j0)((0,D.vw)(this)),z=Q.store,ee=new $;Q.store=ee,(0,B.M)(Q,z,ee)}read(M,Q){(0,L.i)(this,M,Q)}getAtOrigin(M,Q){const z=k(this),ee=(0,C.M9)(Q);if("string"==typeof M)return z.get(M,ee);const le={};return M.forEach(oe=>{le[oe]=z.get(oe,ee)}),le}originOf(M){return(0,C.x3)(this.originIdOf(M))}originIdOf(M){return k(this).originOf(M)}revert(M,Q){const z=k(this),ee=(0,C.M9)(Q),le=(0,D.vw)(this);let oe;oe="string"==typeof M?"*"===M?z.keys(ee):[M]:M,oe.forEach(ce=>{le.invalidate(ce),z.revert(ce,ee),le.commit(ce)})}};return N=(0,g._)([(0,I.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],N),N};function k(x){return(0,D.vw)(x).store}let Z=class extends(W(b.Z)){};Z=(0,g._)([(0,I.j)("esri.core.ReadOnlyMultiOriginJSONSupport")],Z);var X=p(36054);const V=x=>{let N=class extends x{constructor(...M){super(...M)}clear(M,Q="user"){return w(this).delete(M,(0,C.M9)(Q))}write(M={},Q){return(0,X.c)(this,M=M||{},Q),M}setAtOrigin(M,Q,z){(0,D.vw)(this).setAtOrigin(M,Q,(0,C.M9)(z))}removeOrigin(M){const Q=w(this),z=(0,C.M9)(M),ee=Q.keys(z);for(const le of ee)Q.originOf(le)===z&&Q.set(le,Q.get(le,z),C.s3.USER)}updateOrigin(M,Q){const z=w(this),ee=(0,C.M9)(Q),le=this.get(M);for(let oe=ee+1;oe<C.kk;++oe)z.delete(M,oe);z.set(M,le,ee)}toJSON(M){return this.write({},M)}};return N=(0,g._)([(0,I.j)("esri.core.WriteableMultiOriginJSONSupport")],N),N.prototype.toJSON.isDefaultToJSON=!0,N};function w(x){return(0,D.vw)(x).store}const T=x=>{let N=class extends(V(W(x))){constructor(...M){super(...M)}};return N=(0,g._)([(0,I.j)("esri.core.MultiOriginJSONSupport")],N),N};let O=class extends(T(b.Z)){};O=(0,g._)([(0,I.j)("esri.core.MultiOriginJSONSupport")],O)},27899:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>J});let J=(()=>{class B{constructor(C,$,L,D=1,I=0){if(this.ctor=C,this.acquireFunction=$,this.releaseFunction=L,this.allocationSize=D,this._pool=new Array(I),this._initialSize=I,this.ctor)for(let W=0;W<I;W++)this._pool[W]=new this.ctor;this.allocationSize=Math.max(D,1)}destroy(){this.prune(0)}acquire(...C){let $;if(B.test.disabled)$=new this.ctor;else{if(0===this._pool.length){const L=this.allocationSize;for(let D=0;D<L;D++)this._pool[D]=new this.ctor}$=this._pool.pop()}return this.acquireFunction?this.acquireFunction($,...C):function b(B){return B&&B.acquire&&"function"==typeof B.acquire}($)&&$.acquire(...C),$}release(C){C&&!B.test.disabled&&(this.releaseFunction?this.releaseFunction(C):function g(B){return B&&B.release&&"function"==typeof B.release}(C)&&C.release(),this._pool.push(C))}prune(C=this._initialSize){if(!(C>=this._pool.length)){for(let $=C;$<this._pool.length;++$)this._dispose(this._pool[$]);this._pool.length=C}}_dispose(C){C.dispose&&"function"==typeof C.dispose&&C.dispose()}}return B.test={disabled:!1},B})()},73362:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>b});class b{constructor(B,j=29){this.name=B,this._counter=0,this._items=new Array(j)}record(B){this._items[++this._counter%this._items.length]=B}get median(){return this._items.slice().sort((B,j)=>B-j)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((B,j)=>B+j,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}},77029:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>C});var b,g=p(85931);!function(L){const D=(Z,X,V,w)=>{let T=X,O=X;const x=V>>>1,N=Z[T-1];for(;O<=x;){O=T<<1,O<V&&w(Z[O-1],Z[O])<0&&++O;const M=Z[O-1];if(w(M,N)<=0)break;Z[T-1]=M,T=O}Z[T-1]=N},I=(Z,X)=>Z<X?-1:Z>X?1:0;L.sort=function W(Z,X,V,w){void 0===X&&(X=0),void 0===V&&(V=Z.length),void 0===w&&(w=I);for(let O=V>>>1;O>X;O--)D(Z,O,V,w);const T=X+1;for(let O=V-1;O>X;O--){const x=Z[X];Z[X]=Z[O],Z[O]=x,D(Z,T,O,w)}},L.iterableSort=function*k(Z,X,V,w){void 0===X&&(X=0),void 0===V&&(V=Z.length),void 0===w&&(w=I);for(let O=V>>>1;O>X;O--)D(Z,O,V,w),yield;const T=X+1;for(let O=V-1;O>X;O--){const x=Z[X];Z[X]=Z[O],Z[O]=x,D(Z,T,O,w),yield}}}(b||(b={}));const J=b;class C{constructor(D){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new g.SO,D&&(D.initialSize&&(this.data=new Array(D.initialSize)),D.allocator&&(this._allocator=D.allocator),void 0!==D.deallocator&&(this._deallocator=D.deallocator),D.shrink&&(this._shrink=()=>$(this)))}toArray(){return this.data.slice(0,this.length)}filter(D){const I=new Array;for(let W=0;W<this._length;W++){const k=this.data[W];D(k)&&I.push(k)}return I}getItemAt(D){if(!(D<0||D>=this._length))return this.data[D]}get length(){return this._length}set length(D){if(D>this._length){if(this._allocator){for(;this._length<D;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=D}else{if(this._deallocator)for(let I=D;I<this._length;++I)this.data[I]=this._deallocator(this.data[I]);this._length=D,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(D){this.data[this._length++]=D}pushArray(D,I=D.length){for(let W=0;W<I;W++)this.data[this._length++]=D[W]}fill(D,I){for(let W=0;W<I;W++)this.data[this._length++]=D}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const D=this.data[this._length];return++this._length,D}unshift(D){this.data.unshift(D),this._length++,$(this)}pop(){if(0===this.length)return;const D=this.data[this.length-1];return this.length=this.length-1,this._shrink(),D}remove(D){const I=(0,g.cq)(this.data,D,this.length,this._hint);if(-1!==I)return this.data.splice(I,1),this.length=this.length-1,D}removeUnordered(D){const I=(0,g.e$)(this.data,D,this.length,this._hint);return void 0!==I&&(this.length=this.length-1),this._shrink(),I}removeUnorderedIndex(D){if(!(D>=this.length||D<0))return this.swapElements(D,this.length-1),this.pop()}removeUnorderedMany(D,I=D.length,W){this.length=(0,g.FY)(this.data,D,this.length,I,this._hint,W),this._shrink()}front(){if(0!==this.length)return this.data[0]}back(){if(0!==this.length)return this.data[this.length-1]}swapElements(D,I){D>=this.length||I>=this.length||D===I||([this.data[D],this.data[I]]=[this.data[I],this.data[D]])}sort(D){J.sort(this.data,0,this.length,D)}iterableSort(D){return J.iterableSort(this.data,0,this.length,D)}some(D,I){for(let W=0;W<this.length;++W)if(D.call(I,this.data[W],W,this.data))return!0;return!1}filterInPlace(D,I){let W=0;for(let k=0;k<this._length;++k){const Z=this.data[k];D.call(I,Z,k,this.data)&&(this.data[k]=this.data[W],this.data[W]=Z,W++)}if(this._deallocator)for(let k=W;k<this._length;k++)this.data[k]=this._deallocator(this.data[k]);return this._length=W,this._shrink(),this}forAll(D,I){const W=this.length,k=this.data;for(let Z=0;Z<W;++Z)D.call(I,k[Z],Z,k)}forEach(D,I){for(let W=0;W<this.length;++W)D.call(I,this.data[W],W,this.data)}map(D,I){const W=new Array(this.length);for(let k=0;k<this.length;++k)W[k]=D.call(I,this.data[k],k,this.data);return W}reduce(D,I){let W=I;for(let k=0;k<this.length;++k)W=D(W,this.data[k],k,this.data);return W}has(D){const I=this.length,W=this.data;for(let k=0;k<I;++k)if(W[k]===D)return!0;return!1}}function $(L){L.data.length>1.5*L.length&&(L.data.length=Math.floor(1.1*L.length))}},60330:(He,ve,p)=>{"use strict";p.d(ve,{D:()=>D,v:()=>L});var C,I,g=p(17626),b=p(14517),J=p(62208),B=p(10699),j=p(76898);(I=C||(C={}))[I.PENDING=0]="PENDING",I[I.RESOLVED=1]="RESOLVED",I[I.REJECTED=2]="REJECTED";class ${constructor(W){this.instance=W,this._resolver=(0,B.dD)(),this._status=C.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=C.RESOLVED,this._cleanUp()},()=>{this._status=C.REJECTED,this._cleanUp()})}addResolvingPromise(W){this._resolvingPromises.push(W),this._tryResolve()}isResolved(){return this._status===C.RESOLVED}isRejected(){return this._status===C.REJECTED}isFulfilled(){return this._status!==C.PENDING}abort(){this._resolver.reject((0,B.zE)())}when(W,k){return this._resolver.promise.then(W,k)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const W=(0,B.dD)(),k=[...this._resolvingPromises,(0,J.j0)(W.promise)],Z=this._allPromise=Promise.all(k);Z.then(()=>{this.isFulfilled()||this._allPromise!==Z||this._resolver.resolve(this.instance)},X=>{this.isFulfilled()||this._allPromise!==Z||(0,B.D_)(X)||this._resolver.reject(X)}),W.resolve()}}const L=I=>{let W=class extends I{constructor(...k){super(...k),this._promiseProps=new $(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(k,Z){return new Promise((X,V)=>{this._promiseProps.when(X,V)}).then(k,Z)}catch(k){return this.when(null,k)}addResolvingPromise(k){k&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in k?k.when():k)}};return W=(0,g._)([(0,j.j)("esri.core.Promise")],W),W};let D=class extends(L(b.Z)){};D=(0,g._)([(0,j.j)("esri.core.Promise")],D)},35133:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>b});var g=p(62208);class b{constructor(B=(j=>j.values().next().value)){this._peeker=B,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(0===this._items.size)return;let B;for(B of this._items);return B}peek(){if(0!==this._items.size)return this._peeker(this._items)}push(B){this.contains(B)||this._items.add(B)}contains(B){return this._items.has(B)}pop(){if(0===this.length)return;const B=this.peek();return this._items.delete((0,g.j0)(B)),B}popLast(){if(0===this.length)return;const B=this.last();return this._items.delete((0,g.j0)(B)),B}remove(B){this._items.delete(B)}filter(B){return this._items.forEach(j=>{B(j)||this._items.delete(j)}),this}}},4619:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>g});class g{constructor(J=1){this._seed=J}set seed(J){this._seed=null==J?Math.random()*g._m:J}getInt(){return this._seed=(g._a*this._seed+g._c)%g._m,this._seed}getFloat(){return this.getInt()/(g._m-1)}getIntRange(J,B){return Math.round(this.getFloatRange(J,B))}getFloatRange(J,B){const j=B-J;return J+this.getInt()/g._m*j}}g._m=2147483647,g._a=48271,g._c=0},10349:(He,ve,p)=>{"use strict";p.d(ve,{G:()=>b});var g=p(26584);class b{constructor(B,j,C=""){this.major=B,this.minor=j,this._context=C}lessThan(B,j){return this.major<B||B===this.major&&this.minor<j}since(B,j){return!this.lessThan(B,j)}validate(B){if(this.major!==B.major)throw new g.Z((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:B})}clone(){return new b(this.major,this.minor,this._context)}static parse(B,j=""){const[C,$]=B.split("."),L=/^\s*\d+\s*$/;if(!C||!C.match||!C.match(L))throw new g.Z((j&&j+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:B});if(!$||!$.match||!$.match(L))throw new g.Z((j&&j+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:B});const D=parseInt(C,10),I=parseInt($,10);return new b(D,I,j)}}},14889:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>b});var g=p(90888);class b extends g.Z{constructor(B,j,C){if(super(B,j,C),!(this instanceof b))return new b(B,j,C)}}b.prototype.type="warning"},31283:(He,ve,p)=>{"use strict";p.d(ve,{s3:()=>b,kk:()=>J,x3:()=>j,Wm:()=>$,M9:()=>B});var b,I,g=p(62208);(I=b||(b={}))[I.DEFAULTS=0]="DEFAULTS",I[I.COMPUTED=1]="COMPUTED",I[I.SERVICE=2]="SERVICE",I[I.PORTAL_ITEM=3]="PORTAL_ITEM",I[I.WEB_SCENE=4]="WEB_SCENE",I[I.WEB_MAP=5]="WEB_MAP",I[I.USER=6]="USER";const J=b.USER+1;function B(I){switch(I){case"defaults":return b.DEFAULTS;case"service":return b.SERVICE;case"portal-item":return b.PORTAL_ITEM;case"web-scene":return b.WEB_SCENE;case"web-map":return b.WEB_MAP;case"user":return b.USER}}function j(I){switch(I){case b.DEFAULTS:return"defaults";case b.SERVICE:return"service";case b.PORTAL_ITEM:return"portal-item";case b.WEB_SCENE:return"web-scene";case b.WEB_MAP:return"web-map";case b.USER:return"user"}return(0,g.j0)(void 0)}function $(I){return j(I)}},83960:(He,ve,p)=>{"use strict";p.d(ve,{B:()=>b});var g=p(77712);function b(J,B){const j=B?Sr(_t({},B),{source:J}):J;return(0,g.Cb)({aliasOf:j})}},66656:(He,ve,p)=>{"use strict";p.d(ve,{p:()=>$});var g=p(90912),b=p(34117);const J=Object.prototype.toString;function B(L){const D="__accessorMetadata__"in L?(0,g.se)(L):L;return function(...I){if(I.push(D),"number"==typeof I[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return j.apply(this,I)}}function j(L,D,I,W){(0,b.VZ)(L,D).cast=W}function $(...L){if(3!==L.length||"string"!=typeof L[1])return 1===L.length&&"[object Function]"===J.call(L[0])?B(L[0]):1===L.length&&"string"==typeof L[0]?function C(L){return function(D,I){(0,b.VZ)(D,L).cast=D[I]}}(L[0]):void 0}},55342:(He,ve,p)=>{"use strict";p.d(ve,{J:()=>J});var g=p(2076),b=p(77712);function J(B,j={}){var C;const $=B instanceof g.X?B:new g.X(B,j),L={type:null==(C=null==j?void 0:j.ignoreUnknown)||C?$.apiValues:String,json:{type:$.jsonValues,read:(null==j||!j.readOnly)&&{reader:$.read},write:{writer:$.write}}};return void 0!==(null==j?void 0:j.readOnly)&&(L.readOnly=!!j.readOnly),void 0!==(null==j?void 0:j.default)&&(L.json.default=j.default),void 0!==(null==j?void 0:j.name)&&(L.json.name=j.name),(0,b.Cb)(L)}},77712:(He,ve,p)=>{"use strict";p.d(ve,{Eg:()=>D,Cb:()=>C,CJ:()=>$});var g=p(63290),b=p(90912),J=p(34595),B=p(34117),j=p(82255);function C(I={}){return(W,k)=>{if(W===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${W.name}.${k}. Accessor does not support static properties.`);const Z=Object.getOwnPropertyDescriptor(W,k),X=(0,B.VZ)(W,k);Z&&(Z.get||Z.set?(X.get=Z.get||X.get,X.set=Z.set||X.set):"value"in Z&&("value"in I&&g.Z.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${k}" on "${W.constructor.name}" already defined in the metadata`,I),X.value=I.value=Z.value)),null!=I.readOnly&&(X.readOnly=I.readOnly);const V=I.aliasOf;if(V){const O="string"==typeof V?V:V.source,x="string"==typeof V?null:!0===V.overridable;let N;X.dependsOn=[O],X.get=function(){let M=(0,J.U2)(this,O);if("function"==typeof M){N||(N=O.split(".").slice(0,-1).join("."));const Q=(0,J.U2)(this,N);Q&&(M=M.bind(Q))}return M},X.readOnly||(X.set=x?function(M){void 0!==M?this._override(k,M):this._clearOverride(k)}:function(M){(0,j.t)(this,O,M)})}const w=I.type,T=I.types;X.cast||(w?X.cast=function L(I){let W=0,k=I;if((0,b.AY)(I))return(0,b.sY)(I);for(;Array.isArray(k)&&1===k.length&&"string"!=typeof k[0]&&"number"!=typeof k[0];)k=k[0],W++;const Z=k;if((0,b.gB)(Z))return 0===W?(0,b.i$)(Z):(0,b.Iu)((0,b.i$)(Z),W);if(1===W)return(0,b.rY)(Z);if(W>1)return(0,b.di)(Z,W);return I.from?I.from:(0,b.se)(I)}(w):T&&(X.cast=Array.isArray(T)?(0,b.Ls)((0,b.N7)(T[0])):(0,b.N7)(T))),I.range&&(X.cast=D(X.cast,I.range)),(0,B.tz)(X,I)}}function $(I,W,k){const Z=(0,B.VZ)(I,k);Z.json||(Z.json={});let X=Z.json;return void 0!==W&&(X.origins||(X.origins={}),X.origins[W]||(X.origins[W]={}),X=X.origins[W]),X}function D(I,W){return k=>{let Z=+I(k);return null!=W.step&&(Z=Math.round(Z/W.step)*W.step),null!=W.min&&(Z=Math.max(W.min,Z)),null!=W.max&&(Z=Math.min(W.max,Z)),Z}}},68653:(He,ve,p)=>{"use strict";p.d(ve,{r:()=>b});var g=p(77712);function b(J,B,j){let C,$;return void 0===B||Array.isArray(B)?($=J,j=B,C=[void 0]):($=B,C=Array.isArray(J)?J:[J]),(L,D)=>{const I=L.constructor.prototype;C.forEach(W=>{const k=(0,g.CJ)(L,W,$);k.read&&"object"==typeof k.read||(k.read={}),k.read.reader=I[D],j&&(k.read.source=(k.read.source||[]).concat(j))})}}},61039:(He,ve,p)=>{"use strict";function g(b){return(J,B)=>{J[B]=b}}p.d(ve,{c:()=>g})},76898:(He,ve,p)=>{"use strict";p.d(ve,{j:()=>L}),p(8314);var b=p(44648),J=p(34117),B=p(36082),j=p(33794);const C=new Set,$=new Set;function L(W){return k=>{k.prototype.declaredClass=W,function I(W){const Z=(0,J.JT)(W.prototype).properties,X={};for(const V of Object.getOwnPropertyNames(Z)){const w=Z[V];(0,j.OM)(w),X[V]={enumerable:!0,configurable:!0,get:D(V,w),set(T){const O=this.__accessor__;if(void 0!==O){if(!Object.isFrozen(this)){if(O.initialized&&w.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${V}' of ${this.declaredClass}`);if(O.lifecycle===b.F.CONSTRUCTED&&w.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${V}' of ${this.declaredClass}`);O.set(V,T)}}else Object.defineProperty(this,V,{enumerable:!0,configurable:!0,writable:!0,value:T})}}}Object.defineProperties(W.prototype,X)}(k);const Z=[],X=[];let V=k.prototype;for(;V;)V.hasOwnProperty("initialize")&&!C.has(V.initialize)&&(C.add(V.initialize),Z.push(V.initialize)),V.hasOwnProperty("destroy")&&!$.has(V.destroy)&&($.add(V.destroy),X.push(V.destroy)),V=Object.getPrototypeOf(V);C.clear(),$.clear();class w extends k{constructor(...O){if(super(...O),this.constructor===w&&"function"==typeof this.postscript){if(Z.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let x=Z.length-1;x>=0;x--)Z[x].call(this)}}),X.length){let x=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!x){x=!0;for(let N=0;N<X.length;N++)X[N].call(this)}}})}this.postscript(...O)}}}return w.__accessorMetadata__=(0,J.JT)(k.prototype),w.prototype.declaredClass=W,w}}function D(W,k){return null==k.get?function(){const Z=this.__accessor__.properties.get(W);if(void 0===Z)return;(0,B.it)(Z);const X=this.__accessor__.store;return X.has(W)?X.get(W):Z.metadata.value}:function(){const Z=this.__accessor__.properties.get(W);if(void 0!==Z)return Z.getComputed()}}},99433:(He,ve,p)=>{"use strict";p.d(ve,{c:()=>b});var g=p(77712);function b(J,B,j){let C,$;return void 0===B?($=J,C=[void 0]):"string"!=typeof B?($=J,C=[void 0],j=B):($=B,C=Array.isArray(J)?J:[J]),(L,D)=>{const I=L.constructor.prototype;for(const W of C){const k=(0,g.CJ)(L,W,$);k.write&&"object"==typeof k.write||(k.write={}),j&&(k.write.target=j),k.write.writer=I[D]}}}},12590:(He,ve,p)=>{"use strict";p.d(ve,{M:()=>b});var g=p(31283);function b(J,B,j){B.keys().forEach($=>{j.set($,B.get($),g.s3.DEFAULTS)}),Object.keys(J.metadatas).forEach($=>{J.internalGet($)&&j.set($,J.internalGet($),g.s3.DEFAULTS)})}},84682:(He,ve,p)=>{"use strict";p.d(ve,{Hg:()=>X,uD:()=>k,V7:()=>Z});var g=p(14517),b=p(48701),J=p(62208),B=p(52323);const j=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function C(w){return w instanceof g.Z}function $(w){return w instanceof b.Z?Object.keys(w.items):C(w)?(0,B.vw)(w).keys():w?Object.keys(w):[]}function L(w,T){return w instanceof b.Z?w.items[T]:w[T]}function I(w){return w?w.declaredClass:null}function W(w,T){const O=w.diff;if(O&&"function"==typeof O)return O(w,T);const x=$(w),N=$(T);if(0===x.length&&0===N.length)return;if(!x.length||!N.length||function D(w,T){return!(!Array.isArray(w)||!Array.isArray(T))&&w.length!==T.length}(w,T))return{type:"complete",oldValue:w,newValue:T};const M=N.filter(ce=>-1===x.indexOf(ce)),Q=x.filter(ce=>-1===N.indexOf(ce)),z=x.filter(ce=>N.indexOf(ce)>-1&&L(w,ce)!==L(T,ce)).concat(M,Q).sort(),ee=I(w);if(ee&&j.indexOf(ee)>-1&&z.length)return{type:"complete",oldValue:w,newValue:T};let le;const oe=C(w)&&C(T);for(const ce of z){const re=L(w,ce),K=L(T,ce);let ae;(oe||"function"!=typeof re&&"function"!=typeof K)&&re!==K&&(null==re&&null==K||(ae=O&&O[ce]&&"function"==typeof O[ce]?O[ce](re,K):"object"==typeof re&&"object"==typeof K&&I(re)===I(K)?W(re,K):{type:"complete",oldValue:re,newValue:K},(0,J.pC)(ae)&&((0,J.pC)(le)?le.diff[ce]=ae:le={type:"partial",diff:{[ce]:ae}})))}return le}function k(w,T){if((0,J.Wi)(w))return!1;const O=T.split(".");let x=w;for(const N of O){if("complete"===x.type)return!0;if("partial"!==x.type)return!1;{const M=x.diff[N];if(!M)return!1;x=M}}return!0}function Z(w,T){for(const O of T)if(k(w,O))return!0;return!1}function X(w,T){if(!("function"==typeof w||"function"==typeof T||(0,J.Wi)(w)&&(0,J.Wi)(T)))return(0,J.Wi)(w)||(0,J.Wi)(T)||"object"==typeof w&&"object"==typeof T&&I(w)!==I(T)?{type:"complete",oldValue:w,newValue:T}:W(w,T)}},90912:(He,ve,p)=>{"use strict";p.d(ve,{z8:()=>K,rY:()=>Q,Ls:()=>M,TJ:()=>w,vU:()=>D,sY:()=>de,di:()=>le,Iu:()=>ee,q9:()=>L,i$:()=>ce,N7:()=>re,Zs:()=>$,se:()=>N,AY:()=>se,gB:()=>oe,V5:()=>ae}),p(8314);var b=p(63290),J=p(88159);const B=b.Z.getLogger("esri.core.Accessor");function j(te){return null==te?te:new Date(te)}function C(te){return null==te?te:!!te}function $(te){return null==te?te:te.toString()}function L(te){return null==te?te:(te=parseFloat(te),isNaN(te)?0:te)}function D(te){return null==te?te:Math.round(parseFloat(te))}function I(te){return te&&te.constructor&&void 0!==te.constructor.__accessorMetadata__}function W(te,Ee){return null!=Ee&&te&&!(Ee instanceof te)}function k(te){return te&&"isCollection"in te}function Z(te){return te&&te.Type?"function"==typeof te.Type?te.Type:te.Type.base:null}function V(te,Ee){return!!I(Ee)&&(B.error("Accessor#set","Assigning an instance of '"+(Ee.declaredClass||"unknown")+"' which is not a subclass of '"+T(te)+"'"),!0)}function w(te,Ee){return null==Ee?Ee:k(te)?function X(te,Ee){if(!Ee||!Ee.constructor||!k(Ee.constructor))return V(te,Ee)?Ee:new te(Ee);const fe=Z(te.prototype.itemType),be=Z(Ee.constructor.prototype.itemType);return fe?be?fe===be?Ee:fe.prototype.isPrototypeOf(be.prototype)?new te(Ee):(V(te,Ee),Ee):new te(Ee):Ee}(te,Ee):W(te,Ee)?V(te,Ee)?Ee:new te(Ee):Ee}function T(te){return te&&te.prototype&&te.prototype.declaredClass||"unknown"}const O=new WeakMap;function x(te){switch(te){case Number:return L;case K:return D;case Boolean:return C;case String:return $;case Date:return j;default:return(0,J.s1)(O,te,()=>w.bind(null,te))}}function N(te,Ee){const fe=x(te);return 1===arguments.length?fe:fe(Ee)}function M(te,Ee,fe){return 1===arguments.length?M.bind(null,te):Ee&&(Array.isArray(Ee)?Ee.map(be=>te(be,fe)):[te(Ee,fe)])}function Q(te,Ee){return 1===arguments.length?M(N.bind(null,te)):M(N.bind(null,te),Ee)}function z(te,Ee,fe){return 0!==Ee&&Array.isArray(fe)?fe.map(be=>z(te,Ee-1,be)):te(fe)}function ee(te,Ee,fe){if(2===arguments.length)return ee.bind(null,te,Ee);if(!fe)return fe;let be=Ee,ye=fe=z(te,Ee,fe);for(;be>0&&Array.isArray(ye);)be--,ye=ye[0];if(void 0!==ye)for(let Ke=0;Ke<be;Ke++)fe=[fe];return fe}function le(te,Ee,fe){return 2===arguments.length?ee(N.bind(null,te),Ee):ee(N.bind(null,te),Ee,fe)}function oe(te){return!!Array.isArray(te)&&!te.some(Ee=>{const fe=typeof Ee;return!("string"===fe||"number"===fe||"function"===fe&&te.length>1)})}function ce(te,Ee){if(2===arguments.length)return ce(te).call(null,Ee);const fe=new Set,be=te.filter(he=>"function"!=typeof he),ye=te.filter(he=>"function"==typeof he);for(const he of te)"string"!=typeof he&&"number"!=typeof he||fe.add(he);let Ke=null,Ue=null;return(he,Me)=>{if(null==he)return he;const Le=typeof he,Je="string"===Le||"number"===Le;return Je&&(fe.has(he)||ye.some(Oe=>"string"===Le&&Oe===String||"number"===Le&&Oe===Number))||"object"===Le&&ye.some(Oe=>!W(he,Oe))?he:(Je&&be.length?(Ke||(Ke=be.map(Oe=>"string"==typeof Oe?`'${Oe}'`:`${Oe}`).join(", ")),B.error("Accessor#set",`'${he}' is not a valid value for this property, only the following values are valid: ${Ke}`)):"object"==typeof he&&ye.length?(Ue||(Ue=ye.map(Oe=>T(Oe)).join(", ")),B.error("Accessor#set",`'${he}' is not a valid value for this property, value must be one of ${Ue}`)):B.error("Accessor#set",`'${he}' is not a valid value for this property`),Me&&(Me.valid=!1),null)}}function re(te,Ee){if(2===arguments.length)return re(te).call(null,Ee);const fe={},be=[],ye=[];for(const Me in te.typeMap){const Le=te.typeMap[Me];fe[Me]=N(Le),be.push(T(Le)),ye.push(Me)}const Ke=()=>`'${be.join("', '")}'`,Ue=()=>`'${ye.join("', '")}'`,he="string"==typeof te.key?Me=>Me[te.key]:te.key;return Me=>{if(te.base&&!W(te.base,Me)||null==Me)return Me;const Le=he(Me)||te.defaultKeyValue,Je=fe[Le];if(!Je)return B.error("Accessor#set",`Invalid property value, value needs to be one of ${Ke()}, or a plain object that can autocast (having .type = ${Ue()})`),null;if(!W(te.typeMap[Le],Me))return Me;if("string"==typeof te.key&&!I(Me)){const Oe={};for(const xe in Me)xe!==te.key&&(Oe[xe]=Me[xe]);return Je(Oe)}return Je(Me)}}class K{}const ae={native:te=>({type:"native",value:te}),array:te=>({type:"array",value:te}),oneOf:te=>({type:"one-of",values:te})};function se(te){if(!te||!("type"in te))return!1;switch(te.type){case"native":case"array":case"one-of":return!0}return!1}function de(te){switch(te.type){case"native":return N(te.value);case"array":return M(de(te.value));case"one-of":return function ue(te){let Ee=null;return(fe,be)=>ie(fe,te)?fe:(null==Ee&&(Ee=pe(te)),B.error("Accessor#set",`Invalid property value, value needs to be of type ${Ee}`),be&&(be.valid=!1),null)}(te);default:return null}}function pe(te){switch(te.type){case"native":switch(te.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case K:return"integer";case Date:return"date";default:return T(te.value)}case"array":return`array of ${pe(te.value)}`;case"one-of":{const Ee=te.values.map(fe=>pe(fe));return`one of ${Ee.slice(0,Ee.length-1)} or ${Ee[Ee.length-1]}`}}return"unknown"}function ie(te,Ee){if(null==te)return!0;switch(Ee.type){case"native":switch(Ee.value){case Number:case K:return"number"==typeof te;case Boolean:return"boolean"==typeof te;case String:return"string"==typeof te}return te instanceof Ee.value;case"array":return!!Array.isArray(te)&&!te.some(fe=>!ie(fe,Ee.value));case"one-of":return Ee.values.some(fe=>ie(te,fe))}}},33794:(He,ve,p)=>{"use strict";p.d(ve,{hk:()=>W,HS:()=>D,Ah:()=>I,OM:()=>T});var g=p(90912),J=p(383);function j(O){O.name&&(O.read&&"object"==typeof O.read?void 0===O.read.source&&(O.read.source=O.name):O.read={source:O.name},O.write&&"object"==typeof O.write?void 0===O.write.target&&(O.write.target=O.name):O.write={target:O.name})}function C(O){"boolean"==typeof O.read?O.read={enabled:O.read}:"function"==typeof O.read?O.read={enabled:!0,reader:O.read}:O.read&&"object"==typeof O.read&&void 0===O.read.enabled&&(O.read.enabled=!0)}function $(O){"boolean"==typeof O.write?O.write={enabled:O.write}:"function"==typeof O.write?O.write={enabled:!0,writer:O.write}:O.write&&"object"==typeof O.write&&void 0===O.write.enabled&&(O.write.enabled=!0)}var L=p(23025);function D(O,x){return W(O,"read",x)}function I(O,x){return W(O,"write",x)}function W(O,x,N){let M=O&&O.json;if(O&&O.json&&O.json.origins&&N){const Q=O.json.origins[N.origin];Q&&("any"===x||x in Q)&&(M=Q)}return M}function X(O){return O.type?V(O):w(O)}function V(O){if(!O.type)return;let x=0,N=O.type;for(;Array.isArray(N)&&!(0,g.gB)(N);)N=N[0],x++;return{type:N,ndimArray:x}}function w(O){if(!O.types)return;let x=0,N=O.types;for(;Array.isArray(N);)N=N[0],x++;return{types:N,ndimArray:x}}function T(O){(function B(O){if(O.json||(O.json={}),C(O.json),$(O.json),j(O.json),O.json.origins)for(const x in O.json.origins)C(O.json.origins[x]),$(O.json.origins[x]),j(O.json.origins[x]);return!0})(O)&&(function b(O){if(O.json&&O.json.origins){const x=O.json.origins,N={"web-document":["web-scene","web-map"]};for(const M in N)if(x[M]){const Q=x[M];N[M].forEach(z=>{x[z]=Q}),delete x[M]}}}(O),function k(O){const x=function Z(O){return O.json.types?w(O.json):O.type?V(O):w(O)}(O);if(O.json.origins)for(const N in O.json.origins){const M=O.json.origins[N],Q=M.types?X(M):x;(0,J.U)(Q,M,!1),M.types&&!M.write&&O.json.write&&O.json.write.enabled&&(M.write=_t({},O.json.write)),(0,L.U)(Q,M)}(0,J.U)(x,O.json,!0),(0,L.U)(x,O.json)}(O))}},383:(He,ve,p)=>{"use strict";p.d(ve,{U:()=>$,d:()=>L});var g=p(63290),b=p(94113),J=p(14889),B=p(34117),j=p(94056);const C=g.Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function $(N,M,Q){var z,ee;N&&(!Q&&!M.read||null!=(z=M.read)&&z.reader||!1===(null==(ee=M.read)?void 0:ee.enabled)||function V(N){return"types"in N?T(N.types):w(N.type)}(N)&&(0,b.RB)("read.reader",L(N),M))}function L(N){var M;const Q=null!=(M=N.ndimArray)?M:0;if(Q>1)return function k(N){var M;const Q=D(N),z=W.bind(null,Q),ee=null!=(M=N.ndimArray)?M:0;return(le,oe,ce)=>{if(null==le)return le;le=z(le,ce,ee);let re=ee,K=le;for(;re>0&&Array.isArray(K);)re--,K=K[0];if(void 0!==K)for(let ae=0;ae<re;ae++)le=[le];return le}}(N);if(1===Q)return Z(N);if("type"in N&&X(N.type)){var z,ee;const le=null==(z=N.type.prototype)||null==(ee=z.itemType)?void 0:ee.Type,oe=Z("function"==typeof le?{type:le}:{types:le});return(ce,re,K)=>{const ae=oe(ce,re,K);return ae&&new N.type(ae)}}return D(N)}function D(N){return"type"in N?function I(N){return N.prototype.read?(M,Q,z)=>{if(null==M)return M;const ee=typeof M;if("object"!==ee)return void C.error(`Expected JSON value of type 'object' to deserialize type '${N.prototype.declaredClass}', but got '${ee}'`);const le=new N;return le.read(M,z),le}:N.fromJSON}(N.type):function O(N){var M;let Q=null;const z=null!=(M=N.errorContext)?M:"type";return(ee,le,oe)=>{if(null==ee)return ee;const ce=typeof ee;if("object"!==ce)return void C.error(`Expected JSON value of type 'object' to deserialize, but got '${ce}'`);Q||(Q=function x(N){const M={};for(const ee in N.typeMap){var Q,z;const le=N.typeMap[ee],oe=(0,B.JT)(le.prototype);if("function"==typeof N.key)continue;const ce=oe.properties[N.key];if(!ce)continue;null!=(Q=ce.json)&&Q.type&&Array.isArray(ce.json.type)&&1===ce.json.type.length&&"string"==typeof ce.json.type[0]&&(M[ce.json.type[0]]=le);const re=null==(z=ce.json)?void 0:z.write;if(!re||!re.writer){M[ee]=le;continue}const K=re.target,ae="string"==typeof K?K:N.key,se={};re.writer(ee,se,ae),se[ae]&&(M[se[ae]]=le)}return M}(N));const re=N.key;if("string"!=typeof re)return;const K=ee[re],ae=K?Q[K]:N.defaultKeyValue?N.typeMap[N.defaultKeyValue]:void 0;if(!ae){const de=`Type '${K||"unknown"}' is not supported`;return oe&&oe.messages&&ee&&oe.messages.push(new J.Z(`${z}:unsupported`,de,{definition:ee,context:oe})),void C.error(de)}const se=new ae;return se.read(ee,oe),se}}(N.types)}function W(N,M,Q,z){return 0!==z&&Array.isArray(M)?M.map(ee=>W(N,ee,Q,z-1)):N(M,void 0,Q)}function Z(N){const M=D(N);return(Q,z,ee)=>{if(null==Q)return Q;if(Array.isArray(Q)){const oe=[];for(const ce of Q){const re=M(ce,void 0,ee);void 0!==re&&oe.push(re)}return oe}const le=M(Q,void 0,ee);return void 0!==le?[le]:void 0}}function X(N){if(!(0,j.u)(N))return!1;const M=N.prototype.itemType;return!(!M||!M.Type)&&("function"==typeof M.Type?w(M.Type):T(M.Type))}function w(N){return!Array.isArray(N)&&!!N&&N.prototype&&("read"in N.prototype||"fromJSON"in N||X(N))}function T(N){for(const M in N.typeMap)if(!w(N.typeMap[M]))return!1;return!0}},94056:(He,ve,p)=>{"use strict";function g(b){return!!b&&b.prototype&&b.prototype.declaredClass&&0===b.prototype.declaredClass.indexOf("esri.core.Collection")}p.d(ve,{u:()=>g})},23025:(He,ve,p)=>{"use strict";p.d(ve,{U:()=>C,k:()=>k});var g=p(26584),b=p(63290),J=p(94113),B=p(94056);const j=b.Z.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function C(w,T){var O;if(!T.write||T.write.writer||!1===T.write.enabled&&!T.write.overridePolicy)return;const x=null!=(O=null==w?void 0:w.ndimArray)?O:0;T.write.writer=w&&(1===x||"type"in w&&(0,B.u)(w.type))?Z:x>1?function V(w){return function(T,O,x,N){let M;if(null===T)M=null;else{M=X(T,N,w);let Q=w,z=M;for(;Q>0&&Array.isArray(z);)Q--,z=z[0];if(void 0!==z)for(let ee=0;ee<Q;ee++)M=[M]}(0,J.RB)(x,M,O)}}(x):T.types?Array.isArray(T.types)?function D(w){return(T,O,x,N)=>T&&Array.isArray(T)?I(T.filter(M=>L(M,w,N)),O,x,N):I(T,O,x,N)}(T.types[0]):function $(w){return(T,O,x,N)=>T?L(T,w,N)?I(T,O,x,N):void 0:I(T,O,x,N)}(T.types):I}function L(w,T,O){for(const M in T.typeMap)if(w instanceof T.typeMap[M])return!0;if(null!=O&&O.messages){var x,N;const M=null!=(x=T.errorContext)?x:"type",Q=`Values of type '${null!=(N="function"!=typeof T.key?w[T.key]:w.declaredClass)?N:"Unknown"}' cannot be written`;O&&O.messages&&w&&O.messages.push(new g.Z(`${M}:unsupported`,Q,{definition:w,context:O})),j.error(Q)}return!1}function I(w,T,O,x){(0,J.RB)(O,W(w,x),T)}function W(w,T){return w&&"function"==typeof w.write?w.write({},T):w&&"function"==typeof w.toJSON?w.toJSON():"number"==typeof w?k(w):w}function k(w){return w===-1/0?-Number.MAX_VALUE:w===1/0?Number.MAX_VALUE:isNaN(w)?null:w}function Z(w,T,O,x){let N;null===w?N=null:w&&"function"==typeof w.map?(N=w.map(M=>W(M,x)),"function"==typeof N.toArray&&(N=N.toArray())):N=[W(w,x)],(0,J.RB)(O,N,T)}function X(w,T,O){return 0!==O&&Array.isArray(w)?w.map(x=>X(x,T,O-1)):W(w,T)}},34595:(He,ve,p)=>{"use strict";p.d(ve,{Gg:()=>C,U2:()=>j,$z:()=>B});var g=p(52323);function b($,L){const D="?"===$[$.length-1]?$.slice(0,-1):$;if(null!=L.getItemAt||Array.isArray(L)){const W=parseInt(D,10);if(!isNaN(W))return Array.isArray(L)?L[W]:L.getItemAt(W)}const I=(0,g.vw)(L);return(0,g.b6)(I,D)?I.get(D):L[D]}function J($,L,D){if(null==$)return $;const I=b(L[D],$);return!I&&D<L.length-1?void 0:D===L.length-1?I:J(I,L,D+1)}function B($,L,D=0){return"string"==typeof L&&-1===L.indexOf(".")?b(L,$):J($,(0,g.NI)(L),D)}function j($,L){return B($,L)}function C($,L){return void 0!==B(L,$)}},44648:(He,ve,p)=>{"use strict";var g,b;p.d(ve,{F:()=>g}),(b=g||(g={}))[b.INITIALIZING=0]="INITIALIZING",b[b.CONSTRUCTING=1]="CONSTRUCTING",b[b.CONSTRUCTED=2]="CONSTRUCTED"},34117:(He,ve,p)=>{"use strict";p.d(ve,{JT:()=>j,VZ:()=>$,tz:()=>I});var g=p(58817),b=p(62208),J=p(52323);class B{constructor(w){this.autoDestroy=!1,this.properties=w}}function j(V){let w=V.constructor.__accessorMetadata__;const T=Object.prototype.hasOwnProperty.call(V.constructor,"__accessorMetadata__");if(w){if(!T){const O=Object.create(w.properties),x=w.autoDestroy;for(const N in O)O[N]=(0,g.d9)(O[N]);w=new B(O),w.autoDestroy=x,Object.defineProperty(V.constructor,"__accessorMetadata__",{value:w,enumerable:!1,configurable:!0,writable:!0})}}else w=new B({}),Object.defineProperty(V.constructor,"__accessorMetadata__",{value:w,enumerable:!1,configurable:!0,writable:!0});return(0,b.j0)(V.constructor.__accessorMetadata__)}function $(V,w){const T=function C(V){return j(V).properties}(V);let O=T[w];return O||(O=T[w]={}),O}function I(V,w){return(0,J.TS)(V,w,k)}const W=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function k(V){return W.test(V)?"replace":"merge"}},52489:(He,ve,p)=>{"use strict";p.d(ve,{D:()=>b});var g=p(22558);function b(J){J&&J.writtenProperties&&J.writtenProperties.forEach(B=>{const j=B.target;B.newOrigin&&B.oldOrigin!==B.newOrigin&&(0,g.l)(j)&&j.updateOrigin(B.propName,B.newOrigin)})}},29338:(He,ve,p)=>{"use strict";p.d(ve,{i:()=>D,$:()=>I});var g=p(34595),b=p(52323),J=p(33794);function B(W,k,Z){if(!W||!W.read||!1===W.read.enabled||!W.read.source)return!1;const X=W.read.source;if("string"==typeof X){if(X===k||X.indexOf(".")>-1&&0===X.indexOf(k)&&(0,g.Gg)(X,Z))return!0}else for(const V of X)if(V===k||V.indexOf(".")>-1&&0===V.indexOf(k)&&(0,g.Gg)(V,Z))return!0;return!1}function C(W,k,Z,X,V){let w=(0,J.HS)(k[Z],V);(function j(W){return W&&(!W.read||!1!==W.read.enabled&&!W.read.source)})(w)&&(W[Z]=!0);for(const T of Object.getOwnPropertyNames(k))w=(0,J.HS)(k[T],V),B(w,Z,X)&&(W[T]=!0)}function $(W,k,Z,X){const w=(0,J.hk)(Z.metadatas[k],"any",X),T=w&&w.default;if(void 0===T)return;const O="function"==typeof T?T.call(W,k,X):T;void 0!==O&&Z.set(k,O)}const L={origin:"service"};function D(W,k,Z=L){if(!k||"object"!=typeof k)return;const X=(0,b.vw)(W),V=X.metadatas,w={};for(const T of Object.getOwnPropertyNames(k))C(w,V,T,k,Z);X.setDefaultOrigin(Z.origin);for(const T of Object.getOwnPropertyNames(w)){const O=(0,J.HS)(V[T],Z).read,x=O&&O.source;let N;N=x&&"string"==typeof x?(0,g.$z)(k,x):k[T],O&&O.reader&&(N=O.reader.call(W,N,k,Z)),void 0!==N&&X.set(T,N)}if(!Z||!Z.ignoreDefaults){X.setDefaultOrigin("defaults");for(const T of Object.getOwnPropertyNames(V))w[T]||$(W,T,X,Z)}X.setDefaultOrigin("user")}function I(W,k,Z,X=L){var V;const w=Sr(_t({},X),{messages:[]});Z(w),null==(V=w.messages)||V.forEach(T=>{"warning"!==T.type||W.loaded?X&&X.messages&&X.messages.push(T):W.loadWarnings.push(T)})}},82255:(He,ve,p)=>{"use strict";p.d(ve,{t:()=>j});var g=p(26584),b=p(8314),J=p(63290),B=p(34595);function j(D,I,W){if(D&&I)if("object"==typeof I)for(const k of Object.getOwnPropertyNames(I))j(D,k,I[k]);else{if(-1!==I.indexOf(".")){const Z=I.split("."),X=Z.splice(Z.length-1,1)[0];return void j((0,B.U2)(D,Z),X,W)}const k=D.__accessor__;null!=k&&function C(D,I){if((0,b.Z)("esri-unknown-property-errors")&&!function $(D,I){return null!=I.metadatas[D]}(D,I))throw new g.Z("set:unknown-property",function L(D,I){return"setting unknown property '"+D+"' on instance of "+I.host.declaredClass}(D,I))}(I,k),D[I]=W}}J.Z.getLogger("esri.core.accessorSupport.set")},36082:(He,ve,p)=>{"use strict";p.d(ve,{mS:()=>T,LJ:()=>k,gb:()=>Z,it:()=>D,GF:()=>x}),p(8314);var b=p(63290),J=p(52323),B=p(2345);let j,C=[];const $=b.Z.getLogger("esri.core.Accessor");function D(M){void 0!==j&&j.onObservableAccessed(M)}let I=!1,W=!1;function k(M,Q,z){if(I)return X(M,Q,z);V(M);const ee=Q.call(z);return w(),ee}function Z(M,Q){return k(void 0,M,Q)}function X(M,Q,z){const ee=I;I=!0,V(M);let le=null;try{le=Q.call(z)}catch(oe){W&&$.error(oe)}return w(),I=ee,le}function V(M){j=M,C.push(M)}function w(){const M=C.pop();j=C.length>0?C[C.length-1]:void 0,void 0!==M&&M.onTrackingEnd()}function T(M,Q){if(Q.flags&B.v.DepTrackingInitialized)return;const z=W;W=!1,Q.flags&B.v.AutoTracked?X(Q,Q.metadata.get,M):x(M,Q),W=z}const O=[];function x(M,Q){Q.flags&B.v.ExplicitlyTracking||(Q.flags|=B.v.ExplicitlyTracking,X(Q,()=>{const z=Q.metadata.dependsOn||O;for(const ee of z)if("string"==typeof ee&&-1===ee.indexOf("."))N(M,ee,!1);else{const le=(0,J.NI)(ee);for(let oe=0,ce=M;oe<le.length&&null!=ce&&"object"==typeof ce;++oe)ce=N(ce,le[oe],oe!==le.length-1)}}),Q.flags&=~B.v.ExplicitlyTracking)}function N(M,Q,z){const ee="?"===Q[Q.length-1]?Q.slice(0,-1):Q;if(null!=M.getItemAt||Array.isArray(M)){const ce=parseInt(ee,10);if(!isNaN(ce))return Array.isArray(M)?M[ce]:M.getItemAt(ce)}const le=(0,J.vw)(M),oe=null==le?void 0:le.properties.get(ee);return oe&&(D(oe),T(M,oe)),z?M[ee]:void 0}},2345:(He,ve,p)=>{"use strict";var g,b;p.d(ve,{v:()=>g}),(b=g||(g={}))[b.Dirty=1]="Dirty",b[b.Overriden=2]="Overriden",b[b.Computing=4]="Computing",b[b.NonNullable=8]="NonNullable",b[b.HasDefaultValue=16]="HasDefaultValue",b[b.DepTrackingInitialized=32]="DepTrackingInitialized",b[b.AutoTracked=64]="AutoTracked",b[b.ExplicitlyTracking=128]="ExplicitlyTracking"},12196:(He,ve,p)=>{"use strict";p.d(ve,{X:()=>b});var g=p(85931);class b{constructor(B,j){this._observers=B,this._observer=j}remove(){(0,g.Od)(this._observers,this._observer)}}},819:(He,ve,p)=>{"use strict";p.d(ve,{M:()=>g});class g{constructor(J){this._notify=J,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const J=this._invalidCount;if(1===J)return this._invalidCount=0,void this._notify();this._invalidCount=J>0?J-1:0}onObservableAccessed(J){this._accessed.includes(J)||this._accessed.push(J)}onTrackingEnd(){const J=this._handles,B=this._accessed;for(let j=0;j<B.length;++j)J.push(B[j].observe(this));B.length=0}clear(){const J=this._handles;for(let B=0;B<J.length;++B)J[B].remove();J.length=0}}},21352:(He,ve,p)=>{"use strict";p.d(ve,{EH:()=>$,U5:()=>j,Xz:()=>C});var g=p(36082),b=p(819);let J=!1;const B=[];function j(I,W){let k=new b.M(function V(){if(!k||X)return;if(J)return void L(V);const T=Z;k.clear(),J=!0,X=!0,Z=(0,g.LJ)(k,I),X=!1,J=!1,W(Z,T),D()}),Z=null,X=!1;return X=!0,Z=(0,g.LJ)(k,I),X=!1,{remove:function w(){k&&(k.destroy(),k=null,Z=null)}}}function C(I,W){let k=new b.M(function X(){W(Z,w)}),Z=null;function w(){return k?(k.clear(),Z=(0,g.LJ)(k,I),Z):null}return w(),{remove:function V(){k&&(k.destroy(),k=null),Z=null}}}function $(I){let W=new b.M(function Z(){W&&!k&&(J?L(Z):(W.clear(),J=!0,k=!0,(0,g.LJ)(W,I),k=!1,J=!1,D()))}),k=!1;return k=!0,(0,g.LJ)(W,I),k=!1,{remove:function X(){W&&(W.destroy(),W=null)}}}function L(I){B.includes(I)||B.unshift(I)}function D(){for(;B.length;)B.pop()()}},52323:(He,ve,p)=>{"use strict";p.d(ve,{vw:()=>B,b6:()=>j,TS:()=>$,IH:()=>V,Qc:()=>X,NI:()=>I});var g=p(54024),b=p(58817),J=p(62208);function B(w){return w?w.__accessor__?w.__accessor__:w.propertyInvalidated?w:null:null}function j(w,T){return null!=w&&w.metadatas&&null!=w.metadatas[T]}function $(w,T,O){return L(w,T,O?{policy:O,path:""}:null)}function L(w,T,O){return T?Object.keys(T).reduce(function(x,N){let M=null,Q="merge";if(O&&(M=O.path?`${O.path}.${N}`:N,Q=O.policy(M)),"replace"===Q)return x[N]=T[N],x;if(void 0===x[N])return x[N]=(0,b.d9)(T[N]),x;let z=x[N],ee=T[N];if(z===ee)return x;if(Array.isArray(ee)||Array.isArray(x))z=x[N]=z?Array.isArray(z)?z.concat():[z]:[],ee&&(Array.isArray(ee)||(ee=[ee]),ee.forEach(le=>{-1===z.indexOf(le)&&z.push(le)}));else if(ee&&"object"==typeof ee)if(O){const le=O.path;O.path=(0,J.j0)(M),x[N]=L(z,ee,O),O.path=le}else x[N]=L(z,ee,null);else x.hasOwnProperty(N)&&!T.hasOwnProperty(N)||(x[N]=ee);return x},w||{}):w}function I(w){return Array.isArray(w)?w:w.split(".")}function W(w){return w.indexOf(",")>-1?w.split(",").map(T=>T.trim()):[w.trim()]}function X(w,T,O,x){const N=function k(w){if(Array.isArray(w)){const T=[];for(const O of w)T.push(...W(O));return T}return W(w)}(T);if(1!==N.length){const M=N.map(Q=>x(w,Q,O));return(0,g.AL)(M)}return x(w,N[0],O)}function V(w){let T=!1;return()=>{T||(T=!0,w())}}},45262:(He,ve,p)=>{"use strict";p.d(ve,{BT:()=>x,YP:()=>oe,aQ:()=>K});var W,se,g=p(35575),b=p(58817),J=p(62208),B=p(27899),C=p(50618),$=p(86236),L=p(34595),D=p(21352),I=p(52323);(se=W||(W={}))[se.Untracked=0]="Untracked",se[se.Tracked=1]="Tracked";class k{constructor(){this.uid=(0,$.D)(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(de,ue,pe,ie,te){return this.pool.acquire(W.Untracked,de,ue,pe,ie,te,b.fS)}static acquireTracked(de,ue,pe,ie){return this.pool.acquire(W.Tracked,de,ue,pe,null,null,ie)}notify(de,ue){this.type===W.Untracked?this.callback.call(this.target,de,ue,this.path,this.target):this.callback.call(null,de,ue)}acquire(de,ue,pe,ie,te,Ee,fe){this.uid=(0,$.D)(),this.removed=!1,this.type=de,this.oldValue=ue,this.callback=pe,this.getValue=ie,this.target=te,this.path=Ee,this.equals=fe}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=(0,$.D)(),this.removed=!0}}k.pool=new class j extends B.Z{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=(0,J.Bd)(this._set)}acquire(...de){const ue=super.acquire(...de);return this._set.delete(ue),ue}release(de){de&&!this._set.has(de)&&(super.release(de),this._set.add(de))}_dispose(de){this._set.delete(de),super._dispose(de)}}(k);const Z=new g.Z,X=new Set;let V;function w(se){X.delete(se),X.add(se),V||(V=(0,C.Os)(N))}function T(se){if(se.removed)return;const de=se.oldValue,ue=se.getValue();se.equals(de,ue)||(se.oldValue=ue,se.notify(ue,de))}function x(se){for(const de of X.values())de.target===se&&(de.removed=!0)}function N(){let se=10;for(;V&&se--;){V=null;const de=M(),ue=Z.acquire();for(const pe of de){const ie=pe.uid;T(pe),ie===pe.uid&&pe.removed&&ue.push(pe)}for(const pe of X)pe.removed&&(ue.push(pe),X.delete(pe));for(const pe of ue)k.pool.release(pe);Z.release(ue),Z.release(de),Q.forEach(pe=>pe())}}function M(){const se=Z.acquire();se.length=X.size;let de=0;for(const ue of X)se[de]=ue,++de;return X.clear(),se}const Q=new Set;function oe(se,de,ue,pe=!1){return!se.__accessor__||se.__accessor__.destroyed?{remove(){}}:pe?function le(se,de,ue){const pe=(0,I.Qc)(se,de,ue,(ie,te,Ee)=>{let fe=!1;return(0,D.U5)(()=>(0,L.$z)(ie,te),(be,ye)=>{ie.__accessor__.destroyed?pe.remove():fe||(fe=!0,(0,b.fS)(ye,be)||Ee.call(ie,be,ye,te,ie),fe=!1)})});return pe}(se,de,ue):function ee(se,de,ue){let pe=(0,I.Qc)(se,de,ue,(ie,te,Ee)=>{let fe,be,ye=(0,D.Xz)(()=>(0,L.$z)(ie,te),(Ke,Ue)=>{ie.__accessor__.destroyed||fe&&fe.uid!==be?pe.remove():(fe||(fe=k.acquireUntracked(Ke,Ee,Ue,ie,te),be=fe.uid),w(fe))});return{remove:(0,I.IH)(()=>{ye.remove(),fe&&(fe.uid!==be||fe.removed||(fe.removed=!0,w(fe)),fe=null),pe=ye=null})}});return pe}(se,de,ue)}function K(se,de,ue=!1,pe=b.fS){return ue?function re(se,de,ue){let pe=!1;return(0,D.U5)(se,(ie,te)=>{pe||(pe=!0,ue(te,ie)||de(ie,te),pe=!1)})}(se,de,pe):function ce(se,de,ue){let pe,ie,te=(0,D.Xz)(se,(Ee,fe)=>{pe&&pe.uid!==ie?te.remove():(pe||(pe=k.acquireTracked(Ee,de,fe,ue),ie=pe.uid),w(pe))});return{remove:(0,I.IH)(()=>{te.remove(),pe&&(pe.uid!==ie||pe.removed||(pe.removed=!0,w(pe)),pe=null),te=null})}}(se,de,pe)}},36054:(He,ve,p)=>{"use strict";p.d(ve,{d:()=>W,c:()=>k});var g=p(85931),b=p(26584),J=p(63290),B=p(31283),j=p(52323),C=p(33794);const $=J.Z.getLogger("esri.core.accessorSupport.write");function L(Z,X,V,w,T){var O,x;const N={};return null==(O=X.write)||null==(x=O.writer)||x.call(Z,w,N,V,T),N}function D(Z,X,V,w,T,O){if(!w||!w.write)return!1;const x=Z.get(V);if(!T&&w.write.overridePolicy){const N=w.write.overridePolicy.call(Z,x,V,O);void 0!==N&&(T=N)}if(T||(T=w.write),!T||!1===T.enabled)return!1;if((null===x&&!T.allowNull&&!T.writerEnsuresNonNull||void 0===x)&&T.isRequired){const N=new b.Z("web-document-write:property-required",`Missing value for required property '${V}' on '${Z.declaredClass}'`,{propertyName:V,target:Z});return N&&O&&O.messages?O.messages.push(N):N&&!O&&$.error(N.name,N.message),!1}return!(void 0===x||null===x&&!T.allowNull&&!T.writerEnsuresNonNull||(!X.store.multipleOriginsSupported||X.store.originOf(V)===B.s3.DEFAULTS)&&function I(Z,X,V,w,T){const O=w.default;if(void 0===O)return!1;if(null!=w.defaultEquals)return w.defaultEquals(T);if("function"==typeof O){if(Array.isArray(T)){const x=O.call(Z,X,V);return(0,g.fS)(x,T)}return!1}return O===T}(Z,V,O,w,x)||!T.ignoreOrigin&&O&&O.origin&&X.store.multipleOriginsSupported&&X.store.originOf(V)<(0,B.M9)(O.origin))}function W(Z,X,V,w){const T=(0,j.vw)(Z),x=(0,C.Ah)(T.metadatas[X],w);return!!x&&D(Z,T,X,x,V,w)}function k(Z,X,V){if(Z&&"function"==typeof Z.toJSON&&(!Z.toJSON.isDefaultToJSON||!Z.write))return(0,j.TS)(X,Z.toJSON());const w=(0,j.vw)(Z),T=w.metadatas;for(const N in T){const M=(0,C.Ah)(T[N],V);if(!D(Z,w,N,M,void 0,V))continue;const Q=Z.get(N),z=L(Z,M,M.write&&"string"==typeof M.write.target?M.write.target:N,Q,V);var O,x;Object.keys(z).length>0&&(X=(0,j.TS)(X,z),null!=V&&null!=(O=V.resources)&&null!=(x=O.pendingOperations)&&x.length&&Promise.all(V.resources.pendingOperations).then(()=>(0,j.TS)(X,z)),V&&V.writtenProperties&&V.writtenProperties.push({target:Z,propName:N,oldOrigin:(0,B.Wm)(w.store.originOf(N)),newOrigin:V.origin}))}return X}},85931:(He,ve,p)=>{"use strict";p.d(ve,{SO:()=>N,a9:()=>V,fS:()=>D,xH:()=>x,cq:()=>Q,zG:()=>k,w6:()=>w,Od:()=>ae,e$:()=>z,FY:()=>le});var g=p(62208),b=p(4619);function D(se,de,ue){if((0,g.Wi)(se)&&(0,g.Wi)(de))return!0;if((0,g.Wi)(se)||(0,g.Wi)(de)||se.length!==de.length)return!1;if(ue){for(let pe=0;pe<se.length;pe++)if(!ue(se[pe],de[pe]))return!1}else for(let pe=0;pe<se.length;pe++)if(se[pe]!==de[pe])return!1;return!0}function k(se){return se&&"number"==typeof se.length}const X=!!Array.prototype.fill;function V(se,de){if(X)return new Array(se).fill(de);const ue=new Array(se);for(let pe=0;pe<se;pe++)ue[pe]=de;return ue}function w(se,de){void 0===de&&(de=se,se=0);const ue=new Array(de-se);for(let pe=se;pe<de;pe++)ue[pe-se]=pe;return ue}function x(se){return se.reduce((de,ue)=>de.concat(ue||[]),[])}class N{constructor(){this.last=0}}const M=new N;function Q(se,de,ue,pe){pe=pe||M;const ie=Math.max(0,pe.last-10);for(let Ee=ie;Ee<ue;++Ee)if(se[Ee]===de)return pe.last=Ee,Ee;const te=Math.min(ie,ue);for(let Ee=0;Ee<te;++Ee)if(se[Ee]===de)return pe.last=Ee,Ee;return-1}function z(se,de,ue,pe){const ie=null==ue?se.length:ue,te=Q(se,de,ie,pe);if(-1!==te)return se[te]=se[ie-1],null==ue&&se.pop(),de}const ee=new Set;function le(se,de,ue=se.length,pe=de.length,ie,te){if(0===pe||0===ue)return ue;ee.clear();for(let fe=0;fe<pe;++fe)ee.add(de[fe]);ie=ie||M;const Ee=Math.max(0,ie.last-10);for(let fe=Ee;fe<ue;++fe)if(ee.has(se[fe])&&(te&&te.push(se[fe]),ee.delete(se[fe]),se[fe]=se[ue-1],--ue,--fe,0===ee.size||0===ue))return ee.clear(),ue;for(let fe=0;fe<Ee;++fe)if(ee.has(se[fe])&&(te&&te.push(se[fe]),ee.delete(se[fe]),se[fe]=se[ue-1],--ue,--fe,0===ee.size||0===ue))return ee.clear(),ue;return ee.clear(),ue}function ae(se,de){const ue=se.indexOf(de);return-1!==ue?(se.splice(ue,1),de):null}new b.Z},59213:(He,ve,p)=>{"use strict";p.d(ve,{Ed:()=>J,UI:()=>B,q6:()=>j,mt:()=>C});var g=p(62208),b=p(10699);function J(L,D,I){return(0,b.as)(L.map((W,k)=>D.apply(I,[W,k])))}function B(L,D,I){return(0,b.as)(L.map((W,k)=>D.apply(I,[W,k]))).then(W=>W.map(k=>k.value))}function j(L){return(0,g.Wi)(L)?(0,b.DB)():L.then(D=>({ok:!0,value:D})).catch(D=>({ok:!1,error:D}))}function C(L){return L.then(D=>({ok:!0,value:D})).catch(D=>((0,b.r9)(D),{ok:!1,error:D}))}},27306:(He,ve,p)=>{"use strict";function g(C){return 32+C.length}function J(C){if(!C)return 0;let $=32;for(const L in C)if(C.hasOwnProperty(L)){const D=C[L];switch(typeof D){case"string":$+=g(D);break;case"number":$+=16;break;case"boolean":$+=4}}return $}function B(C,$){return 32+C.length*$}var j,C;p.d(ve,{Y8:()=>j,f2:()=>J,do:()=>B}),(C=j||(j={}))[C.KILOBYTES=1024]="KILOBYTES",C[C.MEGABYTES=1048576]="MEGABYTES",C[C.GIGABYTES=1073741824]="GIGABYTES"},84244:(He,ve,p)=>{"use strict";p.d(ve,{m:()=>b});const b=function g(J){return{setTimeout:(B,j)=>{const C=J.setTimeout(B,j);return{remove:()=>J.clearTimeout(C)}}}}(globalThis)},89726:(He,ve,p)=>{"use strict";p.d(ve,{R:()=>J,Z:()=>b});var g=p(48701);function b(j,C,$=g.Z){return C||(C=new $),C===j||(C.removeAll(),function B(j){return j&&(Array.isArray(j)||"items"in j&&Array.isArray(j.items))}(j)?C.addMany(j):j&&C.add(j)),C}function J(j){return j}},94573:(He,ve,p)=>{"use strict";function b(C){}function B(C){return()=>C}p.d(ve,{Bg:()=>b,sM:()=>B}),p(8314)},55538:(He,ve,p)=>{"use strict";p.d(ve,{x9:()=>$,XV:()=>j,Mr:()=>C});var g=p(8314);const b=new Set;function j(L,D,I={}){if((0,g.Z)("esri-deprecation-warnings")){const{moduleName:W}=I;$(L,"Function: "+(W?W+"::":"")+D+"()",I)}}function C(L,D,I={}){if((0,g.Z)("esri-deprecation-warnings")){const{moduleName:W}=I;$(L,"Property: "+(W?W+"::":"")+D,I)}}function $(L,D,I={}){if((0,g.Z)("esri-deprecation-warnings")){const{replacement:W,version:k,see:Z,warnOnce:X}=I;let V=D;W&&(V+=`\n\t\u{1f6e0}\ufe0f Replacement: ${W}`),k&&(V+=`\n\t\u2699\ufe0f Version: ${k}`),Z&&(V+=`\n\t\u{1f517} See ${Z} for more details.`),function J(L,D,I=!1){I&&b.has(D)||(I&&b.add(D),L.warn(`\u{1f6d1} DEPRECATED - ${D}`))}(L,V,X)}}},40764:(He,ve,p)=>{"use strict";function g(L){return"string"==typeof L?document.getElementById(L):L}function b(L){for(;L.hasChildNodes();)L.removeChild(L.firstChild)}function B(L,D){const I=D.parentNode;I&&I.insertBefore(L,D)}function j(L,D){for(;;){const I=L.firstChild;if(!I)break;D.appendChild(I)}}p.d(ve,{L7:()=>g,cS:()=>b,Vt:()=>B,YD:()=>j}),(()=>{if("function"==typeof Element.prototype.closest)return(D,I)=>D.closest(I);Element.prototype.matches||Element})()},17770:(He,ve,p)=>{"use strict";function g($){return $&&("function"==typeof $.on||"function"==typeof $.addEventListener)}function b($,L,D){if(!g($))throw new TypeError("target is not a Evented or EventTarget object");if("on"in $)return $.on(L,D);if(Array.isArray(L)){const I=L.slice();for(const W of I)$.addEventListener(W,D);return{remove(){for(const W of I)$.removeEventListener(W,D)}}}return $.addEventListener(L,D),{remove(){$.removeEventListener(L,D)}}}function J($,L,D){if(!g($))throw new TypeError("target is not a Evented or EventTarget object");if("once"in $)return $.once(L,D);const I=b($,L,W=>{I.remove(),D.call($,W)});return{remove(){I.remove()}}}p.d(ve,{kK:()=>C,vT:()=>g,on:()=>b,IH:()=>J});const j={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function C({key:$}){return j[$]||$}},54024:(He,ve,p)=>{"use strict";p.d(ve,{AL:()=>b,kB:()=>J});var g=p(62208);function b(L){return J(()=>L.forEach(D=>(0,g.pC)(D)&&D.remove()))}function J(L){return{remove:()=>{L&&(L(),L=void 0)}}}},8314:(He,ve,p)=>{"use strict";var g,b;let J;var B,j;function C($){return"function"==typeof J[$]?J[$]=J[$](globalThis):J[$]}p.d(ve,{Z:()=>C}),J=null!=(g=globalThis.dojoConfig)&&g.has||null!=(b=globalThis.esriConfig)&&b.has?_t(_t({},null==(B=globalThis.dojoConfig)?void 0:B.has),null==(j=globalThis.esriConfig)?void 0:j.has):{},C.add=($,L,D,I)=>((I||void 0===J[$])&&(J[$]=L),D&&C($)),C.cache=J,C.add("esri-deprecation-warnings",!0),(()=>{var $;C.add("host-webworker",void 0!==globalThis.WorkerGlobalScope&&self instanceof globalThis.WorkerGlobalScope);const L="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(C.add("host-browser",L),C.add("host-node","object"==typeof globalThis.process&&(null==($=globalThis.process.versions)?void 0:$.node)&&globalThis.process.versions.v8),C.add("dom",L),C("host-browser")){const D=navigator,I=D.userAgent,W=D.appVersion,k=parseFloat(W);if(C.add("wp",parseFloat(I.split("Windows Phone")[1])||void 0),C.add("msapp",parseFloat(I.split("MSAppHost/")[1])||void 0),C.add("khtml",W.includes("Konqueror")?k:void 0),C.add("edge",parseFloat(I.split("Edge/")[1])||void 0),C.add("opr",parseFloat(I.split("OPR/")[1])||void 0),C.add("webkit",!C("wp")&&!C("edge")&&parseFloat(I.split("WebKit/")[1])||void 0),C.add("chrome",!C("edge")&&!C("opr")&&parseFloat(I.split("Chrome/")[1])||void 0),C.add("android",!C("wp")&&parseFloat(I.split("Android ")[1])||void 0),C.add("safari",!W.includes("Safari")||C("wp")||C("chrome")||C("android")||C("edge")||C("opr")?void 0:parseFloat(W.split("Version/")[1])),C.add("mac",W.includes("Macintosh")),!C("wp")&&I.match(/(iPhone|iPod|iPad)/)){const Z=RegExp.$1.replace(/P/,"p"),X=I.match(/OS ([\d_]+)/)?RegExp.$1:"1",V=parseFloat(X.replace(/_/,".").replace(/_/g,""));C.add(Z,V),C.add("ios",V)}C.add("trident",parseFloat(W.split("Trident/")[1])||void 0),C("webkit")||(!I.includes("Gecko")||C("wp")||C("khtml")||C("trident")||C("edge")||C.add("mozilla",k),C("mozilla")&&C.add("ff",parseFloat(I.split("Firefox/")[1]||I.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const $=navigator.userAgent,L=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test($),D=/iPhone/i.test($);L&&C.add("esri-mobile",L),D&&C.add("esri-iPhone",D),C.add("esri-geolocation",!!navigator.geolocation)}C.add("esri-canvas-svg-support",!C("trident")),C.add("esri-wasm","WebAssembly"in globalThis),C.add("esri-shared-array-buffer",()=>{const $="SharedArrayBuffer"in globalThis,L=!1===globalThis.crossOriginIsolated;return $&&!L}),C.add("esri-atomics","Atomics"in globalThis),C.add("esri-workers","Worker"in globalThis),C.add("web-feat:cache","caches"in globalThis),C.add("esri-workers-arraybuffer-transfer",!C("safari")||Number(C("safari"))>=12),C.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),C.add("featurelayer-simplify-payload-size-factors",[1,1,4]),C.add("featurelayer-snapshot-enabled",!0),C.add("featurelayer-snapshot-point-min-threshold",8e4),C.add("featurelayer-snapshot-point-max-threshold",4e5),C.add("featurelayer-snapshot-point-coverage",.1),C.add("featurelayer-advanced-symbols",!1),C.add("featurelayer-pbf",!0),C.add("featurelayer-pbf-statistics",!1),C.add("feature-layers-workers",!0),C.add("feature-polyline-generalization-factor",1),C.add("mapview-transitions-duration",200),C.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),C.add("mapserver-pbf-enabled",!1),C("host-webworker")||C("host-browser")&&(C.add("esri-csp-restrictions",()=>{try{new Function}catch($){return!0}return!1}),C.add("esri-image-decode",()=>{if("decode"in new Image){const $=new Image;return $.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void $.decode().then(()=>{C.add("esri-image-decode",!0,!0,!0)}).catch(()=>{C.add("esri-image-decode",!1,!0,!0)})}return!1}),C.add("esri-url-encodes-apostrophe",()=>{const $=window.document.createElement("a");return $.href="?'",$.href.includes("?%27")}))})()},56354:(He,ve,p)=>{"use strict";function g(B){const j=[];return function*(){yield*j;for(const C of B)j.push(C),yield C}}function b(B,j){for(const C of B)if(null!=C&&j(C))return C}function J(B){return null!=B&&"function"==typeof B[Symbol.iterator]}p.d(ve,{Fs:()=>g,sE:()=>b,TW:()=>J})},2076:(He,ve,p)=>{"use strict";p.d(ve,{X:()=>b,w:()=>J});var g=p(94113);class b{constructor(j,C={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=j,this.options=C,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(j),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=$=>this.fromJSON($),this.write=($,L,D)=>{const I=this.toJSON($);void 0!==I&&(0,g.RB)(D,I,L)},this.write.isJSONMapWriter=!0}toJSON(j){if(this.apiToJSON.hasOwnProperty(j)){const C=this.apiToJSON[j];return this.options.useNumericKeys?+C:C}return this.options.ignoreUnknown?void 0:j}fromJSON(j){return this.jsonToAPI.hasOwnProperty(j)?this.jsonToAPI[j]:this.options.ignoreUnknown?void 0:j}_invertMap(j){const C={};for(const $ in j)C[j[$]]=$;return C}_getKeysSorted(j){const C=[];for(const $ in j)C.push($);return C.sort(),C}}function J(){return function(B,j){return new b(B,_t({ignoreUnknown:!0},j))}}},58817:(He,ve,p)=>{"use strict";p.d(ve,{d9:()=>C,fS:()=>k,yd:()=>j,Vo:()=>$}),p(85931),p(8314);var J=p(62208),B=p(55713);function j(O,x){let N;if(x)for(N in O)O.hasOwnProperty(N)&&(void 0===O[N]?delete O[N]:O[N]instanceof Object&&j(O[N],!0));else for(N in O)O.hasOwnProperty(N)&&void 0===O[N]&&delete O[N];return O}function C(O){if(!O||"object"!=typeof O||"function"==typeof O)return O;const x=W(O);if((0,J.pC)(x))return x;if(L(O))return O.clone();if(D(O))return O.map(C);if(I(O))return O.clone();const N={};for(const M of Object.getOwnPropertyNames(O))N[M]=C(O[M]);return N}function $(O){if(!O||"object"!=typeof O||"function"==typeof O)return O;const x=W(O);if((0,J.pC)(x))return x;if(D(O)){let N=!0;const M=O.map(Q=>{const z=$(Q);return null!=Q&&null==z&&(N=!1),z});return N?M:null}if(L(O))return O.clone();if(!I(O)){const N=new(Object.getPrototypeOf(O).constructor);for(const M of Object.getOwnPropertyNames(O)){const Q=O[M],z=$(Q);if(null!=Q&&null==z)return null;N[M]=z}return N}return null}function L(O){return"function"==typeof O.clone}function D(O){return"function"==typeof O.map&&"function"==typeof O.forEach}function I(O){return"function"==typeof O.notifyChange&&"function"==typeof O.watch}function W(O){if((0,B.W0)(O)||(0,B.lq)(O)||(0,B.KZ)(O)||(0,B.z3)(O)||(0,B.Uc)(O)||(0,B.Hx)(O)||(0,B.ZY)(O)||(0,B.xZ)(O)||(0,B.fS)(O))return(0,B.tP)(O);if(O instanceof Date)return new Date(O.getTime());if(O instanceof ArrayBuffer)return O.slice(0,O.byteLength);if(O instanceof Map){const x=new Map;return O.forEach((N,M)=>{x.set(M,C(N))}),x}if(O instanceof Set){const x=new Set;return O.forEach(N=>{x.add(C(N))}),x}return null}function k(O,x){return O===x||"number"==typeof O&&isNaN(O)&&"number"==typeof x&&isNaN(x)||"function"==typeof(O||{}).getTime&&"function"==typeof(x||{}).getTime&&O.getTime()===x.getTime()||!1}},47877:(He,ve,p)=>{"use strict";p.d(ve,{G:()=>C,w:()=>L});var g=p(15861),b=p(59213),J=p(48701),B=p(47996),j=p(62208);function C(W,k){return $.apply(this,arguments)}function $(){return($=(0,g.Z)(function*(W,k){return yield W.load(),L(W,k)})).apply(this,arguments)}function L(W,k){return D.apply(this,arguments)}function D(){return D=(0,g.Z)(function*(W,k){const Z=[],X=(...w)=>{for(const T of w)(0,j.Wi)(T)||(Array.isArray(T)?X(...T):J.Z.isCollection(T)?T.forEach(O=>X(O)):B.Z.isLoadable(T)&&Z.push(T))};k(X);let V=null;if(yield(0,b.UI)(Z,function(){var w=(0,g.Z)(function*(T){!1!==(yield(0,b.q6)(I(T)?T.loadAll():T.load())).ok||V||(V=T)});return function(T){return w.apply(this,arguments)}}()),V)throw V.loadError;return W}),D.apply(this,arguments)}function I(W){return"loadAll"in W&&"function"==typeof W.loadAll}},21286:(He,ve,p)=>{"use strict";p.d(ve,{ZF:()=>V,Kt:()=>w,jE:()=>z,uZ:()=>j,oK:()=>x,Vl:()=>k,wt:()=>$,t7:()=>I,Sf:()=>B,fp:()=>L,BV:()=>Z});var g=p(84161);p(993);const J=new Float32Array(1);function B(ce){--ce;for(let re=1;re<32;re<<=1)ce|=ce>>re;return ce+1}function j(ce,re,K){return Math.min(Math.max(ce,re),K)}function $(ce){return 0==(ce&ce-1)}function L(ce){return ce--,ce|=ce>>1,ce|=ce>>2,ce|=ce>>4,ce|=ce>>8,ce|=ce>>16,++ce}function I(ce,re,K){return ce+(re-ce)*K}function k(ce){return ce*Math.PI/180}function Z(ce){return 180*ce/Math.PI}function V(ce){return Math.acos(j(ce,-1,1))}function w(ce){return Math.asin(j(ce,-1,1))}function x(ce){return N(Math.max(-oe,Math.min(ce,oe)))}function N(ce){return J[0]=ce,J[0]}function z(ce,re){const K=(0,g.l)(ce),ae=w(ce[2]/K),se=Math.atan2(ce[1]/K,ce[0]/K);return(0,g.s)(re,K,ae,se),re}const oe=N(34028234663852886e22)},62208:(He,ve,p)=>{"use strict";function b(le){return null!=le}function J(le){return null==le}function B(le){return void 0===le}function j(le,oe){return b(le)?oe(le):null}function C(le){return le}function $(le,oe){if(J(le))throw new Error(oe);return le}function L(le,oe){return b(le)?le:"function"==typeof oe?oe():oe}function D(le,oe){return b(le)?le:oe}function I(le){return b(le)&&le.destroy(),null}function W(le){return b(le)&&le.dispose(),null}function k(le){return b(le)&&le.remove(),null}function Z(le){return b(le)&&le.abort(),null}function X(le){return b(le)&&le.release(),null}function w(le){return null}function O(le,oe){const ce=new Array;for(const re of le)ce.push(N(re,null,oe));return ce}function x(le,oe){for(const ce of le)j(ce,oe)}function N(le,oe,ce){return b(le)?ce(le):oe}function Q(le){return le.filter(oe=>b(oe))}function z(le,...oe){let ce=le;for(let re=0;re<oe.length&&ce;++re)ce=ce[oe[re]];return ce}function ee(le){return le}p.d(ve,{IM:()=>Z,yw:()=>j,j0:()=>ee,SC:()=>I,O3:()=>W,lV:()=>Q,JR:()=>x,U2:()=>z,Wi:()=>J,pC:()=>b,o8:()=>B,Fd:()=>O,R2:()=>N,Bd:()=>w,RY:()=>X,hw:()=>k,Wg:()=>C,Pt:()=>L,s3:()=>$,yl:()=>D})},22558:(He,ve,p)=>{"use strict";function g(b){return b&&"getAtOrigin"in b&&"originOf"in b}p.d(ve,{l:()=>g})},79682:(He,ve,p)=>{"use strict";p.d(ve,{Y:()=>b});const g=[];function b(J){g.push(J),1===g.length&&queueMicrotask(()=>{const B=g.slice();g.length=0;for(const j of B)j()})}},75327:(He,ve,p)=>{"use strict";p.d(ve,{lt:()=>I,WU:()=>j,Qc:()=>W});var g=p(77275),b=p(56683);const J={ar:[".",","],bg:[",","\xa0"],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function B(w){w||(w=(0,b.Kd)());let T=w in J;if(!T){const M=w.split("-");M.length>1&&M[0]in J&&(w=M[0],T=!0),T||(w="en")}const[O,x,N="#,##0.###"]=J[w];return{decimal:O,group:x,pattern:N}}function j(w,T){const O=B((T=_t({},T)).locale);T.customs=O;const x=T.pattern||O.pattern;return isNaN(w)||Math.abs(w)===1/0?null:function $(w,T,O){const x=(O=O||{}).customs.group,N=O.customs.decimal,M=T.split(";"),Q=M[0];if(-1!==(T=M[w<0?1:0]||"-"+Q).indexOf("%"))w*=100;else if(-1!==T.indexOf("\u2030"))w*=1e3;else{if(-1!==T.indexOf("\xa4"))throw new Error("currency notation not supported");if(-1!==T.indexOf("E"))throw new Error("exponential notation not supported")}const z=C,ee=Q.match(z);if(!ee)throw new Error("unable to find a number expression in pattern: "+T);return!1===O.fractional&&(O.places=0),T.replace(z,function L(w,T,O){!0===(O=O||{}).places&&(O.places=0),O.places===1/0&&(O.places=6);const x=T.split("."),N="string"==typeof O.places&&O.places.indexOf(",");let M=O.places;N?M=O.places.substring(N+1):M>=0||(M=(x[1]||[]).length),O.round<0||(w=Number(w.toFixed(Number(M))));const Q=String(Math.abs(w)).split("."),z=Q[1]||"";if(x[1]||O.places){N&&(O.places=O.places.substring(0,N));const ae=void 0!==O.places?O.places:x[1]&&x[1].lastIndexOf("0")+1;ae>z.length&&(Q[1]=z.padEnd(Number(ae),"0")),M<z.length&&(Q[1]=z.substr(0,Number(M)))}else Q[1]&&Q.pop();const ee=x[0].replace(",","");let le=ee.indexOf("0");-1!==le&&(le=ee.length-le,le>Q[0].length&&(Q[0]=Q[0].padStart(le,"0")),-1===ee.indexOf("#")&&(Q[0]=Q[0].substr(Q[0].length-le)));let oe,ce,re=x[0].lastIndexOf(",");if(-1!==re){oe=x[0].length-re-1;const ae=x[0].substr(0,re);re=ae.lastIndexOf(","),-1!==re&&(ce=ae.length-re-1)}const K=[];for(let ae=Q[0];ae;){const se=ae.length-oe;K.push(se>0?ae.substr(se):ae),ae=se>0?ae.slice(0,se):"",ce&&(oe=ce,ce=void 0)}return Q[0]=K.reverse().join(O.group||","),Q.join(O.decimal||".")}(w,ee[0],{decimal:N,group:x,places:O.places,round:O.round}))}(w,x,T)}const C=/[#0,]*[#0](?:\.0*#*)?/;function I(w){const T=B((w=w||{}).locale),O=w.pattern||T.pattern,x=T.group,N=T.decimal;let M=1;if(-1!==O.indexOf("%"))M/=100;else if(-1!==O.indexOf("\u2030"))M/=1e3;else if(-1!==O.indexOf("\xa4"))throw new Error("currency notation not supported");const Q=O.split(";");return 1===Q.length&&Q.push("-"+Q[0]),{regexp:X(Q,function(ee){return(ee="(?:"+(0,g.Qs)(ee,".")+")").replace(C,function(le){const oe={signed:!1,separator:w.strict?x:[x,""],fractional:w.fractional,decimal:N,exponent:!1},ce=le.split(".");let re=w.places;1===ce.length&&1!==M&&(ce[1]="###"),1===ce.length||0===re?oe.fractional=!1:(void 0===re&&(re=w.pattern?ce[1].lastIndexOf("0")+1:1/0),re&&null==w.fractional&&(oe.fractional=!0),!w.places&&re<ce[1].length&&(re+=","+ce[1].length),oe.places=re);const K=ce[0].split(",");return K.length>1&&(oe.groupSize=K.pop().length,K.length>1&&(oe.groupSize2=K.pop().length)),"("+function k(w){"places"in(w=w||{})||(w.places=1/0),"string"!=typeof w.decimal&&(w.decimal="."),"fractional"in w&&!/^0/.test(String(w.places))||(w.fractional=[!0,!1]),"exponent"in w||(w.exponent=[!0,!1]),"eSigned"in w||(w.eSigned=[!0,!1]);const T=Z(w),O=X(w.fractional,function(N){let M="";return N&&0!==w.places&&(M="\\"+w.decimal,w.places===1/0?M="(?:"+M+"\\d+)?":M+="\\d{"+w.places+"}"),M},!0);let x=T+O;return O&&(x="(?:(?:"+x+")|(?:"+O+"))"),x+X(w.exponent,function(N){return N?"([eE]"+Z({signed:w.eSigned})+")":""})}(oe)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:x,decimal:N,factor:M}}function W(w,T){const O=I(T),x=new RegExp("^"+O.regexp+"$").exec(w);if(!x)return NaN;let N=x[1];if(!x[1]){if(!x[2])return NaN;N=x[2],O.factor*=-1}return N=N.replace(new RegExp("["+O.group+"\\s\\xa0]","g"),"").replace(O.decimal,"."),Number(N)*O.factor}function Z(w){return"signed"in(w=w||{})||(w.signed=[!0,!1]),"separator"in w?"groupSize"in w||(w.groupSize=3):w.separator="",X(w.signed,function(T){return T?"[-+]":""},!0)+X(w.separator,function(T){if(!T)return"(?:\\d+)";" "===(T=(0,g.Qs)(T))?T="\\s":"\xa0"===T&&(T="\\s\\xa0");const O=w.groupSize,x=w.groupSize2;if(x){const N="(?:0|[1-9]\\d{0,"+(x-1)+"}(?:["+T+"]\\d{"+x+"})*["+T+"]\\d{"+O+"})";return O-x>0?"(?:"+N+"|(?:0|[1-9]\\d{0,"+(O-1)+"}))":N}return"(?:0|[1-9]\\d{0,"+(O-1)+"}(?:["+T+"]\\d{"+O+"})*)"},!0)}const X=function(w,T,O){if(!(w instanceof Array))return T(w);const x=[];for(let N=0;N<w.length;N++)x.push(T(w[N]));return V(x.join("|"),O)},V=function(w,T){return"("+(T?"?:":"")+w+")"}},94113:(He,ve,p)=>{"use strict";p.d(ve,{RH:()=>b,hS:()=>J,RB:()=>B});var g=p(58817);function b($,L,D=!1){return C($,L,D)}function J($,L){if(null!=L)return L[$]||j($.split("."),!1,L)}function B($,L,D){const I=$.split("."),W=I.pop(),k=j(I,!0,D);k&&W&&(k[W]=L)}function j($,L,D){let I=D;for(const W of $){if(null==I)return;if(!(W in I)){if(!L)return;I[W]={}}I=I[W]}return I}function C($,L,D){return L?Object.keys(L).reduce(function(I,W){let k=I[W],Z=L[W];return k===Z?I:void 0===k?(I[W]=(0,g.d9)(Z),I):(Array.isArray(Z)||Array.isArray(I)?(k=I[W]=k?Array.isArray(k)?k.concat():[k]:[],Z&&(Array.isArray(Z)||(Z=[Z]),D?Z.forEach(X=>{-1===k.indexOf(X)&&k.push(X)}):I[W]=Z.concat())):Z&&"object"==typeof Z?I[W]=C(k,Z,D):I.hasOwnProperty(W)&&!L.hasOwnProperty(W)||(I[W]=Z),I)},$||{}):$}},24192:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>$});var J,L,g=p(8314),b=p(27899);(L=J||(J={}))[L.varint=0]="varint",L[L.fixed64=1]="fixed64",L[L.delimited=2]="delimited",L[L.fixed32=5]="fixed32",L[L.unknown=99]="unknown";const B=4294967296,j=new TextDecoder("utf-8"),C=(0,g.Z)("safari")||(0,g.Z)("ios")?6:(0,g.Z)("ff")?12:32;class ${constructor(D,I,W=0,k=(D?D.byteLength:0)){this._tag=0,this._dataType=J.unknown,this._init(D,I,W,k)}_init(D,I,W,k){this._data=D,this._dataView=I,this._pos=W,this._end=k}clone(){return new $(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(D){this._pos=D}nextTag(D){for(;;){if(this._pos===this._end)return!1;const I=this._decodeVarint();if(this._tag=I>>3,this._dataType=7&I,!D||D===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const D=this._decodeVarint();return this._tag=D>>3,this._dataType=7&D,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let D=4294967295;return D=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?D:(D=(D|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?D:(D=(D|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?D:(D=(D|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?D:(D=(D|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?D:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const D=this.getUInt32();return D>>>1^-(1&D)|0}getSInt64(){return this._decodeSVarint()}getBool(){const D=0!==this._data[this._pos];return this._skip(1),D}getEnum(){return this._decodeVarint()}getFixed64(){const D=this._dataView,I=this._pos,W=D.getUint32(I,!0)+D.getUint32(I+4,!0)*B;return this._skip(8),W}getSFixed64(){const D=this._dataView,I=this._pos,W=D.getUint32(I,!0)+D.getInt32(I+4,!0)*B;return this._skip(8),W}getDouble(){const D=this._dataView.getFloat64(this._pos,!0);return this._skip(8),D}getFixed32(){const D=this._dataView.getUint32(this._pos,!0);return this._skip(4),D}getSFixed32(){const D=this._dataView.getInt32(this._pos,!0);return this._skip(4),D}getFloat(){const D=this._dataView.getFloat32(this._pos,!0);return this._skip(4),D}getString(){const D=this._getLength(),I=this._pos,W=this._toString(this._data,I,I+D);return this._skip(D),W}getBytes(){const D=this._getLength(),I=this._pos,W=this._toBytes(this._data,I,I+D);return this._skip(D),W}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(D,I,W,k){const Z=this.getMessage(),X=D(Z,I,W,k);return Z.release(),X}processMessage(D){const I=this.getMessage(),W=D(I);return I.release(),W}getMessage(){const D=this._getLength(),I=$.pool.acquire();return I._init(this._data,this._dataView,this._pos,this._pos+D),this._skip(D),I}release(){$.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case J.varint:this._decodeVarint();break;case J.fixed64:this._skip(8);break;case J.delimited:this._skip(this._getLength());break;case J.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(D){this._skip(D)}_skip(D){if(this._pos+D>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=D}_decodeVarint(){const D=this._data;let I,W=this._pos,k=0;if(this._end-W>=10)do{if(I=D[W++],k|=127&I,0==(128&I)||(I=D[W++],k|=(127&I)<<7,0==(128&I))||(I=D[W++],k|=(127&I)<<14,0==(128&I))||(I=D[W++],k|=(127&I)<<21,0==(128&I))||(I=D[W++],k+=268435456*(127&I),0==(128&I))||(I=D[W++],k+=34359738368*(127&I),0==(128&I))||(I=D[W++],k+=4398046511104*(127&I),0==(128&I))||(I=D[W++],k+=562949953421312*(127&I),0==(128&I))||(I=D[W++],k+=72057594037927940*(127&I),0==(128&I))||(I=D[W++],k+=0x8000000000000000*(127&I),0==(128&I)))break;throw new Error("Varint too long!")}while(0);else{let Z=1;for(;W!==this._end&&(I=D[W],0!=(128&I));)++W,k+=(127&I)*Z,Z*=128;if(W===this._end)throw new Error("Varint overrun!");++W,k+=I*Z}return this._pos=W,k}_decodeSVarint(){const D=this._decodeVarint();return D%2?-(D+1)/2:D/2}_getLength(){if(this._dataType!==J.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(D,I,W){if((W=Math.min(this._end,W))-I>C){const X=D.subarray(I,W);return j.decode(X)}let k="",Z="";for(let X=I;X<W;++X){const V=D[X];128&V?Z+="%"+V.toString(16):(k+=decodeURIComponent(Z)+String.fromCharCode(V),Z="")}return Z.length&&(k+=decodeURIComponent(Z)),k}_toBytes(D,I,W){return W=Math.min(this._end,W),new Uint8Array(D.buffer,I,W-I)}}$.pool=new b.Z($,null,L=>{L._data=null,L._dataView=null})},10699:(He,ve,p)=>{"use strict";p.d(ve,{e4:()=>ce,$6:()=>C,Ue:()=>L,zE:()=>D,dD:()=>Q,hh:()=>de,vr:()=>pe,Ds:()=>se,as:()=>z,WW:()=>ee,R8:()=>N,D_:()=>x,Hc:()=>k,y8:()=>K,fu:()=>V,$F:()=>w,d1:()=>le,DB:()=>oe,r9:()=>Z,k_:()=>I,H9:()=>X,Yn:()=>ie,gx:()=>ae,Hl:()=>T});var g=p(84244),b=p(26584),J=p(17770),j=(p(63290),p(62208));function C(te){return Promise.all(te)}function L(te){return new Promise((Ee,fe)=>{try{te(Ee,fe)}catch(be){Promise.resolve().then(()=>fe(be))}})}function D(te="Aborted"){return new b.Z("AbortError",te)}function I(te,Ee="Aborted"){if(k(te))throw D(Ee)}function W(te){return(0,j.pC)(te)?"aborted"in te?te:te.signal:te}function k(te){const Ee=W(te);return(0,j.pC)(Ee)&&Ee.aborted}function Z(te){if(x(te))throw te}function X(te){if(!x(te))throw te}function V(te,Ee){const fe=W(te);if(!(0,j.Wi)(fe)){if(!fe.aborted)return(0,J.IH)(fe,"abort",()=>Ee());Ee()}}function w(te,Ee){const fe=W(te);if(!(0,j.Wi)(fe))return I(fe),(0,J.IH)(fe,"abort",()=>Ee(D()))}function T(te,Ee){const fe=W(Ee);return(0,j.Wi)(fe)?te:new Promise((be,ye)=>{let Ke=V(Ee,()=>ye(D()));const Ue=()=>Ke=(0,j.hw)(Ke);te.then(Ue,Ue),te.then(be,ye)})}function x(te){return te&&"AbortError"===te.name}function N(te){return te.catch(Ee=>{if(!x(Ee))throw Ee})}function Q(){let te=null;const Ee=new Promise((fe,be)=>{te={promise:void 0,resolve:fe,reject:be}});return te.promise=Ee,te}function z(te){if(!te)return;if("function"!=typeof te.forEach){const fe=Object.keys(te);return z(fe.map(be=>te[be])).then(be=>{const ye={};return fe.forEach((Ke,Ue)=>ye[Ke]=be[Ue]),ye})}const Ee=te;return L(fe=>{const be=[];let ye=Ee.length;0===ye&&fe(be),Ee.forEach(Ke=>{const Ue={promise:Ke||Promise.resolve(Ke)};be.push(Ue),Ue.promise.then(he=>{Ue.value=he}).catch(he=>{Ue.error=he}).then(()=>{--ye,0===ye&&fe(be)})})})}function ee(te){return z(te).then(Ee=>Ee.filter(fe=>!!fe.value).map(fe=>fe.value))}function le(te){return Promise.reject(te)}function oe(te){return Promise.resolve(te)}function ce(te,Ee,fe){const be=new AbortController;return V(fe,()=>be.abort()),new Promise((ye,Ke)=>{let Ue=setTimeout(()=>{Ue=0,ye(Ee)},te);V(be,()=>{Ue&&(clearTimeout(Ue),Ke(D()))})})}function K(te){return te&&"function"==typeof te.then}function ae(te){return K(te)?te:Promise.resolve(te)}function se(te,Ee=-1){let fe,be,ye,Ke,Ue=null;const he=(...Me)=>{if(fe){be=Me,Ke&&Ke.reject(D()),Ke=Q();const xe=(0,j.j0)(Ke.promise);if(Ue){const Be=Ue;Ue=null,Be.abort()}return xe}if(ye=Ke||Q(),Ke=null,Ee>0){const xe=new AbortController;fe=ae(te(...Me,xe.signal));const Be=fe;ce(Ee).then(()=>{fe===Be&&(Ke?xe.abort():Ue=xe)})}else fe=1,fe=ae(te(...Me));const Le=()=>{const xe=be;be=ye=fe=Ue=null,null!=xe&&he(...xe)},Je=fe,Oe=ye;return Je.then(Le,Le),Je.then(Oe.resolve,Oe.reject),(0,j.j0)(Oe.promise)};return he}function de(){let te,Ee;const fe=new Promise((ye,Ke)=>{te=ye,Ee=Ke}),be=ye=>{te(ye)};return be.resolve=ye=>te(ye),be.reject=ye=>Ee(ye),be.timeout=(ye,Ke)=>g.m.setTimeout(()=>be.reject(Ke),ye),be.promise=fe,be}function pe(te,Ee){let fe,be=new AbortController;const ye=te(be.signal);let Ke={promise:ye,finished:!1,abort:()=>{be&&(be.abort(),be=null)}};const Ue=()=>{Ke&&(Ke.finished=!0,Ke=null),(0,j.pC)(fe)&&(fe.remove(),fe=null),be=null};return ye.then(Ue,Ue),fe=V(Ee,()=>{(0,j.pC)(Ke)&&Ke.abort()}),Ke}function ie(te){return Promise.resolve().then(()=>{I(te)})}},32917:(He,ve,p)=>{"use strict";p.d(ve,{nn:()=>T,on:()=>I,Z_:()=>w,tX:()=>O,YP:()=>$,gx:()=>L,N1:()=>k});var g=p(17770),b=p(54024),J=p(62208),B=p(10699),j=p(45262);function $(x,N,M={}){return D(x,N,M,X)}function L(x,N,M={}){return D(x,N,M,V)}function D(x,N,M={},Q){let z=null;const ee=M.once?(le,oe)=>{Q(le)&&((0,J.hw)(z),N(le,oe))}:(le,oe)=>{Q(le)&&N(le,oe)};if(z=(0,j.aQ)(x,ee,M.sync,M.equals),M.initial){const le=x();ee(le,le)}return z}function I(x,N,M,Q={}){let z=null,ee=null,le=null;function oe(){z&&ee&&(ee.remove(),null==Q.onListenerRemove||Q.onListenerRemove(z),z=null,ee=null)}function ce(K){Q.once&&Q.once&&(0,J.hw)(le),M(K)}const re=$(x,(K,ae)=>{oe(),(0,g.vT)(K)&&(z=K,ee=(0,g.on)(K,N,ce),null==Q.onListenerAdd||Q.onListenerAdd(K))},{sync:Q.sync,initial:!0});return le=(0,b.kB)(()=>{re.remove(),oe()}),le}function k(x,N){return function Z(x,N,M){if((0,B.Hc)(M))return Promise.reject((0,B.zE)());const Q=x();if(null!=N&&N(Q))return Promise.resolve(Q);let z=null;function ee(){z=(0,J.hw)(z)}return new Promise((le,oe)=>{z=(0,b.AL)([(0,B.fu)(M,()=>{ee(),oe((0,B.zE)())}),D(x,ce=>{ee(),le(ce)},{sync:!1,once:!0},null!=N?N:X)])})}(x,V,N)}function X(x){return!0}function V(x){return!!x}p(21352);const w={sync:!0},T={initial:!0},O={sync:!0,initial:!0}},50618:(He,ve,p)=>{"use strict";p.d(ve,{A:()=>O,Os:()=>T,MU:()=>ce});var g=p(62208),b=p(79682),J=p(73362),B=p(77029),j=p(10699),C=p(27422);class ${constructor(se){this.phases=se,this.paused=!1,this.ticks=-1,this.removed=!1}}class L{constructor(se){this.callback=se,this.isActive=!0}remove(){this.isActive=!1}}let D=0;const W={time:(0,C.HA)(0),deltaTime:(0,C.HA)(0),elapsedFrameTime:(0,C.HA)(0),frameDuration:(0,C.HA)(0)},k=["prepare","preRender","render","postRender","update","finish"],Z=[],X=new B.Z;class V{constructor(se){this._task=se}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const w={frameTasks:X,willDispatch:!1,clearFrameTasks:function N(ae=!1){X.forAll(se=>{se.removed=!0}),ae&&le()},dispatch:oe,executeFrameTasks:function z(ae){const se=(0,C.HA)(ae-D);D=ae;const de=1e3/60,ue=Math.max(0,se-de);for(let pe=0;pe<k.length;pe++){const ie=performance.now(),te=k[pe];X.forAll(Ee=>{var fe;Ee.paused||Ee.removed||(0===pe&&Ee.ticks++,Ee.phases[te]&&(W.time=ae,W.deltaTime=0===Ee.ticks?(0,C.HA)(0):se,W.elapsedFrameTime=(0,C.HA)(performance.now()-ae),W.frameDuration=(0,C.HA)(de-ue),null==(fe=Ee.phases[te])||fe.call(Ee,W)))}),re[pe].record(performance.now()-ie)}le(),K.record(performance.now()-ae)}};function T(ae){const se=new L(ae);return Z.push(se),w.willDispatch||(w.willDispatch=!0,(0,b.Y)(oe)),se}function O(ae){const se=new $(ae);return X.push(se),null==x&&(D=performance.now(),x=requestAnimationFrame(Q)),new V(se)}let x=null;function Q(){const ae=performance.now();x=null,x=X.length>0?requestAnimationFrame(Q):null,w.executeFrameTasks(ae)}const ee=new B.Z;function le(){X.forAll(ae=>{ae.removed&&ee.push(ae)}),X.removeUnorderedMany(ee.data,ee.length),ee.clear()}function oe(){for(;Z.length;){const ae=(0,g.j0)(Z.shift());ae.isActive&&ae.callback()}w.willDispatch=!1}function ce(ae=1,se){const de=(0,j.hh)(),ue=()=>{(0,j.Hc)(se)?de.reject((0,j.zE)()):0===ae?de():(--ae,(0,b.Y)(()=>ue()))};return ue(),de.promise}const re=k.map(ae=>new J.Z(ae)),K=new J.Z("total")},23841:(He,ve,p)=>{"use strict";p.d(ve,{vW:()=>$,s1:()=>L,F2:()=>B,Wz:()=>j,t_:()=>C});const g=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function B(T){return T?T/72*96:0}function j(T){return T?72*T/96:0}function C(T){if("string"==typeof T){const O=T.match(g);if(O){const x=Number(O[1]),N=O[3]&&O[3].toLowerCase(),M="-"===T.charAt(0),Q="px"===N?j(x):x;return M?-Q:Q}return console.warn("screenUtils.toPt: input not recognized!"),null}return T}function $(T=0,O=0){return{x:T,y:O}}function L(T=0,O=0){return[T,O]}},77275:(He,ve,p)=>{"use strict";p.d(ve,{Qs:()=>j,hP:()=>C,gx:()=>B,Cb:()=>$});var g=p(94113);const b=/\{([^\}]+)\}/g;function J(L){return null==L?"":L}function B(L,D){return L.replace(b,"object"==typeof D?(I,W)=>J((0,g.hS)(W,D)):(I,W)=>J(D(W)))}function j(L,D){return L.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,I=>D&&-1!==D.indexOf(I)?I:`\\${I}`)}function C(L){let D=0;for(let I=0;I<L.length;I++)D=(D<<5)-D+L.charCodeAt(I),D|=0;return D}function $(L){return(new DOMParser).parseFromString(L||"","text/html").body.innerText||""}},28705:(He,ve,p)=>{"use strict";p.d(ve,{a:()=>k,z:()=>Z});var g=p(17626),b=p(48701),J=p(89726),B=p(80542),C=(p(8314),p(63290)),$=p(62208),L=p(77712),W=(p(85931),p(90912),p(76898));C.Z.getLogger("esri.core.support.OwningCollection");let k=class extends((0,B.p)(b.Z)){constructor(X){super(X),this.handles.add([this.on("before-add",V=>{(0,$.Wi)(V.item)&&V.preventDefault()}),this.on("after-add",V=>this._own(V.item)),this.on("after-remove",V=>this._release(V.item))])}get owner(){return this._get("owner")}set owner(X){X!==this._get("owner")&&(this._releaseAll(),this._set("owner",X),this._ownAll())}_ownAll(){for(const X of this.items)this._own(X)}_releaseAll(){for(const X of this.items)this._release(X)}_createNewInstance(X){return this.itemType?new(b.Z.ofType(this.itemType.Type))(X):new b.Z(X)}};function Z(X,V){return{type:X,cast:J.R,set(w){const T=(0,J.Z)(w,this._get(V),X);T.owner=this,this._set(V,T)}}}(0,g._)([(0,L.Cb)()],k.prototype,"owner",null),k=(0,g._)([(0,W.j)("esri.core.support.OwningCollection")],k)},7074:(He,ve,p)=>{"use strict";function g(b,J,B,j){let C=null,$=1e3;"number"==typeof J?($=J,j=B):(C=null!=J?J:null,$=B);let L,D=0;const I=()=>{D=0,b.apply(j,L)},W=(...k)=>{C&&C.apply(j,k),L=k,$?D||(D=setTimeout(I,$)):I()};return W.remove=()=>{D&&(clearTimeout(D),D=0)},W.forceUpdate=()=>{D&&(clearTimeout(D),I())},W.hasPendingUpdates=()=>!!D,W}p.d(ve,{P:()=>g})},27422:(He,ve,p)=>{"use strict";function g(j){return j}p.d(ve,{HA:()=>g})},28170:(He,ve,p)=>{"use strict";p.d(ve,{rJ:()=>k,Nm:()=>j,JE:()=>$}),p(8314);const b={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},J={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function j(Z,X,V){const w=new Date(Z.getTime());if(X&&V){const T=J[V],{getter:O,setter:x,multiplier:N}=T;if("months"===V){const M=function B(Z,X){const V=new Date(Z,X+1,1);return V.setDate(0),V.getDate()}(w.getFullYear(),w.getMonth()+X);w.getDate()>M&&w.setDate(M)}w[x](w[O]()+X*N)}return w}function $(Z,X){switch(X){case"milliseconds":return new Date(Z.getTime());case"seconds":return new Date(Z.getFullYear(),Z.getMonth(),Z.getDate(),Z.getHours(),Z.getMinutes(),Z.getSeconds());case"minutes":return new Date(Z.getFullYear(),Z.getMonth(),Z.getDate(),Z.getHours(),Z.getMinutes());case"hours":return new Date(Z.getFullYear(),Z.getMonth(),Z.getDate(),Z.getHours());case"days":return new Date(Z.getFullYear(),Z.getMonth(),Z.getDate());case"weeks":return new Date(Z.getFullYear(),Z.getMonth(),Z.getDate()-Z.getDay());case"months":return new Date(Z.getFullYear(),Z.getMonth(),1);case"years":return new Date(Z.getFullYear(),0,1);case"decades":return new Date(Z.getFullYear()-Z.getFullYear()%10,0,1);case"centuries":return new Date(Z.getFullYear()-Z.getFullYear()%100,0,1);default:return new Date}}function k(Z,X,V){return 0===Z?0:Z*b[X]/b[V]}},55713:(He,ve,p)=>{"use strict";function g(V,w){if(V.forEach)V.forEach(w);else for(let T=0;T<V.length;T++)w(V[T],T,V)}function b(V,w,T){if(V.slice)return V.slice(w,T);void 0===w?w=0:(w<0&&(w+=V.length),w=Math.min(V.length,Math.max(0,w))),void 0===T?T=V.length:(T<0&&(T+=V.length),T=Math.min(V.length,Math.max(0,T)));const O=Math.max(0,T-w),x=new V.constructor(O);for(let N=0;N<O;N++)x[N]=V[w+N];return x}function J(V){return V instanceof ArrayBuffer||V&&V.constructor&&"ArrayBuffer"===V.constructor.name}function B(V){return V instanceof Int8Array||V&&V.constructor&&"Int8Array"===V.constructor.name}function j(V){return V instanceof Uint8Array||V&&V.constructor&&"Uint8Array"===V.constructor.name}function C(V){return V instanceof Uint8ClampedArray||V&&V.constructor&&"Uint8ClampedArray"===V.constructor.name}function $(V){return V instanceof Int16Array||V&&V.constructor&&"Int16Array"===V.constructor.name}function L(V){return V instanceof Uint16Array||V&&V.constructor&&"Uint16Array"===V.constructor.name}function D(V){return V instanceof Int32Array||V&&V.constructor&&"Int32Array"===V.constructor.name}function I(V){return V instanceof Uint32Array||V&&V.constructor&&"Uint32Array"===V.constructor.name}function W(V){return V instanceof Float32Array||V&&V.constructor&&"Float32Array"===V.constructor.name}function k(V){return V instanceof Float64Array||V&&V.constructor&&"Float64Array"===V.constructor.name}p.d(ve,{Ed:()=>g,eP:()=>J,xZ:()=>W,fS:()=>k,z3:()=>$,Hx:()=>D,W0:()=>B,Uc:()=>L,ZY:()=>I,lq:()=>j,KZ:()=>C,tP:()=>b})},86236:(He,ve,p)=>{"use strict";p.d(ve,{D:()=>J});let g=0;function J(){return++g}},16730:(He,ve,p)=>{"use strict";p.d(ve,{gV:()=>Qe,En:()=>K,Z7:()=>Me,c9:()=>he,_R:()=>Ke,qE:()=>Oe,cM:()=>Ue,hd:()=>D,ty:()=>fe,Jo:()=>Xe,$C:()=>be}),p(8314);var b=p(2076),J=p(62208),B=p(12080),j=p(65234),C=p(94425),$=p(37053),L=p(84029);const D=39.37,I=C.sv.radius*Math.PI/200,W=/UNIT\[([^\]]+)\]\]$/i,k=L.Z,Z=/UNIT\[([^\]]+)\]/i,X=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),V=(0,b.w)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),w=ke=>ke*ke,T=ke=>ke*ke*ke,O={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:w(.001)},"square-centimeters":{inBaseUnits:w(.01)},"square-decimeters":{inBaseUnits:w(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:w(1e3)},"square-inches":{inBaseUnits:w(.0254)},"square-feet":{inBaseUnits:w(.3048)},"square-yards":{inBaseUnits:w(.9144)},"square-miles":{inBaseUnits:w(1609.344)},"square-us-feet":{inBaseUnits:w(1200/3937)},acres:{inBaseUnits:.0015625*w(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*T(.001)},"cubic-centimeters":{inBaseUnits:1e3*T(.01)},"cubic-decimeters":{inBaseUnits:1e3*T(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*T(1e3)},"cubic-inches":{inBaseUnits:1e3*T(.0254)},"cubic-feet":{inBaseUnits:1e3*T(.3048)},"cubic-yards":{inBaseUnits:1e3*T(.9144)},"cubic-miles":{inBaseUnits:1e3*T(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},x=function(){const ke={};for(const dt in O)for(const We in O[dt].units)ke[We]=dt;return ke}();function le(ke){const dt=x[ke];if(dt)return dt;throw new Error("unknown type")}function re(ke,dt=null){return dt=dt||le(ke),O[dt].baseUnit===ke}function K(ke,dt,We){if(dt===We)return ke;const nt=le(dt);if(nt!==le(We))throw new Error("incompatible units");const ht=re(dt,nt)?ke:function N(ke,dt,We){return ke*O[We].units[dt].inBaseUnits}(ke,dt,nt);return re(We,nt)?ht:function M(ke,dt,We){return ke/O[We].units[dt].inBaseUnits}(ht,We,nt)}function fe(ke,dt,We){return K(ke,dt,"meters")/(We*Math.PI/180)}function be(ke){return V.fromJSON(ke.toLowerCase())||null}function Ke(ke){if(ke&&"object"==typeof ke&&!(0,$.N$)(ke))return 1;const dt=he(ke);return dt>1e5?1:dt}function Ue(ke){return he(ke)>=(ke instanceof j.Z?(0,B.Iu)(ke).metersPerDegree:1e5)?"meters":Oe(ke)}function he(ke,dt=C.sv.metersPerDegree){return Me(ke,!0)||dt}function Me(ke,dt=!1){let We,nt,ht=null;if(null!=ke&&("object"==typeof ke?(We=ke.wkid,nt=ke.wkt):"number"==typeof ke?We=ke:"string"==typeof ke&&(nt=ke)),We){if((0,$.o$)(We))return C.yr.metersPerDegree;if((0,$.ME)(We))return C.Z1.metersPerDegree;ht=k.values[k[We]],!ht&&dt&&X.has(We)&&(ht=I)}else nt&&(Be(nt)?ht=Le(W.exec(nt),ht):xe(nt)&&(ht=Le(Z.exec(nt),ht)));return ht}function Le(ke,dt){return ke&&ke[1]?Je(ke[1]):dt}function Je(ke){return parseFloat(ke.split(",")[1])}function Oe(ke){let dt,We,nt=null;if(null!=ke&&("object"==typeof ke?(dt=ke.wkid,We=ke.wkt):"number"==typeof ke?dt=ke:"string"==typeof ke&&(We=ke)),dt)nt=k.units[k[dt]];else if(We){const ht=Be(We)?W:xe(We)?Z:null;if(ht){const mt=ht.exec(We);mt&&mt[1]&&(nt=function me(ke){const dt=/[\\"\\']{1}([^\\"\\']+)/.exec(ke);let We=dt&&dt[1];if(!We||-1===k.units.indexOf(We)){const nt=Je(ke);We=null;const ht=k.values;for(let mt=0;mt<ht.length;++mt)if(Math.abs(nt-ht[mt])<1e-7){We=k.units[mt];break}}return We}(mt[1]))}}return(0,J.pC)(nt)?be(nt):null}function xe(ke){return/^GEOCCS/i.test(ke)}function Be(ke){return/^PROJCS/i.test(ke)}const $e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},rt={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Qe=(0,b.w)()($e),Xe=(0,b.w)()(rt);(0,b.w)()(_t(_t({},$e),rt))},21726:(He,ve,p)=>{"use strict";p.d(ve,{R9:()=>w,qg:()=>se,tD:()=>ie,ZN:()=>ot,fl:()=>Pe,rS:()=>Ie,Ie:()=>Qt,sJ:()=>rt,AH:()=>me,io:()=>ke,L:()=>z,TI:()=>Q,vt:()=>St,oh:()=>be,P$:()=>Oe,Ml:()=>vt,ed:()=>te,b7:()=>ae,D6:()=>ye,tm:()=>Ee,YP:()=>xe,jc:()=>Be,HK:()=>Y,$U:()=>Bt,oC:()=>mt,zd:()=>ut,kl:()=>Ke,v_:()=>Je,hF:()=>he,_l:()=>Qe,PF:()=>Me,Fv:()=>Le,B7:()=>K,u0:()=>ce,Yd:()=>ft,Hu:()=>Ze,Qj:()=>Ft,hO:()=>er,mN:()=>oe});var g=p(59318),b=p(26584),J=p(63290),B=p(62208);const j=J.Z.getLogger("esri.core.urlUtils"),C=g.Z.request,$="esri/config: esriConfig.request.proxyUrl is not set.",L=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,D=/^\s*http:/i,I=/^\s*https:/i,W=/^\s*file:/i,k=/:\d+$/,Z=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,X=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),V=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class w{constructor(Rt=""){this.uri=Rt,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let Ut=(0,B.j0)(this.uri.match(X));this.scheme=Ut[2]||(Ut[1]?"":null),this.authority=Ut[4]||(Ut[3]?"":null),this.path=Ut[5],this.query=Ut[7]||(Ut[6]?"":null),this.fragment=Ut[9]||(Ut[8]?"":null),null!=this.authority&&(Ut=(0,B.j0)(this.authority.match(V)),this.user=Ut[3]||null,this.password=Ut[4]||null,this.host=Ut[6]||Ut[7],this.port=Ut[9]||null)}toString(){return this.uri}}const T={};let x=new w(g.Z.applicationUrl);let M=function ee(){const et=(0,B.j0)(x.path),Rt=et.substring(0,et.lastIndexOf(et.split("/")[et.split("/").length-1]));return`${x.scheme}://${x.host}${null!=x.port?`:${x.port}`:""}${Rt}`}();const Q=()=>x,z=()=>M;function oe(et){const Rt={path:null,query:null},Ut=new w(et),Jt=et.indexOf("?");return null===Ut.query?Rt.path=et:(Rt.path=et.substring(0,Jt),Rt.query=ce(Ut.query)),Ut.fragment&&(Rt.hash=Ut.fragment,null===Ut.query&&(Rt.path=Rt.path.substring(0,Rt.path.length-(Ut.fragment.length+1)))),Rt}function ce(et){const Rt=et.split("&"),Ut={};for(const Jt of Rt){if(!Jt)continue;const nr=Jt.indexOf("=");let Tr,Gr;nr<0?(Tr=decodeURIComponent(Jt),Gr=""):(Tr=decodeURIComponent(Jt.slice(0,nr)),Gr=decodeURIComponent(Jt.slice(nr+1)));let Qr=Ut[Tr];"string"==typeof Qr&&(Qr=Ut[Tr]=[Qr]),Array.isArray(Qr)?Qr.push(Gr):Ut[Tr]=Gr}return Ut}function re(et){return et&&"object"==typeof et&&"toJSON"in et&&"function"==typeof et.toJSON}function K(et,Rt){return et?Rt&&"function"==typeof Rt?Object.keys(et).map(Ut=>encodeURIComponent(Ut)+"="+encodeURIComponent(Rt(Ut,et[Ut]))).join("&"):Object.keys(et).map(Ut=>{const Jt=et[Ut];if(null==Jt)return"";const nr=encodeURIComponent(Ut)+"=",Tr=Rt&&Rt[Ut];return Tr?nr+encodeURIComponent(Tr(Jt)):Array.isArray(Jt)?Jt.map(Gr=>re(Gr)?nr+encodeURIComponent(JSON.stringify(Gr)):nr+encodeURIComponent(Gr)).join("&"):re(Jt)?nr+encodeURIComponent(JSON.stringify(Jt)):nr+encodeURIComponent(Jt)}).filter(Ut=>Ut).join("&"):""}function ae(et=!1){let Rt,Ut=C.proxyUrl;if("string"==typeof et){Rt=Bt(et);const Jt=te(et);Jt&&(Ut=Jt.proxyUrl)}else Rt=!!et;if(!Ut)throw j.warn($),new b.Z("urlutils:proxy-not-set",$);return Rt&&pr()&&(Ut=er(Ut)),oe(Ut)}function se(et){const Rt=te(et);let Ut,Jt;if(Rt){const nr=ue(Rt.proxyUrl);Ut=nr.path,Jt=nr.query?ce(nr.query):null}if(Ut){const nr=oe(et);et=Ut+"?"+nr.path;const Tr=K(_t(_t({},Jt),nr.query));Tr&&(et=`${et}?${Tr}`)}return et}const de={path:"",query:""};function ue(et){const Rt=et.indexOf("?");return-1!==Rt?(de.path=et.slice(0,Rt),de.query=et.slice(Rt+1)):(de.path=et,de.query=null),de}function pe(et){return(et=hr(et=function Lt(et){return et&&"/"===et[et.length-1]?et:`${et}/`}(et=ue(et).path),!0)).toLowerCase()}function ie(et){const Rt={proxyUrl:et.proxyUrl,urlPrefix:pe(et.urlPrefix)},Ut=C.proxyRules,Jt=Rt.urlPrefix;let nr=Ut.length;for(let Tr=0;Tr<Ut.length;Tr++){const Gr=Ut[Tr].urlPrefix;if(0===Jt.indexOf(Gr)){if(Jt.length===Gr.length)return-1;nr=Tr;break}0===Gr.indexOf(Jt)&&(nr=Tr+1)}return Ut.splice(nr,0,Rt),nr}function te(et){const Rt=C.proxyRules,Ut=pe(et);for(let Jt=0;Jt<Rt.length;Jt++)if(0===Ut.indexOf(Rt[Jt].urlPrefix))return Rt[Jt]}function Ee(et,Rt){return et=fe(et),Rt=fe(Rt),hr(et)===hr(Rt)}function fe(et){const Rt=(et=Le(et)).indexOf("/sharing");return Rt>0?et.substring(0,Rt):et.replace(/\/+$/,"")}function be(et){const Rt=Jt=>null==Jt||Jt instanceof RegExp&&Jt.test(et)||"string"==typeof Jt&&et.startsWith(Jt),Ut=C.interceptors;if(Ut)for(const Jt of Ut)if(Array.isArray(Jt.urls)){if(Jt.urls.some(Rt))return Jt}else if(Rt(Jt.urls))return Jt;return null}function ye(et,Rt,Ut=!1){const Jt=gt(et),nr=gt(Rt);return!(!Ut&&Jt.scheme!==nr.scheme)&&null!=Jt.host&&null!=nr.host&&Jt.host.toLowerCase()===nr.host.toLowerCase()&&Jt.port===nr.port}function Ke(et){if("string"==typeof et){if(!xe(et))return!0;et=gt(et)}if(ye(et,x))return!0;const Rt=C.trustedServers||[];for(let Ut=0;Ut<Rt.length;Ut++){const Jt=Ue(Rt[Ut]);for(let nr=0;nr<Jt.length;nr++)if(ye(et,Jt[nr]))return!0}return!1}function Ue(et){return T[et]||(T[et]=Kt(et)||mt(et)?[new w(he(et))]:[new w(`http://${et}`),new w(`https://${et}`)]),T[et]}function he(et,Rt=M,Ut){return mt(et)?Ut&&Ut.preserveProtocolRelative?et:"http"===x.scheme&&x.authority===Oe(et).slice(2)?`http:${et}`:`https:${et}`:Kt(et)?et:(0,B.j0)(Je("/"===et[0]?function st(et){const Rt=et.indexOf("//"),Ut=et.indexOf("/",Rt+2);return-1===Ut?et:et.slice(0,Ut)}(Rt):Rt,et))}function Me(et,Rt=M,Ut){if(!xe(et))return et;const Jt=Le(et),nr=Jt.toLowerCase(),Tr=Le(Rt).toLowerCase().replace(/\/+$/,""),Gr=Ut?Le(Ut).toLowerCase().replace(/\/+$/,""):null;if(Gr&&0!==Tr.indexOf(Gr))return et;const Qr=(Ms,ys,Ys)=>-1===(Ys=Ms.indexOf(ys,Ys))?Ms.length:Ys;let Zr=Qr(nr,"/",nr.indexOf("//")+2),es=-1;for(;nr.slice(0,Zr+1)===Tr.slice(0,Zr)+"/"&&(es=Zr+1,Zr!==nr.length);)Zr=Qr(nr,"/",Zr+1);if(-1===es||Gr&&es<Gr.length)return et;et=Jt.slice(es);const bs=Tr.slice(es-1).replace(/[^/]+/g,"").length;if(bs>0)for(let Ms=0;Ms<bs;Ms++)et=`../${et}`;else et=`./${et}`;return et}function Le(et){return function Gt(et){const Rt=C.httpsDomains;if(!function $t(et){return D.test(et)||"http"===x.scheme&&mt(et)}(et))return et;const Ut=et.indexOf("/",7);let Jt;if(Jt=-1===Ut?et:et.slice(0,Ut),Jt=Jt.toLowerCase().slice(7),k.test(Jt)){if(!Jt.endsWith(":80"))return et;Jt=Jt.slice(0,-3),et=et.replace(":80","")}return function vr(){return"http"===x.scheme}()&&Jt===x.authority&&!Z.test(et)||(pr()&&Jt===x.authority||Rt&&Rt.some(nr=>Jt===nr||Jt.endsWith(`.${nr}`))||pr()&&!te(et))&&(et=er(et)),et}(et=function Vt(et){return et.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(et=function Dt(et){if(/^https?:\/\//i.test(et)){const Rt=ue(et);et=(et=Rt.path.replace(/\/{2,}/g,"/")).replace("/","//"),Rt.query&&(et+=`?${Rt.query}`)}return et}(et=he(et=et.trim()))))}function Je(...et){const Rt=et.filter(B.pC);if(!Rt||!Rt.length)return;const Ut=[];if(xe(Rt[0])){const nr=Rt[0],Tr=nr.indexOf("//");-1!==Tr&&(Ut.push(nr.slice(0,Tr+1)),function qt(et){return W.test(et)}(Rt[0])&&(Ut[0]+="/"),Rt[0]=nr.slice(Tr+2))}else"/"===Rt[0][0]&&Ut.push("");const Jt=Rt.reduce((nr,Tr)=>Tr?nr.concat(Tr.split("/")):nr,[]);for(let nr=0;nr<Jt.length;nr++){const Tr=Jt[nr];".."===Tr&&Ut.length>0&&".."!==Ut[Ut.length-1]?Ut.pop():(!Tr&&nr===Jt.length-1||Tr&&("."!==Tr||0===Ut.length))&&Ut.push(Tr)}return Ut.join("/")}function Oe(et,Rt=!1){if(Be(et)||Y(et))return null;let Ut=et.indexOf("://");if(-1===Ut&&mt(et))Ut=2;else{if(-1===Ut)return null;Ut+=3}const Jt=et.indexOf("/",Ut);return-1!==Jt&&(et=et.slice(0,Jt)),Rt&&(et=hr(et,!0)),et}function xe(et){return mt(et)||Kt(et)}function Be(et){return null!=et&&"blob:"===et.slice(0,5)}function Y(et){return"data:"===et.slice(0,5)}function me(et){const Rt=rt(et);if(!Rt||!Rt.isBase64)return null;const Ut=atob(Rt.data),Jt=new Uint8Array(Ut.length);for(let nr=0;nr<Ut.length;nr++)Jt[nr]=Ut.charCodeAt(nr);return Jt.buffer}function Ie(et){return btoa(String.fromCharCode.apply(null,et)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const $e=/^data:(.*?)(;base64)?,(.*)$/;function rt(et){const Rt=et.match($e);if(!Rt)return null;const[,Ut,Jt,nr]=Rt;return{mediaType:Ut,isBase64:!!Jt,data:nr}}function Qe(et){return et.isBase64?`data:${et.mediaType};base64,${et.data}`:`data:${et.mediaType},${et.data}`}function ke(et,Rt){(function We(et,Rt){if(!et)return!1;const Ut=document.createElement("a");if(!("download"in Ut))return!1;const Jt=URL.createObjectURL(et);return Ut.download=Rt,Ut.href=Jt,Ut.style.display="none",document.body.appendChild(Ut),Ut.click(),document.body.removeChild(Ut),URL.revokeObjectURL(Jt),!0})(et,Rt)||function ht(et,Rt){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(et,Rt)}(et,Rt)}function mt(et){return null!=et&&void 0!==et&&"/"===et[0]&&"/"===et[1]}function Kt(et){return L.test(et)}function Bt(et){return I.test(et)||"https"===x.scheme&&mt(et)}function er(et){return mt(et)?`https:${et}`:et.replace(D,"https:")}function pr(){return"https"===x.scheme}function hr(et,Rt=!1){return mt(et)?et.slice(2):(et=et.replace(L,""),Rt&&et.length>1&&"/"===et[0]&&"/"===et[1]&&(et=et.slice(2)),et)}function ft(et){let Rt=0;if(xe(et)){const Jt=et.indexOf("//");-1!==Jt&&(Rt=Jt+2)}const Ut=et.lastIndexOf("/");return Ut<Rt?et:et.slice(0,Ut+1)}function St(et,Rt){if(!et)return"";const Ut=oe(et).path.replace(/\/+$/,""),Jt=Ut.substring(Ut.lastIndexOf("/")+1);if(null==Rt||!Rt.length)return Jt;const nr=new RegExp(`.(${Rt.join("|")})$`,"ig");return Jt.replace(nr,"")}function Ft(et){return et.replace(/\/+$/,"")}function Qt(et,Rt,Ut){if(!(Rt&&Ut&&et&&xe(et)))return et;const Jt=et.indexOf("//"),nr=et.indexOf("/",Jt+2),Tr=et.indexOf(":",Jt+2),Gr=Math.min(nr<0?et.length:nr,Tr<0?et.length:Tr);return et.slice(Jt+2,Gr).toLowerCase()!==Rt.toLowerCase()?et:`${et.slice(0,Jt+2)}${Ut}${et.slice(Gr)}`}function gt(et){return"string"==typeof et?new w(he(et)):(et.scheme||(et.scheme=x.scheme),et)}function ut(et){return Yt.test(et)}function Ze(et,Rt){const Ut=oe(et),Jt=Object.keys(Ut.query||{});return Jt.length>0&&Rt&&Rt.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${Jt.join(", ")}.`),Ut.path}function ot(et,Rt,Ut){const Jt=oe(et),nr=Jt.query||{};return nr[Rt]=String(Ut),`${Jt.path}?${K(nr)}`}function Pe(et,Rt){const Ut=oe(et),Jt=Ut.query||{};for(const Tr in Rt)Jt[Tr]=Rt[Tr];const nr=K(Jt);return nr?`${Ut.path}?${nr}`:Ut.path}function vt(et){if((0,B.Wi)(et))return null;const Rt=et.match(zt);return Rt?Rt[1]:null}const zt=/.*?\.([^\/]*)$/,Yt=/(^data:image\/svg|\.svg$)/i},35948:(He,ve,p)=>{"use strict";function g(){const b=crypto.getRandomValues(new Uint16Array(8));b[3]=4095&b[3]|16384,b[4]=16383&b[4]|32768;const J=B=>b[B].toString(16);return J(0)+J(1)+"-"+J(2)+"-"+J(3)+"-"+J(4)+"-"+J(5)+J(6)+J(7)}p.d(ve,{D:()=>g})},27e3:(He,ve,p)=>{"use strict";p.d(ve,{S1:()=>j,on:()=>z,Wy:()=>Q,YP:()=>C,gx:()=>L,Nj:()=>X,PA:()=>I,cm:()=>W,Z4:()=>k});var g=p(17770),J=(p(58817),p(10699));const B=/\?(\.|$)/g;function j(de,ue,pe,ie){const te=Array.isArray(ue)?ue:ue.indexOf(",")>-1?ue.split(","):[ue],Ee=C(de,ue,pe,ie);for(const fe of te){const be=fe.trim().replace(B,"$1"),ye=de.get(be);pe.call(de,ye,ye,be,de)}return Ee}function C(de,ue,pe,ie){return de.watch(ue,pe,ie)}function L(de,ue,pe,ie){return ee(de,ue,oe,pe,ie)}function I(de,ue,pe,ie){return ee(de,ue,ce,pe,ie)}function W(de,ue,pe,ie){return function le(de,ue,pe,ie,te){const Ee="function"==typeof ie?ie:null,fe="object"==typeof ie?ie:null;"boolean"==typeof ie&&(te=ie);let be,ye=!1;function Ke(){be&&(be.remove(),be=null)}const Ue=(0,J.dD)();(0,J.fu)(fe,()=>{Ke(),Ue.reject((0,J.zE)())});const he={then:Ue.promise.then.bind(Ue.promise),catch:Ue.promise.catch.bind(Ue.promise),remove:Ke};return Object.freeze(he),be=ee(de,ue,pe,(Me,Le,Je,Oe)=>{ye=!0,Ke(),Ee&&Ee.call(de,Me,Le,Je,Oe),Ue.resolve({value:Me,oldValue:Le,propertyName:Je,target:Oe})},te),ye&&Ke(),he}(de,ue,ce,pe,ie)}function k(de,ue,pe,ie){return ee(de,ue,re,pe,ie)}function X(de,ue,pe,ie){return ee(de,ue,K,pe,ie)}function Q(de,ue,pe,ie){let te=!1;const Ee=de.watch(ue,(fe,be,ye,Ke)=>{te||pe.call(de,fe,be,ye,Ke)},ie);return{remove(){Ee.remove()},pause(){te=!0},resume(){te=!1}}}function z(de,ue,pe,ie,te,Ee,fe){const be={};function ye(Ue){const he=be[Ue];he&&(Ee&&Ee(he.target,Ue,de,pe),he.handle.remove(),delete be[Ue])}const Ke=j(de,ue,(Ue,he,Me)=>{ye(Me),(0,g.vT)(Ue)&&(be[Me]={handle:(0,g.on)(Ue,pe,ie),target:Ue},te&&te(Ue,Me,de,pe))},fe);return{remove(){Ke.remove();for(const Ue in be)ye(Ue)}}}function ee(de,ue,pe,ie,te){const Ee=de.watch(ue,(fe,be,ye,Ke)=>{pe&&!pe(fe)||null==ie||ie.call(de,fe,be,ye,Ke)},te);if(Array.isArray(ue))for(const fe of ue){const be=de.get(fe);pe&&pe(be)&&(null==ie||ie.call(de,be,be,ue,de))}else{const fe=de.get(ue);pe&&pe(fe)&&(null==ie||ie.call(de,fe,fe,ue,de))}return Ee}function oe(de){return!!de}function ce(de){return!de}function re(de){return!0===de}function K(de){return!1===de}},93662:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>C});var g=p(54024),b=p(63290),J=p(10699),B=p(89951);const j=b.Z.getLogger("esri.core.workers.Connection");class C{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(L,D){return new Promise((I,W)=>{let k=!0;const Z=X=>{(0,J.k_)(D.signal),k&&(k=!1,X())};this._clients.length=L.length,this._clientPromises.length=L.length;for(let X=0;X<L.length;++X){const V=L[X];(0,J.y8)(V)?this._clientPromises[X]=V.then(w=>(this._clients[X]=new B.Z(w,D),Z(I),this._clients[X]),()=>(Z(W),null)):(this._clients[X]=new B.Z(V,D),this._clientPromises[X]=Promise.resolve(this._clients[X]),Z(I))}})}broadcast(L,D,I){const W=new Array(this._clientPromises.length);for(let k=0;k<this._clientPromises.length;++k)W[k]=this._clientPromises[k].then(X=>X.invoke(L,D,I));return W}close(){for(const L of this._clientPromises)L.then(D=>D.close());this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let L;for(let D=0;D<this._clients.length;++D){const I=this._clients[D];if(I){if(!I.isBusy())return Promise.resolve(I)}else L=L||[],L.push(this._clientPromises[D])}return L?Promise.race(L):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(L,D,I){let W=null;return Array.isArray(I)?(j.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),W={transferList:I}):W=I,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then(k=>k.invoke(L,D,W))}on(L,D){return Promise.all(this._clientPromises).then(()=>(0,g.AL)(this._clients.map(I=>I.on(L,D))))}openPorts(){return new Promise(L=>{const D=new Array(this._clientPromises.length);let I=D.length;for(let W=0;W<this._clientPromises.length;++W)this._clientPromises[W].then(k=>{D[W]=k.openPort(),0==--I&&L(D)})})}get test(){return{numClients:this._clients.length}}}},89951:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>w});var g=p(24263),b=p(26584),J=p(17770),B=p(62208),j=p(10699),C=p(13126),$=p(38365);const L={statsWorker:()=>Promise.all([p.e(3930),p.e(4135)]).then(p.bind(p,44135)),geometryEngineWorker:()=>Promise.all([p.e(4918),p.e(8592),p.e(1843)]).then(p.bind(p,28632)),CSVSourceWorker:()=>Promise.all([p.e(410),p.e(3930),p.e(8330),p.e(7373),p.e(9155)]).then(p.bind(p,39155)),EdgeProcessingWorker:()=>Promise.all([p.e(479),p.e(8592),p.e(8947)]).then(p.bind(p,36239)),ElevationSamplerWorker:()=>Promise.all([p.e(479),p.e(853),p.e(8149)]).then(p.bind(p,28149)),FeatureServiceSnappingSourceWorker:()=>Promise.all([p.e(410),p.e(3930),p.e(8330),p.e(7373),p.e(6354)]).then(p.bind(p,86354)),GeoJSONSourceWorker:()=>Promise.all([p.e(410),p.e(3930),p.e(8330),p.e(7373),p.e(8592),p.e(4079)]).then(p.bind(p,84079)),LercWorker:()=>p.e(7300).then(p.bind(p,57300)),MemorySourceWorker:()=>Promise.all([p.e(410),p.e(3930),p.e(8330),p.e(7373),p.e(8592),p.e(7728)]).then(p.bind(p,7728)),PBFDecoderWorker:()=>p.e(6089).then(p.bind(p,46089)),Pipeline:()=>Promise.all([p.e(5086),p.e(3755),p.e(410),p.e(9091),p.e(3930),p.e(8330),p.e(9628),p.e(8592),p.e(6595)]).then(p.bind(p,87249)),PointCloudWorker:()=>Promise.all([p.e(8592),p.e(1107)]).then(p.bind(p,61107)),RasterWorker:()=>Promise.all([p.e(7692),p.e(6926),p.e(8594),p.e(581),p.e(8592),p.e(5976)]).then(p.bind(p,15976)),SceneLayerWorker:()=>p.e(3320).then(p.bind(p,83320)),WFSSourceWorker:()=>Promise.all([p.e(410),p.e(3930),p.e(8330),p.e(7373),p.e(3774),p.e(8592),p.e(2305)]).then(p.bind(p,62305)),WorkerTileHandler:()=>Promise.all([p.e(4821),p.e(3751),p.e(4522),p.e(8364),p.e(9057)]).then(p.bind(p,90195))},{CLOSE:D,ABORT:I,INVOKE:W,RESPONSE:k,OPEN_PORT:Z,ON:X}=C.Cs;class V{constructor(O){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=O,this._timer=null,this._process=this._process.bind(this)}push(O){O.type===C.Cs.ABORT?this._cancelledJobIds.add(O.jobId):(this._invokeMessages.push(O),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const O of this._invokeMessages)this._cancelledJobIds.has(O.jobId)||this._invoke(O);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class w{constructor(O,x){this._port=O,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new V(N=>this._onInvokeMessage(N)),this._client=x.client,this._onMessage=this._onMessage.bind(this),this._channel=x.channel,this._schedule=x.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(O){const x=new MessageChannel;let N;N="function"==typeof O?new O:"default"in O&&"function"==typeof O.default?new O.default:O;const M=new w(x.port1,{channel:x,client:N});return"object"==typeof N&&"remoteClient"in N&&(N.remoteClient=M),w.clients.set(M,N),x.port2}static loadWorker(O){const x=L[O];return x?x():Promise.resolve(null)}close(){this._post({type:D}),this._close()}isBusy(){return this._outJobs.size>0}invoke(O,x,N){const M=N&&N.signal,Q=N&&N.transferList;if(!this._port)return Promise.reject(new b.Z("worker:port-closed",`Cannot call invoke('${O}'), port is closed`,{methodName:O,data:x}));const z=(0,C.jt)();return new Promise((ee,le)=>{const oe=(0,j.$F)(M,()=>{var re;const K=this._outJobs.get(z);K&&(this._outJobs.delete(z),null==(re=K.abortHandle)||re.remove(),this._post({type:I,jobId:z}),le((0,j.zE)()))});this._outJobs.set(z,{resolve:ee,reject:le,abortHandle:oe,debugInfo:O}),this._post({type:W,jobId:z,methodName:O,abortable:null!=M},x,Q)})}on(O,x){const N=new MessageChannel;function M(Q){x(Q.data)}return this._port.postMessage({type:C.Cs.ON,eventType:O,port:N.port2},[N.port2]),N.port1.addEventListener("message",M),N.port1.start(),{remove(){N.port1.postMessage({type:C.Cs.CLOSE}),N.port1.close(),N.port1.removeEventListener("message",M)}}}openPort(){const O=new MessageChannel;return this._post({type:Z,port:O.port2}),O.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(O=>{var x;null==(x=O.abortHandle)||x.remove(),O.reject((0,j.zE)(`Worker closing, aborting job calling '${O.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(O){(0,B.pC)(this._schedule)?this._schedule(()=>this._processMessage(O)):this._processMessage(O)}_processMessage(O){const x=(0,C.QM)(O);if(x)switch(x.type){case k:this._onResponseMessage(x);break;case W:this._invokeQueue.push(x);break;case I:this._onAbortMessage(x);break;case D:this._onCloseMessage();break;case Z:this._onOpenPortMessage(x);break;case X:this._onOnMessage(x)}}_onAbortMessage(O){const x=this._inJobs,N=O.jobId,M=x.get(N);this._invokeQueue.push(O),M&&(M.controller&&M.controller.abort(),x.delete(N))}_onCloseMessage(){const O=this._client;this._close(),O&&"destroy"in O&&w.clients.get(this)===O&&O.destroy(),w.clients.delete(this),O&&O.remoteClient&&(O.remoteClient=null)}_onInvokeMessage(O){const{methodName:x,jobId:N,data:M,abortable:Q}=O,z=Q?new AbortController:null,ee=this._inJobs;let le,oe=this._client,ce=oe[x];try{if(!ce&&x&&-1!==x.indexOf(".")){const re=x.split(".");for(let K=0;K<re.length-1;K++)oe=oe[re[K]],ce=oe[re[K+1]]}if("function"!=typeof ce)throw new TypeError(`${x} is not a function`);le=ce.call(oe,M,{client:this,signal:z?z.signal:null})}catch(re){return void this._post({type:k,jobId:N,error:(0,C.AB)(re)})}(0,j.y8)(le)?(ee.set(N,{controller:z,promise:le}),le.then(re=>{ee.has(N)&&(ee.delete(N),this._post({type:k,jobId:N},re))},re=>{ee.has(N)&&(ee.delete(N),(0,j.D_)(re)||this._post({type:k,jobId:N,error:(0,C.AB)(re||{message:`Error encountered at method ${x}`})}))})):this._post({type:k,jobId:N},le)}_onOpenPortMessage(O){new w(O.port,{client:this._client})}_onOnMessage(O){const{port:x}=O,N=this._client.on(O.eventType,Q=>{x.postMessage(Q)}),M=(0,J.on)(O.port,"message",Q=>{(0,C.QM)(Q).type===C.Cs.CLOSE&&(M.remove(),N.remove(),x.close())})}_onResponseMessage(O){var x;const{jobId:N,error:M,data:Q}=O,z=this._outJobs;if(!z.has(N))return;const ee=z.get(N);z.delete(N),null==(x=ee.abortHandle)||x.remove(),M?ee.reject(b.Z.fromJSON(JSON.parse(M))):ee.resolve(Q)}_post(O,x,N){return(0,C.oi)(this._port,O,x,N)}}w.kernelInfo={revision:$.$,version:g.i8,buildDate:$.r},w.clients=new Map},13126:(He,ve,p)=>{"use strict";p.d(ve,{Cs:()=>b,jt:()=>B,oi:()=>$,QM:()=>L,AB:()=>C});var b,W,g=p(8314);(W=b||(b={}))[W.HANDSHAKE=0]="HANDSHAKE",W[W.OPEN=1]="OPEN",W[W.OPENED=2]="OPENED",W[W.RESPONSE=3]="RESPONSE",W[W.INVOKE=4]="INVOKE",W[W.ABORT=5]="ABORT",W[W.CLOSE=6]="CLOSE",W[W.OPEN_PORT=7]="OPEN_PORT",W[W.ON=8]="ON";let J=0;function B(){return J++}function C(W){return W?"string"==typeof W?JSON.stringify({name:"message",message:W}):W.toJSON?JSON.stringify(W):JSON.stringify({name:W.name,message:W.message,details:W.details||{stack:W.stack}}):null}function $(W,k,Z,X){if(k.type===b.OPEN_PORT)return void W.postMessage(k,[k.port]);if(k.type!==b.INVOKE&&k.type!==b.RESPONSE)return void W.postMessage(k);let V;!function j(W){return W&&"object"==typeof W&&("result"in W||"transferList"in W)}(Z)?(V=D(X),k.data=Z):(V=D(Z.transferList),k.data=Z.result),V?W.postMessage(k,V):W.postMessage(k)}function L(W){if(!W)return null;const k=W.data;return k?"string"==typeof k?JSON.parse(k):k:null}function D(W){if(!W||!W.length)return null;if((0,g.Z)("esri-workers-arraybuffer-transfer"))return W;const k=W.filter(Z=>!function I(W){return W instanceof ArrayBuffer||W&&W.constructor&&"ArrayBuffer"===W.constructor.name}(Z));return k.length?k:null}},59289:(He,ve,p)=>{"use strict";p.d(ve,{j2:()=>Le,bA:()=>Be});var g=p(15861),b=p(26584),J=p(8314),B=p(10699),j=p(93662),C=p(89951),$=p(24263),L=p(63290),D=p(13126),I=p(54346),W=p(59318),Z=(p(52515),p(21726));const V={};var O=p(79682);class x{constructor(){const qe=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(ke=>{this[ke]=(...dt)=>qe[ke](...dt)})}}class N{constructor(){this._dispatcher=new x,this._workerPostMessage({type:D.Cs.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(qe){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=qe,qe&&this.addEventListener("message",qe)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(qe){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=qe,qe&&this.addEventListener("messageerror",qe)}get onerror(){return this._onerrorHandler}set onerror(qe){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=qe,qe&&this.addEventListener("error",qe)}postMessage(qe){(0,O.Y)(()=>{this._workerMessageHandler(new MessageEvent("message",{data:qe}))})}dispatchEvent(qe){return this._dispatcher.dispatchEvent(qe)}addEventListener(qe,ke,dt){this._dispatcher.addEventListener(qe,ke,dt)}removeEventListener(qe,ke,dt){this._dispatcher.removeEventListener(qe,ke,dt)}_workerPostMessage(qe){(0,O.Y)(()=>{this.dispatchEvent(new MessageEvent("message",{data:qe}))})}_workerMessageHandler(qe){var ke=this;return(0,g.Z)(function*(){const dt=(0,D.QM)(qe);if(dt&&dt.type===D.Cs.OPEN){const{modulePath:We,jobId:nt}=dt;let ht=yield C.Z.loadWorker(We);ht||(ht=yield import(We));const mt=C.Z.connect(ht);ke._workerPostMessage({type:D.Cs.OPENED,jobId:nt,data:mt})}})()}}var M=p(56683),Q=p(38365);const z=L.Z.getLogger("esri.core.workers"),{HANDSHAKE:ee}=D.Cs,le='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let oe,ce;const re="Failed to create Worker. Fallback to execute module in main thread";function ae(){return(ae=(0,g.Z)(function*(){if(!(0,J.Z)("esri-workers")||((0,J.Z)("mozilla"),0))return se(new N);if(!oe&&!ce)try{const qe=le.replace('"{CONFIGURATION}"',`'${ue()}'`);oe=URL.createObjectURL(new Blob([qe],{type:"text/javascript"}))}catch(qe){ce=qe||{}}let Xe;if(oe)try{Xe=new Worker(oe,{name:"esri-worker-"+pe++})}catch(qe){z.warn(re,ce),Xe=new N}else z.warn(re,ce),Xe=new N;return se(Xe)})).apply(this,arguments)}function se(Xe){return de.apply(this,arguments)}function de(){return(de=(0,g.Z)(function*(Xe){return new Promise(qe=>{function ke(We){const nt=(0,D.QM)(We);nt&&nt.type===ee&&(Xe.removeEventListener("message",ke),Xe.removeEventListener("error",dt),qe(Xe))}function dt(We){We.preventDefault(),Xe.removeEventListener("message",ke),Xe.removeEventListener("error",dt),z.warn("Failed to create Worker. Fallback to execute module in main thread",We),(Xe=new N).addEventListener("message",ke),Xe.addEventListener("error",dt)}Xe.addEventListener("message",ke),Xe.addEventListener("error",dt)})})).apply(this,arguments)}function ue(){let Xe;if(null!=W.Z.default){const We=_t({},W.Z);delete We.default,Xe=JSON.parse(JSON.stringify(We))}else Xe=JSON.parse(JSON.stringify(W.Z));Xe.assetsPath=(0,Z.hF)(Xe.assetsPath),Xe.request.interceptors=[],Xe.log.interceptors=[],Xe.locale=(0,M.Kd)(),Xe.has={"esri-csp-restrictions":(0,J.Z)("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":(0,J.Z)("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":(0,J.Z)("esri-2d-query-centroid-enabled"),"featurelayer-pbf":(0,J.Z)("featurelayer-pbf"),"featurelayer-simplify-thresholds":(0,J.Z)("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":(0,J.Z)("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":(0,J.Z)("featurelayer-simplify-mobile-factor"),"esri-atomics":(0,J.Z)("esri-atomics"),"esri-shared-array-buffer":(0,J.Z)("esri-shared-array-buffer"),"esri-tiles-debug":(0,J.Z)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":(0,J.Z)("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":(0,J.Z)("feature-polyline-generalization-factor"),"host-webworker":1},Xe.workers.loaderUrl&&(Xe.workers.loaderUrl=(0,Z.hF)(Xe.workers.loaderUrl)),Xe.workers.workerPath=(0,Z.hF)(Xe.workers.workerPath?Xe.workers.workerPath:(0,I.V)("esri/core/workers/RemoteClient.js")),Xe.workers.useDynamicImport=!1;const qe=W.Z.workers.loaderConfig,ke=function T(Xe){var qe;const ke={async:Xe.async,isDebug:Xe.isDebug,locale:Xe.locale,baseUrl:Xe.baseUrl,has:_t({},Xe.has),map:_t({},Xe.map),packages:Xe.packages&&Xe.packages.concat()||[],paths:_t({},Xe.paths)};return Xe.hasOwnProperty("async")||(ke.async=!0),Xe.hasOwnProperty("isDebug")||(ke.isDebug=!1),Xe.baseUrl||(ke.baseUrl=V.baseUrl),null==(qe=V.packages)||qe.forEach(dt=>{!function w(Xe,qe){for(const ke of Xe)if(ke.name===qe.name)return;Xe.push(qe)}(ke.packages,dt)}),ke}({baseUrl:null==qe?void 0:qe.baseUrl,locale:(0,M.Kd)(),has:_t({"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1},null==qe?void 0:qe.has),map:_t({},null==qe?void 0:qe.map),paths:_t({},null==qe?void 0:qe.paths),packages:(null==qe?void 0:qe.packages)||[]});return JSON.stringify({esriConfig:Xe,loaderConfig:ke,kernelInfo:{version:$.i8,buildDate:Q.r,revision:Q.$}})}let pe=0;const ie=L.Z.getLogger("esri.core.workers"),{ABORT:te,INVOKE:Ee,OPEN:fe,OPENED:be,RESPONSE:ye}=D.Cs;class Ke{constructor(qe,ke){this._outJobs=new Map,this._inJobs=new Map,this.worker=qe,this.id=ke,qe.addEventListener("message",this._onMessage.bind(this)),qe.addEventListener("error",dt=>{dt.preventDefault(),ie.error(dt)})}static create(qe){return(0,g.Z)(function*(){const ke=yield function K(){return ae.apply(this,arguments)}();return new Ke(ke,qe)})()}terminate(){this.worker.terminate()}open(qe,ke={}){var dt=this;return(0,g.Z)(function*(){const{signal:We}=ke,nt=(0,D.jt)();return new Promise((ht,mt)=>{const Kt={resolve:ht,reject:mt,abortHandle:(0,B.$F)(We,()=>{dt._outJobs.delete(nt),dt._post({type:te,jobId:nt})})};dt._outJobs.set(nt,Kt),dt._post({type:fe,jobId:nt,modulePath:qe})})})()}_onMessage(qe){const ke=(0,D.QM)(qe);if(ke)switch(ke.type){case be:this._onOpenedMessage(ke);break;case ye:this._onResponseMessage(ke);break;case te:this._onAbortMessage(ke);break;case Ee:this._onInvokeMessage(ke)}}_onAbortMessage(qe){const ke=this._inJobs,dt=qe.jobId,We=ke.get(dt);We&&(We.controller&&We.controller.abort(),ke.delete(dt))}_onInvokeMessage(qe){const{methodName:ke,jobId:dt,data:We,abortable:nt}=qe,ht=nt?new AbortController:null,mt=this._inJobs,Kt=$.Nv[ke];let Bt;try{if("function"!=typeof Kt)throw new TypeError(`${ke} is not a function`);Bt=Kt.call(null,We,{signal:ht?ht.signal:null})}catch($t){return void this._post({type:ye,jobId:dt,error:(0,D.AB)($t)})}(0,B.y8)(Bt)?(mt.set(dt,{controller:ht,promise:Bt}),Bt.then($t=>{mt.has(dt)&&(mt.delete(dt),this._post({type:ye,jobId:dt},$t))},$t=>{mt.has(dt)&&(mt.delete(dt),$t||($t={message:"Error encountered at method"+ke}),(0,B.D_)($t)||this._post({type:ye,jobId:dt,error:(0,D.AB)($t||{message:`Error encountered at method ${ke}`})}))})):this._post({type:ye,jobId:dt},Bt)}_onOpenedMessage(qe){var ke;const{jobId:dt,data:We}=qe,nt=this._outJobs.get(dt);nt&&(this._outJobs.delete(dt),null==(ke=nt.abortHandle)||ke.remove(),nt.resolve(We))}_onResponseMessage(qe){var ke;const{jobId:dt,error:We,data:nt}=qe,ht=this._outJobs.get(dt);ht&&(this._outJobs.delete(dt),null==(ke=ht.abortHandle)||ke.remove(),We?ht.reject(b.Z.fromJSON(JSON.parse(We))):ht.resolve(nt))}_post(qe,ke,dt){return(0,D.oi)(this.worker,qe,ke,dt)}}let Ue=(0,J.Z)("esri-workers-debug")?1:(0,J.Z)("host-browser")?navigator.hardwareConcurrency-1:0;Ue||(Ue=(0,J.Z)("safari")&&(0,J.Z)("mac")||(0,J.Z)("trident")?7:2);let he=0;const Me=[];function Le(){rt()}function Oe(Xe,qe){return xe.apply(this,arguments)}function xe(){return(xe=(0,g.Z)(function*(Xe,qe){const ke=new j.Z;return yield ke.open(Xe,qe),ke})).apply(this,arguments)}function Be(Xe){return Y.apply(this,arguments)}function Y(){return(Y=(0,g.Z)(function*(Xe,qe={}){if("string"!=typeof Xe)throw new b.Z("workers:undefined-module","modulePath is missing");let ke=qe.strategy||"distributed";if((0,J.Z)("host-webworker")&&!(0,J.Z)("esri-workers")&&(ke="local"),"local"===ke){let dt=yield C.Z.loadWorker(Xe);dt||(dt=yield import(Xe)),(0,B.k_)(qe.signal);const We=qe.client||dt;return Oe([C.Z.connect(dt)],Sr(_t({},qe),{client:We}))}if(yield rt(),(0,B.k_)(qe.signal),"dedicated"===ke){const dt=he++%Ue;return Oe([yield Me[dt].open(Xe,qe)],qe)}if(qe.maxNumWorkers&&qe.maxNumWorkers>0){const dt=Math.min(qe.maxNumWorkers,Ue);if(dt<Ue){const We=new Array(dt);for(let nt=0;nt<dt;++nt){const ht=he++%Ue;We[nt]=Me[ht].open(Xe,qe)}return Oe(We,qe)}}return Oe(Me.map(dt=>dt.open(Xe,qe)),qe)})).apply(this,arguments)}let Ie,$e=null;function rt(){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,g.Z)(function*(){if($e)return $e;Ie=new AbortController;const Xe=[];for(let qe=0;qe<Ue;qe++){const ke=Ke.create(qe).then(dt=>(Me[qe]=dt,dt));Xe.push(ke)}return $e=Promise.all(Xe),$e})).apply(this,arguments)}},29132:(He,ve,p)=>{"use strict";p.d(ve,{qM:()=>k});var g=p(90912),b=p(2004),J=p(21674),B=p(72854),j=p(49672),C=p(37118),$=p(55214);p(65234),p(71774),p(91179);const k={base:J.Z,key:"type",typeMap:{extent:b.Z,multipoint:B.Z,point:j.Z,polyline:$.Z,polygon:C.Z}};(0,g.N7)(k)},2004:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>N});var w,g=p(17626),b=p(62208),J=p(77275),B=p(77712),L=(p(85931),p(8314),p(90912),p(76898)),D=p(21674),I=p(49672),W=p(65234),k=p(33190),Z=p(11519),X=p(37053),V=p(46367);function O(M,Q,z){return null==Q?z:null==z?Q:M(Q,z)}let x=w=class extends D.Z{constructor(...M){super(...M),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(M,Q,z,ee,le){return function T(M){return M&&("esri.geometry.SpatialReference"===M.declaredClass||null!=M.wkid)}(M)?{spatialReference:M,xmin:0,ymin:0,xmax:0,ymax:0}:"object"==typeof M?(M.spatialReference=null==M.spatialReference?W.Z.WGS84:M.spatialReference,M):{xmin:M,ymin:Q,xmax:z,ymax:ee,spatialReference:null==le?W.Z.WGS84:le}}static fromBounds(M,Q){return new w({xmin:M[0],ymin:M[1],xmax:M[2],ymax:M[3],spatialReference:Q})}static fromPoint(M){return new w({xmin:M.x,ymin:M.y,zmin:M.z,xmax:M.x,ymax:M.y,zmax:M.z,spatialReference:M.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const M=new I.Z({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(M.z=.5*(this.zmin+this.zmax)),this.hasM&&(M.m=.5*(this.mmin+this.mmax)),M}get extent(){return this.clone()}get hasM(){return null!=this.mmin&&null!=this.mmax}get hasZ(){return null!=this.zmin&&null!=this.zmax}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(M){const Q=this.center;return null!=M.z&&this.hasZ?this.offset(M.x-Q.x,M.y-Q.y,M.z-Q.z):this.offset(M.x-Q.x,M.y-Q.y)}clone(){const M=new w;return M.xmin=this.xmin,M.ymin=this.ymin,M.xmax=this.xmax,M.ymax=this.ymax,M.spatialReference=this.spatialReference,null!=this.zmin&&(M.zmin=this.zmin,M.zmax=this.zmax),null!=this.mmin&&(M.mmin=this.mmin,M.mmax=this.mmax),M}contains(M){if(!M)return!1;const Q=this.spatialReference,z=M.spatialReference;return Q&&z&&!Q.equals(z)&&(0,V.Q8)(Q,z)&&(M=Q.isWebMercator?(0,V.$)(M):(0,V.Sx)(M,!0)),"point"===M.type?(0,k.aV)(this,M):"extent"===M.type&&(0,k.uP)(this,M)}equals(M){if(this===M)return!0;if((0,b.Wi)(M))return!1;const Q=this.spatialReference,z=M.spatialReference;return Q&&z&&!Q.equals(z)&&(0,V.Q8)(Q,z)&&(M=Q.isWebMercator?(0,V.$)(M):(0,V.Sx)(M,!0)),this.xmin===M.xmin&&this.ymin===M.ymin&&this.zmin===M.zmin&&this.mmin===M.mmin&&this.xmax===M.xmax&&this.ymax===M.ymax&&this.zmax===M.zmax&&this.mmax===M.mmax}expand(M){const Q=.5*(1-M),z=this.width*Q,ee=this.height*Q;if(this.xmin+=z,this.ymin+=ee,this.xmax-=z,this.ymax-=ee,this.hasZ){const le=(this.zmax-this.zmin)*Q;this.zmin+=le,this.zmax-=le}if(this.hasM){const le=(this.mmax-this.mmin)*Q;this.mmin+=le,this.mmax-=le}return this}intersects(M){if((0,b.Wi)(M))return!1;"mesh"===M.type&&(M=M.extent);const Q=this.spatialReference,z=M.spatialReference;return Q&&z&&!Q.equals(z)&&(0,V.Q8)(Q,z)&&(M=Q.isWebMercator?(0,V.$)(M):(0,V.Sx)(M,!0)),(0,Z.IY)(M.type)(this,M)}normalize(){const M=this._normalize(!1,!0);return Array.isArray(M)?M:[M]}offset(M,Q,z){return this.xmin+=M,this.ymin+=Q,this.xmax+=M,this.ymax+=Q,null!=z&&(this.zmin+=z,this.zmax+=z),this}shiftCentralMeridian(){return this._normalize(!0)}union(M){return this===M||(this.xmin=Math.min(this.xmin,M.xmin),this.ymin=Math.min(this.ymin,M.ymin),this.xmax=Math.max(this.xmax,M.xmax),this.ymax=Math.max(this.ymax,M.ymax),(this.hasZ||M.hasZ)&&(this.zmin=O(Math.min,this.zmin,M.zmin),this.zmax=O(Math.max,this.zmax,M.zmax)),(this.hasM||M.hasM)&&(this.mmin=O(Math.min,this.mmin,M.mmin),this.mmax=O(Math.max,this.mmax,M.mmax))),this}intersection(M){return this===M?this:(0,b.Wi)(M)||!this.intersects(M)?null:(this.xmin=Math.max(this.xmin,M.xmin),this.ymin=Math.max(this.ymin,M.ymin),this.xmax=Math.min(this.xmax,M.xmax),this.ymax=Math.min(this.ymax,M.ymax),(this.hasZ||M.hasZ)&&(this.zmin=O(Math.max,this.zmin,M.zmin),this.zmax=O(Math.min,this.zmax,M.zmax)),(this.hasM||M.hasM)&&(this.mmin=O(Math.max,this.mmin,M.mmin),this.mmax=O(Math.min,this.mmax,M.mmax)),this)}toJSON(M){return this.write({},M)}_shiftCM(M=(0,X.C5)(this.spatialReference)){if(!M||!this.spatialReference)return this;const Q=this.spatialReference,z=this._getCM(M);if(z){const ee=Q.isWebMercator?(0,V.Sx)(z):z;this.xmin-=z.x,this.xmax-=z.x,Q.isWebMercator||(ee.x=this._normalizeX(ee.x,M).x),this.spatialReference=new W.Z((0,J.gx)(Q.isWGS84?M.altTemplate:M.wkTemplate,{Central_Meridian:ee.x}))}return this}_getCM(M){let Q=null;const[z,ee]=M.valid,le=this.xmin,oe=this.xmax;return le>=z&&le<=ee&&oe>=z&&oe<=ee||(Q=this.center),Q}_normalize(M,Q,z){const ee=this.spatialReference;if(!ee)return this;if(!(z=z||(0,X.C5)(ee)))return this;const le=this._getParts(z).map(re=>re.extent);if(le.length<2)return le[0]||this;if(le.length>2)return M?this._shiftCM(z):this.set({xmin:z.valid[0],xmax:z.valid[1]});if(M)return this._shiftCM(z);if(Q)return le;let oe=!0,ce=!0;return le.forEach(re=>{re.hasZ||(oe=!1),re.hasM||(ce=!1)}),{rings:le.map(re=>{const K=[[re.xmin,re.ymin],[re.xmin,re.ymax],[re.xmax,re.ymax],[re.xmax,re.ymin],[re.xmin,re.ymin]];if(oe){const ae=(re.zmax-re.zmin)/2;for(let se=0;se<K.length;se++)K[se].push(ae)}if(ce){const ae=(re.mmax-re.mmin)/2;for(let se=0;se<K.length;se++)K[se].push(ae)}return K}),hasZ:oe,hasM:ce,spatialReference:ee}}_getParts(M){let Q=this.cache._parts;if(!Q){Q=[];const{ymin:le,ymax:oe,spatialReference:ce}=this,re=this.width,K=this.xmin,ae=this.xmax;let se;M=M||(0,X.C5)(ce);const[de,ue]=M.valid;se=this._normalizeX(this.xmin,M);const pe=se.x,ie=se.frameId;se=this._normalizeX(this.xmax,M);const te=se.x,Ee=se.frameId,fe=pe===te&&re>0;if(re>2*ue){const be=new w(K<ae?pe:te,le,ue,oe,ce),ye=new w(de,le,K<ae?te:pe,oe,ce),Ke=new w(0,le,ue,oe,ce),Ue=new w(de,le,0,oe,ce),he=[],Me=[];be.contains(Ke)&&he.push(ie),be.contains(Ue)&&Me.push(ie),ye.contains(Ke)&&he.push(Ee),ye.contains(Ue)&&Me.push(Ee);for(let Le=ie+1;Le<Ee;Le++)he.push(Le),Me.push(Le);Q.push({extent:be,frameIds:[ie]},{extent:ye,frameIds:[Ee]},{extent:Ke,frameIds:he},{extent:Ue,frameIds:Me})}else pe>te||fe?Q.push({extent:new w(pe,le,ue,oe,ce),frameIds:[ie]},{extent:new w(de,le,te,oe,ce),frameIds:[Ee]}):Q.push({extent:new w(pe,le,te,oe,ce),frameIds:[ie]});this.cache._parts=Q}const z=this.hasZ,ee=this.hasM;if(z||ee){const le={};z&&(le.zmin=this.zmin,le.zmax=this.zmax),ee&&(le.mmin=this.mmin,le.mmax=this.mmax);for(let oe=0;oe<Q.length;oe++)Q[oe].extent.set(le)}return Q}_normalizeX(M,Q){const[z,ee]=Q.valid,le=2*ee;let oe,ce=0;return M>ee?(oe=Math.ceil(Math.abs(M-ee)/le),M-=oe*le,ce=oe):M<z&&(oe=Math.ceil(Math.abs(M-z)/le),M+=oe*le,ce=-oe),{x:M,frameId:ce}}};(0,g._)([(0,B.Cb)({readOnly:!0})],x.prototype,"cache",null),(0,g._)([(0,B.Cb)({readOnly:!0})],x.prototype,"center",null),(0,g._)([(0,B.Cb)({readOnly:!0})],x.prototype,"extent",null),(0,g._)([(0,B.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],x.prototype,"hasM",null),(0,g._)([(0,B.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],x.prototype,"hasZ",null),(0,g._)([(0,B.Cb)({readOnly:!0})],x.prototype,"height",null),(0,g._)([(0,B.Cb)({readOnly:!0})],x.prototype,"width",null),(0,g._)([(0,B.Cb)({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],x.prototype,"xmin",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{write:!0}})],x.prototype,"ymin",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],x.prototype,"mmin",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],x.prototype,"zmin",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{write:!0}})],x.prototype,"xmax",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{write:!0}})],x.prototype,"ymax",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],x.prototype,"mmax",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],x.prototype,"zmax",void 0),x=w=(0,g._)([(0,L.j)("esri.geometry.Extent")],x),x.prototype.toJSON.isDefaultToJSON=!0;const N=x},21674:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(68653)),L=p(76898),D=p(65234);let I=class extends b.wq{constructor(...k){super(...k),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=D.Z.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(k,Z){if(k instanceof D.Z)return k;if(null!=k){const X=new D.Z;return X.read(k,Z),X}return k}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(k){return this.cache[k]}setCacheValue(k,Z){this.cache[k]=Z}};(0,g._)([(0,J.Cb)()],I.prototype,"type",void 0),(0,g._)([(0,J.Cb)({readOnly:!0})],I.prototype,"cache",null),(0,g._)([(0,J.Cb)({readOnly:!0})],I.prototype,"extent",null),(0,g._)([(0,J.Cb)({type:Boolean,json:{write:{overridePolicy:k=>({enabled:k})}}})],I.prototype,"hasM",void 0),(0,g._)([(0,J.Cb)({type:Boolean,json:{write:{overridePolicy:k=>({enabled:k})}}})],I.prototype,"hasZ",void 0),(0,g._)([(0,J.Cb)({type:D.Z,json:{write:!0}})],I.prototype,"spatialReference",void 0),(0,g._)([(0,$.r)("spatialReference")],I.prototype,"readSpatialReference",null),I=(0,g._)([(0,L.j)("esri.geometry.Geometry")],I);const W=I},79334:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>N});var Z,g=p(17626),b=p(85931),J=p(2076),B=p(86810),j=p(16730),C=p(14889),$=p(77712),I=(p(8314),p(90912),p(68653)),W=p(76898),k=p(99433);const X=(0,J.w)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),V=X.jsonValues.slice();(0,b.e$)(V,"orthometric");const w=(0,J.w)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let T=Z=class extends B.wq{constructor(M){super(M),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(M,Q,z){return X.write(M,Q,z)}readHeightModel(M,Q,z){return X.read(M)||(z&&z.messages&&z.messages.push(function x(M,Q){return new C.Z("height-model:unsupported",`Height model of value '${M}' is not supported`,Q)}(M,{context:z})),null)}readHeightUnit(M,Q,z){return w.read(M)||(z&&z.messages&&z.messages.push(O(M,{context:z})),null)}readHeightUnitService(M,Q,z){return(0,j.$C)(M)||w.read(M)||(z&&z.messages&&z.messages.push(O(M,{context:z})),null)}readVertCRS(M,Q){return Q.vertCRS||Q.ellipsoid||Q.geoid}clone(){return new Z({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(M){return!!M&&(this===M||this.heightModel===M.heightModel&&this.heightUnit===M.heightUnit&&this.vertCRS===M.vertCRS)}static deriveUnitFromSR(M,Q){const z=(0,j.cM)(Q);return new Z({heightModel:M.heightModel,heightUnit:z,vertCRS:M.vertCRS})}write(M,Q){return Q=_t({origin:"web-scene"},Q),super.write(M,Q)}static fromJSON(M){if(!M)return null;const Q=new Z;return Q.read(M,{origin:"web-scene"}),Q}};function O(M,Q){return new C.Z("height-unit:unsupported",`Height unit of value '${M}' is not supported`,Q)}(0,g._)([(0,$.Cb)({type:X.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:V,default:"ellipsoidal"}}}})],T.prototype,"heightModel",void 0),(0,g._)([(0,k.c)("web-scene","heightModel")],T.prototype,"writeHeightModel",null),(0,g._)([(0,I.r)(["web-scene","service"],"heightModel")],T.prototype,"readHeightModel",null),(0,g._)([(0,$.Cb)({type:w.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:w.jsonValues,write:w.write}}}})],T.prototype,"heightUnit",void 0),(0,g._)([(0,I.r)("web-scene","heightUnit")],T.prototype,"readHeightUnit",null),(0,g._)([(0,I.r)("service","heightUnit")],T.prototype,"readHeightUnitService",null),(0,g._)([(0,$.Cb)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],T.prototype,"vertCRS",void 0),(0,g._)([(0,I.r)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],T.prototype,"readVertCRS",null),T=Z=(0,g._)([(0,W.j)("esri.geometry.HeightModelInfo")],T);const N=T},72854:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var W,g=p(17626),b=p(58817),J=p(77712),j=(p(90912),p(76898)),C=p(99433),$=p(2004),L=p(21674),D=p(49672),I=p(18945);function k(w){return(T,O)=>null==T?O:null==O?T:w(T,O)}let X=W=class extends L.Z{constructor(...w){super(...w),this.points=[],this.type="multipoint"}normalizeCtorArgs(w,T){if(!w&&!T)return null;const O={};Array.isArray(w)?(O.points=w,O.spatialReference=T):function Z(w){return w&&("esri.geometry.SpatialReference"===w.declaredClass||null!=w.wkid)}(w)?O.spatialReference=w:(w.points&&(O.points=w.points),w.spatialReference&&(O.spatialReference=w.spatialReference),w.hasZ&&(O.hasZ=w.hasZ),w.hasM&&(O.hasM=w.hasM));const x=O.points&&O.points[0];return x&&(void 0===O.hasZ&&void 0===O.hasM?(O.hasZ=x.length>2,O.hasM=!1):void 0===O.hasZ?O.hasZ=x.length>3:void 0===O.hasM&&(O.hasM=x.length>3)),O}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const w=this.points;if(!w.length)return null;const T=new $.Z,O=this.hasZ,x=this.hasM,N=O?3:2,M=w[0],Q=k(Math.min),z=k(Math.max);let ee,le,oe,ce,[re,K]=M,[ae,se]=M;for(let de=0,ue=w.length;de<ue;de++){const pe=w[de],[ie,te]=pe;if(re=Q(re,ie),K=Q(K,te),ae=z(ae,ie),se=z(se,te),O&&pe.length>2){const Ee=pe[2];ee=Q(ee,Ee),oe=z(oe,Ee)}if(x&&pe.length>N){const Ee=pe[N];le=Q(le,Ee),ce=z(ce,Ee)}}return T.xmin=re,T.ymin=K,T.xmax=ae,T.ymax=se,T.spatialReference=this.spatialReference,O?(T.zmin=ee,T.zmax=oe):(T.zmin=null,T.zmax=null),x?(T.mmin=le,T.mmax=ce):(T.mmin=null,T.mmax=null),T}writePoints(w,T){T.points=(0,b.d9)(this.points)}addPoint(w){return(0,I.l)(this,w),Array.isArray(w)?this.points.push(w):this.points.push(w.toArray()),this.notifyChange("points"),this}clone(){const w={points:(0,b.d9)(this.points),spatialReference:this.spatialReference};return this.hasZ&&(w.hasZ=!0),this.hasM&&(w.hasM=!0),new W(w)}getPoint(w){if(!this._validateInputs(w))return null;const T=this.points[w],O={x:T[0],y:T[1],spatialReference:this.spatialReference};let x=2;return this.hasZ&&(O.z=T[2],x=3),this.hasM&&(O.m=T[x]),new D.Z(O)}removePoint(w){if(!this._validateInputs(w))return null;const T=new D.Z(this.points.splice(w,1)[0],this.spatialReference);return this.notifyChange("points"),T}setPoint(w,T){return this._validateInputs(w)?((0,I.l)(this,T),Array.isArray(T)||(T=T.toArray()),this.points[w]=T,this.notifyChange("points"),this):this}toJSON(w){return this.write({},w)}_validateInputs(w){return null!=w&&w>=0&&w<this.points.length}};(0,g._)([(0,J.Cb)({readOnly:!0})],X.prototype,"cache",null),(0,g._)([(0,J.Cb)()],X.prototype,"extent",null),(0,g._)([(0,J.Cb)({type:[[Number]],json:{write:{isRequired:!0}}})],X.prototype,"points",void 0),(0,g._)([(0,C.c)("points")],X.prototype,"writePoints",null),X=W=(0,g._)([(0,j.j)("esri.geometry.Multipoint")],X),X.prototype.toJSON.isDefaultToJSON=!0;const V=X},49672:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>le});var N,g=p(17626),b=p(63290),J=p(62208),B=p(77712),$=(p(85931),p(8314),p(66656)),L=p(68653),D=p(76898),I=p(99433),W=p(90912),k=p(21674),Z=p(65234),O=p(37053),x=p(46367);const M=[0,0];function Q(oe){return oe&&("esri.geometry.SpatialReference"===oe.declaredClass||null!=oe.wkid)}const z=b.Z.getLogger("esri.geometry.Point");let ee=N=class extends k.Z{constructor(...oe){super(...oe),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(oe,ce){ce._set("x",oe._get("x")),ce._set("y",oe._get("y")),ce._set("z",oe._get("z")),ce._set("m",oe._get("m"));const re=oe._get("spatialReference");ce._set("spatialReference",Object.isFrozen(re)?re:re.clone())}normalizeCtorArgs(oe,ce,re,K,ae){let se;if(Array.isArray(oe))se=oe,ae=ce,oe=se[0],ce=se[1],re=se[2],K=se[3];else if(oe&&"object"==typeof oe){if(se=oe,oe=null!=se.x?se.x:se.longitude,ce=null!=se.y?se.y:se.latitude,re=se.z,K=se.m,(ae=se.spatialReference)&&"esri.geometry.SpatialReference"!==ae.declaredClass&&(ae=new Z.Z(ae)),null!=se.longitude||null!=se.latitude)if(null==se.longitude)z.warn(".longitude=","Latitude was defined without longitude");else if(null==se.latitude)z.warn(".latitude=","Longitude was defined without latitude");else if(!se.declaredClass&&ae&&ae.isWebMercator){const ue=(0,x.hG)(se.longitude,se.latitude,M);oe=ue[0],ce=ue[1]}}else Q(re)?(ae=re,re=null):Q(K)&&(ae=K,K=null);const de={x:oe,y:ce};return null==de.x&&null!=de.y?z.warn(".y=","Y coordinate was defined without an X coordinate"):null==de.y&&null!=de.x&&z.warn(".x=","X coordinate was defined without a Y coordinate"),null!=ae&&(de.spatialReference=ae),null!=re&&(de.z=re),null!=K&&(de.m=K),de}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return void 0!==this.m}set hasM(oe){oe!==(void 0!==this._get("m"))&&(this._set("m",oe?0:void 0),this._set("hasM",oe))}get hasZ(){return void 0!==this.z}set hasZ(oe){oe!==(void 0!==this._get("z"))&&(this._set("z",oe?0:void 0),this._set("hasZ",oe))}get latitude(){const{spatialReference:oe,x:ce,y:re}=this;if(oe){if(oe.isWebMercator)return(0,x.R6)(ce,re,M)[1];if(oe.isGeographic)return re}return null}set latitude(oe){const{spatialReference:ce,x:re}=this;ce&&(ce.isWebMercator?this._set("y",(0,x.hG)(re,oe,M)[1]):ce.isGeographic&&this._set("y",oe),this._set("latitude",oe))}get longitude(){const{x:oe,y:ce,spatialReference:re}=this;if(re){if(re.isWebMercator)return(0,x.R6)(oe,ce,M)[0];if(re.isGeographic)return oe}return null}set longitude(oe){const{y:ce,spatialReference:re}=this;re&&(re.isWebMercator?this._set("x",(0,x.hG)(oe,ce,M)[0]):re.isGeographic&&this._set("x",oe),this._set("longitude",oe))}writeX(oe,ce,re){ce[re]=isNaN(oe)?"NaN":oe}readX(oe){return"string"==typeof oe?NaN:oe}clone(){const oe=new N;return oe.x=this.x,oe.y=this.y,oe.z=this.z,oe.m=this.m,oe.spatialReference=this.spatialReference,oe}copy(oe){return N.copy(oe,this),this}equals(oe){if((0,J.Wi)(oe))return!1;const{x:ce,y:re,z:K,m:ae,spatialReference:se}=this,{z:de,m:ue}=oe;let{x:pe,y:ie,spatialReference:te}=oe;if(!se.equals(te))if(se.isWebMercator&&te.isWGS84)[pe,ie]=(0,x.hG)(pe,ie),te=se;else{if(!se.isWGS84||!te.isWebMercator)return!1;[pe,ie]=(0,x.R6)(pe,ie),te=se}return ce===pe&&re===ie&&K===de&&ae===ue&&se.wkid===te.wkid}offset(oe,ce,re){return function X(oe,ce,re,K){var ae;return oe.x=oe.x+ce,oe.y=oe.y+re,null!=K&&(oe.z=(null!=(ae=oe.z)?ae:0)+K),oe}(this,oe,ce,re)}normalize(){if(!this.spatialReference)return this;const oe=(0,O.C5)(this.spatialReference);if(!oe)return this;let ce=this.x;const[re,K]=oe.valid,ae=2*K;let se;return ce>K?(se=Math.ceil(Math.abs(ce-K)/ae),ce-=se*ae):ce<re&&(se=Math.ceil(Math.abs(ce-re)/ae),ce+=se*ae),this._set("x",ce),this}distance(oe){return function w(oe,ce){const re=oe.x-ce.x,K=oe.y-ce.y,ae=oe.hasZ&&ce.hasZ?oe.z-ce.z:0;return Math.sqrt(re*re+K*K+ae*ae)}(this,oe)}toArray(){const oe=this.hasZ,ce=this.hasM;return oe&&ce?[this.x,this.y,this.z,this.m]:oe?[this.x,this.y,this.z]:ce?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(oe){return this.write({},oe)}};(0,g._)([(0,B.Cb)({readOnly:!0})],ee.prototype,"cache",null),(0,g._)([(0,B.Cb)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ee.prototype,"hasM",null),(0,g._)([(0,B.Cb)({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],ee.prototype,"hasZ",null),(0,g._)([(0,B.Cb)({type:Number})],ee.prototype,"latitude",null),(0,g._)([(0,B.Cb)({type:Number})],ee.prototype,"longitude",null),(0,g._)([(0,B.Cb)({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),(0,$.p)(oe=>isNaN(oe)?oe:(0,W.q9)(oe))],ee.prototype,"x",void 0),(0,g._)([(0,I.c)("x")],ee.prototype,"writeX",null),(0,g._)([(0,L.r)("x")],ee.prototype,"readX",null),(0,g._)([(0,B.Cb)({type:Number,json:{write:!0}})],ee.prototype,"y",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],ee.prototype,"z",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],ee.prototype,"m",void 0),ee=N=(0,g._)([(0,D.j)("esri.geometry.Point")],ee),ee.prototype.toJSON.isDefaultToJSON=!0;const le=ee},37118:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>z});var N,g=p(17626),b=p(85931),J=p(58817),B=p(62208),j=p(77712),$=(p(90912),p(76898)),L=p(99433),D=p(2004),I=p(21674),W=p(49672),k=p(65234),Z=p(27105),X=p(33190),V=p(25748),w=p(15176),T=p(11519),O=p(46367),x=p(18945);function M(ee){return!Array.isArray(ee[0])}let Q=N=class extends I.Z{constructor(...ee){super(...ee),this.rings=[],this.type="polygon"}static fromExtent(ee){const le=ee.clone().normalize(),oe=ee.spatialReference;let ce=!1,re=!1;for(const ae of le)ae.hasZ&&(ce=!0),ae.hasM&&(re=!0);const K={rings:le.map(function(ae){const se=[[ae.xmin,ae.ymin],[ae.xmin,ae.ymax],[ae.xmax,ae.ymax],[ae.xmax,ae.ymin],[ae.xmin,ae.ymin]];if(ce&&ae.hasZ){const de=ae.zmin+.5*(ae.zmax-ae.zmin);for(let ue=0;ue<se.length;ue++)se[ue].push(de)}if(re&&ae.hasM){const de=ae.mmin+.5*(ae.mmax-ae.mmin);for(let ue=0;ue<se.length;ue++)se[ue].push(de)}return se}),spatialReference:oe};return ce&&(K.hasZ=!0),re&&(K.hasM=!0),new N(K)}normalizeCtorArgs(ee,le){let oe,ce,re=null,K=null;return ee&&!Array.isArray(ee)?(re=ee.rings?ee.rings:null,le||(ee.spatialReference?le=ee.spatialReference:ee.rings||(le=ee)),oe=ee.hasZ,ce=ee.hasM):re=ee,re=re||[],re.length&&re[0]&&null!=re[0][0]&&"number"==typeof re[0][0]&&(re=[re]),K=re[0]&&re[0][0],K&&(void 0===oe&&void 0===ce?(oe=K.length>2,ce=K.length>3):void 0===oe?oe=ce?K.length>3:K.length>2:void 0===ce&&(ce=oe?K.length>3:K.length>2)),{rings:re,spatialReference:le=le||k.Z.WGS84,hasZ:oe,hasM:ce}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const ee=(0,Z.tO)(this);if(!ee||isNaN(ee[0])||isNaN(ee[1])||this.hasZ&&isNaN(ee[2]))return null;const le=new W.Z;return le.x=ee[0],le.y=ee[1],le.spatialReference=this.spatialReference,this.hasZ&&(le.z=ee[2]),le}get extent(){const{spatialReference:ee}=this,le=(0,w._w)(this);if(!le)return null;const oe=new D.Z(le);return oe.spatialReference=ee,oe}get isSelfIntersecting(){return(0,T.Ff)(this.rings)}writeRings(ee,le){le.rings=(0,J.d9)(this.rings)}addRing(ee){if(!ee)return;const le=this.rings,oe=le.length;if(M(ee)){const ce=[];for(let re=0,K=ee.length;re<K;re++)ce[re]=ee[re].toArray();le[oe]=ce}else le[oe]=ee.concat();return this.notifyChange("rings"),this}clone(){const ee=new N;return ee.spatialReference=this.spatialReference,ee.rings=(0,J.d9)(this.rings),ee.hasZ=this.hasZ,ee.hasM=this.hasM,ee}equals(ee){if(this===ee)return!0;if((0,B.Wi)(ee))return!1;const le=this.spatialReference,oe=ee.spatialReference;if((0,B.pC)(le)!==(0,B.pC)(oe)||(0,B.pC)(le)&&(0,B.pC)(oe)&&!le.equals(oe)||this.rings.length!==ee.rings.length)return!1;const ce=([re,K,ae,se],[de,ue,pe,ie])=>re===de&&K===ue&&(null==ae&&null==pe||ae===pe)&&(null==se&&null==ie||se===ie);for(let re=0;re<this.rings.length;re++)if(!(0,b.fS)(this.rings[re],ee.rings[re],ce))return!1;return!0}contains(ee){if(!ee)return!1;const le=(0,O.iV)(ee,this.spatialReference);return(0,X.CI)(this,(0,B.pC)(le)?le:ee)}isClockwise(ee){let le;return le=M(ee)?ee.map(oe=>this.hasZ?this.hasM?[oe.x,oe.y,oe.z,oe.m]:[oe.x,oe.y,oe.z]:[oe.x,oe.y]):ee,(0,V.bu)(le,this.hasM,this.hasZ)}getPoint(ee,le){if(!this._validateInputs(ee,le))return null;const oe=this.rings[ee][le],ce=this.hasZ,re=this.hasM;return ce&&!re?new W.Z(oe[0],oe[1],oe[2],void 0,this.spatialReference):re&&!ce?new W.Z(oe[0],oe[1],void 0,oe[2],this.spatialReference):ce&&re?new W.Z(oe[0],oe[1],oe[2],oe[3],this.spatialReference):new W.Z(oe[0],oe[1],this.spatialReference)}insertPoint(ee,le,oe){return this._validateInputs(ee,le,!0)?((0,x.l)(this,oe),Array.isArray(oe)||(oe=oe.toArray()),this.rings[ee].splice(le,0,oe),this.notifyChange("rings"),this):this}removePoint(ee,le){if(!this._validateInputs(ee,le))return null;const oe=new W.Z(this.rings[ee].splice(le,1)[0],this.spatialReference);return this.notifyChange("rings"),oe}removeRing(ee){if(!this._validateInputs(ee,null))return null;const le=this.rings.splice(ee,1)[0],oe=this.spatialReference,ce=le.map(re=>new W.Z(re,oe));return this.notifyChange("rings"),ce}setPoint(ee,le,oe){return this._validateInputs(ee,le)?((0,x.l)(this,oe),Array.isArray(oe)||(oe=oe.toArray()),this.rings[ee][le]=oe,this.notifyChange("rings"),this):this}_validateInputs(ee,le,oe=!1){if(null==ee||ee<0||ee>=this.rings.length)return!1;if(null!=le){const ce=this.rings[ee];if(oe&&(le<0||le>ce.length)||!oe&&(le<0||le>=ce.length))return!1}return!0}toJSON(ee){return this.write({},ee)}};(0,g._)([(0,j.Cb)({readOnly:!0})],Q.prototype,"cache",null),(0,g._)([(0,j.Cb)({readOnly:!0})],Q.prototype,"centroid",null),(0,g._)([(0,j.Cb)({readOnly:!0})],Q.prototype,"extent",null),(0,g._)([(0,j.Cb)({readOnly:!0})],Q.prototype,"isSelfIntersecting",null),(0,g._)([(0,j.Cb)({type:[[[Number]]],json:{write:{isRequired:!0}}})],Q.prototype,"rings",void 0),(0,g._)([(0,L.c)("rings")],Q.prototype,"writeRings",null),Q=N=(0,g._)([(0,$.j)("esri.geometry.Polygon")],Q),Q.prototype.toJSON.isDefaultToJSON=!0;const z=Q},55214:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>w});var Z,g=p(17626),b=p(58817),J=p(77712),j=(p(90912),p(76898)),C=p(99433),$=p(2004),L=p(21674),D=p(49672),I=p(65234),W=p(15176),k=p(18945);let V=Z=class extends L.Z{constructor(...T){super(...T),this.paths=[],this.type="polyline"}normalizeCtorArgs(T,O){let x,N,M=null,Q=null;return T&&!Array.isArray(T)?(M=T.paths?T.paths:null,O||(T.spatialReference?O=T.spatialReference:T.paths||(O=T)),x=T.hasZ,N=T.hasM):M=T,M=M||[],M.length&&M[0]&&null!=M[0][0]&&"number"==typeof M[0][0]&&(M=[M]),Q=M[0]&&M[0][0],Q&&(void 0===x&&void 0===N?(x=Q.length>2,N=!1):void 0===x?x=!N&&Q.length>3:void 0===N&&(N=!x&&Q.length>3)),{paths:M,spatialReference:O=O||I.Z.WGS84,hasZ:x,hasM:N}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:T}=this,O=(0,W.Wn)(this);if(!O)return null;const x=new $.Z(O);return x.spatialReference=T,x}writePaths(T,O){O.paths=(0,b.d9)(this.paths)}addPath(T){if(!T)return;const O=this.paths,x=O.length;if(function X(T){return!Array.isArray(T[0])}(T)){const N=[];for(let M=0,Q=T.length;M<Q;M++)N[M]=T[M].toArray();O[x]=N}else O[x]=T.concat();return this.notifyChange("paths"),this}clone(){const T=new Z;return T.spatialReference=this.spatialReference,T.paths=(0,b.d9)(this.paths),T.hasZ=this.hasZ,T.hasM=this.hasM,T}getPoint(T,O){if(!this._validateInputs(T,O))return null;const x=this.paths[T][O],N=this.hasZ,M=this.hasM;return N&&!M?new D.Z(x[0],x[1],x[2],void 0,this.spatialReference):M&&!N?new D.Z(x[0],x[1],void 0,x[2],this.spatialReference):N&&M?new D.Z(x[0],x[1],x[2],x[3],this.spatialReference):new D.Z(x[0],x[1],this.spatialReference)}insertPoint(T,O,x){return this._validateInputs(T,O,!0)?((0,k.l)(this,x),Array.isArray(x)||(x=x.toArray()),this.paths[T].splice(O,0,x),this.notifyChange("paths"),this):this}removePath(T){if(!this._validateInputs(T,null))return null;const O=this.paths.splice(T,1)[0],x=this.spatialReference,N=O.map(M=>new D.Z(M,x));return this.notifyChange("paths"),N}removePoint(T,O){if(!this._validateInputs(T,O))return null;const x=new D.Z(this.paths[T].splice(O,1)[0],this.spatialReference);return this.notifyChange("paths"),x}setPoint(T,O,x){return this._validateInputs(T,O)?((0,k.l)(this,x),Array.isArray(x)||(x=x.toArray()),this.paths[T][O]=x,this.notifyChange("paths"),this):this}_validateInputs(T,O,x=!1){if(null==T||T<0||T>=this.paths.length)return!1;if(null!=O){const N=this.paths[T];if(x&&(O<0||O>N.length)||!x&&(O<0||O>=N.length))return!1}return!0}toJSON(T){return this.write({},T)}};(0,g._)([(0,J.Cb)({readOnly:!0})],V.prototype,"cache",null),(0,g._)([(0,J.Cb)({readOnly:!0})],V.prototype,"extent",null),(0,g._)([(0,J.Cb)({type:[[[Number]]],json:{write:{isRequired:!0}}})],V.prototype,"paths",void 0),(0,g._)([(0,C.c)("paths")],V.prototype,"writePaths",null),V=Z=(0,g._)([(0,j.j)("esri.geometry.Polyline")],V),V.prototype.toJSON.isDefaultToJSON=!0;const w=V},65234:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(86810),J=p(58817),B=p(90912),j=p(77712),C=p(76898),$=p(99433),L=p(37053);let I=D=class extends b.wq{constructor(k){super(k),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(k){if(!k)return null;if(k.wkid){if(102100===k.wkid)return D.WebMercator;if(4326===k.wkid)return D.WGS84}const Z=new D;return Z.read(k),Z}normalizeCtorArgs(k){return k&&"object"==typeof k?k:{["string"==typeof k?"wkt":"wkid"]:k}}get isWGS84(){return(0,L.oR)(this)}get isWebMercator(){return(0,L.sS)(this)}get isGeographic(){return(0,L.sT)(this)}get isWrappable(){return(0,L.MP)(this)}writeWkt(k,Z){this.wkid||(Z.wkt=k)}clone(){if(this===D.WGS84)return D.WGS84;if(this===D.WebMercator)return D.WebMercator;const k=new D;return null!=this.wkid?(k.wkid=this.wkid,null!=this.latestWkid&&(k.latestWkid=this.latestWkid),null!=this.vcsWkid&&(k.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(k.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(k.wkt=this.wkt),this.imageCoordinateSystem&&(k.imageCoordinateSystem=(0,J.d9)(this.imageCoordinateSystem)),k}equals(k){if(null==k)return!1;if(this.imageCoordinateSystem||k.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==k.imageCoordinateSystem)return!1;const{id:Z,referenceServiceName:X}=k.imageCoordinateSystem,{geodataXform:V}=k.imageCoordinateSystem,w=this.imageCoordinateSystem;return null==Z||V?JSON.stringify(w)===JSON.stringify(k.imageCoordinateSystem):X?w.id===Z&&w.referenceServiceName===X:w.id===Z}return(0,L.fS)(this,k)}toJSON(k){return this.write(void 0,k)}};I.GCS_NAD_1927=null,I.WGS84=null,I.WebMercator=null,I.PlateCarree=null,(0,g._)([(0,j.Cb)({readOnly:!0})],I.prototype,"isWGS84",null),(0,g._)([(0,j.Cb)({readOnly:!0})],I.prototype,"isWebMercator",null),(0,g._)([(0,j.Cb)({readOnly:!0})],I.prototype,"isGeographic",null),(0,g._)([(0,j.Cb)({readOnly:!0})],I.prototype,"isWrappable",null),(0,g._)([(0,j.Cb)({type:B.z8,json:{write:!0}})],I.prototype,"latestWkid",void 0),(0,g._)([(0,j.Cb)({type:B.z8,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkt}}}}}}})],I.prototype,"wkid",void 0),(0,g._)([(0,j.Cb)({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:null===this.wkid}}}}}}})],I.prototype,"wkt",void 0),(0,g._)([(0,$.c)("wkt"),(0,$.c)("web-scene","wkt")],I.prototype,"writeWkt",null),(0,g._)([(0,j.Cb)({type:B.z8,json:{write:!0}})],I.prototype,"vcsWkid",void 0),(0,g._)([(0,j.Cb)({type:B.z8,json:{write:!0}})],I.prototype,"latestVcsWkid",void 0),(0,g._)([(0,j.Cb)()],I.prototype,"imageCoordinateSystem",void 0),I=D=(0,g._)([(0,C.j)("esri.geometry.SpatialReference")],I),I.prototype.toJSON.isDefaultToJSON=!0,I.GCS_NAD_1927=new I({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),I.WGS84=new I(L.Zn),I.WebMercator=new I(L.R_),I.PlateCarree=new I(L.WR),Object.freeze&&(Object.freeze(I.GCS_NAD_1927),Object.freeze(I.WGS84),Object.freeze(I.WebMercator));const W=I},54614:(He,ve,p)=>{"use strict";p.d(ve,{Up:()=>he,Bm:()=>st,rS:()=>Ee,iQ:()=>Me,kR:()=>ue,zD:()=>pe,iV:()=>ie,CM:()=>$t,oj:()=>te,KC:()=>We,Wt:()=>rt});var g=p(15861),b=p(26584),J=p(21286),B=p(62208),j=p(10699),C=p(16730),$=p(28347),D=(p(84161),p(28093)),I=p(2004),W=p(72854),k=p(44956),Z=p(49672),X=p(37118),V=p(55214),w=p(12080),O=(p(65401),p(94425));Math;const M=O.sv.radius,Q=O.sv.eccentricitySquared,z={a1:M*Q,a2:M*Q*M*Q,a3:M*Q*Q/2,a4:M*Q*M*Q*2.5,a5:M*Q+M*Q*Q/2,a6:1-Q};var le=p(98346),oe=p(37053),ce=p(6178);p(33696);let K=null,ae=null,se=null,de={};function ue(){return!!K&&(0,k.i)()}function pe(at){return(0,B.Wi)(se)&&(se=Promise.all([(0,k.l)(),p.e(4918).then(p.bind(p,4918)).then(Ct=>Ct.g),p.e(8592).then(p.bind(p,77777))])),se.then(([,Ct,{hydratedAdapter:lt}])=>{(0,j.k_)(at),ae=lt,K=Ct.default,K._enableProjection(k.p)})}function ie(at,Ct,lt=null){return Array.isArray(at)?0===at.length?[]:te(ae,at,at[0].spatialReference,Ct,lt):te(ae,[at],at.spatialReference,Ct,lt)[0]}function te(at,Ct,lt,Tt,Zt=null){if((0,B.Wi)(lt)||(0,B.Wi)(Tt))return Ct;if(he(lt,Tt,Zt))return Ct.map(lr=>(0,B.Wg)(function Oe(at,Ct,lt){return at?"x"in at?function Be(at,Ct,lt,Tt,Zt){Or[0]=at.x,Or[1]=at.y;const lr=at.z;return Or[2]=void 0!==lr?lr:Zt,$t(Or,Ct,0,Or,Tt,0,1)?(lt.x=Or[0],lt.y=Or[1],lt.spatialReference=Tt,void 0===lr?(lt.z=void 0,lt.hasZ=!1):(lt.z=Or[2],lt.hasZ=!0),void 0===at.m?(lt.m=void 0,lt.hasM=!1):(lt.m=at.m,lt.hasM=!0),lt):null}(at,Ct,new Z.Z,lt,0):"xmin"in at?function qe(at,Ct,lt,Tt,Zt){const{xmin:lr,ymin:_r,xmax:ur,ymax:xr,hasZ:jr,hasM:Nr}=at;return nt(lr,_r,jr?at.zmin:Zt,Ct,Or,Tt)?(lt.xmin=Or[0],lt.ymin=Or[1],jr&&(lt.zmin=Or[2]),nt(ur,xr,jr?at.zmax:Zt,Ct,Or,Tt)?(lt.xmax=Or[0],lt.ymax=Or[1],jr&&(lt.zmax=Or[2]),Nr&&(lt.mmin=at.mmin,lt.mmax=at.mmax),lt.spatialReference=Tt,lt):null):null}(at,Ct,new I.Z,lt,0):"rings"in at?Qe(at,Ct,new X.Z,lt,0):"paths"in at?function $e(at,Ct,lt,Tt,Zt){const{paths:lr,hasZ:_r,hasM:ur}=at,xr=[];return gr(lr,_r,ur,Ct,xr,Tt,Zt)?(lt.paths=xr,lt.spatialReference=Tt,lt.hasZ=_r,lt.hasM=ur,lt):null}(at,Ct,new V.Z,lt,0):"points"in at?function me(at,Ct,lt,Tt,Zt){const{points:lr,hasZ:_r,hasM:ur}=at,xr=[],jr=lr.length,Nr=[];for(const us of lr)Nr.push(us[0],us[1],_r?us[2]:Zt);if(!$t(Nr,Ct,0,Nr,Tt,0,jr))return null;for(let us=0;us<jr;++us){const Ir=3*us,_s=Nr[Ir],Br=Nr[Ir+1];xr.push(_r&&ur?[_s,Br,Nr[Ir+2],lr[us][3]]:_r?[_s,Br,Nr[Ir+2]]:ur?[_s,Br,lr[us][2]]:[_s,Br])}return lt.points=xr,lt.spatialReference=Tt,lt.hasZ=_r,lt.hasM=ur,lt}(at,Ct,new W.Z,lt,0):null:null}(lr,lt,Tt)));if((0,B.Wi)(Zt)){const lr=le.Z.cacheKey(lt,Tt);void 0!==de[lr]?Zt=de[lr]:(Zt=Ee(lt,Tt,null),(0,B.Wi)(Zt)&&(Zt=new le.Z),de[lr]=Zt)}if((0,B.Wi)(K))throw new be;return K._project(at,Ct,lt,Tt,Zt)}function Ee(at,Ct,lt=null){if((0,B.Wi)(K))throw new be;if((0,B.Wi)(at)||(0,B.Wi)(Ct))return null;const Tt=K._getTransformation(ae,at,Ct,lt,null==lt?void 0:lt.spatialReference);return null!==Tt?le.Z.fromGE(Tt):null}class be extends b.Z{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var ye,at;function he(at,Ct,lt){return!lt&&(!!(0,oe.fS)(at,Ct)||(0,oe.JY)(at)&&(0,oe.JY)(Ct)&&!!Qs(at,Ct,sr))}function Me(at,Ct,lt,Tt){return Le.apply(this,arguments)}function Le(){return(Le=(0,g.Z)(function*(at,Ct,lt,Tt){if(!ue())if(Array.isArray(at)){for(const{source:Zt,dest:lr,geographicTransformation:_r}of at)if(!he(Zt,lr,_r))return pe(Tt)}else if(!he(at,Ct,lt))return pe(Tt)})).apply(this,arguments)}function rt(at,Ct,lt=Ct.spatialReference,Tt=0){return(0,B.pC)(lt)&&(0,B.pC)(Qe(at,at.spatialReference,Ct,lt,Tt))}function Qe(at,Ct,lt,Tt,Zt){const{rings:lr,hasZ:_r,hasM:ur}=at,xr=[];return gr(lr,_r,ur,Ct,xr,Tt,Zt)?(lt.rings=xr,lt.spatialReference=Tt,lt.hasZ=_r,lt.hasM=ur,lt):null}function We(at,Ct,lt,Tt=0){Or[0]=at.x,Or[1]=at.y;const Zt=at.z;return Or[2]=void 0!==Zt?Zt:Tt,$t(Or,at.spatialReference,0,Ct,lt,0,1)}function nt(at,Ct,lt,Tt,Zt,lr){return fr[0]=at,fr[1]=Ct,fr[2]=lt,$t(fr,Tt,0,Zt,lr,0,1)}function $t(at,Ct,lt,Tt,Zt,lr,_r=1){const ur=Qs(Ct,Zt,sr);if((0,B.Wi)(ur))return!1;if(ur===Dt){if(at===Tt&&lt===lr)return!0;const jr=lt+3*_r;for(let Nr=lt,us=lr;Nr<jr;Nr++,us++)Tt[us]=at[Nr];return!0}const xr=lt+3*_r;for(let jr=lt,Nr=lr;jr<xr;jr+=3,Nr+=3)ur(at,jr,Tt,Nr);return!0}function gr(at,Ct,lt,Tt,Zt,lr,_r=0){const ur=new Array;for(const jr of at)for(const Nr of jr)ur.push(Nr[0],Nr[1],Ct?Nr[2]:_r);if(!$t(ur,Tt,0,ur,lr,0,ur.length/3))return!1;let xr=0;Zt.length=0;for(const jr of at){const Nr=new Array;for(const us of jr)Ct&&lt?Nr.push([ur[xr++],ur[xr++],ur[xr++],us[3]]):Ct?Nr.push([ur[xr++],ur[xr++],ur[xr++]]):lt?(Nr.push([ur[xr++],ur[xr++],us[2]]),xr++):(Nr.push([ur[xr++],ur[xr++]]),xr++);Zt.push(Nr)}return!0}function st(at,Ct,lt,Tt){if((0,B.Wi)(at)||(0,B.Wi)(Tt))return!1;const Zt=Ft(at,Wt),lr=Ft(Tt,It);if(Zt===lr&&!ft(lr)&&(Zt!==ye.UNKNOWN||(0,oe.fS)(at,Tt)))return(0,$.f)(lt,Ct),!0;if(ft(lr)){const _r=ls[Zt][ye.LON_LAT],ur=ls[ye.LON_LAT][lr];return!(0,B.Wi)(_r)&&!(0,B.Wi)(ur)&&(_r(Ct,0,Ar,0),ur(Ar,0,Ur,0),St(br*Ar[0],br*Ar[1],lt),lt[12]=Ur[0],lt[13]=Ur[1],lt[14]=Ur[2],!0)}if((lr===ye.WEB_MERCATOR||lr===ye.PLATE_CARREE)&&(Zt===ye.WGS84||Zt===ye.CGCS2000&&lr===ye.PLATE_CARREE||Zt===ye.SPHERICAL_ECEF||Zt===ye.WEB_MERCATOR)){const _r=ls[Zt][ye.LON_LAT],ur=ls[ye.LON_LAT][lr];return!(0,B.Wi)(_r)&&!(0,B.Wi)(ur)&&(_r(Ct,0,Ar,0),ur(Ar,0,Ur,0),Zt===ye.SPHERICAL_ECEF?function Lt(at,Ct,lt){St(at,Ct,lt),(0,$.t)(lt,lt)}(br*Ar[0],br*Ar[1],lt):(0,$.i)(lt),lt[12]=Ur[0],lt[13]=Ur[1],lt[14]=Ur[2],!0)}return!1}function ft(at){return at===ye.SPHERICAL_ECEF||at===ye.SPHERICAL_MARS_PCPF||at===ye.SPHERICAL_MOON_PCPF}function St(at,Ct,lt){const Tt=Math.sin(at),Zt=Math.cos(at),lr=Math.sin(Ct),_r=Math.cos(Ct),ur=lt;return ur[0]=-Tt,ur[4]=-lr*Zt,ur[8]=_r*Zt,ur[12]=0,ur[1]=Zt,ur[5]=-lr*Tt,ur[9]=_r*Tt,ur[13]=0,ur[2]=0,ur[6]=_r,ur[10]=lr,ur[14]=0,ur[3]=0,ur[7]=0,ur[11]=0,ur[15]=1,ur}function Ft(at,Ct){return Ct.spatialReference===at?Ct.spatialReferenceId:(Ct.spatialReference=at,"metersPerUnit"in Ct&&(Ct.metersPerUnit=(0,C.c9)(at,1)),Ct.spatialReferenceId=at.wkt===w.GG.wkt?ye.SPHERICAL_ECEF:(0,oe.oR)(at)?ye.WGS84:(0,oe.sS)(at)?ye.WEB_MERCATOR:(0,oe.QM)(at)?ye.PLATE_CARREE:at.wkt===w.wY.wkt?ye.WGS84_ECEF:at.wkid===ce.W.CGCS2000?ye.CGCS2000:at.wkt===w.HQ.wkt?ye.SPHERICAL_MARS_PCPF:at.wkt===w.VY.wkt?ye.SPHERICAL_MOON_PCPF:(0,oe.BZ)(at)?ye.GCSMARS2000:(0,oe.V2)(at)?ye.GCSMOON2000:ye.UNKNOWN)}function Dt(at,Ct,lt,Tt){at!==lt&&(lt[Tt++]=at[Ct++],lt[Tt++]=at[Ct++],lt[Tt]=at[Ct])}function Vt(at,Ct,lt,Tt){lt[Tt++]=Er*(at[Ct++]/O.sv.radius),lt[Tt++]=Er*(Math.PI/2-2*Math.atan(Math.exp(-at[Ct++]/O.sv.radius))),lt[Tt]=at[Ct]}function ut(at,Ct,lt,Tt){!function gt(at,Ct,lt,Tt,Zt){const lr=.4999999*Math.PI,_r=(0,J.uZ)(br*at[Ct+1],-lr,lr),ur=Math.sin(_r);lt[Tt++]=br*at[Ct]*Zt.radius,lt[Tt++]=Zt.halfSemiMajorAxis*Math.log((1+ur)/(1-ur)),lt[Tt]=at[Ct+2]}(at,Ct,lt,Tt,O.sv)}(at=ye||(ye={}))[at.UNKNOWN=0]="UNKNOWN",at[at.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",at[at.WGS84=2]="WGS84",at[at.WEB_MERCATOR=3]="WEB_MERCATOR",at[at.WGS84_ECEF=4]="WGS84_ECEF",at[at.CGCS2000=5]="CGCS2000",at[at.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",at[at.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",at[at.GCSMARS2000=8]="GCSMARS2000",at[at.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",at[at.GCSMOON2000=10]="GCSMOON2000",at[at.LON_LAT=11]="LON_LAT",at[at.PLATE_CARREE=12]="PLATE_CARREE";const Ze=O.sv.radius*Math.PI/180,ot=180/(O.sv.radius*Math.PI);function Pe(at,Ct,lt,Tt){lt[Tt]=at[Ct]*Ze,lt[Tt+1]=at[Ct+1]*Ze,lt[Tt+2]=at[Ct+2]}function Ge(at,Ct,lt,Tt){lt[Tt]=at[Ct]*ot,lt[Tt+1]=at[Ct+1]*ot,lt[Tt+2]=at[Ct+2]}function Tr(at,Ct,lt,Tt,Zt){const lr=Zt+at[Ct+2],_r=br*at[Ct+1],ur=br*at[Ct],xr=Math.cos(_r);lt[Tt++]=Math.cos(ur)*xr*lr,lt[Tt++]=Math.sin(ur)*xr*lr,lt[Tt]=Math.sin(_r)*lr}function Gr(at,Ct,lt,Tt){Tr(at,Ct,lt,Tt,O.Z1.radius)}function Qr(at,Ct,lt,Tt){Tr(at,Ct,lt,Tt,O.yr.radius)}function Zr(at,Ct,lt,Tt){Tr(at,Ct,lt,Tt,O.sv.radius)}function es(at,Ct,lt,Tt,Zt){const lr=at[Ct],_r=at[Ct+1],ur=at[Ct+2],xr=Math.sqrt(lr*lr+_r*_r+ur*ur),jr=(0,J.Kt)(ur/(0===xr?1:xr)),Nr=Math.atan2(_r,lr);lt[Tt++]=Er*Nr,lt[Tt++]=Er*jr,lt[Tt]=xr-Zt}function bs(at,Ct,lt,Tt){es(at,Ct,lt,Tt,O.Z1.radius)}function Ms(at,Ct,lt,Tt){es(at,Ct,lt,Tt,O.yr.radius)}function ys(at,Ct,lt,Tt){es(at,Ct,lt,Tt,O.sv.radius)}function Ls(at,Ct,lt,Tt){!function en(at,Ct,lt,Tt,Zt){const lr=br*at[Ct],_r=br*at[Ct+1],ur=at[Ct+2],xr=Math.sin(_r),jr=Math.cos(_r),Nr=Zt.radius/Math.sqrt(1-Zt.eccentricitySquared*xr*xr);lt[Tt++]=(Nr+ur)*jr*Math.cos(lr),lt[Tt++]=(Nr+ur)*jr*Math.sin(lr),lt[Tt++]=(Nr*(1-Zt.eccentricitySquared)+ur)*xr}(at,Ct,lt,Tt,O.sv)}function ws(at,Ct,lt,Tt){const Zt=z,lr=at[Ct],_r=at[Ct+1],ur=at[Ct+2];let xr,jr,Nr,us,Ir,_s,Br,Ss,is,Is,Cs,ts,$r,Nt,zs,Mr,Xs,gs,Zs,rn,ds;xr=Math.abs(ur),jr=lr*lr+_r*_r,Nr=Math.sqrt(jr),us=jr+ur*ur,Ir=Math.sqrt(us),rn=Math.atan2(_r,lr),_s=ur*ur/us,Br=jr/us,Nt=Zt.a2/Ir,zs=Zt.a3-Zt.a4/Ir,Br>.3?(Ss=xr/Ir*(1+Br*(Zt.a1+Nt+_s*zs)/Ir),Zs=Math.asin(Ss),Is=Ss*Ss,is=Math.sqrt(1-Is)):(is=Nr/Ir*(1-_s*(Zt.a5-Nt-Br*zs)/Ir),Zs=Math.acos(is),Is=1-is*is,Ss=Math.sqrt(Is)),Cs=1-O.sv.eccentricitySquared*Is,ts=O.sv.radius/Math.sqrt(Cs),$r=Zt.a6*ts,Nt=Nr-ts*is,zs=xr-$r*Ss,Xs=is*Nt+Ss*zs,Mr=is*zs-Ss*Nt,gs=Mr/($r/Cs+Xs),Zs+=gs,ds=Xs+Mr*gs/2,ur<0&&(Zs=-Zs),lt[Tt++]=Er*rn,lt[Tt++]=Er*Zs,lt[Tt]=ds}const ls={[ye.WGS84]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Dt,[ye.WGS84_COMPARABLE_LON_LAT]:Dt,[ye.SPHERICAL_ECEF]:Zr,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:ut,[ye.PLATE_CARREE]:Pe,[ye.WGS84]:Dt,[ye.WGS84_ECEF]:Ls},[ye.CGCS2000]:{[ye.CGCS2000]:Dt,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Dt,[ye.WGS84_COMPARABLE_LON_LAT]:Dt,[ye.SPHERICAL_ECEF]:Zr,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:Pe,[ye.WGS84]:null,[ye.WGS84_ECEF]:Ls},[ye.GCSMARS2000]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:Dt,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Dt,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:Qr,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.GCSMOON2000]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:Dt,[ye.LON_LAT]:Dt,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:Gr,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.WEB_MERCATOR]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Vt,[ye.WGS84_COMPARABLE_LON_LAT]:Vt,[ye.SPHERICAL_ECEF]:function Gt(at,Ct,lt,Tt){Vt(at,Ct,lt,Tt),Zr(lt,Tt,lt,Tt)},[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:Dt,[ye.PLATE_CARREE]:function vt(at,Ct,lt,Tt){Vt(at,Ct,lt,Tt),Pe(lt,Tt,lt,Tt)},[ye.WGS84]:Vt,[ye.WGS84_ECEF]:function Qt(at,Ct,lt,Tt){Vt(at,Ct,lt,Tt),Ls(lt,Tt,lt,Tt)}},[ye.WGS84_ECEF]:{[ye.CGCS2000]:ws,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:ws,[ye.WGS84_COMPARABLE_LON_LAT]:ws,[ye.SPHERICAL_ECEF]:function Ns(at,Ct,lt,Tt){ws(at,Ct,lt,Tt),Zr(lt,Tt,lt,Tt)},[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:function tn(at,Ct,lt,Tt){ws(at,Ct,lt,Tt),ut(lt,Tt,lt,Tt)},[ye.PLATE_CARREE]:function zt(at,Ct,lt,Tt){ws(at,Ct,lt,Tt),Pe(lt,Tt,lt,Tt)},[ye.WGS84]:ws,[ye.WGS84_ECEF]:Dt},[ye.SPHERICAL_ECEF]:{[ye.CGCS2000]:ys,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:ys,[ye.WGS84_COMPARABLE_LON_LAT]:ys,[ye.SPHERICAL_ECEF]:Dt,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:function Ys(at,Ct,lt,Tt){ys(at,Ct,lt,Tt),ut(lt,Tt,lt,Tt)},[ye.PLATE_CARREE]:function Yt(at,Ct,lt,Tt){ys(at,Ct,lt,Tt),Pe(lt,Tt,lt,Tt)},[ye.WGS84]:ys,[ye.WGS84_ECEF]:function fn(at,Ct,lt,Tt){ys(at,Ct,lt,Tt),Ls(lt,Tt,lt,Tt)}},[ye.SPHERICAL_MARS_PCPF]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:Ms,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Ms,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:Dt,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.SPHERICAL_MOON_PCPF]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:bs,[ye.LON_LAT]:bs,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:Dt,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.UNKNOWN]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:null,[ye.WGS84_COMPARABLE_LON_LAT]:null,[ye.SPHERICAL_ECEF]:null,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:Dt,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:null,[ye.WGS84]:null,[ye.WGS84_ECEF]:null},[ye.LON_LAT]:{[ye.CGCS2000]:Dt,[ye.GCSMARS2000]:Dt,[ye.GCSMOON2000]:Dt,[ye.LON_LAT]:Dt,[ye.WGS84_COMPARABLE_LON_LAT]:Dt,[ye.SPHERICAL_ECEF]:Zr,[ye.SPHERICAL_MARS_PCPF]:Qr,[ye.SPHERICAL_MOON_PCPF]:Gr,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:ut,[ye.PLATE_CARREE]:Pe,[ye.WGS84]:Dt,[ye.WGS84_ECEF]:Ls},[ye.WGS84_COMPARABLE_LON_LAT]:{[ye.CGCS2000]:null,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Dt,[ye.WGS84_COMPARABLE_LON_LAT]:Dt,[ye.SPHERICAL_ECEF]:Zr,[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:null,[ye.PLATE_CARREE]:Pe,[ye.WGS84]:Dt,[ye.WGS84_ECEF]:Ls},[ye.PLATE_CARREE]:{[ye.CGCS2000]:Ge,[ye.GCSMARS2000]:null,[ye.GCSMOON2000]:null,[ye.LON_LAT]:Ge,[ye.WGS84_COMPARABLE_LON_LAT]:Ge,[ye.SPHERICAL_ECEF]:function et(at,Ct,lt,Tt){Ge(at,Ct,lt,Tt),Zr(lt,Tt,lt,Tt)},[ye.SPHERICAL_MARS_PCPF]:null,[ye.SPHERICAL_MOON_PCPF]:null,[ye.UNKNOWN]:null,[ye.WEB_MERCATOR]:function Rt(at,Ct,lt,Tt){Ge(at,Ct,lt,Tt),ut(lt,Tt,lt,Tt)},[ye.PLATE_CARREE]:Dt,[ye.WGS84]:Ge,[ye.WGS84_ECEF]:function Ut(at,Ct,lt,Tt){Ge(at,Ct,lt,Tt),Ls(lt,Tt,lt,Tt)}}};function Qs(at,Ct,lt=De()){return(0,B.Wi)(at)||(0,B.Wi)(Ct)?null:function Ds(at,Ct,lt){if((0,B.Wi)(at)||(0,B.Wi)(Ct)||lt.source.spatialReference===at&&lt.dest.spatialReference===Ct)return lt;const Tt=Ft(at,lt.source),Zt=Ft(Ct,lt.dest);return lt.projector=Tt===ye.UNKNOWN&&Zt===ye.UNKNOWN?(0,oe.fS)(at,Ct)?Dt:null:ls[Tt][Zt],lt}(at,Ct,lt).projector}function De(){return{source:{spatialReference:null,spatialReferenceId:ye.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ye.UNKNOWN,metersPerUnit:1},projector:Dt}}const Wt={spatialReference:null,spatialReferenceId:ye.UNKNOWN},It={spatialReference:null,spatialReferenceId:ye.UNKNOWN},sr=De(),br=(De(),(0,J.Vl)(1)),Er=(0,J.BV)(1),fr=(0,D.c)(),Ar=(0,D.c)(),Ur=(0,D.c)(),Or=(0,D.c)();(0,D.c)()},12080:(He,ve,p)=>{"use strict";p.d(ve,{GG:()=>j,HQ:()=>C,VY:()=>$,wY:()=>L,Iu:()=>W,e8:()=>k,rS:()=>I});var g=p(65234),b=p(94425),J=p(37053);function B(Z){return new g.Z({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${Z.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const j=B(b.sv),C=B(b.yr),$=B(b.Z1),L=new g.Z({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${b.sv.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function I(Z){return Z&&((0,J.BZ)(Z)||Z===C)?C:Z&&((0,J.V2)(Z)||Z===$)?$:j}function W(Z){return Z&&((0,J.BZ)(Z)||Z===C)?b.yr:Z&&((0,J.V2)(Z)||Z===$)?b.Z1:b.sv}function k(Z){return(0,J.o$)(Z)?b.yr:(0,J.ME)(Z)?b.Z1:b.sv}},94425:(He,ve,p)=>{"use strict";p.d(ve,{sv:()=>b,yr:()=>J,Z1:()=>B});class g{constructor(C,$,L,D){this.semiMajorAxis=C,this.flattening=$,this.outerAtmosphereRimWidth=L,this.semiMinorAxis=this.semiMajorAxis*(1-this.flattening),this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=D||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const b=new g(6378137,1/298.257223563,3e5,.006694379990137799),J=new g(3396190,1/169.8944472236118,23e4),B=new g(1737400,0,0)},98346:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>J});let g=0;class b{constructor(j=null){this.uid=g++,j?(this._wkt=void 0!==j.wkt?j.wkt:null,this._wkid=void 0!==j.wkid?j.wkid:-1,this._isInverse=void 0!==j.isInverse&&!0===j.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(j){const C=new b;return C._wkt=j.wkt,C._wkid=j.wkid,C._isInverse=j.isInverse,C}get wkt(){return this._wkt}set wkt(j){this._wkt=j,this.uid=g++}get wkid(){return this._wkid}set wkid(j){this._wkid=j,this.uid=g++}get isInverse(){return this._isInverse}set isInverse(j){this._isInverse=j,this.uid=g++}getInverse(){const j=new b;return j._wkt=this.wkt,j._wkid=this._wkid,j._isInverse=!this.isInverse,j}}class J{constructor(j){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,j&&j.steps)for(const C of j.steps)this.steps.push(C instanceof b?C:new b({wkid:C.wkid,wkt:C.wkt,isInverse:C.isInverse}))}static cacheKey(j,C){return[null!=j.wkid?j.wkid.toString():"-1",null!=j.wkt?j.wkt.toString():"",null!=C.wkid?C.wkid.toString():"-1",null!=C.wkt?C.wkt.toString():""].join(",")}static fromGE(j){const C=new J;let $="";for(const L of j.steps){const D=b.fromGE(L);C.steps.push(D),$+=D.uid.toString()+","}return C._cached_projection={},C._gtlistentry=null,C._chain=$,C}getInverse(){const j=new J;j.steps=[];for(let C=this.steps.length-1;C>=0;C--)j.steps.push(this.steps[C].getInverse());return j}getGTListEntry(){let j="";for(const C of this.steps)j+=C.uid.toString()+",";return j!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=j),this._gtlistentry}assignCachedGe(j,C,$){this._cached_projection[J.cacheKey(j,C)]=$}getCachedGeTransformation(j,C){let $="";for(const D of this.steps)$+=D.uid.toString()+",";$!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=$);const L=this._cached_projection[J.cacheKey(j,C)];return void 0===L?null:L}}},6178:(He,ve,p)=>{"use strict";var g,b;p.d(ve,{W:()=>g}),(b=g||(g={}))[b.CGCS2000=4490]="CGCS2000",b[b.GCSMARS2000=104971]="GCSMARS2000",b[b.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",b[b.GCSMOON2000=104903]="GCSMOON2000"},84029:(He,ve,p)=>{"use strict";let g;p.d(ve,{Z:()=>b});const b={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(g=2e3;g<=2045;g++)b[g]=0;for(g=2056;g<=2065;g++)b[g]=0;for(g=2067;g<=2135;g++)b[g]=0;for(g=2137;g<=2154;g++)b[g]=0;for(g=2161;g<=2170;g++)b[g]=0;for(g=2172;g<=2193;g++)b[g]=0;for(g=2195;g<=2198;g++)b[g]=0;for(g=2200;g<=2203;g++)b[g]=0;for(g=2205;g<=2217;g++)b[g]=0;for(g=2222;g<=2224;g++)b[g]=1;for(g=2225;g<=2250;g++)b[g]=2;for(g=2251;g<=2253;g++)b[g]=1;for(g=2257;g<=2264;g++)b[g]=2;for(g=2274;g<=2279;g++)b[g]=2;for(g=2280;g<=2282;g++)b[g]=1;for(g=2283;g<=2289;g++)b[g]=2;for(g=2290;g<=2292;g++)b[g]=0;for(g=2308;g<=2313;g++)b[g]=0;for(g=2315;g<=2491;g++)b[g]=0;for(g=2494;g<=2866;g++)b[g]=0;for(g=2867;g<=2869;g++)b[g]=1;for(g=2870;g<=2888;g++)b[g]=2;for(g=2891;g<=2895;g++)b[g]=2;for(g=2896;g<=2898;g++)b[g]=1;for(g=2902;g<=2908;g++)b[g]=2;for(g=2915;g<=2920;g++)b[g]=2;for(g=2921;g<=2923;g++)b[g]=1;for(g=2924;g<=2930;g++)b[g]=2;for(g=2931;g<=2962;g++)b[g]=0;for(g=2964;g<=2968;g++)b[g]=2;for(g=2969;g<=2973;g++)b[g]=0;for(g=2975;g<=2991;g++)b[g]=0;for(g=2995;g<=3051;g++)b[g]=0;for(g=3054;g<=3079;g++)b[g]=0;for(g=3081;g<=3088;g++)b[g]=0;for(g=3092;g<=3101;g++)b[g]=0;for(g=3106;g<=3138;g++)b[g]=0;for(g=3146;g<=3151;g++)b[g]=0;for(g=3153;g<=3166;g++)b[g]=0;for(g=3168;g<=3172;g++)b[g]=0;for(g=3174;g<=3203;g++)b[g]=0;for(g=3294;g<=3358;g++)b[g]=0;for(g=3367;g<=3403;g++)b[g]=0;for(g=3408;g<=3416;g++)b[g]=0;for(g=3417;g<=3438;g++)b[g]=2;for(g=3441;g<=3446;g++)b[g]=2;for(g=3447;g<=3450;g++)b[g]=0;for(g=3451;g<=3459;g++)b[g]=2;for(g=3460;g<=3478;g++)b[g]=0;for(g=3554;g<=3559;g++)b[g]=0;for(g=3560;g<=3570;g++)b[g]=2;for(g=3571;g<=3581;g++)b[g]=0;for(g=3594;g<=3597;g++)b[g]=0;for(g=3601;g<=3604;g++)b[g]=0;for(g=3637;g<=3639;g++)b[g]=0;for(g=3665;g<=3667;g++)b[g]=0;for(g=3693;g<=3695;g++)b[g]=0;for(g=3701;g<=3727;g++)b[g]=0;for(g=3728;g<=3739;g++)b[g]=2;for(g=3740;g<=3751;g++)b[g]=0;for(g=3753;g<=3760;g++)b[g]=2;for(g=3761;g<=3773;g++)b[g]=0;for(g=3775;g<=3777;g++)b[g]=0;for(g=3779;g<=3781;g++)b[g]=0;for(g=3783;g<=3785;g++)b[g]=0;for(g=3788;g<=3791;g++)b[g]=0;for(g=3797;g<=3802;g++)b[g]=0;for(g=3814;g<=3816;g++)b[g]=0;for(g=3825;g<=3829;g++)b[g]=0;for(g=3832;g<=3841;g++)b[g]=0;for(g=3844;g<=3852;g++)b[g]=0;for(g=3873;g<=3885;g++)b[g]=0;for(g=3890;g<=3893;g++)b[g]=0;for(g=3907;g<=3912;g++)b[g]=0;for(g=3942;g<=3950;g++)b[g]=0;for(g=3968;g<=3970;g++)b[g]=0;for(g=3973;g<=3976;g++)b[g]=0;for(g=3986;g<=3989;g++)b[g]=0;for(g=3994;g<=3997;g++)b[g]=0;for(g=4048;g<=4051;g++)b[g]=0;for(g=4056;g<=4063;g++)b[g]=0;for(g=4093;g<=4096;g++)b[g]=0;for(g=4390;g<=4398;g++)b[g]=0;for(g=4399;g<=4413;g++)b[g]=2;for(g=4418;g<=4433;g++)b[g]=2;for(g=4455;g<=4457;g++)b[g]=2;for(g=4484;g<=4489;g++)b[g]=0;for(g=4491;g<=4554;g++)b[g]=0;for(g=4568;g<=4589;g++)b[g]=0;for(g=4652;g<=4656;g++)b[g]=0;for(g=4766;g<=4800;g++)b[g]=0;for(g=5014;g<=5016;g++)b[g]=0;for(g=5069;g<=5072;g++)b[g]=0;for(g=5105;g<=5130;g++)b[g]=0;for(g=5173;g<=5188;g++)b[g]=0;for(g=5253;g<=5259;g++)b[g]=0;for(g=5269;g<=5275;g++)b[g]=0;for(g=5292;g<=5311;g++)b[g]=0;for(g=5329;g<=5331;g++)b[g]=0;for(g=5343;g<=5349;g++)b[g]=0;for(g=5355;g<=5357;g++)b[g]=0;for(g=5387;g<=5389;g++)b[g]=0;for(g=5459;g<=5463;g++)b[g]=0;for(g=5479;g<=5482;g++)b[g]=0;for(g=5518;g<=5520;g++)b[g]=0;for(g=5530;g<=5539;g++)b[g]=0;for(g=5550;g<=5552;g++)b[g]=0;for(g=5562;g<=5583;g++)b[g]=0;for(g=5623;g<=5625;g++)b[g]=2;for(g=5631;g<=5639;g++)b[g]=0;for(g=5649;g<=5653;g++)b[g]=0;for(g=5663;g<=5680;g++)b[g]=0;for(g=5682;g<=5685;g++)b[g]=0;for(g=5875;g<=5877;g++)b[g]=0;for(g=5896;g<=5899;g++)b[g]=0;for(g=5921;g<=5940;g++)b[g]=0;for(g=6050;g<=6125;g++)b[g]=0;for(g=6244;g<=6275;g++)b[g]=0;for(g=6328;g<=6348;g++)b[g]=0;for(g=6350;g<=6356;g++)b[g]=0;for(g=6366;g<=6372;g++)b[g]=0;for(g=6381;g<=6387;g++)b[g]=0;for(g=6393;g<=6404;g++)b[g]=0;for(g=6480;g<=6483;g++)b[g]=0;for(g=6511;g<=6514;g++)b[g]=0;for(g=6579;g<=6581;g++)b[g]=0;for(g=6619;g<=6624;g++)b[g]=0;for(g=6625;g<=6627;g++)b[g]=2;for(g=6628;g<=6632;g++)b[g]=0;for(g=6634;g<=6637;g++)b[g]=0;for(g=6669;g<=6692;g++)b[g]=0;for(g=6707;g<=6709;g++)b[g]=0;for(g=6720;g<=6723;g++)b[g]=0;for(g=6732;g<=6738;g++)b[g]=0;for(g=6931;g<=6933;g++)b[g]=0;for(g=6956;g<=6959;g++)b[g]=0;for(g=7005;g<=7007;g++)b[g]=0;for(g=7057;g<=7070;g++)b[g]=2;for(g=7074;g<=7082;g++)b[g]=0;for(g=7109;g<=7118;g++)b[g]=0;for(g=7119;g<=7127;g++)b[g]=1;for(g=7374;g<=7376;g++)b[g]=0;for(g=7528;g<=7586;g++)b[g]=0;for(g=7587;g<=7645;g++)b[g]=2;for(g=7692;g<=7696;g++)b[g]=0;for(g=7755;g<=7787;g++)b[g]=0;for(g=7791;g<=7795;g++)b[g]=0;for(g=7799;g<=7801;g++)b[g]=0;for(g=7803;g<=7805;g++)b[g]=0;for(g=7825;g<=7831;g++)b[g]=0;for(g=7845;g<=7859;g++)b[g]=0;for(g=8013;g<=8032;g++)b[g]=0;for(g=8065;g<=8068;g++)b[g]=1;for(g=8518;g<=8529;g++)b[g]=2;for(g=8533;g<=8536;g++)b[g]=2;for(g=8538;g<=8540;g++)b[g]=2;for(g=8677;g<=8679;g++)b[g]=0;for(g=8836;g<=8840;g++)b[g]=0;for(g=8857;g<=8859;g++)b[g]=0;for(g=8908;g<=8910;g++)b[g]=0;for(g=9154;g<=9159;g++)b[g]=0;for(g=9205;g<=9218;g++)b[g]=0;for(g=9271;g<=9273;g++)b[g]=0;for(g=9295;g<=9297;g++)b[g]=0;for(g=9356;g<=9360;g++)b[g]=0;for(g=9404;g<=9407;g++)b[g]=0;for(g=9476;g<=9482;g++)b[g]=0;for(g=9487;g<=9494;g++)b[g]=0;for(g=9697;g<=9699;g++)b[g]=0;for(g=20002;g<=20032;g++)b[g]=0;for(g=20062;g<=20092;g++)b[g]=0;for(g=20135;g<=20138;g++)b[g]=0;for(g=20248;g<=20258;g++)b[g]=0;for(g=20348;g<=20358;g++)b[g]=0;for(g=20436;g<=20440;g++)b[g]=0;for(g=20822;g<=20824;g++)b[g]=0;for(g=20904;g<=20932;g++)b[g]=0;for(g=20934;g<=20936;g++)b[g]=0;for(g=21004;g<=21032;g++)b[g]=0;for(g=21035;g<=21037;g++)b[g]=0;for(g=21095;g<=21097;g++)b[g]=0;for(g=21148;g<=21150;g++)b[g]=0;for(g=21207;g<=21264;g++)b[g]=0;for(g=21307;g<=21364;g++)b[g]=0;for(g=21413;g<=21423;g++)b[g]=0;for(g=21453;g<=21463;g++)b[g]=0;for(g=21473;g<=21483;g++)b[g]=0;for(g=21780;g<=21782;g++)b[g]=0;for(g=21891;g<=21894;g++)b[g]=0;for(g=21896;g<=21899;g++)b[g]=0;for(g=22171;g<=22177;g++)b[g]=0;for(g=22181;g<=22187;g++)b[g]=0;for(g=22191;g<=22197;g++)b[g]=0;for(g=22234;g<=22236;g++)b[g]=0;for(g=22521;g<=22525;g++)b[g]=0;for(g=22991;g<=22994;g++)b[g]=0;for(g=23028;g<=23038;g++)b[g]=0;for(g=23830;g<=23853;g++)b[g]=0;for(g=23866;g<=23872;g++)b[g]=0;for(g=23877;g<=23884;g++)b[g]=0;for(g=23886;g<=23894;g++)b[g]=0;for(g=23946;g<=23948;g++)b[g]=0;for(g=24311;g<=24313;g++)b[g]=0;for(g=24342;g<=24347;g++)b[g]=0;for(g=24370;g<=24374;g++)b[g]=10;for(g=24375;g<=24381;g++)b[g]=0;for(g=24718;g<=24721;g++)b[g]=0;for(g=24817;g<=24821;g++)b[g]=0;for(g=24877;g<=24882;g++)b[g]=0;for(g=24891;g<=24893;g++)b[g]=0;for(g=25391;g<=25395;g++)b[g]=0;for(g=25828;g<=25838;g++)b[g]=0;for(g=26191;g<=26195;g++)b[g]=0;for(g=26391;g<=26393;g++)b[g]=0;for(g=26701;g<=26722;g++)b[g]=0;for(g=26729;g<=26799;g++)b[g]=2;for(g=26801;g<=26803;g++)b[g]=2;for(g=26811;g<=26813;g++)b[g]=2;for(g=26847;g<=26870;g++)b[g]=2;for(g=26891;g<=26899;g++)b[g]=0;for(g=26901;g<=26923;g++)b[g]=0;for(g=26929;g<=26946;g++)b[g]=0;for(g=26948;g<=26998;g++)b[g]=0;for(g=27037;g<=27040;g++)b[g]=0;for(g=27205;g<=27232;g++)b[g]=0;for(g=27258;g<=27260;g++)b[g]=0;for(g=27391;g<=27398;g++)b[g]=0;for(g=27561;g<=27564;g++)b[g]=0;for(g=27571;g<=27574;g++)b[g]=0;for(g=27581;g<=27584;g++)b[g]=0;for(g=27591;g<=27594;g++)b[g]=0;for(g=28191;g<=28193;g++)b[g]=0;for(g=28348;g<=28358;g++)b[g]=0;for(g=28402;g<=28432;g++)b[g]=0;for(g=28462;g<=28492;g++)b[g]=0;for(g=29118;g<=29122;g++)b[g]=0;for(g=29168;g<=29172;g++)b[g]=0;for(g=29177;g<=29185;g++)b[g]=0;for(g=29187;g<=29195;g++)b[g]=0;for(g=29900;g<=29903;g++)b[g]=0;for(g=30161;g<=30179;g++)b[g]=0;for(g=30491;g<=30494;g++)b[g]=0;for(g=30729;g<=30732;g++)b[g]=0;for(g=31251;g<=31259;g++)b[g]=0;for(g=31265;g<=31268;g++)b[g]=0;for(g=31275;g<=31279;g++)b[g]=0;for(g=31281;g<=31297;g++)b[g]=0;for(g=31461;g<=31469;g++)b[g]=0;for(g=31491;g<=31495;g++)b[g]=0;for(g=31917;g<=31922;g++)b[g]=0;for(g=31965;g<=32e3;g++)b[g]=0;for(g=32001;g<=32003;g++)b[g]=2;for(g=32005;g<=32031;g++)b[g]=2;for(g=32033;g<=32060;g++)b[g]=2;for(g=32064;g<=32067;g++)b[g]=2;for(g=32074;g<=32077;g++)b[g]=2;for(g=32081;g<=32086;g++)b[g]=0;for(g=32107;g<=32130;g++)b[g]=0;for(g=32133;g<=32158;g++)b[g]=0;for(g=32164;g<=32167;g++)b[g]=2;for(g=32180;g<=32199;g++)b[g]=0;for(g=32201;g<=32260;g++)b[g]=0;for(g=32301;g<=32360;g++)b[g]=0;for(g=32601;g<=32662;g++)b[g]=0;for(g=32664;g<=32667;g++)b[g]=2;for(g=32701;g<=32761;g++)b[g]=0;for(g=53001;g<=53004;g++)b[g]=0;for(g=53008;g<=53019;g++)b[g]=0;for(g=53021;g<=53032;g++)b[g]=0;for(g=53034;g<=53037;g++)b[g]=0;for(g=53042;g<=53046;g++)b[g]=0;for(g=53074;g<=53080;g++)b[g]=0;for(g=54001;g<=54004;g++)b[g]=0;for(g=54008;g<=54019;g++)b[g]=0;for(g=54021;g<=54032;g++)b[g]=0;for(g=54034;g<=54037;g++)b[g]=0;for(g=54042;g<=54046;g++)b[g]=0;for(g=54048;g<=54053;g++)b[g]=0;for(g=54074;g<=54080;g++)b[g]=0;for(g=54098;g<=54101;g++)b[g]=0;for(g=102001;g<=102040;g++)b[g]=0;for(g=102042;g<=102063;g++)b[g]=0;for(g=102065;g<=102067;g++)b[g]=0;for(g=102070;g<=102117;g++)b[g]=0;for(g=102122;g<=102216;g++)b[g]=0;for(g=102221;g<=102377;g++)b[g]=0;for(g=102382;g<=102388;g++)b[g]=0;for(g=102389;g<=102398;g++)b[g]=2;for(g=102399;g<=102444;g++)b[g]=0;for(g=102445;g<=102447;g++)b[g]=2;for(g=102448;g<=102458;g++)b[g]=0;for(g=102459;g<=102468;g++)b[g]=2;for(g=102469;g<=102499;g++)b[g]=0;for(g=102500;g<=102519;g++)b[g]=1;for(g=102520;g<=102524;g++)b[g]=0;for(g=102525;g<=102529;g++)b[g]=2;for(g=102530;g<=102588;g++)b[g]=0;for(g=102590;g<=102598;g++)b[g]=0;for(g=102601;g<=102603;g++)b[g]=0;for(g=102605;g<=102628;g++)b[g]=0;for(g=102629;g<=102646;g++)b[g]=2;for(g=102648;g<=102700;g++)b[g]=2;for(g=102701;g<=102703;g++)b[g]=0;for(g=102707;g<=102730;g++)b[g]=2;for(g=102733;g<=102758;g++)b[g]=2;for(g=102767;g<=102900;g++)b[g]=0;for(g=102901;g<=102933;g++)b[g]=2;for(g=102934;g<=102950;g++)b[g]=13;for(g=102951;g<=102960;g++)b[g]=0;for(g=102965;g<=102969;g++)b[g]=0;for(g=102971;g<=102973;g++)b[g]=0;for(g=102975;g<=102989;g++)b[g]=0;for(g=102990;g<=102992;g++)b[g]=1;for(g=102997;g<=103002;g++)b[g]=0;for(g=103003;g<=103008;g++)b[g]=2;for(g=103009;g<=103011;g++)b[g]=0;for(g=103012;g<=103014;g++)b[g]=2;for(g=103019;g<=103021;g++)b[g]=0;for(g=103022;g<=103024;g++)b[g]=2;for(g=103029;g<=103031;g++)b[g]=0;for(g=103032;g<=103034;g++)b[g]=2;for(g=103065;g<=103068;g++)b[g]=0;for(g=103074;g<=103076;g++)b[g]=0;for(g=103077;g<=103079;g++)b[g]=1;for(g=103080;g<=103082;g++)b[g]=0;for(g=103083;g<=103085;g++)b[g]=2;for(g=103090;g<=103093;g++)b[g]=0;for(g=103097;g<=103099;g++)b[g]=0;for(g=103100;g<=103102;g++)b[g]=2;for(g=103107;g<=103109;g++)b[g]=0;for(g=103110;g<=103112;g++)b[g]=2;for(g=103113;g<=103116;g++)b[g]=0;for(g=103117;g<=103120;g++)b[g]=2;for(g=103153;g<=103157;g++)b[g]=0;for(g=103158;g<=103162;g++)b[g]=2;for(g=103163;g<=103165;g++)b[g]=0;for(g=103166;g<=103168;g++)b[g]=1;for(g=103169;g<=103171;g++)b[g]=2;for(g=103186;g<=103188;g++)b[g]=0;for(g=103189;g<=103191;g++)b[g]=2;for(g=103192;g<=103195;g++)b[g]=0;for(g=103196;g<=103199;g++)b[g]=2;for(g=103200;g<=103224;g++)b[g]=0;for(g=103225;g<=103227;g++)b[g]=1;for(g=103232;g<=103237;g++)b[g]=0;for(g=103238;g<=103243;g++)b[g]=2;for(g=103244;g<=103246;g++)b[g]=0;for(g=103247;g<=103249;g++)b[g]=2;for(g=103254;g<=103256;g++)b[g]=0;for(g=103257;g<=103259;g++)b[g]=2;for(g=103264;g<=103266;g++)b[g]=0;for(g=103267;g<=103269;g++)b[g]=2;for(g=103300;g<=103375;g++)b[g]=0;for(g=103381;g<=103383;g++)b[g]=0;for(g=103384;g<=103386;g++)b[g]=1;for(g=103387;g<=103389;g++)b[g]=0;for(g=103390;g<=103392;g++)b[g]=2;for(g=103397;g<=103399;g++)b[g]=0;for(g=103400;g<=103471;g++)b[g]=2;for(g=103476;g<=103478;g++)b[g]=0;for(g=103479;g<=103481;g++)b[g]=2;for(g=103486;g<=103488;g++)b[g]=0;for(g=103489;g<=103491;g++)b[g]=2;for(g=103492;g<=103495;g++)b[g]=0;for(g=103496;g<=103499;g++)b[g]=2;for(g=103528;g<=103543;g++)b[g]=0;for(g=103544;g<=103548;g++)b[g]=2;for(g=103549;g<=103551;g++)b[g]=0;for(g=103552;g<=103554;g++)b[g]=1;for(g=103555;g<=103557;g++)b[g]=2;for(g=103558;g<=103560;g++)b[g]=0;for(g=103571;g<=103573;g++)b[g]=0;for(g=103574;g<=103576;g++)b[g]=2;for(g=103577;g<=103580;g++)b[g]=0;for(g=103581;g<=103583;g++)b[g]=2;for(g=103595;g<=103694;g++)b[g]=0;for(g=103696;g<=103699;g++)b[g]=0;for(g=103700;g<=103793;g++)b[g]=2;for(g=103794;g<=103872;g++)b[g]=0;for(g=103900;g<=103971;g++)b[g]=2},5548:(He,ve,p)=>{"use strict";p.d(ve,{Gv:()=>Me,Ue:()=>j,cS:()=>te,fS:()=>Ke,TC:()=>I,pp:()=>k,JR:()=>fe,al:()=>C,t8:()=>ie,Tn:()=>pe,op:()=>ue,dp:()=>Q});var g=p(62208);function j(Oe=Le){return[Oe[0],Oe[1],Oe[2],Oe[3],Oe[4],Oe[5]]}function C(Oe,xe,Be,Y,me,Ie,$e=j()){return $e[0]=Oe,$e[1]=xe,$e[2]=Be,$e[3]=Y,$e[4]=me,$e[5]=Ie,$e}function I(Oe,xe){Oe[0]=Math.min(Oe[0],xe[0]),Oe[1]=Math.min(Oe[1],xe[1]),Oe[2]=Math.min(Oe[2],xe[2]),Oe[3]=Math.max(Oe[3],xe[3]),Oe[4]=Math.max(Oe[4],xe[4]),Oe[5]=Math.max(Oe[5],xe[5])}function k(Oe,xe){Oe[0]=Math.min(Oe[0],xe[0]),Oe[1]=Math.min(Oe[1],xe[1]),Oe[2]=Math.min(Oe[2],xe[2]),Oe[3]=Math.max(Oe[3],xe[0]),Oe[4]=Math.max(Oe[4],xe[1]),Oe[5]=Math.max(Oe[5],xe[2])}function Q(Oe,xe=[0,0,0]){return xe[0]=function T(Oe){return Oe[0]>=Oe[3]?0:Oe[3]-Oe[0]}(Oe),xe[1]=function O(Oe){return Oe[1]>=Oe[4]?0:Oe[4]-Oe[1]}(Oe),xe[2]=function x(Oe){return Oe[2]>=Oe[5]?0:Oe[5]-Oe[2]}(Oe),xe}function ue(Oe,xe,Be=Oe){return Be[0]=xe[0],Be[1]=xe[1],Be[2]=xe[2],Be!==Oe&&(Be[3]=Oe[3],Be[4]=Oe[4],Be[5]=Oe[5]),Be}function pe(Oe,xe,Be=Oe){return Be[3]=xe[0],Be[4]=xe[1],Be[5]=xe[2],Be!==Oe&&(Be[0]=Oe[0],Be[1]=Oe[1],Be[2]=Oe[2]),Oe}function ie(Oe,xe){return Oe[0]=xe[0],Oe[1]=xe[1],Oe[2]=xe[2],Oe[3]=xe[3],Oe[4]=xe[4],Oe[5]=xe[5],Oe}function te(Oe){return Oe?ie(Oe,Me):j(Me)}function fe(Oe,xe){return Oe[0]=xe[0],Oe[1]=xe[1],Oe[2]=Number.NEGATIVE_INFINITY,Oe[3]=xe[2],Oe[4]=xe[3],Oe[5]=Number.POSITIVE_INFINITY,Oe}function be(Oe){return 6===Oe.length}function Ke(Oe,xe,Be){if((0,g.Wi)(Oe)||(0,g.Wi)(xe))return Oe===xe;if(!be(Oe)||!be(xe))return!1;if(Be){for(let Y=0;Y<Oe.length;Y++)if(!Be(Oe[Y],xe[Y]))return!1}else for(let Y=0;Y<Oe.length;Y++)if(Oe[Y]!==xe[Y])return!1;return!0}p(2004),p(65401);const Me=[1/0,1/0,1/0,-1/0,-1/0,-1/0],Le=[0,0,0,0,0,0];j()},65401:(He,ve,p)=>{"use strict";p.d(ve,{Gv:()=>ye,SO:()=>O,d9:()=>$,r3:()=>ce,Zm:()=>le,Ue:()=>C,Ho:()=>k,oJ:()=>I,al:()=>D,Cb:()=>T,kK:()=>oe,HH:()=>W,bf:()=>w}),p(8314),p(21286);var J=p(62208),B=p(2004);function C(he=Ke){return[he[0],he[1],he[2],he[3]]}function $(he){return[he[0],he[1],he[2],he[3]]}function D(he,Me,Le,Je,Oe=C()){return Oe[0]=he,Oe[1]=Me,Oe[2]=Le,Oe[3]=Je,Oe}function I(he,Me=C()){return Me[0]=he.xmin,Me[1]=he.ymin,Me[2]=he.xmax,Me[3]=he.ymax,Me}function W(he,Me){return new B.Z({xmin:he[0],ymin:he[1],xmax:he[2],ymax:he[3],spatialReference:Me})}function k(he,Me){Me[0]<he[0]&&(he[0]=Me[0]),Me[0]>he[2]&&(he[2]=Me[0]),Me[1]<he[1]&&(he[1]=Me[1]),Me[1]>he[3]&&(he[3]=Me[1])}function w(he){return(0,J.Wi)(he)||he[0]>=he[2]?0:he[2]-he[0]}function T(he){return he[1]>=he[3]?0:he[3]-he[1]}function O(he){return w(he)*T(he)}function le(he,Me,Le){return Me[0]>=he[0]-Le&&Me[1]>=he[1]-Le&&Me[0]<=he[2]+Le&&Me[1]<=he[3]+Le}function oe(he,Me){return Math.max(Me[0],he[0])<=Math.min(Me[2],he[2])&&Math.max(Me[1],he[1])<=Math.min(Me[3],he[3])}function ce(he,Me){return Me[0]>=he[0]&&Me[2]<=he[2]&&Me[1]>=he[1]&&Me[3]<=he[3]}const ye=[1/0,1/0,-1/0,-1/0],Ke=[0,0,0,0]},32442:(He,ve,p)=>{"use strict";function g(w){return void 0!==w.xmin&&void 0!==w.ymin&&void 0!==w.xmax&&void 0!==w.ymax}function b(w){return void 0!==w.points}function J(w){return void 0!==w.x&&void 0!==w.y}function B(w){return void 0!==w.paths}function j(w){return void 0!==w.rings}function C(w){return(T,O)=>null==T?O:null==O?T:w(T,O)}p.d(ve,{$P:()=>D,Yg:()=>I,lC:()=>Z,C6:()=>W});const $=C(Math.min),L=C(Math.max);function D(w,T){return B(T)?W(w,T.paths,!1,!1):j(T)?W(w,T.rings,!1,!1):b(T)?Z(w,T.points,!1,!1,!1,!1):g(T)?k(w,T):(J(T)&&(w[0]=T.x,w[1]=T.y,w[2]=T.x,w[3]=T.y),w)}function I(w,T){return B(T)?W(w,T.paths,!0,!1):j(T)?W(w,T.rings,!0,!1):b(T)?Z(w,T.points,!0,!1,!0,!1):g(T)?k(w,T,0,0,!0,!1):(J(T)&&(w[0]=T.x,w[1]=T.y,w[2]=T.z,w[3]=T.x,w[4]=T.y,w[5]=T.z),w)}function W(w,T,O,x){const N=O?3:2;if(!T.length||!T[0].length)return null;let M,Q,z,ee,[le,oe]=T[0][0],[ce,re]=T[0][0];for(let K=0;K<T.length;K++){const ae=T[K];for(let se=0;se<ae.length;se++){const de=ae[se],[ue,pe]=de;if(le=$(le,ue),oe=$(oe,pe),ce=L(ce,ue),re=L(re,pe),O&&de.length>2){const ie=de[2];M=$(M,ie),Q=L(Q,ie)}if(x&&de.length>N){const ie=de[N];z=$(M,ie),ee=L(Q,ie)}}}return O?x?(w[0]=le,w[1]=oe,w[2]=M,w[3]=z,w[4]=ce,w[5]=re,w[6]=Q,w[7]=ee,w.length=8,w):(w[0]=le,w[1]=oe,w[2]=M,w[3]=ce,w[4]=re,w[5]=Q,w.length=6,w):x?(w[0]=le,w[1]=oe,w[2]=z,w[3]=ce,w[4]=re,w[5]=ee,w.length=6,w):(w[0]=le,w[1]=oe,w[2]=ce,w[3]=re,w.length=4,w)}function k(w,T,O,x,N,M){const Q=T.xmin,z=T.xmax,ee=T.ymin,le=T.ymax;let oe=T.zmin,ce=T.zmax,re=T.mmin,K=T.mmax;return N?(oe=oe||0,ce=ce||0,M?(re=re||0,K=K||0,w[0]=Q,w[1]=ee,w[2]=oe,w[3]=re,w[4]=z,w[5]=le,w[6]=ce,w[7]=K,w):(w[0]=Q,w[1]=ee,w[2]=oe,w[3]=z,w[4]=le,w[5]=ce,w)):M?(re=re||0,K=K||0,w[0]=Q,w[1]=ee,w[2]=re,w[3]=z,w[4]=le,w[5]=K,w):(w[0]=Q,w[1]=ee,w[2]=z,w[3]=le,w)}function Z(w,T,O,x,N,M){const Q=O?3:2,z=x&&M,ee=O&&N;if(!T.length||!T[0].length)return null;let le,oe,ce,re,[K,ae]=T[0],[se,de]=T[0];for(let ue=0;ue<T.length;ue++){const pe=T[ue],[ie,te]=pe;if(K=$(K,ie),ae=$(ae,te),se=L(se,ie),de=L(de,te),ee&&pe.length>2){const Ee=pe[2];le=$(le,Ee),oe=L(oe,Ee)}if(z&&pe.length>Q){const Ee=pe[Q];ce=$(le,Ee),re=L(oe,Ee)}}return N?(le=le||0,oe=oe||0,M?(ce=ce||0,re=re||0,w[0]=K,w[1]=ae,w[2]=le,w[3]=ce,w[4]=se,w[5]=de,w[6]=oe,w[7]=re,w):(w[0]=K,w[1]=ae,w[2]=le,w[3]=se,w[4]=de,w[5]=oe,w)):M?(ce=ce||0,re=re||0,w[0]=K,w[1]=ae,w[2]=ce,w[3]=se,w[4]=de,w[5]=re,w):(w[0]=K,w[1]=ae,w[2]=se,w[3]=de,w)}},27105:(He,ve,p)=>{"use strict";p.d(ve,{$G:()=>b,tO:()=>J});var g=p(25748);function b($){return $?$.hasZ?[$.xmax-$.xmin/2,$.ymax-$.ymin/2,$.zmax-$.zmin/2]:[$.xmax-$.xmin/2,$.ymax-$.ymin/2]:null}function J($){return $?function B($,L){if(!$||!$.length)return null;const D=[],I=[],W=L?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let k=0,Z=$.length;k<Z;k++){const X=j($[k],L,W);X&&I.push(X)}if(I.sort((k,Z)=>{let X=k[2]-Z[2];return 0===X&&L&&(X=k[4]-Z[4]),X}),I.length&&(D[0]=I[0][0],D[1]=I[0][1],L&&(D[2]=I[0][3]),(D[0]<W[0]||D[0]>W[1]||D[1]<W[2]||D[1]>W[3]||L&&(D[2]<W[4]||D[2]>W[5]))&&(D.length=0)),!D.length){const k=$[0]&&$[0].length?function C($,L){const D=L?[0,0,0]:[0,0],I=L?[0,0,0]:[0,0];let W=0,k=0,Z=0,X=0;for(let V=0,w=$.length;V<w-1;V++){const T=$[V],O=$[V+1];if(T&&O){D[0]=T[0],D[1]=T[1],I[0]=O[0],I[1]=O[1],L&&T.length>2&&O.length>2&&(D[2]=T[2],I[2]=O[2]);const x=(0,g.xA)(D,I);if(x){W+=x;const N=(0,g.Gi)(T,O);k+=x*N[0],Z+=x*N[1],L&&N.length>2&&(X+=x*N[2])}}}return W>0?L?[k/W,Z/W,X/W]:[k/W,Z/W]:$.length?$[0]:null}($[0],L):null;if(!k)return null;D[0]=k[0],D[1]=k[1],L&&k.length>2&&(D[2]=k[2])}return D}($.rings,$.hasZ):null}function j($,L,D){let I=0,W=0,k=0,Z=0,X=0;const V=$.length?$[0][0]:0,w=$.length?$[0][1]:0,T=$.length&&L?$[0][2]:0;for(let x=0;x<$.length;x++){const N=$[x],M=$[(x+1)%$.length],[Q,z,ee]=N,le=Q-V,oe=z-w,ce=L?ee-T:void 0,[re,K,ae]=M,se=re-V,de=K-w,ue=L?ae-T:void 0,pe=le*de-se*oe;if(Z+=pe,I+=(le+se)*pe,W+=(oe+de)*pe,L&&N.length>2&&M.length>2){const ie=le*ue-se*ce;k+=(ce+ue)*ie,X+=ie}Q<D[0]&&(D[0]=Q),Q>D[1]&&(D[1]=Q),z<D[2]&&(D[2]=z),z>D[3]&&(D[3]=z),L&&(ee<D[4]&&(D[4]=ee),ee>D[5]&&(D[5]=ee))}if(Z>0&&(Z*=-1),X>0&&(X*=-1),!Z)return null;Z*=.5,X*=.5;const O=[I/(6*Z)+V,W/(6*Z)+w,Z];return L&&(D[4]===D[5]||0===X?(O[3]=(D[4]+D[5])/2,O[4]=0):(O[3]=k/(6*X)+T,O[4]=X)),O}},33190:(He,ve,p)=>{"use strict";p.d(ve,{OQ:()=>C,Qg:()=>$,uP:()=>j,lQ:()=>B,aV:()=>J,rM:()=>I,CI:()=>D});var g=p(62208);const b=[0,0];function J(X,V){return!!(0,g.pC)(V)&&L(X,V.x,V.y,V.z)}function B(X,V){if(!V.points||V.points.length)return!1;for(const w of V.points)if(!C(X,w))return!1;return!0}function j(X,V){const{xmin:w,ymin:T,zmin:O,xmax:x,ymax:N,zmax:M}=V;return X.hasZ&&V.hasZ?L(X,w,T,O)&&L(X,w,N,O)&&L(X,x,N,O)&&L(X,x,T,O)&&L(X,w,T,M)&&L(X,w,N,M)&&L(X,x,N,M)&&L(X,x,T,M):L(X,w,T)&&L(X,w,N)&&L(X,x,N)&&L(X,x,T)}function C(X,V){return L(X,V[0],V[1])}function $(X,V){return L(X,V[0],V[1],V[2])}function L(X,V,w,T){return V>=X.xmin&&V<=X.xmax&&w>=X.ymin&&w<=X.ymax&&(null==T||!X.hasZ||T>=X.zmin&&T<=X.zmax)}function D(X,V){return b[1]=V.y,b[0]=V.x,I(X,b)}function I(X,V){return function W(X,V){if(!X)return!1;if(function k(X){return!Array.isArray(X[0][0])}(X))return Z(!1,X,V);let w=!1;for(let T=0,O=X.length;T<O;T++)w=Z(w,X[T],V);return w}(X.rings,V)}function Z(X,V,w){const[T,O]=w;let x=X,N=0;for(let M=0,Q=V.length;M<Q;M++){N++,N===Q&&(N=0);const[z,ee]=V[M],[le,oe]=V[N];(ee<O&&oe>=O||oe<O&&ee>=O)&&z+(O-ee)/(oe-ee)*(le-z)<T&&(x=!x)}return x}},25748:(He,ve,p)=>{"use strict";function J(w,T){const O=T[0]-w[0],x=T[1]-w[1];if(w.length>2&&T.length>2){const N=w[2]-T[2];return Math.sqrt(O*O+x*x+N*N)}return Math.sqrt(O*O+x*x)}function j(w,T,O,x){const[N,M]=T,[Q,z]=O[x],[ee,le]=O[x+1],oe=ee-Q,ce=le-z,ae=Math.min(1,Math.max(0,((N-Q)*oe+(M-z)*ce)/(oe*oe+ce*ce)));return w[0]=Q+oe*ae,w[1]=z+ce*ae,w}function C(w,T){return function B(w,T,O){const x=w[0]+O*(T[0]-w[0]),N=w[1]+O*(T[1]-w[1]);return w.length>2&&T.length>2?[x,N,w[2]+O*(T[2]-w[2])]:[x,N]}(w,T,.5)}function D(w,T,O){const x=w.length;let N=0,M=0,Q=0;for(let z=0;z<x;z++){const ee=w[z],le=w[(z+1)%x];let oe=2;N+=ee[0]*le[1]-le[0]*ee[1],ee.length>2&&le.length>2&&O&&(M+=ee[0]*le[2]-le[0]*ee[2],oe=3),ee.length>oe&&le.length>oe&&T&&(Q+=ee[0]*le[oe]-le[0]*ee[oe])}return N<=0&&M<=0&&Q<=0}function I(w){if("rings"in w){for(const T of w.rings)T.length<3||T[0][0]===T[T.length-1][0]&&T[0][1]===T[T.length-1][1]||T.push([T[0][0],T[0][1]]);if(w.rings.length>0&&!D(w.rings[0],w.hasM,w.hasZ))for(let T=0;T<w.rings.length;++T)w.rings[T]=w.rings[T].reverse()}}p.d(ve,{pW:()=>I,xA:()=>J,Gi:()=>C,bu:()=>D,Tx:()=>j}),p(37053)},15176:(He,ve,p)=>{"use strict";p.d(ve,{aO:()=>Z,_w:()=>w,Wn:()=>T});var g=p(32442);const $=[];function L(O,x,N,M){return{xmin:O,ymin:x,xmax:N,ymax:M}}function D(O,x,N,M,Q,z){return{xmin:O,ymin:x,zmin:N,xmax:M,ymax:Q,zmax:z}}function I(O,x,N,M,Q,z){return{xmin:O,ymin:x,mmin:N,xmax:M,ymax:Q,mmax:z}}function W(O,x,N,M,Q,z,ee,le){return{xmin:O,ymin:x,zmin:N,mmin:M,xmax:Q,ymax:z,zmax:ee,mmax:le}}function k(O,x=!1,N=!1){return x?N?W(O[0],O[1],O[2],O[3],O[4],O[5],O[6],O[7]):D(O[0],O[1],O[2],O[3],O[4],O[5]):N?I(O[0],O[1],O[2],O[3],O[4],O[5]):L(O[0],O[1],O[2],O[3])}function Z(O){return O?function b(O){return void 0!==O.xmin&&void 0!==O.ymin&&void 0!==O.xmax&&void 0!==O.ymax}(O)?O:function B(O){return void 0!==O.x&&void 0!==O.y}(O)?function V(O){const{x,y:N,z:M,m:Q}=O,z=null!=Q;return null!=M?z?W(x,N,M,Q,x,N,M,Q):D(x,N,M,x,N,M):z?I(x,N,Q,x,N,Q):L(x,N,x,N)}(O):function C(O){return void 0!==O.rings}(O)?w(O):function j(O){return void 0!==O.paths}(O)?T(O):function J(O){return void 0!==O.points}(O)?function X(O){const{hasZ:x,hasM:N,points:M}=O;return k((0,g.lC)($,M,x,N),x,N)}(O):null:null}function w(O){const{hasZ:x,hasM:N,rings:M}=O,Q=(0,g.C6)($,M,x,N);return Q?k(Q,x,N):null}function T(O){const{hasZ:x,hasM:N,paths:M}=O,Q=(0,g.C6)($,M,x,N);return Q?k(Q,x,N):null}},11519:(He,ve,p)=>{"use strict";p.d(ve,{h_:()=>J,jQ:()=>k,IY:()=>T,Ff:()=>X,UT:()=>w});var g=p(33190);function b(O,x){return(0,g.aV)(O,x)}function J(O,x){let M,Q,z;if(O.xmin<=x.xmin){if(M=x.xmin,O.xmax<M)return!1}else if(M=O.xmin,x.xmax<M)return!1;if(O.ymin<=x.ymin){if(Q=x.ymin,O.ymax<Q)return!1}else if(Q=O.ymin,x.ymax<Q)return!1;if(O.hasZ&&x.hasZ&&x.hasZ)if(O.zmin<=x.zmin){if(z=x.zmin,O.zmax<z)return!1}else if(z=O.zmin,x.zmax<z)return!1;return!0}function B(O,x){const{points:N,hasZ:M}=x,Q=M?g.Qg:g.OQ;for(const z of N)if(Q(O,z))return!0;return!1}const j=[0,0],C=[0,0],$=[0,0],L=[0,0],D=[j,C,$,L],I=[[$,j],[j,C],[C,L],[L,$]];function W(O,x){j[0]=O.xmin,j[1]=O.ymax,C[0]=O.xmax,C[1]=O.ymax,$[0]=O.xmin,$[1]=O.ymin,L[0]=O.xmax,L[1]=O.ymin;for(const N of D)if((0,g.rM)(x,N))return!0;for(const N of x.rings){if(!N.length)continue;let M=N[0];if((0,g.OQ)(O,M))return!0;for(let Q=1;Q<N.length;Q++){const z=N[Q];if((0,g.OQ)(O,z)||V(M,z,I))return!0;M=z}}return!1}function k(O,x){j[0]=O.xmin,j[1]=O.ymax,C[0]=O.xmax,C[1]=O.ymax,$[0]=O.xmin,$[1]=O.ymin,L[0]=O.xmax,L[1]=O.ymin;const N=x.paths;for(const M of N){if(!N.length)continue;let Q=M[0];if((0,g.OQ)(O,Q))return!0;for(let z=1;z<M.length;z++){const ee=M[z];if((0,g.OQ)(O,ee)||V(Q,ee,I))return!0;Q=ee}}return!1}const Z=[0,0];function X(O){for(let x=0;x<O.length;x++){const N=O[x];for(let Q=0;Q<N.length-1;Q++){const z=N[Q],ee=N[Q+1];for(let le=x+1;le<O.length;le++)for(let oe=0;oe<O[le].length-1;oe++){const ce=O[le][oe],re=O[le][oe+1];if(w(z,ee,ce,re,Z)&&!(Z[0]===z[0]&&Z[1]===z[1]||Z[0]===ce[0]&&Z[1]===ce[1]||Z[0]===ee[0]&&Z[1]===ee[1]||Z[0]===re[0]&&Z[1]===re[1]))return!0}}const M=N.length;if(!(M<=4))for(let Q=0;Q<M-3;Q++){let z=M-1;0===Q&&(z=M-2);const ee=N[Q],le=N[Q+1];for(let oe=Q+2;oe<z;oe++){const ce=N[oe],re=N[oe+1];if(w(ee,le,ce,re,Z)&&!(Z[0]===ee[0]&&Z[1]===ee[1]||Z[0]===ce[0]&&Z[1]===ce[1]||Z[0]===le[0]&&Z[1]===le[1]||Z[0]===re[0]&&Z[1]===re[1]))return!0}}}return!1}function V(O,x,N){for(let M=0;M<N.length;M++)if(w(O,x,N[M][0],N[M][1]))return!0;return!1}function w(O,x,N,M,Q){const[z,ee]=O,[le,oe]=x,[ce,re]=N,[K,ae]=M,se=K-ce,de=z-ce,ue=le-z,pe=ae-re,ie=ee-re,te=oe-ee,Ee=pe*ue-se*te;if(0===Ee)return!1;const fe=(se*ie-pe*de)/Ee,be=(ue*ie-te*de)/Ee;return fe>=0&&fe<=1&&be>=0&&be<=1&&(Q&&(Q[0]=z+fe*(le-z),Q[1]=ee+fe*(oe-ee)),!0)}function T(O){switch(O){case"esriGeometryEnvelope":case"extent":return J;case"esriGeometryMultipoint":case"multipoint":return B;case"esriGeometryPoint":case"point":return b;case"esriGeometryPolygon":case"polygon":return W;case"esriGeometryPolyline":case"polyline":return k}}},91179:(He,ve,p)=>{"use strict";p.d(ve,{im:()=>V,q9:()=>O,Ji:()=>w,YX:()=>D,aW:()=>I,wp:()=>W,oU:()=>Z,l9:()=>k});var g=p(62208),b=p(2004),J=p(21674),B=p(72854),j=p(49672),C=p(37118),$=p(55214);function D(x){return void 0!==x.xmin&&void 0!==x.ymin&&void 0!==x.xmax&&void 0!==x.ymax}function I(x){return void 0!==x.points}function W(x){return void 0!==x.x&&void 0!==x.y}function k(x){return void 0!==x.paths}function Z(x){return void 0!==x.rings}function V(x){return(0,g.Wi)(x)?null:x instanceof J.Z?x:W(x)?j.Z.fromJSON(x):k(x)?$.Z.fromJSON(x):Z(x)?C.Z.fromJSON(x):I(x)?B.Z.fromJSON(x):D(x)?b.Z.fromJSON(x):null}function w(x){return x?W(x)?"esriGeometryPoint":k(x)?"esriGeometryPolyline":Z(x)?"esriGeometryPolygon":D(x)?"esriGeometryEnvelope":I(x)?"esriGeometryMultipoint":null:null}const T={esriGeometryPoint:j.Z,esriGeometryPolyline:$.Z,esriGeometryPolygon:C.Z,esriGeometryEnvelope:b.Z,esriGeometryMultipoint:B.Z};function O(x){return x&&T[x]||null}},13924:(He,ve,p)=>{"use strict";p.d(ve,{aX:()=>ae,or:()=>ue});var g=p(15861),b=p(59318),J=p(26584),B=p(63290),j=p(62208),C=p(37118),$=p(55214),L=p(74618),D=p(37053),I=p(46367),k=(p(29132),p(84792)),Z=p(21726),X=p(91179);function V(pe,ie,te,Ee){return w.apply(this,arguments)}function w(){return(w=(0,g.Z)(function*(pe,ie,te,Ee){const fe="string"==typeof pe?(0,Z.mN)(pe):pe,be=ie[0].spatialReference,ye=Sr(_t({},Ee),{query:Sr(_t({},fe.query),{f:"json",sr:JSON.stringify(be),target:JSON.stringify({geometryType:(0,X.Ji)(ie[0]),geometries:ie}),cutter:JSON.stringify(te)})}),Ke=yield(0,k.default)(fe.path+"/cut",ye),{cutIndexes:Ue,geometries:he=[]}=Ke.data;return{cutIndexes:Ue,geometries:he.map(Me=>{const Le=(0,X.im)(Me);return Le.spatialReference=be,Le})}})).apply(this,arguments)}function T(pe,ie,te){return O.apply(this,arguments)}function O(){return(O=(0,g.Z)(function*(pe,ie,te){const Ee="string"==typeof pe?(0,Z.mN)(pe):pe,fe=ie[0].spatialReference,be=(0,X.Ji)(ie[0]),ye=Sr(_t({},te),{query:Sr(_t({},Ee.query),{f:"json",sr:fe.wkid?fe.wkid:JSON.stringify(fe),geometries:JSON.stringify(x(ie))})});return N((yield(0,k.default)(Ee.path+"/simplify",ye)).data,be,fe)})).apply(this,arguments)}function x(pe){return{geometryType:(0,X.Ji)(pe[0]),geometries:pe.map(ie=>ie.toJSON())}}function N(pe,ie,te){const Ee=(0,X.q9)(ie);return pe.map(fe=>{const be=Ee.fromJSON(fe);return be.spatialReference=te,be})}const M=B.Z.getLogger("esri.geometry.support.normalizeUtils");function z(pe){return"polygon"===pe[0].type}function ee(pe){return"polyline"===pe[0].type}function ce(pe,ie,te){if(ie){const Ee=function oe(pe,ie){if(!(pe instanceof $.Z||pe instanceof C.Z)){const fe="straightLineDensify: the input geometry is neither polyline nor polygon";throw M.error(fe),new J.Z(fe)}const te=(0,L.x3)(pe),Ee=[];for(const fe of te){const be=[];Ee.push(be),be.push([fe[0][0],fe[0][1]]);for(let ye=0;ye<fe.length-1;ye++){const Ke=fe[ye][0],Ue=fe[ye][1],he=fe[ye+1][0],Me=fe[ye+1][1],Le=Math.sqrt((he-Ke)*(he-Ke)+(Me-Ue)*(Me-Ue)),Je=(Me-Ue)/Le,Oe=(he-Ke)/Le,xe=Le/ie;if(xe>1){for(let Ie=1;Ie<=xe-1;Ie++){const $e=Ie*ie;be.push([Oe*$e+Ke,Je*$e+Ue])}const Be=(Le+Math.floor(xe-1)*ie)/2;be.push([Oe*Be+Ke,Je*Be+Ue])}be.push([he,Me])}}return function Q(pe){return"polygon"===pe.type}(pe)?new C.Z({rings:Ee,spatialReference:pe.spatialReference}):new $.Z({paths:Ee,spatialReference:pe.spatialReference})}(pe,1e6);pe=(0,I.Sx)(Ee,!0)}return te&&(pe=(0,L.Sy)(pe,te)),pe}function re(pe,ie,te){if(Array.isArray(pe)){const Ee=pe[0];if(Ee>ie){const fe=(0,L.XZ)(Ee,ie);pe[0]=Ee+fe*(-2*ie)}else if(Ee<te){const fe=(0,L.XZ)(Ee,te);pe[0]=Ee+fe*(-2*te)}}else{const Ee=pe.x;if(Ee>ie){const fe=(0,L.XZ)(Ee,ie);pe=pe.clone().offset(fe*(-2*ie),0)}else if(Ee<te){const fe=(0,L.XZ)(Ee,te);pe=pe.clone().offset(fe*(-2*te),0)}}return pe}function K(pe,ie){let te=-1;for(let Ee=0;Ee<ie.cutIndexes.length;Ee++){const fe=ie.cutIndexes[Ee],be=ie.geometries[Ee],ye=(0,L.x3)(be);for(let Ke=0;Ke<ye.length;Ke++){const Ue=ye[Ke];Ue.some(he=>{if(he[0]<180)return!0;{let Me=0;for(let Je=0;Je<Ue.length;Je++){const Oe=Ue[Je][0];Me=Oe>Me?Oe:Me}Me=Number(Me.toFixed(9));const Le=-360*(0,L.XZ)(Me,180);for(let Je=0;Je<Ue.length;Je++){const Oe=be.getPoint(Ke,Je);be.setPoint(Ke,Je,Oe.clone().offset(Le,0))}return!0}})}if(fe===te){if(z(pe))for(const Ke of(0,L.x3)(be))pe[fe]=pe[fe].addRing(Ke);else if(ee(pe))for(const Ke of(0,L.x3)(be))pe[fe]=pe[fe].addPath(Ke)}else te=fe,pe[fe]=be}return pe}function ae(pe,ie,te){return se.apply(this,arguments)}function se(){return(se=(0,g.Z)(function*(pe,ie,te){var Ee;if(!Array.isArray(pe))return ae([pe],ie);const fe=null!=(Ee=null==ie?void 0:ie.url)?Ee:b.Z.geometryServiceUrl;let be,ye,Ke,Ue,he,Me,Le,Je,Oe=0;const xe=[],Be=[];for(const Qe of pe)if((0,j.Wi)(Qe))Be.push(Qe);else if(be||(be=Qe.spatialReference,ye=(0,D.C5)(be),Ke=be.isWebMercator,Me=Ke?102100:4326,Ue=L.UZ[Me].maxX,he=L.UZ[Me].minX,Le=L.UZ[Me].plus180Line,Je=L.UZ[Me].minus180Line),ye)if("mesh"===Qe.type)Be.push(Qe);else if("point"===Qe.type)Be.push(re(Qe.clone(),Ue,he));else if("multipoint"===Qe.type){const Xe=Qe.clone();Xe.points=Xe.points.map(qe=>re(qe,Ue,he)),Be.push(Xe)}else if("extent"===Qe.type){const Xe=Qe.clone()._normalize(!1,!1,ye);Be.push(Xe.rings?new C.Z(Xe):Xe)}else if(Qe.extent){const Xe=Qe.extent,qe=(0,L.XZ)(Xe.xmin,he)*(2*Ue);let ke=0===qe?Qe.clone():(0,L.Sy)(Qe.clone(),qe);Xe.offset(qe,0),Xe.intersects(Le)&&Xe.xmax!==Ue?(Oe=Xe.xmax>Oe?Xe.xmax:Oe,ke=ce(ke,Ke),xe.push(ke),Be.push("cut")):Xe.intersects(Je)&&Xe.xmin!==he?(Oe=Xe.xmax*(2*Ue)>Oe?Xe.xmax*(2*Ue):Oe,ke=ce(ke,Ke,360),xe.push(ke),Be.push("cut")):Be.push(ke)}else Be.push(Qe.clone());else Be.push(Qe);let Y=(0,L.XZ)(Oe,Ue),me=-90;const Ie=Y,$e=new $.Z;for(;Y>0;){const Qe=360*Y-180;$e.addPath([[Qe,me],[Qe,-1*me]]),me*=-1,Y--}if(xe.length>0&&Ie>0){const Qe=K(xe,yield V(fe,xe,$e,te)),Xe=[],qe=[];for(let We=0;We<Be.length;We++){const nt=Be[We];if("cut"!==nt)qe.push(nt);else{const ht=Qe.shift(),mt=pe[We];(0,j.pC)(mt)&&"polygon"===mt.type&&mt.rings&&mt.rings.length>1&&ht.rings.length>=mt.rings.length?(Xe.push(ht),qe.push("simplify")):qe.push(Ke?(0,I.$)(ht):ht)}}if(!Xe.length)return qe;const ke=yield T(fe,Xe,te),dt=[];for(let We=0;We<qe.length;We++){const nt=qe[We];dt.push("simplify"!==nt?nt:Ke?(0,I.$)(ke.shift()):ke.shift())}return dt}const rt=[];for(let Qe=0;Qe<Be.length;Qe++){const Xe=Be[Qe];if("cut"!==Xe)rt.push(Xe);else{const qe=xe.shift();rt.push(!0===Ke?(0,I.$)(qe):qe)}}return Promise.resolve(rt)})).apply(this,arguments)}function ue(pe,ie){const te=(0,D.C5)(ie);if(te){const[Ee,fe]=te.valid,be=fe-Ee;if(pe<Ee)for(;pe<Ee;)pe+=be;if(pe>fe)for(;pe>fe;)pe-=be}return pe}},74618:(He,ve,p)=>{"use strict";p.d(ve,{UZ:()=>B,x3:()=>$,uS:()=>L,XZ:()=>j,Sy:()=>C});var g=p(55214),b=p(65234),J=p(91179);const B={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new g.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:b.Z.WebMercator}),minus180Line:new g.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:b.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new g.Z({paths:[[[180,-180],[180,180]]],spatialReference:b.Z.WGS84}),minus180Line:new g.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:b.Z.WGS84})}};function j(D,I){return Math.ceil((D-I)/(2*I))}function C(D,I){const W=$(D);for(const k of W)for(const Z of k)Z[0]+=I;return D}function $(D){return(0,J.oU)(D)?D.rings:D.paths}function L(D){const I=(null==D?void 0:D.isWebMercator)?102100:4326;return[B[I].minX,B[I].maxX]}},83137:(He,ve,p)=>{"use strict";p.d(ve,{yZ:()=>J});var g=p(16730);function J($,L){const D=L||$.extent,I=$.width,W=(0,g.c9)(D&&D.spatialReference);return D&&I?D.width/I*W*g.hd*96:0}},37053:(He,ve,p)=>{"use strict";p.d(ve,{WR:()=>ce,Zn:()=>le,R_:()=>oe,fS:()=>W,C5:()=>k,yW:()=>w,N$:()=>X,sT:()=>Z,BZ:()=>N,V2:()=>Q,QM:()=>O,JY:()=>ee,oR:()=>V,o$:()=>x,ME:()=>M,sS:()=>T,MP:()=>z});var g=p(62208),b=p(77275),J=p(6178),B=p(84029);const j={102113:!0,102100:!0,3857:!0,3785:!0},C={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},$='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',L=[-20037508.342788905,20037508.342788905],D=[-20037508.342787,20037508.342787],I={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:L,origin:D,dx:1e-5},102100:{wkTemplate:$,valid:L,origin:D,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:L,origin:D,dx:1e-5},3857:{wkTemplate:$,valid:L,origin:D,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function W(re,K){return!(0,g.Wi)(re)&&!(0,g.Wi)(K)&&(re===K||(null!=re.wkid||null!=K.wkid?re.wkid===K.wkid||T(re)&&T(K)||null!=K.latestWkid&&re.wkid===K.latestWkid||null!=re.latestWkid&&K.wkid===re.latestWkid:!(!re.wkt||!K.wkt)&&re.wkt.toUpperCase()===K.wkt.toUpperCase()))}function k(re){return ee(re)&&re.wkid?I[re.wkid]:null}function Z(re){return!!ee(re)&&(re.wkid?null==B.Z[re.wkid]:!!re.wkt&&!!/^\s*GEOGCS/i.test(re.wkt))}function X(re){return!(N(re)||Q(re))}function V(re){return ee(re)&&4326===re.wkid}function w(re){return ee(re)&&re.wkid===J.W.CGCS2000}function T(re){return ee(re)&&null!=re.wkid&&!0===j[re.wkid]}function O(re){return ee(re)&&32662===re.wkid}function x(re){return re===J.W.GCSMARS2000||re===J.W.GCSMARS2000_SPHERE}function N(re){return ee(re)&&null!=re.wkid&&x(re.wkid)}function M(re){return re===J.W.GCSMOON2000}function Q(re){return ee(re)&&null!=re.wkid&&M(re.wkid)}function z(re){return ee(re)&&null!=re.wkid&&!0===C[re.wkid]}function ee(re){return(0,g.pC)(re)&&(null!=re.wkid&&re.wkid>=2e3||null!=re.wkt)}const le={wkid:4326,wkt:(0,b.gx)(I[4326].wkTemplate,{Central_Meridian:"0.0"})},oe={wkid:102100,latestWkid:3857},ce={wkid:32662}},71774:(He,ve,p)=>{"use strict";p.d(ve,{Mk:()=>J,P$:()=>B});var g=p(2076);const J=(0,g.w)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),B=(0,g.w)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},46367:(He,ve,p)=>{"use strict";p.d(ve,{Q8:()=>V,$:()=>x,hG:()=>T,iV:()=>w,Sx:()=>N,R6:()=>O,mZ:()=>W});var g=p(58817),b=p(62208),J=p(65234),B=p(94425),j=p(37053);function L(M){return 57.29577951308232*M}function D(M){return.017453292519943*M}function W(M){return Math.PI/2-2*Math.atan(Math.exp(-M/B.sv.radius))}function k(M){return null!=M.wkid||null!=M.wkt}const Z=[0,0];function X(M,Q,z,ee,le){const oe=M,ce=le;if(ce.spatialReference=z,"x"in oe&&"x"in ce)[ce.x,ce.y]=Q(oe.x,oe.y,Z,ee);else if("xmin"in oe&&"xmin"in ce)[ce.xmin,ce.ymin]=Q(oe.xmin,oe.ymin,Z,ee),[ce.xmax,ce.ymax]=Q(oe.xmax,oe.ymax,Z,ee);else if("paths"in oe&&"paths"in ce||"rings"in oe&&"rings"in ce){const re="paths"in oe?oe.paths:oe.rings,K=[];let ae;for(let se=0;se<re.length;se++){const de=re[se];ae=[],K.push(ae);for(let ue=0;ue<de.length;ue++)ae.push(Q(de[ue][0],de[ue][1],[0,0],ee)),de[ue].length>2&&ae[ue].push(de[ue][2]),de[ue].length>3&&ae[ue].push(de[ue][3])}"paths"in ce?ce.paths=K:ce.rings=K}else if("points"in oe&&"points"in ce){const re=oe.points,K=[];for(let ae=0;ae<re.length;ae++)K[ae]=Q(re[ae][0],re[ae][1],[0,0],ee),re[ae].length>2&&K[ae].push(re[ae][2]),re[ae].length>3&&K[ae].push(re[ae][3]);ce.points=K}return le}function V(M,Q){const z=M&&(k(M)?M:M.spatialReference),ee=Q&&(k(Q)?Q:Q.spatialReference);return!(M&&"type"in M&&"mesh"===M.type||Q&&"type"in Q&&"mesh"===Q.type||!z||!ee)&&(!!(0,j.fS)(ee,z)||(0,j.sS)(ee)&&(0,j.oR)(z)||(0,j.sS)(z)&&(0,j.oR)(ee))}function w(M,Q){if((0,b.Wi)(M))return null;const z=M.spatialReference,ee=Q&&(k(Q)?Q:Q.spatialReference);return V(z,ee)?(0,j.fS)(z,ee)?(0,g.d9)(M):(0,j.sS)(ee)?X(M,T,J.Z.WebMercator,!1,(0,g.d9)(M)):(0,j.oR)(ee)?X(M,O,J.Z.WGS84,!1,(0,g.d9)(M)):null:null}function T(M,Q,z=[0,0]){Q>89.99999?Q=89.99999:Q<-89.99999&&(Q=-89.99999);const ee=D(Q);return z[0]=D(M)*B.sv.radius,z[1]=B.sv.halfSemiMajorAxis*Math.log((1+Math.sin(ee))/(1-Math.sin(ee))),z}function O(M,Q,z=[0,0],ee=!1){const le=L(M/B.sv.radius);return z[0]=ee?le:le-360*Math.floor((le+180)/360),z[1]=L(Math.PI/2-2*Math.atan(Math.exp(-Q/B.sv.radius))),z}function x(M,Q=!1,z=(0,g.d9)(M)){return X(M,T,J.Z.WebMercator,Q,z)}function N(M,Q=!1,z=(0,g.d9)(M)){return X(M,O,J.Z.WGS84,Q,z)}},18945:(He,ve,p)=>{"use strict";function g(b,J,B=!1){let{hasM:j,hasZ:C}=b;Array.isArray(J)?4!==J.length||j||C?3===J.length&&B&&!j?(C=!0,j=!1):3===J.length&&j&&C&&(j=!1,C=!1):(j=!0,C=!0):(C=!C&&J.hasZ&&(!j||J.hasM),j=!j&&J.hasM&&(!C||J.hasZ)),b.hasZ=C,b.hasM=j}p.d(ve,{l:()=>g})},33696:(He,ve,p)=>{"use strict";p.d(ve,{k:()=>B});var g=p(62208),b=p(16730),J=p(37053);function B(I,W,k){if((0,g.Wi)(W)||(0,g.Wi)(k)||k.vcsWkid||(0,J.fS)(W,k))return null;const Z=(0,b._R)(W)/(0,b._R)(k);if(1===Z)return null;switch(I){case"point":case"esriGeometryPoint":return X=>function j(I,W){I&&null!=I.z&&(I.z*=W)}(X,Z);case"polyline":case"esriGeometryPolyline":return X=>function $(I,W){if(I)for(const k of I.paths)for(const Z of k)Z.length>2&&(Z[2]*=W)}(X,Z);case"polygon":case"esriGeometryPolygon":return X=>function C(I,W){if(I)for(const k of I.rings)for(const Z of k)Z.length>2&&(Z[2]*=W)}(X,Z);case"multipoint":case"esriGeometryMultipoint":return X=>function L(I,W){if(I)for(const k of I.points)k.length>2&&(k[2]*=W)}(X,Z);case"extent":case"esriGeometryExtent":return X=>function D(I,W){I&&null!=I.zmin&&null!=I.zmax&&(I.zmin*=W,I.zmax*=W)}(X,Z);default:return null}}},52515:(He,ve,p)=>{"use strict";p(88411),p(15348),p(97059),p(56683);var j=p(41840),C=p(15861),$=p(84792),L=p(26584),D=p(62208);function W(){return(W=(0,C.Z)(function*(O,x,N,M){const Q=x.exec(N);if(!Q)throw new L.Z("esri-intl:invalid-bundle",`Bundle id "${N}" is not compatible with the pattern "${x}"`);const z=Q[1]?`${Q[1]}/`:"",ee=Q[2],le=(0,j.Su)(M),oe=`${z}${ee}.json`,ce=le?`${z}${ee}_${le}.json`:oe;let re;try{re=yield k(O(ce))}catch(K){if(ce===oe)throw new L.Z("intl:unknown-bundle",`Bundle "${N}" cannot be loaded`,{error:K});try{re=yield k(O(oe))}catch(ae){throw new L.Z("intl:unknown-bundle",`Bundle "${N}" cannot be loaded`,{error:ae})}}return re})).apply(this,arguments)}function k(O){return Z.apply(this,arguments)}function Z(){return(Z=(0,C.Z)(function*(O){if((0,D.pC)(w.fetchBundleAsset))return w.fetchBundleAsset(O);const x=yield(0,$.default)(O,{responseType:"text"});return JSON.parse(x.data)})).apply(this,arguments)}class X{constructor({base:x="",pattern:N,location:M=new URL(window.location.href)}){let Q;Q="string"==typeof M?z=>new URL(z,new URL(M,window.location.href)).href:M instanceof URL?z=>new URL(z,M).href:M,this.pattern="string"==typeof N?new RegExp(`^${N}`):N,this.getAssetUrl=Q,x=x?x.endsWith("/")?x:x+"/":"",this.matcher=new RegExp(`^${x}(?:(.*)/)?(.*)$`)}fetchMessageBundle(x,N){return function I(O,x,N,M){return W.apply(this,arguments)}(this.getAssetUrl,this.matcher,x,N)}}const w={};var T=p(54346);(0,j.tz)(function V(O){return new X(O)}({pattern:"esri/",location:T.V}))},88411:(He,ve,p)=>{"use strict";p.d(ve,{Ze:()=>O,p6:()=>x});var g=p(2076),b=p(56683);const J={year:"numeric",month:"numeric",day:"numeric"},B={year:"numeric",month:"long",day:"numeric"},j={year:"numeric",month:"short",day:"numeric"},C={year:"numeric",month:"long",weekday:"long",day:"numeric"},$={hour:"numeric",minute:"numeric"},L=Sr(_t({},$),{second:"numeric"}),D={"short-date":J,"short-date-short-time":_t(_t({},J),$),"short-date-short-time-24":Sr(_t(_t({},J),$),{hour12:!1}),"short-date-long-time":_t(_t({},J),L),"short-date-long-time-24":Sr(_t(_t({},J),L),{hour12:!1}),"short-date-le":J,"short-date-le-short-time":_t(_t({},J),$),"short-date-le-short-time-24":Sr(_t(_t({},J),$),{hour12:!1}),"short-date-le-long-time":_t(_t({},J),L),"short-date-le-long-time-24":Sr(_t(_t({},J),L),{hour12:!1}),"long-month-day-year":B,"long-month-day-year-short-time":_t(_t({},B),$),"long-month-day-year-short-time-24":Sr(_t(_t({},B),$),{hour12:!1}),"long-month-day-year-long-time":_t(_t({},B),L),"long-month-day-year-long-time-24":Sr(_t(_t({},B),L),{hour12:!1}),"day-short-month-year":j,"day-short-month-year-short-time":_t(_t({},j),$),"day-short-month-year-short-time-24":Sr(_t(_t({},j),$),{hour12:!1}),"day-short-month-year-long-time":_t(_t({},j),L),"day-short-month-year-long-time-24":Sr(_t(_t({},j),L),{hour12:!1}),"long-date":C,"long-date-short-time":_t(_t({},C),$),"long-date-short-time-24":Sr(_t(_t({},C),$),{hour12:!1}),"long-date-long-time":_t(_t({},C),L),"long-date-long-time-24":Sr(_t(_t({},C),L),{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":$,"long-time":L},I=(0,g.w)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),X=(I.toJSON.bind(I),I.fromJSON.bind(I),{ar:"ar-u-nu-latn-ca-gregory"});let V=new WeakMap,w=D["short-date-short-time"];function O(N){return D[N]||null}function x(N,M){return function T(N){const M=N||w;if(!V.has(M)){const Q=(0,b.Kd)(),z=X[(0,b.Kd)()]||Q;V.set(M,new Intl.DateTimeFormat(z,M))}return V.get(M)}(M).format(N)}(0,b.Ze)(()=>{V=new WeakMap,w=D["short-date-short-time"]})},56683:(He,ve,p)=>{"use strict";var g,b,J;let j;p.d(ve,{Ze:()=>w,Kd:()=>L,qe:()=>X});const C=null!=(g=null==(b=globalThis.esriConfig)?void 0:b.locale)?g:null==(J=globalThis.dojoConfig)?void 0:J.locale;function $(){var O,x;return null!=(O=null!=C?C:null==(x=globalThis.navigator)?void 0:x.language)?O:"en"}function L(){return void 0===j&&(j=$()),j}const Z=[];function X(O){return Z.push(O),{remove(){Z.splice(Z.indexOf(O),1)}}}const V=[];function w(O){return V.push(O),{remove(){Z.splice(V.indexOf(O),1)}}}null==globalThis.addEventListener||globalThis.addEventListener("languagechange",function T(){const x=null!=undefined?undefined:$();j!==x&&(j=x,[...V].forEach(N=>{N.call(null,x)}),[...Z].forEach(N=>{N.call(null,x)}))})},41840:(He,ve,p)=>{"use strict";p.d(ve,{ME:()=>k,Su:()=>X,tz:()=>W});var g=p(15861),b=p(26584),J=p(10699),B=p(56683);const j=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,C={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function $(N){var M;return null!=(M=C[N])&&M}const L=[],D=new Map;function I(N){for(const M of D.keys())T(N.pattern,M)&&D.delete(M)}function W(N){return L.includes(N)||(I(N),L.unshift(N)),{remove(){const M=L.indexOf(N);M>-1&&(L.splice(M,1),I(N))}}}function k(N){return Z.apply(this,arguments)}function Z(){return(Z=(0,g.Z)(function*(N){const M=(0,B.Kd)();D.has(N)||D.set(N,V(N,M));const Q=D.get(N);return yield O.add(Q),Q})).apply(this,arguments)}function X(N){if(!j.test(N))return null;const[,M,Q]=j.exec(N),z=M+(Q?"-"+Q.toUpperCase():"");return $(z)?z:$(M)?M:null}function V(N,M){return w.apply(this,arguments)}function w(){return(w=(0,g.Z)(function*(N,M){const Q=[];for(const z of L)if(T(z.pattern,N))try{return yield z.fetchMessageBundle(N,M)}catch(ee){Q.push(ee)}throw Q.length?new b.Z("intl:message-bundle-error",`Errors occurred while loading "${N}"`,{errors:Q}):new b.Z("intl:no-message-bundle-loader",`No loader found for message bundle "${N}"`)})).apply(this,arguments)}function T(N,M){return"string"==typeof N?M.startsWith(N):N.test(M)}(0,B.Ze)(()=>{D.clear()});const O=new class{constructor(){this._numLoading=0}waitForAll(){var N=this;return(0,g.Z)(function*(){N._dfd&&(yield N._dfd.promise)})()}add(N){return this._increase(),N.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=(0,J.dD)())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}}},15348:(He,ve,p)=>{"use strict";p.d(ve,{sh:()=>$,uf:()=>L});var g=p(62208),b=p(56683);const J={ar:"ar-u-nu-latn"};let B=new WeakMap,j={};function $(D={}){const I={};return null!=D.digitSeparator&&(I.useGrouping=D.digitSeparator),null!=D.places&&(I.minimumFractionDigits=I.maximumFractionDigits=D.places),I}function L(D,I){return function C(D){const I=D||j;if(!B.has(I)){const W=(0,b.Kd)(),k=J[(0,b.Kd)()]||W;B.set(I,new Intl.NumberFormat(k,D))}return(0,g.j0)(B.get(I))}(I).format(D)}(0,b.Ze)(()=>{B=new WeakMap,j={}})},97059:(He,ve,p)=>{"use strict";p.d(ve,{n:()=>$});var g=p(63290),b=p(94113),J=p(77275),B=p(88411),j=p(15348);const C=g.Z.getLogger("esri.intl");function $(k,Z,X={}){const{format:V={}}=X;return(0,J.gx)(k,w=>function L(k,Z,X){let V,w;const T=k.indexOf(":");if(-1===T?V=k.trim():(V=k.slice(0,T).trim(),w=k.slice(T+1).trim()),!V)return"";const O=(0,b.hS)(V,Z);if(null==O)return"";const x=X[w]||X[V];return x?function D(k,Z){switch(Z.type){case"date":return(0,B.p6)(k,Z.intlOptions);case"number":return(0,j.uf)(k,Z.intlOptions);default:return C.warn("missing format descriptor for key {key}"),W(k)}}(O,x):w?function I(k,Z){switch(Z.toLowerCase()){case"dateformat":return(0,B.p6)(k);case"numberformat":return(0,j.uf)(k);default:return C.warn(`inline format is unsupported since 4.12: ${Z}`),/^(dateformat|datestring)/i.test(Z)?(0,B.p6)(k):/^numberformat/i.test(Z)?(0,j.uf)(k):W(k)}}(O,w):W(O)}(w,Z,V))}function W(k){switch(typeof k){case"string":return k;case"number":return(0,j.uf)(k);case"boolean":return""+k;default:return k instanceof Date?(0,B.p6)(k):""}}},24263:(He,ve,p)=>{"use strict";p.d(ve,{Dp:()=>L,id:()=>C,qh:()=>$,i8:()=>B,Nv:()=>j});var g=p(15861),b=p(8314),J=p(21726);const B="4.23",j={request:(D,I)=>(0,g.Z)(function*(){var W;const{default:k}=yield Promise.resolve().then(p.bind(p,84792)),Z=D.options,X=Z.responseType;Z.signal=null==I?void 0:I.signal,Z.responseType="native"===X||"native-request-init"===X?"native-request-init":["blob","json","text"].includes(X)&&null!=(W=(0,J.oh)(D.url))&&W.after?X:"array-buffer";const V=yield k(D.url,Z),w={data:V.data,ssl:V.ssl};switch(V.requestOptions.responseType){case"native-request-init":return delete w.data.signal,w;case"blob":w.data=yield w.data.arrayBuffer();break;case"json":w.data=(new TextEncoder).encode(JSON.stringify(w.data)).buffer;break;case"text":w.data=(new TextEncoder).encode(w.data).buffer}return{result:w,transferList:[w.data]}})()};let C;function $(D){C=D}function L(D){const I=C&&C.findCredential(D);return I&&I.token?(0,J.ZN)(D,"token",I.token):D}(0,b.Z)("host-webworker")||((0,b.Z)("edge")||(0,b.Z)("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser")},15382:(He,ve,p)=>{"use strict";p.r(ve),p.d(ve,{default:()=>wt});var g=p(15861),b=p(17626),J=p(73281),D=(p(4832),p(49067),p(26284),p(54928),p(69357),p(40342)),I=p(14726),W=p(33474),k=p(32088),Z=p(84792),X=p(65787),V=p(79608),w=p(48701),T=p(26584),O=p(72392),x=p(8314),N=p(2076),M=p(63290),Q=p(62208),z=p(99959),ee=p(94113),le=p(10699);function ce(){return(ce=(0,g.Z)(function*(we,Fe){const{WhereClause:tt}=yield p.e(410).then(p.bind(p,10410));return tt.create(we,Fe)})).apply(this,arguments)}var be,re=p(21726),K=p(77712),se=(p(85931),p(66656)),de=p(68653),ue=p(76898),pe=p(99433),ie=p(383),te=p(86810),Ee=p(58817),fe=p(90912);let ye=be=class extends te.wq{constructor(we){super(we),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new be({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],ye.prototype,"expression",void 0),(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],ye.prototype,"name",void 0),(0,b._)([(0,K.Cb)({type:["boolean","date","number","string"],json:{write:!0}})],ye.prototype,"returnType",void 0),(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],ye.prototype,"title",void 0),ye=be=(0,b._)([(0,ue.j)("esri.form.ExpressionInfo")],ye);const Ke=ye;let Ue=class extends te.wq{constructor(we){super(we),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],Ue.prototype,"description",void 0),(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],Ue.prototype,"label",void 0),(0,b._)([(0,K.Cb)()],Ue.prototype,"type",void 0),(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],Ue.prototype,"visibilityExpression",void 0),Ue=(0,b._)([(0,ue.j)("esri.form.elements.Element")],Ue);const he=Ue;var Me;let Le=Me=class extends te.wq{constructor(we){super(we),this.type=null}clone(){return new Me({type:this.type})}};(0,b._)([(0,K.Cb)({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],Le.prototype,"type",void 0),Le=Me=(0,b._)([(0,ue.j)("esri.form.elements.inputs.AttachmentInput")],Le);const Je=Le;var Oe;let xe=Oe=class extends he{constructor(we){super(we),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new Oe({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],xe.prototype,"attachmentKeyword",void 0),(0,b._)([(0,K.Cb)({type:Boolean,json:{write:!0}})],xe.prototype,"editable",void 0),(0,b._)([(0,K.Cb)({type:Je,json:{read:{source:"inputType"},write:{target:"inputType"}}})],xe.prototype,"input",void 0),(0,b._)([(0,K.Cb)({type:["attachment"],json:{read:!1,write:!0}})],xe.prototype,"type",void 0),xe=Oe=(0,b._)([(0,ue.j)("esri.form.elements.AttachmentElement")],xe);const Be=xe;let Y=class extends te.wq{constructor(we){super(we),this.type=null}};(0,b._)([(0,K.Cb)()],Y.prototype,"type",void 0),Y=(0,b._)([(0,ue.j)("esri.form.elements.inputs.Input")],Y);const me=Y;let Ie=class extends me{constructor(we){super(we),this.maxLength=null,this.minLength=0}};(0,b._)([(0,K.Cb)({type:Number,json:{write:!0}})],Ie.prototype,"maxLength",void 0),(0,b._)([(0,K.Cb)({type:Number,json:{write:!0}})],Ie.prototype,"minLength",void 0),Ie=(0,b._)([(0,ue.j)("esri.form.elements.inputs.TextInput")],Ie);const $e=Ie;var rt;let Qe=rt=class extends $e{constructor(we){super(we),this.type="barcode-scanner"}clone(){return new rt({maxLength:this.maxLength,minLength:this.minLength})}};(0,b._)([(0,K.Cb)({type:["barcode-scanner"],json:{read:!1,write:!0}})],Qe.prototype,"type",void 0),Qe=rt=(0,b._)([(0,ue.j)("esri.form.elements.inputs.BarcodeScannerInput")],Qe);const Xe=Qe;var qe;let ke=qe=class extends me{constructor(we){super(we),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new qe({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],ke.prototype,"noValueOptionLabel",void 0),(0,b._)([(0,K.Cb)({type:Boolean,json:{write:!0}})],ke.prototype,"showNoValueOption",void 0),(0,b._)([(0,K.Cb)({type:["combo-box"],json:{read:!1,write:!0}})],ke.prototype,"type",void 0),ke=qe=(0,b._)([(0,ue.j)("esri.form.elements.inputs.ComboBoxInput")],ke);const dt=ke;var We;function nt(we){return null!=we?new Date(we):null}function ht(we){return we?we.getTime():null}let mt=We=class extends me{constructor(we){super(we),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(we,Fe){return nt(Fe.max)}writeMax(we,Fe){Fe.max=ht(we)}readMin(we,Fe){return nt(Fe.min)}writeMin(we,Fe){Fe.min=ht(we)}clone(){return new We({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};(0,b._)([(0,K.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"includeTime",void 0),(0,b._)([(0,K.Cb)({type:Date,json:{type:Number,write:!0}})],mt.prototype,"max",void 0),(0,b._)([(0,de.r)("max")],mt.prototype,"readMax",null),(0,b._)([(0,pe.c)("max")],mt.prototype,"writeMax",null),(0,b._)([(0,K.Cb)({type:Date,json:{type:Number,write:!0}})],mt.prototype,"min",void 0),(0,b._)([(0,de.r)("min")],mt.prototype,"readMin",null),(0,b._)([(0,pe.c)("min")],mt.prototype,"writeMin",null),(0,b._)([(0,K.Cb)({type:["datetime-picker"],json:{read:!1,write:!0}})],mt.prototype,"type",void 0),mt=We=(0,b._)([(0,ue.j)("esri.form.elements.inputs.DateTimePickerInput")],mt);const Kt=mt;var Bt;let $t=Bt=class extends me{constructor(we){super(we),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new Bt({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],$t.prototype,"noValueOptionLabel",void 0),(0,b._)([(0,K.Cb)({type:Boolean,json:{write:!0}})],$t.prototype,"showNoValueOption",void 0),(0,b._)([(0,K.Cb)({type:["radio-buttons"],json:{read:!1,write:!0}})],$t.prototype,"type",void 0),$t=Bt=(0,b._)([(0,ue.j)("esri.form.elements.inputs.RadioButtonsInput")],$t);const qt=$t;var gr;let er=gr=class extends me{constructor(we){super(we),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new gr({offValue:this.offValue,onValue:this.onValue})}};(0,b._)([(0,K.Cb)({type:[String,Number],json:{write:!0}})],er.prototype,"offValue",void 0),(0,b._)([(0,K.Cb)({type:[String,Number],json:{write:!0}})],er.prototype,"onValue",void 0),(0,b._)([(0,K.Cb)({type:["switch"],json:{read:!1,write:!0}})],er.prototype,"type",void 0),er=gr=(0,b._)([(0,ue.j)("esri.form.elements.inputs.SwitchInput")],er);const vr=er;var pr;let hr=pr=class extends $e{constructor(we){super(we),this.type="text-area"}clone(){return new pr({maxLength:this.maxLength,minLength:this.minLength})}};(0,b._)([(0,K.Cb)({type:["text-area"],json:{read:!1,write:!0}})],hr.prototype,"type",void 0),hr=pr=(0,b._)([(0,ue.j)("esri.form.elements.inputs.TextAreaInput")],hr);const st=hr;var ft;let St=ft=class extends $e{constructor(we){super(we),this.type="text-box"}clone(){return new ft({maxLength:this.maxLength,minLength:this.minLength})}};(0,b._)([(0,K.Cb)({type:["text-box"],json:{read:!1,write:!0}})],St.prototype,"type",void 0),St=ft=(0,b._)([(0,ue.j)("esri.form.elements.inputs.TextBoxInput")],St);const Ft={base:me,key:"type",typeMap:{"barcode-scanner":Xe,"combo-box":dt,"datetime-picker":Kt,"radio-buttons":qt,switch:vr,"text-area":st,"text-box":St}};var Vt,Dt=p(26141);let Gt=Vt=class extends he{constructor(we){super(we),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new Vt({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};(0,b._)([(0,K.Cb)({types:Dt.V5,json:{read:{reader:Dt.im},write:!0}})],Gt.prototype,"domain",void 0),(0,b._)([(0,K.Cb)({type:Boolean,json:{write:!0}})],Gt.prototype,"editable",void 0),(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],Gt.prototype,"editableExpression",void 0),(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],Gt.prototype,"fieldName",void 0),(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],Gt.prototype,"hint",void 0),(0,b._)([(0,K.Cb)({types:Ft,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Gt.prototype,"input",void 0),(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],Gt.prototype,"requiredExpression",void 0),(0,b._)([(0,K.Cb)({type:String,json:{read:!1,write:!0}})],Gt.prototype,"type",void 0),(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],Gt.prototype,"valueExpression",void 0),Gt=Vt=(0,b._)([(0,ue.j)("esri.form.elements.FieldElement")],Gt);const Qt=Gt;var ut,gt=p(51686);let Ze=ut=class extends he{constructor(we){super(we),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new ut({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:(0,Ee.d9)(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};(0,b._)([(0,K.Cb)({type:Number,json:{write:!0}})],Ze.prototype,"displayCount",void 0),(0,b._)([(0,K.Cb)({type:["list"],json:{write:!0}})],Ze.prototype,"displayType",void 0),(0,b._)([(0,K.Cb)({type:Boolean,json:{write:!0}})],Ze.prototype,"editable",void 0),(0,b._)([(0,K.Cb)({type:[gt.Z],json:{write:!0}})],Ze.prototype,"orderByFields",void 0),(0,b._)([(0,K.Cb)({type:Number,json:{write:!0}})],Ze.prototype,"relationshipId",void 0),(0,b._)([(0,K.Cb)({type:["relationship"],json:{read:!1,write:!0}})],Ze.prototype,"type",void 0),Ze=ut=(0,b._)([(0,ue.j)("esri.form.elements.RelationshipElement")],Ze);const ot=Ze;function Pe(we){return{typesWithGroup:{base:he,key:"type",typeMap:{attachment:Be,field:Qt,group:we,relationship:ot}},typesWithoutGroup:{base:he,key:"type",typeMap:{attachment:Be,field:Qt,relationship:ot}}}}function Ge(we,Fe,tt=!0){if(!we)return null;const Mt=tt?Fe.typesWithGroup.typeMap:Fe.typesWithoutGroup.typeMap;return we.filter(Ht=>Mt[Ht.type]).map(Ht=>Mt[Ht.type].fromJSON(Ht))}function vt(we,Fe,tt=!0){if(!we)return null;const Mt=tt?Fe.typesWithGroup.typeMap:Fe.typesWithoutGroup.typeMap;return we.filter(Ht=>Mt[Ht.type]).map(Ht=>Ht.toJSON())}function zt(we,Fe,tt=!0){return we?we.map(Mt=>(0,fe.N7)(tt?Fe.typesWithGroup:Fe.typesWithoutGroup,Mt)):null}var Yt;let et=Yt=class extends he{constructor(we){super(we),this.elements=null,this.initialState="expanded",this.type="group"}castElements(we){return zt(we,Rt,!1)}readElements(we,Fe){return Ge(Fe.formElements,Rt,!1)}writeElements(we,Fe){Fe.formElements=vt(we,Rt,!1)}clone(){return new Yt({description:this.description,elements:(0,Ee.d9)(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};(0,b._)([(0,K.Cb)({json:{write:!0}})],et.prototype,"elements",void 0),(0,b._)([(0,se.p)("elements")],et.prototype,"castElements",null),(0,b._)([(0,de.r)("elements",["formElements"])],et.prototype,"readElements",null),(0,b._)([(0,pe.c)("elements")],et.prototype,"writeElements",null),(0,b._)([(0,K.Cb)({type:["collapsed","expanded"],json:{write:!0}})],et.prototype,"initialState",void 0),(0,b._)([(0,K.Cb)({type:String,json:{read:!1,write:!0}})],et.prototype,"type",void 0),et=Yt=(0,b._)([(0,ue.j)("esri.form.elements.GroupElement")],et);const Rt=Pe(et);var Jt;const nr=Pe(et);let Tr=Jt=class extends te.wq{constructor(we){super(we),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(we){return zt(we,nr)}readElements(we,Fe){return Ge(Fe.formElements,nr)}writeElements(we,Fe){Fe.formElements=vt(we,nr)}clone(){return new Jt({description:this.description,expressionInfos:(0,Ee.d9)(this.expressionInfos),elements:(0,Ee.d9)(this.elements),title:this.title})}};(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],Tr.prototype,"description",void 0),(0,b._)([(0,K.Cb)({json:{write:!0}})],Tr.prototype,"elements",void 0),(0,b._)([(0,se.p)("elements")],Tr.prototype,"castElements",null),(0,b._)([(0,de.r)("elements",["formElements"])],Tr.prototype,"readElements",null),(0,b._)([(0,pe.c)("elements")],Tr.prototype,"writeElements",null),(0,b._)([(0,K.Cb)({type:[Ke],json:{write:!0}})],Tr.prototype,"expressionInfos",void 0),(0,b._)([(0,K.Cb)({type:String,json:{write:!0}})],Tr.prototype,"title",void 0),Tr=Jt=(0,b._)([(0,ue.j)("esri.form.FormTemplate")],Tr);const Gr=Tr;var Qr=p(2004),Zr=p(79334),es=p(65234),bs=p(63602),ys=(p(29132),p(88879)),Ys=p(80542),fn=p(47996),en=p(60330),Ls=p(59289),ws=p(61039),Ns=p(20514),tn=p(61515),ls=p(17253),Qs=p(37118),Ds=p(71774);let De=0;const Wt=M.Z.getLogger("esri.layers.graphics.sources.MemorySource");let It=class extends(fn.Z.LoadableMixin((0,en.v)((0,Ys.p)(w.Z)))){constructor(we){super(we),this._idToClientGraphic=null,this.type="memory"}load(we){const Fe=(0,Q.pC)(we)?we.signal:null;return this.addResolvingPromise(this._startWorker(Fe)),Promise.resolve(this)}destroy(){var we;null==(we=this._connection)||we.close(),this._connection=null}get workerGeometryType(){var we;const Fe=null==(we=this.layer)?void 0:we.geometryType;return Fe?this._geometryTypeRequiresClientGraphicMapping(Fe)?"polygon":Fe:null}applyEdits(we){return this.load().then(()=>this._applyEdits(we))}openPorts(){return this.load().then(()=>this._connection.openPorts())}queryFeatures(we,Fe={}){var tt=this;return(0,g.Z)(function*(){yield tt.load(Fe);const Mt=yield tt._connection.invoke("queryFeatures",we?we.toJSON():null,Fe);(0,tn.p)(we,tt.layer.spatialReference,Mt);const Ht=ls.default.fromJSON(Mt);if(!tt._requiresClientGraphicMapping())return Ht;const or=tt.layer.objectIdField;for(const Cr of Ht.features){const Hr=tt._idToClientGraphic.get(Cr.attributes[or]);Hr&&(Cr.geometry=Hr.geometry)}return Ht.geometryType=tt.layer.geometryType,Ht})()}queryFeaturesJSON(we,Fe={}){var tt=this;return(0,g.Z)(function*(){if(tt._requiresClientGraphicMapping())throw new T.Z("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");yield tt.load(Fe);const Mt=yield tt._connection.invoke("queryFeatures",we?we.toJSON():null,Fe);return(0,tn.p)(we,tt.layer.spatialReference,Mt),Mt})()}queryFeatureCount(we,Fe={}){return this.load(Fe).then(()=>this._connection.invoke("queryFeatureCount",we?we.toJSON():null,Fe))}queryObjectIds(we,Fe={}){return this.load(Fe).then(()=>this._connection.invoke("queryObjectIds",we?we.toJSON():null,Fe))}queryExtent(we,Fe={}){return this.load(Fe).then(()=>this._connection.invoke("queryExtent",we?we.toJSON():null,Fe)).then(tt=>({count:tt.count,extent:Qr.Z.fromJSON(tt.extent)}))}querySnapping(we,Fe={}){return this.load(Fe).then(()=>this._connection.invoke("querySnapping",we,Fe))}_applyEdits(we){var Fe=this;return(0,g.Z)(function*(){if(!Fe._connection)throw new T.Z("feature-layer-source:edit-failure","Memory source not loaded");const tt=Fe.layer.objectIdField;let Mt=null;const Ht=[],or=[];yield Promise.all([Fe._prepareClientMapping(we.addFeatures,null),Fe._prepareClientMapping(we.updateFeatures,null)]);const Cr=Yr=>"objectId"in Yr&&null!=Yr.objectId?Yr.objectId:"attributes"in Yr&&null!=Yr.attributes[tt]?Yr.attributes[tt]:null;if(we.addFeatures&&(Mt=Fe._prepareAddFeatures(we.addFeatures)),we.deleteFeatures)for(const Yr of we.deleteFeatures){const ms=Cr(Yr);null!=ms&&Ht.push(ms)}const Kr=we.updateFeatures&&Fe._idToClientGraphic?new Map:null;if(we.updateFeatures)for(const Yr of we.updateFeatures)if(or.push(Fe._serializeFeature(Yr)),Kr){const ms=Cr(Yr);null!=ms&&Kr.set(ms,Yr)}(0,Ns.P)(Mt?Mt.features:null,or,Fe.layer.spatialReference);const{fullExtent:Hr,featureEditResults:ss}=yield Fe._connection.invoke("applyEdits",{adds:Mt?Mt.features:[],updates:or,deletes:Ht});return Fe.fullExtent=Hr,Mt&&Mt.finish(ss.uidToObjectId),Fe._updateClientGraphicIds(Kr,ss),Fe._createEditsResult(ss)})()}_prepareClientMapping(we,Fe){var tt=this;return(0,g.Z)(function*(){if("mesh"!==tt.layerOrSourceGeometryType||(0,Q.Wi)(we))return;const Mt=[];for(const{geometry:Ht}of we)!(0,Q.pC)(Ht)||"mesh"!==Ht.type||Ht.hasExtent||Ht.loaded||Mt.push(Ht.load({signal:Fe}));Mt.length&&(yield Promise.all(Mt))})()}_updateClientGraphicIds(we,Fe){if(this._idToClientGraphic){if(we)for(const tt of Fe.updateResults){if(!tt.success)continue;const Mt=we.get(tt.objectId);null!=Mt&&this._addIdToClientGraphic(Mt)}for(const tt of Fe.deleteResults)tt.success&&this._idToClientGraphic.delete(tt.objectId)}}_createEditsResult(we){return{addFeatureResults:we.addResults?we.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:we.updateResults?we.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:we.deleteResults?we.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(we){const Fe=!0===we.success?null:we.error||{code:void 0,description:void 0};return{objectId:we.objectId,globalId:we.globalId,error:Fe?new T.Z("feature-layer-source:edit-failure",Fe.description,{code:Fe.code}):null}}_prepareAddFeatures(we){const Fe=new Map,tt=new Array(we.length);let Mt=null;for(let or=0;or<we.length;or++){const Cr=we[or],Kr=this._serializeFeature(Cr);!Mt&&(0,Q.pC)(Cr.geometry)&&(Mt=Cr.geometry.type),tt[or]=Kr,Fe.set(`${Kr.uid}`,Cr)}const Ht=this;return{features:tt,inferredGeometryType:Mt,finish(or){const Cr=Ht.sourceJSON.objectIdField;for(const Kr in or){const Hr=or[Kr],ss=Fe.get(Kr);ss&&(ss.attributes||(ss.attributes={}),-1===Hr?delete ss.attributes[Cr]:ss.attributes[Cr]=Hr,Ht._addIdToClientGraphic(ss))}}}}_addIdToClientGraphic(we){if(!this._idToClientGraphic)return;const tt=we.attributes&&we.attributes[this.sourceJSON.objectIdField];null!=tt&&this._idToClientGraphic.set(tt,we)}get layerOrSourceGeometryType(){var we,Fe,tt;return null!=(we=null==(Fe=this.layer)?void 0:Fe.geometryType)?we:null==(tt=this.sourceJSON)?void 0:tt.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(we){return this._geometryTypeRequiresClientGraphicMapping(we.type)}_geometryTypeRequiresClientGraphicMapping(we){return"mesh"===we||"multipatch"===we||"extent"===we}_serializeFeature(we){const{attributes:Fe}=we,tt=this._geometryForSerialization(we),Mt=(De++).toString();return tt?{uid:Mt,geometry:tt.toJSON(),attributes:Fe}:{uid:Mt,attributes:Fe}}_geometryForSerialization(we){const{geometry:Fe}=we;return(0,Q.Wi)(Fe)?null:this._geometryRequiresClientGraphicMapping(Fe)?Fe.extent?Qs.Z.fromExtent(Fe.extent):null:Fe}_startWorker(we){var Fe=this;return(0,g.Z)(function*(){Fe._connection=yield(0,Ls.bA)("MemorySourceWorker",{strategy:(0,x.Z)("feature-layers-workers")?"dedicated":"local",signal:we});const{fields:tt,spatialReference:Mt,objectIdField:Ht,hasM:or,hasZ:Cr,timeInfo:Kr}=Fe.layer,Hr="defaults"===Fe.layer.originOf("spatialReference");yield Fe._prepareClientMapping(Fe.items,we);const ss=Fe._prepareAddFeatures(Fe.items);Fe.handles.add(Fe.on("before-changes",Rs=>{Wt.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),Rs.preventDefault()}));const Yr={features:ss.features,fields:tt&&tt.map(Rs=>Rs.toJSON()),geometryType:Ds.P$.toJSON(Fe.workerGeometryType),hasM:"mesh"!==Fe.layerOrSourceGeometryType&&or,hasZ:"mesh"===Fe.layerOrSourceGeometryType||Cr,objectIdField:Ht,spatialReference:Hr?null:Mt&&Mt.toJSON(),timeInfo:Kr?Kr.toJSON():null},ms=yield Fe._connection.invoke("load",Yr,{signal:we});for(const Rs of ms.warnings)Wt.warn(Rs.message,{layer:Fe.layer,warning:Rs});ms.featureErrors.length&&Wt.warn(`Encountered ${ms.featureErrors.length} validation errors while loading features`,ms.featureErrors);const ln=ms.layerDefinition;Fe._geometryTypeRequiresClientGraphicMapping(ss.inferredGeometryType)&&(ln.geometryType=Ds.P$.toJSON(ss.inferredGeometryType)),Fe.sourceJSON=ln,Fe._requiresClientGraphicMapping()&&(Fe._idToClientGraphic=new Map),ss.finish(ms.assignedObjectIds)})()}};(0,b._)([(0,ws.c)({Type:ys.Z,ensureType:(0,fe.se)(ys.Z)})],It.prototype,"itemType",void 0),(0,b._)([(0,K.Cb)()],It.prototype,"type",void 0),(0,b._)([(0,K.Cb)({constructOnly:!0})],It.prototype,"layer",void 0),(0,b._)([(0,K.Cb)({readOnly:!0})],It.prototype,"workerGeometryType",null),(0,b._)([(0,K.Cb)()],It.prototype,"sourceJSON",void 0),It=(0,b._)([(0,ue.j)("esri.layers.graphics.sources.MemorySource")],It);const sr=It;var lr,cr=p(50085),br=p(65088),Er=p(552),fr=p(50107),Ar=p(35126),Ur=p(49286),Or=p(32629),At=p(6647),at=p(30346),Ct=p(99555),lt=p(97941),Tt=p(38305),Zt=p(13812);let _r=lr=class extends te.wq{constructor(we){super(we)}clone(){const{name:we,fields:Fe,isAscending:tt,isUnique:Mt,description:Ht}=this;return new lr({name:we,fields:Fe,isAscending:tt,isUnique:Mt,description:Ht})}};(0,b._)([(0,K.Cb)({constructOnly:!0})],_r.prototype,"name",void 0),(0,b._)([(0,K.Cb)({constructOnly:!0})],_r.prototype,"fields",void 0),(0,b._)([(0,K.Cb)({constructOnly:!0})],_r.prototype,"isAscending",void 0),(0,b._)([(0,K.Cb)({constructOnly:!0})],_r.prototype,"isUnique",void 0),(0,b._)([(0,K.Cb)({constructOnly:!0})],_r.prototype,"description",void 0),_r=lr=(0,b._)([(0,ue.j)("esri.layers.support.FeatureIndex")],_r);var xr=p(2777),jr=p(32777),Nr=p(41638),us=p(55911),Ir=p(36630),_s=p(16730);let Br=class extends((0,V.J)(te.wq)){constructor(we){super(we),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};(0,b._)([(0,K.Cb)({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Br.prototype,"shapeAreaField",void 0),(0,b._)([(0,K.Cb)({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Br.prototype,"shapeLengthField",void 0),(0,b._)([(0,K.Cb)({type:String,json:{read:we=>_s.gV.read(we)||_s.Jo.read(we)}})],Br.prototype,"units",void 0),Br=(0,b._)([(0,ue.j)("esri.layers.support.GeometryFieldsInfo")],Br);const Ss=Br;var is=p(170),Is=p(62667),Cs=p(2430);const ts=new N.X({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),$r=new N.X({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Nt=class extends((0,V.J)(te.wq)){constructor(we){super(we),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,b._)([(0,K.Cb)({json:{read:ts.read,write:ts.write}})],Nt.prototype,"cardinality",void 0),(0,b._)([(0,K.Cb)({json:{read:!0,write:!0}})],Nt.prototype,"composite",void 0),(0,b._)([(0,K.Cb)({json:{read:!0,write:!0}})],Nt.prototype,"id",void 0),(0,b._)([(0,K.Cb)({json:{read:!0,write:!0}})],Nt.prototype,"keyField",void 0),(0,b._)([(0,K.Cb)({json:{read:!0,write:!0}})],Nt.prototype,"keyFieldInRelationshipTable",void 0),(0,b._)([(0,K.Cb)({json:{read:!0,write:!0}})],Nt.prototype,"name",void 0),(0,b._)([(0,K.Cb)({json:{read:!0,write:!0}})],Nt.prototype,"relatedTableId",void 0),(0,b._)([(0,K.Cb)({json:{read:!0,write:!0}})],Nt.prototype,"relationshipTableId",void 0),(0,b._)([(0,K.Cb)({json:{read:$r.read,write:$r.write}})],Nt.prototype,"role",void 0),Nt=(0,b._)([(0,ue.j)("esri.layers.support.Relationship")],Nt);const zs=Nt;var Mr=p(62708),Xs=p(5676),gs=p(15283),Zs=p(39683),rn=p(67736),ds=p(84952),on=p(67010),an=p(6871),bt=p(49430);const Xt=new N.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),ir={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Pr="FeatureLayer",Xr=M.Z.getLogger("esri.layers.FeatureLayer");function rs(we){return we&&we instanceof w.Z}function Dr(we,Fe,tt){return!!(we&&we.hasOwnProperty(Fe)?we[Fe]:tt)}function cn(we,Fe,tt){return we&&we.hasOwnProperty(Fe)?we[Fe]:tt}function Ne(we){var Fe;const tt=null==we||null==(Fe=we.supportedSpatialAggregationStatistics)?void 0:Fe.map(Mt=>Mt.toLowerCase());return{envelope:!(null==tt||!tt.includes("envelopeaggregate")),centroid:!(null==tt||!tt.includes("centroidaggregate")),convexHull:!(null==tt||!tt.includes("convexhullaggregate"))}}const ze=(0,us.v)();function ct(we,Fe,tt){const Mt=!(null==tt||!tt.writeLayerSchema);return{enabled:Mt,ignoreOrigin:Mt}}let it=class extends((0,Ar.b)((0,Er.h)((0,Or.c)((0,lt.n)((0,Ct.M)((0,at.Q)((0,br.Y)((0,Ur.q)((0,At.I)((0,z.R)((0,fr.N)((0,cr.V)((0,V.J)(bs.Z)))))))))))))){constructor(...we){super(...we),this._handles=new O.Z,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=es.Z.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(w.Z.ofType(_r)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var we;null==(we=this.source)||we.destroy(),this._handles=(0,Q.SC)(this._handles)}normalizeCtorArgs(we,Fe){return"string"==typeof we?_t({url:we},Fe):we}load(we){var Fe=this;const tt=(0,Q.pC)(we)?we.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(tt).then(Ht=>this._initLayerProperties(Ht)));const Mt=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},we).catch(le.r9).then((0,g.Z)(function*(){if(Fe.url&&null==Fe.layerId&&/FeatureServer|MapServer\/*$/i.test(Fe.url)){const Ht=yield Fe._fetchFirstLayerId(tt);null!=Ht&&(Fe.layerId=Ht)}if(!Fe.url&&!Fe._hasMemorySource())throw new T.Z("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return Fe._initLayerProperties(yield Fe.createGraphicsSource(tt))})).then(()=>this.finishLoadEditablePortalLayer(we));return this.addResolvingPromise(Mt),Promise.resolve(this)}readCapabilities(we,Fe){return{attachment:this._readAttachmentCapabilities((Fe=Fe.layerDefinition||Fe).attachmentProperties),data:this._readDataCapabilities(Fe),metadata:this._readMetadataCapabilities(Fe),operations:this._readOperationsCapabilities(Fe.capabilities||we,Fe),query:this._readQueryCapabilities(Fe),queryRelated:this._readQueryRelatedCapabilities(Fe),editing:this._readEditingCapabilities(Fe)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(we){null!=we?this._override("editingEnabled",we):this._clearOverride("editingEnabled")}readEditingEnabled(we,Fe){return this._readEditingEnabled(Fe,!1)}readEditingEnabledFromWebMap(we,Fe,tt){return this._readEditingEnabled(Fe,!0,tt)}writeEditingEnabled(we,Fe){this._writeEditingEnabled(we,Fe,!1)}writeEditingEnabledToWebMap(we,Fe,tt,Mt){this._writeEditingEnabled(we,Fe,!0,Mt)}readEditingInfo(we,Fe){const{editingInfo:tt}=Fe;return tt?{lastEditDate:null!=tt.lastEditDate?new Date(tt.lastEditDate):null}:null}readIsTable(we,Fe){return"Table"===(Fe=Fe&&Fe.layerDefinition||Fe).type||!Fe.geometryType}writeIsTable(we,Fe,tt,Mt){null!=Mt&&Mt.writeLayerSchema&&(0,ee.RB)(tt,we?"Table":"Feature Layer",Fe)}readMinScale(we,Fe){return Fe.effectiveMinScale||we||0}readMaxScale(we,Fe){return Fe.effectiveMaxScale||we||0}readGlobalIdFieldFromService(we,Fe){if((Fe=Fe.layerDefinition||Fe).globalIdField)return Fe.globalIdField;if(Fe.fields)for(const tt of Fe.fields)if("esriFieldTypeGlobalID"===tt.type)return tt.name}readObjectIdFieldFromService(we,Fe){if((Fe=Fe.layerDefinition||Fe).objectIdField)return Fe.objectIdField;if(Fe.fields)for(const tt of Fe.fields)if("esriFieldTypeOID"===tt.type)return tt.name}get parsedUrl(){const we=this.url?(0,re.mN)(this.url):null;return null!=we&&(null!=this.dynamicDataSource?we.path=(0,re.v_)(we.path,"dynamicLayer"):null!=this.layerId&&(we.path=(0,re.v_)(we.path,this.layerId.toString()))),we}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(we){(0,Ir.YN)(we,this.fieldsIndex),this._set("renderer",we)}readRenderer(we,Fe,tt){const Mt=(Fe=Fe.layerDefinition||Fe).drawingInfo&&Fe.drawingInfo.renderer||void 0;if(Mt){const Ht=(0,W.a)(Mt,Fe,tt)||void 0;return Ht||Xr.error("Failed to create renderer",{rendererDefinition:Fe.drawingInfo.renderer,layer:this,context:tt}),Ht}if(Fe.defaultSymbol)return Fe.types&&Fe.types.length?new I.Z({defaultSymbol:Ot(Fe.defaultSymbol,Fe,tt),field:Fe.typeIdField,uniqueValueInfos:Fe.types.map(Ht=>({id:Ht.id,symbol:Ot(Ht.symbol,Ht,tt)}))}):new D.Z({symbol:Ot(Fe.defaultSymbol,Fe,tt)})}set source(we){const Fe=this._get("source");Fe!==we&&(rs(Fe)&&this._resetMemorySource(Fe),rs(we)&&this._initMemorySource(we),this._set("source",we))}castSource(we){return we?Array.isArray(we)||we instanceof w.Z?new sr({layer:this,items:we}):we:null}readSource(we,Fe){const tt=ls.default.fromJSON(Fe.featureSet);return new sr({layer:this,items:tt&&tt.features||[]})}readServiceDefinitionExpression(we,Fe){return Fe.definitionQuery||Fe.definitionExpression}readTemplates(we,Fe){const tt=Fe.editFieldsInfo,Mt=tt&&tt.creatorField,Ht=tt&&tt.editorField;return we=we&&we.map(or=>jr.Z.fromJSON(or)),this._fixTemplates(we,Mt),this._fixTemplates(we,Ht),we}readTitle(we,Fe){const tt=Fe.layerDefinition&&Fe.layerDefinition.name||Fe.name,Mt=Fe.title||Fe.layerDefinition&&Fe.layerDefinition.title;if(tt){const Ht=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?(0,Tt.a7)(this.url,tt):tt;let or=tt;if(!or&&this.url){const Cr=(0,Tt.Qc)(this.url);(0,Q.pC)(Cr)&&(or=Cr.title)}return or?("item-title-and-service-name"===this.sublayerTitleMode&&Ht&&Ht!==or&&(or=Ht+" - "+or),(0,Tt.ld)(or)):void 0}if("item-title"===this.sublayerTitleMode&&Mt)return Mt}readTitleFromWebMap(we,Fe){return Fe.title||Fe.layerDefinition&&Fe.layerDefinition.name}readTypeIdField(we,Fe){let tt=(Fe=Fe.layerDefinition||Fe).typeIdField;if(tt&&Fe.fields){tt=tt.toLowerCase();const Mt=Fe.fields.find(Ht=>Ht.name.toLowerCase()===tt);Mt&&(tt=Mt.name)}return tt}readTypes(we,Fe){we=(Fe=Fe.layerDefinition||Fe).types;const tt=Fe.editFieldsInfo,Mt=tt&&tt.creatorField,Ht=tt&&tt.editorField;return we&&we.map(or=>(or=Nr.Z.fromJSON(or),this._fixTemplates(or.templates,Mt),this._fixTemplates(or.templates,Ht),or))}set url(we){const Fe=(0,Tt.XG)({layer:this,url:we,nonStandardUrlAllowed:!0,logger:Xr});this._set("url",Fe.url),null!=Fe.layerId&&this._set("layerId",Fe.layerId)}writeUrl(we,Fe,tt,Mt){(0,Tt.wH)(this,we,null,Fe,Mt)}readVersion(we,Fe){return Fe.currentVersion?Fe.currentVersion:Fe.hasOwnProperty("capabilities")||Fe.hasOwnProperty("drawingInfo")||Fe.hasOwnProperty("hasAttachments")||Fe.hasOwnProperty("htmlPopupType")||Fe.hasOwnProperty("relationships")||Fe.hasOwnProperty("timeInfo")||Fe.hasOwnProperty("typeIdField")||Fe.hasOwnProperty("types")?10:9.3}readVisible(we,Fe){return Fe.layerDefinition&&null!=Fe.layerDefinition.defaultVisibility?!!Fe.layerDefinition.defaultVisibility:null!=Fe.visibility?!!Fe.visibility:void 0}addAttachment(we,Fe){return this.load().then(()=>this._checkAttachmentSupport(we)).then(()=>{if(!("addAttachment"in this.source))throw new T.Z(Pr,"Layer source does not support addAttachment capability");return this.source.addAttachment(we,Fe)})}updateAttachment(we,Fe,tt){return this.load().then(()=>this._checkAttachmentSupport(we)).then(()=>{if(!("updateAttachment"in this.source))throw new T.Z(Pr,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(we,Fe,tt)})}applyEdits(we,Fe){var tt=this;return(0,g.Z)(function*(){const Mt=yield p.e(1913).then(p.bind(p,81913));return yield tt.load(),Mt.applyEdits(tt,tt.source,we,Fe)})()}on(we,Fe){return super.on(we,Fe)}createPopupTemplate(we){return(0,bt.eZ)(this,we)}createGraphicsSource(we){var Fe=this;return(0,g.Z)(function*(){if(Fe._hasMemorySource())return Fe.source.load({signal:we});const{default:tt}=yield(0,le.Hl)(p.e(5547).then(p.bind(p,45547)),we);return new tt({layer:Fe}).load({signal:we})})()}createQuery(){const we=new ds.Z,Fe=this.get("capabilities.data"),tt=this.get("capabilities.query");we.dynamicDataSource=this.dynamicDataSource,we.historicMoment=this.historicMoment,we.gdbVersion=this.gdbVersion,we.returnGeometry=!0,tt&&(we.compactGeometryEnabled=tt.supportsCompactGeometry,we.defaultSpatialReferenceEnabled=tt.supportsDefaultSpatialReference),Fe&&(Fe.supportsZ&&null!=this.returnZ&&(we.returnZ=this.returnZ),Fe.supportsM&&null!=this.returnM&&(we.returnM=this.returnM)),we.outFields=["*"],we.where=this.definitionExpression||"1=1";const{timeOffset:Mt,timeExtent:Ht}=this;return we.timeExtent=null!=Mt&&null!=Ht?Ht.offset(-Mt.value,Mt.unit):Ht||null,we.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,we}deleteAttachments(we,Fe){return this.load().then(()=>this._checkAttachmentSupport(we)).then(()=>{if(!("deleteAttachments"in this.source))throw new T.Z(Pr,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(we,Fe)})}fetchRecomputedExtents(we){return this.load({signal:null==we?void 0:we.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(we);throw new T.Z(Pr,"Layer source does not support fetchUpdates capability")})}getFeatureType(we){const{typeIdField:Fe,types:tt}=this;if(!Fe||!we)return null;const Mt=we.attributes?we.attributes[Fe]:void 0;if(null==Mt)return null;let Ht=null;return tt.some(or=>{const{id:Cr}=or;return null!=Cr&&(Cr.toString()===Mt.toString()&&(Ht=or),!!Ht)}),Ht}getFieldDomain(we,Fe){const Mt=this.getFeatureType(Fe&&Fe.feature);if(Mt){const Ht=Mt.domains&&Mt.domains[we];if(Ht&&"inherited"!==Ht.type)return Ht}return this._getLayerDomain(we)}getField(we){return this.fieldsIndex.get(we)}queryAttachments(we,Fe){return we=rn.Z.from(we),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new T.Z(Pr,"this layer doesn't support attachments");const{attachmentTypes:tt,objectIds:Mt,globalIds:Ht,num:or,size:Cr,start:Kr,where:Hr}=we;if(!this.get("capabilities.operations.supportsQueryAttachments")){const Yr=tt&&tt.length,ms=Ht&&Ht.length,ln=Cr&&Cr.length;if(Mt&&Mt.length>1||Yr||ms||ln||or||Kr||Hr)throw new T.Z(Pr,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",we)}if(!(Mt&&Mt.length||Hr))throw new T.Z(Pr,"'objectIds' or 'where' are required to perform attachment query",we);if(!("queryAttachments"in this.source))throw new T.Z(Pr,"Layer source does not support queryAttachments capability",we);return this.source.queryAttachments(we)})}queryFeatures(we,Fe){return this.load().then(()=>this.source.queryFeatures(ds.Z.from(we)||this.createQuery(),Fe)).then(tt=>{if(null!=tt&&tt.features)for(const Mt of tt.features)Mt.layer=Mt.sourceLayer=this;return tt})}queryObjectIds(we,Fe){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(ds.Z.from(we)||this.createQuery(),Fe);throw new T.Z(Pr,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(we,Fe){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(ds.Z.from(we)||this.createQuery(),Fe);throw new T.Z(Pr,"Layer source does not support queryFeatureCount capability")})}queryExtent(we,Fe){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(ds.Z.from(we)||this.createQuery(),Fe);throw new T.Z(Pr,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(we,Fe){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(on.Z.from(we),Fe);throw new T.Z(Pr,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(we,Fe){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(on.Z.from(we),Fe);throw new T.Z(Pr,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(we,Fe){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(an.Z.from(we),Fe).then(tt=>{if(null!=tt&&tt.features)for(const Mt of tt.features)Mt.layer=Mt.sourceLayer=this;return tt});throw new T.Z(Pr,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(we,Fe){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(an.Z.from(we),Fe);throw new T.Z(Pr,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(we,Fe){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(an.Z.from(we),Fe);throw new T.Z(Pr,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(we,Fe){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(an.Z.from(we),Fe);throw new T.Z(Pr,"Layer source does not support queryFeatureCount capability")})}read(we,Fe){const tt=we.featureCollection;if(tt){const Mt=tt.layers;Mt&&1===Mt.length&&(super.read(Mt[0],Fe),null!=tt.showLegend&&super.read({showLegend:tt.showLegend},Fe))}super.read(we,Fe),Fe&&"service"===Fe.origin&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(we,Fe){var tt,Mt;const Ht=(Fe=Sr(_t({},Fe),{writeLayerSchema:null!=(tt=null==(Mt=Fe)?void 0:Mt.writeLayerSchema)?tt:this._hasMemorySource()})).origin,or=Fe.layerContainerType,Cr=Fe.messages;if(this.isTable){if("web-scene"===Ht||"web-map"===Ht&&"tables"!==or)return Cr&&Cr.push(new T.Z("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Table source cannot be written to web scenes and web maps`,{layer:this})),null;if(this._hasMemorySource())return Cr&&Cr.push(new T.Z("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using an in-memory Table source cannot be written to web scenes and web maps`,{layer:this})),null}else if(this.loaded&&"web-map"===Ht&&"tables"===or)return Cr&&Cr.push(new T.Z("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a non-table source cannot be written to tables in web maps`,{layer:this})),null;return super.write(we,Fe)}clone(){if(this._hasMemorySource())throw new T.Z(Pr,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(we){return!!this.loaded&&("memory"===this.source.type||(0,Xs.D)(this,we))}_readEditingEnabled(we,Fe,tt){var Mt;let Ht=null==(Mt=we.layerDefinition)?void 0:Mt.capabilities;return Ht?this._hasEditingCapability(Ht):(Ht=we.capabilities,Fe&&"web-map"===(null==tt?void 0:tt.origin)&&!this._hasMemorySource()&&Ht?this._hasEditingCapability(Ht):void 0)}_hasEditingCapability(we){return we.toLowerCase().split(",").map(Fe=>Fe.trim()).includes("editing")}_writeEditingEnabled(we,Fe,tt,Mt){if(!we){var Ht,or;const Cr=null!=(Ht=this.capabilities)&&null!=(or=Ht.operations)&&or.supportsSync?"Query,Sync":"Query";(0,ee.RB)("layerDefinition.capabilities",Cr,Fe),!tt||null!=Mt&&Mt.writeLayerSchema||(Fe.capabilities=Cr)}}_checkAttachmentSupport(we){const{attributes:Fe}=we,{objectIdField:tt}=this;return this.get("capabilities.data.supportsAttachment")?we?Fe?Fe[tt]?void 0:Promise.reject(new T.Z(Pr,`feature is missing the identifying attribute ${tt}`)):Promise.reject(new T.Z(Pr,"'attributes' are required on a feature to query attachments")):Promise.reject(new T.Z(Pr,"A feature is required to add/delete/update attachments")):Promise.reject(new T.Z(Pr,"this layer doesn't support attachments"))}_getLayerDomain(we){const Fe=this.fieldsIndex.get(we);return Fe?Fe.domain:null}_fetchFirstLayerId(we){return(0,Z.default)(this.url,{query:Sr(_t({f:"json"},this.customParameters),{token:this.apiKey}),responseType:"json",signal:we}).then(Fe=>{const tt=Fe.data;if(tt)return Array.isArray(tt.layers)&&tt.layers.length>0?tt.layers[0].id:Array.isArray(tt.tables)&&tt.tables.length>0?tt.tables[0].id:void 0})}_initLayerProperties(we){var Fe=this;return(0,g.Z)(function*(){return Fe._set("source",we),we.sourceJSON&&(Fe.sourceJSON=we.sourceJSON,Fe.read(we.sourceJSON,{origin:"service",url:Fe.parsedUrl})),Fe._verifySource(),Fe._verifyFields(),(0,Ir.YN)(Fe.renderer,Fe.fieldsIndex),(0,Ir.UF)(Fe.timeInfo,Fe.fieldsIndex),(0,Zs.y)(Fe,{origin:"service"})})()}hasDataChanged(){var we=this;return(0,g.Z)(function*(){var Fe;if(null!=(Fe=we.source)&&Fe.refresh)try{var tt;const{dataChanged:Mt,updates:Ht}=yield null==(tt=we.source)?void 0:tt.refresh();if((0,Q.pC)(Ht)&&(we.sourceJSON=_t(_t({},we.sourceJSON),Ht),we.read(Ht,{origin:"service",url:we.parsedUrl})),Mt)return!0}catch(Mt){}if(we.definitionExpression)try{return(yield function oe(we,Fe){return ce.apply(this,arguments)}(we.definitionExpression,we.fieldsIndex)).hasDateFunctions}catch(Mt){}return!1})()}_verifyFields(){const we=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+we+")"),this.isTable||this._hasMemorySource()||-1!==we.search(/\/FeatureServer\//i)||this.fields&&this.fields.some(function(Fe){return"geometry"===Fe.type})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+we+")")}_fixTemplates(we,Fe){we&&we.forEach(tt=>{const Mt=tt.prototype&&tt.prototype.attributes;Mt&&Fe&&delete Mt[Fe]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new T.Z("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new T.Z("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(we){we.forEach(Fe=>{Fe.layer=this,Fe.sourceLayer=this}),this._handles.add([we.on("after-add",Fe=>{Fe.item.layer=this,Fe.item.sourceLayer=this}),we.on("after-remove",Fe=>{Fe.item.layer=null,Fe.item.sourceLayer=null})],"fl-source")}_resetMemorySource(we){we.forEach(Fe=>{Fe.layer=null,Fe.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAttachmentCapabilities(we){const Fe={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return we&&Array.isArray(we)&&we.forEach(tt=>{const Mt=ir[tt.name];Mt&&(Fe[Mt]=!!tt.isEnabled)}),Fe}_readDataCapabilities(we){return{isVersioned:Dr(we,"isDataVersioned",!1),supportsAttachment:Dr(we,"hasAttachments",!1),supportsM:Dr(we,"hasM",!1),supportsZ:Dr(we,"hasZ",!1)}}_readMetadataCapabilities(we){return{supportsAdvancedFieldProperties:Dr(we,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(we,Fe){const tt=we?we.toLowerCase().split(",").map(Hr=>Hr.trim()):[],Mt=tt.includes("editing")&&!Fe.datesInUnknownTimezone;let Ht=Mt&&tt.includes("create"),or=Mt&&tt.includes("delete"),Cr=Mt&&tt.includes("update");const Kr=tt.includes("changetracking");return Mt&&!(Ht||or||Cr)&&(Ht=or=Cr=!0),{supportsCalculate:Dr(Fe,"supportsCalculate",!1),supportsTruncate:Dr(Fe,"supportsTruncate",!1),supportsValidateSql:Dr(Fe,"supportsValidateSql",!1),supportsAdd:Ht,supportsDelete:or,supportsEditing:Mt,supportsChangeTracking:Kr,supportsQuery:tt.includes("query"),supportsQueryAttachments:Dr(Fe.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:Dr(Fe,"supportsAttachmentsResizing",!1),supportsSync:tt.includes("sync"),supportsUpdate:Cr,supportsExceedsLimitStatistics:Dr(Fe,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(we){var Fe;const tt=we.advancedQueryCapabilities,Mt=we.ownershipBasedAccessControlForFeatures,Ht=we.archivingInfo,or=null==(Fe=this.url)?void 0:Fe.includes("MapServer"),Cr=!(0,x.Z)("mapserver-pbf-enabled")&&or&&this.version<10.81,Kr=(0,Tt.M8)(this.url),Hr=(we.supportedQueryFormats||"").split(",").reduce((ss,Yr)=>{const ms=Yr.toLowerCase().trim();return ms&&ss.add(ms),ss},new Set);return{supportsStatistics:Dr(tt,"supportsStatistics",we.supportsStatistics),supportsPercentileStatistics:Dr(tt,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Dr(tt,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:Ne(tt),supportsCentroid:Dr(tt,"supportsReturningGeometryCentroid",!1),supportsDistance:Dr(tt,"supportsQueryWithDistance",!1),supportsDistinct:Dr(tt,"supportsDistinct",we.supportsAdvancedQueries),supportsExtent:Dr(tt,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Dr(tt,"supportsReturningGeometryProperties",!1),supportsHavingClause:Dr(tt,"supportsHavingClause",!1),supportsOrderBy:Dr(tt,"supportsOrderBy",we.supportsAdvancedQueries),supportsPagination:Dr(tt,"supportsPagination",!1),supportsQuantization:Dr(we,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Dr(we,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Dr(we,"supportsReturningQueryGeometry",!1),supportsResultType:Dr(tt,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Dr(tt,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Dr(tt,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Dr(we,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Dr(tt,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Dr(Mt,"allowOthersToQuery",!0),supportsHistoricMoment:Dr(Ht,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!Cr&&Hr.has("pbf"),supportsDisjointSpatialRelationship:Dr(tt,"supportsDisjointSpatialRel",!1),supportsCacheHint:Dr(tt,"supportsQueryWithCacheHint",!1),supportsDefaultSpatialReference:Dr(tt,"supportsDefaultSR",!1),supportsCompactGeometry:Kr,maxRecordCountFactor:cn(we,"maxRecordCountFactor",void 0),maxRecordCount:cn(we,"maxRecordCount",void 0),standardMaxRecordCount:cn(we,"standardMaxRecordCount",void 0),tileMaxRecordCount:cn(we,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(we){const Fe=we.advancedQueryCapabilities,tt=Dr(Fe,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Dr(Fe,"supportsQueryRelatedPagination",!1),supportsCount:tt,supportsOrderBy:tt}}_readEditingCapabilities(we){const Fe=we.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Dr(we,"allowGeometryUpdates",!0),supportsGlobalId:Dr(we,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Dr(we,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Dr(we,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Dr(we,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Dr(we,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Dr(Fe,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Dr(Fe,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Dr(Fe,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Dr(Fe,"allowOthersToUpdate",!0)}}};(0,b._)([(0,K.Cb)({readOnly:!0,json:{read:!1}})],it.prototype,"capabilities",void 0),(0,b._)([(0,de.r)("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],it.prototype,"readCapabilities",null),(0,b._)([(0,K.Cb)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],it.prototype,"charts",void 0),(0,b._)([(0,K.Cb)({readOnly:!0})],it.prototype,"createQueryVersion",null),(0,b._)([(0,K.Cb)({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],it.prototype,"copyright",void 0),(0,b._)([(0,K.Cb)({type:Boolean})],it.prototype,"datesInUnknownTimezone",void 0),(0,b._)([(0,K.Cb)({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],it.prototype,"displayField",void 0),(0,b._)([(0,K.Cb)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],it.prototype,"definitionExpression",void 0),(0,b._)([(0,K.Cb)({types:X.LB,readOnly:!0})],it.prototype,"defaultSymbol",void 0),(0,b._)([(0,K.Cb)({type:gs.n})],it.prototype,"dynamicDataSource",void 0),(0,b._)([(0,K.Cb)({readOnly:!0})],it.prototype,"editFieldsInfo",void 0),(0,b._)([(0,K.Cb)({type:Boolean})],it.prototype,"editingEnabled",null),(0,b._)([(0,de.r)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],it.prototype,"readEditingEnabled",null),(0,b._)([(0,de.r)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],it.prototype,"readEditingEnabledFromWebMap",null),(0,b._)([(0,pe.c)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],it.prototype,"writeEditingEnabled",null),(0,b._)([(0,pe.c)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],it.prototype,"writeEditingEnabledToWebMap",null),(0,b._)([(0,K.Cb)({readOnly:!0})],it.prototype,"editingInfo",void 0),(0,b._)([(0,de.r)("editingInfo")],it.prototype,"readEditingInfo",null),(0,b._)([(0,K.Cb)(Zt.PV)],it.prototype,"elevationInfo",void 0),(0,b._)([(0,K.Cb)(xr.d)],it.prototype,"featureReduction",void 0),(0,b._)([(0,K.Cb)(Sr(_t({},ze.fields),{json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:ct}}}}}))],it.prototype,"fields",void 0),(0,b._)([(0,K.Cb)(ze.fieldsIndex)],it.prototype,"fieldsIndex",void 0),(0,b._)([(0,K.Cb)({type:Cs.Z,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],it.prototype,"floorInfo",void 0),(0,b._)([(0,K.Cb)({type:Gr,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],it.prototype,"formTemplate",void 0),(0,b._)([(0,K.Cb)({type:Qr.Z,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],it.prototype,"fullExtent",void 0),(0,b._)([(0,K.Cb)()],it.prototype,"gdbVersion",void 0),(0,b._)([(0,K.Cb)({readOnly:!0,type:Ss,json:{read:{source:"geometryProperties"}}})],it.prototype,"geometryFieldsInfo",void 0),(0,b._)([(0,K.Cb)({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:Xt.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:ct,writer(we,Fe,tt){const Mt=we?Xt.toJSON(we):null;Mt&&(0,ee.RB)(tt,Mt,Fe)}}}},read:{source:"layerDefinition.geometryType",reader:Xt.read}}})],it.prototype,"geometryType",void 0),(0,b._)([(0,K.Cb)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],it.prototype,"hasM",void 0),(0,b._)([(0,K.Cb)({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],it.prototype,"hasZ",void 0),(0,b._)([(0,K.Cb)({readOnly:!0,type:Zr.Z})],it.prototype,"heightModelInfo",void 0),(0,b._)([(0,K.Cb)({type:Date})],it.prototype,"historicMoment",void 0),(0,b._)([(0,K.Cb)(Zt.id)],it.prototype,"id",void 0),(0,b._)([(0,K.Cb)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],it.prototype,"infoFor3D",void 0),(0,b._)([(0,K.Cb)({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],it.prototype,"isTable",void 0),(0,b._)([(0,de.r)("service","isTable",["type","geometryType"]),(0,de.r)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],it.prototype,"readIsTable",null),(0,b._)([(0,pe.c)("web-map","isTable")],it.prototype,"writeIsTable",null),(0,b._)([(0,K.Cb)(Zt.iR)],it.prototype,"labelsVisible",void 0),(0,b._)([(0,K.Cb)({type:[is.Z],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Is.r},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Is.r},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],it.prototype,"labelingInfo",void 0),(0,b._)([(0,K.Cb)(Zt.bT)],it.prototype,"opacity",void 0),(0,b._)([(0,K.Cb)({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],it.prototype,"layerId",void 0),(0,b._)([(0,K.Cb)(Zt.rn)],it.prototype,"legendEnabled",void 0),(0,b._)([(0,K.Cb)({type:["show","hide"]})],it.prototype,"listMode",void 0),(0,b._)([(0,K.Cb)(Zt.rO)],it.prototype,"minScale",void 0),(0,b._)([(0,de.r)("service","minScale",["minScale","effectiveMinScale"])],it.prototype,"readMinScale",null),(0,b._)([(0,K.Cb)(Zt.u1)],it.prototype,"maxScale",void 0),(0,b._)([(0,de.r)("service","maxScale",["maxScale","effectiveMaxScale"])],it.prototype,"readMaxScale",null),(0,b._)([(0,K.Cb)({type:String})],it.prototype,"globalIdField",void 0),(0,b._)([(0,de.r)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),(0,de.r)("service","globalIdField",["globalIdField","fields"])],it.prototype,"readGlobalIdFieldFromService",null),(0,b._)([(0,K.Cb)({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:ct}}}}})],it.prototype,"objectIdField",void 0),(0,b._)([(0,de.r)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),(0,de.r)("service","objectIdField",["objectIdField","fields"])],it.prototype,"readObjectIdFieldFromService",null),(0,b._)([(0,K.Cb)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],it.prototype,"operationalLayerType",void 0),(0,b._)([(0,K.Cb)(ze.outFields)],it.prototype,"outFields",void 0),(0,b._)([(0,K.Cb)({readOnly:!0})],it.prototype,"parsedUrl",null),(0,b._)([(0,K.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],it.prototype,"path",void 0),(0,b._)([(0,K.Cb)(Zt.C_)],it.prototype,"popupEnabled",void 0),(0,b._)([(0,K.Cb)({type:J.Z,json:{name:"popupInfo",write:!0}})],it.prototype,"popupTemplate",void 0),(0,b._)([(0,K.Cb)({readOnly:!0})],it.prototype,"defaultPopupTemplate",null),(0,b._)([(0,K.Cb)({type:[zs],readOnly:!0})],it.prototype,"relationships",void 0),(0,b._)([(0,K.Cb)({types:k.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:k.o,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(we,Fe,tt)=>({ignoreOrigin:null==tt?void 0:tt.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(we,Fe,tt)=>({ignoreOrigin:null==tt?void 0:tt.writeLayerSchema})}}})],it.prototype,"renderer",null),(0,b._)([(0,de.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,de.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],it.prototype,"readRenderer",null),(0,b._)([(0,K.Cb)()],it.prototype,"sourceJSON",void 0),(0,b._)([(0,K.Cb)({type:Boolean})],it.prototype,"returnM",void 0),(0,b._)([(0,K.Cb)({type:Boolean})],it.prototype,"returnZ",void 0),(0,b._)([(0,K.Cb)(Zt.YI)],it.prototype,"screenSizePerspectiveEnabled",void 0),(0,b._)([(0,K.Cb)({clonable:!1})],it.prototype,"source",null),(0,b._)([(0,se.p)("source")],it.prototype,"castSource",null),(0,b._)([(0,de.r)("portal-item","source",["featureSet"]),(0,de.r)("web-map","source",["featureSet"])],it.prototype,"readSource",null),(0,b._)([(0,K.Cb)({readOnly:!0})],it.prototype,"serviceDefinitionExpression",void 0),(0,b._)([(0,de.r)("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],it.prototype,"readServiceDefinitionExpression",null),(0,b._)([(0,K.Cb)({type:es.Z,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],it.prototype,"spatialReference",void 0),(0,b._)([(0,K.Cb)({type:Number})],it.prototype,"subtypeCode",void 0),(0,b._)([(0,K.Cb)({type:[jr.Z]})],it.prototype,"templates",void 0),(0,b._)([(0,de.r)("templates",["editFieldsInfo","creatorField","editorField","templates"])],it.prototype,"readTemplates",null),(0,b._)([(0,K.Cb)({type:Mr.Z})],it.prototype,"timeInfo",void 0),(0,b._)([(0,K.Cb)()],it.prototype,"title",void 0),(0,b._)([(0,de.r)("service","title",["name"]),(0,de.r)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],it.prototype,"readTitle",null),(0,b._)([(0,de.r)("web-map","title",["layerDefinition.name","title"])],it.prototype,"readTitleFromWebMap",null),(0,b._)([(0,K.Cb)({type:String})],it.prototype,"sublayerTitleMode",void 0),(0,b._)([(0,K.Cb)({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],it.prototype,"trackIdField",void 0),(0,b._)([(0,K.Cb)({json:{read:!1}})],it.prototype,"type",void 0),(0,b._)([(0,K.Cb)({type:String})],it.prototype,"typeIdField",void 0),(0,b._)([(0,de.r)("service","typeIdField"),(0,de.r)("typeIdField",["layerDefinition.typeIdField"])],it.prototype,"readTypeIdField",null),(0,b._)([(0,K.Cb)({type:[Nr.Z]})],it.prototype,"types",void 0),(0,b._)([(0,de.r)("service","types",["types"]),(0,de.r)("types",["layerDefinition.types"])],it.prototype,"readTypes",null),(0,b._)([(0,K.Cb)({readOnly:!0,json:{write:!1}})],it.prototype,"serverGens",void 0),(0,b._)([(0,K.Cb)({type:w.Z.ofType(_r),readOnly:!0})],it.prototype,"indexes",void 0),(0,b._)([(0,K.Cb)(Zt.HQ)],it.prototype,"url",null),(0,b._)([(0,pe.c)("url")],it.prototype,"writeUrl",null),(0,b._)([(0,K.Cb)({readOnly:!0})],it.prototype,"userIsAdmin",void 0),(0,b._)([(0,K.Cb)({json:{origins:{service:{read:!0}},read:!1}})],it.prototype,"version",void 0),(0,b._)([(0,de.r)("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],it.prototype,"readVersion",null),(0,b._)([(0,K.Cb)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],it.prototype,"visible",void 0),(0,b._)([(0,de.r)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],it.prototype,"readVisible",null),it=(0,b._)([(0,ue.j)("esri.layers.FeatureLayer")],it);const Ot=(0,ie.d)({types:X.QT}),wt=it},63602:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>z});var g=p(15861),b=p(17626),J=p(59318),j=(p(29132),p(84792)),C=p(26584),$=p(61885),L=p(61996),D=p(47996),I=p(63290),W=p(10699),k=p(21726),Z=p(77712),T=(p(85931),p(8314),p(90912),p(76898)),O=p(2004),x=p(65234);let N=0;const M=I.Z.getLogger("esri.layers.Layer");let Q=class extends($.Z.EventedMixin((0,L.I)(D.Z))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new O.Z(-180,-90,180,90,x.Z.WGS84),this.id=Date.now().toString(16)+"-layer-"+N++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=x.Z.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static fromArcGISServerUrl(ee){return(0,g.Z)(function*(){const le="string"==typeof ee?{url:ee}:ee,oe=yield p.e(4578).then(p.bind(p,24578));try{return yield oe.fromUrl(le)}catch(ce){throw M.error("#fromArcGISServerUrl({ url: '"+le.url+"'})","Failed to create layer from arcgis server url",ce),ce}})()}static fromPortalItem(ee){return(0,g.Z)(function*(){const le="portalItem"in ee?ee:{portalItem:ee},oe=yield p.e(7534).then(p.bind(p,7534));try{return yield oe.fromItem(le)}catch(ce){const re=le&&le.portalItem;throw M.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+(re&&re.portal&&re.portal.url||J.Z.portalUrl)+"', id: '"+(re&&re.id||"unset")+"')",ce),ce}})()}initialize(){this.when().catch(ee=>{var le,oe;(0,W.D_)(ee)||I.Z.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${null!=(le=this.title)?le:"no title"}', id: '${null!=(oe=this.id)?oe:"no id"}')`,{error:ee})})}destroy(){if(this.parent){const ee=this,le=this.parent;"layers"in le&&le.layers.includes(ee)?le.layers.remove(ee):"tables"in le&&le.tables.includes(ee)?le.tables.remove(ee):"baseLayers"in le&&le.baseLayers.includes(ee)?le.baseLayers.remove(ee):"baseLayers"in le&&le.referenceLayers.includes(ee)&&le.referenceLayers.remove(ee)}}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){const ee=this.url;return ee?(0,k.mN)(ee):null}fetchAttributionData(){var ee=this;return(0,g.Z)(function*(){const le=ee.attributionDataUrl;if(ee.hasAttributionData&&le)return(yield(0,j.default)(le,{query:{f:"json"},responseType:"json"})).data;throw new C.Z("layer:no-attribution-data","Layer does not have attribution data")})()}};(0,b._)([(0,Z.Cb)({type:String})],Q.prototype,"attributionDataUrl",void 0),(0,b._)([(0,Z.Cb)({type:O.Z})],Q.prototype,"fullExtent",void 0),(0,b._)([(0,Z.Cb)({readOnly:!0})],Q.prototype,"hasAttributionData",null),(0,b._)([(0,Z.Cb)({type:String,clonable:!1})],Q.prototype,"id",void 0),(0,b._)([(0,Z.Cb)({type:Boolean,nonNullable:!0})],Q.prototype,"legendEnabled",void 0),(0,b._)([(0,Z.Cb)({type:["show","hide","hide-children"]})],Q.prototype,"listMode",void 0),(0,b._)([(0,Z.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0})],Q.prototype,"opacity",void 0),(0,b._)([(0,Z.Cb)({clonable:!1})],Q.prototype,"parent",void 0),(0,b._)([(0,Z.Cb)({readOnly:!0})],Q.prototype,"parsedUrl",null),(0,b._)([(0,Z.Cb)({type:Boolean})],Q.prototype,"popupEnabled",void 0),(0,b._)([(0,Z.Cb)({type:Boolean})],Q.prototype,"attributionVisible",void 0),(0,b._)([(0,Z.Cb)({type:x.Z})],Q.prototype,"spatialReference",void 0),(0,b._)([(0,Z.Cb)({type:String})],Q.prototype,"title",void 0),(0,b._)([(0,Z.Cb)({type:String,readOnly:!0,json:{read:!1}})],Q.prototype,"type",void 0),(0,b._)([(0,Z.Cb)()],Q.prototype,"url",void 0),(0,b._)([(0,Z.Cb)({type:Boolean,nonNullable:!0})],Q.prototype,"visible",void 0),Q=(0,b._)([(0,T.j)("esri.layers.Layer")],Q);const z=Q},58141:(He,ve,p)=>{"use strict";p.d(ve,{rk:()=>Z,Tj:()=>X,GI:()=>V,CE:()=>w,Tq:()=>T,Zx:()=>O,Ee:()=>M});var g=p(20414),b=p(23841),J=p(55494),B=p(28347);class Z{constructor(z,ee,le){this.strength=z,this.radius=ee,this.threshold=le,this.type="bloom"}interpolate(z,ee,le){this.strength=x(z.strength,ee.strength,le),this.radius=x(z.radius,ee.radius,le),this.threshold=x(z.threshold,ee.threshold,le)}clone(){return new Z(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:N(this.radius),strength:this.strength,threshold:this.threshold}}}class X{constructor(z){this.radius=z,this.type="blur"}interpolate(z,ee,le){this.radius=Math.round(x(z.radius,ee.radius,le))}clone(){return new X(this.radius)}toJSON(){return{type:"blur",radius:N(this.radius)}}}class V{constructor(z,ee){this.type=z,this.amount=ee,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(z,ee,le){this.amount=x(z.amount,ee.amount,le),this._updateMatrix()}clone(){return new V(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const z=this._colorMatrix||(0,J.c)();switch(this.type){case"brightness":this._colorMatrix=((Q,z)=>{const ee=(0,B.s)(Q,z,0,0,0,0,z,0,0,0,0,z,0,0,0,0,1);return(0,B.t)(ee,ee)})(z,this.amount);break;case"contrast":this._colorMatrix=((Q,z)=>{const ee=(0,B.s)(Q,z,0,0,.5-.5*z,0,z,0,.5-.5*z,0,0,z,.5-.5*z,0,0,0,1);return(0,B.t)(ee,ee)})(z,this.amount);break;case"grayscale":this._colorMatrix=((Q,z)=>{const ee=1-this.amount,le=(0,B.s)(Q,.2126+.7874*ee,.7152-.7152*ee,.0722-.0722*ee,0,.2126-.2126*ee,.7152+.2848*ee,.0722-.0722*ee,0,.2126-.2126*ee,.7152-.7152*ee,.0722+.9278*ee,0,0,0,0,1);return(0,B.t)(le,le)})(z);break;case"invert":this._colorMatrix=((Q,z)=>{const ee=1-2*z,le=(0,B.s)(Q,ee,0,0,z,0,ee,0,z,0,0,ee,z,0,0,0,1);return(0,B.t)(le,le)})(z,this.amount);break;case"saturate":this._colorMatrix=((Q,z)=>{const ee=(0,B.s)(Q,.213+.787*z,.715-.715*z,.072-.072*z,0,.213-.213*z,.715+.285*z,.072-.072*z,0,.213-.213*z,.715-.715*z,.072+.928*z,0,0,0,0,1);return(0,B.t)(ee,ee)})(z,this.amount);break;case"sepia":this._colorMatrix=((Q,z)=>{const ee=1-this.amount,le=(0,B.s)(Q,.393+.607*ee,.769-.769*ee,.189-.189*ee,0,.349-.349*ee,.686+.314*ee,.168-.168*ee,0,.272-.272*ee,.534-.534*ee,.131+.869*ee,0,0,0,0,1);return(0,B.t)(le,le)})(z)}}}class w{constructor(z,ee,le,oe){this.offsetX=z,this.offsetY=ee,this.blurRadius=le,this.color=oe,this.type="drop-shadow"}interpolate(z,ee,le){this.offsetX=x(z.offsetX,ee.offsetX,le),this.offsetY=x(z.offsetY,ee.offsetY,le),this.blurRadius=x(z.blurRadius,ee.blurRadius,le),this.color[0]=Math.round(x(z.color[0],ee.color[0],le)),this.color[1]=Math.round(x(z.color[1],ee.color[1],le)),this.color[2]=Math.round(x(z.color[2],ee.color[2],le)),this.color[3]=x(z.color[3],ee.color[3],le)}clone(){return new w(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const z=[...this.color];return z[3]*=255,{type:"drop-shadow",xoffset:N(this.offsetX),yoffset:N(this.offsetY),blurRadius:N(this.blurRadius),color:z}}}class T{constructor(z){this.angle=z,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(z,ee,le){this.angle=x(z.angle,ee.angle,le),this._updateMatrix()}clone(){return new T(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const z=this._colorMatrix||(0,J.c)();this._colorMatrix=((Q,z)=>{const ee=Math.sin(z*Math.PI/180),le=Math.cos(z*Math.PI/180),oe=(0,B.s)(Q,.213+.787*le-.213*ee,.715-.715*le-.715*ee,.072-.072*le+.928*ee,0,.213-.213*le+.143*ee,.715+.285*le+.14*ee,.072-.072*le-.283*ee,0,.213-.213*le-.787*ee,.715-.715*le+.715*ee,.072+.928*le+.072*ee,0,0,0,0,1);return(0,B.t)(oe,oe)})(z,this.angle)}}class O{constructor(z){this.amount=z,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(z,ee,le){this.amount=x(z.amount,ee.amount,le)}clone(){return new O(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function x(Q,z,ee){return Q+(z-Q)*ee}function N(Q){return Math.round(1e3*(0,b.Wz)(Q))/1e3}function M(Q){switch(Q.type){case"grayscale":case"sepia":case"invert":return new V(Q.type,0);case"saturate":case"brightness":case"contrast":return new V(Q.type,1);case"opacity":return new O(1);case"hue-rotate":return new T(0);case"blur":return new X(0);case"drop-shadow":return new w(0,0,0,[...(0,g.h$)("transparent")]);case"bloom":return new Z(0,0,1)}}},71149:(He,ve,p)=>{"use strict";p.d(ve,{rM:()=>I,ij:()=>j,cW:()=>C});var g=p(26584),b=p(94113),J=p(29538),B=p(53390);function j(Z,X,V){try{return function L(Z){if(!Z||0===Z.length)return null;if(function D(Z){const X=Z[0];return!!X&&"scale"in X}(Z)){const X=[];for(const V of Z)X.push({scale:V.scale,value:I(V.value)});return X}return I(Z)}(Z)}catch(T){var w;null==V||null==(w=V.messages)||w.push(T)}return null}function C(Z,X,V,w){try{const T=function $(Z){const X=(0,J.Q)(Z);return X?(0,B.Cb)(X)?X.map(V=>V.toJSON()):X.map(({scale:V,effects:w})=>({scale:V,value:w.map(T=>T.toJSON())})):null}(Z);(0,b.RB)(V,T,X)}catch(T){w.messages&&w.messages.push(T)}}function I(Z){if(!Z||!Z.length)return"";const X=[];for(const V of Z){let w=[];switch(V.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":w=[W(V,"amount")];break;case"blur":w=[W(V,"radius","pt")];break;case"hue-rotate":w=[W(V,"angle","deg")];break;case"drop-shadow":w=[W(V,"xoffset","pt"),W(V,"yoffset","pt"),W(V,"blurRadius","pt"),k(V,"color")];break;case"bloom":w=[W(V,"strength"),W(V,"radius","pt"),W(V,"threshold")]}const T=`${V.type}(${w.filter(Boolean).join(" ")})`;(0,J.Q)(T),X.push(T)}return X.join(" ")}function W(Z,X,V){if(null==Z[X])throw new g.Z("effect:missing-parameter",`Missing parameter '${X}' in ${Z.type} effect`,{effect:Z});return V?Z[X]+V:""+Z[X]}function k(Z,X){if(null==Z[X])throw new g.Z("effect:missing-parameter",`Missing parameter '${X}' in ${Z.type} effect`,{effect:Z});const V=Z[X];return`rgba(${V[0]||0}, ${V[1]||0}, ${V[2]||0}, ${V[3]/255||0})`}},29538:(He,ve,p)=>{"use strict";p.d(ve,{Q:()=>D});var C,g=p(20414),b=p(26584),J=p(58141),j=(p(1719),p(53390)),L={exports:{}};function D(te){if(!te||0===te.length)return null;if("string"==typeof te){const fe=I(te);return fe&&0!==fe.length?fe:null}const Ee=te.map(fe=>{if(!Number.isFinite(fe.scale)||fe.scale<=0)throw new b.Z("effect:invalid-scale","scale must be finite and greater than 0",{stop:fe});return{scale:fe.scale,effects:I(fe.value)}});Ee.sort((fe,be)=>be.effects.length-fe.effects.length);for(let fe=0;fe<Ee.length-1;fe++){if(!(0,j.AS)(Ee[fe].effects,Ee[fe+1].effects))throw new b.Z("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:Ee[fe].effects,b:Ee[fe+1].effects});(0,j.uF)(Ee[fe].effects,Ee[fe+1].effects)}return Ee.sort((fe,be)=>be.scale-fe.scale),Ee}function I(te){let Ee;if(!te)return[];try{Ee=L.exports.parse(te)}catch(fe){throw new b.Z("effect:invalid-syntax","Invalid effect syntax",{value:te,error:fe})}return Ee.map(fe=>function W(te){try{switch(te.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return function k(te){let Ee=1;return O(te.parameters,1),1===te.parameters.length&&(Ee=ce(te.parameters[0])),new J.GI(te.name,Ee)}(te);case"opacity":return function Z(te){let Ee=1;return O(te.parameters,1),1===te.parameters.length&&(Ee=ce(te.parameters[0])),new J.Zx(Ee)}(te);case"hue-rotate":return function X(te){let Ee=0;return O(te.parameters,1),1===te.parameters.length&&(Ee=function K(te){return function ee(te){if("quantity"!==te.type||!(0===te.value&&null===te.unit||te.unit&&null!=z[te.unit]))throw new b.Z("effect:type-error",`Expected <angle>, Actual: ${x(te)}`,{term:te})}(te),te.value*z[te.unit]||0}(te.parameters[0])),new J.Tq(Ee)}(te);case"blur":return function V(te){let Ee=0;return O(te.parameters,1),1===te.parameters.length&&(Ee=ae(te.parameters[0]),N(Ee,te.parameters[0])),new J.Tj(Ee)}(te);case"drop-shadow":return function w(te){const Ee=[];let fe=null;for(const be of te.parameters)if("color"===be.type){if(Ee.length&&Object.freeze(Ee),fe)throw new b.Z("effect:type-error","Accepts only one color",{});fe=se(be)}else{const ye=ae(be);if(Object.isFrozen(Ee))throw new b.Z("effect:type-error","<length> parameters not consecutive",{lengths:Ee});Ee.push(ye),3===Ee.length&&N(ye,be)}if(Ee.length<2||Ee.length>3)throw new b.Z("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${Ee.length}}`,{lengths:Ee});return new J.CE(Ee[0],Ee[1],Ee[2]||0,fe||de("black"))}(te);case"bloom":return function T(te){let Ee=1,fe=0,be=0;return O(te.parameters,3),te.parameters[0]&&(Ee=ce(te.parameters[0])),te.parameters[1]&&(fe=ae(te.parameters[1]),N(fe,te.parameters[1])),te.parameters[2]&&(be=ce(te.parameters[2])),new J.rk(Ee,fe,be)}(te)}}catch(Ee){throw Ee.details.filter=te,Ee}throw new b.Z("effect:unknown-effect",`Effect '${te.name}' is not supported`,{effect:te})}(fe))}function O(te,Ee){if(te.length>Ee)throw new b.Z("effect:type-error",`Function supports up to ${Ee} parameters, Actual: ${te.length}`,{parameters:te})}function x(te){if("color"===te.type)return"<color>";if(te.unit){if(le[te.unit])return"<length>";if(z[te.unit])return"<angle>";if("%"===te.unit)return"<percentage>"}return"<double>"}function N(te,Ee){if(te<0)throw new b.Z("effect:type-error",`Negative values are not allowed, Actual: ${te}`,{term:Ee})}(C=L).exports&&(C.exports=function(){function Ee(ye,Ke,Ue,he){var Me=Error.call(this,ye);return Object.setPrototypeOf&&Object.setPrototypeOf(Me,Ee.prototype),Me.expected=Ke,Me.found=Ue,Me.location=he,Me.name="SyntaxError",Me}function fe(ye,Ke,Ue){return Ue=Ue||" ",ye.length>Ke?ye:ye+(Ue+=Ue.repeat(Ke-=ye.length)).slice(0,Ke)}return function te(ye,Ke){function Ue(){this.constructor=ye}Ue.prototype=Ke.prototype,ye.prototype=new Ue}(Ee,Error),Ee.prototype.format=function(ye){var Ke="Error: "+this.message;if(this.location){var Ue,he=null;for(Ue=0;Ue<ye.length;Ue++)if(ye[Ue].source===this.location.source){he=ye[Ue].text.split(/\r\n|\n|\r/g);break}var Me=this.location.start,Le=this.location.source+":"+Me.line+":"+Me.column;if(he){var Je=this.location.end,Oe=fe("",Me.line.toString().length),xe=he[Me.line-1],Be=Me.line===Je.line?Je.column:xe.length+1;Ke+="\n --\x3e "+Le+"\n"+Oe+" |\n"+Me.line+" | "+xe+"\n"+Oe+" | "+fe("",Me.column-1)+fe("",Be-Me.column,"^")}else Ke+="\n at "+Le}return Ke},Ee.buildMessage=function(ye,Ke){var Ue={literal:function(Be){return'"'+Me(Be.text)+'"'},class:function(Be){var Y=Be.parts.map(function(me){return Array.isArray(me)?Le(me[0])+"-"+Le(me[1]):Le(me)});return"["+(Be.inverted?"^":"")+Y+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(Be){return Be.description}};function he(Be){return Be.charCodeAt(0).toString(16).toUpperCase()}function Me(Be){return Be.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Y){return"\\x0"+he(Y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Y){return"\\x"+he(Y)})}function Le(Be){return Be.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Y){return"\\x0"+he(Y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Y){return"\\x"+he(Y)})}function Je(Be){return Ue[Be.type](Be)}return"Expected "+function Oe(Be){var Y,me,Ie=Be.map(Je);if(Ie.sort(),Ie.length>0){for(Y=1,me=1;Y<Ie.length;Y++)Ie[Y-1]!==Ie[Y]&&(Ie[me]=Ie[Y],me++);Ie.length=me}switch(Ie.length){case 1:return Ie[0];case 2:return Ie[0]+" or "+Ie[1];default:return Ie.slice(0,-1).join(", ")+", or "+Ie[Ie.length-1]}}(ye)+" but "+function xe(Be){return Be?'"'+Me(Be)+'"':"end of input"}(Ke)+" found."},{SyntaxError:Ee,parse:function be(ye,Ke){var Ue,he={},Me=(Ke=void 0!==Ke?Ke:{}).grammarSource,Le={start:Br},Je=Br,Bt=/^[ \t\n\r]/,$t=/^[a-z\-]/,qt=/^[0-9a-fA-F]/,gr=/^[+\-]/,er=/^[0-9]/,vr=jr("none"),pr=_r("none",!1),hr=_r(")",!1),st=_r(",",!1),ft=jr("whitespace"),St=ur([" ","\t","\n","\r"],!1,!1),Lt=jr("function"),Ft=_r("(",!1),Dt=jr("identifier"),Vt=ur([["a","z"],"-"],!1,!1),Gt=jr("percentage"),Qt=_r("%",!1),gt=jr("length"),ut=_r("px",!1),Ze=_r("cm",!1),ot=_r("mm",!1),Pe=_r("in",!1),Ge=_r("pt",!1),vt=_r("pc",!1),zt=jr("angle"),Yt=_r("deg",!1),et=_r("rad",!1),Rt=_r("grad",!1),Ut=_r("turn",!1),Jt=jr("number"),nr=jr("color"),Tr=_r("#",!1),Gr=ur([["0","9"],["a","f"],["A","F"]],!1,!1),Qr=ur(["+","-"],!1,!1),Zr=ur([["0","9"]],!1,!1),es=_r(".",!1),bs=_r("e",!1),At=0,at=0,Ct=[{line:1,column:1}],lt=0,Tt=[],Zt=0;if("startRule"in Ke){if(!(Ke.startRule in Le))throw new Error("Can't start parsing from rule \""+Ke.startRule+'".');Je=Le[Ke.startRule]}function lr(){return ye.substring(at,At)}function _r(bt,Xt){return{type:"literal",text:bt,ignoreCase:Xt}}function ur(bt,Xt,ir){return{type:"class",parts:bt,inverted:Xt,ignoreCase:ir}}function jr(bt){return{type:"other",description:bt}}function Nr(bt){var Xt,ir=Ct[bt];if(ir)return ir;for(Xt=bt-1;!Ct[Xt];)Xt--;for(ir={line:(ir=Ct[Xt]).line,column:ir.column};Xt<bt;)10===ye.charCodeAt(Xt)?(ir.line++,ir.column=1):ir.column++,Xt++;return Ct[bt]=ir,ir}function Ir(bt){At<lt||(At>lt&&(lt=At,Tt=[]),Tt.push(bt))}function Br(){var bt;return(bt=function Ss(){var bt,Xt;return Zt++,bt=At,$r(),"none"===ye.substr(At,4)?(Xt="none",At+=4):(Xt=he,0===Zt&&Ir(pr)),Xt!==he?($r(),at=bt,bt=[]):(At=bt,bt=he),Zt--,bt===he&&0===Zt&&Ir(vr),bt}())===he&&(bt=function is(){var bt,Xt;if(bt=[],(Xt=Is())!==he)for(;Xt!==he;)bt.push(Xt),Xt=Is();else bt=he;return bt}()),bt}function Is(){var bt,Xt,ir,Pr;return bt=At,$r(),(Xt=function Nt(){var bt,Xt,ir;return Zt++,bt=At,(Xt=zs())!==he?(40===ye.charCodeAt(At)?(ir="(",At++):(ir=he,0===Zt&&Ir(Ft)),ir!==he?(at=bt,bt=Xt):(At=bt,bt=he)):(At=bt,bt=he),Zt--,bt===he&&(Xt=he,0===Zt&&Ir(Lt)),bt}())!==he?($r(),(ir=function Cs(){var bt,Xt,ir,Pr,Xr,rs,Dr,cn;if(bt=At,(Xt=ts())!==he){for(ir=[],Pr=At,Xr=$r(),44===ye.charCodeAt(At)?(rs=",",At++):(rs=he,0===Zt&&Ir(st)),rs===he&&(rs=null),Dr=$r(),(cn=ts())!==he?Pr=Xr=[Xr,rs,Dr,cn]:(At=Pr,Pr=he);Pr!==he;)ir.push(Pr),Pr=At,Xr=$r(),44===ye.charCodeAt(At)?(rs=",",At++):(rs=he,0===Zt&&Ir(st)),rs===he&&(rs=null),Dr=$r(),(cn=ts())!==he?Pr=Xr=[Xr,rs,Dr,cn]:(At=Pr,Pr=he);at=bt,bt=function(bt,Xt){return Xt.length>0?function an(bt,Xt,ir){return[bt].concat(function on(bt,Xt){return bt.map(function(ir){return ir[Xt]})}(Xt,ir))}(bt,Xt,3):[bt]}(Xt,ir)}else At=bt,bt=he;return bt}())===he&&(ir=null),$r(),41===ye.charCodeAt(At)?(Pr=")",At++):(Pr=he,0===Zt&&Ir(hr)),Pr!==he?($r(),at=bt,bt=function(bt,Xt){return{type:"function",name:bt,parameters:Xt||[]}}(Xt,ir)):(At=bt,bt=he)):(At=bt,bt=he),bt}function ts(){var bt,Xt;return bt=At,(Xt=function Mr(){var bt,Xt,ir;return Zt++,bt=At,$r(),(Xt=ds())!==he?(37===ye.charCodeAt(At)?(ir="%",At++):(ir=he,0===Zt&&Ir(Qt)),ir!==he?(at=bt,bt=function(bt){return{value:bt,unit:"%"}}(Xt)):(At=bt,bt=he)):(At=bt,bt=he),Zt--,bt===he&&0===Zt&&Ir(Gt),bt}())===he&&(Xt=function Xs(){var bt,Xt,ir;return Zt++,bt=At,$r(),(Xt=ds())!==he?("px"===ye.substr(At,2)?(ir="px",At+=2):(ir=he,0===Zt&&Ir(ut)),ir!==he?(at=bt,bt=function(bt){return{value:bt,unit:"px"}}(Xt)):(At=bt,bt=he)):(At=bt,bt=he),bt===he&&(bt=At,$r(),(Xt=ds())!==he?("cm"===ye.substr(At,2)?(ir="cm",At+=2):(ir=he,0===Zt&&Ir(Ze)),ir!==he?(at=bt,bt=function(bt){return{value:bt,unit:"cm"}}(Xt)):(At=bt,bt=he)):(At=bt,bt=he),bt===he&&(bt=At,$r(),(Xt=ds())!==he?("mm"===ye.substr(At,2)?(ir="mm",At+=2):(ir=he,0===Zt&&Ir(ot)),ir!==he?(at=bt,bt=function(bt){return{value:bt,unit:"mm"}}(Xt)):(At=bt,bt=he)):(At=bt,bt=he),bt===he&&(bt=At,$r(),(Xt=ds())!==he?("in"===ye.substr(At,2)?(ir="in",At+=2):(ir=he,0===Zt&&Ir(Pe)),ir!==he?(at=bt,bt=function(bt){return{value:bt,unit:"in"}}(Xt)):(At=bt,bt=he)):(At=bt,bt=he),bt===he&&(bt=At,$r(),(Xt=ds())!==he?("pt"===ye.substr(At,2)?(ir="pt",At+=2):(ir=he,0===Zt&&Ir(Ge)),ir!==he?(at=bt,bt=function(bt){return{value:bt,unit:"pt"}}(Xt)):(At=bt,bt=he)):(At=bt,bt=he),bt===he&&(bt=At,$r(),(Xt=ds())!==he?("pc"===ye.substr(At,2)?(ir="pc",At+=2):(ir=he,0===Zt&&Ir(vt)),ir!==he?(at=bt,bt=function(bt){return{value:bt,unit:"pc"}}(Xt)):(At=bt,bt=he)):(At=bt,bt=he)))))),Zt--,bt===he&&0===Zt&&Ir(gt),bt}())===he&&(Xt=function gs(){var bt,Xt,ir;return Zt++,bt=At,(Xt=ds())!==he?("deg"===ye.substr(At,3)?(ir="deg",At+=3):(ir=he,0===Zt&&Ir(Yt)),ir!==he?(at=bt,bt=function(bt){return{value:bt,unit:"deg"}}(Xt)):(At=bt,bt=he)):(At=bt,bt=he),bt===he&&(bt=At,(Xt=ds())!==he?("rad"===ye.substr(At,3)?(ir="rad",At+=3):(ir=he,0===Zt&&Ir(et)),ir!==he?(at=bt,bt=function(bt){return{value:bt,unit:"rad"}}(Xt)):(At=bt,bt=he)):(At=bt,bt=he),bt===he&&(bt=At,(Xt=ds())!==he?("grad"===ye.substr(At,4)?(ir="grad",At+=4):(ir=he,0===Zt&&Ir(Rt)),ir!==he?(at=bt,bt=function(bt){return{value:bt,unit:"grad"}}(Xt)):(At=bt,bt=he)):(At=bt,bt=he),bt===he&&(bt=At,(Xt=ds())!==he?("turn"===ye.substr(At,4)?(ir="turn",At+=4):(ir=he,0===Zt&&Ir(Ut)),ir!==he?(at=bt,bt=function(bt){return{value:bt,unit:"turn"}}(Xt)):(At=bt,bt=he)):(At=bt,bt=he)))),Zt--,bt===he&&(Xt=he,0===Zt&&Ir(zt)),bt}())===he&&(Xt=function Zs(){var bt,Xt;return Zt++,bt=At,$r(),(Xt=ds())!==he?(at=bt,bt=function(bt){return{value:bt,unit:null}}(Xt)):(At=bt,bt=he),Zt--,bt===he&&0===Zt&&Ir(Jt),bt}()),Xt!==he&&(at=bt,Xt=function(bt){return{type:"quantity",value:bt.value,unit:bt.unit}}(Xt)),(bt=Xt)===he&&(bt=At,(Xt=function rn(){var bt,Xt,ir,Pr;if(Zt++,bt=At,35===ye.charCodeAt(At)?(Xt="#",At++):(Xt=he,0===Zt&&Ir(Tr)),Xt!==he){if(ir=[],qt.test(ye.charAt(At))?(Pr=ye.charAt(At),At++):(Pr=he,0===Zt&&Ir(Gr)),Pr!==he)for(;Pr!==he;)ir.push(Pr),qt.test(ye.charAt(At))?(Pr=ye.charAt(At),At++):(Pr=he,0===Zt&&Ir(Gr));else ir=he;ir!==he?(at=bt,bt={type:"hex",value:lr()}):(At=bt,bt=he)}else At=bt,bt=he;return bt===he&&(bt=At,(Xt=Is())!==he&&(at=bt,Xt=function(bt){return{type:"function",value:bt}}(Xt)),(bt=Xt)===he&&(bt=At,(Xt=zs())!==he&&(at=bt,Xt={type:"named",value:lr()}),bt=Xt)),Zt--,bt===he&&(Xt=he,0===Zt&&Ir(nr)),bt}())!==he&&(at=bt,Xt=function(bt){return{type:"color",colorType:bt.type,value:bt.value}}(Xt)),bt=Xt),bt}function $r(){var bt,Xt;for(Zt++,bt=[],Bt.test(ye.charAt(At))?(Xt=ye.charAt(At),At++):(Xt=he,0===Zt&&Ir(St));Xt!==he;)bt.push(Xt),Bt.test(ye.charAt(At))?(Xt=ye.charAt(At),At++):(Xt=he,0===Zt&&Ir(St));return Zt--,Xt=he,0===Zt&&Ir(ft),bt}function zs(){var bt,Xt,ir;if(Zt++,bt=At,Xt=[],$t.test(ye.charAt(At))?(ir=ye.charAt(At),At++):(ir=he,0===Zt&&Ir(Vt)),ir!==he)for(;ir!==he;)Xt.push(ir),$t.test(ye.charAt(At))?(ir=ye.charAt(At),At++):(ir=he,0===Zt&&Ir(Vt));else Xt=he;return Xt!==he&&(at=bt,Xt=lr()),Zt--,(bt=Xt)===he&&(Xt=he,0===Zt&&Ir(Dt)),bt}function ds(){var bt,Xt,ir,Pr,Xr,rs,Dr;for(bt=At,gr.test(ye.charAt(At))?(ye.charAt(At),At++):0===Zt&&Ir(Qr),Xt=At,ir=[],er.test(ye.charAt(At))?(Pr=ye.charAt(At),At++):(Pr=he,0===Zt&&Ir(Zr));Pr!==he;)ir.push(Pr),er.test(ye.charAt(At))?(Pr=ye.charAt(At),At++):(Pr=he,0===Zt&&Ir(Zr));if(46===ye.charCodeAt(At)?(Pr=".",At++):(Pr=he,0===Zt&&Ir(es)),Pr!==he){if(Xr=[],er.test(ye.charAt(At))?(rs=ye.charAt(At),At++):(rs=he,0===Zt&&Ir(Zr)),rs!==he)for(;rs!==he;)Xr.push(rs),er.test(ye.charAt(At))?(rs=ye.charAt(At),At++):(rs=he,0===Zt&&Ir(Zr));else Xr=he;Xr!==he?Xt=ir=[ir,Pr,Xr]:(At=Xt,Xt=he)}else At=Xt,Xt=he;if(Xt===he)if(Xt=[],er.test(ye.charAt(At))?(ir=ye.charAt(At),At++):(ir=he,0===Zt&&Ir(Zr)),ir!==he)for(;ir!==he;)Xt.push(ir),er.test(ye.charAt(At))?(ir=ye.charAt(At),At++):(ir=he,0===Zt&&Ir(Zr));else Xt=he;if(Xt!==he){if(ir=At,101===ye.charCodeAt(At)?(Pr="e",At++):(Pr=he,0===Zt&&Ir(bs)),Pr!==he){if(gr.test(ye.charAt(At))?(Xr=ye.charAt(At),At++):(Xr=he,0===Zt&&Ir(Qr)),Xr===he&&(Xr=null),rs=[],er.test(ye.charAt(At))?(Dr=ye.charAt(At),At++):(Dr=he,0===Zt&&Ir(Zr)),Dr!==he)for(;Dr!==he;)rs.push(Dr),er.test(ye.charAt(At))?(Dr=ye.charAt(At),At++):(Dr=he,0===Zt&&Ir(Zr));else rs=he;rs!==he?ir=Pr=[Pr,Xr,rs]:(At=ir,ir=he)}else At=ir,ir=he;ir===he&&(ir=null),at=bt,bt=parseFloat(lr())}else At=bt,bt=he;return bt}if((Ue=Je())!==he&&At===ye.length)return Ue;throw Ue!==he&&At<ye.length&&Ir({type:"end"}),function _s(bt,Xt,ir){return new Ee(Ee.buildMessage(bt,Xt),bt,Xt,ir)}(Tt,lt<ye.length?ye.charAt(lt):null,function us(bt,Xt){var ir=Nr(bt),Pr=Nr(Xt);return{source:Me,start:{offset:bt,line:ir.line,column:ir.column},end:{offset:Xt,line:Pr.line,column:Pr.column}}}(lt,lt<ye.length?lt+1:lt))}}}());const z={deg:1,grad:.9,rad:180/Math.PI,turn:360},le={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function ce(te){!function Q(te){if("quantity"!==te.type||null!==te.unit&&"%"!==te.unit)throw new b.Z("effect:type-error",`Expected <double> or <percentage>, Actual: ${x(te)}`,{term:te})}(te);const Ee=te.value;return N(Ee,te),"%"===te.unit?.01*Ee:Ee}function ae(te){return function oe(te){if("quantity"!==te.type||!(0===te.value&&null===te.unit||te.unit&&null!=le[te.unit]))throw new b.Z("effect:type-error",`Expected <length>, Actual: ${x(te)}`,{term:te})}(te),te.value*le[te.unit]||0}function se(te){switch(te.colorType){case"hex":return(0,g.rW)(te.value);case"named":return de(te.value);case"function":return function ie(te){if(O(te.parameters,4),ue.test(te.name))return[ce(te.parameters[0]),ce(te.parameters[1]),ce(te.parameters[2]),te.parameters[3]?ce(te.parameters[3]):1];if(pe.test(te.name))return(0,g.B7)(function re(te){return function M(te){if("quantity"!==te.type||null!==te.unit)throw new b.Z("effect:type-error",`Expected <double>, Actual: ${x(te)}`,{term:te})}(te),N(te.value,te),te.value}(te.parameters[0]),ce(te.parameters[1]),ce(te.parameters[2]),te.parameters[3]?ce(te.parameters[3]):1);throw new b.Z("effect:syntax-error",`Invalid color function '${te.name}'`,{colorFunction:te})}(te.value)}}function de(te){if(!(0,g.St)(te))throw new b.Z("effect:unknown-color",`color '${te}' isn't valid`,{namedColor:te});return(0,g.VL)(te)}const ue=/^rgba?/i,pe=/^hsla?/i},53390:(He,ve,p)=>{"use strict";p.d(ve,{AS:()=>b,Cb:()=>B,uF:()=>J});var g=p(58141);function b(j,C){const $=j.length>C.length?j:C;return(j.length>C.length?C:j).every((L,D)=>L.type===$[D].type)}function J(j,C){const $=j.length>C.length?j:C,L=j.length>C.length?C:j;for(let D=L.length;D<$.length;D++)L.push((0,g.Ee)($[D]))}function B(j){const C=j[0];return!!C&&"type"in C}},66385:(He,ve,p)=>{"use strict";p.d(ve,{u_:()=>b,nd:()=>B,S6:()=>J});var g=p(62208);class b{constructor(C=null,$={},L,D){this.geometry=C,this.attributes=$,this.centroid=L,this.objectId=D,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const C=new b(this.geometry,this.attributes,this.centroid,this.objectId);return C.displayId=this.displayId,C.geohashX=this.geohashX,C.geohashY=this.geohashY,C}}function J(j){return!((0,g.Wi)(j.geometry)||!j.geometry.coords||!j.geometry.coords.length)}class B extends b{}},95786:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>g});class g{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const J=new g;return J.objectIdFieldName=this.objectIdFieldName,J.globalIdFieldName=this.globalIdFieldName,J.geohashFieldName=this.geohashFieldName,J.geometryProperties=this.geometryProperties,J.geometryType=this.geometryType,J.spatialReference=this.spatialReference,J.hasZ=this.hasZ,J.hasM=this.hasM,J.features=this.features,J.fields=this.fields,J.transform=this.transform,J.exceededTransferLimit=this.exceededTransferLimit,J.uniqueIdField=this.uniqueIdField,J.queryGeometry=this.queryGeometry,J.queryGeometryType=this.queryGeometryType,J}}},88071:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>g});class g{constructor(J=[],B=[],j=!1){this.lengths=null!=J?J:[],this.coords=null!=B?B:[],this.hasIndeterminateRingOrder=j}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((J,B)=>J+B)}forEachVertex(J){let B=0;this.lengths.length||J(this.coords[0],this.coords[1]);for(let j=0;j<this.lengths.length;j++){const C=this.lengths[j];for(let $=0;$<C;$++)J(this.coords[2*($+B)],this.coords[2*($+B)+1]);B+=C}}clone(J){return J?(J.set(this.coords),new g(this.lengths.slice(),J,this.hasIndeterminateRingOrder)):new g(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}},82054:(He,ve,p)=>{"use strict";p.d(ve,{XA:()=>xe,h_:()=>qe,Yn:()=>Be,GH:()=>Ie,E7:()=>Y,ks:()=>Le,Uy:()=>Me,u0:()=>ye,EI:()=>me,cn:()=>Xe,di:()=>$e,Iv:()=>pe,fQ:()=>N,eG:()=>Ue,J6:()=>fe,oB:()=>hr,zj:()=>nt,$:()=>Kt,lz:()=>vr,RZ:()=>dt,Nh:()=>We,Jd:()=>w,IN:()=>T,hY:()=>qt,lM:()=>ke,$g:()=>$t});var g=p(26584),b=p(63290),J=p(62208),B=p(91179),j=p(66385),C=p(95786),$=p(88071);function L(st,ft){return st?ft?4:3:ft?3:2}const D=b.Z.getLogger("esri.layers.graphics.featureConversionUtils"),I={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},W=(st,ft,St,Lt,Ft,Dt)=>{st[St]=Ft,st[St+1]=Dt},k=(st,ft,St,Lt,Ft,Dt)=>{st[St]=Ft,st[St+1]=Dt,st[St+2]=ft[Lt+2]},Z=(st,ft,St,Lt,Ft,Dt)=>{st[St]=Ft,st[St+1]=Dt,st[St+2]=ft[Lt+3]},X=(st,ft,St,Lt,Ft,Dt)=>{st[St]=Ft,st[St+1]=Dt,st[St+2]=ft[Lt+2],st[St+3]=ft[Lt+3]};function V(st,ft,St,Lt){if(st){if(St)return ft&&Lt?X:k;if(ft&&Lt)return Z}else if(ft&&Lt)return k;return W}function w({scale:st,translate:ft},St){return Math.round((St-ft[0])/st[0])}function T({scale:st,translate:ft},St){return Math.round((ft[1]-St)/st[1])}function O({scale:st,translate:ft},St){return St*st[0]+ft[0]}function x({scale:st,translate:ft},St){return ft[1]-St*st[1]}function N(st,ft,St){return st?ft?St?ce(st):z(st):St?le(st):M(st):null}function M(st){const ft=st.coords;return{x:ft[0],y:ft[1]}}function Q(st,ft){return st.coords[0]=ft.x,st.coords[1]=ft.y,st}function z(st){const ft=st.coords;return{x:ft[0],y:ft[1],z:ft[2]}}function ee(st,ft){return st.coords[0]=ft.x,st.coords[1]=ft.y,st.coords[2]=ft.z,st}function le(st){const ft=st.coords;return{x:ft[0],y:ft[1],m:ft[2]}}function oe(st,ft){return st.coords[0]=ft.x,st.coords[1]=ft.y,st.coords[2]=ft.m,st}function ce(st){const ft=st.coords;return{x:ft[0],y:ft[1],z:ft[2],m:ft[3]}}function re(st,ft){return st.coords[0]=ft.x,st.coords[1]=ft.y,st.coords[2]=ft.z,st.coords[3]=ft.m,st}function ae(st,ft){return st&&ft?re:st?ee:ft?oe:Q}function se(st,ft,St,Lt,Ft){const Dt=ae(St,Lt);for(const Vt of ft){const{geometry:Gt,attributes:Qt}=Vt;let gt;Gt&&(gt=Dt(new $.Z,Gt)),st.push(new j.u_(gt,Qt,null,Qt[Ft]))}return st}function pe(st,ft,St){if((0,J.Wi)(st))return null;const Lt=L(ft,St),Ft=[];for(let Dt=0;Dt<st.coords.length;Dt+=Lt){const Vt=[];for(let Gt=0;Gt<Lt;Gt++)Vt.push(st.coords[Dt+Gt]);Ft.push(Vt)}return ft?St?{points:Ft,hasZ:ft,hasM:St}:{points:Ft,hasZ:ft}:St?{points:Ft,hasM:St}:{points:Ft}}function ie(st,ft,St,Lt,Ft){const Dt=L(St,Lt);for(const Vt of ft){const Gt=Vt.geometry,Qt=Vt.attributes;let gt;Gt&&(gt=te(new $.Z,Gt,Dt)),st.push(new j.u_(gt,Qt,null,Qt[Ft]))}return st}function te(st,ft,St=L(ft.hasZ,ft.hasM)){st.lengths[0]=ft.points.length;const Lt=st.coords;let Ft=0;for(const Dt of ft.points)for(let Vt=0;Vt<St;Vt++)Lt[Ft++]=Dt[Vt];return st}function fe(st,ft,St){if(!st)return null;const Lt=L(ft,St),{coords:Ft,lengths:Dt}=st,Vt=[];let Gt=0;for(const Qt of Dt){const gt=[];for(let ut=0;ut<Qt;ut++){const Ze=[];for(let ot=0;ot<Lt;ot++)Ze.push(Ft[Gt++]);gt.push(Ze)}Vt.push(gt)}return ft?St?{paths:Vt,hasZ:ft,hasM:St}:{paths:Vt,hasZ:ft}:St?{paths:Vt,hasM:St}:{paths:Vt}}function be(st,ft,St,Lt,Ft){const Dt=L(St,Lt);for(const Vt of ft){const Gt=Vt.geometry,Qt=Vt.attributes;let gt;Gt&&(gt=ye(new $.Z,Gt,Dt)),st.push(new j.u_(gt,Qt,null,Qt[Ft]))}return st}function ye(st,ft,St=L(ft.hasZ,ft.hasM)){const{lengths:Lt,coords:Ft}=st;let Dt=0;for(const Vt of ft.paths){for(const Gt of Vt)for(let Qt=0;Qt<St;Qt++)Ft[Dt++]=Gt[Qt];Lt.push(Vt.length)}return st}function Ue(st,ft,St){if(!st)return null;const Lt=L(ft,St),{coords:Ft,lengths:Dt}=st,Vt=[];let Gt=0;for(const Qt of Dt){const gt=[];for(let ut=0;ut<Qt;ut++){const Ze=[];for(let ot=0;ot<Lt;ot++)Ze.push(Ft[Gt++]);gt.push(Ze)}Vt.push(gt)}return ft?St?{rings:Vt,hasZ:ft,hasM:St}:{rings:Vt,hasZ:ft}:St?{rings:Vt,hasM:St}:{rings:Vt}}function he(st,ft,St,Lt,Ft){for(const Dt of ft){const Vt=Dt.geometry,Gt=Dt.centroid,Qt=Dt.attributes;let gt;Vt&&(gt=Me(new $.Z,Vt,St,Lt)),(0,J.pC)(Gt)?st.push(new j.u_(gt,Qt,Q(new $.Z,Gt),Qt[Ft])):st.push(new j.u_(gt,Qt,null,Qt[Ft]))}return st}function Me(st,ft,St=ft.hasZ,Lt=ft.hasM){return Le(st,ft.rings,St,Lt),st}function Le(st,ft,St,Lt){const Ft=L(St,Lt),{lengths:Dt,coords:Vt}=st;let Gt=0;Dt.length=Vt.length=0;for(const Qt of ft){for(const gt of Qt)for(let ut=0;ut<Ft;ut++)Vt[Gt++]=gt[ut];Dt.push(Qt.length)}return st}const Je=[],Oe=[];function xe(st,ft,St,Lt,Ft){Je[0]=st;const[Dt]=Be(Oe,Je,ft,St,Lt,Ft);return Je.length=Oe.length=0,Dt}function Be(st,ft,St,Lt,Ft,Dt){if(st.length=0,!St){for(const Vt of ft)st.push(new j.u_(null,Vt.attributes,null,Vt.attributes[Dt]));return st}switch(St){case"esriGeometryPoint":return se(st,ft,Lt,Ft,Dt);case"esriGeometryMultipoint":return ie(st,ft,Lt,Ft,Dt);case"esriGeometryPolyline":return be(st,ft,Lt,Ft,Dt);case"esriGeometryPolygon":return he(st,ft,Lt,Ft,Dt);default:D.error("convertToFeatureSet:unknown-geometry",new g.Z(`Unable to parse unknown geometry type '${St}'`)),st.length=0}return st}function Y(st,ft,St,Lt,Ft,Dt){const Vt=st.length;switch(St){case"esriGeometryPoint":se(st,ft,Lt,Ft,Dt);break;case"esriGeometryMultipoint":ie(st,ft,Lt,Ft,Dt);break;case"esriGeometryPolyline":be(st,ft,Lt,Ft,Dt);break;case"esriGeometryPolygon":he(st,ft,Lt,Ft,Dt);break;default:D.error("convertToFeatureSet:unknown-geometry",new g.Z(`Unable to parse unknown geometry type '${St}'`))}for(let Gt=0;Gt<ft.length;Gt++)st[Gt+Vt].geometryType=St,st[Gt+Vt].insertAfter=ft[Gt].insertAfter,st[Gt+Vt].groupId=ft[Gt].groupId;return st}function me(st,ft,St,Lt){Oe[0]=st,Qe(Je,Oe,ft,St,Lt);const Ft=Je[0];return Je.length=Oe.length=0,Ft}function Ie(st,ft,St){if((0,J.Wi)(st))return null;const Lt=new $.Z;return"hasZ"in st&&null==ft&&(ft=st.hasZ),"hasM"in st&&null==St&&(St=st.hasM),(0,B.wp)(st)?ae(null!=ft?ft:null!=st.z,null!=St?St:null!=st.m)(Lt,st):(0,B.oU)(st)?Me(Lt,st,ft,St):(0,B.l9)(st)?ye(Lt,st,L(ft,St)):(0,B.aW)(st)?te(Lt,st,L(ft,St)):void D.error("convertFromGeometry:unknown-geometry",new g.Z(`Unable to parse unknown geometry type '${st}'`))}function $e(st,ft,St,Lt){const Ft=st&&("coords"in st?st:st.geometry);if((0,J.Wi)(Ft))return null;switch(ft){case"esriGeometryPoint":{let Dt=M;return St&&Lt?Dt=ce:St?Dt=z:Lt&&(Dt=le),Dt(Ft)}case"esriGeometryMultipoint":return pe(Ft,St,Lt);case"esriGeometryPolyline":return fe(Ft,St,Lt);case"esriGeometryPolygon":return Ue(Ft,St,Lt);default:return void D.error("convertToGeometry:unknown-geometry",new g.Z(`Unable to parse unknown geometry type '${ft}'`))}}function Qe(st,ft,St,Lt,Ft){if(st.length=0,(0,J.Wi)(St))return function rt(st,ft){for(const St of ft)st.push({attributes:St.attributes});return st}(st,ft);switch(St){case"esriGeometryPoint":return function K(st,ft,St,Lt){let Ft=M;St&&Lt?Ft=ce:St?Ft=z:Lt&&(Ft=le);for(const Dt of ft){const{geometry:Vt,attributes:Gt}=Dt,Qt=(0,J.pC)(Vt)?Ft(Vt):null;st.push({attributes:Gt,geometry:Qt})}return st}(st,ft,Lt,Ft);case"esriGeometryMultipoint":return function ue(st,ft,St,Lt){for(const Ft of ft){const{geometry:Dt,attributes:Vt}=Ft;let Gt;Dt&&(Gt=pe(Dt,St,Lt)),st.push({attributes:Vt,geometry:Gt})}return st}(st,ft,Lt,Ft);case"esriGeometryPolyline":return function Ee(st,ft,St,Lt){for(const Ft of ft){const{geometry:Dt,attributes:Vt}=Ft;let Gt;(0,J.pC)(Dt)&&(Gt=fe(Dt,St,Lt)),st.push({attributes:Vt,geometry:Gt})}return st}(st,ft,Lt,Ft);case"esriGeometryPolygon":return function Ke(st,ft,St,Lt){for(const Ft of ft){const{geometry:Dt,attributes:Vt,centroid:Gt}=Ft;let Qt;if((0,J.pC)(Dt)&&(Qt=Ue(Dt,St,Lt)),(0,J.pC)(Gt)){const gt=M(Gt);st.push({attributes:Vt,centroid:gt,geometry:Qt})}else st.push({attributes:Vt,geometry:Qt})}return st}(st,ft,Lt,Ft);default:D.error("convertToFeatureSet:unknown-geometry",new g.Z(`Unable to parse unknown geometry type '${St}'`))}return st}function Xe(st){const{objectIdFieldName:ft,spatialReference:St,transform:Lt,fields:Ft,hasM:Dt,hasZ:Vt,features:Gt,geometryType:Qt,exceededTransferLimit:gt,uniqueIdField:ut,queryGeometry:Ze,queryGeometryType:ot}=st,Pe={features:Qe([],Gt,Qt,Vt,Dt),fields:Ft,geometryType:Qt,objectIdFieldName:ft,spatialReference:St,uniqueIdField:ut,queryGeometry:$e(Ze,ot,!1,!1)};return Lt&&(Pe.transform=Lt),gt&&(Pe.exceededTransferLimit=gt),Dt&&(Pe.hasM=Dt),Vt&&(Pe.hasZ=Vt),Pe}function qe(st,ft){const St=new C.Z,{hasM:Lt,hasZ:Ft,features:Dt,objectIdFieldName:Vt,spatialReference:Gt,geometryType:Qt,exceededTransferLimit:gt,transform:ut,fields:Ze}=st;return Ze&&(St.fields=Ze),St.geometryType=Qt,St.objectIdFieldName=Vt||ft,St.spatialReference=Gt,St.objectIdFieldName?(Dt&&Be(St.features,Dt,Qt,Ft,Lt,St.objectIdFieldName),gt&&(St.exceededTransferLimit=gt),Lt&&(St.hasM=Lt),Ft&&(St.hasZ=Ft),ut&&(St.transform=ut),St):(D.error(new g.Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),St)}function ke(st){const{transform:ft,features:St,hasM:Lt,hasZ:Ft}=st;if(!ft)return st;for(const Dt of St)(0,J.pC)(Dt.geometry)&&$t(Dt.geometry,Dt.geometry,Lt,Ft,ft),(0,J.pC)(Dt.centroid)&&$t(Dt.centroid,Dt.centroid,Lt,Ft,ft);return st.transform=null,st}function dt(st,ft){const{geometryType:St,features:Lt,hasM:Ft,hasZ:Dt}=ft;if(!st)return ft;for(let Vt=0;Vt<Lt.length;Vt++){const Gt=Lt[Vt],Qt=Gt.weakClone();Qt.geometry=new $.Z,We(Qt.geometry,Gt.geometry,Ft,Dt,St,st),Gt.centroid&&(Qt.centroid=new $.Z,We(Qt.centroid,Gt.centroid,Ft,Dt,"esriGeometryPoint",st)),Lt[Vt]=Qt}return ft.transform=st,ft}function We(st,ft,St,Lt,Ft,Dt,Vt=St,Gt=Lt){if(st.lengths.length&&(st.lengths.length=0),st.coords.length&&(st.coords.length=0),(0,J.Wi)(ft)||!ft.coords.length)return null;const Qt=I[Ft],{coords:gt,lengths:ut}=ft,Ze=L(St,Lt),ot=L(St&&Vt,Lt&&Gt),Pe=V(St,Lt,Vt,Gt);if(!ut.length)return Pe(st.coords,gt,0,0,w(Dt,gt[0]),T(Dt,gt[1])),st.lengths.length&&(st.lengths.length=0),st.coords.length=Ze,st;let Ge,vt,zt,Yt,et=0,Rt=0,Ut=Rt;for(const Jt of ut){if(Jt<Qt)continue;let nr=0;Rt=Ut,zt=Ge=w(Dt,gt[et]),Yt=vt=T(Dt,gt[et+1]),Pe(st.coords,gt,Rt,et,zt,Yt),nr++,et+=Ze,Rt+=ot;for(let Tr=1;Tr<Jt;Tr++,et+=Ze)zt=w(Dt,gt[et]),Yt=T(Dt,gt[et+1]),zt===Ge&&Yt===vt||(Pe(st.coords,gt,Rt,et,zt-Ge,Yt-vt),Rt+=ot,nr++,Ge=zt,vt=Yt);nr>=Qt&&(st.lengths.push(nr),Ut=Rt)}return st.coords.length=Ut,st.coords.length?st:null}function nt(st,ft,St,Lt,Ft,Dt,Vt=St,Gt=Lt){if(st.lengths.length&&(st.lengths.length=0),st.coords.length&&(st.coords.length=0),!ft||!ft.coords.length)return null;const Qt=I[Ft],{coords:gt,lengths:ut}=ft,Ze=L(St,Lt),ot=L(St&&Vt,Lt&&Gt),Pe=V(St,Lt,Vt,Gt);if(!ut.length)return Pe(st.coords,gt,0,0,gt[0],gt[1]),st.lengths.length&&(st.lengths.length=0),st.coords.length=Ze,st;let Ge=0;const vt=Dt*Dt;for(const zt of ut){if(zt<Qt){Ge+=zt*Ze;continue}const Yt=st.coords.length/ot,et=Ge,Rt=Ge+(zt-1)*Ze;Pe(st.coords,gt,st.coords.length,et,gt[et],gt[et+1]),mt(st.coords,gt,Ze,vt,Pe,et,Rt),Pe(st.coords,gt,st.coords.length,Rt,gt[Rt],gt[Rt+1]);const Ut=st.coords.length/ot-Yt;Ut>=Qt?st.lengths.push(Ut):st.coords.length=Yt*ot,Ge+=zt*Ze}return st.coords.length?st:null}function ht(st,ft,St,Lt){const Ft=st[ft],Dt=st[ft+1],Qt=st[Lt],gt=st[Lt+1];let ut=st[St],Ze=st[St+1],ot=Qt-ut,Pe=gt-Ze;if(0!==ot||0!==Pe){const Ge=((Ft-ut)*ot+(Dt-Ze)*Pe)/(ot*ot+Pe*Pe);Ge>1?(ut=Qt,Ze=gt):Ge>0&&(ut+=ot*Ge,Ze+=Pe*Ge)}return ot=Ft-ut,Pe=Dt-Ze,ot*ot+Pe*Pe}function mt(st,ft,St,Lt,Ft,Dt,Vt){let Gt,Qt=Lt,gt=0;for(let ut=Dt+St;ut<Vt;ut+=St)Gt=ht(ft,ut,Dt,Vt),Gt>Qt&&(gt=ut,Qt=Gt);Qt>Lt&&(gt-Dt>St&&mt(st,ft,St,Lt,Ft,Dt,gt),Ft(st,ft,st.length,gt,ft[gt],ft[gt+1]),Vt-gt>St&&mt(st,ft,St,Lt,Ft,gt,Vt))}function Kt(st,ft,St,Lt){if((0,J.Wi)(ft)||!ft.coords||!ft.coords.length)return null;const Ft=L(St,Lt);let Dt=Number.POSITIVE_INFINITY,Vt=Number.POSITIVE_INFINITY,Gt=Number.NEGATIVE_INFINITY,Qt=Number.NEGATIVE_INFINITY;if(ft&&ft.coords){const gt=ft.coords;for(let ut=0;ut<gt.length;ut+=Ft){const Ze=gt[ut],ot=gt[ut+1];Dt=Math.min(Dt,Ze),Gt=Math.max(Gt,Ze),Vt=Math.min(Vt,ot),Qt=Math.max(Qt,ot)}}return st[0]=Dt,st[1]=Vt,st[2]=Gt,st[3]=Qt,st}function $t(st,ft,St,Lt,Ft){const{coords:Dt,lengths:Vt}=ft,Gt=St?Lt?X:k:Lt?k:W,Qt=L(St,Lt);if(!Dt.length)return st!==ft&&(st.lengths.length=0,st.coords.length=0),st;if(!Vt.length)return Gt(st.coords,Dt,0,0,O(Ft,Dt[0]),x(Ft,Dt[1])),st!==ft&&(st.lengths.length=0,st.coords.length=Qt),st;const[gt,ut]=Ft.scale;let Ze=0;for(let ot=0;ot<Vt.length;ot++){const Pe=Vt[ot];st.lengths[ot]=Pe;let Ge=O(Ft,Dt[Ze]),vt=x(Ft,Dt[Ze+1]);Gt(st.coords,Dt,Ze,Ze,Ge,vt),Ze+=Qt;for(let zt=1;zt<Pe;zt++,Ze+=Qt)Ge+=Dt[Ze]*gt,vt-=Dt[Ze+1]*ut,Gt(st.coords,Dt,Ze,Ze,Ge,vt)}return st!==ft&&(st.lengths.length=Vt.length,st.coords.length=Dt.length),st}function qt(st,ft,St,Lt,Ft,Dt){const Vt=L(St,Lt),Gt=V(St,Lt,Ft,Dt),Qt=ft.coords;st.coords.length=0,st.lengths.length=0,st.lengths.push(...ft.lengths);for(let gt=0;gt<Qt.length;gt+=Vt)Gt(st.coords,Qt,st.coords.length,gt,Qt[gt],Qt[gt+1]);return st}function er(st,ft,St,Lt){let Ft=0,Dt=st[Lt*ft],Vt=st[Lt*(ft+1)];for(let Gt=1;Gt<St;Gt++){const Qt=Dt+st[Lt*(ft+Gt)],gt=Vt+st[Lt*(ft+Gt)+1],ut=(Qt-Dt)*(gt+Vt);Dt=Qt,Vt=gt,Ft+=ut}return.5*Ft}function vr(st,ft){const{coords:St,lengths:Lt}=st;let Ft=0,Dt=0;for(let Vt=0;Vt<Lt.length;Vt++)Dt+=er(St,Ft,Lt[Vt],ft),Ft+=Vt;return Math.abs(Dt)}function hr(st,ft){if((0,J.Wi)(st))return null;const St=st.clone(),Lt=st.coords,Ft=st.lengths;let Dt=0;for(let Vt=0;Vt<Ft.length;Vt++){const Gt=Ft[Vt];let Qt=Lt[ft*Dt],gt=Lt[ft*Dt+1];for(let ut=1;ut<Gt;ut++){const Ze=Qt+Lt[ft*(Dt+ut)],ot=gt+Lt[ft*(Dt+ut)+1];St.coords[ft*(Dt+ut)]=Ze,St.coords[ft*(Dt+ut)+1]=ot,Qt=Ze,gt=ot}Dt+=Gt}return St}},50085:(He,ve,p)=>{"use strict";p.d(ve,{V:()=>L});var g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898));const L=D=>{let I=class extends D{get apiKey(){var W;return this._isOverridden("apiKey")?this._get("apiKey"):function $(D){return"portalItem"in D}(this)?null==(W=this.portalItem)?void 0:W.apiKey:null}set apiKey(W){null!=W?this._override("apiKey",W):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,g._)([(0,b.Cb)({type:String})],I.prototype,"apiKey",null),I=(0,g._)([(0,C.j)("esri.layers.mixins.APIKeyMixin")],I),I}},65088:(He,ve,p)=>{"use strict";p.d(ve,{Y:()=>I});var g=p(17626),b=p(63290),J=p(62208),B=p(77712),L=(p(85931),p(8314),p(90912),p(76898)),D=p(38305);const I=W=>{let k=class extends W{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const Z=(0,D.Qc)(this.url);if((0,J.pC)(Z)&&Z.title)return Z.title}return this._get("title")||""}set title(Z){this._set("title",Z)}set url(Z){this._set("url",(0,D.Nm)(Z,b.Z.getLogger(this.declaredClass)))}};return(0,g._)([(0,B.Cb)()],k.prototype,"title",null),(0,g._)([(0,B.Cb)({type:String})],k.prototype,"url",null),k=(0,g._)([(0,L.j)("esri.layers.mixins.ArcGISService")],k),k}},552:(He,ve,p)=>{"use strict";p.d(ve,{h:()=>L});var g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(71149);const L=D=>{let I=class extends D{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,g._)([(0,b.Cb)({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0}}}})],I.prototype,"blendMode",void 0),(0,g._)([(0,b.Cb)({json:{read:!1,write:!1,origins:{"web-map":{read:{reader:$.ij},write:{allowNull:!0,writer:$.cW}}}}})],I.prototype,"effect",void 0),I=(0,g._)([(0,C.j)("esri.layers.mixins.BlendLayer")],I),I}},50107:(He,ve,p)=>{"use strict";p.d(ve,{N:()=>$});var g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898));const $=L=>{let D=class extends L{constructor(){super(...arguments),this.customParameters=null}};return(0,g._)([(0,b.Cb)({type:Object,json:{write:{overridePolicy:I=>({enabled:!!(I&&Object.keys(I).length>0)})}}})],D.prototype,"customParameters",void 0),D=(0,g._)([(0,C.j)("esri.layers.mixins.CustomParametersMixin")],D),D}},35126:(He,ve,p)=>{"use strict";p.d(ve,{b:()=>L});var g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(2319);const L=D=>{let I=class extends D{constructor(){super(...arguments),this.featureEffect=null}};return(0,g._)([(0,b.Cb)({type:$.Z,json:{origins:{"web-map":{write:{allowNull:!0}}}}})],I.prototype,"featureEffect",void 0),I=(0,g._)([(0,C.j)("esri.layers.mixins.FeatureEffectLayer")],I),I}},49286:(He,ve,p)=>{"use strict";p.d(ve,{q:()=>X});var g=p(17626),b=p(26584),J=p(21726),B=p(77712),L=(p(85931),p(8314),p(90912),p(76898)),D=p(99433),I=p(29338),W=p(36054);const k={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};var Z=p(13812);const X=w=>{let T=class extends w{constructor(){super(...arguments),this.title=null}writeListMode(O,x,N,M){(M&&"ground"===M.layerContainerType||O&&(0,W.d)(this,N,{},M))&&(x[N]=O)}writeOperationalLayerType(O,x,N,M){!O||M&&"tables"===M.layerContainerType||(x.layerType=O)}writeTitle(O,x){x.title=O||"Layer"}read(O,x){x&&(x.layer=this),(0,I.$)(this,O,N=>super.read(O,N),x)}write(O,x){if(null!=x&&x.origin){const ee=`${x.origin}/${x.layerContainerType||"operational-layers"}`,le=k[ee];let oe=le&&le[this.operationalLayerType];var N;if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===ee&&(oe=!1),!oe)return null==(N=x.messages)||N.push(new b.Z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${ee}'`,{layer:this})),null}const M=super.write(O,Sr(_t({},x),{layer:this})),Q=!!x&&!!x.messages&&!!x.messages.filter(ee=>ee instanceof b.Z&&"web-document-write:property-required"===ee.name).length;var z;return(0,J.jc)(null==M?void 0:M.url)?(null==x||null==(z=x.messages)||z.push(new b.Z("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&Q?null:M}beforeSave(){}};return(0,g._)([(0,B.Cb)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],T.prototype,"id",void 0),(0,g._)([(0,B.Cb)({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],T.prototype,"listMode",void 0),(0,g._)([(0,D.c)("listMode")],T.prototype,"writeListMode",null),(0,g._)([(0,B.Cb)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],T.prototype,"operationalLayerType",void 0),(0,g._)([(0,D.c)("operationalLayerType")],T.prototype,"writeOperationalLayerType",null),(0,g._)([(0,B.Cb)(Z.Oh)],T.prototype,"opacity",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],T.prototype,"title",void 0),(0,g._)([(0,D.c)("title")],T.prototype,"writeTitle",null),(0,g._)([(0,B.Cb)({type:Boolean,json:{name:"visibility"}})],T.prototype,"visible",void 0),T=(0,g._)([(0,L.j)("esri.layers.mixins.OperationalLayer")],T),T}},32629:(He,ve,p)=>{"use strict";p.d(ve,{c:()=>T});var I,g=p(17626),b=p(94113),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898)),L=p(2076),D=p(86810);const W=new L.X({asc:"ascending",desc:"descending"});let k=I=class extends D.wq{constructor(O){super(O),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new I({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],k.prototype,"field",void 0),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],k.prototype,"valueExpression",void 0),(0,g._)([(0,J.Cb)({type:W.apiValues,json:{read:W.read,write:W.write}})],k.prototype,"order",void 0),k=I=(0,g._)([(0,$.j)("esri.layers.support.OrderByInfo")],k);const Z=k;function V(O,x,N){if(!O)return null;const M=O.find(z=>!!z.field);if(!M)return null;const Q=new Z;return Q.read(M,N),[Q]}function w(O,x,N,M){const Q=O.find(z=>!!z.field);Q&&(0,b.RB)(N,[Q.toJSON()],x)}const T=O=>{let x=class extends O{constructor(){super(...arguments),this.orderBy=null}};return(0,g._)([(0,J.Cb)({type:[Z],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:V},write:{target:"layerDefinition.orderBy",writer:w}}})],x.prototype,"orderBy",void 0),x=(0,g._)([(0,$.j)("esri.layers.mixins.OrderedLayer")],x),x}},6647:(He,ve,p)=>{"use strict";p.d(ve,{I:()=>Q});var g=p(15861),b=p(17626),J=p(24263),B=p(84792),j=p(59213),C=p(26584),$=p(63290),L=p(62208),D=p(10699),I=p(21726),W=p(77712),V=(p(85931),p(8314),p(90912),p(68653)),w=p(76898),T=p(99433),O=p(84687),x=p(55463),N=p(94508);const M=$.Z.getLogger("esri.layers.mixins.PortalLayer"),Q=ee=>{let le=class extends ee{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var oe;null==(oe=this.portalItem)||oe.destroy(),this.portalItem=null}set portalItem(oe){oe!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",oe))}readPortalItem(oe,ce,re){if(ce.itemId)return new x.default({id:ce.itemId,portal:re&&re.portal})}writePortalItem(oe,ce){oe&&oe.id&&(ce.itemId=oe.id)}loadFromPortal(oe,ce){var re=this;return(0,g.Z)(function*(){if(re.portalItem&&re.portalItem.id)try{const K=yield p.e(3705).then(p.bind(p,83705));return(0,D.k_)(ce),yield K.load({instance:re,supportedTypes:oe.supportedTypes,validateItem:oe.validateItem,supportsData:oe.supportsData},ce)}catch(K){throw(0,D.D_)(K)||M.warn(`Failed to load layer (${re.title}, ${re.id}) portal item (${re.portalItem.id})\n  ${K}`),K}})()}finishLoadEditablePortalLayer(oe){var ce=this;return(0,g.Z)(function*(){ce._set("userHasEditingPrivileges",yield ce._fetchUserHasEditingPrivileges(oe).catch(re=>((0,D.r9)(re),!0)))})()}_fetchUserHasEditingPrivileges(oe){var ce=this;return(0,g.Z)(function*(){const re=ce.url?null==J.id?void 0:J.id.findCredential(ce.url):null;if(!re)return!0;const K=z.credential===re?z.user:yield ce._fetchEditingUser(oe);return z.credential=re,z.user=K,(0,L.Wi)(K)||null==K.privileges||K.privileges.includes("features:user:edit")})()}_fetchEditingUser(oe){var ce=this;return(0,g.Z)(function*(){var re,K;const ae=null==(re=ce.portalItem)||null==(K=re.portal)?void 0:K.user;if(ae)return ae;const se=J.id.findServerInfo(ce.url);if(null==se||!se.owningSystemUrl)return null;const de=`${se.owningSystemUrl}/sharing/rest`,ue=O.Z.getDefault();if(ue&&ue.loaded&&(0,I.Fv)(ue.restUrl)===(0,I.Fv)(de))return ue.user;const pe=`${de}/community/self`,ie=(0,L.pC)(oe)?oe.signal:null,te=yield(0,j.q6)((0,B.default)(pe,{authMode:"no-prompt",query:{f:"json"},signal:ie}));return te.ok?N.default.fromJSON(te.value.data):null})()}read(oe,ce){ce&&(ce.layer=this),super.read(oe,ce)}write(oe,ce){const re=ce&&ce.portal,K=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||O.Z.getDefault());return re&&K&&!(0,I.tm)(K.restUrl,re.restUrl)?(ce.messages&&ce.messages.push(new C.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(oe,Sr(_t({},ce),{layer:this}))}};return(0,b._)([(0,W.Cb)({type:x.default})],le.prototype,"portalItem",null),(0,b._)([(0,V.r)("web-document","portalItem",["itemId"])],le.prototype,"readPortalItem",null),(0,b._)([(0,T.c)("web-document","portalItem",{itemId:{type:String}})],le.prototype,"writePortalItem",null),(0,b._)([(0,W.Cb)({clonable:!1})],le.prototype,"resourceReferences",void 0),(0,b._)([(0,W.Cb)({readOnly:!0})],le.prototype,"userHasEditingPrivileges",void 0),le=(0,b._)([(0,w.j)("esri.layers.mixins.PortalLayer")],le),le},z={credential:null,user:null}},30346:(He,ve,p)=>{"use strict";p.d(ve,{Q:()=>le});var g=p(15861),b=p(17626),J=p(63290),B=p(10699),j=p(77712),D=(p(85931),p(8314),p(90912),p(76898)),I=p(48701),Z=(p(26584),p(45262),p(21352));const X=new I.Z,V=new WeakMap;function O(oe){return oe&&"object"==typeof oe&&"refreshInterval"in oe&&"refresh"in oe}function x(oe,ce){return Number.isFinite(oe)&&Number.isFinite(ce)?ce<=0?oe:x(ce,oe%ce):0}let N=0,M=0;function Q(){const oe=Date.now();for(const re of X)if(re.refreshInterval){var ce;oe-(null!=(ce=V.get(re))?ce:0)+5>=6e4*re.refreshInterval&&(V.set(re,oe),re.refresh(oe))}}(0,Z.EH)(()=>{const oe=Date.now();let ce=0;for(const re of X)ce=x(Math.round(6e4*re.refreshInterval),ce),re.refreshInterval?V.get(re)||V.set(re,oe):V.delete(re);if(ce!==M){if(M=ce,clearInterval(N),0===M)return void(N=0);N=setInterval(Q,M)}});const le=oe=>{let ce=class extends oe{constructor(...re){super(...re),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=(0,B.Ds)(()=>this.hasDataChanged()),this.when().then(()=>{!function w(oe){O(oe)&&X.push(oe)}(this)},()=>{})}destroy(){!function T(oe){O(oe)&&X.includes(oe)&&X.remove(oe)}(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(re=Date.now()){(0,B.R8)(this._debounceHasDataChanged()).then(K=>{K&&this._set("refreshTimestamp",re),this.emit("refresh",{dataChanged:K})},K=>{J.Z.getLogger(this.declaredClass).error(K),this.emit("refresh",{dataChanged:!1,error:K})})}hasDataChanged(){return(0,g.Z)(function*(){return!0})()}};return(0,b._)([(0,j.Cb)({type:Number,cast:re=>re>=.1?re:re<=0?0:.1,json:{write:!0}})],ce.prototype,"refreshInterval",void 0),(0,b._)([(0,j.Cb)({readOnly:!0})],ce.prototype,"refreshTimestamp",void 0),(0,b._)([(0,j.Cb)()],ce.prototype,"refreshParameters",null),ce=(0,b._)([(0,D.j)("esri.layers.mixins.RefreshableLayer")],ce),ce}},99555:(He,ve,p)=>{"use strict";p.d(ve,{M:()=>$});var g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898));const $=D=>{let I=class extends D{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const W={minScale:this.minScale,maxScale:this.maxScale},k=this.parent;k&&"effectiveScaleRange"in k&&function L(D,I){D.minScale=D.minScale>0?I.minScale>0?Math.min(D.minScale,I.minScale):D.minScale:I.minScale,D.maxScale=D.maxScale>0?I.maxScale>0?Math.max(D.maxScale,I.maxScale):D.maxScale:I.maxScale}(W,k.effectiveScaleRange);const Z=this._get("effectiveScaleRange");return Z&&Z.minScale===W.minScale&&Z.maxScale===W.maxScale?Z:W}};return(0,g._)([(0,b.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],I.prototype,"minScale",void 0),(0,g._)([(0,b.Cb)({type:Number,nonNullable:!0,json:{write:!0}})],I.prototype,"maxScale",void 0),(0,g._)([(0,b.Cb)({readOnly:!0})],I.prototype,"effectiveScaleRange",null),I=(0,g._)([(0,C.j)("esri.layers.mixins.ScaleRangeLayer")],I),I}},97941:(He,ve,p)=>{"use strict";p.d(ve,{n:()=>X});var g=p(17626),b=p(97478),J=p(20849),B=p(77712),L=(p(85931),p(8314),p(90912),p(68653)),D=p(76898),I=p(62708),W=p(36630),k=p(58926);const X=V=>{let w=class extends V{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(T,O){const x=O.timeInfo.exportOptions;if(!x)return null;const N=x.timeOffset,M=k.v.fromJSON(x.timeOffsetUnits);return N&&M?new J.Z({value:N,unit:M}):null}set timeInfo(T){(0,W.UF)(T,this.fieldsIndex),this._set("timeInfo",T)}};return(0,g._)([(0,B.Cb)({type:b.Z,json:{write:!1}})],w.prototype,"timeExtent",void 0),(0,g._)([(0,B.Cb)({type:J.Z})],w.prototype,"timeOffset",void 0),(0,g._)([(0,L.r)("service","timeOffset",["timeInfo.exportOptions"])],w.prototype,"readOffset",null),(0,g._)([(0,B.Cb)({value:null,type:I.Z,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],w.prototype,"timeInfo",null),(0,g._)([(0,B.Cb)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],w.prototype,"useViewTime",void 0),w=(0,g._)([(0,D.j)("esri.layers.mixins.TemporalLayer")],w),w}},2319:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var Z,g=p(17626),b=p(26584),J=p(86810),B=p(62208),j=p(94113),C=p(77712),I=(p(85931),p(8314),p(90912),p(76898)),W=p(71149),k=p(98624);let X=Z=class extends J.wq{constructor(w){super(w),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(w,T){const O=super.write(w,T);if(null!=T&&T.origin){if(O.filter){const M=Object.keys(O.filter);var x;if(M.length>1||"where"!==M[0])return null==(x=T.messages)||x.push(new b.Z("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:T.layer,effect:this})),null}var N;if("showExcludedLabels"in O)return null==(N=T.messages)||N.push(new b.Z("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:T.layer,effect:this})),null}return O}clone(){return new Z({filter:(0,B.pC)(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};(0,g._)([(0,C.Cb)({type:k.Z,json:{write:{allowNull:!0,writer(w,T,O,x){const N=null==w?void 0:w.write({},x);N&&0!==Object.keys(N).length?(0,j.RB)(O,N,T):(0,j.RB)(O,null,T)}}}})],X.prototype,"filter",void 0),(0,g._)([(0,C.Cb)({json:{write:!0,origins:{"web-map":{read:{reader:W.ij},write:{writer:W.cW,overridePolicy(){return{allowNull:null!=this.excludedEffect,isRequired:null==this.excludedEffect}}}}}}})],X.prototype,"includedEffect",void 0),(0,g._)([(0,C.Cb)({json:{write:!0,origins:{"web-map":{read:{reader:W.ij},write:{writer:W.cW,overridePolicy(){return{allowNull:null!=this.includedEffect,isRequired:null==this.includedEffect}}}}}}})],X.prototype,"excludedEffect",void 0),(0,g._)([(0,C.Cb)({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":{name:"showExcludedLabels",default:!0}}}})],X.prototype,"excludedLabelsVisible",void 0),X=Z=(0,g._)([(0,I.j)("esri.layers.support.FeatureEffect")],X);const V=X},98624:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>w});var k,g=p(17626),b=p(29132),J=p(97478),B=p(2076),j=p(86810),C=p(58817),$=p(62208),L=p(77712),I=(p(90912),p(76898)),W=p(84952);const Z=new B.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),X=new B.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let V=k=class extends j.wq{constructor(T){super(T),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(T={}){const{where:O,geometry:x,spatialRelationship:N,timeExtent:M,objectIds:Q,units:z,distance:ee}=this;return new W.Z(_t({geometry:(0,C.d9)(x),objectIds:(0,C.d9)(Q),spatialRelationship:N,timeExtent:(0,C.d9)(M),where:O,units:z,distance:ee},T))}clone(){const{where:T,geometry:O,spatialRelationship:x,timeExtent:N,objectIds:M,units:Q,distance:z}=this;return new k({geometry:(0,C.d9)(O),objectIds:(0,C.d9)(M),spatialRelationship:x,timeExtent:(0,C.d9)(N),where:T,units:Q,distance:z})}};(0,g._)([(0,L.Cb)({type:String,json:{write:!0}})],V.prototype,"where",void 0),(0,g._)([(0,L.Cb)({types:b.qM,json:{write:!0}})],V.prototype,"geometry",void 0),(0,g._)([(0,L.Cb)({type:Z.apiValues,json:{name:"spatialRel",read:{reader:Z.read},write:{allowNull:!1,writer:Z.write,overridePolicy(){return{enabled:(0,$.pC)(this.geometry)}}}}})],V.prototype,"spatialRelationship",void 0),(0,g._)([(0,L.Cb)({type:Number,json:{write:{overridePolicy(T){return{enabled:null!=T&&null!=this.geometry}}}}})],V.prototype,"distance",void 0),(0,g._)([(0,L.Cb)({type:[Number],json:{write:!0}})],V.prototype,"objectIds",void 0),(0,g._)([(0,L.Cb)({type:X.apiValues,json:{read:X.read,write:{writer:X.write,overridePolicy(T){return{enabled:null!=T&&null!=this.geometry}}}}})],V.prototype,"units",void 0),(0,g._)([(0,L.Cb)({type:J.Z,json:{write:!0}})],V.prototype,"timeExtent",void 0),V=k=(0,g._)([(0,I.j)("esri.layers.support.FeatureFilter")],V);const w=V},83989:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>D});var g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let L=class extends b.wq{constructor(){super(...arguments),this.type=null}};(0,g._)([(0,J.Cb)({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],L.prototype,"type",void 0),L=(0,g._)([(0,$.j)("esri.layers.support.FeatureReduction")],L);const D=L},47058:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(83989);let D=L=class extends $.Z{constructor(W){super(W),this.type="selection"}clone(){return new L}};(0,g._)([(0,b.Cb)({type:["selection"]})],D.prototype,"type",void 0),D=L=(0,g._)([(0,C.j)("esri.layers.support.FeatureReductionSelection")],D);const I=D},32777:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>k});var g=p(17626),b=p(79608),J=p(2076),B=p(86810),j=p(77712),D=(p(85931),p(8314),p(90912),p(76898));const I=new J.X({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let W=class extends((0,b.J)(B.wq)){constructor(Z){super(Z),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,g._)([(0,j.Cb)({json:{write:!0}})],W.prototype,"name",void 0),(0,g._)([(0,j.Cb)({json:{write:!0}})],W.prototype,"description",void 0),(0,g._)([(0,j.Cb)({json:{read:I.read,write:I.write}})],W.prototype,"drawingTool",void 0),(0,g._)([(0,j.Cb)({json:{write:!0}})],W.prototype,"prototype",void 0),(0,g._)([(0,j.Cb)({json:{write:!0}})],W.prototype,"thumbnail",void 0),W=(0,g._)([(0,D.j)("esri.layers.support.FeatureTemplate")],W);const k=W},41638:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>X});var g=p(17626),b=p(79608),J=p(86810),B=p(77712),L=(p(85931),p(8314),p(90912),p(68653)),D=p(76898),I=p(99433),W=p(26141),k=p(32777);let Z=class extends((0,b.J)(J.wq)){constructor(V){super(V),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(V){const w={};for(const T of Object.keys(V))w[T]=(0,W.im)(V[T]);return w}writeDomains(V,w){const T={};for(const x of Object.keys(V)){var O;V[x]&&(T[x]=null==(O=V[x])?void 0:O.toJSON())}w.domains=T}};(0,g._)([(0,B.Cb)({json:{write:!0}})],Z.prototype,"id",void 0),(0,g._)([(0,B.Cb)({json:{write:!0}})],Z.prototype,"name",void 0),(0,g._)([(0,B.Cb)({json:{write:!0}})],Z.prototype,"domains",void 0),(0,g._)([(0,L.r)("domains")],Z.prototype,"readDomains",null),(0,g._)([(0,I.c)("domains")],Z.prototype,"writeDomains",null),(0,g._)([(0,B.Cb)({type:[k.Z],json:{write:!0}})],Z.prototype,"templates",void 0),Z=(0,g._)([(0,D.j)("esri.layers.support.FeatureType")],Z);const X=Z},36255:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>w});var Z,g=p(17626),b=p(2076),J=p(86810),B=p(77712),$=(p(85931),p(8314),p(90912)),L=p(55342),D=p(68653),I=p(76898),W=p(26141),k=p(85);const X=new b.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let V=Z=class extends J.wq{constructor(T){super(T),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(T,{description:O}){let x;try{x=JSON.parse(O)}catch(N){}return x?x.value:null}readValueType(T,{description:O}){let x;try{x=JSON.parse(O)}catch(N){}return x?X.fromJSON(x.fieldValueType):null}clone(){return new Z({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],V.prototype,"alias",void 0),(0,g._)([(0,B.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],V.prototype,"defaultValue",void 0),(0,g._)([(0,B.Cb)()],V.prototype,"description",void 0),(0,g._)([(0,D.r)("description")],V.prototype,"readDescription",null),(0,g._)([(0,B.Cb)({types:W.V5,json:{read:{reader:W.im},write:!0}})],V.prototype,"domain",void 0),(0,g._)([(0,B.Cb)({type:Boolean,json:{write:!0}})],V.prototype,"editable",void 0),(0,g._)([(0,B.Cb)({type:$.z8,json:{write:!0}})],V.prototype,"length",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],V.prototype,"name",void 0),(0,g._)([(0,B.Cb)({type:Boolean,json:{write:!0}})],V.prototype,"nullable",void 0),(0,g._)([(0,L.J)(k.v)],V.prototype,"type",void 0),(0,g._)([(0,B.Cb)()],V.prototype,"valueType",void 0),(0,g._)([(0,D.r)("valueType",["description"])],V.prototype,"readValueType",null),V=Z=(0,g._)([(0,I.j)("esri.layers.support.Field")],V);const w=V},60466:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>j});var g=p(36630);function J($){return"oid"===$.type||"esriFieldTypeOID"===$.type}function B($){return"global-id"===$.type||"esriFieldTypeGlobalID"===$.type}class j{constructor(L){if(this.fields=L,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!L)return;const D=[];for(const I of L){const W=I&&I.name;if(W){const k=C(W);this._fieldsMap.set(W,I),this._fieldsMap.set(k,I),D.push(k),"date"===($=I).type||"esriFieldTypeDate"===$.type?(this.dateFields.push(I),this._dateFieldsSet.add(I)):(0,g.H7)(I)&&(this._numericFieldsSet.add(I),this.numericFields.push(I)),J(I)||B(I)||(I.editable=null==I.editable||!!I.editable,I.nullable=null==I.nullable||!!I.nullable)}}var $;D.sort(),this.uid=D.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const L of this.fields)J(L)||B(L)||L.nullable||void 0!==(0,g.os)(L)||this._requiredFields.push(L)}return this._requiredFields}has(L){return null!=this.get(L)}get(L){return null!=L?this._fieldsMap.get(L)||this._fieldsMap.get(C(L)):void 0}isDateField(L){return this._dateFieldsSet.has(this.get(L))}isNumericField(L){return this._numericFieldsSet.has(this.get(L))}normalizeFieldName(L){const D=this.get(L);if(D)return D.name}}function C($){return $.toLowerCase().trim()}},72258:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(86810),J=p(77712),C=(p(85931),p(8314),p(90912)),$=p(76898);let D=L=class extends b.wq{constructor(W){super(W),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new L({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};(0,g._)([(0,J.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],D.prototype,"cols",void 0),(0,g._)([(0,J.Cb)({type:C.z8,json:{write:!0}})],D.prototype,"level",void 0),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],D.prototype,"levelValue",void 0),(0,g._)([(0,J.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],D.prototype,"origin",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{write:!0}})],D.prototype,"resolution",void 0),(0,g._)([(0,J.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],D.prototype,"rows",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{write:!0}})],D.prototype,"scale",void 0),D=L=(0,g._)([(0,$.j)("esri.layers.support.LOD")],D);const I=D},170:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>ce});var V,g=p(17626),b=p(65787),J=p(2076),B=p(86810),j=p(58817),C=p(23841),$=p(77712),D=(p(90912),p(68653)),I=p(76898),W=p(99433),X=(p(85931),p(8314),p(86793));let w=V=class extends B.wq{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(re,K){return K.value?(0,X.dI)(K.value):re}writeExpression(re,K,ae){null!=this.value&&(re=(0,X.dI)(this.value)),null!=re&&(K[ae]=re)}clone(){return new V({expression:this.expression,title:this.title,value:this.value})}};(0,g._)([(0,$.Cb)({type:String,json:{write:{writerEnsuresNonNull:!0}}})],w.prototype,"expression",void 0),(0,g._)([(0,D.r)("expression",["expression","value"])],w.prototype,"readExpression",null),(0,g._)([(0,W.c)("expression")],w.prototype,"writeExpression",null),(0,g._)([(0,$.Cb)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],w.prototype,"title",void 0),(0,g._)([(0,$.Cb)({json:{read:!1,write:!1}})],w.prototype,"value",void 0),w=V=(0,g._)([(0,I.j)("esri.layers.support.LabelExpressionInfo")],w);const T=w;var N,O=p(8080),x=p(65270);const M=new J.X({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function Q(re){return!re||"service"!==re.origin&&!z(re.layer)}function z(re){return"map-image"===(null==re?void 0:re.type)}function ee(re){var K,ae;return!!z(re)&&!(null==(K=re.capabilities)||null==(ae=K.exportMap)||!ae.supportsArcadeExpressionForLabeling)}let oe=N=class extends B.wq{constructor(re){super(re),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=O.Rz,this.useCodedValues=void 0,this.where=null}static evaluateWhere(re,K){const ae=function(se,de,ue){switch(de){case"=":return se==ue;case"<>":return se!=ue;case">":return se>ue;case">=":return se>=ue;case"<":return se<ue;case"<=":return se<=ue}return!1};try{if(null==re)return!0;const se=re.split(" ");if(3===se.length)return ae(K[se[0]],se[1],se[2]);if(7===se.length){const de=ae(K[se[0]],se[1],se[2]),ue=se[3],pe=ae(K[se[4]],se[5],se[6]);switch(ue){case"AND":return de&&pe;case"OR":return de||pe}}return!1}catch(se){console.log("Error.: can't parse = "+re)}}readLabelExpression(re,K){const ae=K.labelExpressionInfo;if(!ae||!ae.value&&!ae.expression)return re}writeLabelExpression(re,K,ae){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)re=(0,X.z7)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const se=(0,X.el)(this.labelExpressionInfo.expression);se&&(re="["+se+"]")}null!=re&&(K[ae]=re)}writeLabelExpressionInfo(re,K,ae,se){if(null==re&&null!=this.labelExpression&&Q(se))re=new T({expression:this.getLabelExpressionArcade()});else if(!re)return;const de=re.toJSON(se);de.expression&&(K[ae]=de)}writeMaxScale(re,K){(re||this.minScale)&&(K.maxScale=re)}writeMinScale(re,K){(re||this.maxScale)&&(K.minScale=re)}getLabelExpression(){return(0,X.hV)(this)}getLabelExpressionArcade(){return(0,X.YI)(this)}getLabelExpressionSingleField(){return(0,X.UO)(this)}hash(){return JSON.stringify(this)}clone(){return new N({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:(0,j.d9)(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:(0,j.d9)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};(0,g._)([(0,$.Cb)({type:String,json:{write:!0}})],oe.prototype,"name",void 0),(0,g._)([(0,$.Cb)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],oe.prototype,"allowOverrun",void 0),(0,g._)([(0,$.Cb)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],oe.prototype,"deconflictionStrategy",void 0),(0,g._)([(0,$.Cb)({type:String,json:{write:{overridePolicy(re,K,ae){return this.labelExpressionInfo&&"service"===(null==ae?void 0:ae.origin)&&ee(ae.layer)?{enabled:!1}:{allowNull:!0}}}}})],oe.prototype,"labelExpression",void 0),(0,g._)([(0,D.r)("labelExpression")],oe.prototype,"readLabelExpression",null),(0,g._)([(0,W.c)("labelExpression")],oe.prototype,"writeLabelExpression",null),(0,g._)([(0,$.Cb)({type:T,json:{write:{overridePolicy:(re,K,ae)=>function le(re){return Q(re)||ee(re.layer)}(ae)?{allowNull:!0}:{enabled:!1}}}})],oe.prototype,"labelExpressionInfo",void 0),(0,g._)([(0,W.c)("labelExpressionInfo")],oe.prototype,"writeLabelExpressionInfo",null),(0,g._)([(0,$.Cb)({type:M.apiValues,json:{type:M.jsonValues,read:M.read,write:M.write}})],oe.prototype,"labelPlacement",void 0),(0,g._)([(0,$.Cb)({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],oe.prototype,"labelPosition",void 0),(0,g._)([(0,$.Cb)({type:Number})],oe.prototype,"maxScale",void 0),(0,g._)([(0,W.c)("maxScale")],oe.prototype,"writeMaxScale",null),(0,g._)([(0,$.Cb)({type:Number})],oe.prototype,"minScale",void 0),(0,g._)([(0,W.c)("minScale")],oe.prototype,"writeMinScale",null),(0,g._)([(0,$.Cb)({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],oe.prototype,"repeatLabel",void 0),(0,g._)([(0,$.Cb)({type:Number,cast:C.t_,json:{write:!0,origins:{"web-scene":{write:!1}}}})],oe.prototype,"repeatLabelDistance",void 0),(0,g._)([(0,$.Cb)({types:b.yK,json:{origins:{"web-scene":{types:b.S6,write:x.vX,default:null}},write:x.vX,default:null}})],oe.prototype,"symbol",void 0),(0,g._)([(0,$.Cb)({type:Boolean,json:{write:!0}})],oe.prototype,"useCodedValues",void 0),(0,g._)([(0,$.Cb)({type:String,json:{write:!0}})],oe.prototype,"where",void 0),oe=N=(0,g._)([(0,I.j)("esri.layers.support.LabelClass")],oe);const ce=oe},2430:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(48701),J=p(86810),B=p(77712),L=(p(85931),p(8314),p(90912),p(76898));let I=D=class extends J.wq{constructor(k){super(k),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new b.Z}clone(){return new D({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],I.prototype,"floorField",void 0),(0,g._)([(0,B.Cb)({json:{read:!1,write:!1}})],I.prototype,"viewAllMode",void 0),(0,g._)([(0,B.Cb)({json:{read:!1,write:!1}})],I.prototype,"viewAllLevelIds",void 0),I=D=(0,g._)([(0,L.j)("esri.layers.support.LayerFloorInfo")],I);const W=I},2584:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>Q});var x,g=p(17626),b=p(2076),J=p(86810),B=p(62208),j=p(16730),C=p(77712),D=(p(85931),p(8314),p(90912)),I=p(68653),W=p(76898),k=p(99433),Z=p(49672),X=p(65234),V=p(65401),w=p(37053),T=p(46367),O=p(72258);const N=new b.X({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let M=x=class extends J.wq{constructor(z){super(z),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(z={}){const{resolutionFactor:ee=1,scales:le,size:oe=256,spatialReference:ce=X.Z.WebMercator,numLODs:re=24}=z;if(!(0,w.JY)(ce)){const pe=[];if(le)for(let ie=0;ie<le.length;ie++){const te=le[ie];pe.push({level:ie,scale:te,resolution:te})}else{let ie=5e-4;for(let te=re-1;te>=0;te--)pe.unshift({level:te,scale:ie,resolution:ie}),ie*=2}return new x({dpi:96,lods:pe,origin:new Z.Z(0,0,ce),size:[oe,oe],spatialReference:ce})}const K=(0,w.C5)(ce),ae=new Z.Z(z.origin?{x:z.origin.x,y:z.origin.y,spatialReference:ce}:K?{x:K.origin[0],y:K.origin[1],spatialReference:ce}:{x:0,y:0,spatialReference:ce}),de=1/(39.37*(0,j.c9)(ce)*96),ue=[];if(le)for(let pe=0;pe<le.length;pe++){const ie=le[pe];ue.push({level:pe,scale:ie,resolution:ie*de})}else{let pe=(0,w.sT)(ce)?512/oe*591657527.5917094:256/oe*591657527.591555;const ie=Math.ceil(re/ee);ue.push({level:0,scale:pe,resolution:pe*de});for(let te=1;te<ie;te++){const Ee=pe/2**ee;ue.push({level:te,scale:Ee,resolution:Ee*de}),pe=Ee}}return new x({dpi:96,lods:ue,origin:ae,size:[oe,oe],spatialReference:ce})}get isWrappable(){const{spatialReference:z,origin:ee}=this;if(z&&ee){const le=(0,w.C5)(z);return z.isWrappable&&Math.abs(le.origin[0]-ee.x)<=le.dx}return!1}readOrigin(z,ee){return Z.Z.fromJSON(_t({spatialReference:ee.spatialReference},z))}set lods(z){let ee=0,le=0;const oe=[];this._levelToLOD={},z&&(ee=-1/0,le=1/0,z.forEach(ce=>{oe.push(ce.scale),ee=ce.scale>ee?ce.scale:ee,le=ce.scale<le?ce.scale:le,this._levelToLOD[ce.level]=ce})),this._set("scales",oe),this._set("minScale",ee),this._set("maxScale",le),this._set("lods",z),this._initializeUpsampleLevels()}readSize(z,ee){return[ee.cols,ee.rows]}writeSize(z,ee){ee.cols=z[0],ee.rows=z[1]}zoomToScale(z){const ee=this.scales;if(z<=0)return ee[0];if(z>=ee.length-1)return ee[ee.length-1];{const le=Math.floor(z);return ee[le]/(ee[le]/ee[le+1])**(z-le)}}scaleToZoom(z){const ee=this.scales,le=ee.length-1;let oe=0;for(;oe<le;oe++){const ce=ee[oe],re=ee[oe+1];if(ce<=z)return oe;if(re===z)return oe+1;if(ce>z&&re<z)return oe+Math.log(ce/z)/Math.log(ce/re)}return oe}snapScale(z,ee=.95){const le=this.scaleToZoom(z);return le%Math.floor(le)>=ee?this.zoomToScale(Math.ceil(le)):this.zoomToScale(Math.floor(le))}tileAt(z,ee,le,oe){const ce=this.lodAt(z);if(!ce)return null;let re,K;if("number"==typeof ee)re=ee,K=le;else if((0,w.fS)(ee.spatialReference,this.spatialReference))re=ee.x,K=ee.y,oe=le;else{const de=(0,T.iV)(ee,this.spatialReference);if((0,B.Wi)(de))return null;re=de.x,K=de.y,oe=le}const ae=ce.resolution*this.size[0],se=ce.resolution*this.size[1];return oe||(oe={id:null,level:0,row:0,col:0,extent:(0,V.Ue)()}),oe.level=z,oe.row=Math.floor((this.origin.y-K)/se+.001),oe.col=Math.floor((re-this.origin.x)/ae+.001),this.updateTileInfo(oe),oe}updateTileInfo(z,ee=x.ExtrapolateOptions.NONE){let le=this.lodAt(z.level);if(!le&&ee===x.ExtrapolateOptions.POWER_OF_TWO){const K=this.lods[this.lods.length-1];K.level<z.level&&(le=K)}if(!le)return;const oe=z.level-le.level,ce=le.resolution*this.size[0]/2**oe,re=le.resolution*this.size[1]/2**oe;z.id=`${z.level}/${z.row}/${z.col}`,z.extent||(z.extent=(0,V.Ue)()),z.extent[0]=this.origin.x+z.col*ce,z.extent[1]=this.origin.y-(z.row+1)*re,z.extent[2]=z.extent[0]+ce,z.extent[3]=z.extent[1]+re}upsampleTile(z){const ee=this._upsampleLevels[z.level];return!(!ee||-1===ee.parentLevel||(z.level=ee.parentLevel,z.row=Math.floor(z.row/ee.factor+.001),z.col=Math.floor(z.col/ee.factor+.001),this.updateTileInfo(z),0))}getTileBounds(z,ee){const{resolution:le}=this.lodAt(ee.level),oe=le*this.size[0],ce=le*this.size[1];return z[0]=this.origin.x+ee.col*oe,z[1]=this.origin.y-(ee.row+1)*ce,z[2]=z[0]+oe,z[3]=z[1]+ce,z}lodAt(z){return this._levelToLOD&&this._levelToLOD[z]||null}clone(){return x.fromJSON(this.write({}))}getOrCreateCompatible(z,ee){if(256===this.size[0]&&256===this.size[1])return 256===z?this:null;const le=[],oe=this.lods.length;for(let ce=0;ce<oe;ce++){const re=this.lods[ce];le.push(new O.Z({level:re.level,scale:re.scale,resolution:re.resolution*ee}))}return new x({size:[z,z],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:le})}_initializeUpsampleLevels(){const z=this.lods;this._upsampleLevels=[];let ee=null;for(let le=0;le<z.length;le++){const oe=z[le];this._upsampleLevels[oe.level]={parentLevel:ee?ee.level:-1,factor:ee?ee.resolution/oe.resolution:0},ee=oe}}};var z,ee;(0,g._)([(0,C.Cb)({type:Number,json:{write:!0}})],M.prototype,"compressionQuality",void 0),(0,g._)([(0,C.Cb)({type:Number,json:{write:!0}})],M.prototype,"dpi",void 0),(0,g._)([(0,C.Cb)({type:String,json:{read:N.read,write:N.write,origins:{"web-scene":{read:!1,write:!1}}}})],M.prototype,"format",void 0),(0,g._)([(0,C.Cb)({readOnly:!0})],M.prototype,"isWrappable",null),(0,g._)([(0,C.Cb)({type:Z.Z,json:{write:!0}})],M.prototype,"origin",void 0),(0,g._)([(0,I.r)("origin")],M.prototype,"readOrigin",null),(0,g._)([(0,C.Cb)({type:[O.Z],value:null,json:{write:!0}})],M.prototype,"lods",null),(0,g._)([(0,C.Cb)({readOnly:!0})],M.prototype,"minScale",void 0),(0,g._)([(0,C.Cb)({readOnly:!0})],M.prototype,"maxScale",void 0),(0,g._)([(0,C.Cb)({readOnly:!0})],M.prototype,"scales",void 0),(0,g._)([(0,C.Cb)({cast:z=>Array.isArray(z)?z:"number"==typeof z?[z,z]:[256,256]})],M.prototype,"size",void 0),(0,g._)([(0,I.r)("size",["rows","cols"])],M.prototype,"readSize",null),(0,g._)([(0,k.c)("size",{cols:{type:D.z8},rows:{type:D.z8}})],M.prototype,"writeSize",null),(0,g._)([(0,C.Cb)({type:X.Z,json:{write:!0}})],M.prototype,"spatialReference",void 0),M=x=(0,g._)([(0,W.j)("esri.layers.support.TileInfo")],M),(ee=(z=M||(M={})).ExtrapolateOptions||(z.ExtrapolateOptions={}))[ee.NONE=0]="NONE",ee[ee.POWER_OF_TWO=1]="POWER_OF_TWO";const Q=M},62708:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>N});var X,g=p(17626),b=p(97478),J=p(20849),B=p(86810),j=p(58817),C=p(62208),$=p(77712),D=(p(90912),p(68653)),I=p(76898),W=p(99433);p(85931),p(8314);let V=X=class extends B.wq{constructor(M){super(M),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(M,Q){return void 0!==Q.respectsDaylightSaving?Q.respectsDaylightSaving:void 0!==Q.respectDaylightSaving&&Q.respectDaylightSaving}clone(){const{respectsDaylightSaving:M,timezone:Q}=this;return new X({respectsDaylightSaving:M,timezone:Q})}};(0,g._)([(0,$.Cb)({type:Boolean,json:{write:!0}})],V.prototype,"respectsDaylightSaving",void 0),(0,g._)([(0,D.r)("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],V.prototype,"readRespectsDaylightSaving",null),(0,g._)([(0,$.Cb)({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],V.prototype,"timezone",void 0),V=X=(0,g._)([(0,I.j)("esri.layers.support.TimeReference")],V);const w=V;var O,T=p(58926);let x=O=class extends B.wq{constructor(M){super(M),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(M,Q){if(!Q.timeExtent||!Array.isArray(Q.timeExtent)||2!==Q.timeExtent.length)return null;const z=new Date(Q.timeExtent[0]),ee=new Date(Q.timeExtent[1]);return new b.Z({start:z,end:ee})}writeFullTimeExtent(M,Q){Q.timeExtent=M&&(0,C.pC)(M.start)&&(0,C.pC)(M.end)?[M.start.getTime(),M.end.getTime()]:null}readInterval(M,Q){return Q.timeInterval&&Q.timeIntervalUnits?new J.Z({value:Q.timeInterval,unit:T.v.fromJSON(Q.timeIntervalUnits)}):Q.defaultTimeInterval&&Q.defaultTimeIntervalUnits?new J.Z({value:Q.defaultTimeInterval,unit:T.v.fromJSON(Q.defaultTimeIntervalUnits)}):null}writeInterval(M,Q){if(M){const z=M.toJSON();Q.timeInterval=z.value,Q.timeIntervalUnits=z.unit}else Q.timeInterval=null,Q.timeIntervalUnits=null}clone(){const{cumulative:M,endField:Q,hasLiveData:z,interval:ee,startField:le,timeReference:oe,fullTimeExtent:ce,trackIdField:re,useTime:K}=this;return new O({cumulative:M,endField:Q,hasLiveData:z,interval:ee,startField:le,timeReference:(0,j.d9)(oe),fullTimeExtent:(0,j.d9)(ce),trackIdField:re,useTime:K})}};(0,g._)([(0,$.Cb)({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],x.prototype,"cumulative",void 0),(0,g._)([(0,$.Cb)({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],x.prototype,"endField",void 0),(0,g._)([(0,$.Cb)({type:b.Z,json:{write:{enabled:!0,allowNull:!0}}})],x.prototype,"fullTimeExtent",void 0),(0,g._)([(0,D.r)("fullTimeExtent",["timeExtent"])],x.prototype,"readFullTimeExtent",null),(0,g._)([(0,W.c)("fullTimeExtent")],x.prototype,"writeFullTimeExtent",null),(0,g._)([(0,$.Cb)({type:Boolean,json:{write:!0}})],x.prototype,"hasLiveData",void 0),(0,g._)([(0,$.Cb)({type:J.Z,json:{write:{enabled:!0,allowNull:!0}}})],x.prototype,"interval",void 0),(0,g._)([(0,D.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],x.prototype,"readInterval",null),(0,g._)([(0,W.c)("interval")],x.prototype,"writeInterval",null),(0,g._)([(0,$.Cb)({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],x.prototype,"startField",void 0),(0,g._)([(0,$.Cb)({type:w,json:{write:{enabled:!0,allowNull:!0}}})],x.prototype,"timeReference",void 0),(0,g._)([(0,$.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],x.prototype,"trackIdField",void 0),(0,g._)([(0,$.Cb)({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],x.prototype,"useTime",void 0),x=O=(0,g._)([(0,I.j)("esri.layers.support.TimeInfo")],x);const N=x},38305:(He,ve,p)=>{"use strict";p.d(ve,{ld:()=>k,B5:()=>D,M8:()=>X,h3:()=>N,G:()=>x,Qc:()=>I,DR:()=>W,Nm:()=>w,XG:()=>T,a7:()=>Z,wH:()=>O});var g=p(62208),b=p(21726),J=p(29840);const B={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},j=Object.values(B),C=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${j.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),$=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${j.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),L=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function D(Q){return!!C.test(Q)}function I(Q){const z=(0,b.mN)(Q),ee=z.path.match(C)||z.path.match($);if(!ee)return null;const[,le,oe,ce,re]=ee,K=oe.indexOf("/");return{title:k(-1!==K?oe.slice(K+1):oe),serverType:B[ce.toLowerCase()],sublayer:null!=re&&""!==re?parseInt(re,10):null,url:{path:le}}}function W(Q){const z=(0,b.mN)(Q).path.match(L);return z?{serviceUrl:z[1],sublayerId:Number(z[2])}:null}function k(Q){return(Q=Q.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+Q.slice(1)}function Z(Q,z){const ee=[];if(Q){const le=I(Q);(0,g.pC)(le)&&le.title&&ee.push(le.title)}if(z){const le=k(z);ee.push(le)}if(2===ee.length){if(-1!==ee[0].toLowerCase().indexOf(ee[1].toLowerCase()))return ee[0];if(-1!==ee[1].toLowerCase().indexOf(ee[0].toLowerCase()))return ee[1]}return ee.join(" - ")}function X(Q){if(!Q)return!1;const ce=-1!==(Q=Q.toLowerCase()).indexOf(".arcgis.com/"),re=-1!==Q.indexOf("//services")||-1!==Q.indexOf("//tiles")||-1!==Q.indexOf("//features");return ce&&re}function w(Q,z){return Q&&(0,b.Qj)((0,b.Hu)(Q,z))}function T(Q){let{url:z}=Q;if(!z)return{url:z};z=(0,b.Hu)(z,Q.logger);const ee=(0,b.mN)(z),le=I(ee.path);let oe;if((0,g.pC)(le))null!=le.sublayer&&null==Q.layer.layerId&&(oe=le.sublayer),z=le.url.path;else if(Q.nonStandardUrlAllowed){const ce=W(ee.path);(0,g.pC)(ce)&&(z=ce.serviceUrl,oe=ce.sublayerId)}return{url:(0,b.Qj)(z),layerId:oe}}function O(Q,z,ee,le,oe){(0,J.w)(z,le,"url",oe),le.url&&null!=Q.layerId&&(le.url=(0,b.v_)(le.url,ee,Q.layerId.toString()))}function x(Q){if(!Q)return!1;const z=Q.toLowerCase(),ee=-1!==z.indexOf("/services/"),le=-1!==z.indexOf("/mapserver/wmsserver"),oe=-1!==z.indexOf("/imageserver/wmsserver"),ce=-1!==z.indexOf("/wmsserver");return ee&&(le||oe||ce)}function N(Q){if(!Q)return!1;const z=new b.R9((0,b.hF)(Q)).authority.toLowerCase();return"server.arcgisonline.com"===z||"services.arcgisonline.com"===z}},13812:(He,ve,p)=>{"use strict";p.d(ve,{qG:()=>oe,PV:()=>Q,id:()=>re,iR:()=>x,rn:()=>M,u1:()=>ae,rO:()=>K,Oh:()=>ee,bT:()=>le,C_:()=>O,Lx:()=>z,vg:()=>ce,YI:()=>T,HQ:()=>N});var g=p(97478),b=p(2004),J=p(65234),B=p(29840),j=p(62208),$=(p(10699),p(28170)),V=p(26540),w=p(92236);const T={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},O={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(se,de)=>!de.disablePopup},write:{enabled:!0,writer(se,de,ue){de[ue]=!se}}}},x={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},N={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:B.w}}},M={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},Q={value:null,type:V.Z,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function z(se){return{type:se,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const ee={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},le=Sr(_t({},ee),{json:Sr(_t({},ee.json),{origins:{"web-document":Sr(_t({},ee.json.origins["web-document"]),{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(se,de,ue)=>ue&&"service"!==ue.origin||!de.drawingInfo||void 0===de.drawingInfo.transparency?de.layerDefinition&&de.layerDefinition.drawingInfo&&void 0!==de.layerDefinition.drawingInfo.transparency?(0,w.b)(de.layerDefinition.drawingInfo.transparency):void 0:(0,w.b)(de.drawingInfo.transparency)}})}),oe={type:g.Z,readOnly:!0,get(){var se,de;if(null==(se=this.layer)||!se.timeInfo)return null;const{datesInUnknownTimezone:ue,timeOffset:pe,useViewTime:ie}=this.layer,te=null==(de=this.view)?void 0:de.timeExtent;let Ee=this.layer.timeExtent;ue&&(Ee=function X(se){if(!se)return se;const{start:de,end:ue}=se;return new g.Z({start:(0,j.pC)(de)?(0,$.Nm)(de,de.getTimezoneOffset(),"minutes"):de,end:(0,j.pC)(ue)?(0,$.Nm)(ue,ue.getTimezoneOffset(),"minutes"):ue})}(Ee));let fe=ie?te&&Ee?te.intersection(Ee):te||Ee:Ee;if(!fe||fe.isEmpty||fe.isAllTime)return fe;pe&&(fe=fe.offset(-pe.value,pe.unit)),ue&&(fe=function Z(se){if(!se)return se;const{start:de,end:ue}=se;return new g.Z({start:(0,j.pC)(de)?(0,$.Nm)(de,-de.getTimezoneOffset(),"minutes"):de,end:(0,j.pC)(ue)?(0,$.Nm)(ue,-ue.getTimezoneOffset(),"minutes"):ue})}(fe));const be=this._get("timeExtent");return fe.equals(be)?be:fe}},ce={type:b.Z,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(se,de)=>{const ue=b.Z.fromJSON(se);return null!=de.spatialReference&&"object"==typeof de.spatialReference&&(ue.spatialReference=J.Z.fromJSON(de.spatialReference)),ue}}}},read:!1}},re={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},K={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},ae={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}}},26141:(He,ve,p)=>{"use strict";p.d(ve,{im:()=>K,V5:()=>re}),p(8314);var I,b=p(17626),J=p(58817),B=p(77712),C=(p(90912),p(55342)),$=p(76898),L=p(86810);p(85931);let W=I=class extends L.wq{constructor(ae){super(ae),this.name=null,this.code=null}clone(){return new I({name:this.name,code:this.code})}};(0,b._)([(0,B.Cb)({type:String,json:{write:!0}})],W.prototype,"name",void 0),(0,b._)([(0,B.Cb)({type:[String,Number],json:{write:!0}})],W.prototype,"code",void 0),W=I=(0,b._)([(0,$.j)("esri.layers.support.CodedValue")],W);const k=W,X=new(p(2076).X)({inherited:"inherited",codedValue:"coded-value",range:"range"});let V=class extends L.wq{constructor(ae){super(ae),this.name=null,this.type=null}};(0,b._)([(0,B.Cb)({type:String,json:{write:!0}})],V.prototype,"name",void 0),(0,b._)([(0,C.J)(X)],V.prototype,"type",void 0),V=(0,b._)([(0,$.j)("esri.layers.support.Domain")],V);const w=V;var T;let O=T=class extends w{constructor(ae){super(ae),this.codedValues=null,this.type="coded-value"}getName(ae){let se=null;if(this.codedValues){const de=String(ae);this.codedValues.some(ue=>(String(ue.code)===de&&(se=ue.name),!!se))}return se}clone(){return new T({codedValues:(0,J.d9)(this.codedValues),name:this.name})}};(0,b._)([(0,B.Cb)({type:[k],json:{write:!0}})],O.prototype,"codedValues",void 0),(0,b._)([(0,C.J)({codedValue:"coded-value"})],O.prototype,"type",void 0),O=T=(0,b._)([(0,$.j)("esri.layers.support.CodedValueDomain")],O);const x=O;var Q;p(63290),p(82255);let z=Q=class extends w{constructor(ae){super(ae),this.type="inherited"}clone(){return new Q}};(0,b._)([(0,C.J)({inherited:"inherited"})],z.prototype,"type",void 0),z=Q=(0,b._)([(0,$.j)("esri.layers.support.InheritedDomain")],z);const ee=z;var le;let oe=le=class extends w{constructor(ae){super(ae),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new le({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,b._)([(0,B.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(ae,se)=>se.range&&se.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(ae,se,de){se[de]=[this.minValue||0,ae]}}}})],oe.prototype,"maxValue",void 0),(0,b._)([(0,B.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:(ae,se)=>se.range&&se.range[0]},write:{target:"range",writer(ae,se,de){se[de]=[ae,this.maxValue||0]}}}})],oe.prototype,"minValue",void 0),(0,b._)([(0,C.J)({range:"range"})],oe.prototype,"type",void 0),oe=le=(0,b._)([(0,$.j)("esri.layers.support.RangeDomain")],oe);const ce=oe,re={key:"type",base:w,typeMap:{range:oe,"coded-value":x,inherited:ee}};function K(ae){if(!ae||!ae.type)return null;switch(ae.type){case"range":return ce.fromJSON(ae);case"codedValue":return x.fromJSON(ae);case"inherited":return ee.fromJSON(ae)}return null}},2777:(He,ve,p)=>{"use strict";p.d(ve,{d:()=>le});var Z,g=p(83989),b=p(17626),J=p(73281),B=p(65787),j=p(86810),C=p(58817),$=p(23841),L=p(77712),I=(p(90912),p(76898));p(85931),p(8314);let X=Z=class extends j.wq{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new Z({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],X.prototype,"statisticType",void 0),(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],X.prototype,"onStatisticField",void 0),(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],X.prototype,"onStatisticValueExpression",void 0),X=Z=(0,b._)([(0,I.j)("esri.layers.support.OutStatistic")],X);const V=X;var w;let T=w=class extends j.wq{constructor(){super(...arguments),this.name=null}clone(){return new w({name:this.name,outStatistic:this.outStatistic.clone()})}};(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],T.prototype,"name",void 0),(0,b._)([(0,L.Cb)({type:V,json:{write:!0}})],T.prototype,"outStatistic",void 0),T=w=(0,b._)([(0,I.j)("esri.layers.support.AggregateField")],T);const O=T;var M,x=p(13812),N=p(170);let Q=M=class extends j.wq{constructor(oe){super(oe),this.type="cluster",this.clusterRadius=(0,$.t_)("80px"),this.clusterMinSize=(0,$.t_)("12px"),this.clusterMaxSize=(0,$.t_)("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new M({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,C.d9)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,C.d9)(this.fields),popupEnabled:this.popupEnabled,popupTemplate:(0,C.d9)(this.popupTemplate)})}};(0,b._)([(0,L.Cb)({type:["cluster"],readOnly:!0,json:{write:!0}})],Q.prototype,"type",void 0),(0,b._)([(0,L.Cb)({type:Number,cast:oe=>"auto"===oe?oe:(0,$.t_)(oe),json:{write:!0}})],Q.prototype,"clusterRadius",void 0),(0,b._)([(0,L.Cb)({type:Number,cast:$.t_,json:{write:!0}})],Q.prototype,"clusterMinSize",void 0),(0,b._)([(0,L.Cb)({type:Number,cast:$.t_,json:{write:!0}})],Q.prototype,"clusterMaxSize",void 0),(0,b._)([(0,L.Cb)(x.C_)],Q.prototype,"popupEnabled",void 0),(0,b._)([(0,L.Cb)({type:J.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Q.prototype,"popupTemplate",void 0),(0,b._)([(0,L.Cb)({types:B.AH})],Q.prototype,"symbol",void 0),(0,b._)([(0,L.Cb)({type:[N.Z],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Q.prototype,"labelingInfo",void 0),(0,b._)([(0,L.Cb)(x.iR)],Q.prototype,"labelsVisible",void 0),(0,b._)([(0,L.Cb)({type:[O],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Q.prototype,"fields",void 0),Q=M=(0,b._)([(0,I.j)("esri.layers.support.FeatureReductionCluster")],Q);const z=Q;var ee=p(47058);const le={types:{key:"type",base:g.Z,typeMap:{selection:ee.Z,cluster:z}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:{key:"type",base:g.Z,typeMap:{selection:z}}},"web-scene":{types:{key:"type",base:g.Z,typeMap:{selection:ee.Z}}}}}}},55911:(He,ve,p)=>{"use strict";p.d(ve,{v:()=>C});var g=p(63290),b=p(36255),J=p(60466),B=p(36630);const j=g.Z.getLogger("esri.layers.support.fieldProperties");function C(){return{fields:{type:[b.Z],value:null},fieldsIndex:{readOnly:!0,get(){return new J.Z(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function($){this._userOutFields=$,this.notifyChange("outFields")},get:function(){const $=this._userOutFields;if(!$||!$.length)return null;if($.includes("*"))return["*"];if(!this.fields)return $;for(const L of $)this.fieldsIndex.has(L)||j.error("field-attributes-layer:invalid-field",`Invalid field ${L} found in outFields`,{layer:this,outFields:$});return(0,B.Q0)(this.fieldsIndex,$)}}}}},85:(He,ve,p)=>{"use strict";p.d(ve,{v:()=>b});const b=new(p(2076).X)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})},36630:(He,ve,p)=>{"use strict";p.d(ve,{io:()=>M,vl:()=>ae,ZV:()=>pe,AB:()=>O,gd:()=>T,Ll:()=>te,Mu:()=>xe,Qj:()=>fe,R9:()=>Gt,Q0:()=>w,YN:()=>k,UF:()=>X,O5:()=>le,CH:()=>Me,os:()=>Ie,H7:()=>mt,qN:()=>Kt,Pz:()=>er,Lk:()=>x,Qc:()=>vr,vP:()=>Vt});var j,Ze,g=p(15861),b=p(26584),J=p(62208),B=p(94113);(Ze=j||(j={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",Ze.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";var D=p(46679);const I=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],W=["field","normalizationField"];function k(Ze,ot){if(null!=Ze&&null!=ot)for(const Pe of Array.isArray(Ze)?Ze:[Ze])if(Z(I,Pe,ot),"visualVariables"in Pe&&Pe.visualVariables)for(const Ge of Pe.visualVariables)Z(W,Ge,ot)}function Z(Ze,ot,Pe){if(Ze)for(const Ge of Ze){const vt=(0,B.hS)(Ge,ot),zt=vt&&"function"!=typeof vt&&Pe.get(vt);zt&&(0,B.RB)(Ge,zt.name,ot)}}function X(Ze,ot){if(null!=Ze&&null!=ot&&ot.fields.length)if("startField"in Ze){const Pe=ot.get(Ze.startField),Ge=ot.get(Ze.endField);Ze.startField=Pe&&Pe.name||null,Ze.endField=Ge&&Ge.name||null}else{const Pe=ot.get(Ze.startTimeField),Ge=ot.get(Ze.endTimeField);Ze.startTimeField=Pe&&Pe.name||null,Ze.endTimeField=Ge&&Ge.name||null}}const V=new Set;function w(Ze,ot){return Ze&&ot?(V.clear(),T(V,Ze,ot),Array.from(V).sort()):[]}function T(Ze,ot,Pe){var Ge;if(Pe)if(null!=ot&&null!=(Ge=ot.fields)&&Ge.length)if(Pe.includes("*"))for(const{name:vt}of ot.fields)Ze.add(vt);else for(const vt of Pe)O(Ze,ot,vt);else{if(Pe.includes("*"))return Ze.clear(),void Ze.add("*");for(const vt of Pe)Ze.add(vt)}}function O(Ze,ot,Pe){if("string"==typeof Pe)if(ot){const Ge=ot.get(Pe);Ge&&Ze.add(Ge.name)}else Ze.add(Pe)}function x(Ze,ot){return(0,J.Wi)(ot)||(0,J.Wi)(Ze)?[]:ot.includes("*")?Ze.fields.map(Pe=>Pe.name):ot}function M(Ze,ot,Pe){return Q.apply(this,arguments)}function Q(){return Q=(0,g.Z)(function*(Ze,ot,Pe){var Ge;if(!Pe)return;const{arcadeUtils:vt}=yield(0,D.LC)(),zt=vt.extractFieldNames(Pe,null==ot||null==(Ge=ot.fields)?void 0:Ge.map(Yt=>Yt.name));for(const Yt of zt)O(Ze,ot,Yt)}),Q.apply(this,arguments)}function z(Ze,ot,Pe){return ee.apply(this,arguments)}function ee(){return ee=(0,g.Z)(function*(Ze,ot,Pe){if(Pe&&"1=1"!==Pe){const Ge=(yield p.e(410).then(p.bind(p,10410))).WhereClause.create(Pe,ot);if(!Ge.isStandardized)throw new b.Z("fieldUtils:collectFilterFields","Where clause is not standardized");T(Ze,ot,Ge.fieldNames)}}),ee.apply(this,arguments)}function le({displayField:Ze,fields:ot}){return Ze||(ot&&ot.length?ce(ot,"name-or-title")||ce(ot,"unique-identifier")||ce(ot,"type-or-category")||function oe(Ze){for(const ot of Ze){if(!ot||!ot.name)continue;const Pe=ot.name.toLowerCase();if(Pe.indexOf("name")>-1||Pe.indexOf("title")>-1)return ot.name}return null}(ot):null)}function ce(Ze,ot){for(const Pe of Ze)if(Pe&&Pe.valueType&&Pe.valueType===ot)return Pe.name;return null}function ae(Ze,ot){return se.apply(this,arguments)}function se(){return se=(0,g.Z)(function*(Ze,ot){if(!ot)return;const Pe=(0,B.hS)("elevationInfo.featureExpressionInfo",ot);return Pe?Pe.collectRequiredFields(Ze,ot.fieldsIndex):void 0}),se.apply(this,arguments)}function de(Ze,ot,Pe){return ue.apply(this,arguments)}function ue(){return ue=(0,g.Z)(function*(Ze,ot,Pe){Pe.outStatistic.onStatisticValueExpression?M(Ze,ot,Pe.outStatistic.onStatisticValueExpression):Ze.add(Pe.outStatistic.onStatisticField)}),ue.apply(this,arguments)}function pe(Ze,ot,Pe){return ie.apply(this,arguments)}function ie(){return ie=(0,g.Z)(function*(Ze,ot,Pe){var Ge,vt;if(!ot||!Pe||"cluster"!==Pe.type)return;const zt=[];if(null!=(Ge=Pe.popupTemplate)&&Ge.expressionInfos&&zt.push(...Pe.popupTemplate.expressionInfos.map(Yt=>M(Ze,ot.fieldsIndex,Yt.expression))),Array.isArray(null==(vt=Pe.popupTemplate)?void 0:vt.content)){const Yt=Pe.popupTemplate.content;for(const et of Yt)"expression"===et.type&&et.expressionInfo&&zt.push(M(Ze,ot.fieldsIndex,et.expressionInfo.expression))}Pe.fields&&zt.push(...Pe.fields.map(Yt=>de(Ze,ot.fieldsIndex,Yt))),yield Promise.all(zt)}),ie.apply(this,arguments)}function te(Ze,ot,Pe){return Ee.apply(this,arguments)}function Ee(){return Ee=(0,g.Z)(function*(Ze,ot,Pe){ot&&(ot.timeInfo&&(0,J.pC)(Pe)&&Pe.timeExtent&&T(Ze,ot.fieldsIndex,[ot.timeInfo.startField,ot.timeInfo.endField]),ot.floorInfo&&T(Ze,ot.fieldsIndex,[ot.floorInfo.floorField]),(0,J.pC)(Pe)&&(0,J.pC)(Pe.where)&&(yield z(Ze,ot.fieldsIndex,Pe.where)))}),Ee.apply(this,arguments)}function fe(Ze,ot,Pe){return be.apply(this,arguments)}function be(){return be=(0,g.Z)(function*(Ze,ot,Pe){ot&&Pe&&(yield Promise.all(Pe.map(Ge=>ye(Ze,ot,Ge))))}),be.apply(this,arguments)}function ye(Ze,ot,Pe){return Ke.apply(this,arguments)}function Ke(){return Ke=(0,g.Z)(function*(Ze,ot,Pe){ot&&Pe&&(Pe.valueExpression?yield M(Ze,ot.fieldsIndex,Pe.valueExpression):Pe.field&&O(Ze,ot.fieldsIndex,Pe.field))}),Ke.apply(this,arguments)}function Me(Ze){if(!Ze)return[];const ot="editFieldsInfo"in Ze&&Ze.editFieldsInfo;return ot?w(Ze.fieldsIndex,[ot&&ot.creatorField,ot&&ot.creationDateField,ot&&ot.editorField,ot&&ot.editDateField]):[]}function xe(Ze,ot){return Be.apply(this,arguments)}function Be(){return Be=(0,g.Z)(function*(Ze,ot){const{labelingInfo:Pe,fieldsIndex:Ge}=ot;Pe&&Pe.length&&(yield Promise.all(Pe.map(vt=>Y(Ze,Ge,vt))))}),Be.apply(this,arguments)}function Y(Ze,ot,Pe){return me.apply(this,arguments)}function me(){return me=(0,g.Z)(function*(Ze,ot,Pe){if(!Pe)return;const Ge=Pe.getLabelExpression(),vt=Pe.where;if("arcade"===Ge.type)yield M(Ze,ot,Ge.expression);else{const zt=Ge.expression.match(/{[^}]*}/g);zt&&zt.forEach(Yt=>{O(Ze,ot,Yt.slice(1,-1))})}yield z(Ze,ot,vt)}),me.apply(this,arguments)}function Ie(Ze){const ot=Ze.defaultValue;return void 0!==ot&&We(Ze,ot)?ot:Ze.nullable?null:void 0}function $e(Ze){return"number"==typeof Ze&&!isNaN(Ze)&&isFinite(Ze)}function rt(Ze){return null===Ze||$e(Ze)}const Qe="isInteger"in Number?Number.isInteger:Ze=>"number"==typeof Ze&&isFinite(Ze)&&Math.floor(Ze)===Ze;function Xe(Ze){return null===Ze||Qe(Ze)}function qe(Ze){return null!=Ze&&"string"==typeof Ze}function ke(Ze){return null===Ze||qe(Ze)}function dt(){return!0}function We(Ze,ot){let Pe;switch(Ze.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":Pe=Ze.nullable?Xe:Qe;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":Pe=Ze.nullable?rt:$e;break;case"string":case"esriFieldTypeString":Pe=Ze.nullable?ke:qe;break;default:Pe=dt}return 1===arguments.length?Pe:Pe(ot)}const ht=new Set(["integer","small-integer","single","double","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function mt(Ze){return null!=Ze&&ht.has(Ze.type)}function Kt(Ze){return null!=Ze&&("string"===Ze.type||"esriFieldTypeString"===Ze.type)}var qt,gr;function er(Ze){return null==Ze||"number"==typeof Ze&&isNaN(Ze)?null:Ze}function vr(Ze,ot){return Ze.nullable&&null===ot?null:mt(Ze)&&!function pr(Ze,ot){const Pe="string"==typeof Ze?st(Ze):Ze;return!!Pe&&(Pe.isInteger?Qe(ot)&&ot>=Pe.min&&ot<=Pe.max:ot>=Pe.min&&ot<=Pe.max)}(Ze.type,Number(ot))?qt.OUT_OF_RANGE:We(Ze,ot)?Ze.domain?function $(Ze,ot){switch(Ze.type){case"range":{const Ge="range"in Ze?Ze.range[1]:Ze.maxValue;if(+ot<("range"in Ze?Ze.range[0]:Ze.minValue)||+ot>Ge)return j.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==Ze.codedValues||Ze.codedValues.every(Pe=>null==Pe||Pe.code!==ot))return j.INVALID_CODED_VALUE}return null}(Ze.domain,ot):null:gr.INVALID_TYPE}function st(Ze){switch(Ze){case"esriFieldTypeSmallInteger":case"small-integer":return St;case"esriFieldTypeInteger":case"integer":return Lt;case"esriFieldTypeSingle":case"single":return Ft;case"esriFieldTypeDouble":case"double":return Dt}}(function(Ze){Ze.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(qt||(qt={})),function(Ze){Ze.INVALID_TYPE="type-validation-error::invalid-type"}(gr||(gr={}));const St={min:-32768,max:32767,isInteger:!0},Lt={min:-2147483648,max:2147483647,isInteger:!0},Ft={min:-34e37,max:12e37,isInteger:!1},Dt={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Vt(Ze,ot,Pe){switch(Ze){case j.INVALID_CODED_VALUE:return`Value ${Pe} is not in the coded domain - field: ${ot.name}, domain: ${JSON.stringify(ot.domain)}`;case j.VALUE_OUT_OF_RANGE:return`Value ${Pe} is out of the range of valid values - field: ${ot.name}, domain: ${JSON.stringify(ot.domain)}`;case gr.INVALID_TYPE:return`Value ${Pe} is not a valid value for the field type - field: ${ot.name}, type: ${ot.type}, nullable: ${ot.nullable}`;case qt.OUT_OF_RANGE:{const{min:Ge,max:vt}=st(ot.type);return`Value ${Pe} is out of range for the number type - field: ${ot.name}, type: ${ot.type}, value range is ${Ge} to ${vt}`}}}function Gt(Ze,ot){return!function Qt(Ze,ot,Pe){if(!ot||!ot.attributes||!Ze){if((0,J.pC)(Pe))for(const zt of Ze)Pe.add(zt);return!0}const Ge=ot.attributes;let vt=!1;for(const zt of Ze)if(!(zt in Ge)){if(vt=!0,!(0,J.pC)(Pe))break;Pe.add(zt)}return vt}(Ze,ot,null)}},86793:(He,ve,p)=>{"use strict";p.d(ve,{dI:()=>w,hV:()=>Z,YI:()=>X,UO:()=>V,el:()=>Q,z7:()=>k});var g=p(77275);const b="__begin__",J="__end__",B=new RegExp(b,"ig"),j=new RegExp(J,"ig"),C=new RegExp("^"+b,"i"),$=new RegExp(J+"$","i");function k(z){return z.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function Z(z){const ee={expression:"",type:"none"};return z.labelExpressionInfo?z.labelExpressionInfo.value?(ee.expression=z.labelExpressionInfo.value,ee.type="conventional"):z.labelExpressionInfo.expression&&(ee.expression=z.labelExpressionInfo.expression,ee.type="arcade"):null!=z.labelExpression&&(ee.expression=function W(z){return z.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}(z.labelExpression),ee.type="conventional"),ee}function X(z){const ee=Z(z);if(!ee)return null;switch(ee.type){case"conventional":return w(ee.expression);case"arcade":return ee.expression}return null}function V(z){const ee=Z(z);if(!ee)return null;switch(ee.type){case"conventional":return function O(z){const ee=z.match(T);return ee&&ee[1].trim()||null}(ee.expression);case"arcade":return Q(ee.expression)}return null}function w(z){let ee;return z?(ee=(0,g.gx)(z,le=>b+'$feature["'+le+'"]'+J),ee=C.test(ee)?ee.replace(C,""):'"'+ee,ee=$.test(ee)?ee.replace($,""):ee+'"',ee=ee.replace(B,'" + ').replace(j,' + "')):ee='""',ee}const T=/^\s*\{([^}]+)\}\s*$/i,x=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,N=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,M=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function Q(z){if(!z)return null;let ee=x.exec(z)||N.exec(z);return ee?ee[1]||ee[3]:(ee=M.exec(z),ee?ee[2]:null)}},62667:(He,ve,p)=>{"use strict";p.d(ve,{r:()=>J});var g=p(170);const b=/\[([^\[\]]+)\]/gi;function J(j,C,$){return j?j.map(L=>{const D=new g.Z;if(D.read(L,$),D.labelExpression){const I=C.fields||C.layerDefinition&&C.layerDefinition.fields||this.fields;D.labelExpression=D.labelExpression.replace(b,(W,k)=>`[${function B(j,C){if(!C)return j;const $=j.toLowerCase();for(let L=0;L<C.length;L++){const D=C[L].name;if(D.toLowerCase()===$)return D}return j}(k,I)}]`)}return D}):null}},15283:(He,ve,p)=>{"use strict";p.d(ve,{n:()=>ue});var O,g=p(17626),b=p(2076),J=p(86810),B=p(77712),$=(p(85931),p(8314),p(66656)),L=p(55342),D=p(68653),I=p(76898),W=p(90912),k=p(383),Z=p(36255),X=p(48370),w=(p(29132),p(65234)),T=p(71774);let x=O=class extends J.wq{constructor(pe){super(pe),this.type="query-table"}clone(){var pe;const{workspaceId:ie,query:te,oidFields:Ee,spatialReference:fe,geometryType:be}=this,ye={workspaceId:ie,query:te,oidFields:Ee,spatialReference:null!=(pe=null==fe?void 0:fe.clone())?pe:void 0,geometryType:be};return new O(ye)}};var N;(0,g._)([(0,L.J)({queryTable:"query-table"})],x.prototype,"type",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],x.prototype,"workspaceId",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],x.prototype,"query",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],x.prototype,"oidFields",void 0),(0,g._)([(0,B.Cb)({type:w.Z,json:{write:!0}})],x.prototype,"spatialReference",void 0),(0,g._)([(0,L.J)(T.Mk)],x.prototype,"geometryType",void 0),x=O=(0,g._)([(0,I.j)("esri.layers.support.source.QueryTableDataSource")],x);let M=N=class extends J.wq{constructor(pe){super(pe),this.type="raster"}clone(){const{workspaceId:pe,dataSourceName:ie}=this;return new N({workspaceId:pe,dataSourceName:ie})}};var Q;(0,g._)([(0,L.J)({raster:"raster"})],M.prototype,"type",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],M.prototype,"dataSourceName",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],M.prototype,"workspaceId",void 0),M=N=(0,g._)([(0,I.j)("esri.layers.support.source.RasterDataSource")],M);let z=Q=class extends J.wq{constructor(pe){super(pe),this.type="table"}clone(){const{workspaceId:pe,gdbVersion:ie,dataSourceName:te}=this;return new Q({workspaceId:pe,gdbVersion:ie,dataSourceName:te})}};var ee,le;(0,g._)([(0,L.J)({table:"table"})],z.prototype,"type",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],z.prototype,"workspaceId",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],z.prototype,"gdbVersion",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],z.prototype,"dataSourceName",void 0),z=Q=(0,g._)([(0,I.j)("esri.layers.support.source.TableDataSource")],z);const oe=(0,b.w)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let ce=ee=class extends J.wq{constructor(pe){super(pe),this.type="join-table"}readLeftTableSource(pe,ie,te){return K()(pe,ie,te)}castLeftTableSource(pe){return(0,W.N7)(se(),pe)}readRightTableSource(pe,ie,te){return K()(pe,ie,te)}castRightTableSource(pe){return(0,W.N7)(se(),pe)}clone(){var pe,ie;const{leftTableKey:te,rightTableKey:Ee,leftTableSource:fe,rightTableSource:be,joinType:ye}=this,Ke={leftTableKey:te,rightTableKey:Ee,leftTableSource:null!=(pe=null==fe?void 0:fe.clone())?pe:void 0,rightTableSource:null!=(ie=null==be?void 0:be.clone())?ie:void 0,joinType:ye};return new ee(Ke)}};(0,g._)([(0,L.J)({joinTable:"join-table"})],ce.prototype,"type",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],ce.prototype,"leftTableKey",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],ce.prototype,"rightTableKey",void 0),(0,g._)([(0,B.Cb)({json:{write:!0}})],ce.prototype,"leftTableSource",void 0),(0,g._)([(0,D.r)("leftTableSource")],ce.prototype,"readLeftTableSource",null),(0,g._)([(0,$.p)("leftTableSource")],ce.prototype,"castLeftTableSource",null),(0,g._)([(0,B.Cb)({json:{write:!0}})],ce.prototype,"rightTableSource",void 0),(0,g._)([(0,D.r)("rightTableSource")],ce.prototype,"readRightTableSource",null),(0,g._)([(0,$.p)("rightTableSource")],ce.prototype,"castRightTableSource",null),(0,g._)([(0,L.J)(oe)],ce.prototype,"joinType",void 0),ce=ee=(0,g._)([(0,I.j)("esri.layers.support.source.JoinTableDataSource")],ce);let re=null;function K(){return re||(re=(0,k.d)({types:se()})),re}let ae=null;function se(){return ae||(ae={key:"type",base:null,typeMap:{"data-layer":ue,"map-layer":X.R}}),ae}const de={key:"type",base:null,typeMap:{"join-table":ce,"query-table":x,raster:M,table:z}};let ue=le=class extends J.wq{constructor(pe){super(pe),this.type="data-layer"}clone(){const{fields:pe,dataSource:ie}=this;return new le({fields:pe,dataSource:ie})}};(0,g._)([(0,L.J)({dataLayer:"data-layer"})],ue.prototype,"type",void 0),(0,g._)([(0,B.Cb)({type:[Z.Z],json:{write:!0}})],ue.prototype,"fields",void 0),(0,g._)([(0,B.Cb)({types:de,json:{write:!0}})],ue.prototype,"dataSource",void 0),ue=le=(0,g._)([(0,I.j)("esri.layers.support.source.DataLayerSource")],ue),ue.from=(0,W.se)(ue)},48370:(He,ve,p)=>{"use strict";p.d(ve,{R:()=>I});var D,g=p(17626),b=p(86810),J=p(77712),C=(p(85931),p(8314),p(90912)),$=p(55342),L=p(76898);let I=D=class extends b.wq{constructor(W){super(W),this.type="map-layer"}clone(){const{mapLayerId:W,gdbVersion:k}=this;return new D({mapLayerId:W,gdbVersion:k})}};(0,g._)([(0,$.J)({mapLayer:"map-layer"})],I.prototype,"type",void 0),(0,g._)([(0,J.Cb)({type:C.z8,json:{write:!0}})],I.prototype,"mapLayerId",void 0),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],I.prototype,"gdbVersion",void 0),I=D=(0,g._)([(0,L.j)("esri.layers.support.source.MapLayerSource")],I)},5676:(He,ve,p)=>{"use strict";p.d(ve,{D:()=>J});var g=p(38305);const b=[];function J(B,j){if((0,g.M8)(B.url))return!0;const{wkid:C}=j;for(const $ of b){if(B.version>=$[0])return!0;if("function"==typeof $[1]&&($[1]=$[1]()),$[1].has(C))return!1}return!0}b.push([10.91,()=>{const B=new Set([9709,9716,9741,9761,9766]);for(let j=9712;j<=9713;j++)B.add(j);for(let j=9748;j<=9749;j++)B.add(j);for(let j=20904;j<=20932;j++)B.add(j);for(let j=21004;j<=21032;j++)B.add(j);for(let j=21207;j<=21264;j++)B.add(j);for(let j=21307;j<=21364;j++)B.add(j);for(let j=102759;j<=102760;j++)B.add(j);for(let j=102901;j<=102960;j++)B.add(j);return B}]),b.push([10.9,()=>{const B=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let j=9356;j<=9360;j++)B.add(j);for(let j=9404;j<=9407;j++)B.add(j);for(let j=9476;j<=9482;j++)B.add(j);for(let j=9487;j<=9494;j++)B.add(j);for(let j=9697;j<=9699;j++)B.add(j);return B}]),b.push([10.81,()=>{const B=new Set([9265,9333,103598,103699]);for(let j=9248;j<=9254;j++)B.add(j);for(let j=9271;j<=9273;j++)B.add(j);for(let j=9284;j<=9285;j++)B.add(j);for(let j=21453;j<=21463;j++)B.add(j);return B}]),b.push([10.8,()=>{const B=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let j=8035;j<=8036;j++)B.add(j);for(let j=8455;j<=8456;j++)B.add(j);for(let j=8518;j<=8529;j++)B.add(j);for(let j=8533;j<=8536;j++)B.add(j);for(let j=8538;j<=8540;j++)B.add(j);for(let j=8677;j<=8679;j++)B.add(j);for(let j=8902;j<=8903;j++)B.add(j);for(let j=8907;j<=8910;j++)B.add(j);for(let j=8949;j<=8951;j++)B.add(j);for(let j=8972;j<=8987;j++)B.add(j);for(let j=9039;j<=9040;j++)B.add(j);for(let j=9068;j<=9069;j++)B.add(j);for(let j=9140;j<=9141;j++)B.add(j);for(let j=9148;j<=9150;j++)B.add(j);for(let j=9153;j<=9159;j++)B.add(j);for(let j=9205;j<=9218;j++)B.add(j);for(let j=9221;j<=9222;j++)B.add(j);for(let j=54098;j<=54101;j++)B.add(j);return B}]),b.push([10.71,()=>{const B=new Set([6316]);for(let j=8351;j<=8353;j++)B.add(j);for(let j=9294;j<=9297;j++)B.add(j);for(let j=103586;j<=103594;j++)B.add(j);for(let j=103696;j<=103698;j++)B.add(j);return B}]),b.push([10.7,()=>{const B=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let j=8065;j<=8068;j++)B.add(j);for(let j=8082;j<=8083;j++)B.add(j);for(let j=8379;j<=8385;j++)B.add(j);for(let j=8836;j<=8840;j++)B.add(j);for(let j=8857;j<=8860;j++)B.add(j);for(let j=53035;j<=53037;j++)B.add(j);for(let j=54090;j<=54091;j++)B.add(j);for(let j=102498;j<=102499;j++)B.add(j);return B}]),b.push([10.61,()=>new Set([102497])]),b.push([10.6,()=>{const B=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let j=7755;j<=7787;j++)B.add(j);for(let j=7791;j<=7795;j++)B.add(j);for(let j=7799;j<=7801;j++)B.add(j);for(let j=7825;j<=7831;j++)B.add(j);for(let j=7877;j<=7878;j++)B.add(j);for(let j=7882;j<=7883;j++)B.add(j);for(let j=7991;j<=7992;j++)B.add(j);for(let j=8042;j<=8043;j++)B.add(j);for(let j=8058;j<=8059;j++)B.add(j);for(let j=8311;j<=8348;j++)B.add(j);for(let j=9060;j<=9067;j++)B.add(j);for(let j=102562;j<=102568;j++)B.add(j);for(let j=102799;j<=102900;j++)B.add(j);return B}]),b.push([10.51,()=>{const B=new Set([7683,7881,7886,7899,8888,9e3]);for(let j=8013;j<=8032;j++)B.add(j);for(let j=9053;j<=9057;j++)B.add(j);for(let j=104017;j<=104018;j++)B.add(j);for(let j=104971;j<=104974;j++)B.add(j);return B}]),b.push([10.5,()=>{const B=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let j=4087;j<=4088;j++)B.add(j);for(let j=5896;j<=5899;j++)B.add(j);for(let j=7005;j<=7007;j++)B.add(j);for(let j=7057;j<=7070;j++)B.add(j);for(let j=7073;j<=7082;j++)B.add(j);for(let j=7109;j<=7128;j++)B.add(j);for(let j=7844;j<=7859;j++)B.add(j);return B}])},39605:(He,ve,p)=>{"use strict";p.d(ve,{W:()=>J,v:()=>B});var g=p(50645);const b={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(j,C,$)=>{"-"===C.charAt(0)?j.style.setProperty(C,$):j.style[C]=$}};let J=j=>(0,g.l7)(b,j),B={create:(j,C)=>(C=J(C),(0,g.WV)(j,document.createElement("div"),void 0,C),(0,g.UQ)(j,C)),append:(j,C,$)=>($=J($),(0,g.WV)(C,j,void 0,$),(0,g.UQ)(C,$)),insertBefore:(j,C,$)=>($=J($),(0,g.WV)(C,j.parentNode,j,$),(0,g.UQ)(C,$)),merge:(j,C,$)=>($=J($),C.domNode=j,(0,g.Yj)(j,C,$),(0,g.UQ)(C,$)),replace:(j,C,$)=>($=J($),(0,g.WV)(C,j.parentNode,j,$),j.parentNode.removeChild(j),(0,g.UQ)(C,$))}},50645:(He,ve,p)=>{"use strict";p.d(ve,{WV:()=>Q,UQ:()=>oe,l7:()=>$,Yj:()=>M});var g=p(38570);const b="http://www.w3.org/",J=`${b}2000/svg`,B=`${b}1999/xlink`;let j,C=[],$=(ce,re)=>{let K={};return Object.keys(ce).forEach(ae=>{K[ae]=ce[ae]}),re&&Object.keys(re).forEach(ae=>{K[ae]=re[ae]}),K},L=(ce,re)=>ce.vnodeSelector===re.vnodeSelector&&(ce.properties&&re.properties?ce.properties.key===re.properties.key&&ce.properties.bind===re.properties.bind:!ce.properties&&!re.properties),D=ce=>{if("string"!=typeof ce)throw new Error("Style values must be strings")},I=(ce,re,K)=>{if(""!==re.vnodeSelector)for(let ae=K;ae<ce.length;ae++)if(L(ce[ae],re))return ae;return-1},W=(ce,re,K,ae)=>{let se=ce[re];if(""===se.vnodeSelector)return;let de=se.properties;if(!(de?void 0===de.key?de.bind:de.key:void 0))for(let ue=0;ue<ce.length;ue++)if(ue!==re&&L(ce[ue],se))throw new Error(`${K.vnodeSelector} had a ${se.vnodeSelector} child ${"added"===ae?ae:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)},k=ce=>{if(ce.properties){let re=ce.properties.enterAnimation;re&&re(ce.domNode,ce.properties)}},Z=[],X=!1,V=ce=>{(ce.children||[]).forEach(V),ce.properties&&ce.properties.afterRemoved&&ce.properties.afterRemoved.apply(ce.properties.bind||ce.properties,[ce.domNode])},w=()=>{X=!1,Z.forEach(V),Z.length=0},T=ce=>{Z.push(ce),X||(X=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(w,{timeout:16}):setTimeout(w,16))},O=ce=>{let re=ce.domNode;if(ce.properties){let K=ce.properties.exitAnimation;if(K)return re.style.pointerEvents="none",void K(re,()=>{re.parentNode&&(re.parentNode.removeChild(re),T(ce))},ce.properties)}re.parentNode&&(re.parentNode.removeChild(re),T(ce))},x=(ce,re,K)=>{if(!re)return;let ae=K.eventHandlerInterceptor,se=Object.keys(re),de=se.length;for(let ue=0;ue<de;ue++){let pe=se[ue],ie=re[pe];if("className"===pe)throw new Error('Property "className" is not supported, use "class".');if("class"===pe)z(ce,ie,!0);else if("classes"===pe){let te=Object.keys(ie),Ee=te.length;for(let fe=0;fe<Ee;fe++){let be=te[fe];ie[be]&&ce.classList.add(be)}}else if("styles"===pe){let te=Object.keys(ie),Ee=te.length;for(let fe=0;fe<Ee;fe++){let be=te[fe],ye=ie[be];ye&&(D(ye),K.styleApplyer(ce,be,ye))}}else if("key"!==pe&&null!=ie){let te=typeof ie;"function"===te?(0===pe.lastIndexOf("on",0)&&(ae&&(ie=ae(pe,ie,ce,re)),"oninput"===pe&&function(){let Ee=ie;ie=function(fe){Ee.apply(this,[fe]),fe.target["oninput-value"]=fe.target.value}}()),ce[pe]=ie):K.namespace===J?"href"===pe?ce.setAttributeNS(B,pe,ie):ce.setAttribute(pe,ie):"string"===te&&"value"!==pe?"innerHTML"===pe?ce[pe]=g.w3.sanitize(ie):ce.setAttribute(pe,ie):ce[pe]=ie}}},M=(ce,re,K)=>{((ce,re,K)=>{if(re)for(let ae of re)Q(ae,ce,void 0,K)})(ce,re.children,K),re.text&&(ce.textContent=re.text),x(ce,re.properties,K),re.properties&&re.properties.afterCreate&&re.properties.afterCreate.apply(re.properties.bind||re.properties,[ce,K,re.vnodeSelector,re.properties,re.children])},Q=(ce,re,K,ae)=>{let se,de=0,ue=ce.vnodeSelector,pe=re.ownerDocument;if(""===ue)se=ce.domNode=pe.createTextNode(ce.text),void 0!==K?re.insertBefore(se,K):re.appendChild(se);else{for(let ie=0;ie<=ue.length;++ie){let te=ue.charAt(ie);if(ie===ue.length||"."===te||"#"===te){let Ee=ue.charAt(de-1),fe=ue.slice(de,ie);"."===Ee?se.classList.add(fe):"#"===Ee?se.id=fe:("svg"===fe&&(ae=$(ae,{namespace:J})),void 0!==ae.namespace?se=ce.domNode=pe.createElementNS(ae.namespace,fe):(se=ce.domNode=ce.domNode||pe.createElement(fe),"input"===fe&&ce.properties&&void 0!==ce.properties.type&&se.setAttribute("type",ce.properties.type)),void 0!==K?re.insertBefore(se,K):se.parentNode!==re&&re.appendChild(se)),de=ie+1}}M(se,ce,ae)}},z=(ce,re,K)=>{re&&re.split(" ").forEach(ae=>{ae&&ce.classList.toggle(ae,K)})};j=(ce,re,K)=>{let ae=ce.domNode,se=!1;if(ce===re)return!1;let de=!1;if(""===re.vnodeSelector){if(re.text!==ce.text){let ue=ae.ownerDocument.createTextNode(re.text);return ae.parentNode.replaceChild(ue,ae),re.domNode=ue,se=!0,se}re.domNode=ae}else 0===re.vnodeSelector.lastIndexOf("svg",0)&&(K=$(K,{namespace:J})),ce.text!==re.text&&(de=!0,void 0===re.text?ae.removeChild(ae.firstChild):ae.textContent=re.text),re.domNode=ae,de=((ce,re,K,ae,se)=>{if(K===ae)return!1;let de,ue=(K=K||C).length,pe=(ae=ae||C).length,ie=0,te=0,Ee=!1;for(;te<pe;){let fe=ie<ue?K[ie]:void 0,be=ae[te];if(void 0!==fe&&L(fe,be))Ee=j(fe,be,se)||Ee,ie++;else{let ye=I(K,be,ie+1);if(ye>=0){for(de=ie;de<ye;de++)O(K[de]),W(K,de,ce,"removed");Ee=j(K[ye],be,se)||Ee,ie=ye+1}else Q(be,re,ie<ue?K[ie].domNode:void 0,se),k(be),W(ae,te,ce,"added")}te++}if(ue>ie)for(de=ie;de<ue;de++)O(K[de]),W(K,de,ce,"removed");return Ee})(re,ae,ce.children,re.children,K)||de,de=((ce,re,K,ae)=>{if(!K)return;let se=!1,de=Object.keys(K),ue=de.length;for(let pe=0;pe<ue;pe++){let ie=de[pe],te=K[ie],Ee=re[ie];if("class"===ie)Ee!==te&&(z(ce,Ee,!1),z(ce,te,!0));else if("classes"===ie){let fe=ce.classList,be=Object.keys(te),ye=be.length;for(let Ke=0;Ke<ye;Ke++){let Ue=be[Ke],he=!!te[Ue];he!==!!Ee[Ue]&&(se=!0,he?fe.add(Ue):fe.remove(Ue))}}else if("styles"===ie){let fe=Object.keys(te),be=fe.length;for(let ye=0;ye<be;ye++){let Ke=fe[ye],Ue=te[Ke];Ue!==Ee[Ke]&&(se=!0,Ue?(D(Ue),ae.styleApplyer(ce,Ke,Ue)):ae.styleApplyer(ce,Ke,""))}}else if(te||"string"!=typeof Ee||(te=""),"value"===ie){let fe=ce[ie];fe!==te&&(ce["oninput-value"]?fe===ce["oninput-value"]:te!==Ee)&&(ce[ie]=te,ce["oninput-value"]=void 0),te!==Ee&&(se=!0)}else if(te!==Ee){let fe=typeof te;"function"===fe&&ae.eventHandlerInterceptor||(ae.namespace===J?"href"===ie?ce.setAttributeNS(B,ie,te):ce.setAttribute(ie,te):"string"===fe?"innerHTML"===ie?ce[ie]=g.w3.sanitize(te):"role"===ie&&""===te?ce.removeAttribute(ie):ce.setAttribute(ie,te):ce[ie]!==te&&(ce[ie]=te),se=!0)}}return se})(ae,ce.properties,re.properties,K)||de,re.properties&&re.properties.afterUpdate&&re.properties.afterUpdate.apply(re.properties.bind||re.properties,[ae,K,re.vnodeSelector,re.properties,re.children]);return de&&re.properties&&re.properties.updateAnimation&&re.properties.updateAnimation(ae,re.properties,ce.properties),se};let oe=(ce,re)=>({getLastRender:()=>ce,update:K=>{if(ce.vnodeSelector!==K.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let ae=ce;ce=K,j(ae,K,re)},domNode:ce.domNode})},62996:(He,ve,p)=>{"use strict";p.d(ve,{E:()=>C});var g=p(39605);let b,J=($,L)=>{let D=[];for(;$&&$!==L;)D.push($),$=$.parentNode;return D};b=Array.prototype.find?($,L)=>$.find(L):($,L)=>$.filter(L)[0];let B=($,L)=>{let D=$;return L.forEach(I=>{D=D&&D.children?b(D.children,W=>W.domNode===I):void 0}),D},j=($,L,D)=>{let I=function(W){D("domEvent",W);let k=L(),Z=J(W.currentTarget,k.domNode);Z.reverse();let X,V=B(k.getLastRender(),Z);return $.scheduleRender(),V&&(X=V.properties[`on${W.type}`].apply(V.properties.bind||this,arguments)),D("domEventProcessed",W),X};return(W,k,Z,X)=>I},C=$=>{let L,D,I=(0,g.W)($),W=I.performanceLogger,k=!0,Z=!1,X=[],V=[],w=(O,x,N)=>{let M;I.eventHandlerInterceptor=j(L,()=>M,W),M=O(x,N(),I),X.push(M),V.push(N)},T=()=>{if(D=void 0,k){k=!1,W("renderStart",void 0);for(let O=0;O<X.length;O++){let x=V[O]();W("rendered",void 0),X[O].update(x),W("patched",void 0)}W("renderDone",void 0),k=!0}};return L={renderNow:T,scheduleRender:()=>{D||Z||(D=requestAnimationFrame(T))},stop:()=>{D&&(cancelAnimationFrame(D),D=void 0),Z=!0},resume:()=>{Z=!1,k=!0,L.scheduleRender()},append:(O,x)=>{w(g.v.append,O,x)},insertBefore:(O,x)=>{w(g.v.insertBefore,O,x)},merge:(O,x)=>{w(g.v.merge,O,x)},replace:(O,x)=>{w(g.v.replace,O,x)},detach:O=>{for(let x=0;x<V.length;x++)if(V[x]===O)return V.splice(x,1),X.splice(x,1)[0];throw new Error("renderFunction was not found")}},L}},38159:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let D=L=class extends b.wq{constructor(W){super(W),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new L({title:this.title,expression:this.expression})}};(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],D.prototype,"title",void 0),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],D.prototype,"expression",void 0),(0,g._)([(0,J.Cb)({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],D.prototype,"returnType",void 0),D=L=(0,g._)([(0,$.j)("esri.popup.ElementExpressionInfo")],D);const I=D},38439:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let D=L=class extends b.wq{constructor(W){super(W),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new L({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],D.prototype,"name",void 0),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],D.prototype,"title",void 0),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],D.prototype,"expression",void 0),(0,g._)([(0,J.Cb)({type:["string","number"],json:{write:!0}})],D.prototype,"returnType",void 0),D=L=(0,g._)([(0,$.j)("esri.popup.ExpressionInfo")],D);const I=D},25621:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>k});var I,g=p(17626),b=p(2076),J=p(86810),B=p(58817),j=p(77712),$=(p(90912),p(55342)),L=p(76898),D=p(66845);let W=I=class extends J.wq{constructor(Z){super(Z),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new I({fieldName:this.fieldName,format:this.format?(0,B.d9)(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],W.prototype,"fieldName",void 0),(0,g._)([(0,j.Cb)({type:D.Z,json:{write:!0}})],W.prototype,"format",void 0),(0,g._)([(0,j.Cb)({type:Boolean,json:{write:!0,default:!1}})],W.prototype,"isEditable",void 0),(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],W.prototype,"label",void 0),(0,g._)([(0,$.J)(new b.X({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],W.prototype,"stringFieldOption",void 0),(0,g._)([(0,j.Cb)({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],W.prototype,"statisticType",void 0),(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],W.prototype,"tooltip",void 0),(0,g._)([(0,j.Cb)({type:Boolean,json:{write:!0}})],W.prototype,"visible",void 0),W=I=(0,g._)([(0,L.j)("esri.popup.FieldInfo")],W);const k=W},55664:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(55013);let D=L=class extends $.Z{constructor(W){super(W),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new L({description:this.description,displayType:this.displayType,title:this.title})}};(0,g._)([(0,b.Cb)({type:String,json:{write:!0}})],D.prototype,"description",void 0),(0,g._)([(0,b.Cb)({type:["auto","preview","list"],json:{write:!0}})],D.prototype,"displayType",void 0),(0,g._)([(0,b.Cb)({type:String,json:{write:!0}})],D.prototype,"title",void 0),(0,g._)([(0,b.Cb)({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],D.prototype,"type",void 0),D=L=(0,g._)([(0,C.j)("esri.popup.content.AttachmentsContent")],D);const I=D},89594:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(85812),L=p(82657);let I=D=class extends $.Z{constructor(k){super(k),this.type="bar-chart"}clone(){return new D({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,g._)([(0,b.Cb)({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:L.l.write}})],I.prototype,"type",void 0),I=D=(0,g._)([(0,C.j)("esri.popup.content.BarChartMediaInfo")],I);const W=I},81590:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(85812),L=p(82657);let I=D=class extends $.Z{constructor(k){super(k),this.type="column-chart"}clone(){return new D({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,g._)([(0,b.Cb)({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:L.l.write}})],I.prototype,"type",void 0),I=D=(0,g._)([(0,C.j)("esri.popup.content.ColumnChartMediaInfo")],I);const W=I},55013:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>D});var g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let L=class extends b.wq{constructor(I){super(I),this.type=null}};(0,g._)([(0,J.Cb)({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],L.prototype,"type",void 0),L=(0,g._)([(0,$.j)("esri.popup.content.Content")],L);const D=L},16615:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>D});var $,g=p(17626),b=p(58817),J=p(77712),j=(p(90912),p(76898)),C=p(55013);let L=$=class extends C.Z{constructor(I){super(I),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new $({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?(0,b.d9)(this.outFields):null})}};(0,g._)([(0,J.Cb)()],L.prototype,"creator",void 0),(0,g._)([(0,J.Cb)()],L.prototype,"destroyer",void 0),(0,g._)([(0,J.Cb)()],L.prototype,"outFields",void 0),(0,g._)([(0,J.Cb)({type:["custom"],readOnly:!0})],L.prototype,"type",void 0),L=$=(0,g._)([(0,j.j)("esri.popup.content.CustomContent")],L);const D=L},82561:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(38159),L=p(55013);let I=D=class extends L.Z{constructor(k){super(k),this.expressionInfo=null,this.type="expression"}clone(){var k;return new D({expressionInfo:null==(k=this.expressionInfo)?void 0:k.clone()})}};(0,g._)([(0,b.Cb)({type:$.Z,json:{write:!0}})],I.prototype,"expressionInfo",void 0),(0,g._)([(0,b.Cb)({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],I.prototype,"type",void 0),I=D=(0,g._)([(0,C.j)("esri.popup.content.ExpressionContent")],I);const W=I},75484:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(58817),J=p(77712),j=(p(90912),p(76898)),C=p(99433),$=p(25621),L=p(55013);let I=D=class extends L.Z{constructor(k){super(k),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(k,Z){Z.fieldInfos=k&&k.map(X=>X.toJSON())}clone(){return new D((0,b.d9)({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};(0,g._)([(0,J.Cb)({type:Object,json:{write:!0}})],I.prototype,"attributes",void 0),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],I.prototype,"description",void 0),(0,g._)([(0,J.Cb)({type:[$.Z]})],I.prototype,"fieldInfos",void 0),(0,g._)([(0,C.c)("fieldInfos")],I.prototype,"writeFieldInfos",null),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],I.prototype,"title",void 0),(0,g._)([(0,J.Cb)({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],I.prototype,"type",void 0),I=D=(0,g._)([(0,j.j)("esri.popup.content.FieldsContent")],I);const W=I},49455:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>X});var D,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(78297),L=p(86810);let I=D=class extends L.wq{constructor(V){super(V),this.linkURL=null,this.sourceURL=null}clone(){return new D({linkURL:this.linkURL,sourceURL:this.sourceURL})}};(0,g._)([(0,b.Cb)({type:String,json:{write:!0}})],I.prototype,"linkURL",void 0),(0,g._)([(0,b.Cb)({type:String,json:{write:!0}})],I.prototype,"sourceURL",void 0),I=D=(0,g._)([(0,C.j)("esri.popup.content.support.ImageMediaInfoValue")],I);const W=I;var k;let Z=k=class extends $.Z{constructor(V){super(V),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new k({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};(0,g._)([(0,b.Cb)({type:Number,json:{write:!0}})],Z.prototype,"refreshInterval",void 0),(0,g._)([(0,b.Cb)({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Z.prototype,"type",void 0),(0,g._)([(0,b.Cb)({type:W,json:{write:!0}})],Z.prototype,"value",void 0),Z=k=(0,g._)([(0,C.j)("esri.popup.content.ImageMediaInfo")],Z);const X=Z},71981:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(85812),L=p(82657);let I=D=class extends $.Z{constructor(k){super(k),this.type="line-chart"}clone(){return new D({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,g._)([(0,b.Cb)({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:L.l.write}})],I.prototype,"type",void 0),I=D=(0,g._)([(0,C.j)("esri.popup.content.LineChartMediaInfo")],I);const W=I},64531:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>T});var V,g=p(17626),b=p(58817),J=p(77712),j=(p(90912),p(68653)),C=p(76898),$=p(99433),L=p(89594),D=p(81590),I=p(55013),W=p(49455),k=p(71981),Z=p(52023),X=p(65560);let w=V=class extends I.Z{constructor(O){super(O),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(O){return O&&O.map(x=>"image"===x.type?W.Z.fromJSON(x):"barchart"===x.type?L.Z.fromJSON(x):"columnchart"===x.type?D.Z.fromJSON(x):"linechart"===x.type?k.Z.fromJSON(x):"piechart"===x.type?Z.Z.fromJSON(x):void 0).filter(Boolean)}writeMediaInfos(O,x){x.mediaInfos=O&&O.map(N=>N.toJSON())}clone(){return new V((0,b.d9)({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};(0,g._)([(0,J.Cb)()],w.prototype,"activeMediaInfoIndex",void 0),(0,g._)([(0,J.Cb)({type:Object,json:{write:!0}})],w.prototype,"attributes",void 0),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],w.prototype,"description",void 0),(0,g._)([(0,J.Cb)({types:[X.V]})],w.prototype,"mediaInfos",void 0),(0,g._)([(0,j.r)("mediaInfos")],w.prototype,"readMediaInfos",null),(0,g._)([(0,$.c)("mediaInfos")],w.prototype,"writeMediaInfos",null),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],w.prototype,"title",void 0),(0,g._)([(0,J.Cb)({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],w.prototype,"type",void 0),w=V=(0,g._)([(0,C.j)("esri.popup.content.MediaContent")],w);const T=w},52023:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(85812),L=p(82657);let I=D=class extends $.Z{constructor(k){super(k),this.type="pie-chart"}clone(){return new D({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};(0,g._)([(0,b.Cb)({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:L.l.write}})],I.prototype,"type",void 0),I=D=(0,g._)([(0,C.j)("esri.popup.content.PieChartMediaInfo")],I);const W=I},501:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(55013);let D=L=class extends $.Z{constructor(W){super(W),this.text=null,this.type="text"}clone(){return new L({text:this.text})}};(0,g._)([(0,b.Cb)({type:String,json:{write:!0}})],D.prototype,"text",void 0),(0,g._)([(0,b.Cb)({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],D.prototype,"type",void 0),D=L=(0,g._)([(0,C.j)("esri.popup.content.TextContent")],D);const I=D},85812:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var W,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(78297),L=p(86810),D=p(58817),I=p(77891);let k=W=class extends L.wq{constructor(w){super(w),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new W({fields:(0,D.d9)(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};(0,g._)([(0,b.Cb)({type:[String],json:{write:!0}})],k.prototype,"fields",void 0),(0,g._)([(0,b.Cb)({type:String,json:{write:!0}})],k.prototype,"normalizeField",void 0),(0,g._)([(0,b.Cb)({type:[I.Z],json:{read:!1}})],k.prototype,"series",void 0),(0,g._)([(0,b.Cb)({type:String,json:{write:!0}})],k.prototype,"tooltipField",void 0),k=W=(0,g._)([(0,C.j)("esri.popup.content.support.ChartMediaInfoValue")],k);const Z=k;let X=class extends $.Z{constructor(w){super(w),this.type=null,this.value=null}};(0,g._)([(0,b.Cb)({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],X.prototype,"type",void 0),(0,g._)([(0,b.Cb)({type:Z,json:{write:!0}})],X.prototype,"value",void 0),X=(0,g._)([(0,C.j)("esri.popup.content.mixins.ChartMediaInfo")],X);const V=X},78297:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>D});var g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let L=class extends b.wq{constructor(I){super(I),this.altText=null,this.caption="",this.title="",this.type=null}};(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],L.prototype,"altText",void 0),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],L.prototype,"caption",void 0),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],L.prototype,"title",void 0),(0,g._)([(0,J.Cb)({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],L.prototype,"type",void 0),L=(0,g._)([(0,$.j)("esri.popup.content.mixins.MediaInfo")],L);const D=L},77891:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(14517),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let D=L=class extends b.Z{constructor(W){super(W),this.tooltip=null,this.value=null}clone(){return new L({tooltip:this.tooltip,value:this.value})}};(0,g._)([(0,J.Cb)()],D.prototype,"tooltip",void 0),(0,g._)([(0,J.Cb)()],D.prototype,"value",void 0),D=L=(0,g._)([(0,$.j)("esri.popup.content.support.ChartMediaInfoValueSeries")],D);const I=D},82657:(He,ve,p)=>{"use strict";p.d(ve,{l:()=>b});const b=(0,p(2076).w)()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})},65560:(He,ve,p)=>{"use strict";p.d(ve,{V:()=>$});var g=p(89594),b=p(81590),J=p(49455),B=p(71981),j=p(52023);const $={base:p(78297).Z,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":g.Z,"column-chart":b.Z,"line-chart":B.Z,"pie-chart":j.Z,image:J.Z}}},66845:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>x});var g=p(17626);const B=(0,p(2076).w)()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});B.toJSON.bind(B),B.fromJSON.bind(B);var T,L=p(86810),D=p(77712),k=(p(85931),p(8314),p(90912)),Z=p(55342),X=p(76898),V=p(88411),w=p(15348);let O=T=class extends L.wq{constructor(N){super(N),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new T({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(N){return this.dateFormat?(0,V.p6)(N,_t(_t({},(0,V.Ze)(this.dateFormat)),this.dateTimeFormatOptions)):(0,w.uf)(N,(0,w.sh)(this))}};(0,g._)([(0,Z.J)(B)],O.prototype,"dateFormat",void 0),(0,g._)([(0,D.Cb)({type:Object,json:{read:!1}})],O.prototype,"dateTimeFormatOptions",void 0),(0,g._)([(0,D.Cb)({type:Boolean,json:{write:!0}})],O.prototype,"digitSeparator",void 0),(0,g._)([(0,D.Cb)({type:k.z8,json:{write:!0}})],O.prototype,"places",void 0),O=T=(0,g._)([(0,X.j)("esri.popup.support.FieldInfoFormat")],O);const x=O},51686:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let D=L=class extends b.wq{constructor(W){super(W),this.field=null,this.order=null}clone(){return new L({field:this.field,order:this.order})}};(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],D.prototype,"field",void 0),(0,g._)([(0,J.Cb)({type:["asc","desc"],json:{write:!0}})],D.prototype,"order",void 0),D=L=(0,g._)([(0,$.j)("esri.popup.support.RelatedRecordsInfoFieldOrder")],D);const I=D},84687:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>se});var g=p(15861),b=p(17626),J=p(59318),B=p(24263),j=p(84792),C=p(55538),$=p(26584),L=p(86810),D=p(47996),I=p(63290),W=p(62208),k=p(10699),Z=p(77712),w=(p(85931),p(8314),p(90912)),T=p(68653),O=p(76898),x=p(2004),N=p(56683),M=p(6278),Q=p(14517);let z=class extends Q.Z{constructor(de){super(de),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};(0,b._)([(0,Z.Cb)()],z.prototype,"nextQueryParams",void 0),(0,b._)([(0,Z.Cb)()],z.prototype,"queryParams",void 0),(0,b._)([(0,Z.Cb)()],z.prototype,"results",void 0),(0,b._)([(0,Z.Cb)()],z.prototype,"total",void 0),z=(0,b._)([(0,O.j)("esri.portal.PortalQueryResult")],z);const ee=z;var ce,le=p(94508),oe=p(12680);let re;const K={PortalGroup:()=>Promise.resolve().then(p.bind(p,96245)),PortalItem:()=>Promise.resolve().then(p.bind(p,55463)),PortalUser:()=>Promise.resolve().then(p.bind(p,94508))};let ae=ce=class extends((0,L.eC)(D.Z)){constructor(de){super(de),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=J.Z.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(de){return"string"==typeof de?{url:de}:de}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(de){if(de)for(const ue of de)-1===J.Z.request.trustedServers.indexOf(ue)&&J.Z.request.trustedServers.push(ue);return de}readDefaultBasemap(de){return this._readBasemap(de)}readDefaultDevBasemap(de){return this._readBasemap(de)}readDefaultVectorBasemap(de){return this._readBasemap(de)}get extraQuery(){return this.id&&this.user&&this.user.orgId&&!this.canSearchPublic?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let de=this.url;if(de){const ue=de.indexOf("/sharing");de=ue>0?de.substring(0,ue):this.url.replace(/\/+$/,""),de+="/sharing/rest"}return de}get stylesGroupQuery(){return(0,C.Mr)(I.Z.getLogger(this.declaredClass),"stylesGroupQuery",{replacement:"stylesGroupQuery3d",version:"4.21"}),this.stylesGroupQuery3d}get thumbnailUrl(){const de=this.restUrl,ue=this.thumbnail;return de&&ue?this._normalizeSSL(de+"/portals/self/resources/"+ue):null}readUrlKey(de){return de&&de.toLowerCase()}readUser(de){let ue=null;return de&&(ue=le.default.fromJSON(de),ue.portal=this),ue}load(de){const ue=Promise.resolve().then(p.bind(p,73386)).then(({default:pe})=>{(0,k.k_)(de),re=pe}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,de)).then(pe=>{if(B.id){const ie=B.id;this.credential=ie.findCredential(this.restUrl),this.credential||this.authMode!==ce.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=ie.on("credential-create",()=>{ie.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=pe,this.read(pe)});return this.addResolvingPromise(ue),Promise.resolve(this)}createClosestFacilityTask(){var de=this;return(0,g.Z)(function*(){(0,C.XV)(I.Z.getLogger(de.declaredClass),null,{replacement:"Use helperServices url with esri/rest/closestFacility",version:"4.21"}),yield de.load();const ue=de._getHelperServiceUrl("closestFacility");return new((yield Promise.all([p.e(308),p.e(6359)]).then(p.bind(p,36359))).default)(ue)})()}createElevationLayers(){var de=this;return(0,g.Z)(function*(){yield de.load();const ue=de._getHelperService("defaultElevationLayers"),pe=(yield Promise.all([p.e(8592),p.e(5227)]).then(p.bind(p,25227))).default;return ue?ue.map(ie=>new pe({id:ie.id,url:ie.url})):[]})()}createGeometryService(){var de=this;return(0,g.Z)(function*(){(0,C.XV)(I.Z.getLogger(de.declaredClass),null,{replacement:"Use helperServices url with esri/rest/geometryService",version:"4.21"}),yield de.load();const ue=de._getHelperServiceUrl("geometry");return new((yield p.e(649).then(p.bind(p,40649))).default)({url:ue})})()}createPrintTask(){var de=this;return(0,g.Z)(function*(){(0,C.XV)(I.Z.getLogger(de.declaredClass),null,{replacement:"Use helperServices url with esri/rest/print",version:"4.21"}),yield de.load();const ue=de._getHelperServiceUrl("printTask");return new((yield p.e(3436).then(p.bind(p,33436))).default)(ue)})()}createRouteTask(){var de=this;return(0,g.Z)(function*(){(0,C.XV)(I.Z.getLogger(de.declaredClass),null,{replacement:"Use helperServices url with esri/rest/route",version:"4.21"}),yield de.load();const ue=de._getHelperServiceUrl("route");return new((yield Promise.all([p.e(308),p.e(8592),p.e(9387)]).then(p.bind(p,19387))).default)(ue)})()}createServiceAreaTask(){var de=this;return(0,g.Z)(function*(){(0,C.XV)(I.Z.getLogger(de.declaredClass),null,{replacement:"Use helperServices url with esri/rest/serviceArea",version:"4.21"}),yield de.load();const ue=de._getHelperServiceUrl("serviceArea");return new((yield p.e(5349).then(p.bind(p,65349))).default)(ue)})()}fetchBasemaps(de,ue){const pe=new M.Z;return pe.query=de||(J.Z.apiKey&&(0,oe.r)(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),pe.disableExtraQuery=!0,this.queryGroups(pe,ue).then(ie=>{if(pe.num=100,pe.query='type:"Web Map" -type:"Web Application"',ie.total){const te=ie.results[0];return pe.sortField=te.sortField||"name",pe.sortOrder=te.sortOrder||"desc",te.queryItems(pe,ue)}return null}).then(ie=>{let te;return te=ie&&ie.total?ie.results.filter(Ee=>"Web Map"===Ee.type).map(Ee=>new re({portalItem:Ee})):[],te})}fetchCategorySchema(de){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",de).then(ue=>ue.categorySchema):(0,k.Hc)(de)?Promise.reject((0,k.zE)()):Promise.resolve([])}fetchFeaturedGroups(de){const ue=this.featuredGroups,pe=new M.Z;if(pe.num=100,pe.sortField="title",ue&&ue.length){const ie=[];for(const te of ue)ie.push(`(title:"${te.title}" AND owner:${te.owner})`);return pe.query=ie.join(" OR "),this.queryGroups(pe,de).then(te=>te.results)}return(0,k.Hc)(de)?Promise.reject((0,k.zE)()):Promise.resolve([])}fetchRegions(de){var ue;const pe=(null==(ue=this.user)?void 0:ue.culture)||this.culture||(0,N.Kd)();return this._request(this.restUrl+"/portals/regions",Sr(_t({},de),{query:{culture:pe}}))}fetchSettings(de){var ue;const pe=(null==(ue=this.user)?void 0:ue.culture)||this.culture||(0,N.Kd)();return this._request(this.restUrl+"/portals/self/settings",Sr(_t({},de),{query:{culture:pe}}))}static getDefault(){return ce._default&&!ce._default.destroyed||(ce._default=new ce),ce._default}queryGroups(de,ue){return this._queryPortal("/community/groups",de,"PortalGroup",ue)}queryItems(de,ue){return this._queryPortal("/search",de,"PortalItem",ue)}queryUsers(de,ue){return de.sortField||(de.sortField="username"),this._queryPortal("/community/users",de,"PortalUser",ue)}toJSON(){throw new $.Z("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(de){if(!de)return null;if(de.declaredClass)throw new Error("JSON object is already hydrated");return new ce({sourceJSON:de})}_getHelperService(de){const ue=this.helperServices&&this.helperServices[de];if(!ue)throw new $.Z("portal:service-not-found",`The \`helperServices\` do not include an entry named "${de}"`);return ue}_getHelperServiceUrl(de){const ue=this._getHelperService(de);if(!ue.url)throw new $.Z("portal:service-url-not-found",`The \`helperServices\` entry "${de}" does not include a \`url\` value`);return ue.url}_fetchSelf(de=this.authMode,ue=!1,pe){const ie=this.restUrl+"/portals/self",te=_t({authMode:de,query:{culture:(0,N.Kd)().toLowerCase()}},pe);return"auto"===te.authMode&&(te.authMode="no-prompt"),ue&&(te.query.default=!0),this._request(ie,te)}_queryPortal(de,ue,pe,ie){const te=(0,w.se)(M.Z,ue),Ee=fe=>this._request(this.restUrl+de,_t(_t({},te.toRequestOptions(this)),ie)).then(be=>{const ye=te.clone();return ye.start=be.nextStart,new ee({nextQueryParams:ye,queryParams:te,total:be.total,results:ce._resultsToTypedArray(fe,{portal:this},be,ie)})}).then(be=>Promise.all(be.results.map(ye=>"function"==typeof ye.when?ye.when():be)).then(()=>be,ye=>((0,k.r9)(ye),be)));return pe&&K[pe]?K[pe]().then(({default:fe})=>((0,k.k_)(ie),Ee(fe))):Ee()}_signIn(){if(this.authMode===ce.AUTH_MODE_ANONYMOUS)return Promise.reject(new $.Z("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const de=ue=>Promise.resolve().then(()=>"not-loaded"===this.loadStatus?(ue||(this.authMode="immediate"),this.load().then(()=>null)):"loading"===this.loadStatus?this.load().then(()=>this.credential?null:(this.credential=ue,this._fetchSelf("immediate"))):this.user&&this.credential===ue?null:(this.credential=ue,this._fetchSelf("immediate"))).then(pe=>{pe&&(this.sourceJSON=pe,this.read(pe))});return B.id?B.id.getCredential(this.restUrl).then(ue=>de(ue)):de(this.credential)}_normalizeSSL(de){return de.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(de){const ue=this.credential&&this.credential.token;return this._normalizeSSL(ue?de+(de.indexOf("?")>-1?"&":"?")+"token="+ue:de)}_requestToTypedArray(de,ue,pe){return this._request(de,ue).then(ie=>{const te=ce._resultsToTypedArray(pe,{portal:this},ie);return Promise.all(te.map(Ee=>"function"==typeof Ee.when?Ee.when():ie)).then(()=>te,()=>te)})}_readBasemap(de){if(de){const ue=re.fromJSON(de);return ue.portalItem={portal:this},ue}return null}_request(de,ue={}){const pe=_t({f:"json"},ue.query),{authMode:ie=(this.authMode===ce.AUTH_MODE_ANONYMOUS?"anonymous":"auto"),body:te=null,cacheBust:Ee=!1,method:fe="auto",responseType:be="json",signal:ye}=ue,Ke={authMode:ie,body:te,cacheBust:Ee,method:fe,query:pe,responseType:be,timeout:0,signal:ye};return(0,j.default)(this._normalizeSSL(de),Ke).then(Ue=>Ue.data)}static _resultsToTypedArray(de,ue,pe,ie){let te;if(pe){const Ee=(0,W.pC)(ie)?ie.signal:null;te=pe.listings||pe.notifications||pe.userInvitations||pe.tags||pe.items||pe.groups||pe.comments||pe.provisions||pe.results||pe.relatedItems||pe,(de||ue)&&(te=te.map(fe=>{const be=Object.assign(de?de.fromJSON(fe):fe,ue);return"function"==typeof be.load&&be.load(Ee),be}))}else te=[];return te}};ae.AUTH_MODE_ANONYMOUS="anonymous",ae.AUTH_MODE_AUTO="auto",ae.AUTH_MODE_IMMEDIATE="immediate",(0,b._)([(0,Z.Cb)()],ae.prototype,"access",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"allSSL",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"authMode",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"authorizedCrossOriginDomains",void 0),(0,b._)([(0,T.r)("authorizedCrossOriginDomains")],ae.prototype,"readAuthorizedCrossOriginDomains",null),(0,b._)([(0,Z.Cb)()],ae.prototype,"basemapGalleryGroupQuery",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"bingKey",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"canListApps",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"canListData",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"canListPreProvisionedItems",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"canProvisionDirectPurchase",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"canSearchPublic",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"canShareBingPublic",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"canSharePublic",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"canSignInArcGIS",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"canSignInIDP",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"colorSetsGroupQuery",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"commentsEnabled",void 0),(0,b._)([(0,Z.Cb)({type:Date})],ae.prototype,"created",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"credential",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"culture",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"currentVersion",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"customBaseUrl",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"defaultBasemap",void 0),(0,b._)([(0,T.r)("defaultBasemap")],ae.prototype,"readDefaultBasemap",null),(0,b._)([(0,Z.Cb)()],ae.prototype,"defaultDevBasemap",void 0),(0,b._)([(0,T.r)("defaultDevBasemap")],ae.prototype,"readDefaultDevBasemap",null),(0,b._)([(0,Z.Cb)({type:x.Z})],ae.prototype,"defaultExtent",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"defaultVectorBasemap",void 0),(0,b._)([(0,T.r)("defaultVectorBasemap")],ae.prototype,"readDefaultVectorBasemap",null),(0,b._)([(0,Z.Cb)()],ae.prototype,"description",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"devBasemapGalleryGroupQuery",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"eueiEnabled",void 0),(0,b._)([(0,Z.Cb)({readOnly:!0})],ae.prototype,"extraQuery",null),(0,b._)([(0,Z.Cb)()],ae.prototype,"featuredGroups",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"featuredItemsGroupQuery",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"galleryTemplatesGroupQuery",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"livingAtlasGroupQuery",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"hasCategorySchema",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"helpBase",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"helperServices",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"helpMap",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"homePageFeaturedContent",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"homePageFeaturedContentCount",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"httpPort",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"httpsPort",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"id",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"ipCntryCode",void 0),(0,b._)([(0,Z.Cb)({readOnly:!0})],ae.prototype,"isOrganization",null),(0,b._)([(0,Z.Cb)()],ae.prototype,"isPortal",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"isReadOnly",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"layerTemplatesGroupQuery",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"maxTokenExpirationMinutes",void 0),(0,b._)([(0,Z.Cb)({type:Date})],ae.prototype,"modified",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"name",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"portalHostname",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"portalMode",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"portalProperties",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"region",void 0),(0,b._)([(0,Z.Cb)({readOnly:!0})],ae.prototype,"restUrl",null),(0,b._)([(0,Z.Cb)()],ae.prototype,"rotatorPanels",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"showHomePageDescription",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"sourceJSON",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"staticImagesUrl",void 0),(0,b._)([(0,Z.Cb)({readOnly:!0,json:{read:!1}})],ae.prototype,"stylesGroupQuery",null),(0,b._)([(0,Z.Cb)({json:{name:"2DStylesGroupQuery"}})],ae.prototype,"stylesGroupQuery2d",void 0),(0,b._)([(0,Z.Cb)({json:{name:"stylesGroupQuery"}})],ae.prototype,"stylesGroupQuery3d",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"supportsHostedServices",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"symbolSetsGroupQuery",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"templatesGroupQuery",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"thumbnail",void 0),(0,b._)([(0,Z.Cb)({readOnly:!0})],ae.prototype,"thumbnailUrl",null),(0,b._)([(0,Z.Cb)()],ae.prototype,"units",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"url",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"urlKey",void 0),(0,b._)([(0,T.r)("urlKey")],ae.prototype,"readUrlKey",null),(0,b._)([(0,Z.Cb)()],ae.prototype,"user",void 0),(0,b._)([(0,T.r)("user")],ae.prototype,"readUser",null),(0,b._)([(0,Z.Cb)()],ae.prototype,"useStandardizedQuery",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"useVectorBasemaps",void 0),(0,b._)([(0,Z.Cb)()],ae.prototype,"vectorBasemapGalleryGroupQuery",void 0),ae=ce=(0,b._)([(0,O.j)("esri.portal.Portal")],ae);const se=ae},96245:(He,ve,p)=>{"use strict";p.r(ve),p.d(ve,{default:()=>W});var g=p(17626),b=p(26584),J=p(86810),B=p(77712),$=(p(85931),p(8314),p(90912)),L=p(76898),D=p(6278);let I=class extends J.wq{constructor(k){super(k),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const k=this.url,Z=this.thumbnail;return k&&Z?this.portal._normalizeUrl(`${k}/info/${Z}?f=json`):null}get url(){const k=this.get("portal.restUrl");return k?k+"/community/groups/"+this.id:null}fetchCategorySchema(k){return this.portal._request(this.url+"/categorySchema",k).then(Z=>{const X=Z.categorySchema||[];return X.some(V=>"contentCategorySetsGroupQuery.LivingAtlas"===V.source)?this._fetchCategorySchemaSet("LivingAtlas",k):X})}fetchMembers(k){return this.portal._request(this.url+"/users",k)}getThumbnailUrl(k){let Z=this.thumbnailUrl;return Z&&k&&(Z+=`&w=${k}`),Z}toJSON(){throw new b.Z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(k,Z){let X=(0,$.se)(D.Z,k);return parseFloat(this.portal.currentVersion)>5?(X=X||new D.Z,this.portal._queryPortal(`/content/groups/${this.id}/search`,X,"PortalItem",Z)):(X=X?X.clone():new D.Z,X.query="group:"+this.id+(X.query?" "+X.query:""),this.portal.queryItems(X,Z))}_fetchCategorySchemaSet(k,Z){return this.portal._fetchSelf(this.portal.authMode,!0,Z).then(X=>{const V=X.contentCategorySetsGroupQuery;if(V){const w=new D.Z;return w.disableExtraQuery=!0,w.num=1,w.query=V,this.portal.queryGroups(w,Z)}throw new b.Z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(X=>{if(X.total){const V=X.results[0],w=new D.Z;return w.num=1,w.query=`typekeywords:"${k}"`,V.queryItems(w,Z)}throw new b.Z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(X=>X.total?X.results[0].fetchData("json",Z).then(V=>{const w=V&&V.categorySchema;return w&&w.length?w:[]}):[])}};(0,g._)([(0,B.Cb)()],I.prototype,"access",void 0),(0,g._)([(0,B.Cb)({type:Date})],I.prototype,"created",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"description",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"id",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"isInvitationOnly",void 0),(0,g._)([(0,B.Cb)({type:Date})],I.prototype,"modified",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"owner",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"portal",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"snippet",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"sortField",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"sortOrder",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"tags",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"thumbnail",void 0),(0,g._)([(0,B.Cb)({readOnly:!0})],I.prototype,"thumbnailUrl",null),(0,g._)([(0,B.Cb)()],I.prototype,"title",void 0),(0,g._)([(0,B.Cb)({readOnly:!0})],I.prototype,"url",null),I=(0,g._)([(0,L.j)("esri.portal.PortalGroup")],I);const W=I},55463:(He,ve,p)=>{"use strict";p.r(ve),p.d(ve,{default:()=>re});var g=p(15861),b=p(17626),J=p(54346),B=p(26584),j=p(86810),C=p(58817),$=p(47996),L=p(62208),D=p(21726),I=p(77712),W=p(90912),k=p(68653),Z=p(76898),X=p(2004),V=p(84687),w=p(14517),T=p(63290),N=(p(85931),p(8314),p(66656));const M=T.Z.getLogger("esri.portal.PortalItemResource");let Q=class extends w.Z{constructor(K){super(K),this.portalItem=null}normalizeCtorArgs(K){return K&&K.portalItem&&K.path?Sr(_t({},K),{path:this._normalizePath(K.path,K.portalItem)}):K}set path(K){(0,L.pC)(K)&&(0,D.YP)(K)?M.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",K)}_castPath(K){return this._normalizePath(K,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(K="json",ae){const se=this.url;if((0,L.Wi)(se))throw new B.Z("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(se,{responseType:K,query:{token:this.portalItem.apiKey},signal:(0,L.U2)(ae,"signal")})}update(K,ae){var se=this;return(0,g.Z)(function*(){return(yield p.e(587).then(p.bind(p,10587))).addOrUpdateResource(se,"update",K,ae)})()}hasPath(){return(0,L.pC)(this.path)}_normalizePath(K,ae){return(0,L.Wi)(K)?K:(K=K.replace(/^\/+/,""),(0,L.pC)(ae)&&(0,D.YP)(K)&&(K=(0,D.PF)(K,ae.itemUrl)),K.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};(0,b._)([(0,I.Cb)()],Q.prototype,"portalItem",void 0),(0,b._)([(0,I.Cb)({type:String,value:null})],Q.prototype,"path",null),(0,b._)([(0,N.p)("path")],Q.prototype,"_castPath",null),(0,b._)([(0,I.Cb)({type:String,readOnly:!0})],Q.prototype,"url",null),(0,b._)([(0,I.Cb)({type:String,readOnly:!0})],Q.prototype,"itemRelativeUrl",null),Q=(0,b._)([(0,Z.j)("esri.portal.PortalItemResource")],Q);const z=Q;let ee=class extends w.Z{constructor(K){super(K),this.created=null,this.rating=null}};(0,b._)([(0,I.Cb)()],ee.prototype,"created",void 0),(0,b._)([(0,I.Cb)()],ee.prototype,"rating",void 0),ee=(0,b._)([(0,Z.j)("esri.portal.PortalRating")],ee);const le=ee;var oe;let ce=oe=class extends((0,j.eC)($.Z)){constructor(K){super(K),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(K){return(0,W.TJ)(oe,K)}destroy(){this.portal=null}get displayName(){const K=this.type,ae=this.typeKeywords||[];let se=K;return"Feature Service"===K||"Feature Collection"===K?se=ae.indexOf("Table")>-1?"Table":ae.indexOf("Route Layer")>-1?"Route Layer":ae.indexOf("Markup")>-1?"Markup":"Feature Layer":"Image Service"===K?se=ae.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":ae.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===K?se="Scene Layer":"Media Service"===K?se="Media Layer":"Scene Package"===K?se="Scene Layer Package":"Stream Service"===K?se="Feature Layer":"Geoprocessing Service"===K&&this.portal&&this.portal.isPortal?se=ae.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":"Geocoding Service"===K?se="Locator":"Geoenrichment Service"===K?se="GeoEnrichment Service":"Microsoft Powerpoint"===K?se="Microsoft PowerPoint":"GeoJson"===K?se="GeoJSON":"Globe Service"===K?se="Globe Layer":"Vector Tile Service"===K?se="Tile Layer":"netCDF"===K?se="NetCDF":"Map Service"===K?se=-1===ae.indexOf("Spatiotemporal")&&(ae.indexOf("Hosted Service")>-1||ae.indexOf("Tiled")>-1)&&-1===ae.indexOf("Relational")?"Tile Layer":"Map Image Layer":K&&K.toLowerCase().indexOf("add in")>-1?se=K.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===K?se="Big Data File Share":"Compact Tile Package"===K?se="Tile Package (tpkx)":"OGCFeatureServer"===K?se="OGC Feature Layer":"web mapping application"===K&&ae.indexOf("configurableApp")>-1&&(se="Instant App"),se}readExtent(K){return K&&K.length?new X.Z(K[0][0],K[0][1],K[1][0],K[1][1]):null}get iconUrl(){const K=this.type&&this.type.toLowerCase()||"",ae=this.typeKeywords||[];let ue,pe=!1,ie=!1,te=!1,Ee=!1,fe=!1,be=!1;return K.indexOf("service")>0||"feature collection"===K||"kml"===K||"wms"===K||"wmts"===K||"wfs"===K?(pe=ae.indexOf("Hosted Service")>-1,"feature service"===K||"feature collection"===K||"kml"===K||"wfs"===K?(ie=ae.indexOf("Table")>-1,te=ae.indexOf("Route Layer")>-1,Ee=ae.indexOf("Markup")>-1,fe=-1!==ae.indexOf("Spatiotemporal"),be=-1!==ae.indexOf("UtilityNetwork"),ue=fe&&ie?"spatiotemporaltable":ie?"table":te?"routelayer":Ee?"markup":fe?"spatiotemporal":pe?"featureshosted":be?"utilitynetwork":"features"):ue="map service"===K||"wms"===K||"wmts"===K?pe||ae.indexOf("Tiled")>-1||"wmts"===K?"maptiles":"mapimages":"scene service"===K?ae.indexOf("Line")>-1?"sceneweblayerline":ae.indexOf("3DObject")>-1?"sceneweblayermultipatch":ae.indexOf("Point")>-1?"sceneweblayerpoint":ae.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":ae.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":ae.indexOf("Polygon")>-1?"sceneweblayerpolygon":ae.indexOf("Building")>-1?"sceneweblayerbuilding":ae.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":"image service"===K?ae.indexOf("Elevation 3D Layer")>-1?"elevationlayer":ae.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":"stream service"===K?"streamlayer":"media service"===K?"mediaservice":"vector tile service"===K?"vectortile":"datastore catalog service"===K?"datastorecollection":"geocoding service"===K?"geocodeservice":"geoprocessing service"===K&&ae.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):ue="web map"===K||"cityengine web scene"===K?"maps":"web scene"===K?ae.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":"web mapping application"===K&&ae.indexOf("configurableApp")>-1?"instantapps":"web mapping application"===K||"mobile application"===K||"application"===K||"operation view"===K||"desktop application"===K?"apps":"map document"===K||"map package"===K||"published map"===K||"scene document"===K||"globe document"===K||"basemap package"===K||"mobile basemap package"===K||"mobile map package"===K||"project package"===K||"project template"===K||"pro map"===K||"layout"===K||"layer"===K&&ae.indexOf("ArcGIS Pro")>-1||"explorer map"===K&&ae.indexOf("Explorer Document")?"mapsgray":"service definition"===K||"csv"===K||"shapefile"===K||"cad drawing"===K||"geojson"===K||"360 vr experience"===K||"netcdf"===K||"administrative report"===K?"datafiles":"explorer add in"===K||"desktop add in"===K||"windows viewer add in"===K||"windows viewer configuration"===K?"appsgray":"arcgis pro add in"===K||"arcgis pro configuration"===K?"addindesktop":"rule package"===K||"file geodatabase"===K||"sqlite geodatabase"===K||"csv collection"===K||"kml collection"===K||"windows mobile package"===K||"map template"===K||"desktop application template"===K||"gml"===K||"arcpad package"===K||"code sample"===K||"form"===K||"document link"===K||"earth configuration"===K||"operations dashboard add in"===K||"rules package"===K||"image"===K||"workflow manager package"===K||"explorer map"===K&&ae.indexOf("Explorer Mapping Application")>-1||ae.indexOf("Document")>-1?"datafilesgray":"network analysis service"===K||"geoprocessing service"===K||"geodata service"===K||"geometry service"===K||"geoprocessing package"===K||"locator package"===K||"geoprocessing sample"===K||"workflow manager service"===K?"toolsgray":"layer"===K||"layer package"===K||"explorer layer"===K?"layersgray":"scene package"===K?"scenepackage":"mobile scene package"===K?"mobilescenepackage":"tile package"===K||"compact tile package"===K?"tilepackage":"task file"===K?"taskfile":"report template"===K?"report-template":"statistical data collection"===K?"statisticaldatacollection":"insights workbook"===K?"workbook":"insights model"===K?"insightsmodel":"insights page"===K?"insightspage":"insights theme"===K?"insightstheme":"hub initiative"===K?"hubinitiative":"hubpage"===K?"hubpage":"hub event"===K?"hubevent":"hub site application"===K?"hubsite":"hub project"===K?"hubproject":"relational database connection"===K?"relationaldatabaseconnection":"big data file share"===K?"datastorecollection":"image collection"===K?"imagecollection":"style"===K?"style":"desktop style"===K?"desktopstyle":"dashboard"===K?"dashboard":"raster function template"===K?"rasterprocessingtemplate":"vector tile package"===K?"vectortilepackage":"ortho mapping project"===K?"orthomappingproject":"ortho mapping template"===K?"orthomappingtemplate":"solution"===K?"solutions":"geopackage"===K?"geopackage":"deep learning package"===K?"deeplearningpackage":"real time analytic"===K?"realtimeanalytics":"big data analytic"===K?"bigdataanalytics":"feed"===K?"feed":"excalibur imagery project"===K?"excaliburimageryproject":"notebook"===K?"notebook":"storymap"===K?"storymap":"survey123 add in"===K?"survey123addin":"mission"===K?"mission":"mission report"===K?"missionreport":"quickcapture project"===K?"quickcaptureproject":"pro report"===K?"proreport":"urban model"===K?"urbanmodel":"web experience"===K?"experiencebuilder":"web experience template"===K?"webexperiencetemplate":"experience builder widget"===K?"experiencebuilderwidget":"experience builder widget package"===K?"experiencebuilderwidgetpackage":"workflow"===K?"workflow":"insights script"===K?"insightsscript":"kernel gateway connection"===K?"kernelgatewayconnection":"hub initiative template"===K?"hubinitiativetemplate":"storymap theme"===K?"storymaptheme":"knowledge graph"===K?"knowledgegraph":"native application"===K?"nativeapp":"native application installer"===K?"nativeappinstaller":"link chart"===K?"linkchart":"investigation"===K?"investigation":"ogcfeatureserver"===K?"features":"pro project"===K?"proproject":"insights workbook package"===K?"insightsworkbookpackage":"apache parquet"===K?"apacheparquet":"maps",ue?(0,J.V)("esri/images/portal/"+ue+"16.png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const K=this.get("portal.restUrl");return K?K+"/content/items/"+this.id:null}get thumbnailUrl(){const K=this.itemUrl,ae=this.thumbnail;return K&&ae?this.portal._normalizeUrl(`${K}/info/${ae}?f=json`):null}get userItemUrl(){const K=this.get("portal.restUrl");if(!K)return null;const ae=this.owner||this.get("portal.user.username");return ae?`${K}/content/users/${this.ownerFolder?`${ae}/${this.ownerFolder}`:ae}/items/${this.id}`:null}load(K){this.portal||(this.portal=V.Z.getDefault());const ae=this.portal.load(K).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:(0,L.pC)(K)?K.signal:null,query:{token:this.apiKey}}):{}).then(se=>{this.sourceJSON=se,this.read(se)});return this.addResolvingPromise(ae),Promise.resolve(this)}addRating(K){const ae={method:"post",query:{}};return K instanceof le&&(K=K.rating),isNaN(K)||"number"!=typeof K||(ae.query.rating=K),this.portal._request(this.itemUrl+"/addRating",ae).then(()=>new le({rating:K,created:new Date}))}clone(){const K={access:this.access,accessInformation:this.accessInformation,applicationProxies:(0,C.d9)(this.applicationProxies),avgRating:this.avgRating,categories:(0,C.d9)(this.categories),created:(0,C.d9)(this.created),culture:this.culture,description:this.description,extent:(0,C.d9)(this.extent),groupCategories:(0,C.d9)(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:(0,C.d9)(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:(0,C.d9)(this.screenshots),size:this.size,snippet:this.snippet,tags:(0,C.d9)(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:(0,C.d9)(this.typeKeywords),url:this.url};return this.loaded&&(K.loadStatus="loaded"),new oe({sourceJSON:this.sourceJSON}).set(K)}createPostQuery(){const K=this.toJSON();for(const ae in K)"tags"===ae&&null!==K[ae]&&(K[ae]=K[ae].join(", ")),"typeKeywords"===ae&&null!==K[ae]&&(K[ae]=K[ae].join(", ")),"extent"===ae&&K[ae]&&(K[ae]=JSON.stringify(K[ae]));return K}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(K="json",ae){return this.portal._request(this.itemUrl+"/data",Sr(_t({responseType:K},ae),{query:{token:this.apiKey}}))}fetchRating(K){return this.portal._request(this.itemUrl+"/rating",_t({query:{token:this.apiKey}},K)).then(ae=>null!=ae.rating?(ae.created=new Date(ae.created),new le(ae)):null)}fetchRelatedItems(K,ae){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",_t({query:Sr(_t({},K),{token:this.apiKey})},ae),oe)}getThumbnailUrl(K){let ae=this.thumbnailUrl;return ae&&K&&(ae+=`&w=${K}`),ae}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(K=>(this.sourceJSON=K,this.read(K),this))}update(K){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const ae=K&&K.data,se={method:"post"};se.query=this.createPostQuery();for(const de in se.query)null===se.query[de]&&(se.query[de]="");return se.query.clearEmptyFields=!0,null!=ae&&("string"==typeof ae?se.query.text=ae:"object"==typeof ae&&(se.query.text=JSON.stringify(ae))),this.portal._request(`${this.userItemUrl}/update`,se).then(()=>this.reload())}):Promise.reject(new B.Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(K){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const ae=K.thumbnail,se=K.filename,de={method:"post"};if("string"==typeof ae)de.query=(0,D.HK)(ae)?{data:ae}:{url:(0,D.hF)(ae)},(0,L.pC)(se)&&(de.query.filename=se);else{const ue=new FormData;(0,L.pC)(se)?ue.append("file",ae,se):ue.append("file",ae),de.body=ue}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,de).then(()=>this.reload())}):Promise.reject(new B.Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}fetchResources(K={},ae){var se=this;return(0,g.Z)(function*(){return(yield p.e(587).then(p.bind(p,10587))).fetchResources(se,K,ae)})()}addResource(K,ae,se){var de=this;return(0,g.Z)(function*(){const ue=yield p.e(587).then(p.bind(p,10587));return K.portalItem=de,ue.addOrUpdateResource(K,"add",ae,se)})()}removeResource(K,ae){var se=this;return(0,g.Z)(function*(){const de=yield p.e(587).then(p.bind(p,10587));if(K.portalItem&&K.portalItem.itemUrl!==se.itemUrl)throw new B.Z("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return de.removeResource(se,K,ae)})()}removeAllResources(K){var ae=this;return(0,g.Z)(function*(){return(yield p.e(587).then(p.bind(p,10587))).removeAllResources(ae,K)})()}resourceFromPath(K){return new z({portalItem:this,path:K})}toJSON(){const K=this.extent,ae={created:this.created&&this.created.getTime(),description:this.description,extent:K&&[[K.xmin,K.ymin],[K.xmax,K.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return(0,C.yd)(ae)}static fromJSON(K){if(!K)return null;if(K.declaredClass)throw new Error("JSON object is already hydrated");return new oe({sourceJSON:K})}_getPostQuery(){const K=this.toJSON();for(const ae in K)"tags"===ae&&null!==K[ae]&&(K[ae]=K[ae].join(", ")),"typeKeywords"===ae&&null!==K[ae]&&(K[ae]=K[ae].join(", ")),"extent"===ae&&K[ae]&&(K[ae]=JSON.stringify(K[ae]));return K}};(0,b._)([(0,I.Cb)({type:["private","shared","org","public"]})],ce.prototype,"access",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"accessInformation",void 0),(0,b._)([(0,I.Cb)({type:String})],ce.prototype,"apiKey",void 0),(0,b._)([(0,I.Cb)({json:{read:{source:"appProxies"}}})],ce.prototype,"applicationProxies",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"avgRating",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"categories",void 0),(0,b._)([(0,I.Cb)({type:Date})],ce.prototype,"created",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"culture",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"description",void 0),(0,b._)([(0,I.Cb)({readOnly:!0})],ce.prototype,"displayName",null),(0,b._)([(0,I.Cb)({type:X.Z})],ce.prototype,"extent",void 0),(0,b._)([(0,k.r)("extent")],ce.prototype,"readExtent",null),(0,b._)([(0,I.Cb)()],ce.prototype,"groupCategories",void 0),(0,b._)([(0,I.Cb)({readOnly:!0})],ce.prototype,"iconUrl",null),(0,b._)([(0,I.Cb)()],ce.prototype,"id",void 0),(0,b._)([(0,I.Cb)({readOnly:!0})],ce.prototype,"isLayer",null),(0,b._)([(0,I.Cb)()],ce.prototype,"itemControl",void 0),(0,b._)([(0,I.Cb)({readOnly:!0})],ce.prototype,"itemUrl",null),(0,b._)([(0,I.Cb)()],ce.prototype,"licenseInfo",void 0),(0,b._)([(0,I.Cb)({type:Date})],ce.prototype,"modified",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"name",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"numComments",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"numRatings",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"numViews",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"owner",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"ownerFolder",void 0),(0,b._)([(0,I.Cb)({type:V.Z})],ce.prototype,"portal",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"screenshots",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"size",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"snippet",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"sourceJSON",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"tags",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"thumbnail",void 0),(0,b._)([(0,I.Cb)({readOnly:!0})],ce.prototype,"thumbnailUrl",null),(0,b._)([(0,I.Cb)()],ce.prototype,"title",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"type",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"typeKeywords",void 0),(0,b._)([(0,I.Cb)()],ce.prototype,"url",void 0),(0,b._)([(0,I.Cb)({readOnly:!0})],ce.prototype,"userItemUrl",null),ce=oe=(0,b._)([(0,Z.j)("esri.portal.PortalItem")],ce);const re=ce},6278:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var k,g=p(17626),b=p(14517),J=p(2076),B=p(58817),j=p(62208),C=p(77712),L=(p(90912),p(76898)),D=p(2004),I=p(65234),W=p(46367);const Z=new J.X({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let X=k=class extends b.Z{constructor(w){super(w),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(w){"asc"!==w&&"desc"!==w||this._set("sortOrder",w)}clone(){return new k({categories:this.categories?(0,B.d9)(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(w,T){let O,x;if(this.categories&&(O=this.categories.map(Q=>Array.isArray(Q)?JSON.stringify(Q):Q)),this.extent){const Q=(0,W.iV)(this.extent,I.Z.WGS84);(0,j.pC)(Q)&&(x=`${Q.xmin},${Q.ymin},${Q.xmax},${Q.ymax}`)}let N=this.query;!this.disableExtraQuery&&w.extraQuery&&(N="("+N+")"+w.extraQuery);const M={categories:O,bbox:x,q:N,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(M.sortField=this.sortField.split(",").map(Q=>Z.toJSON(Q.trim())).join(","),M.sortOrder=this.sortOrder),{query:_t(_t({},T),M)}}};(0,g._)([(0,C.Cb)()],X.prototype,"categories",void 0),(0,g._)([(0,C.Cb)()],X.prototype,"disableExtraQuery",void 0),(0,g._)([(0,C.Cb)({type:D.Z})],X.prototype,"extent",void 0),(0,g._)([(0,C.Cb)()],X.prototype,"filter",void 0),(0,g._)([(0,C.Cb)()],X.prototype,"num",void 0),(0,g._)([(0,C.Cb)()],X.prototype,"query",void 0),(0,g._)([(0,C.Cb)()],X.prototype,"sortField",void 0),(0,g._)([(0,C.Cb)()],X.prototype,"sortOrder",null),(0,g._)([(0,C.Cb)()],X.prototype,"start",void 0),X=k=(0,g._)([(0,L.j)("esri.portal.PortalQueryParams")],X);const V=X},94508:(He,ve,p)=>{"use strict";p.r(ve),p.d(ve,{default:()=>X});var g=p(17626),b=p(26584),J=p(86810),B=p(77712),L=(p(85931),p(8314),p(90912),p(76898));let D=class extends J.wq{constructor(V){super(V),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const V=this.get("portal.restUrl");return V?`${V}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new b.Z("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};(0,g._)([(0,B.Cb)({type:Date})],D.prototype,"created",void 0),(0,g._)([(0,B.Cb)()],D.prototype,"id",void 0),(0,g._)([(0,B.Cb)()],D.prototype,"portal",void 0),(0,g._)([(0,B.Cb)()],D.prototype,"title",void 0),(0,g._)([(0,B.Cb)({readOnly:!0})],D.prototype,"url",null),(0,g._)([(0,B.Cb)()],D.prototype,"username",void 0),D=(0,g._)([(0,L.j)("esri.portal.PortalFolder")],D);const I=D;var k,W=p(96245);let Z=k=class extends J.wq{constructor(...V){super(...V),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const V=this.url,w=this.thumbnail;return V&&w?this.portal._normalizeUrl(`${V}/info/${w}?f=json`):null}get userContentUrl(){const V=this.get("portal.restUrl");return V?`${V}/content/users/${this.username}`:null}get url(){const V=this.get("portal.restUrl");return V?`${V}/community/users/${this.username}`:null}addItem(V){const w=V&&V.item,T=V&&V.data,O=V&&V.folder,x={method:"post"};w&&(x.query=w.createPostQuery(),null!=T&&("string"==typeof T?x.query.text=T:"object"==typeof T&&(x.query.text=JSON.stringify(T))));let N=this.userContentUrl;return O&&(N+="/"+("string"==typeof O?O:O.id)),this.portal._request(N+"/addItem",x).then(M=>(w.id=M.id,w.portal=this.portal,w.loaded?w.reload():w.load()))}deleteItem(V){let w=this.userContentUrl;return V.ownerFolder&&(w+="/"+V.ownerFolder),this.portal._request(w+`/items/${V.id}/delete`,{method:"post"}).then(()=>{V.id=null,V.portal=null})}deleteItems(V){const w=this.userContentUrl+"/deleteItems",T=V.map(O=>O.id);if(T.length){const O={method:"post",query:{items:T.join(",")}};return this.portal._request(w,O).then(()=>{V.forEach(x=>{x.id=null,x.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then(w=>{let T;return T=w&&w.folders?w.folders.map(O=>{const x=I.fromJSON(O);return x.portal=this.portal,x}):[],T})}fetchGroups(){return this.portal._request(this.url).then(V=>{let w;return w=V&&V.groups?V.groups.map(T=>{const O=W.default.fromJSON(T);return O.portal=this.portal,O}):[],w})}fetchItems(V){V||(V={});let w,T=this.userContentUrl;return V.folder&&(T+="/"+V.folder.id),Promise.resolve().then(p.bind(p,55463)).then(({default:O})=>(w=O,this.portal._request(T,{query:{folders:!1,num:V.num||10,start:V.start||1,sortField:V.sortField||"created",sortOrder:V.sortOrder||"asc"}}))).then(O=>{let x;return O&&O.items?(x=O.items.map(N=>{const M=w.fromJSON(N);return M.portal=this.portal,M}),Promise.all(x.map(N=>N.load())).catch(N=>N).then(()=>({items:x,nextStart:O.nextStart,total:O.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(V=>V.tags)}getThumbnailUrl(V){let w=this.thumbnailUrl;return w&&V&&(w+=`&w=${V}`),w}queryFavorites(V){return this.favGroupId?(this._favGroup||(this._favGroup=new W.default({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(V)):Promise.reject(new b.Z("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new b.Z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(V){if(!V)return null;if(V.declaredClass)throw new Error("JSON object is already hydrated");const w=new k;return w.sourceJSON=V,w.read(V),w}};(0,g._)([(0,B.Cb)()],Z.prototype,"access",void 0),(0,g._)([(0,B.Cb)({type:Date})],Z.prototype,"created",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"culture",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"description",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"email",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"favGroupId",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"fullName",void 0),(0,g._)([(0,B.Cb)({type:Date})],Z.prototype,"modified",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"orgId",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"portal",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"preferredView",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"privileges",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"region",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"role",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"roleId",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"sourceJSON",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"thumbnail",void 0),(0,g._)([(0,B.Cb)({readOnly:!0})],Z.prototype,"thumbnailUrl",null),(0,g._)([(0,B.Cb)()],Z.prototype,"units",void 0),(0,g._)([(0,B.Cb)({readOnly:!0})],Z.prototype,"userContentUrl",null),(0,g._)([(0,B.Cb)({readOnly:!0})],Z.prototype,"url",null),(0,g._)([(0,B.Cb)()],Z.prototype,"username",void 0),(0,g._)([(0,B.Cb)()],Z.prototype,"userType",void 0),Z=k=(0,g._)([(0,L.j)("esri.portal.PortalUser")],Z);const X=Z},37281:(He,ve,p)=>{"use strict";function g(B,j){if(!b(B,j)){const C=B.typeKeywords;C?C.push(j):B.typeKeywords=[j]}}function b(B,j){return!!B.typeKeywords&&B.typeKeywords.indexOf(j)>-1}function J(B,j){const C=B.typeKeywords;if(C){const $=C.indexOf(j);$>-1&&C.splice($,1)}}p.d(ve,{qj:()=>g,_$:()=>b,ck:()=>J})},58926:(He,ve,p)=>{"use strict";p.d(ve,{v:()=>b});const b=(0,p(2076).w)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})},4832:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>ae});var Q,g=p(15861),b=p(17626),J=p(65787),B=p(2076),j=p(58817),C=p(63290),$=p(62208),L=p(77712),D=p(66656),I=p(55342),W=p(68653),k=p(76898),Z=p(99433),X=p(90912),V=p(36630),w=p(69357),T=p(2432),O=p(74400),x=p(76457),N=p(10914),M=p(46679);const z=C.Z.getLogger("esri.renderers.ClassBreaksRenderer"),le="percent-of-total",oe="field",ce=new B.X({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:le,esriNormalizeByField:oe}),re=(0,X.se)(O.Z);let K=Q=class extends((0,T.W)(w.Z)){constructor(se){super(se),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(se,de,ue){if(!Array.isArray(se))return;let pe=de.minValue;return se.map(ie=>{const te=new O.Z;return te.read(ie,ue),null==te.minValue&&(te.minValue=pe),null==te.maxValue&&(te.maxValue=te.minValue),pe=te.maxValue,te})}writeClassBreakInfos(se,de,ue,pe){const ie=se.map(te=>te.write({},pe));this._areClassBreaksConsecutive()&&ie.forEach(te=>delete te.classMinValue),de[ue]=ie}castField(se){return null==se?se:"function"==typeof se?(z.error(".field: field must be a string value"),null):(0,X.Zs)(se)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let se=this._get("normalizationType");const de=!!this.normalizationField,ue=null!=this.normalizationTotal;return de||ue?(se=(de?oe:ue&&le)||null,de&&ue&&z.warn("warning: both normalizationField and normalizationTotal are set!")):se!==oe&&se!==le||(se=null),se}set normalizationType(se){this._set("normalizationType",se)}addClassBreakInfo(se,de,ue){let pe=null;pe="number"==typeof se?new O.Z({minValue:se,maxValue:de,symbol:(0,J.se)(ue)}):re((0,j.d9)(se)),this.classBreakInfos.push(pe),1===this.classBreakInfos.length&&this.notifyChange("minValue")}removeClassBreakInfo(se,de){const ue=this.classBreakInfos.length;for(let pe=0;pe<ue;pe++){const ie=[this.classBreakInfos[pe].minValue,this.classBreakInfos[pe].maxValue];if(ie[0]===se&&ie[1]===de){this.classBreakInfos.splice(pe,1);break}}}getBreakIndex(se,de){return this.valueExpression&&((0,$.Wi)(de)||(0,$.Wi)(de.arcade))&&z.warn(""),this.valueExpression?this._getBreakIndexForExpression(se,de):this._getBreakIndexForField(se)}getClassBreakInfo(se,de){var ue=this;return(0,g.Z)(function*(){let pe=de;ue.valueExpression&&((0,$.Wi)(de)||(0,$.Wi)(de.arcade))&&(pe=Sr(_t({},pe),{arcade:yield(0,M.LC)()}));const ie=ue.getBreakIndex(se,pe);return-1!==ie?ue.classBreakInfos[ie]:null})()}getSymbol(se,de){if(this.valueExpression&&((0,$.Wi)(de)||(0,$.Wi)(de.arcade)))return void z.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const ue=this.getBreakIndex(se,de);return ue>-1?this.classBreakInfos[ue].symbol:this.defaultSymbol}getSymbolAsync(se,de){var ue=this;return(0,g.Z)(function*(){let pe=de;if(ue.valueExpression&&((0,$.Wi)(de)||(0,$.Wi)(de.arcade))){const te=yield(0,M.LC)(),{arcadeUtils:Ee}=te;Ee.hasGeometryOperations(ue.valueExpression)&&(yield Ee.enableGeometryOperations()),pe=Sr(_t({},pe),{arcade:te})}const ie=ue.getBreakIndex(se,pe);return ie>-1?ue.classBreakInfos[ie].symbol:ue.defaultSymbol})()}getSymbols(){const se=[];return this.classBreakInfos.forEach(de=>{de.symbol&&se.push(de.symbol)}),this.defaultSymbol&&se.push(this.defaultSymbol),se}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((se,de)=>se+de.getAttributeHash(),"")}getMeshHash(){const se=JSON.stringify(this.backgroundFillSymbol),de=JSON.stringify(this.defaultSymbol),ue=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${se}.${de}.${this.classBreakInfos.reduce((pe,ie)=>pe+ie.getMeshHash(),"")}.${ue}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new Q({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,j.d9)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,j.d9)(this.visualVariables),legendOptions:(0,j.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}collectRequiredFields(se,de){var ue=this;return(0,g.Z)(function*(){const pe=[ue.collectVVRequiredFields(se,de),ue.collectSymbolFields(se,de)];yield Promise.all(pe)})()}collectSymbolFields(se,de){var ue=this;return(0,g.Z)(function*(){const pe=[...ue.getSymbols().map(ie=>ie.collectRequiredFields(se,de)),(0,V.io)(se,de,ue.valueExpression)];(0,V.AB)(se,de,ue.field),(0,V.AB)(se,de,ue.normalizationField),yield Promise.all(pe)})()}_getBreakIndexForExpression(se,de){const{viewingMode:ue,scale:pe,spatialReference:ie,arcade:te}=(0,$.Pt)(de,{});let Ee=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const fe=(0,$.Wg)(te).arcadeUtils;if(!Ee){const ye=fe.createSyntaxTree(this.valueExpression);Ee=fe.createFunction(ye),this._compiledValueExpression.compiledFunction=Ee}this._compiledValueExpression.valueExpression=this.valueExpression;const be=fe.executeFunction(Ee,fe.createExecContext(se,fe.getViewInfo({viewingMode:ue,scale:pe,spatialReference:ie})));return this._getBreakIndexfromInfos(be)}_getBreakIndexForField(se){const ue=se.attributes,pe=this.normalizationType;let ie=parseFloat(ue[this.field]);if(pe){const te=this.normalizationTotal,Ee=parseFloat(ue[this.normalizationField]);if("log"===pe)ie=Math.log(ie)*Math.LOG10E;else if(pe!==le||isNaN(te)){if(pe===oe&&!isNaN(Ee)){if(isNaN(ie)||isNaN(Ee))return-1;ie/=Ee}}else ie=ie/te*100}return this._getBreakIndexfromInfos(ie)}_getBreakIndexfromInfos(se){const de=this.isMaxInclusive;if(null!=se&&"number"==typeof se&&!isNaN(se))for(let ue=0;ue<this.classBreakInfos.length;ue++){const pe=[this.classBreakInfos[ue].minValue,this.classBreakInfos[ue].maxValue];if(pe[0]<=se&&(de?se<=pe[1]:se<pe[1]))return ue}return-1}_areClassBreaksConsecutive(){const se=this.classBreakInfos,de=se.length;for(let ue=1;ue<de;ue++)if(se[ue-1].maxValue!==se[ue].minValue)return!1;return!0}};(0,b._)([(0,L.Cb)(x.K)],K.prototype,"backgroundFillSymbol",void 0),(0,b._)([(0,L.Cb)({type:[O.Z]})],K.prototype,"classBreakInfos",void 0),(0,b._)([(0,W.r)("classBreakInfos")],K.prototype,"readClassBreakInfos",null),(0,b._)([(0,Z.c)("classBreakInfos")],K.prototype,"writeClassBreakInfos",null),(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],K.prototype,"defaultLabel",void 0),(0,b._)([(0,L.Cb)(x.G)],K.prototype,"defaultSymbol",void 0),(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],K.prototype,"field",void 0),(0,b._)([(0,D.p)("field")],K.prototype,"castField",null),(0,b._)([(0,L.Cb)({type:Boolean})],K.prototype,"isMaxInclusive",void 0),(0,b._)([(0,L.Cb)({type:N.Z,json:{write:!0}})],K.prototype,"legendOptions",void 0),(0,b._)([(0,L.Cb)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],K.prototype,"minValue",null),(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],K.prototype,"normalizationField",void 0),(0,b._)([(0,L.Cb)({type:Number,cast:se=>(0,X.q9)(se),json:{write:!0}})],K.prototype,"normalizationTotal",void 0),(0,b._)([(0,L.Cb)({type:ce.apiValues,value:null,json:{type:ce.jsonValues,read:ce.read,write:ce.write}})],K.prototype,"normalizationType",null),(0,b._)([(0,I.J)({classBreaks:"class-breaks"})],K.prototype,"type",void 0),(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],K.prototype,"valueExpression",void 0),(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],K.prototype,"valueExpressionTitle",void 0),K=Q=(0,b._)([(0,k.j)("esri.renderers.ClassBreaksRenderer")],K);const ae=K},49067:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>X});var k,g=p(15861),b=p(17626),J=p(58817),B=p(77712),C=(p(90912),p(76898)),$=p(99433),L=p(36630),D=p(69357),I=p(2432),W=p(29996);let Z=k=class extends((0,I.W)(D.Z)){constructor(V){super(V),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new W.DictionaryLoader(this.url,this.config,this.fieldMap)}writeData(V,w){V&&(w.scalingExpressionInfo={expression:V,returnType:"number"})}writeVisualVariables(V,w,T,O){null!=O&&O.origin||super.writeVisualVariables(V,w,T,O)}clone(){return new k({config:(0,J.d9)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,J.d9)(this.fieldMap),url:(0,J.d9)(this.url),visualVariables:(0,J.d9)(this.visualVariables)})}getSymbolAsync(V,w){var T=this;return(0,g.Z)(function*(){return T._loader.getSymbolAsync(V,w)})()}collectRequiredFields(V,w){var T=this;return(0,g.Z)(function*(){yield T.collectVVRequiredFields(V,w),T.scaleExpression&&(yield(0,L.io)(V,w,T.scaleExpression));for(const O in T.fieldMap){const x=T.fieldMap[O];w.has(x)&&V.add(x)}})()}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((V,w)=>V+w.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};(0,b._)([(0,B.Cb)({type:W.DictionaryLoader})],Z.prototype,"_loader",null),(0,b._)([(0,B.Cb)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Z.prototype,"config",void 0),(0,b._)([(0,B.Cb)({type:Object,json:{write:!0}})],Z.prototype,"fieldMap",void 0),(0,b._)([(0,B.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Z.prototype,"scaleExpression",void 0),(0,b._)([(0,$.c)("scaleExpression")],Z.prototype,"writeData",null),(0,b._)([(0,B.Cb)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(V){return{enabled:!!V&&!!this.scaleExpression}}}}})],Z.prototype,"scaleExpressionTitle",void 0),(0,b._)([(0,B.Cb)({type:String,json:{write:!0}})],Z.prototype,"url",void 0),(0,b._)([(0,$.c)("visualVariables")],Z.prototype,"writeVisualVariables",null),Z=k=(0,b._)([(0,C.j)("esri.renderers.DictionaryRenderer")],Z);const X=Z},26284:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>K});var O,g=p(15861),b=p(17626),J=p(91558),B=p(58817),j=p(83960),C=p(90912),$=p(55342),L=p(77712),D=p(76898),I=p(36630),W=p(69357),k=p(2432),Z=p(86810),X=p(63290),T=(p(85931),p(8314),p(66656));const x=X.Z.getLogger("esri.renderers.support.AttributeColorInfo");let N=O=class extends Z.wq{constructor(ae){super(ae),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(ae){return null==ae?ae:"function"==typeof ae?(x.error(".field: field must be a string value"),null):(0,C.Zs)(ae)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new O({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,b._)([(0,L.Cb)({type:J.Z,json:{type:[Number],write:!0}})],N.prototype,"color",void 0),(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],N.prototype,"field",void 0),(0,b._)([(0,T.p)("field")],N.prototype,"castField",null),(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],N.prototype,"label",void 0),(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],N.prototype,"valueExpression",void 0),(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],N.prototype,"valueExpressionTitle",void 0),N=O=(0,b._)([(0,D.j)("esri.renderers.support.AttributeColorInfo")],N);const M=N;var Q;let z=Q=class extends Z.wq{constructor(){super(...arguments),this.unit=null}clone(){return new Q({unit:this.unit})}};(0,b._)([(0,L.Cb)({type:String,json:{write:!0}})],z.prototype,"unit",void 0),z=Q=(0,b._)([(0,D.j)("esri.renderers.support.DotDensityLegendOptions")],z);const ee=z;var ce,le=p(88493),oe=p(52068);let re=ce=class extends((0,k.W)(W.Z)){constructor(ae){super(ae),this.attributes=null,this.backgroundColor=new J.Z([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new oe.Z,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(ae){if(null==this.referenceScale)return this.dotValue;const se=ae/this.referenceScale*this.dotValue;return se<1?1:se}getSymbol(){return new le.Z({outline:this.outline})}getSymbolAsync(){var ae=this;return(0,g.Z)(function*(){return ae.getSymbol()})()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((ae,se)=>ae+se.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new ce({attributes:(0,B.d9)(this.attributes),backgroundColor:(0,B.d9)(this.backgroundColor),dotBlendingEnabled:(0,B.d9)(this.dotBlendingEnabled),dotShape:(0,B.d9)(this.dotShape),dotSize:(0,B.d9)(this.dotSize),dotValue:(0,B.d9)(this.dotValue),legendOptions:(0,B.d9)(this.legendOptions),outline:(0,B.d9)(this.outline),referenceScale:(0,B.d9)(this.referenceScale),visualVariables:(0,B.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(ae=>ae.field||ae.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}collectRequiredFields(ae,se){var de=this;return(0,g.Z)(function*(){yield de.collectVVRequiredFields(ae,se);for(const ue of de.attributes)ue.valueExpression&&(yield(0,I.io)(ae,se,ue.valueExpression)),ue.field&&ae.add(ue.field)})()}};(0,b._)([(0,L.Cb)({type:[M],json:{write:!0}})],re.prototype,"attributes",void 0),(0,b._)([(0,L.Cb)({type:J.Z,json:{write:!0}})],re.prototype,"backgroundColor",void 0),(0,b._)([(0,L.Cb)({type:Boolean}),(0,j.B)("dotBlendingEnabled")],re.prototype,"blendDots",void 0),(0,b._)([(0,L.Cb)({type:Boolean,json:{write:!0}})],re.prototype,"dotBlendingEnabled",void 0),(0,b._)([(0,L.Cb)({type:String,json:{write:!1}})],re.prototype,"dotShape",void 0),(0,b._)([(0,L.Cb)({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],re.prototype,"dotSize",void 0),(0,b._)([(0,L.Cb)({type:ee,json:{write:!0}})],re.prototype,"legendOptions",void 0),(0,b._)([(0,L.Cb)({type:oe.Z,json:{default:null,write:!0}})],re.prototype,"outline",void 0),(0,b._)([(0,L.Cb)({type:Number,json:{write:!0}})],re.prototype,"dotValue",void 0),(0,b._)([(0,L.Cb)({type:Number}),(0,j.B)("dotValue")],re.prototype,"referenceDotValue",void 0),(0,b._)([(0,L.Cb)({type:Number,json:{write:!0}})],re.prototype,"referenceScale",void 0),(0,b._)([(0,L.Cb)({type:Number,json:{write:!0}})],re.prototype,"seed",void 0),(0,b._)([(0,$.J)({dotDensity:"dot-density"})],re.prototype,"type",void 0),re=ce=(0,b._)([(0,D.j)("esri.renderers.DotDensityRenderer")],re);const K=re},54928:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>x});var X,g=p(15861),b=p(17626),J=p(91558),B=p(58817),j=p(77712),$=(p(90912),p(55342)),L=p(76898),D=p(36630),I=p(69357),W=p(86810);p(85931),p(8314);let V=X=class extends W.wq{constructor(N){super(N),this.color=null,this.ratio=null}clone(){return new X({color:this.color,ratio:this.ratio})}};(0,b._)([(0,j.Cb)({type:J.Z,json:{write:!0}})],V.prototype,"color",void 0),(0,b._)([(0,j.Cb)({type:Number,json:{write:!0}})],V.prototype,"ratio",void 0),V=X=(0,b._)([(0,L.j)("esri.renderers.support.HeatmapColorStop")],V);const w=V;var T;let O=T=class extends I.Z{constructor(N){super(N),this.blurRadius=10,this.referenceScale=0,this.colorStops=[new w({ratio:0,color:new J.Z("rgba(255, 140, 0, 0)")}),new w({ratio:.75,color:new J.Z("rgba(255, 140, 0, 1)")}),new w({ratio:.9,color:new J.Z("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap"}collectRequiredFields(N,M){var Q=this;return(0,g.Z)(function*(){const z=Q.field;z&&"string"==typeof z&&(0,D.AB)(N,M,z)})()}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new T({blurRadius:this.blurRadius,referenceScale:this.referenceScale,colorStops:(0,B.d9)(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};(0,b._)([(0,j.Cb)({type:Number,json:{write:!0}})],O.prototype,"blurRadius",void 0),(0,b._)([(0,j.Cb)({type:Number})],O.prototype,"referenceScale",void 0),(0,b._)([(0,j.Cb)({type:[w],json:{write:!0}})],O.prototype,"colorStops",void 0),(0,b._)([(0,j.Cb)({type:String,json:{write:!0}})],O.prototype,"field",void 0),(0,b._)([(0,j.Cb)({type:Number,json:{write:{overridePolicy:(N,M,Q)=>({enabled:null==Q})}}})],O.prototype,"fieldOffset",void 0),(0,b._)([(0,j.Cb)({type:Number,json:{write:!0}})],O.prototype,"maxPixelIntensity",void 0),(0,b._)([(0,j.Cb)({type:Number,json:{write:!0}})],O.prototype,"minPixelIntensity",void 0),(0,b._)([(0,$.J)({heatmap:"heatmap"})],O.prototype,"type",void 0),O=T=(0,b._)([(0,L.j)("esri.renderers.HeatmapRenderer")],O);const x=O},69357:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>Z});var g=p(15861),b=p(17626),J=p(2076),B=p(86810),j=p(77712),D=(p(85931),p(8314),p(90912),p(76898)),I=p(15312);const W=new J.X({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});let k=class extends B.wq{constructor(X){super(X),this.authoringInfo=null,this.type=null}getRequiredFields(X){var V=this;return(0,g.Z)(function*(){if(!V.collectRequiredFields)return[];const w=new Set;return yield V.collectRequiredFields(w,X),Array.from(w).sort()})()}getSymbol(X,V){}getSymbolAsync(X,V){return(0,g.Z)(function*(){})()}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};(0,b._)([(0,j.Cb)({type:I.Z,json:{write:!0}})],k.prototype,"authoringInfo",void 0),(0,b._)([(0,j.Cb)({type:W.apiValues,readOnly:!0,json:{type:W.jsonValues,read:!1,write:{writer:W.write,ignoreOrigin:!0}}})],k.prototype,"type",void 0),k=(0,b._)([(0,D.j)("esri.renderers.Renderer")],k);const Z=k},40342:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>Z});var W,g=p(15861),b=p(17626),J=p(58817),B=p(77712),C=(p(90912),p(55342)),$=p(76898),L=p(69357),D=p(2432),I=p(76457);let k=W=class extends((0,D.W)(L.Z)){constructor(X){super(X),this.description=null,this.label=null,this.symbol=null,this.type="simple"}collectRequiredFields(X,V){var w=this;return(0,g.Z)(function*(){yield Promise.all([w.collectSymbolFields(X,V),w.collectVVRequiredFields(X,V)])})()}collectSymbolFields(X,V){var w=this;return(0,g.Z)(function*(){yield Promise.all(w.getSymbols().map(T=>T.collectRequiredFields(X,V)))})()}getSymbol(X,V){return this.symbol}getSymbolAsync(X,V){var w=this;return(0,g.Z)(function*(){return w.symbol})()}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((X,V)=>X+V.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((X,V)=>X+JSON.stringify(V),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new W({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:(0,J.d9)(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};(0,b._)([(0,B.Cb)({type:String,json:{write:!0}})],k.prototype,"description",void 0),(0,b._)([(0,B.Cb)({type:String,json:{write:!0}})],k.prototype,"label",void 0),(0,b._)([(0,B.Cb)(I.G)],k.prototype,"symbol",void 0),(0,b._)([(0,C.J)({simple:"simple"})],k.prototype,"type",void 0),k=W=(0,b._)([(0,$.j)("esri.renderers.SimpleRenderer")],k);const Z=k},14726:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>de});var re,g=p(15861),b=p(17626),J=p(65787),B=p(26584),j=p(58817),C=p(63290),$=p(62208),L=p(94113),D=p(77712),I=p(66656),W=p(55342),k=p(68653),Z=p(76898),X=p(99433),V=p(84682),w=p(90912),T=p(36630),O=p(84687),x=p(69357),N=p(2432),M=p(76457),Q=p(10914),z=p(87266),ee=p(46679),le=p(29840),oe=p(78241),ce=p(12874);const K=C.Z.getLogger("esri.renderers.UniqueValueRenderer"),ae=(0,w.se)(z.Z);let se=re=class extends((0,N.W)(x.Z)){constructor(ue){super(ue),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(pe,ie){if(!pe&&!ie)return;if(!pe||!ie)return{type:"complete",oldValue:pe,newValue:ie};let te=!1;const Ee={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let fe=0;fe<ie.length;fe++){const be=pe.find(ye=>ye.value===ie[fe].value);be?(0,V.Hg)(be,ie[fe])?(Ee.changed.push({type:"complete",oldValue:be,newValue:ie[fe]}),te=!0):Ee.unchanged.push({oldValue:be,newValue:ie[fe]}):(Ee.added.push(ie[fe]),te=!0)}for(let fe=0;fe<pe.length;fe++)ie.find(be=>be.value===pe[fe].value)||(Ee.removed.push(pe[fe]),te=!0);return te?Ee:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(ue){return null==ue||"function"==typeof ue?ue:(0,w.Zs)(ue)}writeField(ue,pe,ie,te){"string"==typeof ue?pe[ie]=ue:te&&te.messages?te.messages.push(new B.Z("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):K.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(ue){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",ue)}readPortal(ue,pe,ie){return ie.portal||O.Z.getDefault()}readStyleOrigin(ue,pe,ie){if(pe.styleName)return Object.freeze({styleName:pe.styleName});if(pe.styleUrl){const te=(0,le.f)(pe.styleUrl,ie);return Object.freeze({styleUrl:te})}}writeStyleOrigin(ue,pe,ie,te){ue.styleName?pe.styleName=ue.styleName:ue.styleUrl&&(pe.styleUrl=(0,le.t)(ue.styleUrl,te))}set uniqueValueInfos(ue){this.styleOrigin?K.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",ue),this._updateValueInfoMap())}addUniqueValueInfo(ue,pe){if(this.styleOrigin)return void K.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let ie;ie="object"==typeof ue?ae(ue):new z.Z({value:ue,symbol:(0,J.se)(pe)}),this.uniqueValueInfos.push(ie),this._valueInfoMap[ie.value]=ie}removeUniqueValueInfo(ue){if(this.styleOrigin)K.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let pe=0;pe<this.uniqueValueInfos.length;pe++)if(this.uniqueValueInfos[pe].value===ue+""){delete this._valueInfoMap[ue],this.uniqueValueInfos.splice(pe,1);break}}getUniqueValueInfo(ue,pe){var ie=this;return(0,g.Z)(function*(){let te=pe;return ie.valueExpression&&((0,$.Wi)(pe)||(0,$.Wi)(pe.arcade))&&(te=Sr(_t({},te),{arcade:yield(0,ee.LC)()})),ie._getUniqueValueInfo(ue,te)})()}getSymbol(ue,pe){if(this.valueExpression&&((0,$.Wi)(pe)||(0,$.Wi)(pe.arcade)))return void K.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const ie=this._getUniqueValueInfo(ue,pe);return ie&&ie.symbol||this.defaultSymbol}getSymbolAsync(ue,pe){var ie=this;return(0,g.Z)(function*(){let te=pe;if(ie.valueExpression&&((0,$.Wi)(te)||(0,$.Wi)(te.arcade))){const fe=yield(0,ee.LC)(),{arcadeUtils:be}=fe;be.hasGeometryOperations(ie.valueExpression)&&(yield be.enableGeometryOperations()),te=Sr(_t({},te),{arcade:fe})}const Ee=ie._getUniqueValueInfo(ue,te);return Ee&&Ee.symbol||ie.defaultSymbol})()}getSymbols(){const ue=[];for(const pe of this.uniqueValueInfos)pe.symbol&&ue.push(pe.symbol);return this.defaultSymbol&&ue.push(this.defaultSymbol),ue}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((ue,pe)=>ue+pe.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((ue,pe)=>ue+pe.getMeshHash(),"")}.${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}.${this.valueExpression}`}clone(){const ue=new re({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,j.d9)(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,j.d9)(this.visualVariables),legendOptions:(0,j.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:(0,j.d9)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(ue._isDefaultSymbolDerived=!0),ue._set("portal",this.portal);const pe=(0,j.d9)(this.uniqueValueInfos);return this.styleOrigin&&(ue._set("styleOrigin",Object.freeze((0,j.d9)(this.styleOrigin))),Object.freeze(pe)),ue._set("uniqueValueInfos",pe),ue._updateValueInfoMap(),ue}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}collectRequiredFields(ue,pe){var ie=this;return(0,g.Z)(function*(){const te=[ie.collectVVRequiredFields(ue,pe),ie.collectSymbolFields(ue,pe)];yield Promise.all(te)})()}collectSymbolFields(ue,pe){var ie=this;return(0,g.Z)(function*(){const te=[...ie.getSymbols().map(Ee=>Ee.collectRequiredFields(ue,pe)),(0,T.io)(ue,pe,ie.valueExpression)];(0,T.AB)(ue,pe,ie.field),(0,T.AB)(ue,pe,ie.field2),(0,T.AB)(ue,pe,ie.field3),yield Promise.all(te)})()}populateFromStyle(){return(0,oe.n2)(this.styleOrigin,{portal:this.portal}).then(ue=>{const pe=[];return this._valueInfoMap={},ue&&ue.data&&Array.isArray(ue.data.items)&&ue.data.items.forEach(ie=>{const te=new ce.Z({styleUrl:ue.styleUrl,styleName:ue.styleName,portal:this.portal,name:ie.name});this.defaultSymbol||ie.name!==ue.data.defaultItem||(this.defaultSymbol=te,this._isDefaultSymbolDerived=!0);const Ee=new z.Z({value:ie.name,symbol:te});pe.push(Ee),this._valueInfoMap[ie.name]=Ee}),this._set("uniqueValueInfos",Object.freeze(pe)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(ue=>this._valueInfoMap[ue.value+""]=ue)}_getUniqueValueInfo(ue,pe){return this.valueExpression?this._getUnqiueValueInfoForExpression(ue,pe):this._getUnqiueValueInfoForFields(ue)}_getUnqiueValueInfoForExpression(ue,pe){const{viewingMode:ie,scale:te,spatialReference:Ee,arcade:fe}=(0,$.Pt)(pe,{});let be=this._cache.compiledFunc;const ye=(0,$.Wg)(fe).arcadeUtils;if(!be){const Ue=ye.createSyntaxTree(this.valueExpression);be=ye.createFunction(Ue),this._cache.compiledFunc=be}const Ke=ye.executeFunction(be,ye.createExecContext(ue,ye.getViewInfo({viewingMode:ie,scale:te,spatialReference:Ee})));return this._valueInfoMap[Ke+""]}_getUnqiueValueInfoForFields(ue){const pe=this.field,ie=ue.attributes;let te;if("function"!=typeof pe&&this.field2){const Ee=this.field2,fe=this.field3,be=[];pe&&be.push(ie[pe]),Ee&&be.push(ie[Ee]),fe&&be.push(ie[fe]),te=be.join(this.fieldDelimiter||"")}else"function"==typeof pe?te=pe(ue):pe&&(te=ie[pe]);return this._valueInfoMap[te+""]}static fromPortalStyle(ue,pe){const ie=new re(pe&&pe.properties);ie._set("styleOrigin",Object.freeze({styleName:ue})),ie._set("portal",pe&&pe.portal||O.Z.getDefault());const te=ie.populateFromStyle();return te.catch(Ee=>{K.error(`#fromPortalStyle('${ue}'[, ...])`,"Failed to create unique value renderer from style name",Ee)}),te}static fromStyleUrl(ue,pe){const ie=new re(pe&&pe.properties);ie._set("styleOrigin",Object.freeze({styleUrl:ue}));const te=ie.populateFromStyle();return te.catch(Ee=>{K.error(`#fromStyleUrl('${ue}'[, ...])`,"Failed to create unique value renderer from style URL",Ee)}),te}};(0,b._)([(0,D.Cb)({readOnly:!0})],se.prototype,"_cache",null),(0,b._)([(0,W.J)({uniqueValue:"unique-value"})],se.prototype,"type",void 0),(0,b._)([(0,D.Cb)(M.K)],se.prototype,"backgroundFillSymbol",void 0),(0,b._)([(0,D.Cb)({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],se.prototype,"field",void 0),(0,b._)([(0,I.p)("field")],se.prototype,"castField",null),(0,b._)([(0,X.c)("field")],se.prototype,"writeField",null),(0,b._)([(0,D.Cb)({type:String,json:{write:!0}})],se.prototype,"field2",void 0),(0,b._)([(0,D.Cb)({type:String,json:{write:!0}})],se.prototype,"field3",void 0),(0,b._)([(0,D.Cb)({type:String,json:{write:!0}})],se.prototype,"valueExpression",void 0),(0,b._)([(0,D.Cb)({type:String,json:{write:!0}})],se.prototype,"valueExpressionTitle",void 0),(0,b._)([(0,D.Cb)({type:Q.Z,json:{write:!0}})],se.prototype,"legendOptions",void 0),(0,b._)([(0,D.Cb)({type:String,json:{write:!0}})],se.prototype,"defaultLabel",void 0),(0,b._)([(0,D.Cb)((0,L.RH)(_t({},M.G),{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],se.prototype,"defaultSymbol",null),(0,b._)([(0,D.Cb)({type:String,json:{write:!0}})],se.prototype,"fieldDelimiter",void 0),(0,b._)([(0,D.Cb)({type:O.Z,readOnly:!0})],se.prototype,"portal",void 0),(0,b._)([(0,k.r)("portal",["styleName"])],se.prototype,"readPortal",null),(0,b._)([(0,D.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],se.prototype,"styleOrigin",void 0),(0,b._)([(0,k.r)("styleOrigin",["styleName","styleUrl"])],se.prototype,"readStyleOrigin",null),(0,b._)([(0,X.c)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],se.prototype,"writeStyleOrigin",null),(0,b._)([(0,D.Cb)({type:[z.Z],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],se.prototype,"uniqueValueInfos",null),se=re=(0,b._)([(0,Z.j)("esri.renderers.UniqueValueRenderer")],se);const de=se},2432:(He,ve,p)=>{"use strict";p.d(ve,{W:()=>Ee});var Z,g=p(15861),b=p(17626),J=p(77712),C=(p(85931),p(8314),p(90912)),$=p(68653),L=p(76898),D=p(99433),I=p(36630),W=p(17977),k=p(8029);let X=Z=class extends W.Z{constructor(fe){super(fe),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(fe){fe&&Array.isArray(fe)&&(fe=fe.filter(be=>!!be)).sort((be,ye)=>be.value-ye.value),this._set("stops",fe)}clone(){return new Z({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(fe=>fe.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(fe=>fe.value||0)}};(0,b._)([(0,J.Cb)({readOnly:!0})],X.prototype,"cache",null),(0,b._)([(0,J.Cb)({type:["color"],json:{type:["colorInfo"]}})],X.prototype,"type",void 0),(0,b._)([(0,J.Cb)({type:String,json:{write:!0}})],X.prototype,"normalizationField",void 0),(0,b._)([(0,J.Cb)({type:[k.Z],json:{write:!0}})],X.prototype,"stops",null),X=Z=(0,b._)([(0,L.j)("esri.renderers.visualVariables.ColorVariable")],X);const V=X;var O,w=p(86810),T=p(92236);let x=O=class extends w.wq{constructor(fe){super(fe),this.label=null,this.opacity=null,this.value=null}readOpacity(fe,be){return(0,T.b)(be.transparency)}writeOpacity(fe,be,ye){be[ye]=(0,T.a)(fe)}clone(){return new O({label:this.label,opacity:this.opacity,value:this.value})}};(0,b._)([(0,J.Cb)({type:String,json:{write:!0}})],x.prototype,"label",void 0),(0,b._)([(0,J.Cb)({type:Number,json:{type:C.z8,write:{target:"transparency"}}})],x.prototype,"opacity",void 0),(0,b._)([(0,$.r)("opacity",["transparency"])],x.prototype,"readOpacity",null),(0,b._)([(0,D.c)("opacity")],x.prototype,"writeOpacity",null),(0,b._)([(0,J.Cb)({type:Number,json:{write:!0}})],x.prototype,"value",void 0),x=O=(0,b._)([(0,L.j)("esri.renderers.visualVariables.support.OpacityStop")],x);const N=x;var M;let Q=M=class extends W.Z{constructor(fe){super(fe),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(fe){fe&&Array.isArray(fe)&&(fe=fe.filter(be=>!!be)).sort((be,ye)=>be.value-ye.value),this._set("stops",fe)}clone(){return new M({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(fe=>fe.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(fe=>fe.value||0)}};(0,b._)([(0,J.Cb)({readOnly:!0})],Q.prototype,"cache",null),(0,b._)([(0,J.Cb)({type:["opacity"],json:{type:["transparencyInfo"]}})],Q.prototype,"type",void 0),(0,b._)([(0,J.Cb)({type:String,json:{write:!0}})],Q.prototype,"normalizationField",void 0),(0,b._)([(0,J.Cb)({type:[N],json:{write:!0}})],Q.prototype,"stops",null),Q=M=(0,b._)([(0,L.j)("esri.renderers.visualVariables.OpacityVariable")],Q);const z=Q;var ee=p(13398),le=p(68598),oe=p(14517),ce=p(2076),re=p(63290),K=p(14889);const ae=re.Z.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),se={color:V,size:le.Z,opacity:z,rotation:ee.Z},de=new ce.X({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),ue=/^\[([^\]]+)\]$/i;let pe=class extends oe.Z{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(fe){if(this._resetVariables(),(fe=fe&&fe.filter(be=>!!be))&&fe.length){for(const be of fe)switch(be.type){case"color":this.colorVariables.push(be);break;case"opacity":this.opacityVariables.push(be);break;case"rotation":this.rotationVariables.push(be);break;case"size":this.sizeVariables.push(be)}this.sizeVariables.length&&this.sizeVariables.some(be=>!!be.target)&&fe.sort((be,ye)=>{let Ke=null;return Ke=be.target===ye.target?0:be.target?1:-1,Ke});for(let be=0;be<fe.length;be++)fe[be].index=be;this._set("visualVariables",fe)}else this._set("visualVariables",fe)}readVariables(fe,be,ye){const{rotationExpression:Ke,rotationType:Ue}=be,he=Ke&&Ke.match(ue),Me=he&&he[1];if(Me&&(fe||(fe=[]),fe.push({type:"rotationInfo",rotationType:Ue,field:Me})),fe)return fe.map(Le=>{const Je=de.read(Le.type),Oe=se[Je];Oe||(ae.warn(`Unknown variable type: ${Je}`),ye&&ye.messages&&ye.messages.push(new K.Z("visual-variable:unsupported",`visualVariable of type '${Je}' is not supported`,{definition:Le,context:ye})));const xe=new Oe;return xe.read(Le,ye),xe})}writeVariables(fe,be){const ye=[];for(const Ke of fe){const Ue=Ke.toJSON(be);Ue&&ye.push(Ue)}return ye}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};(0,b._)([(0,J.Cb)()],pe.prototype,"visualVariables",null),pe=(0,b._)([(0,L.j)("esri.renderers.visualVariables.VisualVariableFactory")],pe);const ie=pe,te={base:W.Z,key:"type",typeMap:{opacity:z,color:V,rotation:ee.Z,size:le.Z}},Ee=fe=>{let be=class extends fe{constructor(){super(...arguments),this._vvFactory=new ie}set visualVariables(ye){this._vvFactory.visualVariables=ye,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(ye,Ke,Ue){return this._vvFactory.readVariables(ye,Ke,Ue)}writeVisualVariables(ye,Ke,Ue,he){Ke[Ue]=this._vvFactory.writeVariables(ye,he)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const ye of this.visualVariables)if(ye.arcadeRequired)return!0;return!1}hasVisualVariables(ye,Ke){return ye?this.getVisualVariablesForType(ye,Ke).length>0:this.getVisualVariablesForType("size",Ke).length>0||this.getVisualVariablesForType("color",Ke).length>0||this.getVisualVariablesForType("opacity",Ke).length>0||this.getVisualVariablesForType("rotation",Ke).length>0}getVisualVariablesForType(ye,Ke){const Ue=this.visualVariables;return Ue?Ue.filter(he=>he.type===ye&&("string"==typeof Ke?he.target===Ke:!1!==Ke||!he.target)):[]}collectVVRequiredFields(ye,Ke){var Ue=this;return(0,g.Z)(function*(){let he=[];Ue.visualVariables&&(he=he.concat(Ue.visualVariables));for(const Me of he)Me&&(Me.field&&(0,I.AB)(ye,Ke,Me.field),Me.normalizationField&&(0,I.AB)(ye,Ke,Me.normalizationField),Me.valueExpression&&(yield(0,I.io)(ye,Ke,Me.valueExpression)))})()}};return(0,b._)([(0,J.Cb)({types:[te],value:null,json:{write:!0}})],be.prototype,"visualVariables",null),(0,b._)([(0,$.r)("visualVariables",["visualVariables","rotationType","rotationExpression"])],be.prototype,"readVisualVariables",null),(0,b._)([(0,D.c)("visualVariables")],be.prototype,"writeVisualVariables",null),be=(0,b._)([(0,L.j)("esri.renderers.mixins.VisualVariablesMixin")],be),be}},15312:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>Ee});var W,g=p(17626),b=p(2076),J=p(86810),B=p(58817),j=p(77712),C=p(90912),$=p(68653),L=p(76898);p(85931),p(8314);let k=W=class extends J.wq{constructor(fe){super(fe),this.minValue=0,this.maxValue=0}clone(){return new W({minValue:this.minValue,maxValue:this.maxValue})}};(0,g._)([(0,j.Cb)({type:Number,json:{write:!0}})],k.prototype,"minValue",void 0),(0,g._)([(0,j.Cb)({type:Number,json:{write:!0}})],k.prototype,"maxValue",void 0),k=W=(0,g._)([(0,L.j)("esri.renderer.support.AuthoringInfoClassBreakInfo")],k);const Z=k;var X;let V=X=class extends J.wq{constructor(fe){super(fe),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new X({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,B.d9)(this.classBreakInfos)})}};(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],V.prototype,"field",void 0),(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],V.prototype,"normalizationField",void 0),(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],V.prototype,"label",void 0),(0,g._)([(0,j.Cb)({type:[Z],json:{write:!0}})],V.prototype,"classBreakInfos",void 0),V=X=(0,g._)([(0,L.j)("esri.renderers.support.AuthoringInfoFieldInfo")],V);const w=V;var O,T=p(66656);const x=new b.X({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),N=new b.X({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),M={key:fe=>"number"==typeof fe?"number":"string",typeMap:{number:Number,string:String},base:null},Q=["high-to-low","above-and-below","centered-on","extremes"],z=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],ee=["seconds","minutes","hours","days","months","years"];let le=O=class extends J.wq{constructor(fe){super(fe),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(fe){return"string"==typeof fe||"number"==typeof fe?fe:null}castStartTime(fe){return"string"==typeof fe||"number"==typeof fe?fe:null}get style(){return"color"===this.type?this._get("style"):null}set style(fe){this._set("style",fe)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(fe){this._set("theme",fe)}clone(){return new O({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};(0,g._)([(0,j.Cb)({types:M,json:{write:!0}})],le.prototype,"endTime",void 0),(0,g._)([(0,T.p)("endTime")],le.prototype,"castEndTime",null),(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],le.prototype,"field",void 0),(0,g._)([(0,j.Cb)({type:Number,json:{write:!0}})],le.prototype,"maxSliderValue",void 0),(0,g._)([(0,j.Cb)({type:Number,json:{write:!0}})],le.prototype,"minSliderValue",void 0),(0,g._)([(0,j.Cb)({types:M,json:{write:!0}})],le.prototype,"startTime",void 0),(0,g._)([(0,T.p)("startTime")],le.prototype,"castStartTime",null),(0,g._)([(0,j.Cb)({type:x.apiValues,value:null,json:{type:x.jsonValues,read:x.read,write:x.write}})],le.prototype,"style",null),(0,g._)([(0,j.Cb)({type:z,value:null,json:{type:z,origins:{"web-scene":{type:Q,write:{writer:(fe,be)=>{Q.indexOf(fe)>-1&&(be.theme=fe)}}}},write:!0}})],le.prototype,"theme",null),(0,g._)([(0,j.Cb)({type:N.apiValues,json:{type:N.jsonValues,read:N.read,write:N.write}})],le.prototype,"type",void 0),(0,g._)([(0,j.Cb)({type:ee,json:{type:ee,write:!0}})],le.prototype,"units",void 0),le=O=(0,g._)([(0,L.j)("esri.renderers.support.AuthoringInfoVisualVariable")],le);const oe=le;var re,ce=p(79023);const K=new b.X({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),ae=new b.X({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),se=new b.X({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),de=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"];let te=re=class extends J.wq{constructor(fe){super(fe),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const fe=this._get("classificationMethod"),be=this.type;return be&&"relationship"!==be?"class-breaks-size"===be||"class-breaks-color"===be?fe||"manual":null:fe}set classificationMethod(fe){this._set("classificationMethod",fe)}readColorRamp(fe){if(fe)return(0,ce.i)(fe)}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(fe){this._set("fields",fe)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(fe){this._set("field1",fe)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(fe){this._set("field2",fe)}get flowTheme(){return"flow"===this.type?this._get("flowTheme"):null}set flowTheme(fe){this._set("flowTheme",fe)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(fe){this._set("focus",fe)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(fe){this._set("numClasses",fe)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(fe){this._set("statistics",fe)}get standardDeviationInterval(){const fe=this.type;return fe&&"relationship"!==fe&&"class-breaks-size"!==fe&&"class-breaks-color"!==fe||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(fe){this._set("standardDeviationInterval",fe)}get type(){return this._get("type")}set type(fe){let be=fe;"classed-size"===fe?be="class-breaks-size":"classed-color"===fe&&(be="class-breaks-color"),this._set("type",be)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(fe){this._set("univariateSymbolStyle",fe)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(fe){this._set("univariateTheme",fe)}clone(){return new re({classificationMethod:this.classificationMethod,colorRamp:(0,B.d9)(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:(0,B.d9)(this.field1),field2:(0,B.d9)(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(fe=>fe.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};(0,g._)([(0,j.Cb)({type:K.apiValues,value:null,json:{type:K.jsonValues,read:K.read,write:K.write,origins:{"web-document":{default:"manual",type:K.jsonValues,read:K.read,write:K.write}}}})],te.prototype,"classificationMethod",null),(0,g._)([(0,j.Cb)({types:ce.V,json:{write:!0}})],te.prototype,"colorRamp",void 0),(0,g._)([(0,$.r)("colorRamp")],te.prototype,"readColorRamp",null),(0,g._)([(0,j.Cb)({type:[String],value:null,json:{write:!0}})],te.prototype,"fields",null),(0,g._)([(0,j.Cb)({type:w,value:null,json:{write:!0}})],te.prototype,"field1",null),(0,g._)([(0,j.Cb)({type:w,value:null,json:{write:!0}})],te.prototype,"field2",null),(0,g._)([(0,j.Cb)({type:["flow-line","wave-front"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],te.prototype,"flowTheme",null),(0,g._)([(0,j.Cb)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],te.prototype,"focus",null),(0,g._)([(0,j.Cb)({type:Number,value:null,json:{type:C.z8,write:!0}})],te.prototype,"numClasses",null),(0,g._)([(0,j.Cb)({type:de,json:{type:de,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],te.prototype,"lengthUnit",void 0),(0,g._)([(0,j.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],te.prototype,"maxSliderValue",void 0),(0,g._)([(0,j.Cb)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],te.prototype,"minSliderValue",void 0),(0,g._)([(0,j.Cb)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],te.prototype,"statistics",null),(0,g._)([(0,j.Cb)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],te.prototype,"standardDeviationInterval",null),(0,g._)([(0,j.Cb)({type:ae.apiValues,value:null,json:{type:ae.jsonValues,read:ae.read,write:ae.write,origins:{"web-scene":{type:se.jsonValues,write:{writer:se.write,overridePolicy:fe=>({enabled:"flow"!==fe})}}}}})],te.prototype,"type",null),(0,g._)([(0,j.Cb)({type:[oe],json:{write:!0}})],te.prototype,"visualVariables",void 0),(0,g._)([(0,j.Cb)({type:["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],te.prototype,"univariateSymbolStyle",null),(0,g._)([(0,j.Cb)({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],te.prototype,"univariateTheme",null),te=re=(0,g._)([(0,L.j)("esri.renderers.support.AuthoringInfo")],te);const Ee=te},74400:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898)),L=p(76457);let I=D=class extends b.wq{constructor(k){super(k),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new D({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const k=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${k}`}};(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],I.prototype,"description",void 0),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],I.prototype,"label",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],I.prototype,"minValue",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],I.prototype,"maxValue",void 0),(0,g._)([(0,J.Cb)(L.G)],I.prototype,"symbol",void 0),I=D=(0,g._)([(0,$.j)("esri.renderers.support.ClassBreakInfo")],I);const W=I},29996:(He,ve,p)=>{"use strict";p.r(ve),p.d(ve,{DictionaryLoader:()=>X});var g=p(15861),b=p(91558),J=p(84792),B=p(26584),j=p(63290),C=p(93961),$=p(62208),L=p(10699),D=p(77275),I=p(46679),W=p(94398);const k=j.Z.getLogger("esri.renderers.support.DictionaryLoader"),Z={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class X{constructor(O,x,N){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new C.Z(100),this.url=O,this.config=x,this.fieldMap=N}getSymbolFields(){return this._symbolFields}getSymbolAsync(O,x){var N=this;return(0,g.Z)(function*(){let M;N._dictionaryPromise||(N._dictionaryPromise=N.fetchResources(x));try{M=yield N._dictionaryPromise}catch(se){if((0,L.D_)(se))return N._dictionaryPromise=null,null}const Q={};if(N.fieldMap)for(const se of N._symbolFields){const de=N.fieldMap[se];Q[se]=de&&null!=O.attributes[de]?""+O.attributes[de]:""}const z=M(Q,x);if(!z||"string"!=typeof z)return null;const ee=(0,D.hP)(z).toString(),le=N._symbolCache.get(ee);if(le)return le.catch(()=>{N._symbolCache.pop(ee)}),le;const oe=z.split(";"),ce=[],re=[];for(const se of oe)if(se)if(se.includes("po:")){const de=se.substr(3).split("|");if(3===de.length){const ue=de[0],pe=de[1];let ie=de[2];if("DashTemplate"===pe)ie=ie.split(" ").map(te=>Number(te));else if("Color"===pe){const te=new b.Z(ie).toRgba();ie=[te[0],te[1],te[2],255*te[3]]}else ie=Number(ie);re.push({primitiveName:ue,propertyName:pe,value:ie})}}else if(se.includes("|")){for(const de of se.split("|"))if(N._itemNames.has(de)){ce.push(de);break}}else N._itemNames.has(se)&&ce.push(se);const K=!(0,$.pC)(O.geometry)||!O.geometry.hasZ&&"point"===O.geometry.type,ae=N._cimPartsToCIMSymbol(ce,re,K,x);return N._symbolCache.put(ee,ae,1),ae})()}fetchResources(O){var x=this;return(0,g.Z)(function*(){if(x._dictionaryPromise)return x._dictionaryPromise;if(!x.url)return void k.error("no valid URL!");const N=(0,$.pC)(O)?O.abortOptions:null,M=(0,J.default)(x.url+"/resources/styles/dictionary-info.json",_t({responseType:"json",query:{f:"json"}},N)),[{data:Q}]=yield Promise.all([M,(0,I.LC)()]);if(!Q)throw x._dictionaryPromise=null,new B.Z("esri.renderers.DictionaryRenderer","Bad dictionary data!");const z=Q.expression,ee=Q.authoringInfo;x._refSymbolUrlTemplate=x.url+"/"+Q.cimRefTemplateUrl,x._itemNames=new Set(Q.itemsNames),x._symbolFields=ee.symbol;const le={};if(x.config){const ce=x.config;for(const re in ce)le[re]=ce[re]}if(ee.configuration)for(const ce of ee.configuration)le.hasOwnProperty(ce.name)||(le[ce.name]=ce.value);const oe=[];if((0,$.pC)(O)&&O.fields&&x.fieldMap)for(const ce of x._symbolFields){const re=x.fieldMap[ce],K=O.fields.filter(ae=>ae.name===re);K.length>0&&oe.push(Sr(_t({},K[0]),{name:ce}))}return x._dictionaryPromise=(0,I.pp)(z,(0,$.pC)(O)?O.spatialReference:null,oe,le).then(ce=>{const re={scale:0};return(K,ae)=>{const se=ce.repurposeFeature({geometry:null,attributes:K});return re.scale=(0,$.pC)(ae)?ae.scale:void 0,ce.evaluate({$feature:se,$view:re})}}).catch(ce=>(k.error("Creating dictinoary expression failed:",ce),null)),x._dictionaryPromise})()}_cimPartsToCIMSymbol(O,x,N,M){var Q=this;return(0,g.Z)(function*(){const z=new Array(O.length);for(let oe=0;oe<O.length;oe++)z[oe]=Q._getSymbolPart(O[oe],M);const ee=yield Promise.all(z),le=Q.fieldMap;for(const oe of ee)V(oe,le);return new W.Z({data:Q._combineSymbolParts(ee,x,N)})})()}_getSymbolPart(O,x){var N=this;return(0,g.Z)(function*(){if(N._ongoingRequests.has(O))return N._ongoingRequests.get(O).then(z=>z.data);const M=N._refSymbolUrlTemplate.replace(/\{itemName\}/gi,O),Q=(0,J.default)(M,_t({responseType:"json",query:{f:"json"}},x));N._ongoingRequests.set(O,Q);try{return(yield Q).data}catch(z){return N._ongoingRequests.delete(O),Promise.reject(z)}})()}_combineSymbolParts(O,x,N){if(!O||0===O.length)return null;const M=_t({},O[0]);if(O.length>1){M.symbolLayers=[];for(const Q of O)M.symbolLayers.unshift(...Q.symbolLayers)}return N&&(M.callout=Z),{type:"CIMSymbolReference",symbol:M,primitiveOverrides:x}}}function V(T,O){if(!T)return;const x=T.symbolLayers;if(!x)return;let N=x.length;for(;N--;){const M=x[N];M&&!1!==M.enable&&"CIMVectorMarker"===M.type&&w(M,O)}}function w(T,O){const x=T.markerGraphics;if(x)for(const N of x){if(!N)continue;const M=N.symbol;if(M)switch(M.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":V(M,O);break;case"CIMTextSymbol":M.fieldMap=O}}}},10914:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let D=L=class extends b.wq{constructor(){super(...arguments),this.title=null}clone(){return new L({title:this.title})}};(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],D.prototype,"title",void 0),D=L=(0,g._)([(0,$.j)("esri.renderers.support.LegendOptions")],D);const I=D},87266:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(86810),J=p(77712),C=(p(85931),p(8314),p(66656)),$=p(76898),L=p(76457);let I=D=class extends b.wq{constructor(k){super(k),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(k){return null==k||"string"==typeof k||"number"==typeof k?k:`${k}`}clone(){return new D({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const k=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${k}`}};(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],I.prototype,"description",void 0),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],I.prototype,"label",void 0),(0,g._)([(0,J.Cb)(L.G)],I.prototype,"symbol",void 0),(0,g._)([(0,J.Cb)({json:{type:String,write:{writer:(k,Z)=>{Z.value=null==k?void 0:k.toString()}}}})],I.prototype,"value",void 0),(0,g._)([(0,C.p)("value")],I.prototype,"castValue",null),I=D=(0,g._)([(0,$.j)("esri.renderers.support.UniqueValueInfo")],I);const W=I},76457:(He,ve,p)=>{"use strict";p.d(ve,{K:()=>$,G:()=>C});var g=p(65787),b=p(383),J=p(65270),B=p(10012),j=p(89673);const C={types:g.QT,json:{write:{writer:J.cW},origins:{"web-scene":{types:g.f_,write:{writer:J.cW},read:{reader:(0,b.d)({types:g.f_})}}}}},$={types:{base:B.Z,key:"type",typeMap:{"simple-fill":g.LB.typeMap["simple-fill"],"picture-fill":g.LB.typeMap["picture-fill"],"polygon-3d":g.LB.typeMap["polygon-3d"]}},json:{write:{writer:J.cW},origins:{"web-scene":{type:j.Z,write:{writer:J.cW}}}}}},33474:(He,ve,p)=>{"use strict";p.d(ve,{i:()=>B,a:()=>C});var g=p(14889),b=p(383),J=p(32088);function B($,L){return C($,null,L)}const j=(0,b.d)({types:J.A});function C($,L,D){return $?$&&($.styleName||$.styleUrl)&&"uniqueValue"!==$.type?(D&&D.messages&&D.messages.push(new g.Z("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+$.type+"'",{definition:$,context:D})),null):j($,L,D):null}},21254:(He,ve,p)=>{"use strict";p.d(ve,{a:()=>J});var g=p(16730),b=p(94425);const J={inches:(0,g.En)(1,"meters","inches"),feet:(0,g.En)(1,"meters","feet"),"us-feet":(0,g.En)(1,"meters","us-feet"),yards:(0,g.En)(1,"meters","yards"),miles:(0,g.En)(1,"meters","miles"),"nautical-miles":(0,g.En)(1,"meters","nautical-miles"),millimeters:(0,g.En)(1,"meters","millimeters"),centimeters:(0,g.En)(1,"meters","centimeters"),decimeters:(0,g.En)(1,"meters","decimeters"),meters:(0,g.En)(1,"meters","meters"),kilometers:(0,g.En)(1,"meters","kilometers"),"decimal-degrees":1/(0,g.ty)(1,"meters",b.sv.radius)}},39683:(He,ve,p)=>{"use strict";p.d(ve,{y:()=>j});var g=p(15861),b=p(59213),J=p(10699),B=p(14889);function j($,L,D){return C.apply(this,arguments)}function C(){return(C=(0,g.Z)(function*($,L,D){const I=$&&$.getAtOrigin&&$.getAtOrigin("renderer",L.origin);if(I&&"unique-value"===I.type&&I.styleOrigin){const W=yield(0,b.q6)(I.populateFromStyle());if((0,J.k_)(D),!1===W.ok){const k=W.error;L&&L.messages&&L.messages.push(new B.Z("renderer:style-reference",`Failed to create unique value renderer from style reference: ${k.message}`,{error:k,context:L})),$.clear("renderer",L.origin)}}})).apply(this,arguments)}},32088:(He,ve,p)=>{"use strict";p.d(ve,{A:()=>L,o:()=>D});var g=p(4832),b=p(49067),J=p(26284),B=p(54928),j=p(69357),C=p(40342),$=p(14726);const L={key:"type",base:j.Z,typeMap:{heatmap:B.Z,simple:C.Z,"unique-value":$.Z,"class-breaks":g.Z,"dot-density":J.Z,dictionary:b.Z},errorContext:"renderer"},D={key:"type",base:j.Z,typeMap:{simple:C.Z,"unique-value":$.Z,"class-breaks":g.Z},errorContext:"renderer"}},13398:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>k});var I,g=p(17626),b=p(26584),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898)),L=p(99433),D=p(17977);let W=I=class extends D.Z{constructor(Z){super(Z),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(Z,X,V,w){w&&w.messages&&w.messages.push(new b.Z("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:`visualVariables[${this.index}].valueExpressionTitle`,context:w}))}clone(){return new I({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};(0,g._)([(0,J.Cb)({readOnly:!0})],W.prototype,"cache",null),(0,g._)([(0,J.Cb)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],W.prototype,"axis",void 0),(0,g._)([(0,J.Cb)({type:["rotation"],json:{type:["rotationInfo"]}})],W.prototype,"type",void 0),(0,g._)([(0,J.Cb)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],W.prototype,"rotationType",void 0),(0,g._)([(0,J.Cb)({type:String,json:{write:!0}})],W.prototype,"valueExpressionTitle",void 0),(0,g._)([(0,L.c)("web-scene","valueExpressionTitle")],W.prototype,"writeValueExpressionTitleWebScene",null),W=I=(0,g._)([(0,$.j)("esri.renderers.visualVariables.RotationVariable")],W);const k=W},68598:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>K});var T,g=p(17626),b=p(26584),J=p(2076),B=p(63290),j=p(23841),C=p(77712),D=(p(85931),p(8314),p(66656)),I=p(68653),W=p(76898),k=p(99433),Z=p(17977),X=p(64902),w=(p(90912),p(11333));let O=T=class extends w.Z{constructor(){super(...arguments),this.customValues=null}clone(){return new T({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};(0,g._)([(0,C.Cb)({type:[Number],json:{write:!0}})],O.prototype,"customValues",void 0),O=T=(0,g._)([(0,W.j)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],O);const x=O;var Q,N=p(86971),M=p(81808);const z=B.Z.getLogger("esri.renderers.visualVariables.SizeVariable"),ee=new J.X({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),le=new J.X({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function oe(ae){if(null!=ae)return"string"==typeof ae||"number"==typeof ae?(0,j.t_)(ae):"size"===ae.type?(0,N.iY)(ae)?ae:(delete(ae=_t({},ae)).type,new re(ae)):void 0}function ce(ae,se,de){if("object"!=typeof ae)return ae;const ue=new re;return ue.read(ae,de),ue}let re=Q=class extends Z.Z{constructor(ae){super(ae),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:M.viewScaleRE.test(this.valueExpression)}}set expression(ae){z.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===ae?(this.valueExpression="$view.scale",this._set("expression",ae)):this._set("expression",null)}set index(ae){(0,N.iY)(this.maxSize)&&(this.maxSize.index=`visualVariables[${ae}].maxSize`),(0,N.iY)(this.minSize)&&(this.minSize.index=`visualVariables[${ae}].minSize`),this._set("index",ae)}get inputValueType(){return(0,N.PS)(this)}set maxDataValue(ae){ae&&this.stops&&(z.warn("cannot set maxDataValue when stops is not null."),ae=null),this._set("maxDataValue",ae)}set maxSize(ae){ae&&this.stops&&(z.warn("cannot set maxSize when stops is not null."),ae=null),this._set("maxSize",ae)}castMaxSize(ae){return oe(ae)}readMaxSize(ae,se,de){return ce(ae,0,de)}set minDataValue(ae){ae&&this.stops&&(z.warn("cannot set minDataValue when stops is not null."),ae=null),this._set("minDataValue",ae)}set minSize(ae){ae&&this.stops&&(z.warn("cannot set minSize when stops is not null."),ae=null),this._set("minSize",ae)}castMinSize(ae){return oe(ae)}readMinSize(ae,se,de){return ce(ae,0,de)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired}set stops(ae){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?ae&&Array.isArray(ae)&&(ae=ae.filter(se=>!!se)).sort((se,de)=>se.value-de.value):ae&&(z.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),ae=null),this._set("stops",ae)}get transformationType(){return(0,N.QW)(this,this.inputValueType)}readValueExpression(ae,se){return ae||se.expression&&"$view.scale"}writeValueExpressionWebScene(ae,se,de,ue){if("$view.scale"===ae){if(ue&&ue.messages){const pe=this.index;ue.messages.push(new b.Z("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:("string"==typeof pe?pe:`visualVariables[${pe}]`)+".valueExpression",context:ue}))}}else se[de]=ae}readValueUnit(ae){return ae?le.read(ae):null}clone(){return new Q({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,N.iY)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,N.iY)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(ae=>ae.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===N.hL.ClampedLinear){const{minSize:ae,maxSize:se}=this;return this.minSize=se,this.maxSize=ae,this}if(this.transformationType===N.hL.Stops){const ae=this.stops,se=ae.map(ue=>ue.size).reverse(),de=ae.length;for(let ue=0;ue<de;ue++)ae[ue].size=se[ue];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(ae=>ae.value||0)}};(0,g._)([(0,C.Cb)({readOnly:!0})],re.prototype,"cache",null),(0,g._)([(0,C.Cb)({type:ee.apiValues,json:{type:ee.jsonValues,origins:{"web-map":{read:!1}},read:ee.read,write:ee.write}})],re.prototype,"axis",void 0),(0,g._)([(0,C.Cb)({type:String,value:null,json:{read:!1}})],re.prototype,"expression",null),(0,g._)([(0,C.Cb)()],re.prototype,"index",null),(0,g._)([(0,C.Cb)({type:String,readOnly:!0})],re.prototype,"inputValueType",null),(0,g._)([(0,C.Cb)({type:x,json:{write:!0}})],re.prototype,"legendOptions",void 0),(0,g._)([(0,C.Cb)({type:Number,value:null,json:{write:!0}})],re.prototype,"maxDataValue",null),(0,g._)([(0,C.Cb)({type:Number,value:null,json:{write:!0}})],re.prototype,"maxSize",null),(0,g._)([(0,D.p)("maxSize")],re.prototype,"castMaxSize",null),(0,g._)([(0,I.r)("maxSize")],re.prototype,"readMaxSize",null),(0,g._)([(0,C.Cb)({type:Number,value:null,json:{write:!0}})],re.prototype,"minDataValue",null),(0,g._)([(0,C.Cb)({type:Number,value:null,json:{write:!0}})],re.prototype,"minSize",null),(0,g._)([(0,D.p)("minSize")],re.prototype,"castMinSize",null),(0,g._)([(0,I.r)("minSize")],re.prototype,"readMinSize",null),(0,g._)([(0,C.Cb)({type:String,json:{write:!0}})],re.prototype,"normalizationField",void 0),(0,g._)([(0,C.Cb)({readOnly:!0})],re.prototype,"arcadeRequired",null),(0,g._)([(0,C.Cb)({type:String})],re.prototype,"scaleBy",void 0),(0,g._)([(0,C.Cb)({type:[X.Z],value:null,json:{write:!0}})],re.prototype,"stops",null),(0,g._)([(0,C.Cb)({type:["outline"],json:{write:!0}})],re.prototype,"target",void 0),(0,g._)([(0,C.Cb)({type:String,readOnly:!0})],re.prototype,"transformationType",null),(0,g._)([(0,C.Cb)({type:["size"],json:{type:["sizeInfo"]}})],re.prototype,"type",void 0),(0,g._)([(0,C.Cb)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],re.prototype,"useSymbolValue",void 0),(0,g._)([(0,C.Cb)({type:String,json:{write:!0}})],re.prototype,"valueExpression",void 0),(0,g._)([(0,I.r)("valueExpression",["valueExpression","expression"])],re.prototype,"readValueExpression",null),(0,g._)([(0,k.c)("web-scene","valueExpression")],re.prototype,"writeValueExpressionWebScene",null),(0,g._)([(0,C.Cb)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],re.prototype,"valueRepresentation",void 0),(0,g._)([(0,C.Cb)({type:le.apiValues,json:{write:le.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],re.prototype,"valueUnit",void 0),(0,g._)([(0,I.r)("valueUnit")],re.prototype,"readValueUnit",null),re=Q=(0,g._)([(0,W.j)("esri.renderers.visualVariables.SizeVariable")],re);const K=re},17977:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var g=p(17626),b=p(2076),J=p(86810),B=p(63290),j=p(77712),L=(p(85931),p(8314),p(66656)),D=p(76898),I=p(90912),W=p(11333);const k=B.Z.getLogger("esri.renderers.visualVariables.VisualVariable"),Z=new b.X({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let X=class extends J.wq{constructor(w){super(w),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(w){return null==w?w:"function"==typeof w?(k.error(".field: field must be a string value"),null):(0,I.Zs)(w)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};(0,g._)([(0,j.Cb)()],X.prototype,"index",void 0),(0,g._)([(0,j.Cb)({type:Z.apiValues,readOnly:!0,json:{read:Z.read,write:Z.write}})],X.prototype,"type",void 0),(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],X.prototype,"field",void 0),(0,g._)([(0,L.p)("field")],X.prototype,"castField",null),(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],X.prototype,"valueExpression",void 0),(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],X.prototype,"valueExpressionTitle",void 0),(0,g._)([(0,j.Cb)({readOnly:!0})],X.prototype,"arcadeRequired",null),(0,g._)([(0,j.Cb)({type:W.Z,json:{write:!0}})],X.prototype,"legendOptions",void 0),X=(0,g._)([(0,D.j)("esri.renderers.visualVariables.VisualVariable")],X);const V=X},8029:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>k});var I,g=p(17626),b=p(91558),J=p(86810),B=p(77712),$=(p(85931),p(8314),p(90912)),L=p(76898),D=p(99433);let W=I=class extends J.wq{constructor(Z){super(Z),this.color=null,this.label=null,this.value=null}writeValue(Z,X,V){X[V]=null==Z?0:Z}clone(){return new I({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};(0,g._)([(0,B.Cb)({type:b.Z,json:{type:[$.z8],write:!0}})],W.prototype,"color",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],W.prototype,"label",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],W.prototype,"value",void 0),(0,g._)([(0,D.c)("value")],W.prototype,"writeValue",null),W=I=(0,g._)([(0,L.j)("esri.renderers.visualVariables.support.ColorStop")],W);const k=W},64902:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(86810),J=p(23841),B=p(77712),L=(p(85931),p(8314),p(90912),p(76898));let I=D=class extends b.wq{constructor(k){super(k),this.label=null,this.size=null,this.value=null}clone(){return new D({label:this.label,size:this.size,value:this.value})}};(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],I.prototype,"label",void 0),(0,g._)([(0,B.Cb)({type:Number,cast:J.t_,json:{write:!0}})],I.prototype,"size",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{write:!0}})],I.prototype,"value",void 0),I=D=(0,g._)([(0,L.j)("esri.renderers.visualVariables.support.SizeStop")],I);const W=I},11333:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(10914);let D=L=class extends $.Z{constructor(){super(...arguments),this.showLegend=null}clone(){return new L({title:this.title,showLegend:this.showLegend})}};(0,g._)([(0,b.Cb)({type:Boolean,json:{write:!0}})],D.prototype,"showLegend",void 0),D=L=(0,g._)([(0,C.j)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],D);const I=D},86971:(He,ve,p)=>{"use strict";var g,b,$;function J($){return $&&"esri.renderers.visualVariables.SizeVariable"===$.declaredClass}function B($){return null!=$&&!isNaN($)&&isFinite($)}function j($){return $.valueExpression?g.Expression:$.field&&"string"==typeof $.field?g.Field:g.Unknown}function C($,L){return(L||j($))===g.Unknown?b.Constant:$.stops?b.Stops:null!=$.minSize&&null!=$.maxSize&&null!=$.minDataValue&&null!=$.maxDataValue?b.ClampedLinear:"unknown"===($.valueUnit||"unknown")?null!=$.minSize&&null!=$.minDataValue?$.minSize&&$.minDataValue?b.Proportional:b.Additive:b.Identity:b.RealWorldSize}p.d(ve,{RY:()=>g,hL:()=>b,PS:()=>j,QW:()=>C,iY:()=>J,qh:()=>B}),($=g||(g={})).Unknown="unknown",$.Expression="expression",$.Field="field",function($){$.Unknown="unknown",$.Stops="stops",$.ClampedLinear="clamped-linear",$.Proportional="proportional",$.Additive="additive",$.Constant="constant",$.Identity="identity",$.RealWorldSize="real-world-size"}(b||(b={}))},81808:(He,ve,p)=>{"use strict";p.r(ve),p.d(ve,{getAllSizes:()=>se,getColor:()=>k,getOpacity:()=>Z,getRotationAngle:()=>X,getSize:()=>T,getSizeForValue:()=>ce,getSizeFromNumberOrVariable:()=>O,getSizeRangeAtScale:()=>re,getVisualVariableValues:()=>K,viewScaleRE:()=>W});var g=p(91558),b=p(88879),J=p(94573),B=p(63290),j=p(62208),C=p(21254),$=p(86971);const L=B.Z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),D=new b.Z,I=Math.PI,W=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function k(de,ue,pe){const ie="visualVariables"in de&&de.visualVariables?de.visualVariables.find(Je=>"color"===Je.type):de;if(!ie)return;if("esri.renderers.visualVariables.ColorVariable"!==ie.declaredClass)return void L.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const te="number"==typeof ue,Ee=te?null:ue,fe=Ee&&Ee.attributes;let be=te?ue:null;const ye=ie.field,{ipData:Ke,hasExpression:Ue}=ie.cache;let he=ie.cache.compiledFunc;if(!ye&&!Ue){const Je=ie.stops;return Je&&Je[0]&&Je[0].color}if("number"!=typeof be)if(Ue){if(!(0,j.pC)(pe)||!(0,j.pC)(pe.arcade))return void L.error("Use of arcade expressions requires an arcade context");const Oe=pe.arcade.arcadeUtils,xe=Oe.getViewInfo({viewingMode:pe.viewingMode,scale:pe.scale,spatialReference:pe.spatialReference}),Be=Oe.createExecContext(Ee,xe);if(!he){const Y=Oe.createSyntaxTree(ie.valueExpression);he=Oe.createFunction(Y),ie.cache.compiledFunc=he}be=Oe.executeFunction(he,Be)}else fe&&(be=fe[ye]);const Me=ie.normalizationField,Le=fe?parseFloat(fe[Me]):void 0;if(null!=be&&(!Me||te||!isNaN(Le)&&0!==Le)){isNaN(Le)||te||(be/=Le);const Je=ae(be,Ke);if(Je){const Oe=Je[0],xe=Je[1],Be=Oe===xe?ie.stops[Oe].color:g.Z.blendColors(ie.stops[Oe].color,ie.stops[xe].color,Je[2],(0,j.pC)(pe)?pe.color:void 0);return new g.Z(Be)}}}function Z(de,ue,pe){const ie="visualVariables"in de&&de.visualVariables?de.visualVariables.find(Je=>"opacity"===Je.type):de;if(!ie)return;if("esri.renderers.visualVariables.OpacityVariable"!==ie.declaredClass)return void L.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const te="number"==typeof ue,Ee=te?null:ue,fe=Ee&&Ee.attributes;let be=te?ue:null;const ye=ie.field,{ipData:Ke,hasExpression:Ue}=ie.cache;let he=ie.cache.compiledFunc;if(!ye&&!Ue){const Je=ie.stops;return Je&&Je[0]&&Je[0].opacity}if("number"!=typeof be)if(Ue){if((0,j.Wi)(pe)||(0,j.Wi)(pe.arcade))return void L.error("Use of arcade expressions requires an arcade context");const Oe=pe.arcade.arcadeUtils,xe=Oe.getViewInfo({viewingMode:pe.viewingMode,scale:pe.scale,spatialReference:pe.spatialReference}),Be=Oe.createExecContext(Ee,xe);if(!he){const Y=Oe.createSyntaxTree(ie.valueExpression);he=Oe.createFunction(Y),ie.cache.compiledFunc=he}be=Oe.executeFunction(he,Be)}else fe&&(be=fe[ye]);const Me=ie.normalizationField,Le=fe?parseFloat(fe[Me]):void 0;if(null!=be&&(!Me||te||!isNaN(Le)&&0!==Le)){isNaN(Le)||te||(be/=Le);const Je=ae(be,Ke);if(Je){const Oe=Je[0],xe=Je[1];if(Oe===xe)return ie.stops[Oe].opacity;{const Be=ie.stops[Oe].opacity;return Be+(ie.stops[xe].opacity-Be)*Je[2]}}}}function X(de,ue,pe){const ie="visualVariables"in de&&de.visualVariables?de.visualVariables.find(Le=>"rotation"===Le.type):de;if(!ie)return;if("esri.renderers.visualVariables.RotationVariable"!==ie.declaredClass)return void L.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const te=ie.axis||"heading",Ee="heading"===te&&"arithmetic"===ie.rotationType?90:0,fe="heading"===te&&"arithmetic"===ie.rotationType?-1:1,be="number"==typeof ue?null:ue,ye=be&&be.attributes,Ke=ie.field,{hasExpression:Ue}=ie.cache;let he=ie.cache.compiledFunc,Me=0;if(!Ke&&!Ue)return Me;if(Ue){if((0,j.Wi)(pe)||(0,j.Wi)(pe.arcade))return void L.error("Use of arcade expressions requires an arcade context");const Je=pe.arcade.arcadeUtils,Oe=Je.getViewInfo({viewingMode:pe.viewingMode,scale:pe.scale,spatialReference:pe.spatialReference}),xe=Je.createExecContext(be,Oe);if(!he){const Be=Je.createSyntaxTree(ie.valueExpression);he=Je.createFunction(Be),ie.cache.compiledFunc=he}Me=Je.executeFunction(he,xe)}else ye&&(Me=ye[Ke]||0);return Me="number"!=typeof Me||isNaN(Me)?null:Ee+fe*Me,Me}function T(de,ue,pe){const ie="visualVariables"in de&&de.visualVariables?de.visualVariables.find(Ee=>"size"===Ee.type):de;if(!ie)return;if("esri.renderers.visualVariables.SizeVariable"!==ie.declaredClass)return void L.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const te=ce(function V(de,ue,pe){const ie="number"==typeof ue,te=ie?null:ue,Ee=te&&te.attributes;let fe=ie?ue:null;const{isScaleDriven:be}=de.cache;let ye=de.cache.compiledFunc;if(be){const Ue=(0,j.pC)(pe)?pe.scale:void 0,he=(0,j.pC)(pe)?pe.view:void 0;fe=null==Ue||"3d"===he?function w(de){let ue=null,pe=null;const ie=de.stops;return ie?(ue=ie[0].value,pe=ie[ie.length-1].value):(ue=de.minDataValue||0,pe=de.maxDataValue||0),(ue+pe)/2}(de):Ue}else if(!ie)switch(de.inputValueType){case $.RY.Expression:{if((0,j.Wi)(pe)||(0,j.Wi)(pe.arcade))return void L.error("Use of arcade expressions requires an arcade context");const he=pe.arcade.arcadeUtils,Me=he.getViewInfo({viewingMode:pe.viewingMode,scale:pe.scale,spatialReference:pe.spatialReference}),Le=he.createExecContext(te,Me);if(!ye){const Je=he.createSyntaxTree(de.valueExpression);ye=he.createFunction(Je),de.cache.compiledFunc=ye}fe=he.executeFunction(ye,Le);break}case $.RY.Field:Ee&&(fe=Ee[de.field]);break;case $.RY.Unknown:fe=null}if(!(0,$.qh)(fe))return null;if(ie||!de.normalizationField)return fe;const Ke=Ee?parseFloat(Ee[de.normalizationField]):null;return(0,$.qh)(Ke)&&0!==Ke?fe/Ke:null}(ie,ue,pe),ie,ue,pe,ie.cache.ipData);return null==te||isNaN(te)?0:te}function O(de,ue,pe){return null==de?null:(0,$.iY)(de)?T(de,ue,pe):(0,$.qh)(de)?de:null}function x(de,ue,pe){return(0,$.qh)(pe)&&de>pe?pe:(0,$.qh)(ue)&&de<ue?ue:de}function ce(de,ue,pe,ie,te){switch(ue.transformationType){case $.hL.Additive:return function N(de,ue,pe,ie){return de+(O(ue.minSize,pe,ie)||ue.minDataValue)}(de,ue,pe,ie);case $.hL.Constant:return function M(de,ue,pe){const ie=de.stops;let te=ie&&ie.length&&ie[0].size;return null==te&&(te=de.minSize),O(te,ue,pe)}(ue,pe,ie);case $.hL.ClampedLinear:return function Q(de,ue,pe,ie){const te=(de-ue.minDataValue)/(ue.maxDataValue-ue.minDataValue),Ee=O(ue.minSize,pe,ie),fe=O(ue.maxSize,pe,ie),be=(0,j.pC)(ie)?ie.shape:void 0;if(de<=ue.minDataValue)return Ee;if(de>=ue.maxDataValue)return fe;if("area"===ue.scaleBy&&be){const ye="circle"===be,Ke=ye?I*(Ee/2)**2:Ee*Ee,Ue=Ke+te*((ye?I*(fe/2)**2:fe*fe)-Ke);return ye?2*Math.sqrt(Ue/I):Math.sqrt(Ue)}return Ee+te*(fe-Ee)}(de,ue,pe,ie);case $.hL.Proportional:return function z(de,ue,pe,ie){const te=(0,j.pC)(ie)?ie.shape:void 0,Ee=de/ue.minDataValue,fe=O(ue.minSize,pe,ie),be=O(ue.maxSize,pe,ie);let ye=null;return ye="circle"===te?2*Math.sqrt(Ee*(fe/2)**2):"square"===te||"diamond"===te||"image"===te?Math.sqrt(Ee*fe**2):Ee*fe,x(ye,fe,be)}(de,ue,pe,ie);case $.hL.Stops:return function ee(de,ue,pe,ie,te){const[Ee,fe,be]=ae(de,te);if(Ee===fe)return O(ue.stops[Ee].size,pe,ie);{const ye=O(ue.stops[Ee].size,pe,ie);return ye+(O(ue.stops[fe].size,pe,ie)-ye)*be}}(de,ue,pe,ie,te);case $.hL.RealWorldSize:return function le(de,ue,pe,ie){const te=((0,j.pC)(ie)&&ie.resolution?ie.resolution:1)*C.a[ue.valueUnit],Ee=O(ue.minSize,pe,ie),fe=O(ue.maxSize,pe,ie),{valueRepresentation:be}=ue;let ye=null;return ye="area"===be?2*Math.sqrt(de/I)/te:"radius"===be||"distance"===be?2*de/te:de/te,x(ye,Ee,fe)}(de,ue,pe,ie);case $.hL.Identity:return de;case $.hL.Unknown:return null}}function re(de,ue,pe){const{isScaleDriven:ie}=de.cache;if(!(ie&&"3d"===pe||ue))return null;const te={scale:ue,view:pe};let Ee=O(de.minSize,D,te),fe=O(de.maxSize,D,te);if(null!=Ee||null!=fe){if(Ee>fe){const be=fe;fe=Ee,Ee=be}return{minSize:Ee,maxSize:fe}}}function K(de,ue,pe){if(!de.visualVariables)return;const ie=[],te=[],Ee=[],fe=[],be=[];for(const ye of de.visualVariables)switch(ye.type){case"color":te.push(ye);break;case"opacity":Ee.push(ye);break;case"rotation":be.push(ye);break;case"size":fe.push(ye)}return te.forEach(ye=>{const Ke=k(ye,ue,pe);ie.push({variable:ye,value:Ke})}),Ee.forEach(ye=>{const Ke=Z(ye,ue,pe);ie.push({variable:ye,value:Ke})}),be.forEach(ye=>{const Ke=X(ye,ue,pe);ie.push({variable:ye,value:Ke})}),fe.forEach(ye=>{const Ke=T(ye,ue,pe);ie.push({variable:ye,value:Ke})}),ie.filter(ye=>null!=ye.value)}function ae(de,ue){if(!ue)return;let pe=0,ie=ue.length-1;return ue.some((te,Ee)=>de<te?(ie=Ee,!0):(pe=Ee,!1)),[pe,ie,(de-ue[pe])/(ue[ie]-ue[pe])]}function se(de,ue,pe){const ie=["proportional","proportional","proportional"];for(const te of de){const Ee=te.useSymbolValue?"symbol-value":T(te,ue,pe);switch(te.axis){case"width":ie[0]=Ee;break;case"depth":ie[1]=Ee;break;case"height":ie[2]=Ee;break;case"width-and-depth":ie[0]=Ee,ie[1]=Ee;break;case"all":case void 0:case null:ie[0]=Ee,ie[1]=Ee,ie[2]=Ee;break;default:(0,J.Bg)(te.axis)}}return ie}},84792:(He,ve,p)=>{"use strict";p.r(ve),p.d(ve,{default:()=>k});var g=p(15861),b=p(59318),J=p(24263),B=p(26584),j=p(8314),C=p(58817),$=p(62208),L=p(10699),D=p(21726),I=p(12680),W=p(33899);function k(he,Me){return Z.apply(this,arguments)}function Z(){return(Z=(0,g.Z)(function*(he,Me){var Le;const Je=(0,D.HK)(he),Oe=(0,D.jc)(he);Oe||Je||(he=(0,D.Fv)(he));const xe={url:he,requestOptions:_t({},(0,$.Wg)(Me))};let Be=(0,D.oh)(he);if(Be){const $e=yield pe(Be,xe);if(null!=$e)return{data:$e,getHeader:N,requestOptions:xe.requestOptions,url:xe.url};Be.after||Be.error||(Be=null)}if(he=xe.url,"image"===(Me=xe.requestOptions).responseType){if((0,j.Z)("host-webworker")||(0,j.Z)("host-node"))throw ee("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),xe)}else if(Je)throw ee("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+Me.responseType),xe);if("head"===Me.method){if(Me.body)throw ee("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),xe);if(Je||Oe)throw ee("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),xe)}if(yield le(),X)return X.execute(he,Me);const Y=new AbortController;(0,L.fu)(Me,()=>Y.abort());const me={controller:Y,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:Be,params:xe,redoRequest:!1,useIdentity:V.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},Ie=yield fe(me);return null==(Le=Be)||null==Le.after||Le.after(Ie),Ie})).apply(this,arguments)}let X;const V=b.Z.request,w="FormData"in globalThis,T=[499,498,403,401],O=["COM_0056","COM_0057","SB_0008"],x=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],N=()=>null,M=Symbol();function Q(he){const Me=(0,D.P$)(he);Me&&!k._corsServers.includes(Me)&&k._corsServers.push(Me)}function z(he){const Me=(0,D.P$)(he);return!Me||Me.endsWith(".arcgis.com")||k._corsServers.includes(Me)||(0,D.kl)(Me)}function ee(he,Me,Le,Je){let Oe="Error";const xe={url:Le.url,requestOptions:Le.requestOptions,getHeader:N,ssl:!1};if(Me instanceof B.Z)return Me.details?(Me.details=(0,C.d9)(Me.details),Me.details.url=Le.url,Me.details.requestOptions=Le.requestOptions):Me.details=xe,Me;if(Me){const Be=Je&&(Ie=>Je.headers.get(Ie)),Y=Je&&Je.status,me=Me.message;me&&(Oe=me),Be&&(xe.getHeader=Be),xe.httpStatus=(null!=Me.httpCode?Me.httpCode:Me.code)||Y||0,xe.subCode=Me.subcode,xe.messageCode=Me.messageCode,xe.messages="string"==typeof Me.details?[Me.details]:Me.details,xe.raw=M in Me?Me[M]:Me}return(0,L.D_)(Me)?(0,L.zE)():new B.Z(he,Oe,xe)}function le(){return oe.apply(this,arguments)}function oe(){return(oe=(0,g.Z)(function*(){(0,j.Z)("host-webworker")?X||(X=yield p.e(3358).then(p.bind(p,23358))):k._abortableFetch||(k._abortableFetch=globalThis.fetch.bind(globalThis))})).apply(this,arguments)}function ce(){return re.apply(this,arguments)}function re(){return(re=(0,g.Z)(function*(){J.id||(yield p.e(9058).then(p.bind(p,59058)))})).apply(this,arguments)}function K(he){return ae.apply(this,arguments)}function ae(){return(ae=(0,g.Z)(function*(he){const Me=he.params.url,Le=he.params.requestOptions,Je=he.controller.signal,Oe=Le.body;let xe=null,Be=null,Y=null;if(w&&"HTMLFormElement"in globalThis&&(Oe instanceof FormData?xe=Oe:Oe instanceof HTMLFormElement&&(Be=Oe,xe=new FormData(Be))),"string"==typeof Oe&&(Y=Oe),he.fetchOptions={cache:Le.cacheBust&&!k._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:Le.headers||{},method:"head"===Le.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:Je},(xe||Y)&&(he.fetchOptions.body=xe||Y),"anonymous"===Le.authMode&&(he.useIdentity=!1),he.hasToken=!!(/token=/i.test(Me)||Le.query&&Le.query.token||xe&&xe.get&&xe.get("token")||Be&&Be.elements.token),!he.hasToken&&b.Z.apiKey&&(0,I.r)(Me)&&(Le.query||(Le.query={}),Le.query.token=b.Z.apiKey,he.hasToken=!0),he.useIdentity&&!he.hasToken&&!he.credentialToken&&!se(Me)&&!(0,L.Hc)(Je)){let me;"immediate"===Le.authMode?(yield ce(),me=yield J.id.getCredential(Me,{signal:Je}),he.credential=me):"no-prompt"===Le.authMode?(yield ce(),me=yield J.id.getCredential(Me,{prompt:!1,signal:Je}).catch(()=>{}),he.credential=me):J.id&&(me=J.id.findCredential(Me)),me&&(he.credentialToken=me.token,he.useSSL=!!me.ssl)}})).apply(this,arguments)}function se(he){return x.some(Me=>Me.test(he))}function de(he){return ue.apply(this,arguments)}function ue(){return(ue=(0,g.Z)(function*(he){let Me=he.params.url;const Le=he.params.requestOptions,Je=he.fetchOptions,Oe=(0,D.jc)(Me)||(0,D.HK)(Me),xe=Le.responseType||"json",Be=Oe?0:null!=Le.timeout?Le.timeout:V.timeout;let Y=!1;if(!Oe){he.useSSL&&(Me=(0,D.hO)(Me)),Le.cacheBust&&"default"===Je.cache&&(Me=(0,D.ZN)(Me,"request.preventCache",Date.now()));let Qe=_t({},Le.query);he.credentialToken&&(Qe.token=he.credentialToken);let Xe=(0,D.B7)(Qe);(0,j.Z)("esri-url-encodes-apostrophe")&&(Xe=Xe.replace(/'/g,"%27"));const qe=Me.length+1+Xe.length;let ke;Y="delete"===Le.method||"post"===Le.method||"put"===Le.method||!!Le.body||qe>V.maxUrlLength;const dt=Le.useProxy||!!(0,D.ed)(Me);if(dt){const We=(0,D.b7)(Me);ke=We.path,!Y&&ke.length+1+qe>V.maxUrlLength&&(Y=!0),We.query&&(Qe=_t(_t({},We.query),Qe))}if("HEAD"===Je.method&&(Y||dt)){if(Y)throw ee("request:invalid-parameters",qe>V.maxUrlLength?new Error("URL exceeds maximum length"):new Error("cannot use POST request when method is 'head'"),he.params);if(dt)throw ee("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),he.params)}if(Y?(Je.method="delete"===Le.method?"DELETE":"put"===Le.method?"PUT":"POST",Le.body?Me=(0,D.fl)(Me,Qe):(Je.body=(0,D.B7)(Qe),Je.headers["Content-Type"]="application/x-www-form-urlencoded")):Me=(0,D.fl)(Me,Qe),dt&&(he.useProxy=!0,Me=`${ke}?${Me}`),Qe.token&&w&&Je.body instanceof FormData){const We=Je.body;We.set?We.set("token",Qe.token):We.append("token",Qe.token)}if(Le.hasOwnProperty("withCredentials"))he.withCredentials=Le.withCredentials;else if(!(0,D.D6)(Me,(0,D.TI)()))if((0,D.kl)(Me))he.withCredentials=!0;else if(J.id){const We=J.id.findServerInfo(Me);We&&We.webTierAuth&&(he.withCredentials=!0)}he.withCredentials&&(Je.credentials="include")}let me,Ie,$e=0,rt=!1;Be>0&&($e=setTimeout(()=>{rt=!0,he.controller.abort()},Be));try{if("native-request-init"===Le.responseType)Ie=Je,Ie.url=Me;else if("image"!==Le.responseType||"default"!==Je.cache||"GET"!==Je.method||Y||te(Le.headers)||!Oe&&!he.useProxy&&V.proxyUrl&&!z(Me)){if(me=yield k._abortableFetch(Me,Je),he.useProxy||Q(Me),"native"===Le.responseType)Ie=me;else if("HEAD"!==Je.method)if(me.ok){switch(xe){case"array-buffer":Ie=yield me.arrayBuffer();break;case"blob":case"image":Ie=yield me.blob();break;default:Ie=yield me.text()}if($e&&(clearTimeout($e),$e=0),"json"===xe||"xml"===xe||"document"===xe)if(Ie)switch(xe){case"json":Ie=JSON.parse(Ie);break;case"xml":Ie=Ee(Ie,"application/xml");break;case"document":Ie=Ee(Ie,"text/html")}else Ie=null;if(Ie){if("array-buffer"===xe||"blob"===xe){const Qe=me.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(Qe)&&Ie["blob"===xe?"size":"byteLength"]<=750)try{const Xe=yield new Response(Ie).json();Xe.error&&(Ie=Xe)}catch(Xe){}}"image"===xe&&Ie instanceof Blob&&(Ie=yield Ue(URL.createObjectURL(Ie),he,!0))}}else Ie=yield me.text()}else Ie=yield Ue(Me,he)}catch(Qe){if("AbortError"===Qe.name)throw rt?new Error("Timeout exceeded"):(0,L.zE)("Request canceled");if(!(!me&&Qe instanceof TypeError&&V.proxyUrl)||Le.body||"delete"===Le.method||"head"===Le.method||"post"===Le.method||"put"===Le.method||he.useProxy||z(Me))throw Qe;he.redoRequest=!0,(0,D.tD)({proxyUrl:V.proxyUrl,urlPrefix:(0,D.P$)(Me)})}finally{$e&&clearTimeout($e)}return[me,Ie]})).apply(this,arguments)}function pe(he,Me){return ie.apply(this,arguments)}function ie(){return(ie=(0,g.Z)(function*(he,Me){if(null!=he.responseData)return he.responseData;if(he.headers&&(Me.requestOptions.headers=_t(_t({},Me.requestOptions.headers),he.headers)),he.query&&(Me.requestOptions.query=_t(_t({},Me.requestOptions.query),he.query)),he.before){let Le,Je;try{Je=yield he.before(Me)}catch(Oe){Le=ee("request:interceptor",Oe,Me)}if((Je instanceof Error||Je instanceof B.Z)&&(Le=ee("request:interceptor",Je,Me)),Le)throw he.error&&he.error(Le),Le;return Je}})).apply(this,arguments)}function te(he){if(he)for(const Me of Object.getOwnPropertyNames(he))if(he[Me])return!0;return!1}function Ee(he,Me){let Le;try{Le=(new DOMParser).parseFromString(he,Me)}catch(Je){}if(!Le||Le.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return Le}function fe(he){return be.apply(this,arguments)}function be(){return(be=(0,g.Z)(function*(he){var Me,Le;let Je,Oe;yield K(he);try{do{[Je,Oe]=yield de(he)}while(!(yield ye(he,Je,Oe)))}catch(Y){const me=ee("request:server",Y,he.params,Je);throw me.details.ssl=he.useSSL,he.interceptor&&he.interceptor.error&&he.interceptor.error(me),me}const xe=he.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(xe)&&!he.hasToken&&!he.credentialToken&&null!=(Me=Oe)&&null!=(Le=Me.user)&&Le.username&&!(0,D.kl)(xe)){const Y=(0,D.P$)(xe,!0);Y&&V.trustedServers.push(Y)}const Be=he.credential;if(Be&&J.id){const Y=J.id.findServerInfo(Be.server);let me=Y&&Y.owningSystemUrl;if(me){me=me.replace(/\/?$/,"/sharing");const Ie=J.id.findCredential(me,Be.userId);Ie&&-1===J.id._getIdenticalSvcIdx(me,Ie)&&Ie.resources.unshift(me)}}return{data:Oe,getHeader:Je?Y=>Je.headers.get(Y):N,requestOptions:he.params.requestOptions,ssl:he.useSSL,url:he.params.url}})).apply(this,arguments)}function ye(he,Me,Le){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(function*(he,Me,Le){if(he.redoRequest)return he.redoRequest=!1,!1;const Je=he.params.requestOptions;if(!Me||"native"===Je.responseType||"native-request-init"===Je.responseType)return!0;let Oe,xe,Be,Y;if(!Me.ok)throw Oe=new Error(`Unable to load ${Me.url} status: ${Me.status}`),Oe[M]=Le,Oe;null!=Le&&Le.error&&(Oe=Le.error),Oe&&(xe=Number(Oe.code),Be=Oe.hasOwnProperty("subcode")?Number(Oe.subcode):null,Y=Oe.messageCode,Y=Y&&Y.toUpperCase());const me=Je.authMode;if(403===xe&&(4===Be||Oe.message&&Oe.message.toLowerCase().indexOf("ssl")>-1&&-1===Oe.message.toLowerCase().indexOf("permission"))){if(!he.useSSL)return he.useSSL=!0,!1}else if(!he.hasToken&&he.useIdentity&&("no-prompt"!==me||498===xe)&&-1!==T.indexOf(xe)&&!se(he.params.url)&&(403!==xe||-1===O.indexOf(Y)&&(null==Be||2===Be&&he.credentialToken))){yield ce();try{const Ie=yield J.id.getCredential(he.params.url,{error:ee("request:server",Oe,he.params),prompt:"no-prompt"!==me,signal:he.controller.signal,token:he.credentialToken});return he.credential=Ie,he.credentialToken=Ie.token,he.useSSL=he.useSSL||Ie.ssl,!1}catch(Ie){if("no-prompt"===me)return he.credential=null,he.credentialToken=null,!1;Oe=Ie}}if(Oe)throw Oe;return!0})).apply(this,arguments)}function Ue(he,Me,Le=!1){const Je=Me.controller.signal,Oe=new Image;return Oe.crossOrigin=Me.withCredentials?"use-credentials":"anonymous",Oe.alt="",Oe.src=he,(0,W.f)(Oe,he,Le,Je)}k._abortableFetch=null,k._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"]},39636:(He,ve,p)=>{"use strict";p.d(ve,{i:()=>D});var g=p(15861),b=p(84792),J=p(90912),B=p(91179),j=p(2618),C=p(10920),$=p(77294);const L=(0,J.se)($.Z);function D(W,k,Z){return I.apply(this,arguments)}function I(){return(I=(0,g.Z)(function*(W,k,Z){k=L(k);const X=(0,j.en)(W),V=_t(Sr(_t({},X.query),{f:"json"}),k.toJSON()),w=k.outSpatialReference,T=(0,B.Ji)(k.geometries[0]),O=(0,j.lA)(V,Z);return(0,b.default)(X.path+"/project",O).then(({data:{geometries:x}})=>(0,C.o)(x,T,w))})).apply(this,arguments)}},10920:(He,ve,p)=>{"use strict";p.d(ve,{o:()=>J,F:()=>b});var g=p(91179);function b(B){return{geometryType:(0,g.Ji)(B[0]),geometries:B.map(j=>j.toJSON())}}function J(B,j,C){const $=(0,g.q9)(j);return B.map(L=>{const D=$.fromJSON(L);return D.spatialReference=C,D})}},76391:(He,ve,p)=>{"use strict";function g(b){const J={};for(const B in b){if("declaredClass"===B)continue;const j=b[B];if(null!=j&&"function"!=typeof j)if(Array.isArray(j)){J[B]=[];for(let C=0;C<j.length;C++)J[B][C]=g(j[C])}else"object"==typeof j?j.toJSON&&(J[B]=JSON.stringify(j)):J[B]=j}return J}p.d(ve,{A:()=>g})},90463:(He,ve,p)=>{"use strict";p.d(ve,{P:()=>j});var g=p(15861),b=p(2618),J=p(20477),B=p(84952);function j($,L,D){return C.apply(this,arguments)}function C(){return(C=(0,g.Z)(function*($,L,D){const I=(0,b.en)($);return(0,J.executeQueryForCount)(I,B.Z.from(L),_t({},D)).then(W=>W.data.count)})).apply(this,arguments)}},24865:(He,ve,p)=>{"use strict";p.d(ve,{G:()=>j});var g=p(15861),b=p(2618),J=p(20477),B=p(84952);function j($,L,D){return C.apply(this,arguments)}function C(){return(C=(0,g.Z)(function*($,L,D){const I=(0,b.en)($);return(0,J.executeQueryForIds)(I,B.Z.from(L),_t({},D)).then(W=>W.data.objectIds)})).apply(this,arguments)}},2865:(He,ve,p)=>{"use strict";p.d(ve,{e:()=>C,F:()=>L});var g=p(15861),b=p(2618),J=p(20477),B=p(17253),j=p(84952);function C(I,W,k){return $.apply(this,arguments)}function $(){return($=(0,g.Z)(function*(I,W,k){const Z=yield L(I,W,k);return B.default.fromJSON(Z)})).apply(this,arguments)}function L(I,W,k){return D.apply(this,arguments)}function D(){return(D=(0,g.Z)(function*(I,W,k){const Z=(0,b.en)(I),X=_t({},k),V=j.Z.from(W),{data:w}=yield(0,J.executeQuery)(Z,V,V.sourceSpatialReference,X);return w})).apply(this,arguments)}},20514:(He,ve,p)=>{"use strict";p.d(ve,{P:()=>j});var g=p(62208),b=p(16730),J=p(37053);function B(L,D,I){if(null==L.hasM||L.hasZ)for(const W of D)for(const k of W)k.length>2&&(k[2]*=I)}function j(L,D,I){if(!L&&!D||!I)return;const W=(0,b._R)(I);C(L,I,W),C(D,I,W)}function C(L,D,I){if(L)for(const W of L)$(W.geometry,D,I)}function $(L,D,I){if((0,g.Wi)(L)||!L.spatialReference||(0,J.fS)(L.spatialReference,D))return;const W=(0,b._R)(L.spatialReference)/I;if(1!==W)if("x"in L)null!=L.z&&(L.z*=W);else if("rings"in L)B(L,L.rings,W);else if("paths"in L)B(L,L.paths,W);else if("points"in L&&(null==L.hasM||L.hasZ))for(const k of L.points)k.length>2&&(k[2]*=W)}},71260:(He,ve,p)=>{"use strict";p.d(ve,{K9:()=>ce,O7:()=>D,G$:()=>Q});var g=p(26584),b=p(62208),J=p(24192),B=p(88071),j=p(98558);const C=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],$=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],L=["upperLeft","lowerLeft"];function D(re){return re>=C.length?null:C[re]}function I(re){return re>=$.length?null:$[re]}function W(re){return re>=L.length?null:L[re]}function k(re,K){return K>=re.geometryTypes.length?null:re.geometryTypes[K]}function Z(re,K,ae){const de=K.createPointGeometry(ae);for(;re.next();)switch(re.tag()){case 3:{const ue=re.getUInt32(),pe=re.pos()+ue;let ie=0;for(;re.pos()<pe;)K.addCoordinatePoint(de,re.getSInt64(),ie++);break}default:re.skip()}return de}function X(re,K,ae){const ue=K.createGeometry(ae),pe=2+(ae.hasZ?1:0)+(ae.hasM?1:0);for(;re.next();)switch(re.tag()){case 2:{const ie=re.getUInt32(),te=re.pos()+ie;let Ee=0;for(;re.pos()<te;)K.addLength(ue,re.getUInt32(),Ee++);break}case 3:{const ie=re.getUInt32(),te=re.pos()+ie;let Ee=0;for(K.allocateCoordinates(ue);re.pos()<te;)K.addCoordinate(ue,re.getSInt64(),Ee),Ee++,Ee===pe&&(Ee=0);break}default:re.skip()}return ue}function V(re){const de=new B.Z;let ue="esriGeometryPoint";for(;re.next();)switch(re.tag()){case 2:{const pe=re.getUInt32(),ie=re.pos()+pe;for(;re.pos()<ie;)de.lengths.push(re.getUInt32());break}case 3:{const pe=re.getUInt32(),ie=re.pos()+pe;for(;re.pos()<ie;)de.coords.push(re.getSInt64());break}case 1:ue=j.A[re.getEnum()];break;default:re.skip()}return{queryGeometry:de,queryGeometryType:ue}}function w(re){for(;re.next();)switch(re.tag()){case 1:return re.getString();case 2:return re.getFloat();case 3:return re.getDouble();case 4:return re.getSInt32();case 5:return re.getUInt32();case 6:return re.getInt64();case 7:return re.getUInt64();case 8:return re.getSInt64();case 9:return re.getBool();default:return re.skip(),null}return null}function T(re){const ie={type:D(0)};for(;re.next();)switch(re.tag()){case 1:ie.name=re.getString();break;case 2:ie.type=D(re.getEnum());break;case 3:ie.alias=re.getString();break;case 4:ie.sqlType=I(re.getEnum());break;case 5:default:re.skip();break;case 6:ie.defaultValue=re.getString()}return ie}function O(re){const se={};for(;re.next();)switch(re.tag()){case 1:se.name=re.getString();break;case 2:se.isSystemMaintained=re.getBool();break;default:re.skip()}return se}function x(re,K,ae,se){const ie=K.createFeature(ae);let te=0;for(;re.next();)switch(re.tag()){case 1:{const Ee=se[te++].name;ie.attributes[Ee]=re.processMessage(w);break}case 2:ie.geometry=re.processMessageWithArgs(X,K,ae);break;case 4:ie.centroid=re.processMessageWithArgs(Z,K,ae);break;default:re.skip()}return ie}function N(re){const ue=[1,1,1,1];for(;re.next();)switch(re.tag()){case 1:ue[0]=re.getDouble();break;case 2:ue[1]=re.getDouble();break;case 4:ue[2]=re.getDouble();break;case 3:ue[3]=re.getDouble();break;default:re.skip()}return ue}function M(re){const ue=[0,0,0,0];for(;re.next();)switch(re.tag()){case 1:ue[0]=re.getDouble();break;case 2:ue[1]=re.getDouble();break;case 4:ue[2]=re.getDouble();break;case 3:ue[3]=re.getDouble();break;default:re.skip()}return ue}function Q(re){const de={originPosition:W(0)};for(;re.next();)switch(re.tag()){case 1:de.originPosition=W(re.getEnum());break;case 2:de.scale=re.processMessage(N);break;case 3:de.translate=re.processMessage(M);break;default:re.skip()}return de}function z(re){const de={};for(;re.next();)switch(re.tag()){case 1:de.shapeAreaFieldName=re.getString();break;case 2:de.shapeLengthFieldName=re.getString();break;case 3:de.units=re.getString();break;default:re.skip()}return de}function ee(re,K){const ie=K.createSpatialReference();for(;re.next();)switch(re.tag()){case 1:ie.wkid=re.getUInt32();break;case 5:ie.wkt=re.getString();break;case 2:ie.latestWkid=re.getUInt32();break;case 3:ie.vcsWkid=re.getUInt32();break;case 4:ie.latestVcsWkid=re.getUInt32();break;default:re.skip()}return ie}function le(re,K){const he=K.createFeatureResult();he.geometryType=k(K,0);let Me=!1;for(;re.next();)switch(re.tag()){case 1:he.objectIdFieldName=re.getString();break;case 3:he.globalIdFieldName=re.getString();break;case 4:he.geohashFieldName=re.getString();break;case 5:he.geometryProperties=re.processMessage(z);break;case 7:he.geometryType=k(K,re.getEnum());break;case 8:he.spatialReference=re.processMessageWithArgs(ee,K);break;case 10:he.hasZ=re.getBool();break;case 11:he.hasM=re.getBool();break;case 12:he.transform=re.processMessage(Q);break;case 9:{const Le=re.getBool();he.exceededTransferLimit=Le;break}case 13:K.addField(he,re.processMessage(T));break;case 15:Me||(K.prepareFeatures(he),Me=!0),K.addFeature(he,re.processMessageWithArgs(x,K,he,he.fields));break;case 2:he.uniqueIdField=re.processMessage(O);break;default:re.skip()}return K.finishFeatureResult(he),he}function oe(re,K){const de={};let ue=null;for(;re.next();)switch(re.tag()){case 4:ue=re.processMessageWithArgs(V);break;case 1:de.featureResult=re.processMessageWithArgs(le,K);break;default:re.skip()}return(0,b.pC)(ue)&&de.featureResult&&K.addQueryGeometry(de,ue),de}function ce(re,K){try{const se=new J.Z(new Uint8Array(re),new DataView(re)),de={};for(;se.next();)2===se.tag()?de.queryResult=se.processMessageWithArgs(oe,K):se.skip();return de}catch(ae){throw new g.Z("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:ae})}}},98558:(He,ve,p)=>{"use strict";p.d(ve,{A:()=>C,J:()=>$});var g=p(16730),b=p(37053),J=p(66385),B=p(95786),j=p(88071);const C=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class ${constructor(D){this.options=D,this.geometryTypes=C,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new B.Z}prepareFeatures(D){this._vertexDimension=2,D.hasZ&&this._vertexDimension++,D.hasM&&this._vertexDimension++}finishFeatureResult(D){if(!D||!D.features||!D.hasZ||!this.options.sourceSpatialReference||!D.spatialReference||(0,b.fS)(D.spatialReference,this.options.sourceSpatialReference)||D.spatialReference.vcsWkid)return;const I=(0,g._R)(this.options.sourceSpatialReference)/(0,g._R)(D.spatialReference);if(1!==I)for(const W of D.features){if(!(0,J.S6)(W))continue;const k=W.geometry.coords;for(let Z=2;Z<k.length;Z+=3)k[Z]*=I}}addFeature(D,I){D.features.push(I)}createFeature(){return new J.u_}createSpatialReference(){return{wkid:0}}createGeometry(){return new j.Z}addField(D,I){D.fields.push(I)}allocateCoordinates(D){D.coords.length=D.lengths.reduce((I,W)=>I+W,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(D,I){D.coords[this._coordinatePtr++]=I}addCoordinatePoint(D,I){D.coords.push(I)}addLength(D,I){D.lengths.push(I)}addQueryGeometry(D,I){D.queryGeometry=I.queryGeometry,D.queryGeometryType=I.queryGeometryType}createPointGeometry(){return new j.Z}}},85262:(He,ve,p)=>{"use strict";p.d(ve,{C:()=>b});var g=p(71260);function b(J,B){const j=(0,g.K9)(J,B),C=j.queryResult.featureResult,$=j.queryResult.queryGeometry,L=j.queryResult.queryGeometryType;if(C&&C.features&&C.features.length&&C.objectIdFieldName){const D=C.objectIdFieldName;for(const I of C.features)I.attributes&&(I.objectId=I.attributes[D])}return C&&(C.queryGeometry=$,C.queryGeometryType=L),C}},20477:(He,ve,p)=>{"use strict";p.r(ve),p.d(ve,{encodeGeometry:()=>W,executeQuery:()=>Z,executeQueryForCount:()=>x,executeQueryForExtent:()=>N,executeQueryForIds:()=>O,executeQueryPBF:()=>V,executeQueryPBFBuffer:()=>T,queryToQueryStringParameters:()=>k,runQuery:()=>M});var g=p(15861),b=p(84792),J=p(62208),B=p(21726),j=p(91179),C=p(13924),$=p(76391),L=p(85262),D=p(61515);const I="Layer does not support extent calculation.";function W(Q,z){if(z&&"extent"===Q.type)return`${Q.xmin},${Q.ymin},${Q.xmax},${Q.ymax}`;if(z&&"point"===Q.type)return`${Q.x},${Q.y}`;const ee=Q.toJSON();return delete ee.spatialReference,JSON.stringify(ee)}function k(Q,z){const ee=Q.geometry,le=Q.toJSON();delete le.compactGeometryEnabled,delete le.defaultSpatialReferenceEnabled;const oe=le,ce=Q.outSpatialReference;let re,K;if((0,J.pC)(ee)&&(re=ee.spatialReference,K=ee.spatialReference.wkid||JSON.stringify(ee.spatialReference),oe.geometryType=(0,j.Ji)(ee),oe.geometry=W(ee,Q.compactGeometryEnabled),oe.inSR=K),le.groupByFieldsForStatistics&&(oe.groupByFieldsForStatistics=le.groupByFieldsForStatistics.join(",")),le.objectIds&&(oe.objectIds=le.objectIds.join(",")),le.orderByFields&&(oe.orderByFields=le.orderByFields.join(",")),!le.outFields||!le.returnDistinctValues&&(null!=z&&z.returnCountOnly||null!=z&&z.returnExtentOnly||null!=z&&z.returnIdsOnly)?delete oe.outFields:oe.outFields=-1!==le.outFields.indexOf("*")?"*":le.outFields.join(","),le.outSR?oe.outSR=le.outSR.wkid||JSON.stringify(le.outSR):ee&&(le.returnGeometry||le.returnCentroid)&&(oe.outSR=oe.inSR),le.returnGeometry&&delete le.returnGeometry,le.outStatistics&&(oe.outStatistics=JSON.stringify(le.outStatistics)),le.pixelSize&&(oe.pixelSize=JSON.stringify(le.pixelSize)),le.quantizationParameters&&(Q.defaultSpatialReferenceEnabled&&(0,J.pC)(re)&&(0,J.pC)(Q.quantizationParameters)&&(0,J.pC)(Q.quantizationParameters.extent)&&re.equals(Q.quantizationParameters.extent.spatialReference)&&delete le.quantizationParameters.extent.spatialReference,oe.quantizationParameters=JSON.stringify(le.quantizationParameters)),le.parameterValues&&(oe.parameterValues=JSON.stringify(le.parameterValues)),le.rangeValues&&(oe.rangeValues=JSON.stringify(le.rangeValues)),le.dynamicDataSource&&(oe.layer=JSON.stringify({source:le.dynamicDataSource}),delete le.dynamicDataSource),le.timeExtent){const ae=le.timeExtent,{start:se,end:de}=ae;null==se&&null==de||(oe.time=se===de?se:`${null==se?"null":se},${null==de?"null":de}`),delete le.timeExtent}return Q.defaultSpatialReferenceEnabled&&(0,J.pC)(re)&&(0,J.pC)(ce)&&re.equals(ce)&&(oe.defaultSR=oe.inSR,delete oe.inSR,delete oe.outSR),oe}function Z(Q,z,ee,le){return X.apply(this,arguments)}function X(){return(X=(0,g.Z)(function*(Q,z,ee,le){const oe=(0,J.pC)(z.timeExtent)&&z.timeExtent.isEmpty?{data:{features:[]}}:yield M(Q,z,"json",le);return(0,D.p)(z,ee,oe.data),oe})).apply(this,arguments)}function V(Q,z,ee,le){return w.apply(this,arguments)}function w(){return(w=(0,g.Z)(function*(Q,z,ee,le){if((0,J.pC)(z.timeExtent)&&z.timeExtent.isEmpty)return Promise.resolve({data:ee.createFeatureResult()});const oe=yield T(Q,z,le),ce=oe;return ce.data=(0,L.C)(oe.data,ee),ce})).apply(this,arguments)}function T(Q,z,ee){return M(Q,z,"pbf",ee)}function O(Q,z,ee){return(0,J.pC)(z.timeExtent)&&z.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):M(Q,z,"json",ee,{returnIdsOnly:!0})}function x(Q,z,ee){return(0,J.pC)(z.timeExtent)&&z.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):M(Q,z,"json",ee,{returnIdsOnly:!0,returnCountOnly:!0})}function N(Q,z,ee){return(0,J.pC)(z.timeExtent)&&z.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):M(Q,z,"json",ee,{returnExtentOnly:!0,returnCountOnly:!0}).then(le=>{const oe=le.data;if(oe.hasOwnProperty("extent"))return le;if(oe.features)throw new Error(I);if(oe.hasOwnProperty("count"))throw new Error(I);return le})}function M(Q,z,ee,le={},oe={}){const ce="string"==typeof Q?(0,B.mN)(Q):Q,re=z.geometry?[z.geometry]:[];return le.responseType="pbf"===ee?"array-buffer":"json",(0,C.aX)(re,null,le).then(K=>{const ae=K&&K[0];(0,J.pC)(ae)&&((z=z.clone()).geometry=ae);const se=(0,$.A)(_t(_t(Sr(_t({},ce.query),{f:ee}),oe),k(z,oe)));return(0,b.default)((0,B.v_)(ce.path,"query"),Sr(_t({},le),{query:_t(_t({},se),le.query)}))})}},85531:(He,ve,p)=>{"use strict";p.d(ve,{X:()=>L,O:()=>$});var g=p(24263),b=p(84792),J=p(21726),B=p(76391),j=p(87183);function C(D){const I=D.toJSON();return I.attachmentTypes&&(I.attachmentTypes=I.attachmentTypes.join(",")),I.keywords&&(I.keywords=I.keywords.join(",")),I.globalIds&&(I.globalIds=I.globalIds.join(",")),I.objectIds&&(I.objectIds=I.objectIds.join(",")),I.size&&(I.size=I.size.join(",")),I}function $(D,I){const W={};for(const k of D){const{parentObjectId:Z,parentGlobalId:X,attachmentInfos:V}=k;for(const w of V){const{id:T}=w,O=(0,J.qg)((0,g.Dp)(`${I}/${Z}/attachments/${T}`)),x=j.Z.fromJSON(w);x.set({url:O,parentObjectId:Z,parentGlobalId:X}),W[Z]?W[Z].push(x):W[Z]=[x]}}return W}function L(D,I,W){let k={query:(0,B.A)(_t(Sr(_t({},D.query),{f:"json"}),C(I)))};return W&&(k=Sr(_t(_t({},W),k),{query:_t(_t({},W.query),k.query)})),(0,b.default)(D.path+"/queryAttachments",k)}},61515:(He,ve,p)=>{"use strict";p.d(ve,{p:()=>J});var g=p(62208),b=p(33696);function J(B,j,C){if(!C||!C.features||!C.hasZ)return;const $=(0,b.k)(C.geometryType,j,B.outSpatialReference);if(!(0,g.Wi)($))for(const L of C.features)$(L.geometry)}},87183:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>Z});var I,g=p(17626),b=p(86810),J=p(77712),C=(p(85931),p(8314),p(90912)),$=p(76898);const W={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let k=I=class extends b.wq{constructor(X){super(X),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:X}=this,V=function L(X){const{exifInfo:V,exifName:w,tagName:T}=X;if(!V||!w||!T)return null;const O=V.find(x=>x.name===w);return O?function D(X){const{tagName:V,tags:w}=X;if(!w||!V)return null;const T=w.find(O=>O.name===V);return T&&T.value||null}({tagName:T,tags:O.tags}):null}({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:X});return W[V]||null}clone(){return new I({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};(0,g._)([(0,J.Cb)({type:String})],k.prototype,"contentType",void 0),(0,g._)([(0,J.Cb)()],k.prototype,"exifInfo",void 0),(0,g._)([(0,J.Cb)({readOnly:!0})],k.prototype,"orientationInfo",null),(0,g._)([(0,J.Cb)({type:C.z8})],k.prototype,"id",void 0),(0,g._)([(0,J.Cb)({type:String})],k.prototype,"globalId",void 0),(0,g._)([(0,J.Cb)({type:String})],k.prototype,"keywords",void 0),(0,g._)([(0,J.Cb)({type:String})],k.prototype,"name",void 0),(0,g._)([(0,J.Cb)({json:{read:!1}})],k.prototype,"parentGlobalId",void 0),(0,g._)([(0,J.Cb)({json:{read:!1}})],k.prototype,"parentObjectId",void 0),(0,g._)([(0,J.Cb)({type:C.z8})],k.prototype,"size",void 0),(0,g._)([(0,J.Cb)({json:{read:!1}})],k.prototype,"url",void 0),k=I=(0,g._)([(0,$.j)("esri.layers.support.AttachmentInfo")],k);const Z=k},40251:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(91558),J=p(58817),B=p(77712),j=p(90912),C=p(55342),$=p(76898),L=p(61661);let I=D=class extends L.Z{constructor(k){super(k),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new D({fromColor:(0,J.d9)(this.fromColor),toColor:(0,J.d9)(this.toColor),algorithm:this.algorithm})}};(0,g._)([(0,C.J)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],I.prototype,"algorithm",void 0),(0,g._)([(0,B.Cb)({type:b.Z,json:{type:[j.z8],write:!0}})],I.prototype,"fromColor",void 0),(0,g._)([(0,B.Cb)({type:b.Z,json:{type:[j.z8],write:!0}})],I.prototype,"toColor",void 0),(0,g._)([(0,B.Cb)({type:["algorithmic"]})],I.prototype,"type",void 0),I=D=(0,g._)([(0,$.j)("esri.rest.support.AlgorithmicColorRamp")],I);const W=I},67736:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(86810),J=p(58817),B=p(77712),j=p(90912),C=p(76898),$=p(99433);let D=L=class extends b.wq{constructor(W){super(W),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(W,k){k.resultOffset=this.start,k.resultRecordCount=this.num||10}clone(){return new L((0,J.d9)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};(0,g._)([(0,B.Cb)({type:[String],json:{write:!0}})],D.prototype,"attachmentTypes",void 0),(0,g._)([(0,B.Cb)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],D.prototype,"attachmentsWhere",void 0),(0,g._)([(0,B.Cb)({type:[String],json:{write:!0}})],D.prototype,"keywords",void 0),(0,g._)([(0,B.Cb)({type:[Number],json:{write:!0}})],D.prototype,"globalIds",void 0),(0,g._)([(0,B.Cb)({json:{write:!0}})],D.prototype,"name",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],D.prototype,"num",void 0),(0,g._)([(0,B.Cb)({type:[Number],json:{write:!0}})],D.prototype,"objectIds",void 0),(0,g._)([(0,B.Cb)({type:Boolean,json:{default:!1,write:!0}})],D.prototype,"returnMetadata",void 0),(0,g._)([(0,B.Cb)({type:[Number],json:{write:!0}})],D.prototype,"size",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],D.prototype,"start",void 0),(0,g._)([(0,$.c)("start"),(0,$.c)("num")],D.prototype,"writeStart",null),(0,g._)([(0,B.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],D.prototype,"where",void 0),D=L=(0,g._)([(0,C.j)("esri.rest.support.AttachmentQuery")],D),D.from=(0,j.se)(D);const I=D},61661:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>D});var g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let L=class extends b.wq{constructor(I){super(I),this.type=null}};(0,g._)([(0,J.Cb)({readOnly:!0,json:{read:!1,write:!0}})],L.prototype,"type",void 0),L=(0,g._)([(0,$.j)("esri.rest.support.ColorRamp")],L);const D=L},17253:(He,ve,p)=>{"use strict";p.r(ve),p.d(ve,{default:()=>x});var w,g=p(17626),b=p(29132),J=p(88879),B=p(2076),j=p(86810),C=p(58817),$=p(62208),L=p(77712),I=(p(90912),p(68653)),W=p(76898),k=p(99433),Z=p(65234),X=p(91179),V=p(36255);const T=new B.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let O=w=class extends j.wq{constructor(N){super(N),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(N,M){const Q=Z.Z.fromJSON(M.spatialReference),z=[];for(let ee=0;ee<N.length;ee++){const le=N[ee],oe=J.Z.fromJSON(le),ce=le.geometry&&le.geometry.spatialReference;(0,$.pC)(oe.geometry)&&!ce&&(oe.geometry.spatialReference=Q);const re=le.aggregateGeometries,K=oe.aggregateGeometries;if(re&&(0,$.pC)(K))for(const ae in K){const se=K[ae],de=re[ae],ue=null==de?void 0:de.spatialReference;(0,$.pC)(se)&&!ue&&(se.spatialReference=Q)}z.push(oe)}return z}writeGeometryType(N,M,Q,z){if(N)return void T.write(N,M,Q,z);const{features:ee}=this;if(ee)for(const le of ee)if(le&&(0,$.pC)(le.geometry))return void T.write(le.geometry.type,M,Q,z)}readQueryGeometry(N,M){if(!N)return null;const Q=!!N.spatialReference,z=(0,X.im)(N);return!Q&&M.spatialReference&&(z.spatialReference=Z.Z.fromJSON(M.spatialReference)),z}writeSpatialReference(N,M){if(N)return void(M.spatialReference=N.toJSON());const{features:Q}=this;if(Q)for(const z of Q)if(z&&(0,$.pC)(z.geometry)&&z.geometry.spatialReference)return void(M.spatialReference=z.geometry.spatialReference.toJSON())}clone(){return new w(this.cloneProperties())}cloneProperties(){return(0,C.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(N){const M=this.write();if(M.features&&Array.isArray(N)&&N.length>0)for(let Q=0;Q<M.features.length;Q++){const z=M.features[Q];if(z.geometry){const ee=N&&N[Q];z.geometry=ee&&ee.toJSON()||z.geometry}}return M}quantize(N){const{scale:[M,Q],translate:[z,ee]}=N,ce=this.features,re=this._getQuantizationFunction(this.geometryType,K=>Math.round((K-z)/M),K=>Math.round((ee-K)/Q));for(let K=0,ae=ce.length;K<ae;K++)re((0,$.Wg)(ce[K].geometry))||(ce.splice(K,1),K--,ae--);return this.transform=N,this}unquantize(){const{geometryType:N,features:M,transform:Q}=this;if(!Q)return this;const{translate:[z,ee],scale:[le,oe]}=Q,K=this._getHydrationFunction(N,ae=>ae*le+z,ae=>ee-ae*oe);for(const{geometry:ae}of M)(0,$.pC)(ae)&&K(ae);return this.transform=null,this}_quantizePoints(N,M,Q){let z,ee;const le=[];for(let oe=0,ce=N.length;oe<ce;oe++){const re=N[oe];if(oe>0){const K=M(re[0]),ae=Q(re[1]);K===z&&ae===ee||(le.push([K-z,ae-ee]),z=K,ee=ae)}else z=M(re[0]),ee=Q(re[1]),le.push([z,ee])}return le.length>0?le:null}_getQuantizationFunction(N,M,Q){return"point"===N?z=>(z.x=M(z.x),z.y=Q(z.y),z):"polyline"===N||"polygon"===N?z=>{const ee=(0,X.oU)(z)?z.rings:z.paths,le=[];for(let oe=0,ce=ee.length;oe<ce;oe++){const K=this._quantizePoints(ee[oe],M,Q);K&&le.push(K)}return le.length>0?((0,X.oU)(z)?z.rings=le:z.paths=le,z):null}:"multipoint"===N?z=>{const ee=this._quantizePoints(z.points,M,Q);return ee.length>0?(z.points=ee,z):null}:"extent"===N?z=>z:null}_getHydrationFunction(N,M,Q){return"point"===N?z=>{z.x=M(z.x),z.y=Q(z.y)}:"polyline"===N||"polygon"===N?z=>{const ee=(0,X.oU)(z)?z.rings:z.paths;let le,oe;for(let ce=0,re=ee.length;ce<re;ce++){const K=ee[ce];for(let ae=0,se=K.length;ae<se;ae++){const de=K[ae];ae>0?(le+=de[0],oe+=de[1]):(le=de[0],oe=de[1]),de[0]=M(le),de[1]=Q(oe)}}}:"extent"===N?z=>{z.xmin=M(z.xmin),z.ymin=Q(z.ymin),z.xmax=M(z.xmax),z.ymax=Q(z.ymax)}:"multipoint"===N?z=>{const ee=z.points;let le,oe;for(let ce=0,re=ee.length;ce<re;ce++){const K=ee[ce];ce>0?(le+=K[0],oe+=K[1]):(le=K[0],oe=K[1]),K[0]=M(le),K[1]=Q(oe)}}:void 0}};(0,g._)([(0,L.Cb)({type:String,json:{write:!0}})],O.prototype,"displayFieldName",void 0),(0,g._)([(0,L.Cb)({type:Boolean,json:{write:{overridePolicy:N=>({enabled:N})}}})],O.prototype,"exceededTransferLimit",void 0),(0,g._)([(0,L.Cb)({type:[J.Z],json:{write:!0}})],O.prototype,"features",void 0),(0,g._)([(0,I.r)("features")],O.prototype,"readFeatures",null),(0,g._)([(0,L.Cb)({type:[V.Z],json:{write:!0}})],O.prototype,"fields",void 0),(0,g._)([(0,L.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:T.read}}})],O.prototype,"geometryType",void 0),(0,g._)([(0,k.c)("geometryType")],O.prototype,"writeGeometryType",null),(0,g._)([(0,L.Cb)({type:Boolean,json:{write:{overridePolicy:N=>({enabled:N})}}})],O.prototype,"hasM",void 0),(0,g._)([(0,L.Cb)({type:Boolean,json:{write:{overridePolicy:N=>({enabled:N})}}})],O.prototype,"hasZ",void 0),(0,g._)([(0,L.Cb)({types:b.qM,json:{write:!0}})],O.prototype,"queryGeometry",void 0),(0,g._)([(0,I.r)("queryGeometry")],O.prototype,"readQueryGeometry",null),(0,g._)([(0,L.Cb)({type:Z.Z,json:{write:!0}})],O.prototype,"spatialReference",void 0),(0,g._)([(0,k.c)("spatialReference")],O.prototype,"writeSpatialReference",null),(0,g._)([(0,L.Cb)({json:{write:!0}})],O.prototype,"transform",void 0),O=w=(0,g._)([(0,W.j)("esri.rest.support.FeatureSet")],O),O.prototype.toJSON.isDefaultToJSON=!0;const x=O},75414:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(58817),J=p(77712),j=(p(90912),p(76898)),C=p(40251),$=p(61661);let D=L=class extends $.Z{constructor(W){super(W),this.colorRamps=null,this.type="multipart"}clone(){return new L({colorRamps:(0,b.d9)(this.colorRamps)})}};(0,g._)([(0,J.Cb)({type:[C.Z],json:{write:!0}})],D.prototype,"colorRamps",void 0),(0,g._)([(0,J.Cb)({type:["multipart"]})],D.prototype,"type",void 0),D=L=(0,g._)([(0,j.j)("esri.rest.support.MultipartColorRamp")],D);const I=D},77294:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898)),L=p(91179);let D=class extends b.wq{constructor(W){super(W),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const W=this.geometries.map(function(X){return X.toJSON()}),k=this.geometries[0],Z={};return Z.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),Z.inSR=k.spatialReference.wkid||JSON.stringify(k.spatialReference.toJSON()),Z.geometries=JSON.stringify({geometryType:(0,L.Ji)(k),geometries:W}),this.transformation&&(Z.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(Z.transformForward=this.transformForward),Z}};(0,g._)([(0,J.Cb)()],D.prototype,"geometries",void 0),(0,g._)([(0,J.Cb)({json:{read:{source:"outSR"}}})],D.prototype,"outSpatialReference",void 0),(0,g._)([(0,J.Cb)()],D.prototype,"transformation",void 0),(0,g._)([(0,J.Cb)()],D.prototype,"transformForward",void 0),D=(0,g._)([(0,$.j)("esri.rest.support.ProjectParameters")],D);const I=D},89621:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>Z});var I,g=p(17626),J=(p(29132),p(2076)),B=p(86810),j=p(58817),C=p(77712),L=(p(90912),p(76898)),D=p(2004);const W=new J.X({upperLeft:"upper-left",lowerLeft:"lower-left"});let k=I=class extends B.wq{constructor(X){super(X),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new I((0,j.d9)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};(0,g._)([(0,C.Cb)({type:D.Z,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],k.prototype,"extent",void 0),(0,g._)([(0,C.Cb)({type:["view","edit"],json:{write:!0}})],k.prototype,"mode",void 0),(0,g._)([(0,C.Cb)({type:String,json:{read:W.read,write:W.write}})],k.prototype,"originPosition",void 0),(0,g._)([(0,C.Cb)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],k.prototype,"tolerance",void 0),k=I=(0,g._)([(0,L.j)("esri.rest.support.QuantizationParameters")],k);const Z=k},84952:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>ee});var N,g=p(17626),b=p(29132),J=p(97478),B=p(2076),j=p(86810),C=p(58817),$=p(62208),L=p(77712),D=p(66656),I=p(55342),W=p(76898),k=p(99433),Z=p(90912),X=p(91179),V=p(15283),w=p(89621),T=p(60776),O=p(65234),x=p(49672);const M=new B.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Q=new B.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let z=N=class extends j.wq{constructor(le){super(le),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(le){return(0,Z.TJ)(N,le)}castDatumTransformation(le){return"number"==typeof le||"object"==typeof le?le:null}writeHistoricMoment(le,oe){oe.historicMoment=le&&le.getTime()}writeParameterValues(le,oe){if(le){const ce={};for(const re in le){const K=le[re];ce[re]=Array.isArray(K)?K.map(ae=>ae instanceof Date?ae.getTime():ae):K instanceof Date?K.getTime():K}oe.parameterValues=ce}}writeStart(le,oe){oe.resultOffset=this.start,oe.resultRecordCount=this.num||10,oe.where="1=1"}writeWhere(le,oe){oe.where=le||"1=1"}clone(){return new N((0,C.d9)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:(0,$.pC)(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};z.MAX_MAX_RECORD_COUNT_FACTOR=5,(0,g._)([(0,L.Cb)({json:{write:!0}})],z.prototype,"aggregateIds",void 0),(0,g._)([(0,L.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"cacheHint",void 0),(0,g._)([(0,L.Cb)({type:Boolean,json:{default:!1,write:!0}})],z.prototype,"compactGeometryEnabled",void 0),(0,g._)([(0,L.Cb)({json:{write:!0}})],z.prototype,"datumTransformation",void 0),(0,g._)([(0,D.p)("datumTransformation")],z.prototype,"castDatumTransformation",null),(0,g._)([(0,L.Cb)({type:Boolean,json:{default:!1,write:!0}})],z.prototype,"defaultSpatialReferenceEnabled",void 0),(0,g._)([(0,L.Cb)({type:Number,json:{write:{overridePolicy:le=>({enabled:le>0})}}})],z.prototype,"distance",void 0),(0,g._)([(0,L.Cb)({type:V.n,json:{write:!0}})],z.prototype,"dynamicDataSource",void 0),(0,g._)([(0,L.Cb)({type:String,json:{write:!0}})],z.prototype,"formatOf3DObjects",void 0),(0,g._)([(0,L.Cb)({type:String,json:{write:!0}})],z.prototype,"gdbVersion",void 0),(0,g._)([(0,L.Cb)({types:b.qM,json:{read:X.im,write:!0}})],z.prototype,"geometry",void 0),(0,g._)([(0,L.Cb)({type:Number,json:{write:!0}})],z.prototype,"geometryPrecision",void 0),(0,g._)([(0,L.Cb)({type:[String],json:{write:!0}})],z.prototype,"groupByFieldsForStatistics",void 0),(0,g._)([(0,L.Cb)({type:String,json:{write:!0}})],z.prototype,"having",void 0),(0,g._)([(0,L.Cb)({type:Date})],z.prototype,"historicMoment",void 0),(0,g._)([(0,k.c)("historicMoment")],z.prototype,"writeHistoricMoment",null),(0,g._)([(0,L.Cb)({type:Number,json:{write:!0}})],z.prototype,"maxAllowableOffset",void 0),(0,g._)([(0,L.Cb)({type:Number,cast:le=>le<1?1:le>N.MAX_MAX_RECORD_COUNT_FACTOR?N.MAX_MAX_RECORD_COUNT_FACTOR:le,json:{write:{overridePolicy:le=>({enabled:le>1})}}})],z.prototype,"maxRecordCountFactor",void 0),(0,g._)([(0,L.Cb)({type:["xyFootprint"],json:{write:!0}})],z.prototype,"multipatchOption",void 0),(0,g._)([(0,L.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],z.prototype,"num",void 0),(0,g._)([(0,L.Cb)({json:{write:!0}})],z.prototype,"objectIds",void 0),(0,g._)([(0,L.Cb)({type:[String],json:{write:!0}})],z.prototype,"orderByFields",void 0),(0,g._)([(0,L.Cb)({type:[String],json:{write:!0}})],z.prototype,"outFields",void 0),(0,g._)([(0,L.Cb)({type:O.Z,json:{name:"outSR",write:!0}})],z.prototype,"outSpatialReference",void 0),(0,g._)([(0,L.Cb)({type:[T.Z],json:{write:{enabled:!0,overridePolicy(){return{enabled:(0,$.pC)(this.outStatistics)&&this.outStatistics.length>0}}}}})],z.prototype,"outStatistics",void 0),(0,g._)([(0,L.Cb)({json:{write:!0}})],z.prototype,"parameterValues",void 0),(0,g._)([(0,k.c)("parameterValues")],z.prototype,"writeParameterValues",null),(0,g._)([(0,L.Cb)({type:x.Z,json:{write:!0}})],z.prototype,"pixelSize",void 0),(0,g._)([(0,L.Cb)({type:w.Z,json:{write:!0}})],z.prototype,"quantizationParameters",void 0),(0,g._)([(0,L.Cb)({type:[Object],json:{write:!0}})],z.prototype,"rangeValues",void 0),(0,g._)([(0,L.Cb)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],z.prototype,"relationParameter",void 0),(0,g._)([(0,L.Cb)({type:String,json:{write:!0}})],z.prototype,"resultType",void 0),(0,g._)([(0,L.Cb)({type:Boolean,json:{default:!1,write:!0}})],z.prototype,"returnCentroid",void 0),(0,g._)([(0,L.Cb)({type:Boolean,json:{default:!1,write:!0}})],z.prototype,"returnDistinctValues",void 0),(0,g._)([(0,L.Cb)({type:Boolean,json:{default:!0,write:!0}})],z.prototype,"returnExceededLimitFeatures",void 0),(0,g._)([(0,L.Cb)({type:Boolean,json:{write:!0}})],z.prototype,"returnGeometry",void 0),(0,g._)([(0,L.Cb)({type:Boolean,json:{default:!1,write:!0}})],z.prototype,"returnQueryGeometry",void 0),(0,g._)([(0,L.Cb)({type:Boolean,json:{default:!1,write:!0}})],z.prototype,"returnM",void 0),(0,g._)([(0,L.Cb)({type:Boolean,json:{write:{overridePolicy:le=>({enabled:le})}}})],z.prototype,"returnZ",void 0),(0,g._)([(0,L.Cb)({type:O.Z,json:{write:!0}})],z.prototype,"sourceSpatialReference",void 0),(0,g._)([(0,I.J)(M,{ignoreUnknown:!1,name:"spatialRel"})],z.prototype,"spatialRelationship",void 0),(0,g._)([(0,L.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],z.prototype,"start",void 0),(0,g._)([(0,k.c)("start"),(0,k.c)("num")],z.prototype,"writeStart",null),(0,g._)([(0,L.Cb)({type:String,json:{write:!0}})],z.prototype,"sqlFormat",void 0),(0,g._)([(0,L.Cb)({type:String,json:{write:!0}})],z.prototype,"text",void 0),(0,g._)([(0,L.Cb)({type:J.Z,json:{write:!0}})],z.prototype,"timeExtent",void 0),(0,g._)([(0,L.Cb)({type:Boolean,json:{default:!1,write:!0}})],z.prototype,"timeReferenceUnknownClient",void 0),(0,g._)([(0,I.J)(Q,{ignoreUnknown:!1}),(0,L.Cb)({json:{write:{overridePolicy(le){return{enabled:le&&this.distance>0}}}}})],z.prototype,"units",void 0),(0,g._)([(0,L.Cb)({type:String,json:{write:{overridePolicy(le){return{enabled:null!=le||this.start>0}}}}})],z.prototype,"where",void 0),(0,g._)([(0,k.c)("where")],z.prototype,"writeWhere",null),z=N=(0,g._)([(0,W.j)("esri.rest.support.Query")],z);const ee=z},67010:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>Z});var W,g=p(17626),J=(p(29132),p(86810)),B=p(58817),j=p(77712),C=p(90912),$=p(76898),L=p(99433),D=p(15283),I=p(65234);let k=W=class extends J.wq{constructor(X){super(X),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(X,V){V.historicMoment=X&&X.getTime()}writeStart(X,V){V.resultOffset=this.start,V.resultRecordCount=this.num||10,this.start>0&&null==this.where&&(V.definitionExpression="1=1")}clone(){return new W((0,B.d9)({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};(0,g._)([(0,j.Cb)({type:D.n,json:{write:!0}})],k.prototype,"dynamicDataSource",void 0),(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],k.prototype,"gdbVersion",void 0),(0,g._)([(0,j.Cb)({type:Number,json:{write:!0}})],k.prototype,"geometryPrecision",void 0),(0,g._)([(0,j.Cb)({type:Date})],k.prototype,"historicMoment",void 0),(0,g._)([(0,L.c)("historicMoment")],k.prototype,"_writeHistoricMoment",null),(0,g._)([(0,j.Cb)({type:Number,json:{write:!0}})],k.prototype,"maxAllowableOffset",void 0),(0,g._)([(0,j.Cb)({type:[Number],json:{write:!0}})],k.prototype,"objectIds",void 0),(0,g._)([(0,j.Cb)({type:[String],json:{write:!0}})],k.prototype,"orderByFields",void 0),(0,g._)([(0,j.Cb)({type:[String],json:{write:!0}})],k.prototype,"outFields",void 0),(0,g._)([(0,j.Cb)({type:I.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],k.prototype,"outSpatialReference",void 0),(0,g._)([(0,j.Cb)({json:{write:!0}})],k.prototype,"relationshipId",void 0),(0,g._)([(0,j.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],k.prototype,"start",void 0),(0,g._)([(0,L.c)("start"),(0,L.c)("num")],k.prototype,"writeStart",null),(0,g._)([(0,j.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],k.prototype,"num",void 0),(0,g._)([(0,j.Cb)({json:{write:!0}})],k.prototype,"returnGeometry",void 0),(0,g._)([(0,j.Cb)({type:Boolean,json:{write:{overridePolicy:X=>({enabled:X})}}})],k.prototype,"returnM",void 0),(0,g._)([(0,j.Cb)({type:Boolean,json:{write:{overridePolicy:X=>({enabled:X})}}})],k.prototype,"returnZ",void 0),(0,g._)([(0,j.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],k.prototype,"where",void 0),k=W=(0,g._)([(0,$.j)("esri.rest.support.RelationshipQuery")],k),k.from=(0,C.se)(k);const Z=k},60776:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>k});var D,g=p(17626),b=p(2076),J=p(86810),B=p(58817),j=p(77712),$=(p(90912),p(76898)),L=p(99433);const I=new b.X({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let W=D=class extends J.wq{constructor(Z){super(Z),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(Z,X){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(X.statisticParameters=(0,B.d9)(Z))}clone(){return new D({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:(0,B.d9)(this.statisticParameters)})}};(0,g._)([(0,j.Cb)({type:Number,json:{write:!0}})],W.prototype,"maxPointCount",void 0),(0,g._)([(0,j.Cb)({type:Number,json:{write:!0}})],W.prototype,"maxRecordCount",void 0),(0,g._)([(0,j.Cb)({type:Number,json:{write:!0}})],W.prototype,"maxVertexCount",void 0),(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],W.prototype,"onStatisticField",void 0),(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],W.prototype,"outStatisticFieldName",void 0),(0,g._)([(0,j.Cb)({type:String,json:{read:{source:"statisticType",reader:I.read},write:{target:"statisticType",writer:I.write}}})],W.prototype,"statisticType",void 0),(0,g._)([(0,j.Cb)({type:Object})],W.prototype,"statisticParameters",void 0),(0,g._)([(0,L.c)("statisticParameters")],W.prototype,"writeStatisticParameters",null),W=D=(0,g._)([(0,$.j)("esri.rest.support.StatisticDefinition")],W);const k=W},6871:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>Q});var X,g=p(17626),b=p(29132),J=p(97478),B=p(2076),j=p(86810),C=p(58817),$=p(77712),L=p(90912),D=p(76898),I=p(99433),W=p(91179);p(85931),p(8314);let V=X=class extends j.wq{constructor(z){super(z),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new X({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};(0,g._)([(0,$.Cb)({type:[String],json:{write:!0}})],V.prototype,"groupByFields",void 0),(0,g._)([(0,$.Cb)({type:Number,json:{write:!0}})],V.prototype,"topCount",void 0),(0,g._)([(0,$.Cb)({type:[String],json:{write:!0}})],V.prototype,"orderByFields",void 0),V=X=(0,g._)([(0,D.j)("esri.rest.support.TopFilter")],V);const w=V;var O,T=p(65234);const x=new B.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),N=new B.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let M=O=class extends j.wq{constructor(z){super(z),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(z,ee){ee.resultOffset=this.start,ee.resultRecordCount=this.num||10}clone(){return new O((0,C.d9)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};(0,g._)([(0,$.Cb)({type:Boolean,json:{write:!0}})],M.prototype,"cacheHint",void 0),(0,g._)([(0,$.Cb)({type:Number,json:{write:{overridePolicy:z=>({enabled:z>0})}}})],M.prototype,"distance",void 0),(0,g._)([(0,$.Cb)({types:b.qM,json:{read:W.im,write:!0}})],M.prototype,"geometry",void 0),(0,g._)([(0,$.Cb)({type:Number,json:{write:!0}})],M.prototype,"geometryPrecision",void 0),(0,g._)([(0,$.Cb)({type:Number,json:{write:!0}})],M.prototype,"maxAllowableOffset",void 0),(0,g._)([(0,$.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],M.prototype,"num",void 0),(0,g._)([(0,$.Cb)({json:{write:!0}})],M.prototype,"objectIds",void 0),(0,g._)([(0,$.Cb)({type:[String],json:{write:!0}})],M.prototype,"orderByFields",void 0),(0,g._)([(0,$.Cb)({type:[String],json:{write:!0}})],M.prototype,"outFields",void 0),(0,g._)([(0,$.Cb)({type:T.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],M.prototype,"outSpatialReference",void 0),(0,g._)([(0,$.Cb)({type:String,json:{write:!0}})],M.prototype,"resultType",void 0),(0,g._)([(0,$.Cb)({json:{write:!0}})],M.prototype,"returnGeometry",void 0),(0,g._)([(0,$.Cb)({type:Boolean,json:{write:{overridePolicy:z=>({enabled:z})}}})],M.prototype,"returnM",void 0),(0,g._)([(0,$.Cb)({type:Boolean,json:{write:{overridePolicy:z=>({enabled:z})}}})],M.prototype,"returnZ",void 0),(0,g._)([(0,$.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],M.prototype,"start",void 0),(0,g._)([(0,I.c)("start"),(0,I.c)("num")],M.prototype,"writeStart",null),(0,g._)([(0,$.Cb)({type:String,json:{read:{source:"spatialRel",reader:x.read},write:{target:"spatialRel",writer:x.write}}})],M.prototype,"spatialRelationship",void 0),(0,g._)([(0,$.Cb)({type:J.Z,json:{write:!0}})],M.prototype,"timeExtent",void 0),(0,g._)([(0,$.Cb)({type:w,json:{write:!0}})],M.prototype,"topFilter",void 0),(0,g._)([(0,$.Cb)({type:String,json:{read:N.read,write:{writer:N.write,overridePolicy(z){return{enabled:z&&this.distance>0}}}}})],M.prototype,"units",void 0),(0,g._)([(0,$.Cb)({type:String,json:{write:!0}})],M.prototype,"where",void 0),M=O=(0,g._)([(0,D.j)("esri.rest.support.TopFeaturesQuery")],M),M.from=(0,L.se)(M);const Q=M},79023:(He,ve,p)=>{"use strict";p.d(ve,{i:()=>j,V:()=>B});var g=p(40251),b=p(61661),J=p(75414);const B={key:"type",base:b.Z,typeMap:{algorithmic:g.Z,multipart:J.Z}};function j(C){return C&&C.type?"algorithmic"===C.type?g.Z.fromJSON(C):"multipart"===C.type?J.Z.fromJSON(C):null:null}},2618:(He,ve,p)=>{"use strict";p.d(ve,{lA:()=>J,cv:()=>j,en:()=>B});var g=p(21726);function J(L,D){return D?Sr(_t({},D),{query:_t(_t({},L),D.query)}):{query:L}}function B(L){return"string"==typeof L?(0,g.mN)(L):L}function j(L,D,I){const W={};for(const k in L){if("declaredClass"===k)continue;const Z=L[k];if(null!=Z&&"function"!=typeof Z)if(Array.isArray(Z)){W[k]=[];for(let X=0;X<Z.length;X++)W[k][X]=j(Z[X])}else if("object"==typeof Z)if(Z.toJSON){const X=Z.toJSON(I&&I[k]);W[k]=D?X:JSON.stringify(X)}else W[k]=D?Z:JSON.stringify(Z);else W[k]=Z}return W}p(83137)},51815:(He,ve,p)=>{"use strict";p.d(ve,{J:()=>W});var g=p(17626),b=p(88879),B=(p(63290),p(90912)),L=(p(85931),p(8314),p(82255),p(61039)),D=p(76898),I=p(28705);let W=class extends I.a{_own(k){k.layer&&"remove"in k.layer&&k.layer!==this.owner&&k.layer.remove(k),k.layer=this.owner}_release(k){k.layer===this.owner&&(k.layer=null)}};(0,g._)([(0,L.c)({Type:b.Z,ensureType:(0,B.se)(b.Z)})],W.prototype,"itemType",void 0),W=(0,g._)([(0,D.j)("esri.support.GraphicsCollection")],W)},6432:(He,ve,p)=>{"use strict";p.d(ve,{K:()=>V});var g=p(17626),b=p(48701),J=p(89726),B=p(63290),j=p(10699),C=p(77712),I=(p(85931),p(8314),p(90912),p(76898)),W=p(63602);function k(w){return w&&"group"===w.type}function Z(w,T,O){let x,N;if(w)for(let M=0,Q=w.length;M<Q;M++){if(x=w.getItemAt(M),x[T]===O)return x;if(k(x)&&(N=Z(x.layers,T,O),N))return N}}const X=B.Z.getLogger("esri.support.LayersMixin"),V=w=>{let T=class extends w{constructor(...O){super(...O),this.layers=new b.Z;const N=Q=>{Q.parent=this,this.layerAdded(Q),"elevation"!==Q.type&&"base-elevation"!==Q.type||X.error(`Layer 'title:${Q.title}, id:${Q.id}' of type '${Q.type}' is not supported as an operational layer and will therefore be ignored.`)},M=Q=>{Q.parent=null,this.layerRemoved(Q)};this.layers.on("before-add",Q=>(Q=>{Q.parent&&"remove"in Q.parent&&Q.parent.remove(Q)})(Q.item)),this.layers.on("after-add",Q=>N(Q.item)),this.layers.on("after-remove",Q=>M(Q.item))}destroy(){const O=this.layers.removeAll();for(const x of O)this.layerRemoved(x),x.destroy();this.layers.destroy()}set layers(O){this._set("layers",(0,J.Z)(O,this._get("layers")))}add(O,x){const N=this.layers;if(x=N.getNextIndex(x),O instanceof W.Z){const M=O;M.parent===this?this.reorder(M,x):N.add(M,x)}else(0,j.y8)(O)?O.then(M=>{this.destroyed||this.add(M,x)}):X.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(O,x){const N=this.layers;x=N.getNextIndex(x),O.slice().forEach(M=>{M.parent!==this?(N.add(M,x),x+=1):this.reorder(M,x)})}findLayerById(O){return Z(this.layers,"id",O)}findLayerByUid(O){return Z(this.layers,"uid",O)}remove(O){return this.layers.remove(O)}removeMany(O){return this.layers.removeMany(O)}removeAll(){return this.layers.removeAll()}reorder(O,x){return this.layers.reorder(O,x)}layerAdded(O){}layerRemoved(O){}};return(0,g._)([(0,C.Cb)()],T.prototype,"layers",null),T=(0,g._)([(0,I.j)("esri.support.LayersMixin")],T),T}},6119:(He,ve,p)=>{"use strict";p.d(ve,{Q:()=>X});var g=p(17626),b=p(48701),J=p(89726),B=p(63290),j=p(77712),D=(p(85931),p(8314),p(90912),p(76898));const I="esri.support.TablesMixin",W=B.Z.getLogger(I);function k(V){return V&&"group"===V.type}function Z(V,w,T){if(V)for(let O=0,x=V.length;O<x;O++){const N=V.getItemAt(O);if(N[w]===T)return N;if(k(N)){const M=Z(N.tables,w,T);if(M)return M}}}const X=V=>{let w=class extends V{constructor(...T){super(...T),this.tables=new b.Z,this.tables.on("after-add",O=>{const x=O.item;x.parent&&x.parent!==this&&"tables"in x.parent&&x.parent.tables.remove(x),x.parent=this,"feature"!==x.type&&W.error(`Layer 'title:${x.title}, id:${x.id}' of type '${x.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",O=>{O.item.parent=null})}destroy(){const T=this.tables.removeAll();for(const O of T)O.destroy();this.tables.destroy()}set tables(T){this._set("tables",(0,J.Z)(T,this._get("tables")))}findTableById(T){return Z(this.tables,"id",T)}findTableByUid(T){return Z(this.tables,"uid",T)}};return(0,g._)([(0,j.Cb)()],w.prototype,"tables",null),w=(0,g._)([(0,D.j)(I)],w),w}},59397:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(14517),J=p(61996),B=p(77712),L=(p(85931),p(8314),p(90912),p(76898));let I=D=class extends((0,J.I)(b.Z)){constructor(k){super(k),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new D({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};(0,g._)([(0,B.Cb)()],I.prototype,"active",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"className",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"disabled",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"id",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"indicator",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"title",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"type",void 0),(0,g._)([(0,B.Cb)()],I.prototype,"visible",void 0),I=D=(0,g._)([(0,L.j)("esri.support.actions.ActionBase")],I);const W=I},48753:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(59397);let D=L=class extends $.Z{constructor(W){super(W),this.image=null,this.type="button"}clone(){return new L({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};(0,g._)([(0,b.Cb)()],D.prototype,"image",void 0),D=L=(0,g._)([(0,C.j)("esri.support.Action.ActionButton")],D);const I=D},10671:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var L,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(59397);let D=L=class extends $.Z{constructor(W){super(W),this.image=null,this.type="toggle",this.value=!1}clone(){return new L({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};(0,g._)([(0,b.Cb)()],D.prototype,"image",void 0),(0,g._)([(0,b.Cb)()],D.prototype,"value",void 0),D=L=(0,g._)([(0,C.j)("esri.support.Action.ActionToggle")],D);const I=D},12680:(He,ve,p)=>{"use strict";p.d(ve,{r:()=>B});var g=p(21726);const b=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function B(j){const C=(0,g.P$)(j,!0);return C&&C.endsWith(".arcgis.com")&&!b.includes(C)&&!j.endsWith("/sharing/rest/generateToken")}},46679:(He,ve,p)=>{"use strict";p.d(ve,{mz:()=>W,pp:()=>I,WW:()=>$,Yi:()=>L,LC:()=>C});var g=p(15861),J=(p(29132),p(62208)),B=p(65234);let j;function C(){return j||(j=(0,g.Z)(function*(){const k=yield p.e(5068).then(p.bind(p,75068));return{arcade:k.arcade,arcadeUtils:k,Dictionary:k.Dictionary,Feature:k.arcadeFeature}})()),j}const $=(k,Z,X)=>W.create(k,Z,X,null,["$feature"]),L=(k,Z,X)=>W.create(k,Z,X,null,["$feature","$view"]),I=(k,Z,X,V)=>W.create(k,Z,X,V,["$feature","$view"]);class W{constructor(Z,X,V,w,T,O,x,N){this.script=Z,this.evaluate=T;const M=Array.isArray(x)?x:x.fields;this.fields=M,this._syntaxTree=w,this._arcade=X,this._arcadeDictionary=V,this._arcadeFeature=O,this._spatialReference=N,this._referencesGeometry=X.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static create(Z,X,V,w,T,O){return(0,g.Z)(function*(){const{arcade:x,Feature:N,Dictionary:M}=yield C(),Q=B.Z.fromJSON(X),z=x.parseScript(Z,O),ee=T.reduce((ue,pe)=>Sr(_t({},ue),{[pe]:null}),{});let le=null;(0,J.pC)(w)&&(le=new M(w),le.immutable=!0,ee.$config=null);const oe=x.scriptUsesGeometryEngine(z)&&x.enableGeometrySupport(),ce=x.scriptUsesFeatureSet(z)&&x.enableFeatureSetSupport(),re=x.scriptIsAsync(z)&&x.enableAsyncSupport(),K={vars:ee,spatialReference:Q,useAsync:!!re},ae=new M;ae.immutable=!1,ae.setField("scale",0);const se=x.compileScript(z,K);return yield Promise.all([oe,ce,re]),new W(Z,x,M,z,ue=>("$view"in ue&&ue.$view&&(ae.setField("scale",ue.$view.scale),ue.$view=ae),le&&(ue.$config=le),se({vars:ue,spatialReference:Q})),new N,V,Q)})()}repurposeFeature(Z){return Z.geometry&&!Z.geometry.spatialReference&&(Z.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(Z.geometry,Z.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(Z){return this._arcade.referencesMember(this._syntaxTree,Z)}referencesFunction(Z){return this._arcade.referencesFunction(this._syntaxTree,Z)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}},33954:(He,ve,p)=>{"use strict";p.d(ve,{s:()=>C,g:()=>B});var g=p(15861),b=p(54346),J=p(41840);function B($){return j.apply(this,arguments)}function j(){return(j=(0,g.Z)(function*($){if(!$)return;const L=$.indexOf("-vector")>-1?$.slice(0,$.indexOf("-vector")):$,D=yield(0,J.ME)("esri/t9n/basemaps");return D[$]||D[L]})).apply(this,arguments)}const C={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return(0,b.V)("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return(0,b.V)("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return(0,b.V)("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return(0,b.V)("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return(0,b.V)("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return(0,b.V)("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return(0,b.V)("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return(0,b.V)("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return(0,b.V)("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return(0,b.V)("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return(0,b.V)("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}}},49430:(He,ve,p)=>{"use strict";p.d(ve,{eZ:()=>X});var g=p(73281),b=p(36630),J=p(55664),$=(p(55013),p(16615),p(82561),p(75484)),I=(p(64531),p(501),p(25621)),W=p(66845);const k=["oid","global-id"],Z=["oid","global-id","guid"];function X({displayField:re,editFieldsInfo:K,fields:ae,objectIdField:se,title:de},ue){if(!ae)return null;const pe=function Q({editFieldsInfo:re,fields:K,objectIdField:ae},se){return function T(re,K){const ae=re;return K&&(re=re.filter(se=>-1===K.indexOf(se.type))),re===ae&&(re=re.slice()),re.sort(O),re}(K,(null==se?void 0:se.ignoreFieldTypes)||ce).map(de=>new I.Z({fieldName:de.name,isEditable:N(de,re),label:de.alias,format:z(de),visible:w(de,{editFieldsInfo:re,objectIdField:ae,visibleFieldNames:null==se?void 0:se.visibleFieldNames})}))}({editFieldsInfo:K,fields:ae,objectIdField:se},ue);if(!pe.length)return null;const ie=function le(re){const K=(0,b.O5)(re),{titleBase:ae}=re;return K?`${ae}: {${K.trim()}}`:ae}({titleBase:de,fields:ae,displayField:re}),te=function ee(){return[new $.Z,new J.Z]}();return new g.Z({title:ie,content:te,fieldInfos:pe})}const V=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],w=(re,{editFieldsInfo:K,objectIdField:ae,visibleFieldNames:se})=>se?se.has(re.name):!(x(re.name,K)||ae&&re.name===ae||k.indexOf(re.type)>-1||V.some(de=>de.test(re.name)));function O(re,K){return"oid"===re.type?-1:"oid"===K.type?1:oe(re)?-1:oe(K)?1:(re.alias||re.name).toLocaleLowerCase().localeCompare((K.alias||K.name).toLocaleLowerCase())}function x(re,K){if(!re||!K)return!1;const{creationDateField:ae,creatorField:se,editDateField:de,editorField:ue}=K;return-1!==[ae&&ae.toLowerCase(),se&&se.toLowerCase(),de&&de.toLowerCase(),ue&&ue.toLowerCase()].indexOf(re.toLowerCase())}function N(re,K){return re.editable&&-1===Z.indexOf(re.type)&&!x(re.name,K)}function z(re){switch(re.type){case"small-integer":case"integer":case"single":return new W.Z({digitSeparator:!0,places:0});case"double":return new W.Z({digitSeparator:!0,places:2});case"date":return new W.Z({dateFormat:"long-month-day-year"});default:return null}}function oe(re){return"name"===(re.name&&re.name.toLowerCase())||"name"===(re.alias&&re.alias.toLowerCase())||void 0}const ce=["geometry","blob","raster","guid","xml"]},33899:(He,ve,p)=>{"use strict";p.d(ve,{f:()=>B});var g=p(8314),b=p(62208),J=p(10699);function B(C,$,L=!1,D){return new Promise((I,W)=>{if((0,J.Hc)(D))return void W(j());let k=()=>{V(),W(new Error(`Unable to load ${$}`))},Z=()=>{const w=C;V(),I(w)},X=()=>{if(!C)return;const w=C;V(),w.src="",W(j())};const V=()=>{(0,g.Z)("esri-image-decode")||(C.removeEventListener("error",k),C.removeEventListener("load",Z)),k=null,Z=null,C=null,(0,b.pC)(D)&&D.removeEventListener("abort",X),X=null,L&&URL.revokeObjectURL($)};(0,b.pC)(D)&&D.addEventListener("abort",X),(0,g.Z)("esri-image-decode")?C.decode().then(Z,k):(C.addEventListener("error",k),C.addEventListener("load",Z))})}function j(){try{return new DOMException("Aborted","AbortError")}catch(C){const $=new Error;return $.name="AbortError",$}}},38365:(He,ve,p)=>{"use strict";p.d(ve,{r:()=>g,$:()=>b});const g="20220404",b="ecb69ff5e08a61c162de0ddc0b1f397ed5d4071b"},65787:(He,ve,p)=>{"use strict";p.d(ve,{se:()=>Xe,cT:()=>Je,dU:()=>Oe,S9:()=>Y,LB:()=>xe,AH:()=>Be,yK:()=>Ie,S6:()=>Qe,QT:()=>me,f_:()=>rt});var N,g=p(90912),b=p(383),J=p(94398),j=(p(65499),p(48575)),C=p(9260),D=(p(11472),p(26531),p(22490)),I=p(40445),Z=(p(21068),p(46735),p(17626)),X=p(48701),V=p(58817),w=p(77712),T=p(55342),O=p(76898),x=p(39368);const M=X.Z.ofType({base:null,key:"type",typeMap:{fill:C.Z}});let Q=N=class extends x.Z{constructor(qe){super(qe),this.symbolLayers=new M,this.type="mesh-3d"}clone(){return new N({styleOrigin:(0,V.d9)(this.styleOrigin),symbolLayers:(0,V.d9)(this.symbolLayers),thumbnail:(0,V.d9)(this.thumbnail)})}};(0,Z._)([(0,w.Cb)({type:M})],Q.prototype,"symbolLayers",void 0),(0,Z._)([(0,T.J)({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Q.prototype,"type",void 0),Q=N=(0,Z._)([(0,O.j)("esri.symbols.MeshSymbol3D")],Q);const z=Q;p(2066),p(69147);var re,oe=p(23841),ce=p(69738);let K=re=class extends j.Z{constructor(...qe){super(...qe),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(qe,ke,dt,We){if(qe&&"string"!=typeof qe&&null==qe.imageData)return qe;const nt={};return qe&&(nt.url=qe),ke&&(nt.outline=ke),null!=dt&&(nt.width=(0,oe.t_)(dt)),null!=We&&(nt.height=(0,oe.t_)(We)),nt}clone(){const qe=new re({color:(0,V.d9)(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return qe._set("source",(0,V.d9)(this.source)),qe}hash(){var qe;return`${super.hash()}.${null==(qe=this.color)?void 0:qe.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};(0,Z._)([(0,T.J)({esriPFS:"picture-fill"},{readOnly:!0})],K.prototype,"type",void 0),(0,Z._)([(0,w.Cb)(ce.KA)],K.prototype,"url",void 0),(0,Z._)([(0,w.Cb)({type:Number,json:{write:!0}})],K.prototype,"xscale",void 0),(0,Z._)([(0,w.Cb)({type:Number,json:{write:!0}})],K.prototype,"yscale",void 0),(0,Z._)([(0,w.Cb)({type:Number,cast:oe.t_,json:{write:!0}})],K.prototype,"width",void 0),(0,Z._)([(0,w.Cb)({type:Number,cast:oe.t_,json:{write:!0}})],K.prototype,"height",void 0),(0,Z._)([(0,w.Cb)({type:Number,cast:oe.t_,json:{write:!0}})],K.prototype,"xoffset",void 0),(0,Z._)([(0,w.Cb)({type:Number,cast:oe.t_,json:{write:!0}})],K.prototype,"yoffset",void 0),(0,Z._)([(0,w.Cb)(ce.Ds)],K.prototype,"source",void 0),K=re=(0,Z._)([(0,O.j)("esri.symbols.PictureFillSymbol")],K);const ae=K;var se=p(13546),de=p(69852),ue=p(89673),pe=p(88493),ie=p(52068),te=p(57213),Ee=p(10012),be=(p(97665),p(35540)),Ue=(p(21716),p(72622),p(12874));function Je(qe){if(!qe)return!1;switch(qe.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Oe(qe){if(!qe)return!1;switch(qe.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}p(17497),p(71530);const xe={base:Ee.Z,key:"type",typeMap:{"simple-fill":pe.Z,"picture-fill":ae,"picture-marker":se.Z,"simple-line":ie.Z,"simple-marker":te.Z,text:be.Z,"label-3d":D.Z,"line-3d":I.Z,"mesh-3d":z,"point-3d":de.Z,"polygon-3d":ue.Z,"web-style":Ue.Z,cim:J.Z},errorContext:"symbol"},Be={base:Ee.Z,key:"type",typeMap:{"picture-marker":se.Z,"simple-marker":te.Z,text:be.Z,"web-style":Ue.Z,cim:J.Z},errorContext:"symbol"},Y=(0,b.d)({types:xe}),me={base:Ee.Z,key:"type",typeMap:{"simple-fill":pe.Z,"picture-fill":ae,"picture-marker":se.Z,"simple-line":ie.Z,"simple-marker":te.Z,text:be.Z,"line-3d":I.Z,"mesh-3d":z,"point-3d":de.Z,"polygon-3d":ue.Z,"web-style":Ue.Z,cim:J.Z},errorContext:"symbol"},Ie={base:Ee.Z,key:"type",typeMap:{text:be.Z,"label-3d":D.Z},errorContext:"symbol"},rt={base:Ee.Z,key:"type",typeMap:{"line-3d":I.Z,"mesh-3d":z,"point-3d":de.Z,"polygon-3d":ue.Z,"web-style":Ue.Z,cim:J.Z},errorContext:"symbol"},Qe={base:Ee.Z,key:"type",typeMap:{"label-3d":D.Z},errorContext:"symbol"},Xe=(0,g.N7)(xe)},94398:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var Z,g=p(15861),b=p(17626),J=p(58817),B=p(77275),j=p(77712),$=(p(90912),p(55342)),L=p(68653),D=p(76898),I=p(99433),W=p(36630),k=p(10012);let X=Z=class extends k.Z{constructor(w){super(w),this.data=null,this.type="cim"}readData(w,T){return T}writeData(w,T){if(w)for(const O in w)T[O]=w[O]}collectRequiredFields(w,T){var O=this;return(0,g.Z)(function*(){if("CIMSymbolReference"===O.data.type){const x=O.data.primitiveOverrides;if(x){const N=x.map(M=>(0,W.io)(w,T,M.valueExpressionInfo.expression));yield Promise.all(N)}}})()}clone(){return new Z({data:(0,J.d9)(this.data)})}hash(){return(0,B.hP)(JSON.stringify(this.data)).toString()}};(0,b._)([(0,j.Cb)({json:{write:!1}})],X.prototype,"color",void 0),(0,b._)([(0,j.Cb)({json:{write:!0}})],X.prototype,"data",void 0),(0,b._)([(0,L.r)("data",["symbol"])],X.prototype,"readData",null),(0,b._)([(0,I.c)("data",{})],X.prototype,"writeData",null),(0,b._)([(0,$.J)({CIMSymbolReference:"cim"},{readOnly:!0})],X.prototype,"type",void 0),X=Z=(0,b._)([(0,D.j)("esri.symbols.CIMSymbol")],X);const V=X},65499:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>X});var k,g=p(17626),b=p(62208),J=p(77712),$=(p(85931),p(8314),p(90912),p(55342)),L=p(76898),D=p(97665),I=p(89441),W=p(64830);let Z=k=class extends D.Z{constructor(V){super(V),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new k({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:(0,b.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};(0,g._)([(0,$.J)({Extrude:"extrude"},{readOnly:!0})],Z.prototype,"type",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Z.prototype,"size",void 0),(0,g._)([(0,J.Cb)({type:W.b,json:{write:!0}})],Z.prototype,"material",void 0),(0,g._)([(0,J.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Z.prototype,"castShadows",void 0),(0,g._)([(0,J.Cb)(I.Z)],Z.prototype,"edges",void 0),Z=k=(0,g._)([(0,L.j)("esri.symbols.ExtrudeSymbol3DLayer")],Z);const X=Z},48575:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(52068),L=p(10012);let D=class extends L.Z{constructor(W){super(W),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};(0,g._)([(0,b.Cb)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":$.Z}},json:{default:null,write:!0}})],D.prototype,"outline",void 0),(0,g._)([(0,b.Cb)({type:["simple-fill","picture-fill"],readOnly:!0})],D.prototype,"type",void 0),D=(0,g._)([(0,C.j)("esri.symbols.FillSymbol")],D);const I=D},9260:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>K});var O,g=p(17626),b=p(62208),J=p(77712),$=(p(85931),p(8314),p(90912),p(55342)),L=p(76898),D=p(97665),I=p(89441),W=p(63743),k=p(153),Z=p(99255),X=p(12948),T=(p(63290),p(82255),p(64830));let x=O=class extends T.b{constructor(ae){super(ae),this.colorMixMode=null}clone(){const ae={color:(0,b.pC)(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new O(ae)}};(0,g._)([(0,$.J)({multiply:"multiply",replace:"replace",tint:"tint"})],x.prototype,"colorMixMode",void 0),x=O=(0,g._)([(0,L.j)("esri.symbols.support.Symbol3DFillMaterial")],x);var le,N=p(91558),M=p(86810),Q=p(23841),z=p(60958),ee=p(43652);let oe=le=class extends M.wq{constructor(ae){super(ae),this.color=new N.Z([0,0,0,1]),this.size=(0,Q.Wz)(1),this.pattern=null,this.patternCap="butt"}clone(){const ae={color:(0,b.pC)(this.color)?this.color.clone():null,size:this.size,pattern:(0,b.pC)(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new le(ae)}};var ce;(0,g._)([(0,J.Cb)(z.a)],oe.prototype,"color",void 0),(0,g._)([(0,J.Cb)(z.y)],oe.prototype,"size",void 0),(0,g._)([(0,J.Cb)(Z.D)],oe.prototype,"pattern",void 0),(0,g._)([(0,J.Cb)({type:ee.Hc,json:{default:"butt",write:{overridePolicy(){return{enabled:(0,b.pC)(this.pattern)}}}}})],oe.prototype,"patternCap",void 0),oe=le=(0,g._)([(0,L.j)("esri.symbols.support.Symbol3DOutline")],oe);let re=ce=class extends D.Z{constructor(ae){super(ae),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const ae={edges:(0,b.pC)(this.edges)?this.edges.clone():null,enabled:this.enabled,material:(0,b.pC)(this.material)?this.material.clone():null,pattern:(0,b.pC)(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:(0,b.pC)(this.outline)?this.outline.clone():null};return new ce(ae)}static fromSimpleFillSymbol(ae){var se,de,ue,pe,ie,te;const Ee=ae.outline&&ae.outline.style&&"inside-frame"!==ae.outline.style&&"solid"!==ae.outline.style?new W.Z({style:ae.outline.style}):null,fe={size:null!=(se=null==(de=ae.outline)?void 0:de.width)?se:0,color:(null!=(ue=null==(pe=ae.outline)?void 0:pe.color)?ue:X.ix).clone(),pattern:Ee};return Ee&&null!=(ie=ae.outline)&&ie.cap&&(fe.patternCap=ae.outline.cap),new ce({material:new x({color:(null!=(te=ae.color)?te:X.l9).clone()}),pattern:ae.style&&"solid"!==ae.style?new k.Z({style:ae.style}):null,outline:fe})}};(0,g._)([(0,$.J)({Fill:"fill"},{readOnly:!0})],re.prototype,"type",void 0),(0,g._)([(0,J.Cb)({type:x,json:{write:!0}})],re.prototype,"material",void 0),(0,g._)([(0,J.Cb)(Z.q)],re.prototype,"pattern",void 0),(0,g._)([(0,J.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],re.prototype,"castShadows",void 0),(0,g._)([(0,J.Cb)({type:oe,json:{write:!0}})],re.prototype,"outline",void 0),(0,g._)([(0,J.Cb)(I.Z)],re.prototype,"edges",void 0),re=ce=(0,g._)([(0,L.j)("esri.symbols.FillSymbol3DLayer")],re);const K=re},11472:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>k});var I,g=p(17626),b=p(86810),J=p(23841),B=p(77712),$=(p(85931),p(8314),p(66656)),L=p(76898),D=p(50369);let W=I=class extends b.wq{constructor(Z){super(Z),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(Z){return(0,J.t_)(Z)}clone(){return new I({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};(0,g._)([(0,B.Cb)({type:D.uC,json:{default:"none",write:!0}})],W.prototype,"decoration",void 0),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],W.prototype,"family",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{write:{overridePolicy:(Z,X,V)=>({enabled:!V||!V.textSymbol3D})}}})],W.prototype,"size",void 0),(0,g._)([(0,$.p)("size")],W.prototype,"castSize",null),(0,g._)([(0,B.Cb)({type:D.hR,json:{default:"normal",write:!0}})],W.prototype,"style",void 0),(0,g._)([(0,B.Cb)({type:D.Xw,json:{default:"normal",write:!0}})],W.prototype,"weight",void 0),W=I=(0,g._)([(0,L.j)("esri.symbols.Font")],W);const k=W},26531:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>K});var x,g=p(17626),b=p(63290),J=p(62208),B=p(21726),j=p(77712),D=(p(85931),p(8314),p(90912),p(55342)),I=p(76898),W=p(97665),k=p(12948),Z=p(33215),X=p(60958),V=p(37519),w=p(91558),T=p(86810),O=p(23841);let N=x=class extends T.wq{constructor(ae){super(ae),this.color=new w.Z([0,0,0,1]),this.size=(0,O.Wz)(1)}clone(){const ae={color:(0,J.pC)(this.color)?this.color.clone():null,size:this.size};return new x(ae)}};(0,g._)([(0,j.Cb)(X.a)],N.prototype,"color",void 0),(0,g._)([(0,j.Cb)(X.y)],N.prototype,"size",void 0),N=x=(0,g._)([(0,I.j)("esri.symbols.support.Symbol3DIconOutline")],N);var Q,M=p(64830);const z=b.Z.getLogger("esri.symbols.IconSymbol3DLayer");let ee=Q=class extends W.Z{constructor(ae){super(ae),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new Q({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:(0,J.pC)(this.material)?this.material.clone():null,outline:(0,J.pC)(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(ae){const se=ae.color||k.ix,de=le(ae),ue=ae.outline&&ae.outline.width>0?{size:ae.outline.width,color:(ae.outline.color||k.ix).clone()}:null;return new Q({size:ae.size,resource:{primitive:re(ae.style)},material:{color:se},outline:ue,anchor:de?"relative":void 0,anchorPosition:de})}static fromPictureMarkerSymbol(ae){const se=!ae.color||(0,k.rx)(ae.color)?k.ix:ae.color,de=le(ae);return new Q({size:ae.width<=ae.height?ae.height:ae.width,resource:{href:ae.url},material:{color:se.clone()},anchor:de?"relative":void 0,anchorPosition:de})}static fromCIMSymbol(ae){return new Q({resource:{href:(0,B._l)({mediaType:"application/json",data:JSON.stringify(ae.data)})}})}};function le(ae){const se="width"in ae?ae.width:ae.size,de="height"in ae?ae.height:ae.size,ue=oe(ae.xoffset),pe=oe(ae.yoffset);return(ue||pe)&&se&&de?{x:-ue/se,y:pe/de}:null}function oe(ae){return isFinite(ae)?ae:0}(0,g._)([(0,j.Cb)({type:M.b,json:{write:!0}})],ee.prototype,"material",void 0),(0,g._)([(0,j.Cb)({type:Z.b,json:{write:!0}})],ee.prototype,"resource",void 0),(0,g._)([(0,D.J)({Icon:"icon"},{readOnly:!0})],ee.prototype,"type",void 0),(0,g._)([(0,j.Cb)(X.y)],ee.prototype,"size",void 0),(0,g._)([(0,D.J)({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),(0,j.Cb)({json:{default:"center"}})],ee.prototype,"anchor",void 0),(0,g._)([(0,j.Cb)({type:V.e,json:{type:[Number],read:{reader:ae=>new V.e({x:ae[0],y:ae[1]})},write:{writer:(ae,se)=>{se.anchorPosition=[ae.x,ae.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],ee.prototype,"anchorPosition",void 0),(0,g._)([(0,j.Cb)({type:N,json:{write:!0}})],ee.prototype,"outline",void 0),ee=Q=(0,g._)([(0,I.j)("esri.symbols.IconSymbol3DLayer")],ee);const ce={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function re(ae){return ce[ae]||(z.warn(`${ae} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const K=ee},22490:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var k,g=p(17626),b=p(48701),J=p(58817),B=p(77712),C=(p(90912),p(55342)),$=p(76898),L=p(39368),D=p(21716),I=p(9824),W=p(97595);const Z=b.Z.ofType({base:null,key:"type",typeMap:{text:D.Z}});let X=k=class extends L.Z{constructor(w){super(w),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Z,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return(0,I.gv)(this)}hasVisibleVerticalOffset(){return(0,I.Uy)(this)}clone(){return new k({styleOrigin:(0,J.d9)(this.styleOrigin),symbolLayers:(0,J.d9)(this.symbolLayers),thumbnail:(0,J.d9)(this.thumbnail),callout:(0,J.d9)(this.callout),verticalOffset:(0,J.d9)(this.verticalOffset)})}static fromTextSymbol(w){return new k({symbolLayers:[D.Z.fromTextSymbol(w)]})}};(0,g._)([(0,B.Cb)({type:W._,json:{write:!0}})],X.prototype,"verticalOffset",void 0),(0,g._)([(0,B.Cb)(I.Y2)],X.prototype,"callout",void 0),(0,g._)([(0,B.Cb)({json:{read:!1,write:!1}})],X.prototype,"styleOrigin",void 0),(0,g._)([(0,B.Cb)({type:Z})],X.prototype,"symbolLayers",void 0),(0,g._)([(0,C.J)({LabelSymbol3D:"label-3d"},{readOnly:!0})],X.prototype,"type",void 0),X=k=(0,g._)([(0,$.j)("esri.symbols.LabelSymbol3D")],X);const V=X},40445:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var W,g=p(17626),b=p(48701),J=p(58817),B=p(77712),C=(p(90912),p(55342)),$=p(76898),L=p(21068),D=p(69147),I=p(39368);const k=b.Z.ofType({base:null,key:"type",typeMap:{line:L.Z,path:D.Z}}),Z=b.Z.ofType({base:null,key:"type",typeMap:{line:L.Z,path:D.Z}});let X=W=class extends I.Z{constructor(w){super(w),this.symbolLayers=new k,this.type="line-3d"}clone(){return new W({styleOrigin:(0,J.d9)(this.styleOrigin),symbolLayers:(0,J.d9)(this.symbolLayers),thumbnail:(0,J.d9)(this.thumbnail)})}static fromSimpleLineSymbol(w){return new W({symbolLayers:[L.Z.fromSimpleLineSymbol(w)]})}};(0,g._)([(0,B.Cb)({type:k,json:{type:Z}})],X.prototype,"symbolLayers",void 0),(0,g._)([(0,C.J)({LineSymbol3D:"line-3d"},{readOnly:!0})],X.prototype,"type",void 0),X=W=(0,g._)([(0,$.j)("esri.symbols.LineSymbol3D")],X);const V=X},21068:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>le});var g=p(17626),b=p(62208),J=p(23841),B=p(77712),$=(p(85931),p(8314),p(90912)),L=p(55342),D=p(76898),I=p(91558),W=p(79608),k=p(86810),Z=p(67866);let X=class extends((0,W.J)(k.wq)){constructor(oe){super(oe),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(oe){return(0,b.pC)(oe)&&oe.placement===this.placement&&oe.style===this.style&&((0,b.Wi)(this.color)&&(0,b.Wi)(oe.color)||(0,b.pC)(this.color)&&(0,b.pC)(oe.color)&&this.color.toJSON()===oe.color.toJSON())}};(0,g._)([(0,B.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],X.prototype,"type",void 0),(0,g._)([(0,B.Cb)({type:Z.J,json:{default:"begin-end",write:!0}})],X.prototype,"placement",void 0),(0,g._)([(0,B.Cb)({type:Z.k,json:{default:"arrow",write:!0}})],X.prototype,"style",void 0),(0,g._)([(0,B.Cb)({type:I.Z,json:{type:[$.z8],default:null,write:!0}})],X.prototype,"color",void 0),X=(0,g._)([(0,D.j)("esri.symbols.LineStyleMarker3D")],X);const V=X;var z,w=p(97665),T=p(63743),O=p(99255),x=p(12948),N=p(60958),M=p(64830),Q=p(43652);let ee=z=class extends w.Z{constructor(oe){super(oe),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=(0,J.Wz)(1),this.pattern=null,this.marker=null}clone(){const oe={enabled:this.enabled,material:(0,b.pC)(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:(0,b.pC)(this.pattern)?this.pattern.clone():null,marker:(0,b.pC)(this.marker)?this.marker.clone():null};return new z(oe)}static fromSimpleLineSymbol(oe){var ce,re,K;const ae={enabled:!0,size:null!=(ce=oe.width)?ce:(0,J.Wz)(1),cap:oe.cap||"butt",join:oe.join||"miter",pattern:oe.style&&"inside-frame"!==oe.style?new T.Z({style:oe.style}):null,material:new M.b({color:(oe.color||x.ix).clone()}),marker:oe.marker?new V({placement:oe.marker.placement,style:oe.marker.style,color:null!=(re=null==(K=oe.marker.color)?void 0:K.clone())?re:null}):null};return new z(ae)}};(0,g._)([(0,B.Cb)({type:M.b,json:{write:!0}})],ee.prototype,"material",void 0),(0,g._)([(0,L.J)({Line:"line"},{readOnly:!0})],ee.prototype,"type",void 0),(0,g._)([(0,B.Cb)({type:Q.w2,json:{write:!0,default:"miter"}})],ee.prototype,"join",void 0),(0,g._)([(0,B.Cb)({type:Q.Hc,json:{write:!0,default:"butt"}})],ee.prototype,"cap",void 0),(0,g._)([(0,B.Cb)(N.y)],ee.prototype,"size",void 0),(0,g._)([(0,B.Cb)(O.D)],ee.prototype,"pattern",void 0),(0,g._)([(0,B.Cb)({types:{key:"type",base:V,typeMap:{style:V}},json:{write:!0}})],ee.prototype,"marker",void 0),ee=z=(0,g._)([(0,D.j)("esri.symbols.LineSymbol3DLayer")],ee);const le=ee},46735:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var g=p(17626),b=p(23841),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898)),L=p(10012);let D=class extends L.Z{constructor(W){super(W),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};(0,g._)([(0,J.Cb)({type:Number,json:{read:W=>W&&-1*W,write:(W,k)=>k.angle=W&&-1*W}})],D.prototype,"angle",void 0),(0,g._)([(0,J.Cb)({type:["simple-marker","picture-marker"],readOnly:!0})],D.prototype,"type",void 0),(0,g._)([(0,J.Cb)({type:Number,cast:b.t_,json:{write:!0}})],D.prototype,"xoffset",void 0),(0,g._)([(0,J.Cb)({type:Number,cast:b.t_,json:{write:!0}})],D.prototype,"yoffset",void 0),(0,g._)([(0,J.Cb)({type:Number,cast:W=>"auto"===W?W:(0,b.t_)(W),json:{write:!0}})],D.prototype,"size",void 0),D=(0,g._)([(0,$.j)("esri.symbols.MarkerSymbol")],D);const I=D},2066:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>T});var k,g=p(17626),b=p(62208),J=p(77712),$=(p(85931),p(8314),p(90912),p(55342)),L=p(76898),D=p(97665),I=p(48521),W=p(14517);let Z=k=class extends W.Z{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new k({x:this.x,y:this.y,z:this.z})}};(0,g._)([(0,J.Cb)({type:Number})],Z.prototype,"x",void 0),(0,g._)([(0,J.Cb)({type:Number})],Z.prototype,"y",void 0),(0,g._)([(0,J.Cb)({type:Number})],Z.prototype,"z",void 0),Z=k=(0,g._)([(0,L.j)("esri.symbols.support.Symbol3DAnchorPosition3D")],Z);var V,X=p(64830);let w=V=class extends D.Z{constructor(O){super(O),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new V({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:(0,b.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||"string"!=typeof this.resource.href}};(0,g._)([(0,J.Cb)({type:X.b,json:{write:!0}})],w.prototype,"material",void 0),(0,g._)([(0,J.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],w.prototype,"castShadows",void 0),(0,g._)([(0,J.Cb)({type:I.k,json:{write:!0}})],w.prototype,"resource",void 0),(0,g._)([(0,$.J)({Object:"object"},{readOnly:!0})],w.prototype,"type",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{write:!0}})],w.prototype,"width",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{write:!0}})],w.prototype,"height",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{write:!0}})],w.prototype,"depth",void 0),(0,g._)([(0,$.J)({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),(0,J.Cb)({json:{default:"origin"}})],w.prototype,"anchor",void 0),(0,g._)([(0,J.Cb)({type:Z,json:{type:[Number],read:{reader:O=>new Z({x:O[0],y:O[1],z:O[2]})},write:{writer:(O,x)=>{x.anchorPosition=[O.x,O.y,O.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],w.prototype,"anchorPosition",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{write:!0}})],w.prototype,"heading",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{write:!0}})],w.prototype,"tilt",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{write:!0}})],w.prototype,"roll",void 0),(0,g._)([(0,J.Cb)({readOnly:!0})],w.prototype,"isPrimitive",null),w=V=(0,g._)([(0,L.j)("esri.symbols.ObjectSymbol3DLayer")],w);const T=w},69147:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var Z,g=p(17626),b=p(62208),J=p(77712),$=(p(85931),p(8314),p(90912),p(55342)),L=p(68653),D=p(76898),I=p(97665),W=p(64830),k=p(43652);let X=Z=class extends I.Z{constructor(w){super(w),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(w,T){return null!=w?w:null==T.height&&null!=T.size?T.size:void 0}readHeight(w,T){return null!=w?w:null==T.width&&null!=T.size?T.size:void 0}clone(){return new Z({enabled:this.enabled,material:(0,b.pC)(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};(0,g._)([(0,J.Cb)({type:W.b,json:{write:!0}})],X.prototype,"material",void 0),(0,g._)([(0,J.Cb)({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],X.prototype,"castShadows",void 0),(0,g._)([(0,$.J)({Path:"path"},{readOnly:!0})],X.prototype,"type",void 0),(0,g._)([(0,J.Cb)({type:["circle","quad"],json:{write:!0,default:"circle"}})],X.prototype,"profile",void 0),(0,g._)([(0,J.Cb)({type:k.w2,json:{write:!0,default:"miter"}})],X.prototype,"join",void 0),(0,g._)([(0,J.Cb)({type:k.KW,json:{write:!0,default:"butt"}})],X.prototype,"cap",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],X.prototype,"width",void 0),(0,g._)([(0,L.r)("width",["width","size","height"])],X.prototype,"readWidth",null),(0,g._)([(0,J.Cb)({type:Number,json:{write:!0}})],X.prototype,"height",void 0),(0,g._)([(0,L.r)("height",["height","size","width"])],X.prototype,"readHeight",null),(0,g._)([(0,J.Cb)({type:["center","bottom","top"],json:{write:!0,default:"center"}})],X.prototype,"anchor",void 0),(0,g._)([(0,J.Cb)({type:["heading","all"],json:{write:!0,default:"all"}})],X.prototype,"profileRotation",void 0),X=Z=(0,g._)([(0,D.j)("esri.symbols.PathSymbol3DLayer")],X);const V=X},13546:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>Z});var W,g=p(17626),b=p(58817),J=p(23841),B=p(77712),C=(p(90912),p(55342)),$=p(68653),L=p(76898),D=p(46735),I=p(69738);let k=W=class extends D.Z{constructor(...X){super(...X),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(X,V,w){if(X&&"string"!=typeof X&&null==X.imageData)return X;const T={};return X&&(T.url=X),null!=V&&(T.width=(0,J.t_)(V)),null!=w&&(T.height=(0,J.t_)(w)),T}readHeight(X,V){return V.size||X}readWidth(X,V){return V.size||X}clone(){const X=new W({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return X._set("source",(0,b.d9)(this.source)),X}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};(0,g._)([(0,B.Cb)({json:{write:!1}})],k.prototype,"color",void 0),(0,g._)([(0,C.J)({esriPMS:"picture-marker"},{readOnly:!0})],k.prototype,"type",void 0),(0,g._)([(0,B.Cb)(I.KA)],k.prototype,"url",void 0),(0,g._)([(0,B.Cb)(I.Ds)],k.prototype,"source",void 0),(0,g._)([(0,B.Cb)({type:Number,cast:J.t_,json:{write:!0}})],k.prototype,"height",void 0),(0,g._)([(0,$.r)("height",["height","size"])],k.prototype,"readHeight",null),(0,g._)([(0,B.Cb)({type:Number,cast:J.t_,json:{write:!0}})],k.prototype,"width",void 0),(0,g._)([(0,B.Cb)({json:{write:!1}})],k.prototype,"size",void 0),k=W=(0,g._)([(0,L.j)("esri.symbols.PictureMarkerSymbol")],k);const Z=k},69852:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>T});var X,g=p(17626),b=p(48701),J=p(58817),B=p(77712),C=(p(90912),p(55342)),$=p(76898),L=p(26531),D=p(2066),I=p(39368),W=p(21716),k=p(9824),Z=p(97595);const V=b.Z.ofType({base:null,key:"type",typeMap:{icon:L.Z,object:D.Z,text:W.Z}});let w=X=class extends I.Z{constructor(O){super(O),this.verticalOffset=null,this.callout=null,this.symbolLayers=new V,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const O of this.symbolLayers.items)switch(O.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return(0,k.gv)(this)}hasVisibleVerticalOffset(){return(0,k.Uy)(this)}clone(){return new X({verticalOffset:(0,J.d9)(this.verticalOffset),callout:(0,J.d9)(this.callout),styleOrigin:(0,J.d9)(this.styleOrigin),symbolLayers:(0,J.d9)(this.symbolLayers),thumbnail:(0,J.d9)(this.thumbnail)})}static fromSimpleMarkerSymbol(O){return new X({symbolLayers:[L.Z.fromSimpleMarkerSymbol(O)]})}static fromPictureMarkerSymbol(O){return new X({symbolLayers:[L.Z.fromPictureMarkerSymbol(O)]})}static fromCIMSymbol(O){var x,N;return"CIMPointSymbol"!==(null==(x=O.data)||null==(N=x.symbol)?void 0:N.type)?null:new X(O.data.symbol.callout?{symbolLayers:[L.Z.fromCIMSymbol(O)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[L.Z.fromCIMSymbol(O)]})}static fromTextSymbol(O){return new X({symbolLayers:[W.Z.fromTextSymbol(O)]})}};(0,g._)([(0,B.Cb)({type:Z._,json:{write:!0}})],w.prototype,"verticalOffset",void 0),(0,g._)([(0,B.Cb)(k.Y2)],w.prototype,"callout",void 0),(0,g._)([(0,B.Cb)({type:V,json:{origins:{"web-scene":{write:!0}}}})],w.prototype,"symbolLayers",void 0),(0,g._)([(0,C.J)({PointSymbol3D:"point-3d"},{readOnly:!0})],w.prototype,"type",void 0),w=X=(0,g._)([(0,$.j)("esri.symbols.PointSymbol3D")],w);const T=w},89673:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>z});var x,g=p(17626),b=p(48701),J=p(26584),B=p(58817),j=p(62208),C=p(77712),L=(p(90912),p(55342)),D=p(76898),I=p(99433),W=p(65499),k=p(9260),Z=p(26531),X=p(21068),V=p(2066),w=p(39368),T=p(21716),O=p(72622);const N=b.Z.ofType({base:null,key:"type",typeMap:{extrude:W.Z,fill:k.Z,icon:Z.Z,line:X.Z,object:V.Z,text:T.Z,water:O.Z}}),M=b.Z.ofType({base:null,key:"type",typeMap:{extrude:W.Z,fill:k.Z,icon:Z.Z,line:X.Z,object:V.Z,water:O.Z}});let Q=x=class extends w.Z{constructor(ee){super(ee),this.symbolLayers=new N,this.type="polygon-3d"}writeSymbolLayers(ee,le,oe,ce){const re=ee.filter(K=>"text"!==K.type);if(ce&&ce.messages&&re.length<ee.length){const K=ee.find(ae=>"text"===ae.type);ce.messages.push(new J.Z("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:K}))}le[oe]=re.map(K=>K.write({},ce)).toArray()}clone(){return new x({styleOrigin:(0,B.d9)(this.styleOrigin),symbolLayers:(0,B.d9)(this.symbolLayers),thumbnail:(0,B.d9)(this.thumbnail)})}static fromJSON(ee){const le=new x;if(le.read(ee),2===le.symbolLayers.length&&"fill"===le.symbolLayers.getItemAt(0).type&&"line"===le.symbolLayers.getItemAt(1).type){const oe=le.symbolLayers.getItemAt(0),ce=le.symbolLayers.getItemAt(1);!ce.enabled||ee.symbolLayers&&ee.symbolLayers[1]&&!1===ee.symbolLayers[1].enable||(oe.outline={size:ce.size,color:(0,j.pC)(ce.material)?ce.material.color:null}),le.symbolLayers.removeAt(1)}return le}static fromSimpleFillSymbol(ee){return new x({symbolLayers:[k.Z.fromSimpleFillSymbol(ee)]})}};(0,g._)([(0,C.Cb)({type:N,json:{type:M}})],Q.prototype,"symbolLayers",void 0),(0,g._)([(0,I.c)("web-scene","symbolLayers")],Q.prototype,"writeSymbolLayers",null),(0,g._)([(0,L.J)({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Q.prototype,"type",void 0),Q=x=(0,g._)([(0,D.j)("esri.symbols.PolygonSymbol3D")],Q);const z=Q},88493:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>X});var W,g=p(17626),b=p(91558),J=p(2076),B=p(58817),j=p(77712),$=(p(90912),p(55342)),L=p(76898),D=p(48575),I=p(52068);const k=new J.X({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Z=W=class extends D.Z{constructor(...V){super(...V),this.color=new b.Z([0,0,0,.25]),this.outline=new I.Z,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(V,w,T){if(V&&"string"!=typeof V)return V;const O={};return V&&(O.style=V),w&&(O.outline=w),T&&(O.color=T),O}clone(){return new W({color:(0,B.d9)(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};(0,g._)([(0,j.Cb)()],Z.prototype,"color",void 0),(0,g._)([(0,j.Cb)()],Z.prototype,"outline",void 0),(0,g._)([(0,$.J)({esriSFS:"simple-fill"},{readOnly:!0})],Z.prototype,"type",void 0),(0,g._)([(0,j.Cb)({type:k.apiValues,json:{read:k.read,write:k.write}})],Z.prototype,"style",void 0),Z=W=(0,g._)([(0,L.j)("esri.symbols.SimpleFillSymbol")],Z);const X=Z},52068:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>le});var g=p(17626),b=p(2076),J=p(58817),B=p(23841),j=p(77712),$=(p(90912),p(55342)),L=p(76898),W=(p(85931),p(8314),p(10012));let k=class extends W.Z{constructor(oe){super(oe),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};(0,g._)([(0,$.J)({esriSLS:"simple-line"},{readOnly:!0})],k.prototype,"type",void 0),(0,g._)([(0,j.Cb)({type:Number,cast:B.t_,json:{write:!0}})],k.prototype,"width",void 0),k=(0,g._)([(0,L.j)("esri.symbols.LineSymbol")],k);const Z=k;var x,X=p(91558),V=p(86810),w=p(68653),T=p(99433),O=p(67866);let N=x=class extends V.wq{constructor(oe){super(oe),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(oe,ce,re,K){ce[re]="web-map"===(null==K?void 0:K.origin)?"arrow":oe}set color(oe){this._set("color",oe)}readColor(oe){return oe&&null!=oe[0]?[oe[0],oe[1],oe[2],oe[3]/255]:oe}writeColor(oe,ce,re,K){"web-map"===(null==K?void 0:K.origin)||(ce[re]=oe)}clone(){return new x({color:(0,J.d9)(this.color),placement:this.placement,style:this.style})}hash(){var oe;return`${this.placement}.${null==(oe=this.color)?void 0:oe.hash()}.${this.style}`}};(0,g._)([(0,j.Cb)({type:["begin","end","begin-end"],json:{write:!0}})],N.prototype,"placement",void 0),(0,g._)([(0,$.J)({"line-marker":"line-marker"},{readOnly:!0}),(0,j.Cb)({json:{origins:{"web-map":{write:!1}}}})],N.prototype,"type",void 0),(0,g._)([(0,j.Cb)({type:O.k})],N.prototype,"style",void 0),(0,g._)([(0,T.c)("style")],N.prototype,"writeStyle",null),(0,g._)([(0,j.Cb)({type:X.Z,value:null,json:{write:{allowNull:!0}}})],N.prototype,"color",null),(0,g._)([(0,w.r)("color")],N.prototype,"readColor",null),(0,g._)([(0,T.c)("color")],N.prototype,"writeColor",null),N=x=(0,g._)([(0,L.j)("esri.symbols.LineSymbolMarker")],N);const M=N;var Q;const z=new b.X({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let ee=Q=class extends Z{constructor(...oe){super(...oe),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(oe,ce,re,K,ae,se){if(oe&&"string"!=typeof oe)return oe;const de={};return null!=oe&&(de.style=oe),null!=ce&&(de.color=ce),null!=re&&(de.width=(0,B.t_)(re)),null!=K&&(de.cap=K),null!=ae&&(de.join=ae),null!=se&&(de.miterLimit=(0,B.t_)(se)),de}clone(){var oe;return new Q({color:(0,J.d9)(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:null==(oe=this.marker)?void 0:oe.clone()})}hash(){var oe,ce;return`${super.hash()}.${null==(oe=this.color)?void 0:oe.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${null==(ce=this.marker)?void 0:ce.hash()}`}};(0,g._)([(0,$.J)({esriSLS:"simple-line"},{readOnly:!0})],ee.prototype,"type",void 0),(0,g._)([(0,j.Cb)({type:z.apiValues,json:{read:z.read,write:z.write}})],ee.prototype,"style",void 0),(0,g._)([(0,j.Cb)({type:["butt","round","square"],json:{write:{overridePolicy:(oe,ce,re)=>({enabled:"round"!==oe&&(null==re||null==re.origin)})}}})],ee.prototype,"cap",void 0),(0,g._)([(0,j.Cb)({type:["miter","round","bevel"],json:{write:{overridePolicy:(oe,ce,re)=>({enabled:"round"!==oe&&(null==re||null==re.origin)})}}})],ee.prototype,"join",void 0),(0,g._)([(0,j.Cb)({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":M}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],ee.prototype,"marker",void 0),(0,g._)([(0,j.Cb)({type:Number,json:{read:!1,write:!1}})],ee.prototype,"miterLimit",void 0),ee=Q=(0,g._)([(0,L.j)("esri.symbols.SimpleLineSymbol")],ee);const le=ee},57213:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>w});var Z,g=p(17626),b=p(91558),J=p(2076),B=p(58817),j=p(23841),C=p(77712),L=(p(90912),p(55342)),D=p(76898),I=p(99433),W=p(46735),k=p(52068);const X=new J.X({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let V=Z=class extends W.Z{constructor(...T){super(...T),this.color=new b.Z([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new k.Z}normalizeCtorArgs(T,O,x,N){if(T&&"string"!=typeof T)return T;const M={};return T&&(M.style=T),null!=O&&(M.size=(0,j.t_)(O)),x&&(M.outline=x),N&&(M.color=N),M}writeColor(T,O){T&&"x"!==this.style&&"cross"!==this.style&&(O.color=T.toJSON()),null===T&&(O.color=null)}set path(T){this.style="path",this._set("path",T)}clone(){return new Z({angle:this.angle,color:(0,B.d9)(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var T;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${null==(T=this.outline)?void 0:T.hash()}`}};(0,g._)([(0,C.Cb)()],V.prototype,"color",void 0),(0,g._)([(0,I.c)("color")],V.prototype,"writeColor",null),(0,g._)([(0,L.J)({esriSMS:"simple-marker"},{readOnly:!0})],V.prototype,"type",void 0),(0,g._)([(0,C.Cb)()],V.prototype,"size",void 0),(0,g._)([(0,C.Cb)({type:X.apiValues,json:{read:X.read,write:X.write}})],V.prototype,"style",void 0),(0,g._)([(0,C.Cb)({type:String,json:{write:!0}})],V.prototype,"path",null),(0,g._)([(0,C.Cb)({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":k.Z}},json:{default:null,write:!0}})],V.prototype,"outline",void 0),V=Z=(0,g._)([(0,D.j)("esri.symbols.SimpleMarkerSymbol")],V);const w=V},10012:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var g=p(15861),b=p(17626),J=p(91558),B=p(2076),j=p(86810),C=p(77712),I=(p(85931),p(8314),p(90912),p(68653)),W=p(76898);const k=new B.X({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let Z=0,X=class extends j.wq{constructor(w){super(w),this.id="sym"+Z++,this.type=null,this.color=new J.Z([0,0,0,1])}readColor(w){return w&&null!=w[0]?[w[0],w[1],w[2],w[3]/255]:w}collectRequiredFields(w,T){return(0,g.Z)(function*(){})()}hash(){return JSON.stringify(this.toJSON())}clone(){}};(0,b._)([(0,C.Cb)({type:k.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:k.write}}})],X.prototype,"type",void 0),(0,b._)([(0,C.Cb)({type:J.Z,json:{write:{allowNull:!0}}})],X.prototype,"color",void 0),(0,b._)([(0,I.r)("color")],X.prototype,"readColor",null),X=(0,b._)([(0,W.j)("esri.symbols.Symbol")],X);const V=X},39368:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>de});var g=p(17626),b=p(48701),J=p(89726),B=p(63290),j=p(21726),C=p(14889),$=p(77712),I=(p(85931),p(8314),p(66656)),W=p(68653),k=p(76898),Z=p(99433),X=p(84687),V=p(29840),w=p(65499),T=p(9260),O=p(26531),x=p(21068),N=p(2066),M=p(69147),Q=p(10012),z=p(97665),ee=p(21716),le=p(72622),oe=p(77345),ce=p(96296);const re={icon:O.Z,object:N.Z,line:x.Z,path:M.Z,fill:T.Z,extrude:w.Z,text:ee.Z,water:le.Z},K=b.Z.ofType({base:z.Z,key:"type",typeMap:re,errorContext:"symbol-layer"}),ae=B.Z.getLogger("esri.symbols.Symbol3D");let se=class extends Q.Z{constructor(ue){super(ue),this.styleOrigin=null,this.thumbnail=null,this.type=null;const pe=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers;this._set("symbolLayers",new(pe&&pe.type||b.Z))}get color(){return null}set color(ue){this.initialized&&ae.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(ue){(0,J.Z)(ue,this._get("symbolLayers"))}readStyleOrigin(ue,pe,ie){if(ue.styleUrl&&ue.name){const te=(0,V.f)(ue.styleUrl,ie);return new oe.Z({styleUrl:te,name:ue.name})}if(ue.styleName&&ue.name)return new oe.Z({portal:ie&&ie.portal||X.Z.getDefault(),styleName:ue.styleName,name:ue.name});ie&&ie.messages&&ie.messages.push(new C.Z("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:ie,definition:ue}))}writeStyleOrigin(ue,pe,ie,te){if(ue.styleUrl&&ue.name){let Ee=(0,V.t)(ue.styleUrl,te);(0,j.YP)(Ee)&&(Ee=(0,j.Fv)(Ee)),pe.styleOrigin={styleUrl:Ee,name:ue.name}}else ue.styleName&&ue.name&&(ue.portal&&te&&te.portal&&!(0,j.tm)(ue.portal.restUrl,te.portal.restUrl)?te&&te.messages&&te.messages.push(new C.Z("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):pe.styleOrigin={styleName:ue.styleName,name:ue.name})}normalizeCtorArgs(ue){return ue instanceof z.Z||ue&&re[ue.type]?{symbolLayers:[ue]}:Array.isArray(ue)?{symbolLayers:ue}:ue}};(0,g._)([(0,$.Cb)({json:{read:!1,write:!1}})],se.prototype,"color",null),(0,g._)([(0,$.Cb)({type:K,nonNullable:!0,json:{write:!0}}),(0,I.p)(J.R)],se.prototype,"symbolLayers",null),(0,g._)([(0,$.Cb)({type:oe.Z})],se.prototype,"styleOrigin",void 0),(0,g._)([(0,W.r)("styleOrigin")],se.prototype,"readStyleOrigin",null),(0,g._)([(0,Z.c)("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],se.prototype,"writeStyleOrigin",null),(0,g._)([(0,$.Cb)({type:ce.p,json:{read:!1}})],se.prototype,"thumbnail",void 0),(0,g._)([(0,$.Cb)({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],se.prototype,"type",void 0),se=(0,g._)([(0,k.j)("esri.symbols.Symbol3D")],se);const de=se},97665:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898)),L=p(99433);let D=class extends b.wq{constructor(W){super(W),this.enabled=!0,this.type=null}writeEnabled(W,k,Z){W||(k[Z]=W)}};(0,g._)([(0,J.Cb)({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],D.prototype,"enabled",void 0),(0,g._)([(0,L.c)("enabled")],D.prototype,"writeEnabled",null),(0,g._)([(0,J.Cb)({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],D.prototype,"type",void 0),D=(0,g._)([(0,$.j)("esri.symbols.Symbol3DLayer")],D);const I=D},35540:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var Z,g=p(17626),b=p(91558),J=p(58817),B=p(23841),j=p(77712),C=p(66656),$=p(55342),L=p(76898),D=p(99433),I=p(11472),W=p(10012),k=p(50369);let X=Z=class extends W.Z{constructor(...w){super(...w),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new I.Z,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(w,T,O){if(w&&"string"!=typeof w)return w;const x={};return w&&(x.text=w),T&&(x.font=T),O&&(x.color=O),x}writeLineWidth(w,T,O,x){x&&"string"!=typeof x||(T[O]=w)}castLineWidth(w){return(0,B.t_)(w)}writeLineHeight(w,T,O,x){x&&"string"!=typeof x||(T[O]=w)}clone(){return new Z({angle:this.angle,backgroundColor:(0,J.d9)(this.backgroundColor),borderLineColor:(0,J.d9)(this.borderLineColor),borderLineSize:this.borderLineSize,color:(0,J.d9)(this.color),font:this.font&&this.font.clone(),haloColor:(0,J.d9)(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};(0,g._)([(0,j.Cb)({type:b.Z,json:{write:!0}})],X.prototype,"backgroundColor",void 0),(0,g._)([(0,j.Cb)({type:b.Z,json:{write:!0}})],X.prototype,"borderLineColor",void 0),(0,g._)([(0,j.Cb)({type:Number,json:{write:!0}})],X.prototype,"borderLineSize",void 0),(0,g._)([(0,j.Cb)({type:I.Z,json:{write:!0}})],X.prototype,"font",void 0),(0,g._)([(0,j.Cb)(Sr(_t({},k.x0),{json:{write:!0}}))],X.prototype,"horizontalAlignment",void 0),(0,g._)([(0,j.Cb)({type:Boolean,json:{write:!0}})],X.prototype,"kerning",void 0),(0,g._)([(0,j.Cb)({type:b.Z,json:{write:!0}})],X.prototype,"haloColor",void 0),(0,g._)([(0,j.Cb)({type:Number,cast:B.t_,json:{write:!0}})],X.prototype,"haloSize",void 0),(0,g._)([(0,j.Cb)({type:Boolean,json:{write:!0}})],X.prototype,"rightToLeft",void 0),(0,g._)([(0,j.Cb)({type:Boolean,json:{write:!0}})],X.prototype,"rotated",void 0),(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],X.prototype,"text",void 0),(0,g._)([(0,$.J)({esriTS:"text"},{readOnly:!0})],X.prototype,"type",void 0),(0,g._)([(0,j.Cb)(Sr(_t({},k.Nj),{json:{write:!0}}))],X.prototype,"verticalAlignment",void 0),(0,g._)([(0,j.Cb)({type:Number,cast:B.t_,json:{write:!0}})],X.prototype,"xoffset",void 0),(0,g._)([(0,j.Cb)({type:Number,cast:B.t_,json:{write:!0}})],X.prototype,"yoffset",void 0),(0,g._)([(0,j.Cb)({type:Number,json:{read:w=>w&&-1*w,write:(w,T)=>T.angle=w&&-1*w}})],X.prototype,"angle",void 0),(0,g._)([(0,j.Cb)({type:Number,json:{write:!0}})],X.prototype,"width",void 0),(0,g._)([(0,j.Cb)({type:Number})],X.prototype,"lineWidth",void 0),(0,g._)([(0,D.c)("lineWidth")],X.prototype,"writeLineWidth",null),(0,g._)([(0,C.p)("lineWidth")],X.prototype,"castLineWidth",null),(0,g._)([(0,j.Cb)(k.Ck)],X.prototype,"lineHeight",void 0),(0,g._)([(0,D.c)("lineHeight")],X.prototype,"writeLineHeight",null),X=Z=(0,g._)([(0,L.j)("esri.symbols.TextSymbol")],X);const V=X},21716:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>le});var X,g=p(17626),b=p(58817),J=p(62208),B=p(77712),C=(p(90912),p(55342)),$=p(76898),L=p(99433),D=p(11472),I=p(97665),W=p(60958),k=p(91558),Z=p(86810);let V=X=class extends Z.wq{constructor(){super(...arguments),this.color=new k.Z([0,0,0,1]),this.size=0}clone(){const oe={color:(0,b.d9)(this.color),size:this.size};return new X(oe)}};(0,g._)([(0,B.Cb)(W.a)],V.prototype,"color",void 0),(0,g._)([(0,B.Cb)(W.y)],V.prototype,"size",void 0),V=X=(0,g._)([(0,$.j)("esri.symbols.support.Symbol3DHalo")],V);var w=p(64830),T=p(79608);p(85931),p(8314);let N=class extends((0,T.J)(Z.wq)){constructor(oe){super(oe),this.color=null}};(0,g._)([(0,B.Cb)(W.a)],N.prototype,"color",void 0),N=(0,g._)([(0,$.j)("esri.symbols.support.Symbol3DTextBackground")],N);var Q,M=p(50369);let z=Q=class extends I.Z{constructor(oe){super(oe),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(oe){(0,J.pC)(oe)&&(0,J.pC)(this._userSize)&&(oe.size=this._userSize),this._set("font",oe)}writeFont(oe,ce,re,K){const ae=Sr(_t({},K),{textSymbol3D:!0});ce.font=oe.write({},ae),delete ce.font.size}get size(){return(0,J.pC)(this._userSize)?this._userSize:(0,J.pC)(this.font)&&null!=this.font.size?this.font.size:9}set size(oe){this._userSize=oe,(0,J.pC)(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const oe=new Q({enabled:this.enabled,font:this.font&&(0,b.d9)(this.font),halo:this.halo&&(0,b.d9)(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:(0,J.pC)(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:(0,b.d9)(this.background)});return oe._userSize=this._userSize,oe}static fromTextSymbol(oe){return new Q({font:(0,J.pC)(oe.font)?oe.font.clone():new D.Z,halo:ee(oe.haloColor,oe.haloSize),horizontalAlignment:oe.horizontalAlignment,lineHeight:oe.lineHeight,material:oe.color?new w.b({color:oe.color.clone()}):null,text:oe.text,verticalAlignment:oe.verticalAlignment,background:oe.backgroundColor?new N({color:oe.backgroundColor.clone()}):null})}};function ee(oe,ce){return oe&&ce>0?new V({color:(0,b.d9)(oe),size:ce}):null}(0,g._)([(0,B.Cb)({type:D.Z,json:{write:!0}})],z.prototype,"font",null),(0,g._)([(0,L.c)("font")],z.prototype,"writeFont",null),(0,g._)([(0,B.Cb)({type:V,json:{write:!0}})],z.prototype,"halo",void 0),(0,g._)([(0,B.Cb)(Sr(_t({},M.OJ),{json:{default:"center",write:!0}}))],z.prototype,"horizontalAlignment",void 0),(0,g._)([(0,B.Cb)(Sr(_t({},M.Ck),{json:{default:1,write:!0}}))],z.prototype,"lineHeight",void 0),(0,g._)([(0,B.Cb)({type:w.b,json:{write:!0}})],z.prototype,"material",void 0),(0,g._)([(0,B.Cb)({type:N,json:{write:!0}})],z.prototype,"background",void 0),(0,g._)([(0,B.Cb)(W.y)],z.prototype,"size",null),(0,g._)([(0,B.Cb)({type:String,json:{write:!0}})],z.prototype,"text",void 0),(0,g._)([(0,C.J)({Text:"text"},{readOnly:!0})],z.prototype,"type",void 0),(0,g._)([(0,B.Cb)(Sr(_t({},M.Nj),{json:{default:"baseline",write:!0}}))],z.prototype,"verticalAlignment",void 0),z=Q=(0,g._)([(0,$.j)("esri.symbols.TextSymbol3DLayer")],z);const le=z},72622:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>k});var D,g=p(17626),b=p(91558),J=p(58817),B=p(77712),j=p(90912),C=p(55342),$=p(76898),L=p(97665);let I=D=class extends L.Z{constructor(Z){super(Z),this.color=W.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new D({color:(0,J.d9)(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};(0,g._)([(0,B.Cb)({type:b.Z,nonNullable:!0,json:{type:[j.z8],write:(Z,X,V)=>X[V]=Z.toArray(b.Z.AlphaMode.UNLESS_OPAQUE),default:()=>W.clone(),defaultEquals:Z=>Z.toCss(!0)===W.toCss(!0)}})],I.prototype,"color",void 0),(0,g._)([(0,C.J)({Water:"water"},{readOnly:!0})],I.prototype,"type",void 0),(0,g._)([(0,B.Cb)({type:["small","medium","large"],json:{write:!0,default:"medium"}})],I.prototype,"waterbodySize",void 0),(0,g._)([(0,B.Cb)({type:Number,json:{write:!0,default:null}})],I.prototype,"waveDirection",void 0),(0,g._)([(0,B.Cb)({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],I.prototype,"waveStrength",void 0),I=D=(0,g._)([(0,$.j)("esri.symbols.WaterSymbol3DLayer")],I);const W=new b.Z([0,119,190]),k=I},12874:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>x});var V,g=p(15861),b=p(17626),J=p(63290),B=p(10699),j=p(77712),D=(p(85931),p(8314),p(90912),p(55342)),I=p(76898),W=p(84687),k=p(29840),Z=p(10012),X=p(96296);const w=J.Z.getLogger("esri.symbols.WebStyleSymbol");let T=V=class extends Z.Z{constructor(N){super(N),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}read(N,M){this.portal=M?M.portal:void 0,super.read(N,M)}clone(){return new V({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(N){return this._fetchSymbol("webRef",N)}fetchCIMSymbol(N){return this._fetchSymbol("cimRef",N)}_fetchSymbol(N,M){var Q=this;return(0,g.Z)(function*(){const z=yield function O(){return Promise.all([p.e(8592),p.e(3100)]).then(p.bind(p,50998))}();(0,B.k_)(M);const ee=z.resolveWebStyleSymbol(Q,{portal:Q.portal},N,M);return ee.catch(le=>{w.error("#fetchSymbol()","Failed to create symbol from style",le)}),ee})()}};(0,b._)([(0,j.Cb)({json:{write:!1}})],T.prototype,"color",void 0),(0,b._)([(0,j.Cb)({type:String,json:{write:!0}})],T.prototype,"styleName",void 0),(0,b._)([(0,j.Cb)({type:W.Z,json:{write:!1}})],T.prototype,"portal",void 0),(0,b._)([(0,j.Cb)({type:String,json:{read:k.r,write:k.w}})],T.prototype,"styleUrl",void 0),(0,b._)([(0,j.Cb)({type:X.p,json:{read:!1}})],T.prototype,"thumbnail",void 0),(0,b._)([(0,j.Cb)({type:String,json:{write:!0}})],T.prototype,"name",void 0),(0,b._)([(0,D.J)({styleSymbolReference:"web-style"},{readOnly:!0})],T.prototype,"type",void 0),T=V=(0,b._)([(0,I.j)("esri.symbols.WebStyleSymbol")],T);const x=T},21779:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>D});var g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let L=class extends b.wq{constructor(I){super(I),this.visible=!0}clone(){}};(0,g._)([(0,J.Cb)({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],L.prototype,"type",void 0),(0,g._)([(0,J.Cb)({readOnly:!0})],L.prototype,"visible",void 0),L=(0,g._)([(0,$.j)("esri.symbols.callouts.Callout3D")],L);const D=L},17497:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var Z,g=p(17626),b=p(91558),J=p(58817),B=p(62208),j=p(23841),C=p(77712),L=(p(90912),p(55342)),D=p(76898),I=p(21779),W=p(71530),k=p(60958);let X=Z=class extends I.Z{constructor(w){super(w),this.type="line",this.color=new b.Z([0,0,0,1]),this.size=(0,j.Wz)(1),this.border=null}get visible(){return this.size>0&&(0,B.pC)(this.color)&&this.color.a>0}clone(){return new Z({color:(0,J.d9)(this.color),size:this.size,border:(0,J.d9)(this.border)})}};(0,g._)([(0,L.J)({line:"line"},{readOnly:!0})],X.prototype,"type",void 0),(0,g._)([(0,C.Cb)(k.a)],X.prototype,"color",void 0),(0,g._)([(0,C.Cb)(k.y)],X.prototype,"size",void 0),(0,g._)([(0,C.Cb)({type:W.a,json:{write:!0}})],X.prototype,"border",void 0),(0,g._)([(0,C.Cb)({readOnly:!0})],X.prototype,"visible",null),X=Z=(0,g._)([(0,D.j)("esri.symbols.callouts.LineCallout3D")],X);const V=X},9824:(He,ve,p)=>{"use strict";p.d(ve,{Y2:()=>$,gv:()=>B,Uy:()=>J});var g=p(21779),b=p(17497);function J(L){if(!L)return!1;const D=L.verticalOffset;return!!D&&!(D.screenLength<=0||D.maxWorldLength<=0)}function B(L){if(!L||!L.supportsCallout||!L.supportsCallout())return!1;const D=L.callout;return!!D&&!!D.visible&&!!J(L)}const $={types:{key:"type",base:g.Z,typeMap:{line:b.Z}},json:{write:!0}}},80991:(He,ve,p)=>{"use strict";function b(w,T,O,x){return function g(w){return"function"==typeof w}(w)?w(T,O,x):w}function J(w){return[w.r,w.g,w.b,w.a]}function B(w,T,O){const N=ee=>{let le=ee.length;for(;le--;)if(-1===" /-,\n".indexOf(ee.charAt(le)))return!1;return!0},M=[];let Q=0,z=-1;do{if(z=T.indexOf("[",Q),z>=Q){if(z>Q){const ee=T.substr(Q,z-Q);M.push([ee,null,N(ee)])}if(Q=z+1,z=T.indexOf("]",Q),z>=Q){if(z>Q){const ee=w[T.substr(Q,z-Q)];ee&&M.push([null,ee,!1])}Q=z+1}}}while(-1!==z);if(Q<T.length-1){const ee=T.substr(Q);M.push([ee,null,N(ee)])}return ee=>{let le="",oe=null;for(const ce of M){const[re,K,ae]=ce;if(re)ae?oe=re:(oe&&(le+=oe,oe=null),le+=re);else{const se=ee.attributes[K];se&&(oe&&(le+=oe,oe=null),le+=se)}}return j(le,O)}}function j(w,T){switch("string"!=typeof w&&(w=String(w)),T){case"LowerCase":return w.toLowerCase();case"Allcaps":return w.toUpperCase();default:return w}}function C(w,T,O,x,N,M,Q=!0){const z=T/N,ee=O/M,le=Math.ceil(z/2),oe=Math.ceil(ee/2);for(let ce=0;ce<M;ce++)for(let re=0;re<N;re++){const K=4*(re+(Q?M-ce-1:ce)*N);let ae=0,se=0,de=0,ue=0,pe=0,ie=0,te=0;const Ee=(ce+.5)*ee;for(let fe=Math.floor(ce*ee);fe<(ce+1)*ee;fe++){const be=Math.abs(Ee-(fe+.5))/oe,ye=(re+.5)*z,Ke=be*be;for(let Ue=Math.floor(re*z);Ue<(re+1)*z;Ue++){let he=Math.abs(ye-(Ue+.5))/le;const Me=Math.sqrt(Ke+he*he);Me>=-1&&Me<=1&&(ae=2*Me*Me*Me-3*Me*Me+1,ae>0&&(he=4*(Ue+fe*T),te+=ae*w[he+3],de+=ae,w[he+3]<255&&(ae=ae*w[he+3]/250),ue+=ae*w[he],pe+=ae*w[he+1],ie+=ae*w[he+2],se+=ae))}}x[K]=ue/se,x[K+1]=pe/se,x[K+2]=ie/se,x[K+3]=te/de}}function $(w){return w?{r:w[0],g:w[1],b:w[2],a:w[3]/255}:{r:0,g:0,b:0,a:0}}function L(w){var T;return null==(T=w.data)?void 0:T.symbol}function D(w){return"CIMVectorMarker"===w.type||"CIMPictureMarker"===w.type||"CIMBarChartMarker"===w.type||"CIMCharacterMarker"===w.type||"CIMPieChartMarker"===w.type||"CIMStackedBarChartMarker"===w.type}function I(w){return"CIMGradientStroke"===w.type||"CIMPictureStroke"===w.type||"CIMSolidStroke"===w.type}function W(w){return"CIMGradientFill"===w.type||"CIMHatchFill"===w.type||"CIMPictureFill"===w.type||"CIMSolidFill"===w.type||"CIMWaterFill"===w.type}function k(w){return"CIMMarkerPlacementAlongLineRandomSize"===w.type||"CIMMarkerPlacementAlongLineSameSize"===w.type||"CIMMarkerPlacementAlongLineVariableSize"===w.type||"CIMMarkerPlacementAtExtremities"===w.type||"CIMMarkerPlacementAtMeasuredUnits"===w.type||"CIMMarkerPlacementAtRatioPositions"===w.type||"CIMMarkerPlacementOnLine"===w.type||"CIMMarkerPlacementOnVertices"===w.type}p.d(ve,{X3:()=>j,nn:()=>J,Qs:()=>B,hf:()=>b,NO:()=>$,NA:()=>Z,RI:()=>V,k5:()=>W,zL:()=>D,gJ:()=>k,yL:()=>I,Cc:()=>X,TT:()=>C,be:()=>L});const Z=w=>isNaN(w)||!w?0:w,X=w=>{if(!w)return!1;for(const T of w)switch(T.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":return!0}return!1};function V(){return Promise.all([p.e(4918),p.e(8592),p.e(5994)]).then(p.bind(p,32825))}},89441:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>z});var g=p(17626),b=p(91558),J=p(86810),B=p(58817),j=p(23841),C=p(77712),L=(p(90912),p(76898)),D=p(60958);let I=class extends J.wq{constructor(ee){super(ee),this.color=new b.Z([0,0,0,1]),this.extensionLength=0,this.size=(0,j.Wz)(1)}clone(){}cloneProperties(){return{color:(0,B.d9)(this.color),size:this.size,extensionLength:this.extensionLength}}};(0,g._)([(0,C.Cb)({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],I.prototype,"type",void 0),(0,g._)([(0,C.Cb)(D.a)],I.prototype,"color",void 0),(0,g._)([(0,C.Cb)(Sr(_t({},D.y),{json:{write:{overridePolicy:ee=>({enabled:!!ee})}}}))],I.prototype,"extensionLength",void 0),(0,g._)([(0,C.Cb)(D.y)],I.prototype,"size",void 0),I=(0,g._)([(0,L.j)("esri.symbols.edges.Edges3D")],I);const W=I;p(63290),p(85931),p(8314),p(82255);var T,w=p(55342);let O=T=class extends W{constructor(ee){super(ee),this.type="sketch"}clone(){return new T(this.cloneProperties())}};(0,g._)([(0,w.J)({sketch:"sketch"},{readOnly:!0})],O.prototype,"type",void 0),O=T=(0,g._)([(0,L.j)("esri.symbols.edges.SketchEdges3D")],O);const x=O;var N;let M=N=class extends W{constructor(ee){super(ee),this.type="solid"}clone(){return new N(this.cloneProperties())}};(0,g._)([(0,w.J)({solid:"solid"},{readOnly:!0})],M.prototype,"type",void 0),M=N=(0,g._)([(0,L.j)("esri.symbols.support.SolidEdges3D")],M);const z={types:{key:"type",base:W,typeMap:{solid:M,sketch:x}},json:{write:!0}}},38861:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>D});var g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let L=class extends b.wq{constructor(I){super(I)}clone(){}};(0,g._)([(0,J.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],L.prototype,"type",void 0),L=(0,g._)([(0,$.j)("esri.symbols.patterns.LinePattern3D")],L);const D=L},63743:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>X});var W,g=p(17626),b=p(2076),J=p(77712),$=(p(85931),p(8314),p(90912),p(55342)),L=p(76898),D=p(38861);const k=(0,b.w)()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Z=W=class extends D.Z{constructor(V){super(V),this.type="style",this.style="solid"}clone(){return new W({style:this.style})}};(0,g._)([(0,J.Cb)({type:["style"]})],Z.prototype,"type",void 0),(0,g._)([(0,$.J)(k),(0,J.Cb)({type:["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"]})],Z.prototype,"style",void 0),Z=W=(0,g._)([(0,L.j)("esri.symbols.patterns.LineStylePattern3D")],Z);const X=Z},40249:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>D});var g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let L=class extends b.wq{constructor(I){super(I)}clone(){}};(0,g._)([(0,J.Cb)({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],L.prototype,"type",void 0),L=(0,g._)([(0,$.j)("esri.symbols.patterns.Pattern3D")],L);const D=L},153:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(77712),C=(p(85931),p(8314),p(90912),p(76898)),$=p(40249);let I=D=class extends $.Z{constructor(k){super(k),this.type="style",this.style="solid"}clone(){return new D({style:this.style})}};(0,g._)([(0,b.Cb)({type:["style"]})],I.prototype,"type",void 0),(0,g._)([(0,b.Cb)({type:["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"],json:{read:!0,write:!0}})],I.prototype,"style",void 0),I=D=(0,g._)([(0,C.j)("esri.symbols.patterns.StylePattern3D")],I);const W=I},99255:(He,ve,p)=>{"use strict";p.d(ve,{D:()=>C,q:()=>j});var g=p(38861),b=p(63743),J=p(40249),B=p(153);const j={types:{key:"type",base:J.Z,typeMap:{style:B.Z}},json:{write:!0}},C={types:{key:"type",base:g.Z,typeMap:{style:b.Z}},json:{write:!0}}},26540:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>oe});var X,g=p(17626),b=p(2076),J=p(86810),B=p(62208),j=p(77712),D=(p(85931),p(8314),p(90912),p(68653)),I=p(76898),W=p(99433),k=p(15861),Z=p(36630);let V=X=class extends J.wq{collectRequiredFields(ce,re){var K=this;return(0,k.Z)(function*(){return(0,Z.io)(ce,re,K.expression)})()}clone(){return new X({expression:this.expression,title:this.title})}};(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],V.prototype,"expression",void 0),(0,g._)([(0,j.Cb)({type:String,json:{write:!0}})],V.prototype,"title",void 0),V=X=(0,g._)([(0,I.j)("esri.layers.support.FeatureExpressionInfo")],V);const w=V;var T=p(21254);const M=function N(){const ce=Object.keys(T.a);return ce.sort(),ce}();var Q;const z=(0,b.w)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),ee=new b.X({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let le=Q=class extends J.wq{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(ce,re){return null!=ce?ce:re.featureExpression&&0===re.featureExpression.value?{expression:"0"}:void 0}writeFeatureExpressionInfo(ce,re,K,ae){re[K]=ce.write({},ae),"0"===ce.expression&&(re.featureExpression={value:0})}get mode(){const{offset:ce,featureExpressionInfo:re}=this;return this._isOverridden("mode")?this._get("mode"):(0,B.pC)(ce)||re?"relative-to-ground":"on-the-ground"}set mode(ce){this._override("mode",ce)}set unit(ce){this._set("unit",ce)}write(ce,re){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(ce,re):null}clone(){return new Q({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};(0,g._)([(0,j.Cb)({type:w,json:{write:!0}})],le.prototype,"featureExpressionInfo",void 0),(0,g._)([(0,D.r)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],le.prototype,"readFeatureExpressionInfo",null),(0,g._)([(0,W.c)("featureExpressionInfo",{featureExpressionInfo:{type:w},"featureExpression.value":{type:[0]}})],le.prototype,"writeFeatureExpressionInfo",null),(0,g._)([(0,j.Cb)({type:z.apiValues,nonNullable:!0,json:{type:z.jsonValues,read:z.read,write:{writer:z.write,isRequired:!0}}})],le.prototype,"mode",null),(0,g._)([(0,j.Cb)({type:Number,json:{write:!0}})],le.prototype,"offset",void 0),(0,g._)([(0,j.Cb)({type:M,json:{type:String,read:ee.read,write:ee.write}})],le.prototype,"unit",null),le=Q=(0,g._)([(0,I.j)("esri.layers.support.ElevationInfo")],le);const oe=le},33215:(He,ve,p)=>{"use strict";p.d(ve,{b:()=>w,S:()=>T});var X,g=p(17626),b=p(2076),J=p(86810),B=p(21726),j=p(77712),D=(p(85931),p(8314),p(90912),p(55342)),I=p(68653),W=p(76898),k=p(99433),Z=p(29840);const V=(0,b.w)()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let w=X=class extends J.wq{constructor(O){super(O)}readHref(O,x,N){return O?(0,Z.f)(O,N):x.dataURI}writeHref(O,x,N,M){O&&((0,B.HK)(O)?x.dataURI=O:(x.href=(0,Z.t)(O,M),(0,B.YP)(x.href)&&(x.href=(0,B.Fv)(x.href))))}clone(){return new X({href:this.href,primitive:this.primitive})}};(0,g._)([(0,j.Cb)({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],w.prototype,"href",void 0),(0,g._)([(0,I.r)("href")],w.prototype,"readHref",null),(0,g._)([(0,k.c)("href",{href:{type:String},dataURI:{type:String}})],w.prototype,"writeHref",null),(0,g._)([(0,D.J)(V)],w.prototype,"primitive",void 0),w=X=(0,g._)([(0,W.j)("esri.symbols.support.IconSymbol3DLayerResource")],w);const T="circle"},48521:(He,ve,p)=>{"use strict";p.d(ve,{k:()=>Z,S:()=>X});var W,g=p(17626),b=p(2076),J=p(86810),B=p(77712),L=(p(85931),p(8314),p(90912),p(55342)),D=p(76898),I=p(29840);const k=(0,b.w)()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Z=W=class extends J.wq{clone(){return new W({href:this.href,primitive:this.primitive})}};(0,g._)([(0,B.Cb)({type:String,json:{read:I.r,write:I.w}})],Z.prototype,"href",void 0),(0,g._)([(0,L.J)(k)],Z.prototype,"primitive",void 0),Z=W=(0,g._)([(0,D.j)("esri.symbols.support.ObjectSymbol3DLayerResource")],Z);const X="sphere"},77345:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var D,g=p(17626),b=p(14517),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898)),L=p(84687);let I=D=class extends b.Z{constructor(){super(...arguments),this.portal=null}clone(){return new D({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};(0,g._)([(0,J.Cb)({type:String})],I.prototype,"name",void 0),(0,g._)([(0,J.Cb)({type:String})],I.prototype,"styleUrl",void 0),(0,g._)([(0,J.Cb)({type:String})],I.prototype,"styleName",void 0),(0,g._)([(0,J.Cb)({type:L.Z})],I.prototype,"portal",void 0),I=D=(0,g._)([(0,$.j)("esri.symbols.support.StyleOrigin")],I);const W=I},37519:(He,ve,p)=>{"use strict";p.d(ve,{e:()=>D});var L,g=p(17626),b=p(14517),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let D=L=class extends b.Z{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new L({x:this.x,y:this.y})}};(0,g._)([(0,J.Cb)({type:Number})],D.prototype,"x",void 0),(0,g._)([(0,J.Cb)({type:Number})],D.prototype,"y",void 0),D=L=(0,g._)([(0,$.j)("esri.symbols.support.Symbol3DAnchorPosition2D")],D)},64830:(He,ve,p)=>{"use strict";p.d(ve,{b:()=>W});var I,g=p(17626),b=p(86810),J=p(62208),B=p(77712),L=(p(85931),p(8314),p(90912),p(76898)),D=p(60958);let W=I=class extends b.wq{constructor(k){super(k),this.color=null}clone(){const k={color:(0,J.pC)(this.color)?this.color.clone():null};return new I(k)}};(0,g._)([(0,B.Cb)(D.a)],W.prototype,"color",void 0),W=I=(0,g._)([(0,L.j)("esri.symbols.support.Symbol3DMaterial")],W)},97595:(He,ve,p)=>{"use strict";p.d(ve,{_:()=>I});var D,g=p(17626),b=p(86810),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898)),L=p(60958);let I=D=class extends b.wq{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new D({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};(0,g._)([(0,J.Cb)(L.y)],I.prototype,"screenLength",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{write:!0,default:0}})],I.prototype,"minWorldLength",void 0),(0,g._)([(0,J.Cb)({type:Number,json:{write:!0}})],I.prototype,"maxWorldLength",void 0),I=D=(0,g._)([(0,$.j)("esri.symbols.support.Symbol3DVerticalOffset")],I)},96296:(He,ve,p)=>{"use strict";p.d(ve,{p:()=>D});var L,g=p(17626),b=p(14517),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898));let D=L=class extends b.Z{clone(){return new L({url:this.url})}};(0,g._)([(0,J.Cb)({type:String})],D.prototype,"url",void 0),D=L=(0,g._)([(0,$.j)("esri.symbols.support.Thumbnail")],D)},56445:(He,ve,p)=>{"use strict";p.d(ve,{iW:()=>I,kW:()=>J,FW:()=>$,PI:()=>B});var g=p(91558),b=p(80991);function J(T){const O=(0,b.be)(T);if("CIMTextSymbol"===O.type)return O.height;let x=0;if(O.symbolLayers)for(const N of O.symbolLayers)(0,b.zL)(N)&&N.size>x?x=N.size:(0,b.yL)(N)&&N.width>x?x=N.width:(0,b.k5)(N);return x}function B(T,O,x){const N=(0,b.be)(T),M=J(T);0!==M?C(N,O/M,!1,x):function j(T,O){if("CIMTextSymbol"!==T.type){if(T.symbolLayers)for(const x of T.symbolLayers)switch(x.type){case"CIMPictureMarker":case"CIMVectorMarker":x.size=O;break;case"CIMPictureStroke":case"CIMSolidStroke":x.width=O}}else T.height=O}(N,O)}function C(T,O,x,N){if("CIMTextSymbol"!==T.type){if(x&&T.effects)for(const M of T.effects)D(M,O);if(T.symbolLayers)for(const M of T.symbolLayers)switch(M.type){case"CIMPictureMarker":case"CIMVectorMarker":$(M,O,N);break;case"CIMPictureStroke":case"CIMSolidStroke":null!=N&&N.preserveOutlineWidth||!M.width||(M.width*=O);break;case"CIMPictureFill":M.height&&(M.height*=O),M.offsetX&&(M.offsetX*=O),M.offsetY&&(M.offsetY*=O);break;case"CIMHatchFill":C(M.lineSymbol,O,!0,Sr(_t({},N),{preserveOutlineWidth:!1})),M.offsetX&&(M.offsetX*=O),M.offsetY&&(M.offsetY*=O),M.separation&&(M.separation*=O)}}else T.height*=O}function $(T,O,x){if(T.markerPlacement&&function L(T,O){switch((0,b.gJ)(T)&&T.offset&&(T.offset*=O),T.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(T.customEndingOffset&&(T.customEndingOffset*=O),T.offsetAlongLine&&(T.offsetAlongLine*=O),T.placementTemplate&&T.placementTemplate.length){const x=T.placementTemplate.map(N=>N*O);T.placementTemplate=x}break;case"CIMMarkerPlacementAlongLineVariableSize":if(T.maxRandomOffset&&(T.maxRandomOffset*=O),T.placementTemplate&&T.placementTemplate.length){const x=T.placementTemplate.map(N=>N*O);T.placementTemplate=x}break;case"CIMMarkerPlacementOnLine":T.startPointOffset&&(T.startPointOffset*=O);break;case"CIMMarkerPlacementAtExtremities":T.offsetAlongLine&&(T.offsetAlongLine*=O);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":T.beginPosition&&(T.beginPosition*=O),T.endPosition&&(T.endPosition*=O);break;case"CIMMarkerPlacementPolygonCenter":T.offsetX&&(T.offsetX*=O),T.offsetY&&(T.offsetY*=O);break;case"CIMMarkerPlacementInsidePolygon":T.offsetX&&(T.offsetX*=O),T.offsetY&&(T.offsetY*=O),T.stepX&&(T.stepX*=O),T.stepY&&(T.stepY*=O)}}(T.markerPlacement,O),T.offsetX&&(T.offsetX*=O),T.offsetY&&(T.offsetY*=O),T.anchorPoint&&"Absolute"===T.anchorPointUnits&&(T.anchorPoint={x:T.anchorPoint.x*O,y:T.anchorPoint.y*O}),T.size*=O,"CIMVectorMarker"===T.type&&T.markerGraphics)for(const N of T.markerGraphics)T.scaleSymbolsProportionally||C(N.symbol,O,!0,x)}function D(T,O){switch(T.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":T.width&&(T.width*=O);break;case"CIMGeometricEffectBuffer":T.size&&(T.size*=O);break;case"CIMGeometricEffectCut":T.beginCut&&(T.beginCut*=O),T.endCut&&(T.endCut*=O),T.middleCut&&(T.middleCut*=O);break;case"CIMGeometricEffectDashes":if(T.customEndingOffset&&(T.customEndingOffset*=O),T.offsetAlongLine&&(T.offsetAlongLine*=O),T.dashTemplate&&T.dashTemplate.length){const x=T.dashTemplate.map(N=>N*O);T.dashTemplate=x}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":T.length&&(T.length*=O);break;case"CIMGeometricEffectMove":T.offsetX&&(T.offsetX*=O),T.offsetY&&(T.offsetY*=O);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":T.offset&&(T.offset*=O);break;case"CIMGeometricEffectRegularPolygon":T.radius&&(T.radius*=O);break;case"CIMGeometricEffectTaperedPolygon":T.fromWidth&&(T.fromWidth*=O),T.length&&(T.length*=O),T.toWidth&&(T.toWidth*=O);break;case"CIMGeometricEffectWave":T.amplitude&&(T.amplitude*=O),T.period&&(T.period*=O)}}function I(T){const O=[];return W((0,b.be)(T),O),O.length?new g.Z((0,b.NO)(O[0])):null}function W(T,O){let x;x="CIMTextSymbol"===T.type?T.symbol:T;const N="CIMPolygonSymbol"===T.type;if(x.symbolLayers)for(const M of x.symbolLayers)if(!(M.colorLocked||N&&((0,b.yL)(M)||(0,b.zL)(M)&&M.markerPlacement&&(0,b.gJ)(M.markerPlacement))))switch(M.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":M.tintColor&&k(O,M.tintColor);break;case"CIMVectorMarker":M.markerGraphics.forEach(Q=>{W(Q.symbol,O)});break;case"CIMSolidStroke":case"CIMSolidFill":k(O,M.color);break;case"CIMHatchFill":W(M.lineSymbol,O)}}function k(T,O){for(const x of T)if(x.join(".")===O.join("."))return;T.push(O)}},12948:(He,ve,p)=>{"use strict";p.d(ve,{rx:()=>j,l9:()=>B,ix:()=>b});var g=p(91558);const b=new g.Z("white"),B=(new g.Z("black"),new g.Z([255,255,255,0]));function j(C){return 0===C.r&&0===C.g&&0===C.b}},8080:(He,ve,p)=>{"use strict";p.d(ve,{Rz:()=>I,G:()=>k,kD:()=>X,mW:()=>Z}),p(8314);var b=p(88493),J=p(52068),B=p(57213),j=p(35540),C=p(24837);B.Z.fromJSON(C.I4),J.Z.fromJSON(C.ET),b.Z.fromJSON(C.lF);const I=j.Z.fromJSON(C.qP),k=B.Z.fromJSON(C.eG),Z=J.Z.fromJSON(C.wW),X=b.Z.fromJSON(C.lj)},24837:(He,ve,p)=>{"use strict";p.d(ve,{I4:()=>J,lF:()=>j,ET:()=>B,qP:()=>C,eG:()=>$,lj:()=>D,wW:()=>L});const g=[252,146,31,255],J={type:"esriSMS",style:"esriSMSCircle",size:6,color:g,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},B={type:"esriSLS",style:"esriSLSSolid",width:.75,color:g},j={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},C={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},$={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},L={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},D={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},74741:(He,ve,p)=>{"use strict";p.d(ve,{Ne:()=>z,Sp:()=>Q,_M:()=>x,Od:()=>N,mx:()=>M});var g=p(54346),b=p(91558),J=p(84792),B=p(78498),j=p(23841),C=p(56445);const $="picture-fill",L="simple-fill",I="simple-marker",V=new B.Z(1e3);function x(ee){const le=ee.style;let oe=null;if(ee)switch(ee.type){case I:"cross"!==le&&"x"!==le&&(oe=ee.color);break;case L:"solid"===le?oe=ee.color:"none"!==le&&(oe={type:"pattern",x:0,y:0,src:(0,g.V)(`esri/symbols/patterns/${le}.png`),width:5,height:5});break;case $:oe={type:"pattern",src:ee.url,width:(0,j.F2)(ee.width)*ee.xscale,height:(0,j.F2)(ee.height)*ee.yscale,x:(0,j.F2)(ee.xoffset),y:(0,j.F2)(ee.yoffset)};break;case"text":oe=ee.color;break;case"cim":oe=(0,C.iW)(ee)}return oe}function N(ee,le){const oe=ee+"-"+le;return void 0!==V.get(oe)?Promise.resolve(V.get(oe)):(0,J.default)(ee,{responseType:"image"}).then(ce=>{const re=ce.data,K=re.naturalWidth,ae=re.naturalHeight,se=document.createElement("canvas");se.width=K,se.height=ae;const de=se.getContext("2d");de.fillStyle=le,de.fillRect(0,0,K,ae),de.globalCompositeOperation="destination-in",de.drawImage(re,0,0);const ue=se.toDataURL();return V.put(oe,ue),ue})}function M(ee){if(!ee)return null;let le;switch(ee.type){case L:case $:case I:le=M(ee.outline);break;case"simple-line":{const oe=(0,j.F2)(ee.width);"none"!==ee.style&&0!==oe&&(le={color:ee.color,style:Q(ee.style),width:oe,cap:ee.cap,join:"miter"===ee.join?(0,j.F2)(ee.miterLimit):ee.join});break}default:le=null}return le}const Q=function(){const ee={};return function(le){if(ee[le])return ee[le];const oe=le.replace(/-/g,"");return ee[le]=oe,oe}}(),z=new b.Z([128,128,128])},65270:(He,ve,p)=>{"use strict";p.d(ve,{im:()=>N,cW:()=>T,vX:()=>O});var g=p(65787),b=p(26584),J=p(62208),B=p(39368),j=p(12874),C=p(69852),$=p(52068),L=p(40445),D=p(57213),I=p(13546),W=p(88493),k=p(89673),Z=p(35540),X=p(22490);const V={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function T(M,Q,z,ee){const le=x(M,{},{context:ee,isLabelSymbol:!1});(0,J.pC)(le)&&(Q[z]=le)}function O(M,Q,z,ee){const le=x(M,{},{context:ee,isLabelSymbol:!0});(0,J.pC)(le)&&(Q[z]=le)}function x(M,Q,z){if((0,J.Wi)(M))return null;const{context:ee,isLabelSymbol:le}=z;if(ee&&"web-scene"===ee.origin&&!(M instanceof B.Z)&&!(M instanceof j.Z)){const oe=function w(M,Q=V){if(!M)return{symbol:null};const{retainId:z=V.retainId,ignoreDrivers:ee=V.ignoreDrivers,hasLabelingContext:le=V.hasLabelingContext,retainCIM:oe=V.retainCIM}=Q;let ce;if((0,g.dU)(M)||M instanceof j.Z)ce=M.clone();else if("cim"===M.type){var re,K;const ae=null==(re=M.data)||null==(K=re.symbol)?void 0:K.type;if("CIMPointSymbol"!==ae)return{error:new b.Z("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${ae||"unknown"}' is unsupported in 3D`,{symbol:M})};ce=oe?M.clone():C.Z.fromCIMSymbol(M)}else if(M instanceof $.Z)ce=L.Z.fromSimpleLineSymbol(M);else if(M instanceof D.Z)ce=C.Z.fromSimpleMarkerSymbol(M);else if(M instanceof I.Z)ce=C.Z.fromPictureMarkerSymbol(M);else if(M instanceof W.Z)ce=k.Z.fromSimpleFillSymbol(M);else{if(!(M instanceof Z.Z))return{error:new b.Z("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${M.type||M.declaredClass}' is unsupported in 3D`,{symbol:M})};ce=le?X.Z.fromTextSymbol(M):C.Z.fromTextSymbol(M)}if(z&&"cim"!==ce.type&&(ce.id=M.id),ee&&(0,g.dU)(ce))for(let ae=0;ae<ce.symbolLayers.length;++ae)ce.symbolLayers.getItemAt(ae)._ignoreDrivers=!0;return{symbol:ce}}(M,{retainCIM:!0,hasLabelingContext:le});return(0,J.pC)(oe.symbol)?oe.symbol.write(Q,ee):(ee.messages&&ee.messages.push(new b.Z("symbol:unsupported",`Symbols of type '${M.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:M,context:ee,error:oe.error})),null)}return ee&&"web-map"===ee.origin&&"web-style"===M.type?(ee.messages&&ee.messages.push(new b.Z("symbol:unsupported",`Symbols of type '${M.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:M,context:ee})),null):M.write(Q,ee)}function N(M,Q){return(0,g.S9)(M,null,Q)}},67866:(He,ve,p)=>{"use strict";p.d(ve,{J:()=>g,k:()=>b});const g=["begin","end","begin-end"],b=["arrow","circle","square","diamond","cross","x"]},60958:(He,ve,p)=>{"use strict";p.d(ve,{a:()=>$,y:()=>L});var g=p(91558),b=p(23841),J=p(90912),B=p(92236);const $={type:g.Z,json:{type:[J.z8],default:null,read:{source:["color","transparency"],reader:function j(D,I){const W=null!=I.transparency?(0,B.b)(I.transparency):1,k=I.color;return k&&Array.isArray(k)?new g.Z([k[0]||0,k[1]||0,k[2]||0,W]):null}},write:{target:{color:{type:[J.z8]},transparency:{type:J.z8}},writer:function C(D,I){I.color=D.toJSON().slice(0,3);const W=(0,B.a)(D.a);0!==W&&(I.transparency=W)}}}},L={type:Number,cast:b.t_,json:{write:!0}}},71131:(He,ve,p)=>{"use strict";p.d(ve,{b_:()=>b,dc:()=>X,uH:()=>Z,TE:()=>D,Pc:()=>$,EB:()=>L,XX:()=>W,EV:()=>j,DY:()=>I,eb:()=>B,tp:()=>k,ht:()=>C,JZ:()=>J});var b,V,g=p(91558);(V=b||(b={}))[V.size=22]="size",V[V.lineWidth=50]="lineWidth",V[V.maxSize=120]="maxSize",V[V.maxOutlineSize=80]="maxOutlineSize",V[V.tallSymbolWidth=20]="tallSymbolWidth";const J={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function B(V,w,T){const O=b.size;let x=O,N=O;V<1?x*=.75:V>1&&(N*=1.25);let z=O,ee=O;return w&&T&&(x=N=z=ee=0),[{type:"path",path:[{command:"M",values:[z,0]},{command:"L",values:[T?z:.875*z,0]},{command:"L",values:[T?x-.5*z:0,N-.5*ee]},{command:"L",values:[x-.5*z,N-.5*ee]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[z,0]},{command:"L",values:[z,w?0:.125*ee]},{command:"L",values:[x-.5*z,w?N-.5*ee:ee]},{command:"L",values:[x-.5*z,N-.5*ee]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[x-.5*z,N-.5*ee]},{command:"L",values:[T?x-.5*z:0,N-.5*ee]},{command:"L",values:[T?x-.5*z:0,w?N-.5*ee:ee]},{command:"L",values:[x-.5*z,w?N-.5*ee:ee]},{command:"Z",values:[]}]}]}function j(V){const w=b.size,T=.5*V;return[{type:"path",path:[{command:"M",values:[0,.7*w*.5]},{command:"L",values:[.3*w,.7*w]},{command:"L",values:[.3*w,.7*w+T]},{command:"L",values:[0,.7*w+T-.7*w*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*w,.7*w]},{command:"L",values:[.3*w,.7*w+T]},{command:"L",values:[w,T]},{command:"L",values:[w,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*w,0]},{command:"L",values:[w,0]},{command:"L",values:[.3*w,.7*w]},{command:"L",values:[0,.7*w*.5]},{command:"Z",values:[]}]}]}function C(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function $(V,w){let T=w?b.tallSymbolWidth:V;const x=w?4:6;T-=T<=b.size?.5*x:x;const Q=w?.35*T:.5*T;return[{type:"path",path:[{command:"M",values:[.5*T,0]},{command:"L",values:[T,.5*Q]},{command:"L",values:[.5*T,Q]},{command:"L",values:[0,.5*Q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*Q]},{command:"L",values:[.5*T,Q]},{command:"L",values:[.5*T,V]},{command:"L",values:[0,V-.5*Q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*T,Q]},{command:"L",values:[.5*T,V]},{command:"L",values:[T,V-.5*Q]},{command:"L",values:[T,.5*Q]},{command:"Z",values:[]}]}]}function L(V,w){let T=w?b.tallSymbolWidth:V;const x=w?4:6;T-=T<=b.size?.5*x:x;const N=.5*T,M=.15*T,z=V-M;return[{type:"ellipse",cx:.5*T,cy:z,rx:N,ry:M},{type:"path",path:[{command:"M",values:[0,M]},{command:"L",values:[0,z]},{command:"L",values:[T,z]},{command:"L",values:[T,M]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*T,cy:M,rx:N,ry:M}]}function D(V,w){let T=w?b.tallSymbolWidth:V;const x=w?4:6;T-=T<=b.size?.5*x:x;const N=.15*T,M=V-N;return[{type:"ellipse",cx:.5*T,cy:M,rx:.5*T,ry:N},{type:"path",path:[{command:"M",values:[.5*T,0]},{command:"L",values:[T,M]},{command:"L",values:[0,M]},{command:"Z",values:[]}]}]}function I(V){let w=V;w-=w<b.size?3:6;const x=.15*w;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[w,0]},{command:"L",values:[.5*w,V-x]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*w,cy:0,rx:.5*w,ry:x}]}function W(V){let w=V;const T=V;w-=w<b.size?2:4;const M=w,Q=T,z=Math.floor(V/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*M,0]},{command:"L",values:[M,.5*Q-z]},{command:"L",values:[.45*M-z,.5*Q+z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*M,0]},{command:"L",values:[.45*M-z,.5*Q+z]},{command:"L",values:[0,.5*Q-z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*Q-z]},{command:"L",values:[.45*M-z,.5*Q+z]},{command:"L",values:[.45*M,T]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*M,T]},{command:"L",values:[M,.5*Q-z]},{command:"L",values:[.45*M-z,.5*Q+z]},{command:"Z",values:[]}]}]}function k(V){let O=V;return O-=O<b.size?1:2,[{type:"path",path:[{command:"M",values:[.45*V,0]},{command:"L",values:[V,O]},{command:"L",values:[.45*V,.6*O]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*V,0]},{command:"L",values:[.45*V,.6*O]},{command:"L",values:[0,O]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,O]},{command:"L",values:[.45*V,.6*O]},{command:"L",values:[V,O]},{command:"Z",values:[]}]}]}function Z(V,w){return Math.round(Math.min(Math.max(V+255*w*.75,0),255))}function X(V,w){if("type"in V&&("linear"===V.type||"pattern"===V.type))return V;const T=new g.Z(V);return new g.Z([Z(T.r,w),Z(T.g,w),Z(T.b,w),T.a])}},78241:(He,ve,p)=>{"use strict";p.d(ve,{wm:()=>ee,n2:()=>T,KV:()=>O,EJ:()=>M,v9:()=>x});var g=p(15861),b=p(84792),J=p(26584),B=p(10699),j=p(21726),C=p(84687),$=p(6278),L=p(8314);const k={};function X(){return(X=(0,g.Z)(function*(le,oe){try{return{data:(yield M(le,oe)).data,baseUrl:(0,j.Yd)(le),styleUrl:le}}catch(ce){return(0,B.r9)(ce),null}})).apply(this,arguments)}function T(le,oe,ce){return le.styleUrl?function Z(le,oe){return X.apply(this,arguments)}(le.styleUrl,ce):le.styleName?function V(le,oe,ce){const re=oe&&oe.portal||C.Z.getDefault();let K;const ae=`${re.url} - ${re.user&&re.user.username} - ${le}`;return k[ae]||(k[ae]=function w(le,oe,ce){return oe.load(ce).then(()=>{const re=new $.Z({disableExtraQuery:!0,query:`owner:${Q} AND type:${z} AND typekeywords:"${le}"`});return oe.queryItems(re,ce)}).then(({results:re})=>{let K=null;const ae=le.toLowerCase();if(re&&Array.isArray(re))for(const se of re)if(se.typeKeywords.some(de=>de.toLowerCase()===ae)&&se.type===z&&se.owner===Q){K=se;break}if(!K)throw new J.Z("symbolstyleutils:style-not-found",`The style '${le}' could not be found`,{styleName:le});return K.load(ce)})}(le,re,ce).then(se=>(K=se,se.fetchData())).then(se=>({data:se,baseUrl:K.itemUrl,styleName:le}))),k[ae]}(le.styleName,oe,ce):Promise.reject(new J.Z("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function O(le){return null===le||"CIMSymbolReference"===le.type?le:{type:"CIMSymbolReference",symbol:le}}function x(le,oe){if("cimRef"===oe)return le.cimRef;if(le.formatInfos&&!(0,L.Z)("enable-feature:force-wosr"))for(const ce of le.formatInfos)if("gltf"===ce.type)return ce.href;return le.webRef}function M(le,oe){const ce=_t({responseType:"json",query:{f:"json"}},oe);return(0,b.default)((0,j.Fv)(le),ce)}const Q="esri_en",z="Style",ee="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"},43652:(He,ve,p)=>{"use strict";p.d(ve,{Hc:()=>D,w2:()=>W,Uz:()=>L,$K:()=>B,KW:()=>I}),p(8314);var b=p(28093),J=p(5548);function B(k,{isPrimitive:Z,width:X,depth:V,height:w}){const T=Z?10:1;if(null==X&&null==w&&null==V)return[T*k[0],T*k[1],T*k[2]];const O=(0,b.f)(X,V,w);let x;for(let N=0;N<3;N++){const M=O[N];if(null!=M){x=M/k[N];break}}for(let N=0;N<3;N++)null==O[N]&&(O[N]=k[N]*x);return O}const j=(0,J.al)(-.5,-.5,-.5,.5,.5,.5),C=(0,J.al)(-.5,-.5,0,.5,.5,1),$=(0,J.al)(-.5,-.5,0,.5,.5,.5);function L(k){switch(k){case"sphere":case"cube":case"diamond":return j;case"cylinder":case"cone":case"inverted-cone":return C;case"tetrahedron":return $;default:return}}const D=["butt","square","round"],I=[...D,"none"],W=["miter","bevel","round"]},50369:(He,ve,p)=>{"use strict";p.d(ve,{uC:()=>J,hR:()=>B,Xw:()=>j,x0:()=>I,OJ:()=>W,Ck:()=>C,Nj:()=>k});var g=p(21286),b=p(90912);const J=["none","underline","line-through"],B=["normal","italic","oblique"],j=["normal","lighter","bold","bolder"],C={type:Number,cast:Z=>{const X=(0,b.q9)(Z);return 0===X?1:(0,g.uZ)(X,.1,4)},nonNullable:!0},I={type:["left","right","center","justify"],nonNullable:!0},W={type:["left","right","center"],nonNullable:!0},k={type:["baseline","top","middle","bottom"],nonNullable:!0}},69738:(He,ve,p)=>{"use strict";p.d(ve,{Ds:()=>$,KA:()=>C});var g=p(21726),b=p(29840);function B(D,I){return function L(D){return D&&("service"===D.origin||"portal-item"===D.origin)&&D.layer&&("feature"===D.layer.type||"stream"===D.layer.type)}(I)&&!(0,g.YP)(D)&&I.layer.parsedUrl?(0,g.v_)(I.layer.parsedUrl.path,"images",D):(0,b.f)(D,I)}const C={json:{read:{source:["imageData","url"],reader:function J(D,I,W){return I.imageData?(0,g._l)({mediaType:I.contentType||"image/png",isBase64:!0,data:I.imageData}):B(I.url,W)}},write:{writer(D,I,W,k){!function j(D,I,W,k){if((0,g.HK)(D)){const Z=(0,g.sJ)(D);I.contentType=Z.mediaType,I.imageData=Z.data,W&&W.imageData===I.imageData&&W.url&&(0,b.w)(W.url,I,"url",k)}else(0,b.w)(D,I,"url",k)}(D,I,this.source,k)}}}},$={readOnly:!0,json:{read:{source:["imageData","url"],reader(D,I,W){const k={};return I.imageData&&(k.imageData=I.imageData),I.contentType&&(k.contentType=I.contentType),I.url&&(k.url=B(I.url,W)),k}}}}},86606:(He,ve,p)=>{"use strict";p.d(ve,{tb:()=>Q,BR:()=>ye,e3:()=>fe,wJ:()=>Ke,nf:()=>w,YW:()=>V});var g=p(15861),b=p(91558),J=p(65787),B=p(59213),j=p(8314),C=p(62208),$=p(28093),L=p(71149),I=(p(74741),p(64830));const W=/\/resource\/(.*?)\.svg$/,k=new b.Z("white");function V(Ue){if((0,C.Wi)(Ue)||!("symbolLayers"in Ue)||(0,C.Wi)(Ue.symbolLayers))return!1;switch(Ue.type){case"point-3d":return Ue.symbolLayers.some(he=>"object"===he.type);case"line-3d":return Ue.symbolLayers.some(he=>"path"===he.type);case"polygon-3d":return Ue.symbolLayers.some(he=>"object"===he.type||"extrude"===he.type);default:return!1}}function w(Ue,he){const Me=he.resource.href;return!(0,j.Z)("esri-canvas-svg-support")&&Ue.styleOrigin&&W.test(Me)?Me.replace(W,"/resource/png/$1.png"):Me}function x(Ue,he){if(null==he)return Ue;const Me=Ue.toRgba();return Me[3]=Me[3]*he,new b.Z(Me)}function Q(Ue,he,Me){Ue&&(he||null!=Me)&&(he&&(he=new b.Z(he)),(0,J.dU)(Ue)?function N(Ue,he,Me){const Le=Ue.symbolLayers;if(!Le)return;const Je=Oe=>{const xe=(0,C.pC)(Oe)?Oe:null;return x(he=he||xe||null!=Me&&k,Me)};Le.forEach(Oe=>{if("object"!==Oe.type||null==Oe.resource.href||he)if("water"===Oe.type)Oe.color=Je(Oe.color);else{const xe=(0,C.pC)(Oe.material)?Oe.material.color:null,Be=Je(xe);(0,C.Wi)(Oe.material)?Oe.material=new I.b({color:Be}):Oe.material.color=Be,null!=Me&&"outline"in Oe&&(0,C.pC)(Oe.outline)&&(0,C.pC)(Oe.outline.color)&&(Oe.outline.color=x(Oe.outline.color,Me))}})}(Ue,he,Me):(0,J.cT)(Ue)&&function M(Ue,he,Me){(he=he||Ue.color)&&(Ue.color=x(he,Me)),null!=Me&&"outline"in Ue&&Ue.outline&&Ue.outline.color&&(Ue.outline.color=x(Ue.outline.color,Me))}(Ue,he,Me))}function z(Ue,he){return ee.apply(this,arguments)}function ee(){return ee=(0,g.Z)(function*(Ue,he){const Me=Ue.symbolLayers;Me&&(yield(0,B.Ed)(Me,function(){var Le=(0,g.Z)(function*(Je){return le(Je,he)});return function(Je){return Le.apply(this,arguments)}}()))}),ee.apply(this,arguments)}function le(Ue,he){return oe.apply(this,arguments)}function oe(){return(oe=(0,g.Z)(function*(Ue,he){switch(Ue.type){case"extrude":K(Ue,he);break;case"icon":case"line":case"text":ce(Ue,he);break;case"path":de(Ue,he);break;case"object":yield ae(Ue,he)}})).apply(this,arguments)}function ce(Ue,he){const Me=re(he);(0,C.pC)(Me)&&(Ue.size=Me)}function re(Ue){for(const he of Ue)if("number"==typeof he)return he;return null}function K(Ue,he){Ue.size="number"==typeof he[2]?he[2]:0}function ae(Ue,he){return se.apply(this,arguments)}function se(){return(se=(0,g.Z)(function*(Ue,he){const{resourceSize:Me,symbolSize:Le}=yield pe(Ue),Je=ue(he,Me,Le);Ue.width=te(he[0],Le[0],Me[0],Je),Ue.depth=te(he[1],Le[1],Me[1],Je),Ue.height=te(he[2],Le[2],Me[2],Je)})).apply(this,arguments)}function de(Ue,he){const Me=ue(he,$.O,[Ue.width,void 0,Ue.height]);Ue.width=te(he[0],Ue.width,1,Me),Ue.height=te(he[2],Ue.height,1,Me)}function ue(Ue,he,Me){for(let Le=0;Le<3;Le++){const Je=Ue[Le];switch(Je){case"symbol-value":return null!=Me[Le]?Me[Le]/he[Le]:1;case"proportional":break;default:if(Je&&he[Le])return Je/he[Le]}}return 1}function pe(Ue){return ie.apply(this,arguments)}function ie(){return(ie=(0,g.Z)(function*(Ue){const he=yield p.e(1831).then(p.bind(p,91831)),Me=yield he.computeObjectLayerResourceSize(Ue,10),{width:Le,height:Je,depth:Oe}=Ue,xe=[Le,Oe,Je];let Be=1;for(let Y=0;Y<3;Y++)if(null!=xe[Y]){Be=xe[Y]/Me[Y];break}for(let Y=0;Y<3;Y++)null==xe[Y]&&(xe[Y]=Me[Y]*Be);return{resourceSize:Me,symbolSize:xe}})).apply(this,arguments)}function te(Ue,he,Me,Le){switch(Ue){case"proportional":return Me*Le;case"symbol-value":return null!=he?he:Me;default:return Ue}}function Ee(Ue,he){const Me=re(he);if(!(0,C.Wi)(Me))switch(Ue.type){case"simple-marker":Ue.size=Me;break;case"picture-marker":{const Le=Ue.width/Ue.height;Le>1?(Ue.width=Me,Ue.height=Me*Le):(Ue.width=Me*Le,Ue.height=Me);break}case"simple-line":Ue.width=Me;break;case"text":Ue.font.size=Me}}function fe(Ue,he){return be.apply(this,arguments)}function be(){return(be=(0,g.Z)(function*(Ue,he){if(Ue&&he)return(0,J.dU)(Ue)?z(Ue,he):void((0,J.cT)(Ue)&&Ee(Ue,he))})).apply(this,arguments)}function ye(Ue,he,Me){if(Ue&&null!=he)if((0,J.dU)(Ue)){const Le=Ue.symbolLayers;Le&&Le.forEach(Je=>{if(Je&&"object"===Je.type)switch(Me){case"tilt":Je.tilt=he;break;case"roll":Je.roll=he;break;default:Je.heading=he}})}else(0,J.cT)(Ue)&&("simple-marker"!==Ue.type&&"picture-marker"!==Ue.type&&"text"!==Ue.type||(Ue.angle=he))}function Ke(Ue){if(!Ue)return null;const he=Ue.effects.filter(Me=>"bloom"!==Me.type).map(Me=>Me.toJSON());return(0,L.rM)(he)}},4728:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>Qt});var g=p(15861),b=p(17626),J=p(26584),B=p(8314),j=p(62208),C=p(10699),$=p(77712),I=(p(85931),p(90912),p(76898)),W=p(15283),k=p(2618),Z=p(85531),X=p(67736);function w(){return(w=(0,g.Z)(function*(gt,ut,Ze){const ot=(0,k.en)(gt);return(0,Z.X)(ot,X.Z.from(ut),_t({},Ze)).then(Pe=>(0,Z.O)(Pe.data.attachmentGroups,ot.path))})).apply(this,arguments)}var T=p(90463),x=(p(29132),p(20477)),N=p(84952),M=p(2004);function z(){return(z=(0,g.Z)(function*(gt,ut,Ze){const ot=(0,k.en)(gt);return(0,x.executeQueryForExtent)(ot,N.Z.from(ut),_t({},Ze)).then(Pe=>({count:Pe.data.count,extent:M.Z.fromJSON(Pe.data.extent)}))})).apply(this,arguments)}var ee=p(24865),le=p(2865),oe=p(94573),ce=p(33696),re=p(82054);function K(gt,ut){return ut}function ae(gt,ut,Ze,ot){switch(Ze){case 0:return pe(gt,ut+ot,0);case 1:return"lowerLeft"===gt.originPosition?pe(gt,ut+ot,1):function ie({translate:gt,scale:ut},Ze,ot){return gt[ot]-Ze*ut[ot]}(gt,ut+ot,1)}}function se(gt,ut,Ze,ot){return 2===Ze?pe(gt,ut,2):ae(gt,ut,Ze,ot)}function de(gt,ut,Ze,ot){return 2===Ze?pe(gt,ut,3):ae(gt,ut,Ze,ot)}function ue(gt,ut,Ze,ot){return 3===Ze?pe(gt,ut,3):se(gt,ut,Ze,ot)}function pe({translate:gt,scale:ut},Ze,ot){return gt[ot]+Ze*ut[ot]}class te{constructor(ut){this.options=ut,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=K,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this._attributesConstructor=function(){}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(ut){if(this.options.applyTransform&&(ut.transform=null),this._attributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,!ut.hasZ)return;const Ze=(0,ce.k)(ut.geometryType,this.options.sourceSpatialReference,ut.spatialReference);if(!(0,j.Wi)(Ze))for(const ot of ut.features)Ze(ot.geometry)}createSpatialReference(){return{}}addField(ut,Ze){ut.fields.push(Ze);const ot=ut.fields.map(Pe=>Pe.name);this._attributesConstructor=function(){for(const Pe of ot)this[Pe]=null}}addFeature(ut,Ze){ut.features.push(Ze)}prepareFeatures(ut){switch(this.transform=ut.transform,this.options.applyTransform&&ut.transform&&(this.applyTransform=this._deriveApplyTransform(ut)),this.vertexDimension=2,ut.hasZ&&this.vertexDimension++,ut.hasM&&this.vertexDimension++,ut.geometryType){case"esriGeometryPoint":this.addCoordinate=(Ze,ot,Pe)=>this.addCoordinatePoint(Ze,ot,Pe),this.createGeometry=Ze=>this.createPointGeometry(Ze);break;case"esriGeometryPolygon":this.addCoordinate=(Ze,ot,Pe)=>this._addCoordinatePolygon(Ze,ot,Pe),this.createGeometry=Ze=>this._createPolygonGeometry(Ze);break;case"esriGeometryPolyline":this.addCoordinate=(Ze,ot,Pe)=>this._addCoordinatePolyline(Ze,ot,Pe),this.createGeometry=Ze=>this._createPolylineGeometry(Ze);break;case"esriGeometryMultipoint":this.addCoordinate=(Ze,ot,Pe)=>this._addCoordinateMultipoint(Ze,ot,Pe),this.createGeometry=Ze=>this._createMultipointGeometry(Ze);break;default:(0,oe.Bg)(ut.geometryType)}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(ut,Ze,ot){0===this.lengths.length&&(this.toAddInCurrentPath=Ze),this.lengths.push(Ze)}addQueryGeometry(ut,Ze){const{queryGeometry:ot,queryGeometryType:Pe}=Ze,Ge=(0,re.$g)(ot.clone(),ot,!1,!1,this.transform),vt=(0,re.di)(Ge,Pe,!1,!1);ut.queryGeometryType=Pe,ut.queryGeometry=_t({},vt)}createPointGeometry(ut){const Ze={x:0,y:0,spatialReference:ut.spatialReference};return ut.hasZ&&(Ze.z=0),ut.hasM&&(Ze.m=0),Ze}addCoordinatePoint(ut,Ze,ot){switch(Ze=this.applyTransform(this.transform,Ze,ot,0),ot){case 0:ut.x=Ze;break;case 1:ut.y=Ze;break;case 2:"z"in ut?ut.z=Ze:ut.m=Ze;break;case 3:ut.m=Ze}}_transformPathLikeValue(ut,Ze){let ot=0;return Ze<=1&&(ot=this.previousCoordinate[Ze],this.previousCoordinate[Ze]+=ut),this.applyTransform(this.transform,ut,Ze,ot)}_addCoordinatePolyline(ut,Ze,ot){this._dehydratedAddPointsCoordinate(ut.paths,Ze,ot)}_addCoordinatePolygon(ut,Ze,ot){this._dehydratedAddPointsCoordinate(ut.rings,Ze,ot)}_addCoordinateMultipoint(ut,Ze,ot){0===ot&&ut.points.push([]);const Pe=this._transformPathLikeValue(Ze,ot);ut.points[ut.points.length-1].push(Pe)}_createPolygonGeometry(ut){return{rings:[[]],spatialReference:ut.spatialReference,hasZ:!!ut.hasZ,hasM:!!ut.hasM}}_createPolylineGeometry(ut){return{paths:[[]],spatialReference:ut.spatialReference,hasZ:!!ut.hasZ,hasM:!!ut.hasM}}_createMultipointGeometry(ut){return{points:[],spatialReference:ut.spatialReference,hasZ:!!ut.hasZ,hasM:!!ut.hasM}}_dehydratedAddPointsCoordinate(ut,Ze,ot){0===ot&&0==this.toAddInCurrentPath--&&(ut.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const Pe=this._transformPathLikeValue(Ze,ot),Ge=ut[ut.length-1];0===ot&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),Ge.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=Pe}_deriveApplyTransform(ut){const{hasZ:Ze,hasM:ot}=ut;return Ze&&ot?ue:Ze?se:ot?de:ae}}var Ee=p(17253);function Ke(){return(Ke=(0,g.Z)(function*(gt,ut,Ze){const ot=(0,k.en)(gt),Pe=_t({},Ze),Ge=N.Z.from(ut),vt=!Ge.quantizationParameters,{data:zt}=yield(0,x.executeQueryPBF)(ot,Ge,new te({sourceSpatialReference:Ge.sourceSpatialReference,applyTransform:vt}),Pe);return zt})).apply(this,arguments)}var Ue=p(84792),he=p(76391);function Me(gt,ut){const Ze=gt.toJSON();return Ze.objectIds&&(Ze.objectIds=Ze.objectIds.join(",")),Ze.orderByFields&&(Ze.orderByFields=Ze.orderByFields.join(",")),!Ze.outFields||null!=ut&&ut.returnCountOnly?delete Ze.outFields:Ze.outFields=-1!==Ze.outFields.indexOf("*")?"*":Ze.outFields.join(","),Ze.outSpatialReference&&(Ze.outSR=Ze.outSR.wkid||JSON.stringify(Ze.outSR.toJSON()),delete Ze.outSpatialReference),Ze.dynamicDataSource&&(Ze.layer=JSON.stringify({source:Ze.dynamicDataSource}),delete Ze.dynamicDataSource),Ze}function Le(gt,ut,Ze){return Je.apply(this,arguments)}function Je(){return(Je=(0,g.Z)(function*(gt,ut,Ze){const ot=yield Be(gt,ut,Ze),Pe=ot.data,Ge=Pe.geometryType,vt=Pe.spatialReference,zt={};for(const Yt of Pe.relatedRecordGroups){const et={fields:void 0,objectIdFieldName:void 0,geometryType:Ge,spatialReference:vt,hasZ:!!Pe.hasZ,hasM:!!Pe.hasM,features:Yt.relatedRecords};if(null!=Yt.objectId)zt[Yt.objectId]=et;else for(const Rt in Yt)Yt.hasOwnProperty(Rt)&&"relatedRecords"!==Rt&&(zt[Yt[Rt]]=et)}return Sr(_t({},ot),{data:zt})})).apply(this,arguments)}function Oe(gt,ut,Ze){return xe.apply(this,arguments)}function xe(){return(xe=(0,g.Z)(function*(gt,ut,Ze){const ot=yield Be(gt,ut,Ze,{returnCountOnly:!0}),Pe=ot.data,Ge={};for(const vt of Pe.relatedRecordGroups)null!=vt.objectId&&(Ge[vt.objectId]=vt.count);return Sr(_t({},ot),{data:Ge})})).apply(this,arguments)}function Be(gt,ut){return Y.apply(this,arguments)}function Y(){return(Y=(0,g.Z)(function*(gt,ut,Ze={},ot){const Pe=(0,he.A)(_t(_t(Sr(_t({},gt.query),{f:"json"}),ot),Me(ut,ot)));return(0,Ue.default)(gt.path+"/queryRelatedRecords",Sr(_t({},Ze),{query:_t(_t({},Ze.query),Pe)}))})).apply(this,arguments)}var me=p(67010);function $e(){return($e=(0,g.Z)(function*(gt,ut,Ze){return ut=me.Z.from(ut),Le((0,k.en)(gt),ut,Ze).then(Pe=>{const Ge=Pe.data,vt={};return Object.keys(Ge).forEach(zt=>vt[zt]=Ee.default.fromJSON(Ge[zt])),vt})})).apply(this,arguments)}function Qe(){return(Qe=(0,g.Z)(function*(gt,ut,Ze){return ut=me.Z.from(ut),Oe((0,k.en)(gt),ut,_t({},Ze)).then(Pe=>Pe.data)})).apply(this,arguments)}var Xe=p(21726),qe=p(91179),ke=p(13924),dt=p(61515);const We="Layer does not support extent calculation.";function ht(gt,ut,Ze,ot){return mt.apply(this,arguments)}function mt(){return(mt=(0,g.Z)(function*(gt,ut,Ze,ot){const Pe=yield er(gt,ut,"json",ot);return(0,dt.p)(ut,Ze,Pe.data),Pe})).apply(this,arguments)}function Kt(gt,ut,Ze){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,g.Z)(function*(gt,ut,Ze){return(0,j.pC)(ut.timeExtent)&&ut.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):er(gt,ut,"json",Ze,{returnIdsOnly:!0})})).apply(this,arguments)}function $t(gt,ut,Ze){return qt.apply(this,arguments)}function qt(){return(qt=(0,g.Z)(function*(gt,ut,Ze){return(0,j.pC)(ut.timeExtent)&&ut.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):er(gt,ut,"json",Ze,{returnExtentOnly:!0,returnCountOnly:!0}).then(ot=>{const Pe=ot.data;if(Pe.hasOwnProperty("extent"))return ot;if(Pe.features)throw new Error(We);if(Pe.hasOwnProperty("count"))throw new Error(We);return ot})})).apply(this,arguments)}function gr(gt,ut,Ze){return(0,j.pC)(ut.timeExtent)&&ut.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):er(gt,ut,"json",Ze,{returnIdsOnly:!0,returnCountOnly:!0})}function er(gt,ut,Ze,ot={},Pe={}){const Ge="string"==typeof gt?(0,Xe.mN)(gt):gt,vt=ut.geometry?[ut.geometry]:[];return ot.responseType="pbf"===Ze?"array-buffer":"json",(0,ke.aX)(vt,null,ot).then(zt=>{const Yt=zt&&zt[0];(0,j.pC)(Yt)&&((ut=ut.clone()).geometry=Yt);const et=(0,he.A)(_t(_t(Sr(_t({},Ge.query),{f:Ze}),Pe),function nt(gt,ut){var Ze,ot;const Pe=gt.geometry,Ge=gt.toJSON(),vt=Ge;if((0,j.pC)(Pe)&&(vt.geometry=JSON.stringify(Pe),vt.geometryType=(0,qe.Ji)(Pe),vt.inSR=Pe.spatialReference.wkid||JSON.stringify(Pe.spatialReference)),null!=(Ze=Ge.topFilter)&&Ze.groupByFields&&(vt.topFilter.groupByFields=Ge.topFilter.groupByFields.join(",")),null!=(ot=Ge.topFilter)&&ot.orderByFields&&(vt.topFilter.orderByFields=Ge.topFilter.orderByFields.join(",")),Ge.topFilter&&(vt.topFilter=JSON.stringify(vt.topFilter)),Ge.objectIds&&(vt.objectIds=Ge.objectIds.join(",")),Ge.orderByFields&&(vt.orderByFields=Ge.orderByFields.join(",")),Ge.outFields&&!(null!=ut&&ut.returnCountOnly||null!=ut&&ut.returnExtentOnly||null!=ut&&ut.returnIdsOnly)?vt.outFields=-1!==Ge.outFields.indexOf("*")?"*":Ge.outFields.join(","):delete vt.outFields,Ge.outSR?vt.outSR=Ge.outSR.wkid||JSON.stringify(Ge.outSR):Pe&&Ge.returnGeometry&&(vt.outSR=vt.inSR),Ge.returnGeometry&&delete Ge.returnGeometry,Ge.timeExtent){const zt=Ge.timeExtent,{start:Yt,end:et}=zt;null==Yt&&null==et||(vt.time=Yt===et?Yt:`${null==Yt?"null":Yt},${null==et?"null":et}`),delete Ge.timeExtent}return vt}(ut,Pe)));return(0,Ue.default)((0,Xe.v_)(Ge.path,"queryTopFeatures"),Sr(_t({},ot),{query:_t(_t({},et),ot.query)}))})}var vr=p(6871);function hr(){return(hr=(0,g.Z)(function*(gt,ut,Ze,ot){const Pe=(0,k.en)(gt),Ge=_t({},ot),{data:vt}=yield ht(Pe,vr.Z.from(ut),Ze,Ge);return Ee.default.fromJSON(vt)})).apply(this,arguments)}function ft(){return(ft=(0,g.Z)(function*(gt,ut,Ze){const ot=(0,k.en)(gt);return(yield Kt(ot,vr.Z.from(ut),_t({},Ze))).data.objectIds})).apply(this,arguments)}function Lt(){return(Lt=(0,g.Z)(function*(gt,ut,Ze){const ot=(0,k.en)(gt),Pe=yield $t(ot,vr.Z.from(ut),_t({},Ze));return{count:Pe.data.count,extent:M.Z.fromJSON(Pe.data.extent)}})).apply(this,arguments)}function Dt(){return(Dt=(0,g.Z)(function*(gt,ut,Ze){const ot=(0,k.en)(gt);return(yield gr(ot,vr.Z.from(ut),_t({},Ze))).data.count})).apply(this,arguments)}var Vt=p(79308);let Gt=class extends Vt.Z{constructor(gt){super(gt),this.dynamicDataSource=null,this.fieldsIndex=null,this.format="json",this.gdbVersion=null,this.infoFor3D=null,this.sourceSpatialReference=null}execute(gt,ut){return this.executeJSON(gt,ut).then(Ze=>this.featureSetFromJSON(gt,Ze,ut))}executeJSON(gt,ut){var Ze=this;return(0,g.Z)(function*(){var ot;const Pe=_t(_t({},Ze.requestOptions),ut),Ge=Ze._normalizeQuery(gt),vt=null!=(null==(ot=gt.outStatistics)?void 0:ot[0]),zt=(0,B.Z)("featurelayer-pbf-statistics"),Yt=!vt||zt;let et;if("pbf"===Ze.format&&Yt)try{et=yield function ye(gt,ut,Ze){return Ke.apply(this,arguments)}(Ze.url,Ge,Pe)}catch(Rt){if("query:parsing-pbf"!==Rt.name)throw Rt;Ze.format="json"}return"json"!==Ze.format&&Yt||(et=yield(0,le.F)(Ze.url,Ge,Pe)),Ze._normalizeFields(et.fields),et})()}featureSetFromJSON(gt,ut,Ze){var ot=this;return(0,g.Z)(function*(){if(!(ot._queryIs3DObjectFormat(gt)&&(0,j.pC)(ot.infoFor3D)&&ut.features&&ut.features.length))return Ee.default.fromJSON(ut);const{meshFeatureSetFromJSON:Pe}=yield(0,C.Hl)(Promise.all([p.e(479),p.e(853),p.e(8592),p.e(5678)]).then(p.bind(p,25678)),Ze);return Pe(gt,ot.infoFor3D,ut)})()}executeForCount(gt,ut){const Ze=_t(_t({},this.requestOptions),ut),ot=this._normalizeQuery(gt);return(0,T.P)(this.url,ot,Ze)}executeForExtent(gt,ut){const Ze=_t(_t({},this.requestOptions),ut),ot=this._normalizeQuery(gt);return function Q(gt,ut,Ze){return z.apply(this,arguments)}(this.url,ot,Ze)}executeForIds(gt,ut){const Ze=_t(_t({},this.requestOptions),ut),ot=this._normalizeQuery(gt);return(0,ee.G)(this.url,ot,Ze)}executeRelationshipQuery(gt,ut){gt=me.Z.from(gt);const Ze=_t(_t({},this.requestOptions),ut);return(this.gdbVersion||this.dynamicDataSource)&&((gt=gt.clone()).gdbVersion=gt.gdbVersion||this.gdbVersion,gt.dynamicDataSource=gt.dynamicDataSource||this.dynamicDataSource),function Ie(gt,ut,Ze){return $e.apply(this,arguments)}(this.url,gt,Ze)}executeRelationshipQueryForCount(gt,ut){gt=me.Z.from(gt);const Ze=_t(_t({},this.requestOptions),ut);return(this.gdbVersion||this.dynamicDataSource)&&((gt=gt.clone()).gdbVersion=gt.gdbVersion||this.gdbVersion,gt.dynamicDataSource=gt.dynamicDataSource||this.dynamicDataSource),function rt(gt,ut,Ze){return Qe.apply(this,arguments)}(this.url,gt,Ze)}executeAttachmentQuery(gt,ut){const Ze=_t(_t({},this.requestOptions),ut);return function V(gt,ut,Ze){return w.apply(this,arguments)}(this.url,gt,Ze)}executeTopFeaturesQuery(gt,ut){const Ze=_t(_t({},this.requestOptions),ut);return function pr(gt,ut,Ze,ot){return hr.apply(this,arguments)}(this.parsedUrl,gt,this.sourceSpatialReference,Ze)}executeForTopIds(gt,ut){const Ze=_t(_t({},this.requestOptions),ut);return function st(gt,ut,Ze){return ft.apply(this,arguments)}(this.parsedUrl,gt,Ze)}executeForTopExtents(gt,ut){const Ze=_t(_t({},this.requestOptions),ut);return function St(gt,ut,Ze){return Lt.apply(this,arguments)}(this.parsedUrl,gt,Ze)}executeForTopCount(gt,ut){const Ze=_t(_t({},this.requestOptions),ut);return function Ft(gt,ut,Ze){return Dt.apply(this,arguments)}(this.parsedUrl,gt,Ze)}_normalizeQuery(gt){let ut=N.Z.from(gt);if(ut.sourceSpatialReference=ut.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(ut=ut===gt?ut.clone():ut,ut.gdbVersion=gt.gdbVersion||this.gdbVersion,ut.dynamicDataSource=gt.dynamicDataSource?W.n.from(gt.dynamicDataSource):this.dynamicDataSource),(0,j.pC)(this.infoFor3D)&&this._queryIs3DObjectFormat(gt)){ut=ut===gt?ut.clone():ut,ut.formatOf3DObjects=null;for(const Ze of this.infoFor3D.queryFormats){if("3D_glb"===Ze.id){ut.formatOf3DObjects=Ze.id;break}"3D_gltf"!==Ze.id||ut.formatOf3DObjects||(ut.formatOf3DObjects=Ze.id)}if(!ut.formatOf3DObjects)throw new J.Z("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if((0,j.Wi)(ut.outFields)||!ut.outFields.includes("*")){ut=ut===gt?ut.clone():ut,(0,j.Wi)(ut.outFields)&&(ut.outFields=[]);const{originX:Ze,originY:ot,originZ:Pe,translationX:Ge,translationY:vt,translationZ:zt,scaleX:Yt,scaleY:et,scaleZ:Rt,rotationX:Ut,rotationY:Jt,rotationZ:nr,rotationDeg:Tr}=this.infoFor3D.transformFieldRoles;ut.outFields.push(Ze,ot,Pe,Ge,vt,zt,Yt,et,Rt,Ut,Jt,nr,Tr)}}return ut}_normalizeFields(gt){if((0,j.pC)(this.fieldsIndex)&&(0,j.pC)(gt))for(const ut of gt){const Ze=this.fieldsIndex.get(ut.name);Ze&&Object.assign(ut,Ze.toJSON())}}_queryIs3DObjectFormat(gt){return(0,j.pC)(this.infoFor3D)&&gt.returnGeometry&&"xyFootprint"!==gt.multipatchOption&&!gt.outStatistics}};(0,b._)([(0,$.Cb)({type:W.n})],Gt.prototype,"dynamicDataSource",void 0),(0,b._)([(0,$.Cb)()],Gt.prototype,"fieldsIndex",void 0),(0,b._)([(0,$.Cb)()],Gt.prototype,"format",void 0),(0,b._)([(0,$.Cb)()],Gt.prototype,"gdbVersion",void 0),(0,b._)([(0,$.Cb)()],Gt.prototype,"infoFor3D",void 0),(0,b._)([(0,$.Cb)()],Gt.prototype,"sourceSpatialReference",void 0),Gt=(0,b._)([(0,I.j)("esri.tasks.QueryTask")],Gt);const Qt=Gt},79308:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var g=p(17626),b=p(14517),J=p(21726),B=p(77712),L=(p(85931),p(8314),p(90912),p(76898));let D=class extends b.Z{constructor(...W){super(...W),this.requestOptions=null,this.url=null}normalizeCtorArgs(W,k){return"string"!=typeof W?W:_t({url:W},k)}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(W){return W?(0,J.mN)(W):null}_encode(W,k,Z){const X={};for(const V in W){if("declaredClass"===V)continue;const w=W[V];if(null!=w&&"function"!=typeof w)if(Array.isArray(w)){X[V]=[];for(let T=0;T<w.length;T++)X[V][T]=this._encode(w[T])}else if("object"==typeof w)if(w.toJSON){const T=w.toJSON(Z&&Z[V]);X[V]=k?T:JSON.stringify(T)}else X[V]=k?w:JSON.stringify(w);else X[V]=w}return X}};(0,g._)([(0,B.Cb)({readOnly:!0})],D.prototype,"parsedUrl",null),(0,g._)([(0,B.Cb)()],D.prototype,"requestOptions",void 0),(0,g._)([(0,B.Cb)({type:String})],D.prototype,"url",void 0),D=(0,g._)([(0,L.j)("esri.tasks.Task")],D);const I=D},81340:(He,ve,p)=>{"use strict";p.d(ve,{n:()=>C});var g=p(35575),b=p(2004),J=p(65401),B=p(89621),j=p(58098);class C{constructor(L,D){this.key=new j.Z(0,0,0,0),this.bounds=(0,J.Ue)(),this.objectIds=new Set,this.key.set(D);const I=L.getLODInfoAt(this.key);this.tileInfoView=L,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=I.resolution,this.scale=I.scale,this.level=I.level}get id(){return this.key.id}get extent(){return b.Z.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const L=this.key.getChildKeys(),D=g.Z.acquire();for(let I=0;I<L.length;I++)D[I]=new C(this.tileInfoView,L[I]);return D}getQuantizationParameters(){return B.Z.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}},56656:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>I});var g=p(61885),b=p(8314),J=p(76279),B=p(81340),j=p(84378),C=p(58098);const $={added:[],removed:[]},L=new Set,D=new C.Z(0,0,0,0);class I extends g.Z{constructor(k){super(),this._tiles=new Map,this._index=(0,J.r)(9,(0,b.Z)("esri-csp-restrictions")?Z=>({minX:Z.bounds[0],minY:Z.bounds[1],maxX:Z.bounds[2],maxY:Z.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=k}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(k){return this._tiles.has(k)}get(k){return this._tiles.get(k)}boundsIntersections(k){return this._index.search({minX:k[0],minY:k[1],maxX:k[2],maxY:k[3]})}updateTiles(k){const Z={added:[],removed:[]};for(const X of k.added)if(!this.has(X)){const V=new B.n(this.tileScheme,X);this._tiles.set(X,V),this._index.insert(V),Z.added.push(V)}for(const X of k.removed)if(this.has(X)){const V=this.get(X);this._tiles.delete(X),this._index.remove(V),Z.removed.push(V)}this.tiles.length=0,this._tiles.forEach(X=>this.tiles.push(X)),(Z.added.length||Z.removed.length)&&this.emit("update",Z)}setViewState(k){const Z=this.tileScheme.getTileCoverage(k,0);if(!Z)return;const{spans:X,lodInfo:V}=Z,{level:w}=V;if(X.length>0)for(const{row:T,colFrom:O,colTo:x}of X)for(let N=O;N<=x;N++){const M=D.set(w,T,V.normalizeCol(N),V.getWorldForColumn(N)).id;if(L.add(M),!this.has(M)){const Q=new B.n(this.tileScheme,M);this._tiles.set(M,Q),this._index.insert(Q),this.tiles.push(Q),$.added.push(Q)}}for(let T=this.tiles.length-1;T>=0;T--){const O=this.tiles[T];L.has(O.id)||(this._tiles.delete(O.id),this.tiles.splice(T,1),this._index.remove(O),$.removed.push(O))}($.added.length||$.removed.length)&&this.emit("update",$),j.Z.pool.release(Z),L.clear(),$.added.length=0,$.removed.length=0}}},33412:(He,ve,p)=>{"use strict";p.d(ve,{T:()=>b});class b{constructor(){this._names=new Map}begin(B){this._names.has(B)||(this._names.set(B,!1),-1!==B.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${B}.Start`))}end(B){this._names.has(B)&&!this._names.get(B)&&(this._names.set(B,!0),performance.mark(`Esri.${B}.End`))}record(B){this._names.has(B)||(this._names.set(B,!0),performance.mark(`Esri.${B}`))}}},17083:(He,ve,p)=>{"use strict";var g=p(17626),b=p(14517),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898)),L=p(67831),D=p(71251);const W=new Set,k=[],Z=new Map,X=[0,0];let V=class extends b.Z{constructor(T){super(T),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:T,process:O}=this;this._queue=new D.e({concurrency:T,process:(x,N)=>{const M=this._keyToItem.get(x);return O(M,{signal:N})},peeker:x=>x.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(T){this._queue.abort("string"==typeof T?T:T.id)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(T){return this._keyToItem.has("string"==typeof T?T:T.id)}isOngoing(T){const O="string"==typeof T?T:T.id;return this.has(O)&&this._queue.isOngoing(O)}pause(){this._queue.pause()}push(T,O){const x=T.key.id+"-"+O;if(this.has(x))return this.get(x);const N=this._queue.push(x),M=()=>{this._keyToItem.delete(x),this.notifyChange("updating")};return this._keyToItem.set(x,T),N.then(M,M),this.notifyChange("updating"),N}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(T){if(!this.state)return T.values().next().value;const O=this.tileInfoView;let x=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY;T.forEach(oe=>{const ce=this._keyToItem.get(oe),re=this.tileInfoView.getTileScale(ce.key);Z.has(re)||(Z.set(re,[]),x=Math.max(re,x),N=Math.min(re,N)),Z.get(re).push(ce.key),W.add(re)});let M=this.state.scale;Z.has(M)||(function I(T,O){T.length=0,O.forEach(x=>T.push(x))}(k,W),k.sort((oe,ce)=>oe-ce),M=k.reduce((oe,ce)=>Math.abs(ce-M)<Math.abs(oe-M)?ce:oe,k[0])),M=Math.min(M,x),M=Math.max(M,N);const Q=Z.get(M),z=O.getClosestInfoForScale(M),ee=z.getColumnForX(this.state.center[0]),le=z.getRowForY(this.state.center[1]);return Q.sort((oe,ce)=>{const re=z.denormalizeCol(oe.col,oe.world),K=z.denormalizeCol(ce.col,ce.world);return Math.sqrt((ee-re)*(ee-re)+(le-oe.row)*(le-oe.row))-Math.sqrt((ee-K)*(ee-K)+(le-ce.row)*(le-ce.row))}),W.clear(),Z.clear(),Q[0].id}_peekByCenterFirst(T){if(!this.state)return T.values().next().value;const O=this.tileInfoView,x=this.state.center;let N=Number.POSITIVE_INFINITY,M=null;return T.forEach(Q=>{const z=this._keyToItem.get(Q);O.getTileCoords(X,z.key);const ee=(0,L.b)(X,x);ee<N&&(N=ee,M=z.key)}),M.id}};(0,g._)([(0,J.Cb)({constructOnly:!0})],V.prototype,"concurrency",void 0),(0,g._)([(0,J.Cb)({constructOnly:!0})],V.prototype,"process",void 0),(0,g._)([(0,J.Cb)()],V.prototype,"state",void 0),(0,g._)([(0,J.Cb)({constructOnly:!0})],V.prototype,"strategy",void 0),(0,g._)([(0,J.Cb)({constructOnly:!0})],V.prototype,"tileInfoView",void 0),(0,g._)([(0,J.Cb)({readOnly:!0})],V.prototype,"updating",null),V=(0,g._)([(0,$.j)("esri.views.2d.tiling.PagedTileQueue")],V)},84378:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>b});var g=p(27899);class b{constructor(){this.spans=[]}acquire(B){this.lodInfo=B}release(){this.lodInfo=null,this.spans.length=0}forEach(B,j){const{spans:C,lodInfo:$}=this,{level:L}=$;if(0!==C.length)for(const{row:D,colFrom:I,colTo:W}of C)for(let k=I;k<=W;k++)B.call(j,L,D,$.normalizeCol(k),$.getWorldForColumn(k))}}b.pool=new g.Z(b)},9598:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>V});var g=p(37053),b=p(62208),J=p(58098);function B(w,T){return[w,T]}function j(w,T,O){return w[0]=T,w[1]=O,w}const $=new J.Z("0/0/0/0");class L{constructor(T,O,x,N,M,Q,z,ee,le,oe,ce,re){this.level=T,this.resolution=O,this.scale=x,this.origin=N,this.first=M,this.last=Q,this.size=z,this.norm=ee,this.worldStart=le,this.worldEnd=oe,this.worldSize=ce,this.wrap=re}static create(T,O,x=null){const N=(0,g.C5)(T.spatialReference),M=O.origin||B(T.origin.x,T.origin.y),Q=B(T.size[0]*O.resolution,T.size[1]*O.resolution),z=B(-1/0,-1/0),ee=B(1/0,1/0),le=B(1/0,1/0);(0,b.pC)(x)&&(j(z,Math.max(0,Math.floor((x.xmin-M[0])/Q[0])),Math.max(0,Math.floor((M[1]-x.ymax)/Q[1]))),j(ee,Math.max(0,Math.floor((x.xmax-M[0])/Q[0])),Math.max(0,Math.floor((M[1]-x.ymin)/Q[1]))),j(le,ee[0]-z[0]+1,ee[1]-z[1]+1));const{cols:oe,rows:ce}=O;let re,K,ae,se;return!x&&oe&&ce&&(j(z,oe[0],ce[0]),j(ee,oe[1],ce[1]),j(le,oe[1]-oe[0]+1,ce[1]-ce[0]+1)),T.isWrappable?(re=B(Math.ceil(Math.round((N.valid[1]-N.valid[0])/O.resolution)/T.size[0]),le[1]),K=B(Math.floor((N.origin[0]-M[0])/Q[0]),z[1]),ae=B(re[0]+K[0]-1,ee[1]),se=!0):(K=z,ae=ee,re=le,se=!1),new L(O.level,O.resolution,O.scale,M,z,ee,le,Q,K,ae,re,se)}normalizeCol(T){if(!this.wrap)return T;const O=this.worldSize[0];return T<0?O-1-Math.abs((T+1)%O):T%O}denormalizeCol(T,O){return this.wrap?this.worldSize[0]*O+T:T}getWorldForColumn(T){return this.wrap?Math.floor(T/this.worldSize[0]):0}getFirstColumnForWorld(T){return T*this.worldSize[0]+this.first[0]}getLastColumnForWorld(T){return T*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(T){return(T-this.origin[0])/this.norm[0]}getXForColumn(T){return this.origin[0]+T*this.norm[0]}getRowForY(T){return(this.origin[1]-T)/this.norm[1]}getYForRow(T){return this.origin[1]-T*this.norm[1]}getTileBounds(T,O,x=!1){$.set(O);const N=x?$.col:this.denormalizeCol($.col,$.world),M=$.row;return function C(w,T,O,x,N){w[0]=T,w[1]=O,w[2]=x,w[3]=N}(T,this.getXForColumn(N),this.getYForRow(M+1),this.getXForColumn(N+1),this.getYForRow(M)),T}getTileCoords(T,O,x=!1){$.set(O);const N=x?$.col:this.denormalizeCol($.col,$.world);return Array.isArray(T)?j(T,this.getXForColumn(N),this.getYForRow($.row)):(T.x=this.getXForColumn(N),T.y=this.getYForRow($.row)),T}}var D=p(84378);class I{constructor(T,O,x){this.row=T,this.colFrom=O,this.colTo=x}}const W=new J.Z("0/0/0/0");class k{constructor(T,O,x,N,M,Q,z,ee){this.x=T,this.ymin=O,this.ymax=x,this.invM=N,this.leftAdjust=M,this.rightAdjust=Q,this.leftBound=z,this.rightBound=ee}static create(T,O){T[1]>O[1]&&([T,O]=[O,T]);const[x,N]=T,[M,Q]=O,z=M-x,ee=Q-N,le=0!==ee?z/ee:0,oe=(Math.ceil(N)-N)*le,ce=(Math.floor(N)-N)*le;return new k(x,Math.floor(N),Math.ceil(Q),le,z<0?oe:ce,z<0?ce:oe,z<0?M:x,z<0?x:M)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const Z=[[0,0],[0,0],[0,0],[0,0]];class V{constructor(T,O=null){this.tileInfo=T,this.fullExtent=O,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const x=T.lods.slice();x.sort(function(M,Q){return Q.scale-M.scale});const N=this._lodInfos=x.map(M=>L.create(T,M,O));x.forEach((M,Q)=>{this._infoByLevel[M.level]=N[Q],this._infoByScale[M.scale]=N[Q],this.scales[Q]=M.scale},this),this._wrap=T.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(T){return this._infoByLevel["number"==typeof T?T:T.level]}getTileBounds(T,O,x=!1){W.set(O);const N=this._infoByLevel[W.level];return N?N.getTileBounds(T,W,x):T}getTileCoords(T,O,x=!1){W.set(O);const N=this._infoByLevel[W.level];return N?N.getTileCoords(T,W,x):T}getTileCoverage(T,O=192,x="closest"){const N="closest"===x?this.getClosestInfoForScale(T.scale):this.getSmallestInfoForScale(T.scale),M=D.Z.pool.acquire(N),Q=this._wrap;let z,ee,le,oe=1/0,ce=-1/0;const re=M.spans;Z[0][0]=Z[0][1]=Z[1][1]=Z[3][0]=-O,Z[1][0]=Z[2][0]=T.size[0]+O,Z[2][1]=Z[3][1]=T.size[1]+O;for(const de of Z)T.toMap(de,de),de[0]=N.getColumnForX(de[0]),de[1]=N.getRowForY(de[1]);const K=[];let ae=3;for(let de=0;de<4;de++){if(Z[de][1]===Z[ae][1]){ae=de;continue}const ue=k.create(Z[de],Z[ae]);oe=Math.min(ue.ymin,oe),ce=Math.max(ue.ymax,ce),void 0===K[ue.ymin]&&(K[ue.ymin]=[]),K[ue.ymin].push(ue),ae=de}if(null==oe||null==ce||ce-oe>100)return null;let se=[];for(z=oe;z<ce;){null!=K[z]&&(se=se.concat(K[z])),ee=1/0,le=-1/0;for(let de=se.length-1;de>=0;de--){const ue=se[de];ee=Math.min(ee,ue.getLeftCol()),le=Math.max(le,ue.getRightCol())}if(ee=Math.floor(ee),le=Math.floor(le),z>=N.first[1]&&z<=N.last[1])if(Q)if(N.size[0]<N.worldSize[0]){const de=Math.floor(le/N.worldSize[0]);for(let ue=Math.floor(ee/N.worldSize[0]);ue<=de;ue++)re.push(new I(z,Math.max(N.getFirstColumnForWorld(ue),ee),Math.min(N.getLastColumnForWorld(ue),le)))}else re.push(new I(z,ee,le));else ee>N.last[0]||le<N.first[0]||(ee=Math.max(ee,N.first[0]),le=Math.min(le,N.last[0]),re.push(new I(z,ee,le)));z+=1;for(let de=se.length-1;de>=0;de--){const ue=se[de];ue.ymax>=z?ue.incrRow():se.splice(de,1)}}return M}getTileParentId(T){W.set(T);const x=this._lodInfos.indexOf(this._infoByLevel[W.level])-1;return x<0?null:(this._getTileIdAtLOD(W,this._lodInfos[x],W),W.id)}getTileResolution(T){const O=this._infoByLevel["object"==typeof T?T.level:T];return O?O.resolution:-1}getTileScale(T){const O=this._infoByLevel[T.level];return O?O.scale:-1}intersects(T,O){W.set(O);const x=this._infoByLevel[W.level],N=T.lodInfo;if(N.resolution>x.resolution){this._getTileIdAtLOD(W,N,W);const Q=N.denormalizeCol(W.col,W.world);for(const z of T.spans)if(z.row===W.row&&z.colFrom<=Q&&z.colTo>=Q)return!0}if(N.resolution<x.resolution){const[Q,z,ee,le]=T.spans.reduce((se,de)=>(se[0]=Math.min(se[0],de.row),se[1]=Math.max(se[1],de.row),se[2]=Math.min(se[2],de.colFrom),se[3]=Math.max(se[3],de.colTo),se),[1/0,-1/0,1/0,-1/0]),oe=x.denormalizeCol(W.col,W.world),ce=N.getColumnForX(x.getXForColumn(oe)),re=N.getRowForY(x.getYForRow(W.row)),K=N.getColumnForX(x.getXForColumn(oe+1))-1,ae=N.getRowForY(x.getYForRow(W.row+1))-1;return!(ce>le||K<ee||re>z||ae<Q)}const M=N.denormalizeCol(W.col,W.world);return T.spans.some(Q=>Q.row===W.row&&Q.colFrom<=M&&Q.colTo>=M)}normalizeBounds(T,O,x){if(T[0]=O[0],T[1]=O[1],T[2]=O[2],T[3]=O[3],this._wrap){const N=(0,g.C5)(this.tileInfo.spatialReference),M=-x*(N.valid[1]-N.valid[0]);T[0]+=M,T[2]+=M}return T}getSmallestInfoForScale(T){const O=this.scales;if(this._infoByScale[T])return this._infoByScale[T];if(T>O[0])return this._infoByScale[O[0]];for(let x=1;x<O.length-1;x++)if(T>O[x]+1e-6)return this._infoByScale[O[x-1]];return this._infoByScale[O[O.length-1]]}getClosestInfoForScale(T){const O=this.scales;return this._infoByScale[T]||(T=O.reduce((x,N)=>Math.abs(N-T)<Math.abs(x-T)?N:x,O[0])),this._infoByScale[T]}scaleToLevel(T){const O=this.scales;if(this._infoByScale[T])return this._infoByScale[T].level;for(let x=O.length-1;x>=0;x--)if(T<O[x])return x===O.length-1?this._infoByScale[O[O.length-1]].level:this._infoByScale[O[x]].level+(O[x]-T)/(O[x]-O[x+1]);return this._infoByScale[O[0]].level}scaleToZoom(T){return this.tileInfo.scaleToZoom(T)}_getTileIdAtLOD(T,O,x){const N=this._infoByLevel[x.level];return T.set(x),O.resolution<N.resolution?null:(O.resolution===N.resolution||(T.level=O.level,T.col=Math.floor(x.col*N.resolution/O.resolution+.01),T.row=Math.floor(x.row*N.resolution/O.resolution+.01)),T)}}},58098:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>b});var g=p(27899);class b{constructor(B,j,C,$){this.set(B,j,C,$)}static getId(B,j,C,$){return"object"==typeof B?`${B.level}/${B.row}/${B.col}/${B.world}`:`${B}/${j}/${C}/${$}`}get key(){return this}get id(){return this.toString()}set id(B){this.set(B)}get hash(){return(3&this.world)<<30|(4095&this.col)<<22|(4095&this.row)<<8|63&this.level}acquire(B,j,C,$){this.set(B,j,C,$)}contains(B){const j=B.level-this.level;return this.row===B.row>>j&&this.col===B.col>>j&&this.world===B.world}equals(B){return this.level===B.level&&this.row===B.row&&this.col===B.col&&this.world===B.world}clone(){return new b(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(B,j,C,$){if(null==B)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof B)this.level=B.level||0,this.row=B.row||0,this.col=B.col||0,this.world=B.world||0;else if("string"==typeof B){const[L,D,I,W]=B.split("/");this.level=parseFloat(L),this.row=parseFloat(D),this.col=parseFloat(I),this.world=parseFloat(W)}else this.level=+B,this.row=+j,this.col=+C,this.world=+$||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new b(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const B=this.level+1,j=this.row<<1,C=this.col<<1,$=this.world;return[new b(B,j,C,$),new b(B,j,C+1,$),new b(B,j+1,C,$),new b(B,j+1,C+1,$)]}compareRowMajor(B){return this.row<B.row?-1:this.row>B.row?1:this.col<B.col?-1:this.col>B.col?1:0}}b.pool=new g.Z(b,null,null,25,50)},8480:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>w});var g=p(17626),b=p(14517),J=p(77712),$=(p(85931),p(8314),p(90912),p(76898)),L=p(67831),D=p(71251);const W=new Set,k=[],Z=new Map,X=[0,0];let V=class extends b.Z{constructor(T){super(T),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:T,process:O,strategy:x}=this;this._queue=new D.e({concurrency:T,process:(N,M)=>{const Q=this._keyToItem.get(N);return O(Q,{signal:M})},peeker:"scale-first"===x?N=>this._peekByScaleFirst(N):N=>this._peekByCenterFirst(N)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(T){this._queue.abort("string"==typeof T?T:T.id)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(T){return this._keyToItem.has("string"==typeof T?T:T.id)}isOngoing(T){const O="string"==typeof T?T:T.id;return this.has(O)&&this._queue.isOngoing(O)}pause(){this._queue.pause()}push(T){const O=T.key.id;if(this._queue.has(O))return this._queue.get(O);const x=this._queue.push(O),N=()=>{this._keyToItem.delete(O),this.notifyChange("updating")};return this._keyToItem.set(O,T),x.then(N,N),this.notifyChange("updating"),x}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(T){if(!this.state)return T.values().next().value;const O=this.tileInfoView;let x=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY;T.forEach(oe=>{const ce=this._keyToItem.get(oe),re=this.tileInfoView.getTileScale(ce.key);Z.has(re)||(Z.set(re,[]),x=Math.max(re,x),N=Math.min(re,N)),Z.get(re).push(ce.key),W.add(re)});let M=this.state.scale;Z.has(M)||(function I(T,O){T.length=0,O.forEach(x=>T.push(x))}(k,W),k.sort((oe,ce)=>oe-ce),M=k.reduce((oe,ce)=>Math.abs(ce-M)<Math.abs(oe-M)?ce:oe,k[0])),M=Math.min(M,x),M=Math.max(M,N);const Q=Z.get(M),z=O.getClosestInfoForScale(M),ee=z.getColumnForX(this.state.center[0]),le=z.getRowForY(this.state.center[1]);return Q.sort((oe,ce)=>{const re=z.denormalizeCol(oe.col,oe.world),K=z.denormalizeCol(ce.col,ce.world);return Math.sqrt((ee-re)*(ee-re)+(le-oe.row)*(le-oe.row))-Math.sqrt((ee-K)*(ee-K)+(le-ce.row)*(le-ce.row))}),W.clear(),Z.clear(),Q[0].id}_peekByCenterFirst(T){if(!this.state)return T.values().next().value;const O=this.tileInfoView,x=this.state.center;let N=Number.POSITIVE_INFINITY,M=null;return T.forEach(Q=>{const z=this._keyToItem.get(Q);O.getTileCoords(X,z.key);const ee=(0,L.b)(X,x);ee<N&&(N=ee,M=z.key)}),M.id}};(0,g._)([(0,J.Cb)({constructOnly:!0})],V.prototype,"concurrency",void 0),(0,g._)([(0,J.Cb)({constructOnly:!0})],V.prototype,"process",void 0),(0,g._)([(0,J.Cb)()],V.prototype,"state",void 0),(0,g._)([(0,J.Cb)({constructOnly:!0})],V.prototype,"strategy",void 0),(0,g._)([(0,J.Cb)({constructOnly:!0})],V.prototype,"tileInfoView",void 0),(0,g._)([(0,J.Cb)({readOnly:!0})],V.prototype,"updating",null),V=(0,g._)([(0,$.j)("esri.views.2d.tiling.TileQueue")],V);const w=V},79527:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>W});var g=p(65401),b=p(67831);class J{constructor(Z,X,V){this.maxSize=Z,this.tileInfoView=X,this.removedFunc=V,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(Z){return this._tilePerId.has(Z)}get(Z){return this._tilePerId.get(Z)}pop(Z){const X=this._tilePerId.get(Z);if(!X)return null;const w=this._tileKeysPerLevel[X.key.level];B(this._tilePerId,Z);for(let T=0;T<w.length;T++)if(w[T].id===Z){w.splice(T,1);break}return X.visible=!0,X}add(Z){Z.visible=!1;const X=Z.key,V=X.id;if(this._tilePerId.has(V))return;this._tilePerId.set(V,Z);const w=X.level;this._tileKeysPerLevel[w]||(this._tileKeysPerLevel[w]=[]),this._tileKeysPerLevel[w].push(X)}prune(Z,X,V){let w=this._tilePerId.size;if(w<=this.maxSize)return;let T=this._tileKeysPerLevel.length-1;for(;w>this.maxSize&&T>=0;)T!==Z&&(w=this._pruneAroundCenterTile(w,X,V,T)),T--;w>this.maxSize&&(w=this._pruneAroundCenterTile(w,X,V,Z))}_pruneAroundCenterTile(Z,X,V,w){const T=this._tileKeysPerLevel[w];if(!T||0===T.length)return Z;const{size:O,origin:x}=this.tileInfoView.tileInfo,N=V*O[0],M=V*O[1],Q=[0,0],z=[0,0];for(T.sort((ee,le)=>(Q[0]=x.x+N*(ee.col+.5),Q[1]=x.y-M*(ee.row+.5),z[0]=x.x+N*(le.col+.5),z[1]=x.y-M*(le.row+.5),(0,b.a)(Q,X)-(0,b.a)(z,X)));T.length>0;){const ee=T.pop();if(this._removeTile(ee.id),--Z===this.maxSize)break}return Z}_removeTile(Z){const X=this._tilePerId.get(Z);this.removedFunc&&this.removedFunc(X),B(this._tilePerId,Z)}}function B(k,Z){k.delete(Z)}var j=p(84378);const $=new(p(58098).Z)(0,0,0,0),L=new Map,D=[],I=[];class W{constructor(Z){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=Z.acquireTile,this.releaseTile=Z.releaseTile,this.tileInfoView=Z.tileInfoView,this.resampling=null==Z.resampling||!!Z.resampling,Z.cachePolicy&&(this.cachePolicy=Z.cachePolicy),Z.coveragePolicy&&(this.coveragePolicy=Z.coveragePolicy),null!=Z.buffer&&(this.buffer=Z.buffer),Z.cacheSize&&(this._tileCache=new J(Z.cacheSize,this.tileInfoView,X=>{this.releaseTile(X)}))}destroy(){this.tileIndex.clear()}update(Z){const{resampling:X,tileIndex:V}=this,w=this.tileInfoView.getTileCoverage(Z.state,this.buffer,this.coveragePolicy);if(I.length=0,D.length=0,L.clear(),!w)return;const{minScale:T,maxScale:O}=this.tileInfoView.tileInfo,{spans:x,lodInfo:N}=w,{level:M}=N,{scale:Q,center:z,resolution:ee}=Z.state,le=!Z.stationary&&Q>this._previousScale;if(this._previousScale=Q,this.tiles.length=0,!X&&(Q>T||Q<O))return this.tiles.length=0,L.clear(),V.forEach(K=>{this.releaseTile(K)}),V.clear(),I.length=0,D.length=0,L.clear(),j.Z.pool.release(w),!0;V.forEach(K=>K.visible=!0);let oe=0,ce=0;if(x.length>0)for(const{row:K,colFrom:ae,colTo:se}of x)for(let de=ae;de<=se;de++){oe++;const ue=$.set(M,K,N.normalizeCol(de),N.getWorldForColumn(de)).id;if(V.has(ue)){const pe=V.get(ue);pe.isReady?(L.set(ue,pe),ce++):le||this._addParentTile(ue,L)}else{let pe;if(this._tileCache&&this._tileCache.has(ue)){if(pe=this._tileCache.pop(ue),this.tileIndex.set(ue,pe),pe.isReady){L.set(ue,pe),ce++;continue}}else pe=this.acquireTile($),this.tileIndex.set(ue,pe);le||this._addParentTile(ue,L)}}const re=ce===oe;V.forEach((K,ae)=>{if($.set(ae),L.has(ae))return;const se=this.tileInfoView.intersects(w,$),de="purge"===this.cachePolicy?$.level!==M:$.level>M;!se||!le&&re?!de&&se||D.push(ae):K.isReady?de&&"purge"===this.cachePolicy&&this._hasReadyAncestor($,M)?D.push(ae):I.push(ae):de&&D.push(ae)});for(const K of I){const ae=V.get(K);ae&&ae.isReady&&L.set(K,ae)}for(const K of D){const ae=V.get(K);this._tileCache?this._tileCache.add(ae):this.releaseTile(ae),V.delete(K)}return L.forEach(K=>this.tiles.push(K)),V.forEach(K=>{L.has(K.key.id)||(K.visible=!1)}),this._tileCache&&this._tileCache.prune(M,z,ee),j.Z.pool.release(w),L.clear(),re}clear(Z=!0){const{tileIndex:X}=this;Z&&X.forEach(V=>{this.releaseTile(V)}),X.clear()}updateCacheSize(Z){this._tileCache&&(this._tileCache.maxSize=Z)}_addParentTile(Z,X){let V=Z,w=null;for(;V=this.tileInfoView.getTileParentId(V),V;)if(this.tileIndex.has(V)){if(w=this.tileIndex.get(V),w&&w.isReady){X.has(w.key.id)||X.set(w.key.id,w);break}}else if(this._tileCache&&this._tileCache.has(V)&&(w=this._tileCache.pop(V),this.tileIndex.set(V,w),w&&w.isReady)){X.has(w.key.id)||X.set(w.key.id,w);break}}_hasReadyAncestor(Z,X){const V=(0,g.Ue)();this.tileInfoView.getTileBounds(V,Z,!0);for(const w of this.tileIndex.values())if(w.isReady&&w.key.level>=X&&w.key.level<Z.level){const T=(0,g.Ue)();if(this.tileInfoView.getTileBounds(T,w.key,!0),(0,g.r3)(T,V))return!0}return!1}}},78041:(He,ve,p)=>{"use strict";function g(j,C,$,L){const D=3*j,I=3*($-j)-D,W=1-D-I,k=3*C,Z=3*(L-C)-k,X=1-k-Z;function V(x){return((W*x+I)*x+D)*x}function T(x){return(3*W*x+2*I)*x+D}return function(x,N=1e-6){return function w(x){return((X*x+Z)*x+k)*x}(function O(x,N){let M,Q,z,ee,le,oe;for(z=x,oe=0;oe<8;oe++){if(ee=V(z)-x,Math.abs(ee)<N)return z;if(le=T(z),Math.abs(le)<1e-6)break;z-=ee/le}if(M=0,Q=1,z=x,z<M)return M;if(z>Q)return Q;for(;M<Q;){if(ee=V(z),Math.abs(ee-x)<N)return z;x>ee?M=z:Q=z,z=.5*(Q-M)+M}return z}(x,N))}}p.d(ve,{LI:()=>J,Qc:()=>B,n_:()=>g});const b=/^cubic-bezier\((.*)\)/,J={};function B(j){let C=J[j]||null;if(!C){const $=b.exec(j);if($){const L=$[1].split(",").map(D=>parseFloat(D.trim()));4!==L.length||L.some(D=>isNaN(D))||(C=g.apply(g,L))}}return C}J.ease=g(.25,.1,.25,1),J.linear=g(0,0,1,1),J.easeIn=J["ease-in"]=g(.42,0,1,1),J.easeOut=J["ease-out"]=g(0,0,.58,1),J.easeInOut=J["ease-in-out"]=g(.42,0,.58,1)},24926:(He,ve,p)=>{"use strict";p.d(ve,{H4:()=>xe,dI:()=>Oe,o2:()=>Be,JG:()=>ae,Ue:()=>re,EK:()=>z,ni:()=>se,bk:()=>de,Rb:()=>Ue,Dq:()=>ie,uG:()=>Ee,Ck:()=>he,Jp:()=>Me,L2:()=>Je,ut:()=>Le,gG:()=>Xe,SI:()=>Y,$H:()=>me,YQ:()=>Ie,UZ:()=>Qe,Hy:()=>rt,qf:()=>ue,Rx:()=>dt});var g=p(15861),b=p(76687),J=p(48701),B=p(62208),j=p(16730),C=p(39863),$=p(31478),L=p(46342),D=p(67831),I=p(99770),W=p(2004),k=p(21674),Z=p(49672),X=p(54614),V=p(65234),w=p(37053);const x=180/Math.PI;function N(We){return We.wkid?We:We.spatialReference||V.Z.WGS84}function M(We,nt){return nt.type?(0,D.s)(We,nt.x,nt.y):(0,D.c)(We,nt)}function Q(We){return(0,j.c9)(We)}function z(We,nt){return Math.max(We.width/nt[0],We.height/nt[1])*function ye(We){return(0,w.JY)(We)?39.37*Q(We)*96:1}(We.spatialReference)}function ee(We,nt,ht,mt){return le.apply(this,arguments)}function le(){return(le=(0,g.Z)(function*(We,nt,ht,mt){let Kt,Bt;if(!We||Array.isArray(We)&&!We.length)return null;if(J.Z.isCollection(We)&&(We=We.toArray()),Array.isArray(We)&&We.length&&"object"==typeof We[0]){const qt=We.every(vr=>"attributes"in vr),gr=We.some(vr=>!vr.geometry);let er=We;if(qt&&gr&&nt&&nt.allLayerViews){const vr=new Map;for(const ft of We){const St=ft.layer,Lt=vr.get(St)||[],Ft=ft.attributes[St.objectIdField];null!=Ft&&Lt.push(Ft),vr.set(St,Lt)}const pr=[];vr.forEach((ft,St)=>{const Lt=nt.allLayerViews.find(Ft=>Ft.layer.id===St.id);if("queryFeatures"in Lt){const Ft=St.createQuery();Ft.objectIds=ft,Ft.returnGeometry=!0,pr.push(Lt.queryFeatures(Ft))}});const hr=yield Promise.all(pr),st=[];for(const ft of hr)if(ft&&ft.features&&ft.features.length)for(const St of ft.features)(0,B.pC)(St.geometry)&&st.push(St.geometry);er=st}for(const vr of er)mt=yield ee(vr,nt,ht,mt);return mt}if(Array.isArray(We)&&2===We.length&&"number"==typeof We[0]&&"number"==typeof We[1])Kt=new Z.Z(We);else if(We instanceof k.Z)Kt=We;else if("geometry"in We)if(We.geometry)Kt=We.geometry;else if(We.layer){const qt=We.layer,gr=nt.allLayerViews.find(er=>er.layer.id===qt.id);if("queryFeatures"in gr){const er=qt.createQuery();er.objectIds=[We.attributes[qt.objectIdField]],er.returnGeometry=!0;const vr=yield gr.queryFeatures(er);Kt=(0,B.U2)(vr,"features",0,"geometry")}}if((0,B.Wi)(Kt)||(Bt="point"===Kt.type?new W.Z({xmin:Kt.x,ymin:Kt.y,xmax:Kt.x,ymax:Kt.y,spatialReference:Kt.spatialReference}):Kt.extent,!Bt))return null;(0,X.kR)()||(0,X.Up)(Bt.spatialReference,ht)||(yield(0,X.zD)());const $t=(0,X.iV)(Bt,ht);return $t?mt=mt?mt.union($t):$t:null})).apply(this,arguments)}function oe(We){if(We&&(!Array.isArray(We)||"number"!=typeof We[0])&&("object"==typeof We||Array.isArray(We)&&"object"==typeof We[0])){if("layer"in We&&We.layer&&We.layer.minScale&&We.layer.maxScale){const nt=We.layer;return{min:nt.minScale,max:nt.maxScale}}if(Array.isArray(We)&&We.length&&We.every(nt=>"layer"in nt)){let nt=0,ht=0;for(const mt of We){const Kt=mt.layer;Kt&&Kt.minScale&&Kt.maxScale&&(nt=Kt.minScale<nt?Kt.minScale:nt,ht=Kt.maxScale>ht?Kt.maxScale:ht)}return nt&&ht?{min:nt,max:ht}:null}}}function ce(We,nt){return(0,w.fS)(N(We),nt)?We:(0,X.iV)(We,nt)}function re(We,nt){return K.apply(this,arguments)}function K(){return(K=(0,g.Z)(function*(We,nt){if(!We||!nt)return new b.Z({targetGeometry:new Z.Z,scale:0,rotation:0});let ht=nt.spatialReference;const{constraints:mt,padding:Kt,viewpoint:Bt,size:$t}=nt,qt=[Kt?$t[0]-Kt.left-Kt.right:$t[0],Kt?$t[1]-Kt.top-Kt.bottom:$t[1]];let gr=null;We instanceof b.Z?gr=We:We.viewpoint?gr=We.viewpoint:We.target&&"esri.Viewpoint"===We.target.declaredClass&&(gr=We.target);let er=null;gr&&gr.targetGeometry?er=gr.targetGeometry:We instanceof W.Z?er=We:(We||We&&("center"in We||"extent"in We||"target"in We))&&(er=(yield ee(We.center,nt,ht))||(yield ee(We.extent,nt,ht))||(yield ee(We.target,nt,ht))||(yield ee(We,nt,ht))),!er&&Bt&&Bt.targetGeometry?er=Bt.targetGeometry:!er&&nt.extent&&(er=nt.extent),ht||(ht=N(nt.spatialReference||nt.extent||er)),(0,X.kR)()||(0,w.fS)(er.spatialReference,ht)||(0,X.Up)(er,ht)||(yield(0,X.zD)());const vr=ce(er.center?er.center:er,ht);let pr=null;if(gr&&(0,B.pC)(gr.targetGeometry)&&"point"===gr.targetGeometry.type)pr=gr.scale;else if("scale"in We&&We.scale)pr=We.scale;else if("zoom"in We&&-1!==We.zoom&&mt&&mt.effectiveLODs)pr=mt.zoomToScale(We.zoom);else if(Array.isArray(er)||"point"===er.type||"extent"===er.type&&0===er.width&&0===er.height){const St=ce(nt.extent,ht);pr=(0,B.pC)(St)?z(St,qt):nt.extent?z(nt.extent,qt):Bt.scale}else pr=z(ce(er.extent,ht),qt);const hr=oe(We);hr&&(hr.min&&hr.min>pr?pr=hr.min:hr.max&&hr.max<pr&&(pr=hr.max));let st=0;gr?st=gr.rotation:We.hasOwnProperty("rotation")?st=We.rotation:Bt&&(st=Bt.rotation);let ft=new b.Z({targetGeometry:vr,scale:pr,rotation:st});return mt&&(ft=mt.fit(ft),mt.constrainByGeometry(ft),mt.rotationEnabled||(ft.rotation=st)),ft})).apply(this,arguments)}function ae(We,nt){const ht=We.targetGeometry,mt=nt.targetGeometry;return ht.x=mt.x,ht.y=mt.y,ht.spatialReference=mt.spatialReference,We.scale=nt.scale,We.rotation=nt.rotation,We}function se(We,nt,ht){return ht?(0,D.s)(We,.5*(nt[0]-ht.right+ht.left),.5*(nt[1]-ht.bottom+ht.top)):(0,D.g)(We,nt,.5)}const de=function(){const We=(0,I.a)();return function(nt,ht,mt){const Kt=ht.targetGeometry;M(We,Kt);const Bt=.5*Ee(ht);return nt.xmin=We[0]-Bt*mt[0],nt.ymin=We[1]-Bt*mt[1],nt.xmax=We[0]+Bt*mt[0],nt.ymax=We[1]+Bt*mt[1],nt.spatialReference=Kt.spatialReference,nt}}();function ue(We,nt,ht,mt,Kt){return Be(We,nt,ht.center),We.scale=z(ht,mt),Kt&&Kt.constraints&&Kt.constraints.constrain(We),We}const ie=function(){const We=(0,I.a)();return function(nt,ht,mt){return(0,D.h)(nt,function Ke(We,nt){return(0,D.g)(We,nt,.5)}(nt,ht),se(We,ht,mt))}}(),te=function(){const We=(0,L.c)(),nt=(0,I.a)();return function(ht,mt,Kt,Bt){const $t=Ee(mt),qt=be(mt);return(0,D.s)(nt,$t,$t),(0,$.f)(We,nt),(0,$.r)(We,We,qt),(0,$.t)(We,We,ie(nt,Kt,Bt)),(0,$.t)(We,We,[0,Bt.top-Bt.bottom]),(0,D.s)(ht,We[4],We[5])}}();function Ee(We){return We.scale*function fe(We){return(0,B.pC)(We)&&(0,w.JY)(We.spatialReference)?1/(39.37*Q(We.spatialReference)*96):1}(We.targetGeometry)}function be(We){return(0,C.t)(We.rotation)||0}const Ue=function(){const We=(0,I.a)(),nt=(0,I.a)(),ht=(0,I.a)();return function(mt,Kt,Bt,$t,qt,gr){return(0,D.n)(We,Kt),(0,D.g)(nt,Bt,.5*gr),(0,D.s)(ht,1/$t*gr,-1/$t*gr),(0,$.a)(mt,nt),qt&&(0,$.r)(mt,mt,qt),(0,$.s)(mt,mt,ht),(0,$.t)(mt,mt,We),mt}}(),he=function(){const We=(0,I.a)();return function(nt,ht,mt,Kt){const Bt=Ee(ht),$t=be(ht);return M(We,ht.targetGeometry),Ue(nt,We,mt,Bt,$t,Kt)}}(),Me=function(){const We=(0,I.a)();return function(nt,ht,mt,Kt){const Bt=Ee(ht);return M(We,ht.targetGeometry),Ue(nt,We,mt,Bt,0,Kt)}}();function Le(We){if(We.isWrappable){const nt=(0,w.C5)(We);return nt.valid[1]-nt.valid[0]}return 0}function Je(We,nt){return Math.round(Le(We)/nt)}const Oe=function(){const We=(0,I.a)(),nt=(0,I.a)(),ht=[0,0,0];return function(mt,Kt,Bt){(0,D.f)(We,mt,Kt),(0,D.i)(We,We),(0,D.f)(nt,mt,Bt),(0,D.i)(nt,nt),(0,D.j)(ht,We,nt);let $t=Math.acos((0,D.k)(We,nt)/((0,D.l)(We)*(0,D.l)(nt)))*x;return ht[2]<0&&($t=-$t),isNaN($t)&&($t=0),$t}}(),xe=function(){const We=(0,I.a)();return function(nt,ht,mt,Kt){const Bt=nt.targetGeometry;return ae(nt,ht),te(We,ht,mt,Kt),Bt.x+=We[0],Bt.y+=We[1],nt}}(),Be=function(We,nt,ht){ae(We,nt);const mt=We.targetGeometry;return mt.x=ht.x,mt.y=ht.y,mt.spatialReference=ht.spatialReference,We},Y=function(){const We=(0,I.a)();return function(nt,ht,mt,Kt,Bt){Bt||(Bt="center"),(0,D.h)(We,mt,Kt),(0,D.g)(We,We,.5);const $t=We[0],qt=We[1];switch(Bt){case"center":(0,D.s)(We,0,0);break;case"left":(0,D.s)(We,-$t,0);break;case"top":(0,D.s)(We,0,qt);break;case"right":(0,D.s)(We,$t,0);break;case"bottom":(0,D.s)(We,0,-qt);break;case"top-left":(0,D.s)(We,-$t,qt);break;case"bottom-left":(0,D.s)(We,-$t,-qt);break;case"top-right":(0,D.s)(We,$t,qt);break;case"bottom-right":(0,D.s)(We,$t,-qt)}return dt(nt,ht,We),nt}}();function me(We,nt,ht){return ae(We,nt),We.rotation+=ht,We}function Ie(We,nt,ht){return ae(We,nt),We.rotation=ht,We}const $e=function(){const We=(0,I.a)();return function(nt,ht,mt,Kt,Bt){return ae(nt,ht),isNaN(mt)||0===mt||(qe(We,Kt,ht,Bt),nt.scale=ht.scale*mt,ke(We,We,nt,Bt),dt(nt,nt,(0,D.s)(We,We[0]-Kt[0],Kt[1]-We[1]))),nt}}();function rt(We,nt,ht){return ae(We,nt),We.scale=ht,We}const Qe=function(){const We=(0,I.a)();return function(nt,ht,mt,Kt,Bt,$t){return ae(nt,ht),isNaN(mt)||0===mt||(qe(We,Bt,ht,$t),nt.scale=ht.scale*mt,nt.rotation+=Kt,ke(We,We,nt,$t),dt(nt,nt,(0,D.s)(We,We[0]-Bt[0],Bt[1]-We[1]))),nt}}(),Xe=function(){const We=(0,I.a)(),nt=(0,I.a)();return function(ht,mt,Kt,Bt,$t,qt,gr){return ie(nt,qt,gr),(0,D.m)(We,$t,nt),Bt?Qe(ht,mt,Kt,Bt,We,qt):$e(ht,mt,Kt,We,qt)}}(),qe=function(){const We=(0,L.c)();return function(nt,ht,mt,Kt){return(0,D.t)(nt,ht,function pe(We,nt,ht,mt){return he(We,nt,ht,mt),(0,$.i)(We,We)}(We,mt,Kt,1))}}(),ke=function(){const We=(0,L.c)();return function(nt,ht,mt,Kt){return(0,D.t)(nt,ht,he(We,mt,Kt,1))}}(),dt=function(){const We=(0,I.a)(),nt=(0,L.c)();return function(ht,mt,Kt){ae(ht,mt);const Bt=Ee(mt),$t=ht.targetGeometry;return(0,$.b)(nt,be(mt)),(0,$.s)(nt,nt,(0,I.f)(Bt,Bt)),(0,D.t)(We,Kt,nt),$t.x+=We[0],$t.y+=We[1],ht}}()},59617:(He,ve,p)=>{"use strict";var g,B;function J(B){return B===g.Global?"global":"local"}p.d(ve,{JY:()=>g,M7:()=>J}),(B=g||(g={}))[B.Global=1]="Global",B[B.Local=2]="Local"},35216:(He,ve,p)=>{"use strict";p.d(ve,{a:()=>B});var g=p(63290);class b{constructor(L,D=[]){this.eventType=L,this.keyModifiers=D}matches(L){if(L.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;const D=L.modifiers;for(const I of this.keyModifiers)if(!D.has(I))return!1;return!0}}const J=g.Z.getLogger("esri.views.input.InputHandler");class B{constructor(L){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=L}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const L in this._incoming){const D=this._incoming[L];for(const I of D)this._incomingEventMatches.push(I.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(L=>L.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(L){this._manager?J.error("This InputHandler has already been registered with an InputManager"):(L.setEventCallback(D=>this._handleEvent(D)),L.setUninstallCallback(()=>this._onUninstall()),this._manager=L)}onUninstall(){}registerIncoming(L,D,I){let W;"function"==typeof D?(I=D,W=[]):W=D||[];const k="string"==typeof L?new b(L,W):L,Z=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},X=T=>{const O=this._incoming[T.match.eventType];if(O){const x=O.indexOf(T);O.splice(x,1),Z(),this._manager&&this._manager.updateDependencies()}},V=new j(k,I,{onPause:X,onRemove:X,onResume:T=>{const O=this._incoming[T.match.eventType];O&&-1===O.indexOf(T)&&(O.push(T),Z(),this._manager&&this._manager.updateDependencies())}});let w=this._incoming[k.eventType];return w||(w=[],this._incoming[k.eventType]=w),w.push(V),Z(),this._manager&&this._manager.updateDependencies(),V}registerOutgoing(L){if(this._outgoing[L])throw Error("There is already a callback registered for this outgoing InputEvent: "+L);const D=new C(L,{onEmit:(I,W,k,Z)=>{this._manager.emit(I.eventType,W,k,Z)},onRemove:I=>{delete this._outgoing[I.eventType],this._manager.updateDependencies()}});return this._outgoing[L]=D,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),D}startCapturingPointer(L){this._manager.setPointerCapture(L,!0)}stopCapturingPointer(L){this._manager.setPointerCapture(L,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):J.error("This InputHandler is not registered with an InputManager")}_handleEvent(L){const D=this._incoming[L.type];if(D)for(const I of D)if(I.match.matches(L)&&(I.callback(L),L.shouldStopPropagation()))break}}class j{constructor(L,D,I){this.match=L,this._callback=D,this._handler=I}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class C{constructor(L,D){this.eventType=L,this._removed=!1,this._handler=D}emit(L,D,I){this._removed||this._handler.onEmit(this,L,D,I)}remove(){this._removed=!0,this._handler.onRemove(this)}}},58677:(He,ve,p)=>{"use strict";p.d(ve,{$:()=>X,f:()=>T});var g=p(17626),b=p(14517),J=p(63290),B=p(35133),j=p(77712),D=(p(85931),p(8314),p(90912),p(76898)),I=p(25441),W=p(35216);class k extends W.a{constructor(x){super(!0),this._onChange=x,this._value="mouse",this.registerIncoming("pointer-down",N=>{this._setValue("touch"===N.data.native.pointerType?"touch":"mouse")}),this._moveHandler=this.registerIncoming("pointer-move",N=>{this._setValue("touch"===N.data.native.pointerType?"touch":"mouse")}),this._moveHandler.pause()}_setValue(x){x!==this._value&&("touch"===x?this._moveHandler.resume():this._moveHandler.pause(),this._value=x,this._onChange(x))}}const Z=J.Z.getLogger("esri.views.input.InputManager");let X=class extends b.Z{constructor(O){super(O),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=I.CK,this.latestPointerType="mouse",this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const O=Object.keys(this._nameToGroup);for(const x of O)this.uninstallHandlers(x);this.eventSource=null,this._currentPropagation=null}get hasPendingInputs(){return this._handlers.some(O=>O.handler.hasPendingInputs)}installHandlers(O,x,N=T.INTERNAL){if(this._nameToGroup[O])return void Z.error("There is already an InputHandler group registered under the name `"+O+"`");if(0===x.length)return void Z.error("Can't register a group of zero handlers");const M={name:O,handlers:x.map(Q=>({handler:Q,active:!0,removed:!1,priorityIndex:0,groupPriority:N,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[O]=M;for(let Q=M.handlers.length-1;Q>=0;Q--){const z=M.handlers[Q];this._handlers.push(z),z.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(ee,le,oe,ce,re)=>{this._emitInputEvent(z.priorityIndex+1,ee,le,oe,re,ce)},setPointerCapture:(ee,le)=>{this._setPointerCapture(M,z,ee,le)},setEventCallback:ee=>{z.eventCallback=ee},setUninstallCallback:ee=>{z.uninstallCallback=ee},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(O){const x=this._nameToGroup[O];x?(x.handlers.forEach(N=>{N.removed=!0,N.uninstallCallback()}),delete this._nameToGroup[O],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Z.error("There is no InputHandler group registered under the name `"+O+"`")}hasHandlers(O){return void 0!==this._nameToGroup[O]}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const O=new Set,x=new Set;this._handlersPriority=[];for(let N=this._handlers.length-1;N>=0;N--){const M=this._handlers[N];M.priorityIndex=N,this._handlersPriority.push(M)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let N=this._handlersPriority.length-1;N>=0;N--){const M=this._handlersPriority[N];M.priorityIndex=N;let Q=M.handler.hasSideEffects;if(!Q)for(const z of M.handler.outgoingEventTypes)if(O.has(z)){Q=!0;break}if(Q)for(const z of M.handler.incomingEventMatches){O.add(z.eventType);for(const ee of z.keyModifiers)(0,I.wj)(ee)||x.add(ee)}M.active=Q}this._sourceEvents=O,this._keyModifiers=x,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointerType(O){this._set("latestPointerType",O)}_onEventReceived(O,x){"pointer-capture-lost"===O&&this._pointerCaptures.delete(x.native.pointerId),this._updateKeyModifiers(O,x),this._emitInputEventFromSource(O,x,null!=this.test.timestamp?this.test.timestamp:x.native?x.native.timestamp:void 0,x.native?x.native.cancelable:void 0)}_updateKeyModifiers(O,x){if(!x)return;let N=!1;const M=()=>{if(!N){const ee=new Set;this._activeKeyModifiers.forEach(le=>{ee.add(le)}),this._activeKeyModifiers=ee,N=!0}},Q=(ee,le)=>{le&&!this._activeKeyModifiers.has(ee)?(M(),this._activeKeyModifiers.add(ee)):!le&&this._activeKeyModifiers.has(ee)&&(M(),this._activeKeyModifiers.delete(ee))};if("key-down"===O||"key-up"===O){const ee=x.key;this._keyModifiers.has(ee)&&Q(ee,"key-down"===O)}const z=x.native;Q("Alt",!(!z||!z.altKey)),Q("Ctrl",!(!z||!z.ctrlKey)),Q("Shift",!(!z||!z.shiftKey)),Q("Meta",!(!z||!z.metaKey)),Q("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerTypeHandler=new k(O=>this._setLatestPointerType(O)),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,T.INTERNAL),this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],T.INTERNAL)}_setPointerCapture(O,x,N,M){const Q=O.name+"-"+x.priorityIndex,z=this._pointerCaptures.get(N.pointerId)||new Set;this._pointerCaptures.set(N.pointerId,z),M?(z.add(Q),1===z.size&&this.eventSource&&this.eventSource.setPointerCapture(N,!0)):z.has(Q)&&(z.delete(Q),0===z.size&&(this._pointerCaptures.delete(N.pointerId),this.eventSource&&this.eventSource.setPointerCapture(N,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(O=>!O.removed),this.updateDependencies()}_emitInputEventFromSource(O,x,N,M){this._emitInputEvent(0,O,x,N,M)}_emitInputEvent(O,x,N,M,Q,z){const ee=void 0!==M?M:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),oe={event:new V(x,N,ee,z||this._activeKeyModifiers,void 0!==Q&&Q),priorityIndex:O};this._currentPropagation?this._currentPropagation.events.push(oe):this._doNewPropagation(oe)}_doNewPropagation(O){this._currentPropagation={events:new B.Z,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:O.event.timestamp},this._currentPropagation.events.push(O),this._continuePropagation()}_continuePropagation(){const O=this._currentPropagation;if(O){for(;this._currentPropagation.events.length>0;){const{event:x,priorityIndex:N}=this._currentPropagation.events.pop(),M=x.data&&x.data.eventId;if(null==M||!this._stoppedPropagationEventIds.has(M))for(O.currentHandler=this._handlersPriority[N];O.currentHandler;){if(O.currentHandler.removed)O.needsHandlerGarbageCollect=!0;else{if(O.currentHandler.active&&!x.shouldStopPropagation()&&O.currentHandler.eventCallback(x),x.shouldStopPropagation()){null!=M&&this._stoppedPropagationEventIds.add(M);break}if(x.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:x,priorityIndex:O.currentHandler.priorityIndex+1})}O.currentHandler=this._handlersPriority[O.currentHandler.priorityIndex+1]}}O.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(O){const x=new B.Z;for(x.push(O);this._currentPropagation.events.length;)x.push(this._currentPropagation.events.pop());this._currentPropagation.events=x,this._currentPropagation.currentHandler=null}_compareHandlerPriority(O,x){if(O.handler.hasSideEffects!==x.handler.hasSideEffects)return O.handler.hasSideEffects?1:-1;if(O.groupPriority!==x.groupPriority)return O.groupPriority>x.groupPriority?-1:1;for(const N of O.handler.incomingEventMatches)for(const M of x.handler.incomingEventMatches){if(N.eventType!==M.eventType)continue;const Q=N.keyModifiers.filter(z=>-1!==M.keyModifiers.indexOf(z));if(Q.length===N.keyModifiers.length!=(Q.length===M.keyModifiers.length))return N.keyModifiers.length>M.keyModifiers.length?-1:1}return O.priorityIndex>x.priorityIndex?-1:1}_sortHandlersPriority(O){const x=[];for(const N of O){let M=0;for(;M<x.length&&this._compareHandlerPriority(N,x[M])>=0;)M++;x.splice(M,0,N)}return x}get debug(){const O=x=>{const N=this._setPointerCapture;this._setPointerCapture=()=>{},x(),this._setPointerCapture=N};return{injectEvent:(x,N)=>{O(()=>{this._onEventReceived(x,N)})},disablePointerCapture:O}}};(0,g._)([(0,j.Cb)({readOnly:!0})],X.prototype,"hasPendingInputs",null),(0,g._)([(0,j.Cb)()],X.prototype,"eventSource",void 0),(0,g._)([(0,j.Cb)()],X.prototype,"recognizers",void 0),(0,g._)([(0,j.Cb)({readOnly:!0})],X.prototype,"latestPointerType",void 0),X=(0,g._)([(0,D.j)("esri.views.input.InputManager")],X);class V{constructor(x,N,M,Q,z){this.type=x,this.data=N,this.timestamp=M,this.modifiers=Q,this.cancelable=z,this._propagationState=w.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=w.STOPPED}shouldStopPropagation(){return 0!=(this._propagationState&w.STOPPED)}async(x){this._propagationState|=w.PAUSED;const N=(M,Q)=>{this._propagationState&=~w.PAUSED;const z=this._resumeCallback;if(this._resumeCallback=null,z&&z(),Q)throw M;return M};return("function"==typeof x?x():x).then(M=>N(M,!1),M=>N(M,!0))}shouldPausePropagation(x){return!!(this._propagationState&w.PAUSED)&&(this._resumeCallback=x,!0)}preventDefault(){this.data.native.preventDefault()}}var w,O;(O=w||(w={}))[O.NONE=0]="NONE",O[O.STOPPED=1]="STOPPED",O[O.PAUSED=2]="PAUSED";const T={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3}},25441:(He,ve,p)=>{"use strict";p.d(ve,{kK:()=>j,wj:()=>C,CK:()=>J});var g=p(17770);const J=(0,p(8314).Z)("mac")?"Meta":"Ctrl",B={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let $=48;$<58;$++)B[$]=String.fromCharCode($);for(let $=1;$<25;$++)B[111+$]=`F${$}`;for(let $=65;$<91;$++)B[$]=[String.fromCharCode($+32),String.fromCharCode($)];function j($){if(void 0!==$.key)return(0,g.kK)($);const L=B[$.keyCode];return Array.isArray(L)?$.shiftKey?L[1]:L[0]:L}function C($){switch($){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}},71251:(He,ve,p)=>{"use strict";p.d(ve,{e:()=>C});var g=p(62208),b=p(10699),J=p(35133),B=p(50618);class j{constructor(L,D){this.item=L,this.controller=D,this.promise=null}}class C{constructor(L){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,L.concurrency&&(this.concurrency=L.concurrency),this._queue=new J.Z(L.peeker),this.process=L.process;const D=L.scheduler;L.priority&&(0,g.pC)(D)&&(this._task=D.registerTask(L.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(L){const D=this._controllers.get(L);D&&D.abort()}clear(){this._queue.clear();const L=[];this._controllers.forEach(D=>L.push(D)),this._controllers.clear(),L.forEach(D=>D.abort()),this._processingItems.clear(),this._cancelNext()}forEach(L){this._deferreds.forEach((D,I)=>L(I))}get(L){const D=this._deferreds.get(L);return D?D.promise:void 0}isOngoing(L){return this._processingItems.has(L)}has(L){return this._deferreds.has(L)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(L,D){const I=this.get(L);if(I)return I;const W=new AbortController;let k=null;D&&(k=(0,b.fu)(D,()=>W.abort()));const X=()=>{V.remove(),(0,g.pC)(k)&&k.remove(),this._deferreds.delete(L),this._controllers.delete(L),this._queue.remove(L),this._processingItems.delete(L),this._scheduleNext()},V=(0,b.$F)(W.signal,()=>{const T=this._processingItems.get(L);T&&T.controller.abort(),X(),w.reject((0,b.zE)())}),w=(0,b.dD)();return this._deferreds.set(L,w),this._controllers.set(L,W),w.promise.then(X,X),this._queue.push(L),this._scheduleNext(),w.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const L=[];this._processingItems.forEach(D=>L.push(D)),this._processingItems.clear();for(const D of L)this._queue.push(D.item),D.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const L=[];for(;this._queue.length;)L.push(this._queue.pop());return this.clear(),L}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(L){for(;!L.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),L.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=(0,B.Os)(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(L,D){this._canProcessFulfillment(L)&&(this._scheduleNext(),this._deferreds.get(L.item).resolve(D))}_processError(L,D){this._canProcessFulfillment(L)&&(this._scheduleNext(),this._deferreds.get(L.item).reject(D))}_canProcessFulfillment(L){return!!this._deferreds.get(L.item)&&this._processingItems.get(L.item)===L}_process(L){if((0,g.Wi)(L))return;let D;const I=new AbortController,W=new j(L,I);this._processingItems.set(L,W);try{D=this.process(L,I.signal)}catch(k){this._processError(W,k)}(0,b.y8)(D)?(W.promise=D,D.then(k=>this._processResult(W,k),k=>this._processError(W,k))):this._processResult(W,D)}get test(){return{update:L=>this.runTask(L)}}}},74447:(He,ve,p)=>{"use strict";p.d(ve,{sq:()=>Ee,T8:()=>Q,G5:()=>ie});var g=p(17626),b=p(14517),J=p(72392),B=p(63290),j=p(62208),C=p(73362),$=p(77029),L=p(10699),D=p(32917),I=p(27422),W=p(77712),V=(p(85931),p(8314),p(90912),p(76898));let w=class extends b.Z{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(be){for(;!be.done&&this._process(be);)be.madeProgress()}push(be,ye,Ke){return this.running=!0,new Promise((Ue,he)=>this._tasks.push(new T(Ue,he,be,ye,Ke)))}unshift(be,ye,Ke){return this.running=!0,new Promise((Ue,he)=>this._tasks.unshift(new T(Ue,he,be,ye,Ke)))}_process(be){if(0===this._tasks.length)return!1;const ye=this._tasks.shift();try{const Ke=(0,L.Hc)(ye.signal);if(Ke&&!ye.abortCallback)ye.reject((0,L.zE)());else{const Ue=Ke?ye.abortCallback((0,L.zE)()):ye.callback(be);(0,L.y8)(Ue)?Ue.then(ye.resolve,ye.reject):ye.resolve(Ue)}}catch(Ke){ye.reject(Ke)}return this.running=this._tasks.length>0,!0}cancelAll(){const be=(0,L.zE)();for(const ye of this._tasks)if(ye.abortCallback){const Ke=ye.abortCallback(be);ye.resolve(Ke)}else ye.reject(be);this._tasks.length=0,this.running=!1}};(0,g._)([(0,W.Cb)()],w.prototype,"running",void 0),w=(0,g._)([(0,V.j)("esri.layers.support.PromiseQueue")],w);class T{constructor(ye,Ke,Ue,he,Me){this.resolve=ye,this.reject=Ke,this.callback=Ue,this.signal=he,this.abortCallback=Me}}let O=class extends b.Z{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};(0,g._)([(0,W.Cb)()],O.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),(0,g._)([(0,W.Cb)()],O.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),O=(0,g._)([(0,V.j)("esri.views.support.DebugFlags")],O);const x=new O,N=B.Z.getLogger("esri.views.support.Scheduler");var Q,be;(be=Q||(Q={})).RESOURCE_CONTROLLER="schedule",be.SLIDE="slide",be.STREAM_DATA_LOADER="stream loader",be.ELEVATION_QUERY="elevation query",be.TERRAIN_SURFACE="terrain",be.SURFACE_GEOMETRY_UPDATES="surface geometry updates",be.GRAPHICS_CORE="Graphics3D",be.I3S_CONTROLLER="I3S",be.POINT_CLOUD_LAYER="point cloud",be.FEATURE_TILE_FETCHER="feature fetcher",be.OVERLAY="overlay",be.STAGE="stage",be.GRAPHICS_DECONFLICTOR="graphics deconflictor",be.FILTER_VISIBILITY="Graphics3D filter visibility",be.SCALE_VISIBILITY="Graphics3D scale visibility",be.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",be.POINT_OF_INTEREST_FREQUENT="POI frequent",be.POINT_OF_INTEREST_INFREQUENT="POI infrequent",be.LABELER="labeler",be.FEATURE_QUERY_ENGINE="feature query",be.FEATURE_TILE_TREE="feature tile tree",be.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",be.ELEVATION_ALIGNMENT="elevation alignment",be.TEXT_TEXTURE_ATLAS="text texture atlas",be.TEXTURE_UNLOAD="texture unload",be.LINE_OF_SIGHT_TOOL="line of sight tool",be.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",be.ELEVATION_PROFILE="elevation profile",be.SNAPPING="snapping",be.SHADOW_ACCUMULATOR="shadow accumulator",be.CLOUDS_GENERATOR="cloud generator",be[be.TEST_PRIO=1]="TEST_PRIO";const ee=new Map([[Q.RESOURCE_CONTROLLER,0],[Q.SLIDE,0],[Q.STREAM_DATA_LOADER,0],[Q.ELEVATION_QUERY,0],[Q.TERRAIN_SURFACE,1],[Q.SURFACE_GEOMETRY_UPDATES,1],[Q.GRAPHICS_CORE,2],[Q.I3S_CONTROLLER,2],[Q.POINT_CLOUD_LAYER,2],[Q.FEATURE_TILE_FETCHER,2],[Q.OVERLAY,4],[Q.STAGE,4],[Q.GRAPHICS_DECONFLICTOR,4],[Q.FILTER_VISIBILITY,4],[Q.SCALE_VISIBILITY,4],[Q.FRUSTUM_VISIBILITY,4],[Q.POINT_OF_INTEREST_FREQUENT,6],[Q.POINT_OF_INTEREST_INFREQUENT,30],[Q.LABELER,8],[Q.FEATURE_QUERY_ENGINE,8],[Q.FEATURE_TILE_TREE,16],[Q.FEATURE_TILE_TREE_ACTIVE,0],[Q.ELEVATION_ALIGNMENT,12],[Q.TEXT_TEXTURE_ATLAS,12],[Q.CLOUDS_GENERATOR,12],[Q.TEXTURE_UNLOAD,12],[Q.LINE_OF_SIGHT_TOOL,16],[Q.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[Q.SNAPPING,0],[Q.SHADOW_ACCUMULATOR,30]]);function le(be){return ee.has(be)?ee.get(be):"number"==typeof be?be:1}var oe;!function(be){be[be.ANIMATING=0]="ANIMATING",be[be.INTERACTING=1]="INTERACTING",be[be.IDLE=2]="IDLE"}(oe||(oe={}));const ce=(0,I.HA)(6.5),re=(0,I.HA)(1),K=(0,I.HA)(30),ae=(0,I.HA)(1e3/30),se=(0,I.HA)(100);var ue,pe;(function(be){let ye=class extends b.Z{constructor(he){super(he),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new C.Z("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=null,this._state=oe.INTERACTING,this._tasks=new $.Z,this._runQueue=new $.Z,this._load=0,this._idleStateCallbacks=new $.Z,this._idleUpdatesStartFired=!1,this._maxReschedule=fe,this._forceTask=!1,this._debug=!1,this._debugHandle=(0,D.YP)(()=>x.SCHEDULER_LOG_SLOW_TASKS,Je=>this._debug=Je,D.nn),this._budget=new Ue(he.nowFunc);for(const Je of Object.keys(Q))this.performanceInfo.tasks.set(Q[Je],new C.Z(Q[Je]));let Me;const Le=this;this._test={get state(){return(0,j.Pt)(Me,Le._state)},set state(Je){Me=Je},FRAME_SAFETY_BUDGET:ce,INTERACTING_BUDGET:ae,IDLE_BUDGET:se,get budget(){return Le._budget.budget},usedBudget:0,setBudget:Je=>Le._budget=Je,updateTask:Je=>this._updateTask(Je),getState:Je=>this._getState(Je),getRuntime:Je=>this._getRuntime(Je),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(he=>he.remove()),this._tasks.clear(),(0,j.hw)(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=fe,this._schedule(),this.frame()))}))}registerTask(he,Me){const Le=le(he),Je=new Ke(this,he,Me,Le);return this._tasks.push(Je),this.performanceInfo.tasks.has(he)||this.performanceInfo.tasks.set(he,new C.Z(he)),Je}registerIdleStateCallbacks(he,Me){const Le={idleBegin:he,idleEnd:Me};this._idleStateCallbacks.push(Le),this.state===oe.IDLE&&this._idleUpdatesStartFired&&Le.idleBegin();const Je=this;return{remove:()=>this._removeIdleStateCallbacks(Le),set idleBegin(Oe){Je._idleUpdatesStartFired&&(Le.idleEnd(),Je._state===oe.IDLE&&Oe()),Le.idleBegin=Oe},set idleEnd(Oe){Le.idleEnd=Oe}}}get now(){return this.nowFunc()}get load(){return this._load}set state(he){this._state!==he&&(this._state=he,this.state!==oe.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(Me=>Me.idleEnd())))}get state(){return(0,j.Wi)(this._test.state)?this._state:this._test.state}updateBudget(he){this._test.usedBudget=0;let Me=ce,Le=he.frameDuration,Je=re;switch(this.state){case oe.IDLE:Me=(0,I.HA)(0),Le=(0,I.HA)(Math.max(se,he.frameDuration)),Je=K;break;case oe.INTERACTING:Le=(0,I.HA)(Math.max(ae,he.frameDuration))}return Le=(0,I.HA)(Le-he.elapsedFrameTime-Me),this.state!==oe.IDLE&&Le<re&&!this._forceTask?(this._forceTask=!0,!1):(Le=(0,I.HA)(Math.max(Le,Je)),this._budget.reset(Le,this.state),this._maxReschedule=fe,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case oe.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(he=>he.idleBegin())),this._runIdle();break;case oe.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset((0,I.HA)(0),this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(he){this._idleUpdatesStartFired&&he.idleEnd(),this._idleStateCallbacks.removeUnordered(he)}removeTask(he){this._tasks.removeUnordered(he),this._runQueue.removeUnordered(he)}_updateTask(he){this._tasks.forAll(Me=>{Me.name===he&&Me.setPriority(he)})}_getState(he){if(this._runQueue.some(Le=>Le.name===he))return pe.SCHEDULED;let Me=pe.IDLE;return this._tasks.forAll(Le=>{Le.name===he&&Le.needsUpdate&&(Le.schedulePriority<=1?Me=pe.READY:Me!==pe.READY&&(Me=pe.WAITING))}),Me}_getRuntime(he){let Me=0;return this._tasks.forAll(Le=>{Le.name===he&&(Me+=Le.runtime)}),Me}_resetRuntimes(){this._tasks.forAll(he=>he.runtime=0)}_getRunning(){const he=new Map;if(this._tasks.forAll(Le=>{Le.needsUpdate&&he.set(Le.name,(he.get(Le.name)||0)+1)}),0===he.size)return null;let Me="";return he.forEach((Le,Je)=>{Me+=Le>1?` ${Le}x ${Je}`:` ${Je}`}),Me}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const he=this._tasks.reduce((Me,Le)=>Le.needsUpdate?++Me:Me,0);this._load=.9*this._load+he*(1-.9)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(he=>!!he.needsUpdate||(he.schedulePriority=he.basePriority,!1)),this._tasks.forAll(he=>{0===he.basePriority&&he.needsUpdate&&!this._runQueue.some(Me=>Me===he)&&this._runQueue.unshift(he)});0===this._runQueue.length;){let he=!1,Me=0;if(this._tasks.forAll(Le=>{Le.needsUpdate&&0!==Le.schedulePriority&&0!==Le.basePriority&&(he=!0,Me=Math.max(Me,Le.basePriority),1===Le.schedulePriority?(Le.schedulePriority=0,this._runQueue.push(Le)):--Le.schedulePriority)}),!he)return this.updating=!1,!1;this._maxReschedule===fe&&(this._maxReschedule=Me),--this._maxReschedule}return this.updating=!0,!0}_run(){const he=this._budget.now();this._startFrameTaskTimes();do{for(;this._runQueue.length>0;){const Me=this._budget.now(),Le=this._runQueue.pop();this._budget.resetProgress();try{Le.task.runTask(this._budget)}catch(Oe){N.error(`Exception in task "${Le.name}"`,Oe)}Le.schedulePriority=Le.basePriority;const Je=this._budget.now()-Me;if(Le.runtime+=Je,this._frameTaskTimes.set(Le.priority,this._frameTaskTimes.get(Le.priority)+Je),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",Le.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some(Oe=>Oe.needsUpdate),void this._recordFrameTaskTimes(this._budget.now()-he)}}while(this._schedule());this.updating=this._tasks.some(Me=>Me.needsUpdate),this._recordFrameTaskTimes(this._budget.now()-he)}_startFrameTaskTimes(){for(const he of Object.keys(Q))this._frameTaskTimes.set(Q[he],0)}_recordFrameTaskTimes(he){this._frameTaskTimes.forEach((Me,Le)=>this.performanceInfo.tasks.get(Le).record(Me)),this.performanceInfo.total.record(he)}get test(){return this._test}};(0,g._)([(0,W.Cb)()],ye.prototype,"updating",void 0),(0,g._)([(0,W.Cb)()],ye.prototype,"nowFunc",void 0),ye=(0,g._)([(0,V.j)("esri.views.support.Scheduler")],ye),be.Scheduler=ye;let Ke=class extends b.Z{constructor(he,Me,Le,Je){super({}),this._scheduler=he,this.name=Me,this._basePriority=Je,this.runtime=0,this._queue=new w,this._handles=new J.Z,this.schedulePriority=this._basePriority,this.task=(0,j.pC)(Le)?Le:this._queue,this._handles.add((0,D.gx)(()=>this.task.running,()=>he.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(ie),this._scheduler.removeTask(this),this.schedule=Ee.schedule,this.reschedule=Ee.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(he){this.name=he;const Me=le(he);0!==this._basePriority&&0===this.schedulePriority||(this.schedulePriority=Me),this._basePriority=Me}get priority(){return this.name}set priority(he){this.setPriority(he)}get needsUpdate(){return this.updating||this.task.running}schedule(he,Me,Le){return this._queue.push(he,Me,Le)}reschedule(he,Me,Le){return this._queue.unshift(he,Me,Le)}processQueue(he){this._queue.runTask(he)}};(0,g._)([(0,W.Cb)({constructOnly:!0})],Ke.prototype,"task",void 0),(0,g._)([(0,W.Cb)({readOnly:!0})],Ke.prototype,"updating",null),Ke=(0,g._)([(0,V.j)("esri.views.support.SchedulerTask")],Ke);class Ue{constructor(Me){this.now=Me,this._begin=0,this._budget=0,this._state=oe.IDLE,this._didWork=!1,this._enabled=!0}run(Me){return!this.done&&(!0===Me()&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(Me){this._enabled=Me}reset(Me,Le){this._begin=this.now(),this._budget=Me,this._state=Le,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}be.Budget=Ue})(ue||(ue={})),function(be){be.SCHEDULED="s",be.READY="r",be.WAITING="w",be.IDLE="i"}(pe||(pe={}));const ie=(()=>{const be=new ue.Budget(()=>performance.now());return be.enabled=!1,be})(),Ee=new class te{remove(){}processQueue(){}schedule(ye,Ke,Ue){try{if((0,L.Hc)(Ke)){const he=(0,L.zE)();return Ue?Promise.resolve(Ue(he)):Promise.reject(he)}return(0,L.gx)(ye(ie))}catch(he){return Promise.reject(he)}}reschedule(ye,Ke,Ue){return this.schedule(ye,Ke,Ue)}},fe=Number.MAX_SAFE_INTEGER},70257:(He,ve,p)=>{"use strict";p.d(ve,{t:()=>D});var g=p(17626),b=p(14517),J=p(72392),B=p(62208),j=p(32917),C=p(50618),$=p(77712),L=p(76898);let D=class extends b.Z{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new J.Z,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(k,Z,X={}){return this._installWatch(k,Z,X,j.YP)}addWhen(k,Z,X={}){return this._installWatch(k,Z,X,j.gx)}addOnCollectionChange(k,Z,{initial:X=!1}={}){const V=++this.handleId;return this.handles.add([(0,j.on)(k,"after-changes",this._createSyncUpdatingCallback(),j.Z_),(0,j.on)(k,"change",Z,{onListenerAdd:X?w=>Z({added:w.toArray(),removed:[]}):void 0})],V),{remove:()=>this.handles.remove(V)}}addPromise(k){if((0,B.Wi)(k))return k;const Z=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(k)&&(0!==this.pendingPromises.size||this.handles.has(I)||this._set("updating",!1))}},Z),this.pendingPromises.add(k),this._set("updating",!0);const X=()=>this.handles.remove(Z);return k.then(X,X),k}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(k,Z,X={},V){const w=++this.handleId;X.sync||this._installSyncUpdatingWatch(k,w);const T=V(k,Z,X);return this.handles.add(T,w),{remove:()=>this.handles.remove(w)}}_installSyncUpdatingWatch(k,Z){const X=this._createSyncUpdatingCallback(),V=(0,j.YP)(k,X,{sync:!0,equals:()=>!1});return this.handles.add(V,Z),V}_createSyncUpdatingCallback(){return()=>{this.handles.remove(I),++this.scheduleHandleId;const k=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add((0,C.Os)(()=>{k===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(I))}),I)}}};(0,g._)([(0,$.Cb)({readOnly:!0})],D.prototype,"updating",void 0),D=(0,g._)([(0,L.j)("esri.views.support.WatchUpdatingTracking")],D);const I=-42;var W,k;(k=W||(W={}))[k.NONE=0]="NONE",k[k.SYNC=1]="SYNC",k[k.INIT=2]="INIT"},18605:(He,ve,p)=>{"use strict";p.d(ve,{r7:()=>k,gH:()=>L,LI:()=>I,RZ:()=>W,TT:()=>X,Jl:()=>Z}),p(8314);var b=p(21286);function L(ue,pe,ie,te){te.premultipliedAlpha&&function ce(ue){const pe=ue.data,ie=pe.length;for(let te=0;te<ie;te+=4){const Ee=pe[te+3];if(Ee>0){const fe=Ee/255;pe[te+0]=pe[te+0]/fe,pe[te+1]=pe[te+1]/fe,pe[te+2]=pe[te+2]/fe}}}(ue),ie.width=ue.width,ie.height=ue.height;const Ee=ie.getContext("2d");Ee.putImageData(ue,0,0),te.flipY&&function oe(ue){ue.save(),ue.globalCompositeOperation="copy",ue.scale(1,-1),ue.translate(0,-ue.canvas.height),ue.drawImage(ue.canvas,0,0),ue.restore()}(Ee);const fe=Ee.getImageData(0,0,ue.width,ue.height),be=function D(ue,pe){return ue.toDataURL(re[pe.format],pe.quality/100)}(ie,pe);return ie.width=0,ie.height=0,{dataUrl:be,data:fe}}function I(ue,pe){const ie=function le(ue){switch(ue){case"png":case"jpg":case"jpeg":return ue;default:return ae}}(ue);return{format:ie,quality:(0,b.uZ)(null!=pe?pe:se[ie],0,100)}}function W(ue,pe){return pe/Math.max(ue[0],ue[1])}function k(ue,pe,ie){if(!ue||!pe)throw new Error("Cannot construct image data without dimensions");if(O)try{return new ImageData(ue,pe)}catch(te){O=!1}return w(ue,pe,ie)}function Z(ue,pe,ie,te){if(!pe||!ie)throw new Error("Cannot construct image data without dimensions");if(O)try{return new ImageData(ue,pe,ie)}catch(fe){O=!1}const Ee=w(pe,ie,te);return Ee.data.set(ue,0),Ee}function X(ue,pe,ie,te=0,Ee=0,fe=ue.width-te,be=ue.height-Ee,ye=!1){const{data:Ke}=ue,{width:Ue,height:he,data:Me}=pe,Le=fe/Ue,Je=be/he,Oe=Math.ceil(Le/2),xe=Math.ceil(Je/2),Be=ue.width;for(let Y=0;Y<he;Y++)for(let me=0;me<Ue;me++){const Ie=4*(me+(ye?he-Y-1:Y)*Ue);let $e=0,rt=0,Qe=0,Xe=0,qe=0,ke=0;const dt=(Y+.5)*Je;for(let We=Math.floor(Y*Je);We<(Y+1)*Je;We++){const nt=Math.abs(dt-(We+.5))/xe,ht=(me+.5)*Le,mt=nt*nt;for(let Kt=Math.floor(me*Le);Kt<(me+1)*Le;Kt++){const Bt=Math.abs(ht-(Kt+.5))/Oe,$t=Math.sqrt(mt+Bt*Bt);if($t>=1)continue;let qt=2*$t*$t*$t-3*$t*$t+1;const gr=4*(te+Kt+(Ee+We)*Be);ke+=qt*Ke[gr+3],rt+=qt,!ie&&Ke[gr+3]<255&&(qt=qt*Ke[gr+3]/255),Qe+=qt*Ke[gr],Xe+=qt*Ke[gr+1],qe+=qt*Ke[gr+2],$e+=qt}}Me[Ie]=Qe/$e,Me[Ie+1]=Xe/$e,Me[Ie+2]=qe/$e,Me[Ie+3]=ke/rt}return pe}function w(ue,pe,ie){return ie||(ie=function x(){return T||(T=document.createElement("canvas"),T.width=1,T.height=1),T}()),ie.getContext("2d").createImageData(ue,pe)}let T=null,O=!0;const re={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},ae="png",se={png:100,jpg:98,jpeg:98}},31637:(He,ve,p)=>{"use strict";p.d(ve,{Y:()=>C,hc:()=>j});var g=p(62208),b=p(57596);let J,B;function j(X){switch(X){case b.zO.WEBGL1:return C();case b.zO.WEBGL2:return function $(){return B||(B=function Z(){const X=new I,V=W(b.zO.WEBGL2,X);return(0,g.Wi)(V),X}()),B}()}}function C(){return J||(J=function k(){const X=new D,V=W(b.zO.WEBGL1,X);return(0,g.Wi)(V)||(X.supportsElementIndexUint=null!==V.getExtension("OES_element_index_uint"),X.supportsStandardDerivatives=null!==V.getExtension("OES_standard_derivatives"),X.supportsInstancedArrays=null!==V.getExtension("ANGLE_instanced_arrays"),X.supportsTextureFloat=null!==V.getExtension("OES_texture_float")),X}()),J}class L{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1}}class D extends L{constructor(){super(...arguments),this.type=b.zO.WEBGL1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1}}class I extends L{constructor(){super(...arguments),this.type=b.zO.WEBGL2}}function W(X,V){if(X===b.zO.WEBGL1&&void 0===typeof WebGLRenderingContext||X===b.zO.WEBGL2&&void 0===typeof WebGL2RenderingContext)return null;const w=document.createElement("canvas");if(!w)return null;let T=(0,b.kr)(w,X,{failIfMajorPerformanceCaveat:!0});if((0,g.Wi)(T)&&(T=(0,b.kr)(w,X),(0,g.pC)(T)&&(V.majorPerformanceCaveat=!0)),(0,g.Wi)(T))return T;if(X===b.zO.WEBGL1){const x=T.getParameter(T.VERSION),N=null==x?void 0:x.match(/^WebGL\s+([\d.]*)/);if(N){const M=parseFloat(N[1]);V.available=M>=.94}}else V.available=!0;V.maxTextureSize=T.getParameter(T.MAX_TEXTURE_SIZE),V.supportsVertexShaderSamplers=T.getParameter(T.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const O=T.getShaderPrecisionFormat(T.FRAGMENT_SHADER,T.HIGH_FLOAT);return O&&(V.supportsHighPrecisionFragment=O.precision>0),T}},57596:(He,ve,p)=>{"use strict";p.d(ve,{zO:()=>J,kr:()=>$,sj:()=>B,Sh:()=>j});var J,W,g=p(8314),b=p(62208);function B(W,k,Z={}){const X=j(W);for(;X.length>1;){const V=$(k,X.shift(),Z);if((0,b.pC)(V))return V}return function C(W,k,Z={}){if(!window.WebGLRenderingContext)return L(W,D),null;const X=$(W,k,Z);return(0,b.Wi)(X)&&L(W,I),X}(k,X.shift(),Z)}function j(W){const k=(0,g.Z)("esri-force-webgl");if(k===J.WEBGL1||k===J.WEBGL2)return[k];switch(W){case"2d":return[J.WEBGL1];case"3d":return[J.WEBGL2,J.WEBGL1]}}function $(W,k,Z={}){const X=k===J.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let V=null;for(const w of X){try{V=W.getContext(w,Z)}catch(T){}if(V)break}return V}function L(W,k){const Z=W.parentNode;Z&&(Z.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+k+"</div></div></td></tr></table>")}(W=J||(J={}))[W.WEBGL1=1]="WEBGL1",W[W.WEBGL2=2]="WEBGL2";const D='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',I='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'},92236:(He,ve,p)=>{"use strict";p.d(ve,{a:()=>b,b:()=>J});var g=p(90912);function b(B){const j=(0,g.vU)(100*(1-B));return Math.max(0,Math.min(j,100))}function J(B){return Math.max(0,Math.min(1-B/100,1))}},32584:(He,ve,p)=>{"use strict";p.d(ve,{Nw:()=>w});var g=p(26584),b=p(58817),J=p(62208),B=p(94113),j=p(23025);const C=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),$=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function W(T){return!("feature"!==T.type||T.url||!T.source||"memory"!==T.source.type)}function X(T,O){"maxScale"in T&&(O.maxScale=(0,j.k)(T.maxScale)),"minScale"in T&&(O.minScale=(0,j.k)(T.minScale))}function w(T,O,x){if(!("write"in T)||!T.write)return x&&x.messages&&x.messages.push(new g.Z("layer:unsupported",`Layers (${T.title}, ${T.id}) of type '${T.declaredClass}' cannot be persisted`,{layer:T})),null;if(function k(T,O){if(O.restrictedWebMapWriting){const x=function I(T){return"basemap"===T.layerContainerType?C:"operational-layers"===T.layerContainerType?$:null}(O);return!(0,J.pC)(x)||x.has(T.type)&&!W(T)}return!0}(T,x)){const N={};return T.write(N,x)?N:null}return(0,J.pC)(O)&&function V(T,O){if(function Z(T,O){if(W(T)){const x=(0,B.hS)("featureCollection.layers",O),N=x&&x[0]&&x[0].layerDefinition;N&&X(T,N)}else"stream"===T.type?X(T,O.layerDefinition=O.layerDefinition||{}):"group"!==T.type&&X(T,O)}(T,O),"blendMode"in T&&(O.blendMode=T.blendMode,"normal"===O.blendMode&&delete O.blendMode),O.opacity=(0,j.k)(T.opacity),O.title=T.title||"Layer",O.visibility=T.visible,"legendEnabled"in T&&"wmts"!==T.type)if(W(T)){const x=O.featureCollection;x&&(x.showLegend=T.legendEnabled)}else O.showLegend=T.legendEnabled}(T,O=(0,b.d9)(O)),O}},6785:(He,ve,p)=>{"use strict";p.d(ve,{Z:()=>Be});var g=p(15861),b=p(17626),B=(p(52515),p(55538)),j=p(40764),C=p(61885),$=p(72392),D=(p(8314),p(58817)),I=p(63290),W=p(62208),k=p(60330),Z=p(10699),X=p(32917),V=p(35948),w=p(77712),T=p(66656),O=p(76898),x=p(36082),N=p(819),M=p(39605);p(62996);const z={handleInterceptedEvent:(Y,me,Ie,$e)=>(Y.scheduleRender(),me.properties[`on${$e.type}`].apply(me.properties.bind||Ie,[$e]))},ee={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(Y,me,Ie)=>{Y.style[me]=Ie}},re=(Y,me,Ie=!1)=>{let $e=Y;return me.forEach((rt,Qe)=>{var Xe;const qe=null!=(Xe=$e)&&Xe.children?((Y,me)=>Y.find(ke=>ke.domNode===rt))($e.children):void 0;Ie&&!qe&&Qe!==me.length-1||($e=qe)}),$e};var ae=p(9509),se=p(54346),de=p(21726);let ue;ue="components/assets";var ie=p(81431),te=p(66950),Ee=p(38570),fe=p(38745),be=p(56683),ye=p(41840);const Ke="esri.widgets.Widget",Ue=I.Z.getLogger(Ke);let he=0;function Le(Y,me){for(const Ie in me)null!=Y[Ie]&&("object"==typeof Y[Ie]&&"object"==typeof me[Ie]?Le(Y[Ie],me[Ie]):Y[Ie]=me[Ie]);return Y}const Je=(Y=>{let me;const Ie=_t(_t({},z),Y),$e=(Y=>_t(_t({},ee),Y))(Ie),rt=$e.performanceLogger;let Qe,Xe=!0,qe=!1;const ke=[],dt=[],We=(ht,mt,Kt)=>{let Bt;$e.eventHandlerInterceptor=(qt,gr,er,vr)=>function(pr){let hr;rt("domEvent",pr);const st=((Y,me)=>{const Ie=[];for(;Y&&Y!==me;)Ie.push(Y),Y=Y.parentNode;return Ie})(pr.currentTarget,Bt.domNode),ft=st.some(Lt=>{var Ft;return customElements.get(null==Lt||null==(Ft=Lt.tagName)?void 0:Ft.toLowerCase())});if(pr.eventPhase!==Event.CAPTURING_PHASE&&ft){const Lt=pr.composedPath(),Ft=Lt.slice(Lt.indexOf(pr.currentTarget),Lt.indexOf(Bt.domNode)).filter(Dt=>Dt.getRootNode()===Dt.ownerDocument).reverse();hr=re(Bt.getLastRender(),Ft,!0)}else st.reverse(),hr=re(Bt.getLastRender(),st);let St;return hr&&(St=Ie.handleInterceptedEvent(me,hr,this,pr)),rt("domEventProcessed",pr),St},null==Ie.postProcessProjectionOptions||Ie.postProcessProjectionOptions($e);const $t=Kt();Bt=ht(mt,$t,$e),ke.push(Bt),dt.push(Kt),Ie.afterFirstVNodeRendered&&Ie.afterFirstVNodeRendered(Bt,$t)};let nt=()=>{if(Qe=void 0,Xe){Xe=!1,rt("renderStart",void 0);for(let ht=0;ht<ke.length;ht++){const mt=dt[ht]();rt("rendered",void 0),ke[ht].update(mt),rt("patched",void 0)}rt("renderDone",void 0),Xe=!0}};return Ie.modifyDoRenderImplementation&&(nt=Ie.modifyDoRenderImplementation(nt,ke,dt)),me={renderNow:nt,scheduleRender:()=>{Qe||qe||(Qe=requestAnimationFrame(nt))},stop:()=>{Qe&&(cancelAnimationFrame(Qe),Qe=void 0),qe=!0},resume:()=>{qe=!1,Xe=!0,me.scheduleRender()},append:(ht,mt)=>{We(M.v.append,ht,mt)},insertBefore:(ht,mt)=>{We(M.v.insertBefore,ht,mt)},merge:(ht,mt)=>{We(M.v.merge,ht,mt)},replace:(ht,mt)=>{We(M.v.replace,ht,mt)},detach:ht=>{for(let mt=0;mt<dt.length;mt++)if(dt[mt]===ht)return dt.splice(mt,1),ke.splice(mt,1)[0];throw new Error("renderFunction was not found")}},me})({postProcessProjectionOptions(Y){const me=Y.eventHandlerInterceptor,Ie=/capture$/i;Y.eventHandlerInterceptor=($e,rt,Qe,Xe)=>{const qe=me($e,rt,Qe,Xe),ke=Ie.test($e);if(!(($e=$e.replace(Ie,"")).toLowerCase()in Qe)||ke){const dt=$e[2].toLowerCase()+$e.slice(3),We=mt=>qe.call(Qe,mt);Qe.addEventListener(dt,We,ke);const nt=()=>Qe.removeEventListener(dt,We,ke),ht=Xe.afterRemoved;Xe.afterRemoved=mt=>{null==ht||ht(mt),nt()}}return qe}},handleInterceptedEvent(Y,me,Ie,$e){const{eventPhase:rt,type:Qe}=$e,Xe=rt===Event.CAPTURING_PHASE;let qe=`on${Qe}${Xe?"capture":""}`;const ke=me.properties;(qe in ke||(qe=`on${Qe[0].toUpperCase()}${Qe.slice(1)}${Xe?"Capture":""}`,qe in ke))&&((0,te.Uy)(),Y.scheduleRender(),ke[qe].call(ke.bind||Ie,$e))}});let Oe=!1,xe=class extends((0,k.v)(C.Z.EventedAccessor)){constructor(Y,me){var Ie;super(Y,me),Ie=this,this._attached=!1,this._internalHandles=new $.Z,this._projector=Je,this._readyForTrueRender=!1,this.domNode=null,this.iconClass="esri-icon-checkbox-unchecked",this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=(0,Z.Ds)((0,g.Z)(function*(){if(Ie._messageBundleProps&&Ie._messageBundleProps.length){const ke=yield(0,Z.as)(Ie._messageBundleProps.map(function(){var dt=(0,g.Z)(function*({bundlePath:We,propertyName:nt}){let ht=yield(0,ye.ME)(We);Ie.uiStrings&&Object.keys(Ie.uiStrings)&&(ht=Le((0,D.d9)(ht),Ie.uiStrings)),Ie[nt]=ht});return function(We){return dt.apply(this,arguments)}}()));for(const dt of ke)dt.error&&Ue.error("widget-intl:locale-error",Ie.declaredClass,dt.error)}yield Ie.loadLocale()})),function pe(){(0,ae.YY)((0,de.hF)((0,se.V)("components/assets")))}();const rt=(0,fe.Yo)()||"light";["light","dark"].includes(rt)||(0,B.x9)(Ue,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const Qe="esri-widget-uid-"+(0,V.D)(),Xe=this.render.bind(this);this._trackingTarget=new N.M(()=>this.scheduleRender());const qe=()=>{var ke;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:Qe,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const dt=Xe();let{properties:We}=dt;We||(dt.properties=We={});let{key:nt,styles:ht}=We;nt||(We.key=Qe),ht||(We.styles=ht={}),ht.display||(ht.display="");let mt=0;return null==(ke=dt.children)||ke.forEach(Kt=>{if((0,ie.ZJ)(Kt.vnodeSelector))return;let{properties:Bt}=Kt;Bt||(Kt.properties=Bt={}),Bt.key||(Bt.key=`${this.id}--${mt++}`)}),(0,ie.dh)(this,dt)};this.render=()=>{if(Oe)return qe();let ke=(0,te.O9)(this);if(ke)return ke;this._trackingTarget.clear(),Oe=!0;try{ke=(0,x.LJ)(this._trackingTarget,qe)}finally{Oe=!1}return(0,te.KF)(this,ke),ke},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()}))}normalizeCtorArgs(Y,me){const Ie=_t({},Y);return me&&(Ie.container=me),Ie}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(Z.H9)}loadDependencies(){return(0,g.Z)(function*(){})()}loadLocale(){return(0,g.Z)(function*(){})()}destroy(){this.destroyed||(this._trackingTarget=(0,W.SC)(this._trackingTarget),this.viewModel=(0,W.SC)(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,(0,te.w7)(this))}set container(Y){this._get("container")||this._set("container",Y)}castContainer(Y){return(0,j.L7)(Y)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+he++}set id(Y){Y&&this._set("id",Y)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector,handles:this._internalHandles}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||((0,te.w7)(this),this._projector.scheduleRender())}classes(...Y){return Ee.Sh.apply(this,Y)}own(Y){arguments.length>1&&(Y=Array.prototype.slice.call(arguments)),this._internalHandles.add(Y)}renderNow(){(0,te.w7)(this),this._projector.renderNow()}_postInitialize(){var me,Y=this;if(this.destroyed)return;this.scheduleRender(),null!=(me=this._delegatedEventNames)&&me.length&&this._internalHandles.add((0,X.YP)(()=>this.viewModel,($e,rt)=>{rt&&this._internalHandles.remove("delegated-events"),$e&&this._internalHandles.add(this._delegatedEventNames.map(Qe=>$e.on(Qe,Xe=>{this.emit(Qe,Xe)})),"delegated-events")},X.nn)),this.postInitialize();const Ie=function(){var $e=(0,g.Z)(function*(){yield Y._loadLocale().catch(Z.H9),Y.scheduleRender()});return function(){return $e.apply(this,arguments)}}();this._internalHandles.add([(0,be.qe)(Ie),(0,X.YP)(()=>this.uiStrings,Ie),(0,X.gx)(()=>this.container,$e=>{this.destroyed||this._attach($e)},{initial:!0,once:!0})])}_attach(Y){Y&&(this._projector.merge(Y,this.render),this._attached=!0)}_detach(Y){Y&&this._attached&&(this._projector.detach(this.render),Y.parentNode&&Y.parentNode.removeChild(Y),this._attached=!1)}};xe[ie.$X]=!0,(0,b._)([(0,w.Cb)()],xe.prototype,"_readyForTrueRender",void 0),(0,b._)([(0,w.Cb)({value:null})],xe.prototype,"container",null),(0,b._)([(0,T.p)("container")],xe.prototype,"castContainer",null),(0,b._)([(0,w.Cb)({aliasOf:"container"})],xe.prototype,"domNode",void 0),(0,b._)([(0,w.Cb)()],xe.prototype,"iconClass",void 0),(0,b._)([(0,w.Cb)()],xe.prototype,"id",null),(0,b._)([(0,w.Cb)()],xe.prototype,"label",void 0),(0,b._)([(0,w.Cb)()],xe.prototype,"renderable",null),(0,b._)([(0,w.Cb)()],xe.prototype,"uiStrings",void 0),(0,b._)([(0,w.Cb)()],xe.prototype,"viewModel",void 0),(0,b._)([(0,w.Cb)()],xe.prototype,"visible",void 0),(0,b._)([(0,w.Cb)()],xe.prototype,"key",void 0),(0,b._)([(0,w.Cb)()],xe.prototype,"children",void 0),(0,b._)([(0,w.Cb)()],xe.prototype,"afterCreate",void 0),(0,b._)([(0,w.Cb)()],xe.prototype,"afterUpdate",void 0),(0,b._)([(0,w.Cb)()],xe.prototype,"afterRemoved",void 0),xe=(0,b._)([(0,O.j)(Ke)],xe);const Be=xe},24940:(He,ve,p)=>{"use strict";p.d(ve,{h:()=>b});var g=p(38570);function b(){return function(j,C){if(!j[C])throw new TypeError(`Cannot auto bind undefined function '${C}'`);return{value:B(j[C])}}}function B(j){return function(C,...$){!function J(j){const{type:C}=j;return j instanceof KeyboardEvent||"keyup"===C||"keydown"===C||"keypress"===C}(C)?j.call(this,C,...$):(0,g.pf)(C.key)&&(C.preventDefault(),C.stopPropagation(),C.target.click())}}},25552:(He,ve,p)=>{"use strict";function g(b){return function(J,B){J.hasOwnProperty("_messageBundleProps")||(J._messageBundleProps=J._messageBundleProps?J._messageBundleProps.slice():[]),J._messageBundleProps.push({bundlePath:b,propertyName:B})}}p.d(ve,{H:()=>g})},94450:(He,ve,p)=>{"use strict";p.d(ve,{u:()=>j});var g=p(81431),b=function($){return{vnodeSelector:"",properties:void 0,children:void 0,text:$.toString(),domNode:null}},J=function($,L){for(var D=0,I=$.length;D<I;D++){var W=$[D];Array.isArray(W)?J(W,L):null!=W&&!1!==W&&(W.hasOwnProperty("vnodeSelector")||(W=b(W)),L.push(W))}};function j($,L,...D){return"function"!=typeof $||(0,g.ZJ)($)?function($,L){for(var D=[],I=2;I<arguments.length;I++)D[I-2]=arguments[I];if(1===D.length&&"string"==typeof D[0])return{vnodeSelector:$,properties:L||void 0,children:void 0,text:D[0],domNode:null};var W=[];return J(D,W),{vnodeSelector:$,properties:L||void 0,children:W,text:void 0,domNode:null}}($,L,...D):$(L,...D)}},81431:(He,ve,p)=>{"use strict";p.d(ve,{$X:()=>b,ZJ:()=>I,dh:()=>C});var g=p(54024);const b=Symbol("widget"),J=[],B={},j=new WeakMap;function C(W,k){let Z=k.children;if(Z&&Z.length)for(let V=0;V<Z.length;++V)Z[V]=C(W,Z[V]);else Z=J;const X=k.vnodeSelector;if(I(X)){const V=k.properties||B,w=V.key||X;return{vnodeSelector:"div",properties:{key:w,afterCreate:$,afterUpdate:L,afterRemoved:D,parentWidget:W,widgetConstructor:X,widgetProperties:Sr(_t({},V),{key:w,children:Z})},children:void 0,text:void 0,domNode:null}}return k}function $(W,k,Z,{parentWidget:X,widgetConstructor:V,widgetProperties:w}){const T=new V(w);T.container=W,j.set(W,T),null==T.afterCreate||T.afterCreate(T,W),X._internalHandles.add((0,g.kB)(()=>D(W)))}function L(W,k,Z,{widgetProperties:X}){const V=j.get(W);V&&(V.set(X),null==V.afterUpdate||V.afterUpdate(V,W))}function D(W){const k=j.get(W);k&&(k.destroy(),j.delete(W))}function I(W){return"function"==typeof W&&W[b]}},66950:(He,ve,p)=>{"use strict";p.d(ve,{Uy:()=>b,w7:()=>j,O9:()=>J,KF:()=>B});const g=new Map;function b(){g.clear()}function J(C){return g.get(C)}function B(C,$){g.set(C,$)}function j(C){g.delete(C)}},40669:(He,ve,p)=>{"use strict";function L(I){return I&&"function"==typeof I.render}function D(I){return I&&"function"==typeof I.postMixInProperties&&"function"==typeof I.buildRendering&&"function"==typeof I.postCreate&&"function"==typeof I.startup}p.d(ve,{o:()=>D,Qd:()=>L}),p(24940),p(55538),p(8314),p(63290),p(94450),p(38570)},38745:(He,ve,p)=>{"use strict";function g(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function b(){return g().startsWith("dark")}function J(){return"calcite-theme-"+(b()?"dark":"light")}p.d(ve,{rk:()=>J,Yo:()=>g,$o:()=>b})},38570:(He,ve,p)=>{"use strict";p.d(ve,{Sh:()=>bs,vU:()=>Ls,pV:()=>fn,pf:()=>Ds,dZ:()=>ys,w3:()=>ls,Yo:()=>en});var j=Object.prototype,C=Function.prototype.toString,$=j.hasOwnProperty,L=C.call(Object),D=j.toString,I=function J(De,Wt){return function(It){return De(Wt(It))}}(Object.getPrototypeOf,Object),X={exports:{}},V={},w={exports:{}},T={};function O(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var M=/javascript\s*\:/gim;T.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},T.getDefaultWhiteList=O,T.onAttr=function x(De,Wt,It){},T.onIgnoreAttr=function N(De,Wt,It){},T.safeAttrValue=function Q(De,Wt){return M.test(Wt)?"":Wt};var ee_trim=function(De){return String.prototype.trim?De.trim():De.replace(/(^\s*)|(\s*$)/g,"")},ee_trimRight=function(De){return String.prototype.trimRight?De.trimRight():De.replace(/(\s*$)/g,"")},ce=T;function K(De){return null==De}function se(De){(De=function ae(De){var Wt={};for(var It in De)Wt[It]=De[It];return Wt}(De||{})).whiteList=De.whiteList||ce.whiteList,De.onAttr=De.onAttr||ce.onAttr,De.onIgnoreAttr=De.onIgnoreAttr||ce.onIgnoreAttr,De.safeAttrValue=De.safeAttrValue||ce.safeAttrValue,this.options=De}se.prototype.process=function(De){if(!(De=(De=De||"").toString()))return"";var It=this.options,sr=It.whiteList,cr=It.onAttr,br=It.onIgnoreAttr,Er=It.safeAttrValue;return function le(De,Wt){";"!==(De=ee_trimRight(De))[De.length-1]&&(De+=";");var It=De.length,sr=!1,cr=0,br=0,Er="";function fr(){if(!sr){var Or=ee_trim(De.slice(cr,br)),At=Or.indexOf(":");if(-1!==At){var at=ee_trim(Or.slice(0,At)),Ct=ee_trim(Or.slice(At+1));if(at){var lt=Wt(cr,Er.length,at,Ct,Or);lt&&(Er+=lt+"; ")}}}cr=br+1}for(;br<It;br++){var Ar=De[br];if("/"===Ar&&"*"===De[br+1]){var Ur=De.indexOf("*/",br+2);if(-1===Ur)break;cr=(br=Ur+1)+1,sr=!1}else"("===Ar?sr=!0:")"===Ar?sr=!1:";"===Ar?sr||fr():"\n"===Ar&&fr()}return ee_trim(Er)}(De,function(Ar,Ur,Or,At,at){var Ct=sr[Or],lt=!1;if(!0===Ct?lt=Ct:"function"==typeof Ct?lt=Ct(At):Ct instanceof RegExp&&(lt=Ct.test(At)),!0!==lt&&(lt=!1),At=Er(Or,At)){var Zt,Tt={position:Ur,sourcePosition:Ar,source:at,isWhite:lt};if(lt)return K(Zt=cr(Or,At,Tt))?Or+":"+At:Zt;if(!K(Zt=br(Or,At,Tt)))return Zt}})};var de=se;!function(De,Wt){var It=T,sr=de;for(var br in(Wt=De.exports=function cr(Er,fr){return new sr(fr).process(Er)}).FilterCSS=sr,It)Wt[br]=It[br]}(w,w.exports);var ue={indexOf:function(De,Wt){var It,sr;if(Array.prototype.indexOf)return De.indexOf(Wt);for(It=0,sr=De.length;It<sr;It++)if(De[It]===Wt)return It;return-1},forEach:function(De,Wt,It){var sr,cr;if(Array.prototype.forEach)return De.forEach(Wt,It);for(sr=0,cr=De.length;sr<cr;sr++)Wt.call(It,De[sr],sr,De)},trim:function(De){return String.prototype.trim?De.trim():De.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(De){var It=/\s|\n|\t/.exec(De);return It?It.index:-1}},ie=w.exports.getDefaultWhiteList,te=ue;var fe=new(0,w.exports.FilterCSS);function he(De){return De.replace(Le,"&lt;").replace(Je,"&gt;")}var Le=/</g,Je=/>/g,Oe=/"/g,xe=/&quot;/g,Be=/&#([a-zA-Z0-9]*);?/gim,Y=/&colon;?/gim,me=/&newline;?/gim,Ie=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,$e=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,rt=/u\s*r\s*l\s*\(.*/gi;function Qe(De){return De.replace(Oe,"&quot;")}function Xe(De){return De.replace(xe,'"')}function qe(De){return De.replace(Be,function(It,sr){return String.fromCharCode("x"===sr[0]||"X"===sr[0]?parseInt(sr.substr(1),16):parseInt(sr,10))})}function ke(De){return De.replace(Y,":").replace(me," ")}function dt(De){for(var Wt="",It=0,sr=De.length;It<sr;It++)Wt+=De.charCodeAt(It)<32?" ":De.charAt(It);return te.trim(Wt)}function We(De){return dt(De=ke(De=qe(De=Xe(De))))}function nt(De){return he(De=Qe(De))}V.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},V.getDefaultWhiteList=function Ee(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},V.onTag=function be(De,Wt,It){},V.onIgnoreTag=function ye(De,Wt,It){},V.onTagAttr=function Ke(De,Wt,It){},V.onIgnoreTagAttr=function Ue(De,Wt,It){},V.safeAttrValue=function Me(De,Wt,It,sr){if(It=We(It),"href"===Wt||"src"===Wt){if("#"===(It=te.trim(It)))return"#";if("http://"!==It.substr(0,7)&&"https://"!==It.substr(0,8)&&"mailto:"!==It.substr(0,7)&&"tel:"!==It.substr(0,4)&&"data:image/"!==It.substr(0,11)&&"ftp://"!==It.substr(0,6)&&"./"!==It.substr(0,2)&&"../"!==It.substr(0,3)&&"#"!==It[0]&&"/"!==It[0])return""}else if("background"===Wt){if(Ie.lastIndex=0,Ie.test(It))return""}else if("style"===Wt){if($e.lastIndex=0,$e.test(It)||(rt.lastIndex=0,rt.test(It)&&(Ie.lastIndex=0,Ie.test(It))))return"";!1!==sr&&(It=(sr=sr||fe).process(It))}return nt(It)},V.escapeHtml=he,V.escapeQuote=Qe,V.unescapeQuote=Xe,V.escapeHtmlEntities=qe,V.escapeDangerHtml5Entities=ke,V.clearNonPrintableCharacter=dt,V.friendlyAttrValue=We,V.escapeAttrValue=nt,V.onIgnoreTagStripAll=function ht(){return""},V.StripTagBody=function mt(De,Wt){"function"!=typeof Wt&&(Wt=function(){});var It=!Array.isArray(De),cr=[],br=!1;return{onIgnoreTag:function(Er,fr,Ar){if(function sr(Er){return!!It||-1!==te.indexOf(De,Er)}(Er)){if(Ar.isClosing){var Ur="[/removed]";return cr.push([!1!==br?br:Ar.position,Ar.position+Ur.length]),br=!1,Ur}return br||(br=Ar.position),"[removed]"}return Wt(Er,fr,Ar)},remove:function(Er){var fr="",Ar=0;return te.forEach(cr,function(Ur){fr+=Er.slice(Ar,Ur[0]),Ar=Ur[1]}),fr+=Er.slice(Ar)}}},V.stripCommentTag=function Kt(De){for(var Wt="",It=0;It<De.length;){var sr=De.indexOf("\x3c!--",It);if(-1===sr){Wt+=De.slice(It);break}Wt+=De.slice(It,sr);var cr=De.indexOf("--\x3e",sr);if(-1===cr)break;It=cr+3}return Wt},V.stripBlankChar=function Bt(De){var Wt=De.split("");return(Wt=Wt.filter(function(It){var sr=It.charCodeAt(0);return!(127===sr||sr<=31&&10!==sr&&13!==sr)})).join("")},V.cssFilter=fe,V.getDefaultCSSWhiteList=ie;var $t={},qt=ue;function gr(De){var Wt=qt.spaceIndex(De);if(-1===Wt)var It=De.slice(1,-1);else It=De.slice(1,Wt+1);return"/"===(It=qt.trim(It).toLowerCase()).slice(0,1)&&(It=It.slice(1)),"/"===It.slice(-1)&&(It=It.slice(0,-1)),It}function er(De){return"</"===De.slice(0,2)}var pr=/[^a-zA-Z0-9_:\.\-]/gim;function st(De,Wt){for(;Wt<De.length;Wt++){var It=De[Wt];if(" "!==It)return"="===It?Wt:-1}}function ft(De,Wt){for(;Wt>0;Wt--){var It=De[Wt];if(" "!==It)return"="===It?Wt:-1}}function Lt(De){return function St(De){return'"'===De[0]&&'"'===De[De.length-1]||"'"===De[0]&&"'"===De[De.length-1]}(De)?De.substr(1,De.length-2):De}$t.parseTag=function vr(De,Wt,It){var sr="",cr=0,br=!1,Er=!1,fr=0,Ar=De.length,Ur="",Or="";e:for(fr=0;fr<Ar;fr++){var At=De.charAt(fr);if(!1===br){if("<"===At){br=fr;continue}}else if(!1===Er){if("<"===At){sr+=It(De.slice(cr,fr)),br=fr,cr=fr;continue}if(">"===At){sr+=It(De.slice(cr,br)),Ur=gr(Or=De.slice(br,fr+1)),sr+=Wt(br,sr.length,Ur,Or,er(Or)),cr=fr+1,br=!1;continue}if('"'===At||"'"===At)for(var at=1,Ct=De.charAt(fr-at);""===Ct.trim()||"="===Ct;){if("="===Ct){Er=At;continue e}Ct=De.charAt(fr-++at)}}else if(At===Er){Er=!1;continue}}return cr<De.length&&(sr+=It(De.substr(cr))),sr},$t.parseAttr=function hr(De,Wt){var It=0,sr=[],cr=!1,br=De.length;function Er(At,at){if(!((At=(At=qt.trim(At)).replace(pr,"").toLowerCase()).length<1)){var Ct=Wt(At,at||"");Ct&&sr.push(Ct)}}for(var fr=0;fr<br;fr++){var Or,Ar=De.charAt(fr);if(!1!==cr||"="!==Ar)if(!1===cr||fr!==It||'"'!==Ar&&"'"!==Ar||"="!==De.charAt(fr-1)){if(/\s|\n|\t/.test(Ar)){if(De=De.replace(/\s|\n|\t/g," "),!1===cr){if(-1===(Or=st(De,fr))){Er(qt.trim(De.slice(It,fr))),cr=!1,It=fr+1;continue}fr=Or-1;continue}if(-1===(Or=ft(De,fr-1))){Er(cr,Lt(qt.trim(De.slice(It,fr)))),cr=!1,It=fr+1;continue}}}else{if(-1===(Or=De.indexOf(Ar,fr+1)))break;Er(cr,qt.trim(De.slice(It+1,Or))),cr=!1,It=(fr=Or)+1}else cr=De.slice(It,fr),It=fr+1}return It<De.length&&(!1===cr?Er(De.slice(It)):Er(cr,Lt(qt.trim(De.slice(It))))),qt.trim(sr.join(" "))};var Ft=w.exports.FilterCSS,Dt=V,Gt=$t.parseTag,Qt=$t.parseAttr,gt=ue;function ut(De){return null==De}function Pe(De){(De=function ot(De){var Wt={};for(var It in De)Wt[It]=De[It];return Wt}(De||{})).stripIgnoreTag&&(De.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),De.onIgnoreTag=Dt.onIgnoreTagStripAll),De.whiteList=De.whiteList||Dt.whiteList,De.onTag=De.onTag||Dt.onTag,De.onTagAttr=De.onTagAttr||Dt.onTagAttr,De.onIgnoreTag=De.onIgnoreTag||Dt.onIgnoreTag,De.onIgnoreTagAttr=De.onIgnoreTagAttr||Dt.onIgnoreTagAttr,De.safeAttrValue=De.safeAttrValue||Dt.safeAttrValue,De.escapeHtml=De.escapeHtml||Dt.escapeHtml,this.options=De,!1===De.css?this.cssFilter=!1:(De.css=De.css||{},this.cssFilter=new Ft(De.css))}Pe.prototype.process=function(De){if(!(De=(De=De||"").toString()))return"";var It=this.options,sr=It.whiteList,cr=It.onTag,br=It.onIgnoreTag,Er=It.onTagAttr,fr=It.onIgnoreTagAttr,Ar=It.safeAttrValue,Ur=It.escapeHtml,Or=this.cssFilter;It.stripBlankChar&&(De=Dt.stripBlankChar(De)),It.allowCommentTag||(De=Dt.stripCommentTag(De));var At=!1;It.stripIgnoreTagBody&&(At=Dt.StripTagBody(It.stripIgnoreTagBody,br),br=At.onIgnoreTag);var at=Gt(De,function(Ct,lt,Tt,Zt,lr){var ur,_r={sourcePosition:Ct,position:lt,isClosing:lr,isWhite:sr.hasOwnProperty(Tt)};if(!ut(ur=cr(Tt,Zt,_r)))return ur;if(_r.isWhite){if(_r.isClosing)return"</"+Tt+">";var xr=function Ze(De){var Wt=gt.spaceIndex(De);if(-1===Wt)return{html:"",closing:"/"===De[De.length-2]};var It="/"===(De=gt.trim(De.slice(Wt+1,-1)))[De.length-1];return It&&(De=gt.trim(De.slice(0,-1))),{html:De,closing:It}}(Zt),jr=sr[Tt],Nr=Qt(xr.html,function(Ir,_s){var Ss,Br=-1!==gt.indexOf(jr,Ir);return ut(Ss=Er(Tt,Ir,_s,Br))?Br?(_s=Ar(Tt,Ir,_s,Or))?Ir+'="'+_s+'"':Ir:ut(Ss=fr(Tt,Ir,_s,Br))?void 0:Ss:Ss});return Zt="<"+Tt,Nr&&(Zt+=" "+Nr),xr.closing&&(Zt+=" /"),Zt+">"}return ut(ur=br(Tt,Zt,_r))?Ur(Zt):ur},Ur);return At&&(at=At.remove(at)),at};var Ge=Pe;!function(De,Wt){var It=V,sr=$t,cr=Ge;function br(Ar,Ur){return new cr(Ur).process(Ar)}for(var Er in(Wt=De.exports=br).filterXSS=br,Wt.FilterXSS=cr,It)Wt[Er]=It[Er];for(var Er in sr)Wt[Er]=sr[Er];(function fr(){return"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope})()&&(self.filterXSS=De.exports)}(X,X.exports);var Jt,nr,vt=function(){function De(Wt,It){var cr,sr=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(br,Er,fr,Ar){return"a"===br&&"href"===Er||("img"===br||"source"===br)&&"src"===Er?sr.sanitizeUrl(fr):X.exports.safeAttrValue(br,Er,fr,Ar)}},Wt&&!It?cr=Wt:Wt&&It?(cr=Object.create(this.arcgisFilterOptions),Object.keys(Wt).forEach(function(br){"whiteList"===br?cr.whiteList=sr._extendObjectOfArrays([sr.arcgisWhiteList,Wt.whiteList||{}]):cr[br]=Wt[br]})):(cr=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=cr,this._xssFilter=new X.exports.FilterXSS(cr)}return De.prototype.sanitize=function(Wt,It){switch(void 0===It&&(It={}),typeof Wt){case"number":return isNaN(Wt)||!isFinite(Wt)?null:Wt;case"boolean":return Wt;case"string":return this._xssFilter.process(Wt);case"object":return this._iterateOverObject(Wt,It);default:return It.allowUndefined&&void 0===Wt?void 0:null}},De.prototype.sanitizeUrl=function(Wt){var It=this._trim(Wt.substring(0,Wt.indexOf(":")));return"/"===Wt||"#"===Wt||"#"===Wt[0]||this.allowedProtocols.indexOf(It.toLowerCase())>-1?X.exports.escapeAttrValue(Wt):""},De.prototype.sanitizeHTMLAttribute=function(Wt,It,sr,cr){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(Wt,It,sr,cr):X.exports.safeAttrValue(Wt,It,sr,cr)},De.prototype.validate=function(Wt,It){void 0===It&&(It={});var sr=this.sanitize(Wt,It);return{isValid:Wt===sr,sanitized:sr}},De.prototype._extendObjectOfArrays=function(Wt){var It={};return Wt.forEach(function(sr){Object.keys(sr).forEach(function(cr){It[cr]=Array.isArray(sr[cr])&&Array.isArray(It[cr])?It[cr].concat(sr[cr]):sr[cr]})}),It},De.prototype._iterateOverObject=function(Wt,It){var sr=this;void 0===It&&(It={});try{var cr=!1,br=void 0;if(Array.isArray(Wt))br=Wt.reduce(function(fr,Ar){var Ur=sr.validate(Ar,It);return Ur.isValid?fr.concat([Ar]):(cr=!0,fr.concat([Ur.sanitized]))},[]);else{if(!function k(De){if(!function W(De){return!!De&&"object"==typeof De}(De)||"[object Object]"!=D.call(De)||function b(De){var Wt=!1;if(null!=De&&"function"!=typeof De.toString)try{Wt=!!(De+"")}catch(It){}return Wt}(De))return!1;var Wt=I(De);if(null===Wt)return!0;var It=$.call(Wt,"constructor")&&Wt.constructor;return"function"==typeof It&&It instanceof It&&C.call(It)==L}(Wt))return It.allowUndefined&&void 0===Wt?void 0:null;br=Object.keys(Wt).reduce(function(fr,Ar){var Ur=Wt[Ar],Or=sr.validate(Ur,It);return Or.isValid?fr[Ar]=Ur:(cr=!0,fr[Ar]=Or.sanitized),fr},{})}return cr?br:Wt}catch(fr){return null}},De.prototype._trim=function(Wt){return String.prototype.trim?Wt.trim():Wt.replace(/(^\s*)|(\s*$)/g,"")},De}(),zt=p(35575),Rt=(p(54024),p(8314),p(63290)),Ut=p(66950),Gr=function(De){Jt||function(De){if("WebkitTransition"in De.style)Jt="webkitTransitionEnd",nr="webkitAnimationEnd";else{if(!("transition"in De.style))throw new Error("Your browser is not supported!");Jt="transitionend",nr="animationend"}}(De)},Qr=function(De,Wt){return void 0===Wt&&(Wt=De+"-active"),function(It){Gr(It);var sr=!1,cr=function(br){sr||(sr=!0,It.removeEventListener(Jt,cr),It.removeEventListener(nr,cr),It.classList.remove(De),It.classList.remove(Wt))};It.classList.add(De),It.addEventListener(Jt,cr),It.addEventListener(nr,cr),requestAnimationFrame(function(){It.classList.add(Wt)})}},Zr=function(De,Wt){return void 0===Wt&&(Wt=De+"-active"),function(It,sr){Gr(It);var cr=!1,br=function(Er){cr||(cr=!0,It.removeEventListener(Jt,br),It.removeEventListener(nr,br),sr())};It.classList.add(De),It.addEventListener(Jt,br),It.addEventListener(nr,br),requestAnimationFrame(function(){It.classList.add(Wt)})}};Rt.Z.getLogger("esri.widgets.support.widgetUtils");function bs(De){const Wt=zt.Z.acquire();for(let sr=0;sr<arguments.length;sr++){const cr=arguments[sr],br=typeof cr;if("string"===br)Wt.push(cr);else if(Array.isArray(cr))Wt.push.apply(Wt,cr);else if("object"===br)for(const Er in cr)cr[Er]&&Wt.push(Er)}const It=Wt.join(" ");return zt.Z.release(Wt),It}function ys(De){const Wt=null==De?void 0:De.closest("[dir]");return null!==Wt&&Wt instanceof HTMLElement&&"rtl"===Wt.dir||"rtl"===document.dir}function fn(De){this[De.getAttribute("data-node-ref")]=null}function en(De){this[De.getAttribute("data-node-ref")]=De}function Ls(De,Wt){return("enter"===De?Qr:Zr)(Wt)}(()=>{const De=new Map;new ResizeObserver(It=>{(0,Ut.Uy)();for(const sr of It)De.get(sr.target)(sr)})})();const Ns=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce((De,Wt)=>(De[Wt]=[],De),{}),tn=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],ls=new vt({whiteList:Ns,onTagAttr:(De,Wt,It)=>{const sr=`${Wt}="${It}"`;if(tn.includes(Wt))return sr},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Ds(De){return"Enter"===De||" "===De}}}]);